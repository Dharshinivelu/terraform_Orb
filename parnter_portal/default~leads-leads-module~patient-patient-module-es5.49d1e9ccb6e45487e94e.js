!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(s){a=!0,r=s}finally{try{i||null==l.return||l.return()}finally{if(a)throw r}}return n}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3+Kf":function(t,e,n){"use strict";n.d(e,"a",function(){return P});var i=n("pJ0c"),a=n("fXoL"),r=n("ofXK"),o=n("xB20"),l=n("nJia");function s(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"nz-descriptions"),a.Xb(2,"nz-descriptions-item",5),a.Xc(3),a.Wb(),a.Xb(4,"nz-descriptions-item",3),a.Xc(5),a.Wb(),a.Wb(),a.Ub()),2&t){var n=e.$implicit;a.Db(3),a.Yc(null==n?null:n.id),a.Db(2),a.Yc(null==n?null:n.idType)}}function c(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){var n=a.ic().$implicit;a.Db(1),a.Zc(" ",null==n||null==n.address?null:n.address.line1,",\xa0 ")}}function u(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){var n=a.ic().$implicit;a.Db(1),a.Zc(" ",null==n||null==n.address?null:n.address.line2,",\xa0 ")}}function p(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){var n=a.ic().$implicit;a.Db(1),a.Zc(" ",null==n||null==n.address?null:n.address.city,",\xa0 ")}}function f(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){var n=a.ic().$implicit;a.Db(1),a.Zc(" ",null==n||null==n.address?null:n.address.state,"\xa0 ")}}function g(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){var n=a.ic().$implicit;a.Db(1),a.Zc(" -\xa0",null==n||null==n.address?null:n.address.country," ")}}function h(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){var n=a.ic().$implicit;a.Db(1),a.Zc(" -\xa0",null==n||null==n.address?null:n.address.pin," ")}}function v(t,e){1&t&&(a.Xb(0,"span"),a.Xc(1," N/A "),a.Wb())}function m(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"nz-descriptions"),a.Xb(2,"nz-descriptions-item",6),a.Xc(3),a.Wb(),a.Xb(4,"nz-descriptions-item",3),a.Xc(5),a.Wb(),a.Xb(6,"nz-descriptions-item",4),a.Xc(7),a.Wb(),a.Xb(8,"nz-descriptions-item",7),a.Xb(9,"span",8),a.Xb(10,"span",9),a.Vc(11,c,2,1,"ng-container",10),a.Vc(12,u,2,1,"ng-container",10),a.Vc(13,p,2,1,"ng-container",10),a.Vc(14,f,2,1,"ng-container",10),a.Vc(15,g,2,1,"ng-container",10),a.Vc(16,h,2,1,"ng-container",10),a.Wb(),a.Vc(17,v,2,0,"span",10),a.Wb(),a.Wb(),a.Wb(),a.Ub()),2&t){var n=e.$implicit;a.Db(3),a.Yc(null==n?null:n.name),a.Db(2),a.Yc(null==n||null==n.type?null:n.type.name),a.Db(2),a.Yc(null==n||null==n.type?null:n.type.code),a.Db(3),a.wc("nzTooltipTitle","",null==n||null==n.address?null:n.address.line1,"\n                         ",null==n||null==n.address?null:n.address.line2," ",null==n||null==n.address?null:n.address.city,"\n                         ",null==n||null==n.address?null:n.address.state," ",null==n||null==n.address?null:n.address.country,"\n                         ",null==n||null==n.address?null:n.address.pin,""),a.Db(1),a.rc("ngIf",null==n||null==n.address?null:n.address.line1),a.Db(1),a.rc("ngIf",null==n||null==n.address?null:n.address.line2),a.Db(1),a.rc("ngIf",null==n||null==n.address?null:n.address.city),a.Db(1),a.rc("ngIf",null==n||null==n.address?null:n.address.state),a.Db(1),a.rc("ngIf",null==n||null==n.address?null:n.address.country),a.Db(1),a.rc("ngIf",null==n||null==n.address?null:n.address.pin),a.Db(1),a.rc("ngIf",!(null!=n&&null!=n.address&&n.address.line1||null!=n&&null!=n.address&&n.address.line2||null!=n&&null!=n.address&&n.address.city||null!=n&&null!=n.address&&n.address.state||null!=n&&null!=n.address&&n.address.country||null!=n&&null!=n.address&&n.address.pin))}}function S(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"nz-descriptions"),a.Xb(2,"nz-descriptions-item",3),a.Xc(3),a.Wb(),a.Xb(4,"nz-descriptions-item",4),a.Xc(5),a.Wb(),a.Wb(),a.Ub()),2&t){var n=e.$implicit;a.Db(3),a.Yc(null==n?null:n.name),a.Db(2),a.Yc(null==n?null:n.code)}}function I(t,e){if(1&t&&(a.Xb(0,"div",1),a.Xb(1,"strong"),a.Xc(2,"Identifiers"),a.Wb(),a.Sb(3,"br"),a.Vc(4,s,6,2,"ng-container",2),a.Sb(5,"br"),a.Xb(6,"strong"),a.Xc(7,"Locations"),a.Wb(),a.Sb(8,"br"),a.Vc(9,m,18,16,"ng-container",2),a.Sb(10,"br"),a.Xb(11,"strong"),a.Xc(12,"Reasons"),a.Wb(),a.Sb(13,"br"),a.Vc(14,S,6,2,"ng-container",2),a.Sb(15,"br"),a.Xb(16,"strong"),a.Xc(17,"Type"),a.Wb(),a.Sb(18,"br"),a.Xb(19,"nz-descriptions"),a.Xb(20,"nz-descriptions-item",3),a.Xc(21),a.Wb(),a.Xb(22,"nz-descriptions-item",4),a.Xc(23),a.Wb(),a.Wb(),a.Wb()),2&t){var n=a.ic();a.Db(4),a.rc("ngForOf",null==n.encounter?null:n.encounter.identifiers),a.Db(5),a.rc("ngForOf",null==n.encounter?null:n.encounter.locations),a.Db(5),a.rc("ngForOf",null==n.encounter?null:n.encounter.reason),a.Db(7),a.Yc(null==n.encounter||null==n.encounter.type?null:n.encounter.type.name),a.Db(2),a.Yc(null==n.encounter||null==n.encounter.type?null:n.encounter.type.code)}}var D,y,C=((D=function t(){b(this,t)}).\u0275fac=function(t){return new(t||D)},D.\u0275cmp=a.Lb({type:D,selectors:[["app-encounter"]],inputs:{encounter:"encounter"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],["nzTitle","Type"],["nzTitle","Code"],["nzTitle","Id"],["nzTitle","Name"],["nzTitle","Address"],["id","address"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"]],template:function(t,e){1&t&&a.Vc(0,I,24,5,"div",0),2&t&&a.rc("ngIf",e.encounter)},directives:[r.q,r.p,o.a,o.b,l.d],styles:[".container[_ngcontent-%COMP%]{margin-top:-15px!important;padding:0 20px 0 0!important}"]}),D),E=n("dEAy"),X=((y=function(){function t(e){b(this,t),this._modalService=e}return d(t,[{key:"showEncounterModal",value:function(t){return this._modalService.create({nzContent:C,nzComponentParams:{encounter:t},nzTitle:"Encounter",nzWidth:"700px",nzFooter:null})}}]),t}()).\u0275fac=function(t){return new(t||y)(a.bc(E.f))},y.\u0275prov=a.Nb({token:y,factory:y.\u0275fac,providedIn:"root"}),y),T=n("rMZv"),z=n("OrU2"),_=n("fhRi");function O(t,e){if(1&t&&a.Sb(0,"app-patient-status-notification",5),2&t){var n=a.ic();a.rc("patientInfo",n.patientInfo)}}function M(t,e){if(1&t){var n=a.Yb();a.Xb(0,"tr",6),a.ec("click",function(){a.Lc(n);var t=e.$implicit;return a.ic().showEncounter(t)}),a.Xb(1,"td"),a.Xc(2),a.jc(3,"utcToLocalTime"),a.Wb(),a.Xb(4,"td"),a.Xc(5),a.Wb(),a.Xb(6,"td"),a.Xc(7),a.Wb(),a.Wb()}if(2&t){var i=e.$implicit;a.Db(2),a.Yc(a.kc(3,3,null==i?null:i.dateTime)),a.Db(3),a.Yc(null==i||null==i.type?null:i.type.name),a.Db(2),a.Yc(null==i||null==i.type?null:i.type.code)}}var A,P=((A=function(){function t(e,n){b(this,t),this._visitsEncountersService=e,this._visitsEncountersModalService=n}return d(t,[{key:"ngOnInit",value:function(){this.getEncounters()}},{key:"getEncounters",value:function(){var t=this;this._visitsEncountersService.fetchEncountersByUserId(this.patientId).subscribe(function(e){t.encounters=e})}},{key:"showEncounter",value:function(t){this._visitsEncountersModalService.showEncounterModal(t)}}]),t}()).\u0275fac=function(t){return new(t||A)(a.Rb(i.a),a.Rb(X))},A.\u0275cmp=a.Lb({type:A,selectors:[["app-encounters"]],inputs:{patientInfo:"patientInfo",patientId:"patientId"},decls:14,vars:4,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],["nzFrontPagination","true",3,"nzData","nzTotal"],["encountersTable",""],[3,"click",4,"ngFor","ngForOf"],[3,"patientInfo"],[3,"click"]],template:function(t,e){if(1&t&&(a.Xb(0,"div",0),a.Vc(1,O,1,1,"app-patient-status-notification",1),a.Xb(2,"nz-table",2,3),a.Xb(4,"thead"),a.Xb(5,"tr"),a.Xb(6,"th"),a.Xc(7,"Date Time"),a.Wb(),a.Xb(8,"th"),a.Xc(9,"Type"),a.Wb(),a.Xb(10,"th"),a.Xc(11,"Code"),a.Wb(),a.Wb(),a.Wb(),a.Xb(12,"tbody"),a.Vc(13,M,8,5,"tr",4),a.Wb(),a.Wb(),a.Wb()),2&t){var n=a.Ic(3);a.Db(1),a.rc("ngIf",e.patientInfo&&("FLAGGED_FOR_DISQUALIFICATION"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"SUSPENDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus))),a.Db(1),a.rc("nzData",e.encounters)("nzTotal",null==e.encounters?null:e.encounters.length),a.Db(11),a.rc("ngForOf",null==n?null:n.data)}},directives:[r.q,T.f,T.n,T.o,T.e,T.l,T.i,r.p,z.a],pipes:[_.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),A)},AMsP:function(i,a,o){"use strict";o.r(a),o.d(a,"PatientModule",function(){return qS});var s=o("ZlwT"),c=o("4AsR"),u=o("bKRa"),p=o("icpI"),f=o("rbUg"),g=o("KZX/"),h=o("ofXK"),v=o("3Pt+"),m=o("tyNb"),S=o("SHZf"),I=o("UFn0"),D=o("qQcL"),y=o("geco"),C=o("tk/3"),E=o("AytR"),X=o("HZ0a"),T=o("2lmJ"),z=function(){var t=function t(){b(this,t)};return t.SUCCESS="Success",t.EMAIL_FORMAT_ERROR="Email Format Error",t.DOB_FORMAT_ERROR="DOB Format Error",t.UNIT_NOT_IDENTIFIED="Unit Not Identified",t.ROW_PARSE_ERROR="Row Parse Error",t.INVALID_MONITORING_IDS="Monitoring Staff Id is invalid",t.EMPTY_CONTACT_NUMBERS="Empty contact numbers",t.EMPTY_FIRST_NAMES="Empty First names",t.EMPTY_LAST_NAMES="Empty Last names",t.EMPTY_DOB="Empty Date of Births",t.EMPTY_INCOMPLETE_PRIMARY_INSURANCE="Empty or Incomplete Insurance Details",t.EMPTY_PHYSICIAN_ID="Physician Id cannot be blank",t.DUPLICATE_PHONE_NUMBERS_IN_SHEET="Duplicate phone numbers in sheet",t.DUPLICATE_EMAIL_IDS_IN_SHEET="Duplicate Email IDs in sheet",t.DUPLICATE_MEDICAL_RECORDS_IN_SHEET="Duplicate Medical Records or Patient ID in sheet",t.DUPLICATE_USERNAMES_IN_SHEET="Duplicate Usernames in sheet",t.DUPLICATE_INSURANCE_DETAILS_IN_SHEET="Duplicate Insurance Details in sheet",t.PRE_EXISTING_EMAILS="Pre Existing Email IDs in database",t.PRE_EXISTING_PHONE_NUMBERS="Pre Existing phone numbers in database",t.PRE_EXISTING_MEDICAL_RECORDS="Pre Existing Medical Records or Patient ID in database",t.PRE_EXISTING_USERNAMES="Pre Existing usernames in database",t.PRE_EXISTING_INSURANCES="Pre Existing insurances in database",t.USERS_CREATED="Users created",t}(),_=o("fXoL"),O=o("dEAy"),M=o("OzZK"),A=o("RwU8"),P=o("C2AL");function N(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1,"/ you can either proceed to go with the entries"),_.Wb())}function W(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",4),_.ec("click",function(){return _.Lc(n),_.ic().proceed()}),_.Xc(1," Proceed "),_.Wb()}}var R,x=((R=function(){function t(e){b(this,t),this._modalRef=e}return d(t,[{key:"ngOnInit",value:function(){}},{key:"goBack",value:function(){this._modalRef.close("go_back")}},{key:"openLogs",value:function(){this._modalRef.close("open_logs")}},{key:"proceed",value:function(){this._modalRef.close("proceed_with_create")}}]),t}()).\u0275fac=function(t){return new(t||R)(_.Rb(O.e))},R.\u0275cmp=_.Lb({type:R,selectors:[["app-conflicts-popup"]],inputs:{message:"message",hasSuccessEntries:"hasSuccessEntries"},decls:12,vars:3,consts:[[2,"color","red"],[4,"ngIf"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(_.Xc(0,"There are some conflicts in your file related to "),_.Xb(1,"span",0),_.Xc(2),_.Wb(),_.Xc(3,". You can go back to correct and re-upload the file / you can download error logs\n"),_.Vc(4,N,2,0,"span",1),_.Xc(5,". "),_.Xb(6,"div"),_.Xb(7,"button",2),_.ec("click",function(){return e.goBack()}),_.Xc(8," Go back "),_.Wb(),_.Xb(9,"button",2),_.ec("click",function(){return e.openLogs()}),_.Xc(10," Open Logs "),_.Wb(),_.Vc(11,W,2,0,"button",3),_.Wb()),2&t&&(_.Db(2),_.Yc(e.message),_.Db(2),_.rc("ngIf",e.hasSuccessEntries),_.Db(7),_.rc("ngIf",e.hasSuccessEntries))},directives:[h.q,M.a,A.a,P.a],styles:["div[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:flex-end}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:130px;margin-left:15px}"]}),R),k=o("KqfI"),w=o("nLCl"),V=o("bNXi"),L=o("S5rh"),F=o("bE2y"),U=o("D9mS"),j=o("FwiY"),Y=o("zAKX"),B=o("Szod"),H=o("eHCX"),G=o("5vDB"),Z=o("B+r4"),$=o("MZxW"),q=o("TaO5"),K=o("oyxB"),Q=o("rMZv");function J(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.email)}}function tt(t,e){if(1&t&&(_.Xb(0,"nz-table",1,2),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"Email"),_.Wb(),_.Wb(),_.Wb(),_.Xb(12,"tbody"),_.Vc(13,J,9,4,"tr",3),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersCreated),_.Db(13),_.rc("ngForOf",n.data)}}var et,nt=((et=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||et)},et.\u0275cmp=_.Lb({type:et,selectors:[["app-successful-entries"]],inputs:{usersCreated:"usersCreated"},decls:1,vars:1,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzData"],["usersCreatedTable",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&_.Vc(0,tt,14,2,"nz-table",0),2&t&&_.rc("ngIf",(null==e.usersCreated?null:e.usersCreated.length)>0)},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p],styles:[""]}),et);function it(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName)}}function at(t,e){if(1&t&&(_.Xb(0,"nz-table",6,7),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"tbody"),_.Vc(11,it,7,3,"tr",8),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithEmptyContactNumbers),_.Db(11),_.rc("ngForOf",n.data)}}function rt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.email)}}function ot(t,e){if(1&t&&(_.Xb(0,"nz-table",9,10),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"Last Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Email"),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"tbody"),_.Vc(11,rt,7,3,"tr",8),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithEmptyFirstNames),_.Db(11),_.rc("ngForOf",n.data)}}function lt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.email)}}function st(t,e){if(1&t&&(_.Xb(0,"nz-table",11,12),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Email"),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"tbody"),_.Vc(11,lt,7,3,"tr",8),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithEmptyLastNames),_.Db(11),_.rc("ngForOf",n.data)}}function ct(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName)}}function ut(t,e){if(1&t&&(_.Xb(0,"nz-table",13,14),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"tbody"),_.Vc(11,ct,7,3,"tr",8),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithEmptyDob),_.Db(11),_.rc("ngForOf",n.data)}}function dt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName)}}function bt(t,e){if(1&t&&(_.Xb(0,"nz-table",15,16),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"tbody"),_.Vc(11,dt,7,3,"tr",8),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithEmptyInsurance),_.Db(11),_.rc("ngForOf",n.data)}}function pt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName)}}function ft(t,e){if(1&t&&(_.Xb(0,"nz-table",17,18),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"tbody"),_.Vc(11,pt,7,3,"tr",8),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithEmptyPhysician),_.Db(11),_.rc("ngForOf",n.data)}}var gt,ht=((gt=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||gt)},gt.\u0275cmp=_.Lb({type:gt,selectors:[["app-empty-entries"]],inputs:{usersWithEmptyContactNumbers:"usersWithEmptyContactNumbers",usersWithEmptyFirstNames:"usersWithEmptyFirstNames",usersWithEmptyLastNames:"usersWithEmptyLastNames",usersWithEmptyDob:"usersWithEmptyDob",usersWithEmptyInsurance:"usersWithEmptyInsurance",usersWithEmptyPhysician:"usersWithEmptyPhysician"},decls:6,vars:6,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty phone numbers",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty first names",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Last Names",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty DOBs",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Insurance Details",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty PCP Staff Ids",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty phone numbers",3,"nzData"],["usersWithEmptyContactNumbersTable",""],[4,"ngFor","ngForOf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty first names",3,"nzData"],["usersWithEmptyFirstNamesTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Last Names",3,"nzData"],["usersWithEmptyLastNamesTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty DOBs",3,"nzData"],["usersWithEmptyDobTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Insurance Details",3,"nzData"],["usersWithEmptyInsuranceTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty PCP Staff Ids",3,"nzData"],["usersWithEmptyPhysicianTable",""]],template:function(t,e){1&t&&(_.Vc(0,at,12,2,"nz-table",0),_.Vc(1,ot,12,2,"nz-table",1),_.Vc(2,st,12,2,"nz-table",2),_.Vc(3,ut,12,2,"nz-table",3),_.Vc(4,bt,12,2,"nz-table",4),_.Vc(5,ft,12,2,"nz-table",5)),2&t&&(_.rc("ngIf",(null==e.usersWithEmptyContactNumbers?null:e.usersWithEmptyContactNumbers.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithEmptyFirstNames?null:e.usersWithEmptyFirstNames.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithEmptyLastNames?null:e.usersWithEmptyLastNames.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithEmptyDob?null:e.usersWithEmptyDob.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithEmptyInsurance?null:e.usersWithEmptyInsurance.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithEmptyPhysician?null:e.usersWithEmptyPhysician.length)>0))},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p],styles:[""]}),gt);function vt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.contactNumber)}}function mt(t,e){if(1&t&&(_.Xb(0,"nz-table",4,5),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"Duplicate Phone Numbers"),_.Wb(),_.Wb(),_.Wb(),_.Xb(12,"tbody"),_.Vc(13,vt,9,4,"tr",6),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithDuplicatePhoneNumbers),_.Db(13),_.rc("ngForOf",n.data)}}function St(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.email)}}function It(t,e){if(1&t&&(_.Xb(0,"nz-table",7,8),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"Duplicate Emails"),_.Wb(),_.Wb(),_.Wb(),_.Xb(12,"tbody"),_.Vc(13,St,9,4,"tr",6),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithDuplicateEmails),_.Db(13),_.rc("ngForOf",n.data)}}function Dt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.patientId)}}function yt(t,e){if(1&t&&(_.Xb(0,"nz-table",9,10),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"Duplicate medical records"),_.Wb(),_.Wb(),_.Wb(),_.Xb(12,"tbody"),_.Vc(13,Dt,9,4,"tr",6),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithDuplicateMedicalRecords),_.Db(13),_.rc("ngForOf",n.data)}}function Ct(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td"),_.Xc(10),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.primaryInsurance),_.Db(2),_.Yc(n.primaryInsuranceNumber)}}function Et(t,e){if(1&t&&(_.Xb(0,"nz-table",11,12),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"Insurance provider"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"Insurance number"),_.Wb(),_.Wb(),_.Wb(),_.Xb(14,"tbody"),_.Vc(15,Ct,11,5,"tr",6),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic();_.rc("nzData",i.usersWithDuplicateInsurances),_.Db(15),_.rc("ngForOf",n.data)}}var Xt,Tt=((Xt=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Xt)},Xt.\u0275cmp=_.Lb({type:Xt,selectors:[["app-duplicate-entries"]],inputs:{usersWithDuplicatePhoneNumbers:"usersWithDuplicatePhoneNumbers",usersWithDuplicateEmails:"usersWithDuplicateEmails",usersWithDuplicateMedicalRecords:"usersWithDuplicateMedicalRecords",usersWithDuplicateInsurances:"usersWithDuplicateInsurances"},decls:4,vars:4,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate phone numbers",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate emails",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Medical Records",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Insurances",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate phone numbers",3,"nzData"],["usersWithDuplicatePhoneNumbersTable",""],[4,"ngFor","ngForOf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate emails",3,"nzData"],["usersWithDuplicateEmailsTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Medical Records",3,"nzData"],["usersWithDuplicateMedicalRecordsTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Insurances",3,"nzData"],["usersWithDuplicateInsurancesTable",""]],template:function(t,e){1&t&&(_.Vc(0,mt,14,2,"nz-table",0),_.Vc(1,It,14,2,"nz-table",1),_.Vc(2,yt,14,2,"nz-table",2),_.Vc(3,Et,16,2,"nz-table",3)),2&t&&(_.rc("ngIf",(null==e.usersWithDuplicatePhoneNumbers?null:e.usersWithDuplicatePhoneNumbers.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithDuplicateEmails?null:e.usersWithDuplicateEmails.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithDuplicateMedicalRecords?null:e.usersWithDuplicateMedicalRecords.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithDuplicateInsurances?null:e.usersWithDuplicateInsurances.length)>0))},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p],styles:[""]}),Xt);function zt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.email)}}function _t(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"h4"),_.Xc(2,"Pre Existing "),_.Xb(3,"span",1),_.Xc(4),_.Wb(),_.Xc(5," in database"),_.Wb(),_.Xb(6,"nz-table",2,3),_.Xb(8,"thead"),_.Xb(9,"tr"),_.Xb(10,"th"),_.Xc(11,"Data Row Number"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"First Name"),_.Wb(),_.Xb(14,"th"),_.Xc(15,"Last Name"),_.Wb(),_.Xb(16,"th"),_.Xc(17,"Pre - existing Email"),_.Wb(),_.Wb(),_.Wb(),_.Xb(18,"tbody"),_.Vc(19,zt,9,4,"tr",4),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(7),i=_.ic();_.Db(4),_.Zc(" ",i.usersWithPreExistingEmails.length," Email IDs "),_.Db(2),_.rc("nzData",i.usersWithPreExistingEmails),_.Db(13),_.rc("ngForOf",n.data)}}function Ot(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.patientId)}}function Mt(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"h4"),_.Xc(2,"Pre Existing "),_.Xb(3,"span",1),_.Xc(4),_.Wb(),_.Xc(5," in database"),_.Wb(),_.Xb(6,"nz-table",2,5),_.Xb(8,"thead"),_.Xb(9,"tr"),_.Xb(10,"th"),_.Xc(11,"Data Row Number"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"First Name"),_.Wb(),_.Xb(14,"th"),_.Xc(15,"Last Name"),_.Wb(),_.Xb(16,"th"),_.Xc(17,"Pre - existing medical records"),_.Wb(),_.Wb(),_.Wb(),_.Xb(18,"tbody"),_.Vc(19,Ot,9,4,"tr",4),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(7),i=_.ic();_.Db(4),_.Zc(" ",null==i.usersWithPreExistingMedicalRecords?null:i.usersWithPreExistingMedicalRecords.length," Patient IDs "),_.Db(2),_.rc("nzData",i.usersWithPreExistingMedicalRecords),_.Db(13),_.rc("ngForOf",n.data)}}function At(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.contactNumber)}}function Pt(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"h4"),_.Xc(2,"Pre Existing "),_.Xb(3,"span",1),_.Xc(4),_.Wb(),_.Xc(5," in database"),_.Wb(),_.Xb(6,"nz-table",2,6),_.Xb(8,"thead"),_.Xb(9,"tr"),_.Xb(10,"th"),_.Xc(11,"Data Row Number"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"First Name"),_.Wb(),_.Xb(14,"th"),_.Xc(15,"Last Name"),_.Wb(),_.Xb(16,"th"),_.Xc(17,"Pre-existing Phone Numbers"),_.Wb(),_.Wb(),_.Wb(),_.Xb(18,"tbody"),_.Vc(19,At,9,4,"tr",4),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(7),i=_.ic();_.Db(4),_.Zc(" ",null==i.usersWithPreExistingPhoneNumbers?null:i.usersWithPreExistingPhoneNumbers.length," Phone Numbers "),_.Db(2),_.rc("nzData",i.usersWithPreExistingPhoneNumbers),_.Db(13),_.rc("ngForOf",n.data)}}function Nt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td"),_.Xc(10),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.primaryInsurance),_.Db(2),_.Yc(n.primaryInsuranceNumber)}}function Wt(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"h4"),_.Xc(2,"Pre Existing "),_.Xb(3,"span",1),_.Xc(4),_.Wb(),_.Xc(5," in database"),_.Wb(),_.Xb(6,"nz-table",2,7),_.Xb(8,"thead"),_.Xb(9,"tr"),_.Xb(10,"th"),_.Xc(11,"Data Row Number"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"First Name"),_.Wb(),_.Xb(14,"th"),_.Xc(15,"Last Name"),_.Wb(),_.Xb(16,"th"),_.Xc(17,"Insurance provider"),_.Wb(),_.Xb(18,"th"),_.Xc(19,"Insurance number"),_.Wb(),_.Wb(),_.Wb(),_.Xb(20,"tbody"),_.Vc(21,Nt,11,5,"tr",4),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(7),i=_.ic();_.Db(4),_.Zc(" ",null==i.usersWithPreExistingInsurances?null:i.usersWithPreExistingInsurances.length," Insurances "),_.Db(2),_.rc("nzData",i.usersWithPreExistingInsurances),_.Db(15),_.rc("ngForOf",n.data)}}var Rt,xt=((Rt=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Rt)},Rt.\u0275cmp=_.Lb({type:Rt,selectors:[["app-existing-entries"]],inputs:{usersWithPreExistingPhoneNumbers:"usersWithPreExistingPhoneNumbers",usersWithPreExistingEmails:"usersWithPreExistingEmails",usersWithPreExistingMedicalRecords:"usersWithPreExistingMedicalRecords",usersWithPreExistingInsurances:"usersWithPreExistingInsurances"},decls:4,vars:4,consts:[[4,"ngIf"],[1,"error-data"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzData"],["usersWithPreExistingEmailsTable",""],[4,"ngFor","ngForOf"],["usersWithPreExistingMedicalRecordsTable",""],["usersWithPreExistingPhoneNumbersTable",""],["usersWithPreExistingInsurancesTable",""]],template:function(t,e){1&t&&(_.Vc(0,_t,20,3,"div",0),_.Vc(1,Mt,20,3,"div",0),_.Vc(2,Pt,20,3,"div",0),_.Vc(3,Wt,22,3,"div",0)),2&t&&(_.rc("ngIf",(null==e.usersWithPreExistingEmails?null:e.usersWithPreExistingEmails.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithPreExistingMedicalRecords?null:e.usersWithPreExistingMedicalRecords.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithPreExistingPhoneNumbers?null:e.usersWithPreExistingPhoneNumbers.length)>0),_.Db(1),_.rc("ngIf",(null==e.usersWithPreExistingInsurances?null:e.usersWithPreExistingInsurances.length)>0))},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p],styles:[".error-data[_ngcontent-%COMP%]{color:red}h4[_ngcontent-%COMP%]{font-weight:600;margin-bottom:0}div[_ngcontent-%COMP%]{margin:20px 0}"]}),Rt);function kt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td",4),_.Xc(10,"Email error"),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.email)}}function wt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td",4),_.Xc(10,"DOB error"),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.contactNumber)}}function Vt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td",4),_.Xc(10,"Row Format error"),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.contactNumber)}}function Lt(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td",4),_.Xc(10,"Height/Weight unit errors"),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.contactNumber)}}function Ft(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td",4),_.Xc(10,"Monitoring Staff Id is invalid"),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.rowId),_.Db(2),_.Yc(n.firstName),_.Db(2),_.Yc(n.lastName),_.Db(2),_.Yc(n.contactNumber)}}function Ut(t,e){if(1&t&&(_.Xb(0,"nz-table",1,2),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5,"Data Row Number"),_.Wb(),_.Xb(6,"th"),_.Xc(7,"First Name"),_.Wb(),_.Xb(8,"th"),_.Xc(9,"Last Name"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"Email"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"Format Error Type"),_.Wb(),_.Wb(),_.Wb(),_.Xb(14,"tbody"),_.Vc(15,kt,11,4,"tr",3),_.Vc(16,wt,11,4,"tr",3),_.Vc(17,Vt,11,4,"tr",3),_.Vc(18,Lt,11,4,"tr",3),_.Vc(19,Ft,11,4,"tr",3),_.Wb(),_.Wb()),2&t){var n=_.ic();_.rc("nzTemplateMode",!0),_.Db(15),_.rc("ngForOf",n.usersWithEmailFormatError),_.Db(1),_.rc("ngForOf",n.usersWithDobFormatError),_.Db(1),_.rc("ngForOf",n.usersWithRowFormatError),_.Db(1),_.rc("ngForOf",n.usersWithUnitFormatError),_.Db(1),_.rc("ngForOf",n.usersWithInvalidMonitoringStaffError)}}var jt,Yt=((jt=function(){function t(){b(this,t),this.usersWithFormatErrors=new Array}return d(t,[{key:"ngOnInit",value:function(){this.usersWithFormatErrors.concat(this.usersWithEmailFormatError),this.usersWithFormatErrors.concat(this.usersWithDobFormatError),this.usersWithFormatErrors.concat(this.usersWithUnitFormatError),this.usersWithFormatErrors.concat(this.usersWithRowFormatError),this.usersWithFormatErrors.concat(this.usersWithInvalidMonitoringStaffError)}}]),t}()).\u0275fac=function(t){return new(t||jt)},jt.\u0275cmp=_.Lb({type:jt,selectors:[["app-format-error-entries"]],inputs:{usersWithEmailFormatError:"usersWithEmailFormatError",usersWithDobFormatError:"usersWithDobFormatError",usersWithUnitFormatError:"usersWithUnitFormatError",usersWithRowFormatError:"usersWithRowFormatError",usersWithInvalidMonitoringStaffError:"usersWithInvalidMonitoringStaffError"},decls:1,vars:1,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzTemplateMode",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzTemplateMode"],["usersWithFormatErrors",""],[4,"ngFor","ngForOf"],[1,"error-data"]],template:function(t,e){1&t&&_.Vc(0,Ut,20,6,"nz-table",0),2&t&&_.rc("ngIf",(null==e.usersWithEmailFormatError?null:e.usersWithEmailFormatError.length)>0||(null==e.usersWithDobFormatError?null:e.usersWithDobFormatError.length)>0||(null==e.usersWithRowFormatError?null:e.usersWithRowFormatError.length)>0||(null==e.usersWithUnitFormatError?null:e.usersWithUnitFormatError.length)>0||(null==e.usersWithInvalidMonitoringStaffError?null:e.usersWithInvalidMonitoringStaffError.length)>0)},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p],styles:[".error-data[_ngcontent-%COMP%]{color:red}"]}),jt);function Bt(t,e){if(1&t&&(_.Xb(0,"nz-tab",5),_.Sb(1,"app-successful-entries",6),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("usersCreated",n.usersCreated)}}function Ht(t,e){if(1&t&&(_.Xb(0,"nz-tab",7),_.Sb(1,"app-empty-entries",8),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("usersWithEmptyContactNumbers",n.usersWithEmptyContactNumbers)("usersWithEmptyFirstNames",n.usersWithEmptyFirstNames)("usersWithEmptyLastNames",n.usersWithEmptyLastNames)("usersWithEmptyDob",n.usersWithEmptyDob)("usersWithEmptyInsurance",n.usersWithEmptyInsurance)("usersWithEmptyPhysician",n.usersWithEmptyPhysician)}}function Gt(t,e){if(1&t&&(_.Xb(0,"nz-tab",9),_.Sb(1,"app-duplicate-entries",10),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("usersWithDuplicatePhoneNumbers",n.usersWithDuplicatePhoneNumbers)("usersWithDuplicateEmails",n.usersWithDuplicateEmails)("usersWithDuplicateMedicalRecords",n.usersWithDuplicateMedicalRecords)("usersWithDuplicateInsurances",n.usersWithDuplicateInsurances)}}function Zt(t,e){if(1&t&&(_.Xb(0,"nz-tab",11),_.Sb(1,"app-existing-entries",12),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("usersWithPreExistingPhoneNumbers",n.usersWithPreExistingPhoneNumbers)("usersWithPreExistingEmails",n.usersWithPreExistingEmails)("usersWithPreExistingMedicalRecords",n.usersWithPreExistingMedicalRecords)("usersWithPreExistingInsurances",n.usersWithPreExistingInsurances)}}function $t(t,e){if(1&t&&(_.Xb(0,"nz-tab",13),_.Sb(1,"app-format-error-entries",14),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("usersWithEmailFormatError",n.usersWithEmailFormatError)("usersWithDobFormatError",n.usersWithDobFormatError)("usersWithUnitFormatError",n.usersWithUnitFormatError)("usersWithRowFormatError",n.usersWithRowFormatError)("usersWithInvalidMonitoringStaffError",n.usersWithInvalidMonitoringStaffError)}}var qt,Kt=((qt=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){this.processResultsOfEmptyEntriesInSheet(),this.processResultsOfDuplicateEntriesInSheet(),this.processResultsOfExistingEntriesInSheet(),this.processResultsOfFormatErrorEntriesInSheet(),this.processResultsOfCreatedUsersInSheet()}},{key:"processResultsOfEmptyEntriesInSheet",value:function(){var t,e,n,i,a,r;this.usersWithEmptyContactNumbers=this.userActionsPerformedAndReasons[z.EMPTY_CONTACT_NUMBERS],this.usersWithEmptyFirstNames=this.userActionsPerformedAndReasons[z.EMPTY_FIRST_NAMES],this.usersWithEmptyLastNames=this.userActionsPerformedAndReasons[z.EMPTY_LAST_NAMES],this.usersWithEmptyDob=this.userActionsPerformedAndReasons[z.EMPTY_DOB],this.usersWithEmptyInsurance=this.userActionsPerformedAndReasons[z.EMPTY_INCOMPLETE_PRIMARY_INSURANCE],this.usersWithEmptyPhysician=this.userActionsPerformedAndReasons[z.EMPTY_PHYSICIAN_ID],this.hasEmptyEntries=(null===(t=this.usersWithEmptyContactNumbers)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithEmptyFirstNames)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithEmptyLastNames)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithEmptyDob)||void 0===i?void 0:i.length)>0||(null===(a=this.usersWithEmptyInsurance)||void 0===a?void 0:a.length)>0||(null===(r=this.usersWithEmptyPhysician)||void 0===r?void 0:r.length)>0}},{key:"processResultsOfDuplicateEntriesInSheet",value:function(){var t,e,n,i;this.usersWithDuplicatePhoneNumbers=this.userActionsPerformedAndReasons[z.DUPLICATE_PHONE_NUMBERS_IN_SHEET],this.usersWithDuplicateEmails=this.userActionsPerformedAndReasons[z.DUPLICATE_EMAIL_IDS_IN_SHEET],this.usersWithDuplicateMedicalRecords=this.userActionsPerformedAndReasons[z.DUPLICATE_MEDICAL_RECORDS_IN_SHEET],this.usersWithDuplicateInsurances=this.userActionsPerformedAndReasons[z.DUPLICATE_INSURANCE_DETAILS_IN_SHEET],this.hasDuplicateEntries=(null===(t=this.usersWithDuplicatePhoneNumbers)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithDuplicateEmails)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithDuplicateMedicalRecords)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithDuplicateInsurances)||void 0===i?void 0:i.length)>0}},{key:"processResultsOfExistingEntriesInSheet",value:function(){var t,e,n,i;this.usersWithPreExistingPhoneNumbers=this.userActionsPerformedAndReasons[z.PRE_EXISTING_PHONE_NUMBERS],this.usersWithPreExistingEmails=this.userActionsPerformedAndReasons[z.PRE_EXISTING_EMAILS],this.usersWithPreExistingMedicalRecords=this.userActionsPerformedAndReasons[z.PRE_EXISTING_MEDICAL_RECORDS],this.usersWithPreExistingInsurances=this.userActionsPerformedAndReasons[z.PRE_EXISTING_INSURANCES],this.hasExistingEntries=(null===(t=this.usersWithPreExistingPhoneNumbers)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithPreExistingEmails)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithPreExistingMedicalRecords)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithPreExistingInsurances)||void 0===i?void 0:i.length)>0}},{key:"processResultsOfFormatErrorEntriesInSheet",value:function(){var t,e,n,i,a;this.usersWithEmailFormatError=this.userActionsPerformedAndReasons[z.EMAIL_FORMAT_ERROR],this.usersWithDobFormatError=this.userActionsPerformedAndReasons[z.DOB_FORMAT_ERROR],this.usersWithUnitFormatError=this.userActionsPerformedAndReasons[z.UNIT_NOT_IDENTIFIED],this.usersWithRowFormatError=this.userActionsPerformedAndReasons[z.ROW_PARSE_ERROR],this.usersWithInvalidMonitoringStaffError=this.userActionsPerformedAndReasons[z.INVALID_MONITORING_IDS],this.hasFormatErrors=(null===(t=this.usersWithEmailFormatError)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithDobFormatError)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithUnitFormatError)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithRowFormatError)||void 0===i?void 0:i.length)>0||(null===(a=this.usersWithInvalidMonitoringStaffError)||void 0===a?void 0:a.length)>0}},{key:"processResultsOfCreatedUsersInSheet",value:function(){var t;this.usersCreated=this.userActionsPerformedAndReasons[z.USERS_CREATED],this.hasSuccessEntries=(null===(t=this.usersCreated)||void 0===t?void 0:t.length)>0}}]),t}()).\u0275fac=function(t){return new(t||qt)},qt.\u0275cmp=_.Lb({type:qt,selectors:[["app-bulk-add-results"]],inputs:{userActionsPerformedAndReasons:"userActionsPerformedAndReasons"},decls:6,vars:5,consts:[["nzTitle","Successful Entries",4,"ngIf"],["nzTitle","Empty Entries",4,"ngIf"],["nzTitle","Duplicate Entries",4,"ngIf"],["nzTitle","Existing Entries",4,"ngIf"],["nzTitle","Format Error entries",4,"ngIf"],["nzTitle","Successful Entries"],[3,"usersCreated"],["nzTitle","Empty Entries"],[3,"usersWithEmptyContactNumbers","usersWithEmptyFirstNames","usersWithEmptyLastNames","usersWithEmptyDob","usersWithEmptyInsurance","usersWithEmptyPhysician"],["nzTitle","Duplicate Entries"],[3,"usersWithDuplicatePhoneNumbers","usersWithDuplicateEmails","usersWithDuplicateMedicalRecords","usersWithDuplicateInsurances"],["nzTitle","Existing Entries"],[3,"usersWithPreExistingPhoneNumbers","usersWithPreExistingEmails","usersWithPreExistingMedicalRecords","usersWithPreExistingInsurances"],["nzTitle","Format Error entries"],[3,"usersWithEmailFormatError","usersWithDobFormatError","usersWithUnitFormatError","usersWithRowFormatError","usersWithInvalidMonitoringStaffError"]],template:function(t,e){1&t&&(_.Xb(0,"nz-tabset"),_.Vc(1,Bt,2,1,"nz-tab",0),_.Vc(2,Ht,2,6,"nz-tab",1),_.Vc(3,Gt,2,4,"nz-tab",2),_.Vc(4,Zt,2,4,"nz-tab",3),_.Vc(5,$t,2,5,"nz-tab",4),_.Wb()),2&t&&(_.Db(1),_.rc("ngIf",e.hasSuccessEntries),_.Db(1),_.rc("ngIf",e.hasEmptyEntries),_.Db(1),_.rc("ngIf",e.hasDuplicateEntries),_.Db(1),_.rc("ngIf",e.hasExistingEntries),_.Db(1),_.rc("ngIf",e.hasFormatErrors))},directives:[K.d,h.q,K.a,nt,ht,Tt,xt,Yt],styles:[""]}),qt),Qt=o("dRHE"),Jt=o("t2pg");function te(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"span",28),_.Xb(2,"span",29),_.Xc(3),_.jc(4,"tenantName"),_.Wb(),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(3),_.Yc(_.kc(4,1,null==n?null:n.tenantId))}}function ee(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"nz-option",24),_.Xb(2,"span",25),_.Xb(3,"span",26),_.Xc(4),_.Wb(),_.Vc(5,te,5,3,"ng-container",27),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzLabel",null==n?null:n.name)("nzValue",null==n?null:n.id),_.Db(3),_.Zc(" ",null==n?null:n.name," ")}}function ne(t,e){if(1&t&&_.Sb(0,"nz-option",30),2&t){var n=e.$implicit;_.rc("nzLabel",null==n?null:n.fullName)("nzValue",null==n?null:n.id)}}function ie(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"nz-option",31),_.Xc(2),_.Sb(3,"nz-divider",32),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",n)("nzLabel",n.label),_.Db(1),_.Zc(" ",n.label," ")}}function ae(t,e){1&t&&(_.Xb(0,"nz-option",33),_.Xb(1,"div",34),_.Sb(2,"i",35),_.Wb(),_.Wb())}function re(t,e){if(1&t){var n=_.Yb();_.Xb(0,"span",36),_.ec("click",function(t){_.Lc(n);var e=_.ic(3),i=_.Ic(2);return e.showSelectedMonitoringStaffs(t,i)}),_.Xc(1),_.Wb()}if(2&t){var i=e.$implicit;_.Db(1),_.Zc("+ ",i.length," more \xa0\xa0")}}function oe(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"label",5),_.Xc(2,"Select a Site "),_.Wb(),_.Xb(3,"nz-select",17),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic(2).selectedSiteId=t})("ngModelChange",function(t){return _.Lc(n),_.ic(2).onSelectedSiteChange(t)}),_.Vc(4,ee,6,3,"ng-container",18),_.Wb(),_.Xb(5,"label",9),_.Xc(6,"This site will be assigned for all the uploaded users."),_.Wb(),_.Xb(7,"label",5),_.Xc(8,"Select a Physician "),_.Wb(),_.Xb(9,"nz-select",19),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic(2).selectedPhysicianId=t})("ngModelChange",function(t){_.Lc(n);var e=_.ic(2);return e.onSelectedPhysicianChange(e.selectedSiteId,t)}),_.Vc(10,ne,1,2,"nz-option",20),_.Wb(),_.Xb(11,"label",9),_.Xc(12,"Physicians assigned to this site are shown in the above list."),_.Wb(),_.Xb(13,"label",5),_.Xc(14,"Select Monitoring staff to assign patients "),_.Wb(),_.Xb(15,"nz-select",21),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic(2).selectedStaffs=t})("ngModelChange",function(t){return _.Lc(n),_.ic(2).updateCheckedFlagOfSelectedStaff(t)}),_.Vc(16,ie,4,3,"ng-container",18),_.Vc(17,ae,3,0,"nz-option",22),_.Wb(),_.Xb(18,"label",9),_.Xc(19,"Monitoring staffs assigned to this physician are shown in this list."),_.Wb(),_.Vc(20,re,2,1,"ng-template",null,23,_.Wc),_.Ub()}if(2&t){var i=_.Ic(21),a=_.ic(2);_.Db(3),_.rc("ngModel",a.selectedSiteId)("nzDisabled",a.disableSite)("nzLoading",a.loadingSite),_.Db(1),_.rc("ngForOf",a.listOfAllSites),_.Db(5),_.rc("ngModel",a.selectedPhysicianId)("nzDisabled",a.disablePhysician)("nzLoading",a.loadingPhysician),_.Db(1),_.rc("ngForOf",a.listOfAllPhysicians),_.Db(5),_.rc("ngModel",a.selectedStaffs)("nzMaxTagCount",6)("nzMaxTagPlaceholder",i)("nzDisabled",a.disableStaff)("nzLoading",a.loadingMonitoringStaff),_.Db(1),_.rc("ngForOf",a.listOfAllMonitoringStaffs),_.Db(1),_.rc("ngIf",a.loadingMonitoringStaff)}}function le(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",37),_.Xb(2,"div",38),_.Xb(3,"sub-tenant-select",39),_.ec("onSubTenantSelected",function(t){return _.Lc(n),_.ic(2).onSubTenantChange(t)}),_.Wb(),_.Wb(),_.Sb(4,"nz-divider"),_.Wb(),_.Ub()}2&t&&(_.Db(3),_.rc("persist",!1))}function se(t,e){if(1&t){var n=_.Yb();_.Xb(0,"h5"),_.Xb(1,"span",40),_.Sb(2,"i",41),_.Xc(3),_.Wb(),_.Xc(4," \xa0 "),_.Xb(5,"span",42),_.ec("click",function(t){return _.Lc(n),_.ic(2).removeFile(t)}),_.Sb(6,"i",43),_.Xc(7," Delete"),_.Wb(),_.Wb()}if(2&t){var i=_.ic(2);_.Db(3),_.Zc(" Successfully uploaded: ",i.uploadedFile.file.name,"")}}function ce(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Sb(1,"app-header",3),_.jc(2,"translate"),_.Xb(3,"div",4),_.Xb(4,"h3"),_.Xc(5,"You can upload bulk list of patients to the system and can assign them easily."),_.Wb(),_.Xb(6,"label",5),_.Xc(7,"Add patients to"),_.Wb(),_.Xb(8,"nz-radio-group",6),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().uploadType=t}),_.Xb(9,"label",7),_.Xc(10),_.jc(11,"translate"),_.Wb(),_.Xb(12,"label",8),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Wb(),_.Sb(15,"label",9),_.Vc(16,oe,22,15,"ng-container",10),_.Sb(17,"br"),_.Vc(18,le,5,1,"ng-container",10),_.Xb(19,"div",11),_.Xb(20,"button",12),_.ec("click",function(){return _.Lc(n),_.ic().downloadSampleSheet()}),_.Xc(21),_.jc(22,"translate"),_.Wb(),_.Xb(23,"ul"),_.Xb(24,"li"),_.Xc(25),_.jc(26,"translate"),_.Wb(),_.Xb(27,"li"),_.Xc(28),_.jc(29,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(30,"nz-upload",13),_.Vc(31,se,8,1,"h5",10),_.Xb(32,"button",14),_.Xc(33,"BROWSE / DRAG"),_.Wb(),_.Xb(34,"p"),_.Xc(35),_.jc(36,"translate"),_.Wb(),_.Wb(),_.Xb(37,"button",15),_.ec("click",function(){return _.Lc(n),_.ic().processUploadedFile()}),_.Xc(38," UPLOAD "),_.Sb(39,"i",16),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(1),_.sc("defaultTitle",_.kc(2,19,"BULK_ADD.BULK_ADD_PATIENTS")),_.rc("isSearchEnabled",!1)("isActionEnabled",!1),_.Db(7),_.rc("ngModel",i.uploadType),_.Db(2),_.Yc(_.kc(11,21,"REPORT.SERVICE_REPORT.ALL_PHYSICIANS")),_.Db(3),_.Yc(_.kc(14,23,"REPORT.SERVICE_REPORT.SELECT_PHYSICIAN")),_.Db(3),_.rc("ngIf","selectPhysician"===i.uploadType),_.Db(2),_.rc("ngIf","allPhysicians"===i.uploadType),_.Db(3),_.Zc(" ",_.kc(22,25,"BULK_ADD.DOWNLOAD_SAMPLE_FILE")," "),_.Db(4),_.Yc(_.kc(26,27,"BULK_ADD.GUIDELINE.PROPER_DATA_FORMAT")),_.Db(3),_.Yc(_.kc(29,29,"BULK_ADD.GUIDELINE.UNIQUE_FIELDS")),_.Db(2),_.rc("nzCustomRequest",i.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1)("nzDisabled",i.uploadedFileName),_.Db(1),_.rc("ngIf",i.uploadedFileName),_.Db(1),_.rc("disabled",i.uploadedFileName),_.Db(3),_.Yc(_.kc(36,31,"COMMON.DRAG_AND_UPLOAD")),_.Db(2),_.rc("disabled","selectPhysician"===i.uploadType&&(null==i.selectedSiteId||null==i.selectedPhysicianId||null==i.selectedStaffs||0==(null==i.selectedStaffs?null:i.selectedStaffs.length))||null==i.uploadedFileName)}}function ue(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",44),_.Xb(1,"nz-checkbox-group",6),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().selectedStaffs=t}),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(1),_.rc("ngModel",i.selectedStaffs)}}function de(t,e){if(1&t){var n=_.Yb();_.Xb(0,"app-header",45),_.ec("action",function(){return _.Lc(n),_.ic().downloadErrorLogs()})("secondaryAction",function(){return _.Lc(n),_.ic().uploadAnotherFile()}),_.Wb(),_.Xb(1,"div",46),_.Sb(2,"app-bulk-add-results",47),_.Wb()}if(2&t){var i=_.ic();_.rc("isSearchEnabled",!1),_.Db(2),_.rc("userActionsPerformedAndReasons",i.userActionsPerformedAndReasons)}}var be,pe=((be=function(t){r(i,t);var e=l(i);function i(t,n,a,r,o,l){var s;return b(this,i),(s=e.call(this))._http=t,s._notificationsService=n,s._patientsService=a,s._staffService=r,s._patientsEventLogger=o,s.modal=l,s.userType="PATIENT",s.disableSite=!1,s.disablePhysician=!1,s.disableStaff=!1,s.userRole=localStorage.getItem("loggedInUserRole"),s.userId=localStorage.getItem("loggedInUser"),s.userName=localStorage.getItem("loggedInUserName"),s.uploadType="selectPhysician",s.siteTenantMap=new Map,s.handleUpload=function(t){s.uploadedFile=t,s._patientsEventLogger.patientActionEvent("","bulk_patient_add_upload_start");var e=new C.g({bypass:"yes"});return s._http.post(s.uploadURL,t.file,{headers:e,observe:"response",responseType:"text"}).subscribe(function(t){return 200==t.status?(s._patientsEventLogger.patientActionEvent("","bulk_patient_add_upload_success"),s.uploadedFileName=t.body,void s.uploadedFile.onSuccess(t)):(s._patientsEventLogger.patientActionEvent("","bulk_patient_add_upload_fail"),void s._notificationsService.error("Bulk Upload","Something went wrong, please try again!"))},function(t){s.uploadedFile.onError(t,s.uploadedFile.file)},function(){s._patientsEventLogger.patientActionEvent("","bulk_patient_report_upload_fail"),s._notificationsService.error("Bulk Upload","Something went wrong, please try again!")})},s}return d(i,[{key:"ngOnInit",value:function(){var t=this;this._patientsEventLogger.patientActionEvent("","patient_bulk_add_dropdown"),this.uploadURL=E.g.url+"/v2/media/upload/"+Math.random().toString(10).substring(7)+".xlsx",this.loadingSite=!0,this._staffService.fetchSitesForStaff().subscribe(function(e){t.listOfAllSites=e,t.listOfAllSites.forEach(function(e){return t.siteTenantMap.set(e.id,e.tenantId)}),t.updatePhysicianOrStaff(),t.loadingSite=!1},function(e){t._notificationsService.error("Site","Loading sites failed"),t.loadingSite=!1})}},{key:"updatePhysicianOrStaff",value:function(){if(this.userRole===w.a.PHYSICIAN){this.selectedSiteId=this.listOfAllSites[0].id;var t=this.getCurrentPhysician(this.userId,this.userName);this.onSelectedSiteChange(this.selectedSiteId,t),this.selectedPhysicianId=this.userId,this.onSelectedPhysicianChange(this.selectedSiteId,this.selectedPhysicianId),this.disableSite=!0,this.disablePhysician=!0}else this.userRole==w.a.MONITORING_STAFF&&(this.listOfAllMonitoringStaffs=[{label:this.userName,value:this.userId,checked:!0}],this.selectedStaffs=this.listOfAllMonitoringStaffs,this.disableStaff=!0)}},{key:"removeFile",value:function(t){return this.uploadedFile=null,this.uploadedFileName=null,t.stopPropagation(),!1}},{key:"processUploadedFile",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.userActionsPerformedAndReasons=null;var i={tenantId:this.siteTenantMap.get(this.selectedSiteId),fileName:this.uploadedFileName,userType:"PATIENT",siteId:this.selectedSiteId,physicianId:this.selectedPhysicianId,monitoringStaffIds:null===(t=this.selectedStaffs)||void 0===t?void 0:t.filter(function(t){return t.checked}).map(function(t){return t.value})};return this._patientsService.bulkUploadUsers(i,n,"allPhysicians"===this.uploadType).subscribe(function(t){null!=t&&(e.userActionsPerformedAndReasons=t,e.processUserCreationResults(n))},function(t){var n;e._notificationsService.error("Bulk Upload Unsuccessful",null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)})}},{key:"downloadSampleSheet",value:function(){var t="Bulk_Upload_Sheet_Updated_For_Site.xlsx";"allPhysicians"===this.uploadType&&(t="Bulk_Upload_Sheet_Updated_With_PCP.xlsx"),window.open("https://api.cooeyhealth.com/v2/media/"+t,"_blank")}},{key:"onSelectedSiteChange",value:function(t,e){var n=this;if(this.userActionsPerformedAndReasons=null,this.userRole!=w.a.MONITORING_STAFF&&(this.listOfAllMonitoringStaffs=null,this.selectedStaffs=null,this.monitoringStaffSelected=!1),this.listOfAllPhysicians=null,this.selectedPhysicianId=null,this.loadingPhysician=!0,null!=t)return e?(this.listOfAllPhysicians=[e],void(this.loadingPhysician=!1)):void this._staffService.fetchAllPhysiciansBySiteId(t).subscribe(function(t){n.loadingPhysician=!1,null==t||0===t.totalCount?n.noPhysiciansAvailable=!0:n.listOfAllPhysicians=t.result.map(function(t){return t.user})},function(t){n.loadingPhysician=!1,n._notificationsService.error("Physicians","Loading physicians failed"),n.noPhysiciansAvailable=!0})}},{key:"onSelectedPhysicianChange",value:function(t,e){var n=this;this.userActionsPerformedAndReasons=null,this.userRole!=w.a.MONITORING_STAFF&&(this.listOfAllMonitoringStaffs=null,this.loadingMonitoringStaff=!0,this.monitoringStaffSelected=!1,this.selectedStaffs=null,null!=e&&this._staffService.fetchAllMonitoringStaffBySiteIdAndPhysicianId(t,e).subscribe(function(t){var e=null==t?void 0:t.result;n.loadingMonitoringStaff=!1,null!=e&&0!=e.length&&(n.listOfAllMonitoringStaffs=e.map(function(t){return t.user}).map(function(t){return{label:t.fullName,value:t.id,checked:!1}}))},function(t){n.loadingMonitoringStaff=!1,n._notificationsService.error("Monitoring staff","Loading monitoring staffs failed")}))}},{key:"onMonitoringStaffSelected",value:function(t){this.userActionsPerformedAndReasons=null}},{key:"showSelectedMonitoringStaffs",value:function(t,e){var n=this;return t.stopPropagation(),this.modal.create({nzBodyStyle:{padding:"0px 24px 14px 24px"},nzWidth:"350px",nzTitle:"Selected Monitoring Staff",nzContent:e,nzFooter:null}).afterClose.subscribe(function(){n.selectedStaffs=n.selectedStaffs.filter(function(t){return t.checked})}),!1}},{key:"updateCheckedFlagOfSelectedStaff",value:function(t){this.selectedStaffs.forEach(function(e){return e.checked=t.some(function(t){return t.value===e.value})})}},{key:"downloadErrorLogs",value:function(){var t="";for(var e in this.userActionsPerformedAndReasons)if(this.userActionsPerformedAndReasons.hasOwnProperty(e)){t=t.concat("\r\n").concat(e).concat("\r\n");var i,a=n(this.userActionsPerformedAndReasons[e]);try{for(a.s();!(i=a.n()).done;){var r=i.value;for(var o in r)r.hasOwnProperty(o)&&(t=t.concat(r[o]).concat(","));t=t.concat("\r\n")}}catch(u){a.e(u)}finally{a.f()}}var l=document.createElement("a"),s=new Blob([t],{type:"text/csv"}),c=window.URL.createObjectURL(s);l.href=c,l.download="myFile.csv",l.click(),window.URL.revokeObjectURL(c),l.remove()}},{key:"uploadAnotherFile",value:function(){this.userActionsPerformedAndReasons=null,this.showResults=!1}},{key:"processUserCreationResults",value:function(){var t,e,n,i,a,r,o,l,s,c,u,d,b,p,f,g,h,v,m,S,I=this,D=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.userActionsPerformedAndReasons){this.hasEmptyEntries=(null===(t=this.userActionsPerformedAndReasons[z.EMPTY_CONTACT_NUMBERS])||void 0===t?void 0:t.length)>0||(null===(e=this.userActionsPerformedAndReasons[z.EMPTY_FIRST_NAMES])||void 0===e?void 0:e.length)>0||(null===(n=this.userActionsPerformedAndReasons[z.EMPTY_LAST_NAMES])||void 0===n?void 0:n.length)>0||(null===(i=this.userActionsPerformedAndReasons[z.EMPTY_DOB])||void 0===i?void 0:i.length)>0||(null===(a=this.userActionsPerformedAndReasons[z.EMPTY_INCOMPLETE_PRIMARY_INSURANCE])||void 0===a?void 0:a.length)>0||(null===(r=this.userActionsPerformedAndReasons[z.EMPTY_PHYSICIAN_ID])||void 0===r?void 0:r.length)>0,this.hasDuplicateEntries=(null===(o=this.userActionsPerformedAndReasons[z.DUPLICATE_PHONE_NUMBERS_IN_SHEET])||void 0===o?void 0:o.length)>0||(null===(l=this.userActionsPerformedAndReasons[z.DUPLICATE_EMAIL_IDS_IN_SHEET])||void 0===l?void 0:l.length)>0||(null===(s=this.userActionsPerformedAndReasons[z.DUPLICATE_MEDICAL_RECORDS_IN_SHEET])||void 0===s?void 0:s.length)>0||(null===(c=this.userActionsPerformedAndReasons[z.DUPLICATE_INSURANCE_DETAILS_IN_SHEET])||void 0===c?void 0:c.length)>0,this.hasExistingEntries=(null===(u=this.userActionsPerformedAndReasons[z.PRE_EXISTING_PHONE_NUMBERS])||void 0===u?void 0:u.length)>0||(null===(d=this.userActionsPerformedAndReasons[z.PRE_EXISTING_EMAILS])||void 0===d?void 0:d.length)>0||(null===(b=this.userActionsPerformedAndReasons[z.PRE_EXISTING_MEDICAL_RECORDS])||void 0===b?void 0:b.length)>0||(null===(p=this.userActionsPerformedAndReasons[z.PRE_EXISTING_INSURANCES])||void 0===p?void 0:p.length)>0,this.hasFormatErrors=(null===(f=this.userActionsPerformedAndReasons[z.EMAIL_FORMAT_ERROR])||void 0===f?void 0:f.length)>0||(null===(g=this.userActionsPerformedAndReasons[z.DOB_FORMAT_ERROR])||void 0===g?void 0:g.length)>0||(null===(h=this.userActionsPerformedAndReasons[z.UNIT_NOT_IDENTIFIED])||void 0===h?void 0:h.length)>0||(null===(v=this.userActionsPerformedAndReasons[z.ROW_PARSE_ERROR])||void 0===v?void 0:v.length)>0||(null===(m=this.userActionsPerformedAndReasons[z.INVALID_MONITORING_IDS])||void 0===m?void 0:m.length)>0,this.hasSuccessEntries=(null===(S=this.userActionsPerformedAndReasons[z.SUCCESS])||void 0===S?void 0:S.length)>0;var y=new Array;this.showResults=D||!(this.hasEmptyEntries||this.hasDuplicateEntries||this.hasExistingEntries||this.hasFormatErrors),this.showResults||(this.hasEmptyEntries&&y.push("empty entries"),this.hasDuplicateEntries&&y.push("duplicate entries"),this.hasExistingEntries&&y.push("existing entries"),this.hasFormatErrors&&y.push("format error"),this.modal.create({nzTitle:"Conflicts",nzContent:x,nzComponentParams:{message:y.join(" / "),hasSuccessEntries:this.hasSuccessEntries},nzBodyStyle:{padding:"0px 24px 14px 24px"},nzWidth:"700px",nzClosable:!1,nzFooter:null}).afterClose.subscribe(function(t){switch(t){case"go_back":I.userActionsPerformedAndReasons=null,I.showResults=!1;break;case"open_logs":I.showResults=!0;break;case"proceed_with_create":I.processUploadedFile(!0);break;default:Object(k.a)()}}))}}},{key:"getCurrentPhysician",value:function(t,e){return{id:t,firstName:null,middleName:null,lastName:null,fullName:e,dateOfBirth:null,language:null,email:null,username:null,country:null,mobile:null,gender:null,userSettings:null,locationId:null,type:null,address:null,zipCode:null,profilePhotoURL:null,profilePicture:null,timeZone:null,countryCode:null,internalId:null,site:null,otherSites:null,locations:null,clinicianState:null,tenantId:null,role:null,roles:null,profileTags:null,programs:null,programChangeHistory:[],programEnrollments:new Map,healthInfo:null,externalSources:null,credentials:null,selected:null,assigned:null,active:!0,assignedStaffs:[],assignedStaffIds:[],assignedTenants:[],assignedTenantIds:[]}}}]),i}(D.a)).\u0275fac=function(t){return new(t||be)(_.Rb(C.c),_.Rb(V.b),_.Rb(y.a),_.Rb(T.a),_.Rb(X.a),_.Rb(O.f))},be.\u0275cmp=_.Lb({type:be,selectors:[["app-bulk-add"]],features:[_.Ab],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectedMonitoringStaffs",""],["resultsContainer",""],[3,"defaultTitle","isSearchEnabled","isActionEnabled"],[1,"container"],[1,"input-heading"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","allPhysicians"],["nz-radio","","nzValue","selectPhysician"],[1,"input-desc"],[4,"ngIf"],[1,"file-details-container"],["nz-button","","nzSize","large",3,"click"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList","nzDisabled"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-button","","nzType","primary","nzSize","large","id","upload-btn",3,"disabled","click"],["nz-icon","","nzType","arrow-up","nzTheme","outline"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a site",3,"ngModel","nzDisabled","nzLoading","ngModelChange"],[4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a Physician",3,"ngModel","nzDisabled","nzLoading","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["id","multiple-select","nzPlaceHolder","Search Monitoring Staff","nzShowSearch","","nzMode","multiple","nzDropdownClassName","monitoring-staff-options",3,"ngModel","nzMaxTagCount","nzMaxTagPlaceholder","nzDisabled","nzLoading","ngModelChange"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["selectedStaffsTagPlaceHolder",""],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"display","flex"],[2,"width","70%"],[4,"isAccessAcrossTenantEnabled"],[2,"width","30%"],["nz-typography","","nzType","secondary",2,"color","var(--primary-color)"],[3,"nzLabel","nzValue"],["nzCustomContent","",3,"nzValue","nzLabel"],[1,"options-divider"],["nzDisabled","","nzCustomContent",""],[1,"loading-option"],["nz-icon","","nzType","loading",2,"font-size","20px","color","#8BC34A"],[1,"max-tag-placeholder",3,"click"],["nz-row",""],["nz-col","","nzSpan","6"],["mode","SINGLE",3,"persist","onSubTenantSelected"],[2,"color","#8BC34A"],["nz-icon","","nzType","paper-clip","nzTheme","outline"],[2,"color","#FF0000","cursor","pointer",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"monitoring-staff-selection"],["defaultTitle","Bulk Add Patient list","isActionEnabled","true","actionTitle","Download logs","isSecondaryActionEnabled","true","secondaryActionTitle","+ Upload another file",3,"isSearchEnabled","action","secondaryAction"],[1,"results-container","container"],[3,"userActionsPerformedAndReasons"]],template:function(t,e){if(1&t&&(_.Vc(0,ce,40,33,"ng-container",0),_.Vc(1,ue,2,1,"ng-template",null,1,_.Wc),_.Vc(3,de,3,2,"ng-template",null,2,_.Wc)),2&t){var n=_.Ic(4);_.rc("ngIf",!e.showResults)("ngIfElse",n)}},directives:[h.q,L.a,F.c,v.u,v.x,F.b,M.a,A.a,P.a,U.a,j.a,Y.d,h.p,Y.a,B.a,H.a,G.a,Z.c,Z.a,$.a,q.b,Kt],pipes:[Qt.a,Jt.a],styles:[".container[_ngcontent-%COMP%]{width:70%}.results-container[_ngcontent-%COMP%]{width:100%!important}button[_ngcontent-%COMP%]{margin-bottom:10px;border-width:1px}ul[_ngcontent-%COMP%]{text-align:left;list-style-type:none}nz-table[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]     .ant-table-title{font-weight:700}nz-select[_ngcontent-%COMP%]{width:300px}nz-select[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin-top:10px}nz-checkbox-group[_ngcontent-%COMP%]{margin-bottom:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}nz-upload[_ngcontent-%COMP%]{display:block}  .monitoring-staff-selection [nz-checkbox]{display:block;margin-bottom:3px}[_nghost-%COMP%]     .ant-upload.ant-upload-drag{border-style:solid;border-radius:13px;border-color:#000;height:150px;margin-bottom:5px}#upload-btn[_ngcontent-%COMP%]{margin-top:15px}button[disabled][_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%]:active, button[disabled][_ngcontent-%COMP%]:focus, button[disabled][_ngcontent-%COMP%]:hover{color:var(--neutral-color)!important;background-color:#dbdbdb!important;border-style:none}nz-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}#multiple-select[_ngcontent-%COMP%]{min-width:300px;width:auto;display:inline-block}#multiple-select[_ngcontent-%COMP%]     nz-select-item{border:1px solid #adadad;border-radius:12px;background:transparent}#multiple-select[_ngcontent-%COMP%]     nz-select-top-control{padding-left:20px}nz-tag[_ngcontent-%COMP%]{color:var(--primary-color)}  .monitoring-staff-options nz-option-item{line-height:32px;padding:0 12px}  .monitoring-staff-options .options-divider{margin:0!important}  .monitoring-staff-options .loading-option{text-align:center;vertical-align:middle}.input-desc[_ngcontent-%COMP%]{display:block;color:#0f2015;margin-bottom:25px}.input-heading[_ngcontent-%COMP%]{display:block;color:var(--tertiary-color);margin-bottom:3px}.file-details-container[_ngcontent-%COMP%]{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.max-tag-placeholder[_ngcontent-%COMP%]{color:var(--primary-color);cursor:pointer}"]}),be),fe=function t(){b(this,t)},ge=o("0lU3"),he=o("glKu");function ve(t,e){if(1&t){var n=_.Yb();_.Xb(0,"google-chart",11,12),_.ec("select",function(t){return _.Lc(n),_.ic(2).dataPointClicked(t)}),_.Wb()}if(2&t){var i=_.ic(2);_.rc("data",i.data)("columns",i.columnNames)("options",i.options)}}function me(t,e){if(1&t&&(_.Xb(0,"div",9),_.Vc(1,ve,2,3,"google-chart",10),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",!n.isChartLoading)}}function Se(t,e){if(1&t&&(_.Xb(0,"th"),_.Xc(1),_.jc(2,"date"),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",_.lc(2,1,n,"MMM d, y, h:mm")," ")}}function Ie(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Se,3,4,"th",15),_.Ub()),2&t){var n=e.index,i=_.ic(2);_.Db(1),_.rc("ngIf",-1!=i.dataPoint.indexOf(n))}}function De(t,e){if(1&t&&(_.Xb(0,"td"),_.Xc(1),_.Wb()),2&t){var n=_.ic().index,i=_.ic().index,a=_.ic(2);_.Db(1),_.Zc(" ",a.vitalObject[a.vitalObjectKeys[i]][n]," ")}}function ye(t,e){if(1&t&&(_.Vb(0),_.Vc(1,De,2,1,"td",15),_.Ub()),2&t){var n=e.index,i=_.ic(3);_.Db(1),_.rc("ngIf",-1!=i.dataPoint.indexOf(n))}}function Ce(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Vc(3,ye,2,1,"ng-container",14),_.Wb()),2&t){var n=e.index,i=_.ic(2);_.Db(2),_.Yc(i.vitalObjectKeys[n]),_.Db(1),_.rc("ngForOf",i.parameterDates)}}function Ee(t,e){if(1&t&&(_.Xb(0,"div",13),_.Xb(1,"nz-table"),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Vc(7,Ie,2,1,"ng-container",14),_.Wb(),_.Wb(),_.Xb(8,"tbody"),_.Vc(9,Ce,4,2,"tr",14),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.ic();_.Db(5),_.Yc(_.kc(6,3,"PARAMETERS.TITLE")),_.Db(2),_.rc("ngForOf",n.parameterDates),_.Db(2),_.rc("ngForOf",n.vitalObjectLength)}}function Xe(t,e){if(1&t&&(_.Xb(0,"th"),_.Xc(1),_.jc(2,"date"),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",_.lc(2,1,n,"MMM d, y, h:mm")," ")}}function Te(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Xe,3,4,"th",15),_.Ub()),2&t){var n=e.index,i=_.ic(2);_.Db(1),_.rc("ngIf",-1!=i.dataPoint.indexOf(n))}}function ze(t,e){1&t&&_.Sb(0,"app-icons",18)}function _e(t,e){1&t&&_.Sb(0,"app-icons",19)}function Oe(t,e){if(1&t&&(_.Xb(0,"td"),_.Vc(1,ze,1,0,"app-icons",16),_.Vc(2,_e,1,0,"app-icons",17),_.Wb()),2&t){var n=_.ic().index,i=_.ic().index,a=_.ic(2);_.Db(1),_.rc("ngIf","Yes"===a.assessmentsObject[a.assessmentsObjectKeys[i]][n]),_.Db(1),_.rc("ngIf","No"===a.assessmentsObject[a.assessmentsObjectKeys[i]][n])}}function Me(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Oe,3,2,"td",15),_.Ub()),2&t){var n=e.index,i=_.ic(3);_.Db(1),_.rc("ngIf",-1!=i.dataPoint.indexOf(n))}}function Ae(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Vc(3,Me,2,1,"ng-container",14),_.Wb()),2&t){var n=e.index,i=_.ic(2);_.Db(2),_.Yc(i.assessmentsObjectKeys[n]),_.Db(1),_.rc("ngForOf",i.parameterDates)}}function Pe(t,e){if(1&t&&(_.Xb(0,"div",13),_.Xb(1,"nz-table"),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th"),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Vc(7,Te,2,1,"ng-container",14),_.Wb(),_.Wb(),_.Xb(8,"tbody"),_.Vc(9,Ae,4,2,"tr",14),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.ic();_.Db(5),_.Yc(_.kc(6,3,"ASSESSMENT.TITLE")),_.Db(2),_.rc("ngForOf",n.parameterDates),_.Db(2),_.rc("ngForOf",n.assessmentsObjectLength)}}function Ne(t,e){1&t&&(_.Xb(0,"div",21),_.Xb(1,"strong"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"HEALTHSCORE.CHARTMSG")))}function We(t,e){if(1&t&&_.Vc(0,Ne,4,3,"div",20),2&t){var n=_.ic();_.rc("ngIf",!n.isChartLoading)}}var Re,xe=((Re=function(t){r(n,t);var e=l(n);function n(t,i,a,r){var o;return b(this,n),(o=e.call(this))._location=t,o._patientsService=i,o._notificationsService=a,o._activatedRoute=r,o.isChartLoading=!0,o.patientName="",o.parameterDates=[],o.dataPoint=[],o.dateRange=[],o.dateRanges={Today:[new Date,new Date],Yesterday:[new Date((new Date).getTime()-864e5),new Date((new Date).getTime()-864e5)],"Last 7 Days":[new Date((new Date).getTime()-6048e5),new Date],"Last 30 Days":[new Date((new Date).getTime()-2592e6),new Date]},o}return d(n,[{key:"ngOnInit",value:function(){this.getPatientIdFromURL(),this.getPatientInfo(),this.getHealthScore(),this.presetDateRange()}},{key:"presetDateRange",value:function(){this.dateRange[0]=new Date((new Date).getTime()-2592e6),this.dateRange[1]=new Date}},{key:"getPatientIdFromURL",value:function(){var t=this;this._activatedRoute.params.forEach(function(e){t.patientId=e.id})}},{key:"getPatientInfo",value:function(){var t=this;this._patientsService.getSpecificUser(this.patientId).subscribe(function(e){t.patientName=e.firstName+" "+e.lastName})}},{key:"getHealthScore",value:function(){var t=this;this._patientsService.fetchHealthScore(this.patientId).subscribe(function(e){try{if(t.healthScore=new fe,t.healthScore=e,t.healthScore||t._notificationsService.error("Health Scores","No health scores were measured during these dates"),!t.healthScore.scoreCalculationHistory.length)return void t._notificationsService.error("Health Scores","Health Score Data Not Available For Last 30 Days!");t.generateDataForChart(),t.generateDataForTable()}catch(n){}})}},{key:"generateDataForChart",value:function(){var t=this,e=[];this.healthScore.scoreCalculationHistory.forEach(function(t){var n=[],i=new h.e("en-US").transform(t.calculatedOn,"MMM d");n.push(i),n.push(t.score),e.push(n)}),this.getBaseLineHealthScore().subscribe(function(n){t.baseValue=n.baseValue,t.initializeChart(e)})}},{key:"getBaseLineHealthScore",value:function(){return this._patientsService.fetchBaseLineHealthScore(this.patientId)}},{key:"initializeChart",value:function(t){this.data=t,this.columnNames=["Dates - Measured On","Health Score"],this.options={hAxis:{title:"Dates - Measured On",slantedText:!0,textStyle:{fontSize:10},format:"MMM, d"},vAxis:{title:"Health Score",viewWindow:{max:100,min:0},baseline:this.baseValue,baselineColor:"#ff0000"},selectionMode:"multiple",pointSize:8,colors:["#00ff00"],width:window.innerWidth-150,height:window.innerHeight/2.5},this.isChartLoading=!1}},{key:"dataPointClicked",value:function(t){var e,n=this;this.dataPoint=[],null===(e=null==t?void 0:t.selection)||void 0===e||e.forEach(function(t){n.dataPoint.push(t.row)})}},{key:"generateDataForTable",value:function(){var t=this,e=[],n=[],i=[];this.vitalObject=[],this.assessmentsObject=[],this.parameterDates=[],this.healthScore.scoreCalculationHistory.forEach(function(n){t.parameterDates.push(n.calculatedOn),e.push(n.scoreParametersSections)}),e.forEach(function(t){n.push(t[0].scoreParameters),i.push(t[1].scoreParameters)}),i[0].forEach(function(e){t.vitalObject[e.prompt]=new Array}),n[0].forEach(function(e){t.assessmentsObject[e.prompt]=new Array}),i.forEach(function(e){e.forEach(function(e){t.vitalObject[e.prompt].push(e.value)})}),n.forEach(function(e){e.forEach(function(e){t.assessmentsObject[e.prompt].push(e.value)})}),this.vitalObjectKeys=Object.keys(this.vitalObject),this.vitalObjectLength=new Array(this.vitalObjectKeys.length),this.assessmentsObjectKeys=Object.keys(this.assessmentsObject),this.assessmentsObjectLength=new Array(this.assessmentsObjectKeys.length)}},{key:"goBack",value:function(){this._location.back()}},{key:"getHealthScoreForDateRange",value:function(){var t=this;if(this.isChartLoading=!0,this.dataPoint=[],this.dateRange&&this.dateRange.length){var e=this.dateRange[0].setHours(0,0,0,0),n=this.dateRange[1].setHours(23,59,59,999);this._patientsService.fetchHealthScore(this.patientId,e,n).subscribe(function(e){try{if(t.healthScore=new fe,t.healthScore=e,!t.healthScore||!t.healthScore.scoreCalculationHistory.length)return void t._notificationsService.error("Health Scores","No health scores were measured during these dates");t.generateDataForChart(),t.generateDataForTable()}catch(n){t._notificationsService.error("Health Scores","Health Score Data Not Available!")}})}else this._notificationsService.error("Health Scores","Please Select A Date-Range To Get Health Scores!")}}]),n}(D.a)).\u0275fac=function(t){return new(t||Re)(_.Rb(h.l),_.Rb(y.a),_.Rb(V.b),_.Rb(m.a))},Re.\u0275cmp=_.Lb({type:Re,selectors:[["app-healthscore"]],features:[_.Ab],decls:14,vars:15,consts:[[3,"defaultTitle","isSearchEnabled","isActionEnabled"],[1,"container"],[1,"date-selector"],["nzFormat","MMM d, y",3,"ngModel","nzRanges","ngModelChange"],["nz-button","",3,"click"],["class","graph-container",4,"ngIf"],["class","data-table-container",4,"ngIf","ngIfElse"],["class","data-table-container",4,"ngIf"],["msg",""],[1,"graph-container"],["title","RI Score","type","AreaChart",3,"data","columns","options","select",4,"ngIf"],["title","RI Score","type","AreaChart",3,"data","columns","options","select"],["healthscorechart",""],[1,"data-table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["name","check",4,"ngIf"],["name","close",4,"ngIf"],["name","check"],["name","close"],["class","msg",4,"ngIf"],[1,"msg"]],template:function(t,e){if(1&t&&(_.Sb(0,"app-header",0),_.jc(1,"translate"),_.Xb(2,"div",1),_.Xb(3,"div",2),_.Xb(4,"nz-range-picker",3),_.ec("ngModelChange",function(t){return e.dateRange=t}),_.Wb(),_.Xc(5," \xa0\xa0 "),_.Xb(6,"button",4),_.ec("click",function(){return e.getHealthScoreForDateRange()}),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Wb(),_.Vc(9,me,2,1,"div",5),_.Vc(10,Ee,10,5,"div",6),_.Vc(11,Pe,10,5,"div",7),_.Vc(12,We,1,1,"ng-template",null,8,_.Wc),_.Wb()),2&t){var n=_.Ic(13);_.uc("defaultTitle","",_.kc(1,11,"HEALTHSCORE.TITLE")," For ",e.patientName,""),_.rc("isSearchEnabled",!1)("isActionEnabled",!1),_.Db(4),_.rc("ngModel",e.dateRange)("nzRanges",e.dateRanges),_.Db(3),_.Yc(_.kc(8,13,"HEALTHSCORE.GET")),_.Db(2),_.rc("ngIf",(null==e.healthScore?null:e.healthScore.scoreCalculationHistory)&&(null==e.healthScore||null==e.healthScore.scoreCalculationHistory?null:e.healthScore.scoreCalculationHistory.length)),_.Db(1),_.rc("ngIf",(null==e.healthScore?null:e.healthScore.scoreCalculationHistory)&&e.dataPoint.length)("ngIfElse",n),_.Db(1),_.rc("ngIf",(null==e.healthScore?null:e.healthScore.scoreCalculationHistory)&&e.dataPoint.length)}},directives:[L.a,ge.a,ge.c,v.u,v.x,M.a,A.a,P.a,h.q,p.a,Q.f,Q.n,Q.o,Q.e,Q.l,h.p,Q.i,he.a],pipes:[Qt.a,h.e],styles:[".container[_ngcontent-%COMP%]{width:100%;min-height:100vh;background-color:var(--neutral-color)}.date-selector[_ngcontent-%COMP%]{margin:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:2%}[_nghost-%COMP%]     .ant-picker{width:60%}.graph-container[_ngcontent-%COMP%]{border:1px solid #d3d3d3;padding:1% 0}.data-table-container[_ngcontent-%COMP%]{margin:2% 0}[_nghost-%COMP%]     .ant-table-placeholder{display:none}.ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-table-thead>tr>th{text-align:center}[_nghost-%COMP%]     .ant-table-title{font-size:16px;font-weight:700}th[_ngcontent-%COMP%]{width:20%}.met[_ngcontent-%COMP%]{color:var(--primary-color)}.unmet[_ngcontent-%COMP%]{color:var(--error-color)}.msg[_ngcontent-%COMP%]{color:#a9a9a9;padding:2%;text-align:center}.initialDateRange[_ngcontent-%COMP%]{text-align:center;padding:5%;font-weight:bolder}"]}),Re),ke=o("bA1+"),we=o("T5gh"),Ve=o("1G5W"),Le=o("eIep"),Fe=o("fQ3Y"),Ue=o("LZn6"),je=o("OTIt"),Ye=o("c/Vb"),Be=o("igu/"),He=o("S9gE"),Ge=o("IQJ1"),Ze=o("WoUL"),$e=function(){var t=function t(){b(this,t)};return t.STRINGS=new Array("MENU.PATIENTS","PATIENT_LISTING.WITHOUT_CAREPLAN","PATIENT_LISTING.CAREPLAN_UNASSIGNED","PATIENT_LISTING.PATIENTS_WITHOUT_GROUP","ROTHMAN_INDEX","PATIENT_NOT_MEASURED_HEALTH_SCORE","VIEW_VITALS","ASSIGN_CAREPLAN_TO_PATIENT_ERROR","UNABLE_TO_DOWNLOAD_REPORT","VITAL_VALUE_NOT_AVAILABLE","NOTE_ADDED_SUCCESSFULLY","PATIENT_LISTING.CUSTOM_FILTER","NAME_CANNOT_BE_EMPTY","SAVED_FILTER","DUPLICATE_FILTER_NAME","PATIENT_ALREADY_IN_ANOTHER_CALL","YOU_ARE_ALREADY_IN_CALL","VIDEOCALL.VIDEOCALL","COMMON.INVALID_SESSION","COMMON.SESSION_EXPIRED","DELETE_CUSTOM_FILTER_MESSAGE","TMS","TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED","TMS.TWENTY_MINS_RECORDED_ADD_ADDITIONAL_TMS","TMS.TMS_TIME_INCOMPLETE","EPISODE.REPEAT_EPISODE"),t}(),qe=o("d+1G"),Ke=o("fEa1"),Qe=o("o3v3"),Je=o("vj4F"),tn=o("q7YW"),en=o("Kj3r"),nn=o("SP7D"),an=o("4RGM"),rn=o("H9Vc"),on=o("PTRe"),ln=o("ZKr6"),sn=o("Nqz0"),cn=o("Q8cG"),un=["filterTab"];function dn(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-tab",1,2),_.ec("nzSelect",function(){_.Lc(n);var t=e.$implicit;return _.ic(3).emitEvent(["EPISODES",t],t)})("nzClick",function(){_.Lc(n);var t=e.$implicit;return _.ic(3).emitEvent(["EPISODES",t],t,!0)}),_.Wb()}if(2&t){var i=e.$implicit;_.rc("nzTitle","GENERAL"===i?"BHI":i),_.Eb("data-filter","EPISODES")("data-subFilter",i)("data-id",i)}}function bn(t,e){if(1&t){var n=_.Yb();_.Vb(0,null,6),_.Vc(2,dn,2,4,"nz-tab",7),_.Xb(3,"nz-tab",1,2),_.ec("nzSelect",function(){return _.Lc(n),_.ic(2).emitEvent(["NO_ACTIVE_EPISODES"])})("nzClick",function(){return _.Lc(n),_.ic(2).emitEvent(["NO_ACTIVE_EPISODES"],null,!0)}),_.jc(5,"translate"),_.Wb(),_.Ub()}if(2&t){var i=_.ic(2);_.Db(2),_.rc("ngForOf",i.episodeBlueprintTypes),_.Db(1),_.sc("nzTitle",_.kc(5,3,"FILTER.NO_ACTIVE_EPISODES")),_.Eb("data-filter","NO_ACTIVE_EPISODES")}}function pn(t,e){if(1&t&&(_.Vb(0),_.Vc(1,bn,6,5,"ng-container",3),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",null==n.episodeBlueprints?null:n.episodeBlueprints.length)}}function fn(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-tab",1,2),_.ec("nzSelect",function(){return _.Lc(n),_.ic(2).emitEvent(["CARE_PLANS","REMOTE_PATIENT_MONITORING"])})("nzClick",function(){return _.Lc(n),_.ic(2).emitEvent(["CARE_PLANS","REMOTE_PATIENT_MONITORING"],null,!0)}),_.jc(2,"translate"),_.Wb()}2&t&&(_.sc("nzTitle",_.kc(2,3,"FILTER.CAREPLAN.RPM")),_.Eb("data-filter","CARE_PLANS")("data-subFilter","REMOTE_PATIENT_MONITORING"))}function gn(t,e){if(1&t){var n=_.Yb();_.Vb(0,null,8),_.Xb(2,"nz-tab",1,2),_.ec("nzSelect",function(){return _.Lc(n),_.ic().emitEvent(["CARE_PLANS","DEFAULT"])})("nzClick",function(){return _.Lc(n),_.ic().emitEvent(["CARE_PLANS","DEFAULT"],null,!0)}),_.jc(4,"translate"),_.Wb(),_.Vc(5,fn,3,5,"nz-tab",9),_.Xb(6,"nz-tab",1,2),_.ec("nzSelect",function(){return _.Lc(n),_.ic().emitEvent(["NO_ACTIVE_CARE_PLANS"])})("nzClick",function(){return _.Lc(n),_.ic().emitEvent(["NO_ACTIVE_CARE_PLANS"],null,!0)}),_.jc(8,"translate"),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(2),_.sc("nzTitle",_.kc(4,7,"FILTER.CAREPLAN.GENERAL")),_.Eb("data-filter","CARE_PLANS")("data-subFilter","DEFAULT"),_.Db(3),_.rc("ngIf",i.rpmEnabled),_.Db(1),_.sc("nzTitle",_.kc(8,9,"FILTER.NO_ACTIVE_CAREPLANS")),_.Eb("data-filter","CARE_PLANS")("data-subFilter","NO_ACTIVE_CARE_PLANS")}}function hn(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",15),_.ec("click",function(t){return _.Lc(n),_.ic(2).emitSearchKey(t)}),_.Sb(1,"app-icons",16),_.Wb()}2&t&&(_.Db(1),_.rc("originalStyle",!0))}function vn(t,e){1&t&&(_.Xb(0,"li",24),_.Xb(1,"span"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"COMMON.BULK_ADD")))}var mn=function(){return["BULK_ADD_PATIENT"]};function Sn(t,e){if(1&t&&(_.Xb(0,"span",17),_.Xb(1,"button",18),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",19),_.Wb(),_.Xb(5,"nz-dropdown-menu",null,20),_.Xb(7,"ul",21),_.Xb(8,"li",22),_.Xb(9,"span"),_.Xc(10),_.jc(11,"translate"),_.Wb(),_.Wb(),_.Vc(12,vn,4,3,"li",23),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(6);_.Db(1),_.rc("nzDropdownMenu",n),_.Db(1),_.Zc(" ",_.kc(3,4,"PATIENT.ADD_A_PATIENT")," \xa0"),_.Db(8),_.Yc(_.kc(11,6,"COMMON.ADD")),_.Db(2),_.rc("isFeaturePermitted",_.xc(8,mn))}}var In=function(){return["ADD_PATIENT"]};function Dn(t,e){if(1&t){var n=_.Yb();_.Xb(0,"span",10),_.Xb(1,"nz-input-group",11),_.Xb(2,"input",12),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().searchKey=t})("keyup",function(t){return _.Lc(n),_.ic().emitSearchKey(t)}),_.jc(3,"translate"),_.Wb(),_.Wb(),_.Vc(4,hn,2,1,"ng-template",null,13,_.Wc),_.Wb(),_.Xc(6," \xa0\xa0 "),_.Vc(7,Sn,13,9,"span",14)}if(2&t){var i=_.Ic(5),a=_.ic();_.Db(1),_.rc("nzAddOnAfter",i),_.Db(1),_.sc("placeholder",_.kc(3,4,"COMMON.SEARCH")),_.rc("ngModel",a.searchKey),_.Db(5),_.rc("isFeaturePermitted",_.xc(6,In))}}var yn,Cn=function(t){return{left:t}},En=((yn=function(){function t(e,n,i,a,r,o,l){var s=this;b(this,t),this._router=e,this._routeHelperService=n,this._dataSharingService=i,this._patientsEventLogger=a,this._patientUrlService=r,this._patientStatusFilterHelperService=o,this._episodeStatusFilterHelperService=l,this.episodeBlueprintTypes=new Set,this.search=new _.n,this.filterType=new _.n,this.selectedTabHeader=new _.n,this.selectedTabIndex=0,this.rpmEnabled=!1,this._routeHelperService.isSidebarCollapsed().subscribe(function(t){s.sidebarCollapsed=t,s.resizeHeader()}),Object(tn.fromEvent)(window,"sidebar").pipe(Object(en.a)(50)).subscribe(function(t){var e;s.sidebarCollapsed=null===(e=null==t?void 0:t.detail)||void 0===e?void 0:e.state,s.resizeHeader()})}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.getBlueprints(),this.filter=this._patientUrlService.getParameterValue("filter"),this.subscribeToRouteChange(),this._dataSharingService.onSubTenantChange().subscribe(function(e){t.getBlueprints()})}},{key:"ngOnDestroy",value:function(){var t,e;null===(t=this.$tenantConfig)||void 0===t||t.unsubscribe(),null===(e=this.header$)||void 0===e||e.unsubscribe()}},{key:"resizeHeader",value:function(){this.headerLeft=this.sidebarCollapsed?"0":"150px"}},{key:"subscribeToRouteChange",value:function(){var t=this;this._router.events.subscribe(function(){t.setActiveTab(),t.getBlueprints()})}},{key:"refreshTabState",value:function(t,e){this.setURLParams(t,e),this.setActiveTab()}},{key:"getEpisodeBlueprints",value:function(){var t,e=this,n=new Array;return null===(t=this.tenantConfigMap)||void 0===t||t.forEach(function(t,i){var a,r;(null===(a=e.getSelectedTenants())||void 0===a?void 0:a.includes(i))&&(null===(r=null==t?void 0:t.episodeBlueprints)||void 0===r||r.forEach(function(t){(null==t?void 0:t.archived)||n.push(t)}))}),n}},{key:"setActiveTab",value:function(){var t,e,n,i,a,r=this;this.filter=this._patientUrlService.getParameterValue("filter"),this.searchKey=this._patientUrlService.getParameterValue("search");var o=this._patientUrlService.getParameterValue("sub-filter");if(this.filter&&"ALL_PATIENTS"!==this.filter&&"CONSENT_FORM"!==this.filter&&"PHYSICIAN_ORDER"!==this.filter)if("CMT"!==this.filter&&"ASSESSMENT_ACTIVITY"!==this.filter&&"ASSESSMENT_COMPLIANCE"!==this.filter)if(-1===["ON_BOARDING","DST","VITAL_DAYS_REMAINING","TMS_REMAINING","INACTIVE_PATIENTS","RPM_VITAL_COMPLIANCE"].indexOf(this.filter))if(-1===["CCM_CMT_REMAINING"].indexOf(this.filter))null===(a=this.tabs)||void 0===a||a.forEach(function(t,e){t.nativeElement.dataset.filter===r.filter&&t.nativeElement.dataset.subfilter===o&&(r.selectedTabIndex=e)});else{var l=Object(qe.b)().map(function(t){return t.id}),s=this.getEpisodeBlueprints().filter(function(t){return!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(function(t){return l.indexOf(t)>=0}))});null===(i=this.tabs)||void 0===i||i.forEach(function(t,e){t.nativeElement.dataset.id===s[0].type&&(r.selectedTabIndex=e)})}else{var c=Object(qe.c)().map(function(t){return t.id}),u=this.getEpisodeBlueprints().filter(function(t){return!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(function(t){return c.indexOf(t)>=0}))});null===(n=this.tabs)||void 0===n||n.forEach(function(t,e){t.nativeElement.dataset.id===u[0].type&&(r.selectedTabIndex=e)})}else{var d=Object(qe.a)().map(function(t){return t.id}),b=null===(t=this.getEpisodeBlueprints())||void 0===t?void 0:t.filter(function(t){return!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(function(t){return d.indexOf(t)>=0}))});null===(e=this.tabs)||void 0===e||e.forEach(function(t,e){t.nativeElement.dataset.id===b[0].type&&(r.selectedTabIndex=e)})}else this.selectedTabIndex=0}},{key:"getBlueprints",value:function(){var t=this;this.updatingConfig=!0,this.$tenantConfigMap=this._dataSharingService.assignedTenantSettings.subscribe(function(e){var n,i;if(t.episodeBlueprints=[],t.episodeBlueprintTypes=new Set,null==e?void 0:e.size){t.tenantConfigMap=e,null==e||e.forEach(function(e,n){var i,a;(null===(i=t.getSelectedTenants())||void 0===i?void 0:i.includes(n))&&(null===(a=null==e?void 0:e.episodeBlueprints)||void 0===a||a.forEach(function(e){(null==e?void 0:e.archived)||(t.episodeBlueprints.push(e),t.episodeBlueprintTypes.add(e.type))}))}),t.tabNames=t.createIndexAndTabNameMap(),setTimeout(function(){return t.setActiveTab()},100);var a=t.episodeBlueprints.filter(function(t){return!t.archived&&"RPM"==t.type});t.rpmEnabled=(null==a?void 0:a.length)>0,t.consentFormEnabled=null===(n=t.episodeBlueprints)||void 0===n?void 0:n.some(function(t){var e;return null===(e=null==t?void 0:t.episodeComponent)||void 0===e?void 0:e.enableConsentForm}),t.physicianOrderEnabled=null===(i=t.episodeBlueprints)||void 0===i?void 0:i.some(function(t){var e;return null===(e=null==t?void 0:t.episodeComponent)||void 0===e?void 0:e.physicianOrderEnabled}),t.updatingConfig=!1}})}},{key:"getSelectedTenants",value:function(){var t,e=localStorage.getItem(an.a.REQUEST_TENANT_IDS);return Array.from(e&&""!=e&&null!=e?null==e?void 0:e.split(","):null===(t=localStorage.getItem(an.a.LOGGED_IN_USER_ASSIGNED_TENANTS))||void 0===t?void 0:t.split(","))}},{key:"emitSearchKey",value:function(t){var e=this;""===this.searchKey&&(this.searchKey=null),"keyup"!==t.type||this.searchKey||setTimeout(function(){return e.search.emit(e.searchKey)},10),"keyup"===t.type&&13!==t.keyCode||(this._patientsEventLogger.patientSearchEvent(this.searchKey),setTimeout(function(){return e.search.emit(e.searchKey)},10))}},{key:"emitEvent",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"PHYSICIAN_ORDER"!==this.filter&&"CONSENT_FORM"!==this.filter||!t||"ALL_PATIENTS"!==t[0]||(t=[this.filter]),"PATIENT_NOT_SERVICED"===this.filter&&t&&"EPISODES"===t[0]&&"CCM"===t[1]&&(t=[this.filter,"CCM"]),"PATIENT_NOT_SERVICED"===this.filter&&t&&"EPISODES"===t[0]&&"RPM"===t[1]&&(t=[this.filter,"RPM"]),this._patientsEventLogger.patientFilterActionEvent(t,"patient_listing_tab_filter"),this.setURLParams(t,null,i),setTimeout(function(){return n.filterType.emit({filterType:t,blueprintId:e})},10)}},{key:"setURLParams",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._patientUrlService.getParameterValue("filter"),a=this._patientUrlService.getParameterValue("sub-filter"),r=this._patientUrlService.getParameterValue("staffId"),o=this._patientUrlService.getParameterValue("staffName"),l=this._patientUrlService.getParameterValue("physicians"),s=this._patientUrlService.getParameterValue("physiciansName"),c=this._patientUrlService.getParameterValue("search");this.searchKey=c,-1!==["ON_BOARDING","DST","VITAL_DAYS_REMAINING","TMS_REMAINING","INACTIVE_PATIENTS","RPM_VITAL_COMPLIANCE"].indexOf(i)&&a===t[1]&&(t[0]=i),-1!==["CMT","ASSESSMENT_ACTIVITY","ASSESSMENT_COMPLIANCE"].indexOf(i)&&a===t[1]&&(t[0]=i);var u={};u.filter=t[0],u.selectedEpisodeType=t[1],u["sub-filter"]=t[1],u.savedFilter=e,u.assignedStaffType=this._patientUrlService.getParameterValue("assignedStaffType"),["PHYSICIAN_ORDER","CONSENT_FORM"].some(function(t){return t===i})&&(u.selectedEpisodeType=this._patientUrlService.getParameterValue("selectedEpisodeType")),null!=r&&(u.staffId=r),null!=o&&(u.staffName=o),null!=l&&(u.physicians=l),null!=s&&(u.physiciansName=s),null!=c&&(u.search=c),"CONSENT_FORM"!==u.filter&&(u.consentFormStatus=null),"PHYSICIAN_ORDER"!==u.filter&&(u.physicianOrderStatus=null),u.patientStatus=this._patientStatusFilterHelperService.filterInvalidParamsForPatientStatus(this._patientUrlService.getParameterValue("patientStatus"),this.tabNames[this.selectedTabIndex]),u.episodeStatus=this._episodeStatusFilterHelperService.filterInvalidParamsForEpisodeStatus(this._patientUrlService.getParameterValue("episodeStatus"),this.tabNames[this.selectedTabIndex]);var d=this._patientUrlService.getParameterValue("physicians");null!=d&&(u.physicians=d);var b=this._patientUrlService.getParameterValue("physiciansName");null!=b&&(u.physiciansName=b);var p=this._patientUrlService.getParameterValue("siteId");null!=p&&(u.siteId=p);var f=this._patientUrlService.getParameterValue("siteName");null!=f&&(u.siteName=f),this._patientUrlService.setParameter(u,n)}},{key:"createIndexAndTabNameMap",value:function(){var t=[];if(t.push("ALL_PATIENTS"),this.episodeBlueprints&&this.episodeBlueprints.length){var e,i=n(this.episodeBlueprints);try{for(i.s();!(e=i.n()).done;){var a=e.value;t.push(a.type)}}catch(r){i.e(r)}finally{i.f()}}return t.push("NO_ACTIVE_EPISODES"),t}},{key:"onSelectedTabIndexChange",value:function(t){this.currentTabName=this.tabNames[t],this.selectedTabHeader.emit(this.currentTabName)}}]),t}()).\u0275fac=function(t){return new(t||yn)(_.Rb(m.g),_.Rb(nn.a),_.Rb(Be.a),_.Rb(X.a),_.Rb(Ke.a),_.Rb(Qe.a),_.Rb(Je.a))},yn.\u0275cmp=_.Lb({type:yn,selectors:[["app-patient-header"]],viewQuery:function(t,e){var n;1&t&&_.ed(un,1,_.l),2&t&&_.Hc(n=_.fc())&&(e.tabs=n)},outputs:{search:"search",filterType:"filterType",selectedTabHeader:"selectedTabHeader",filtersCount:"filtersCount"},decls:9,vars:11,consts:[["ngTour","patientListHeaders",3,"nzTabBarExtraContent","nzSelectedIndex","ngStyle","nzSelectedIndexChange"],[3,"nzTitle","nzSelect","nzClick"],["filterTab",""],[4,"ngIf"],["tabExtra",""],[1,"header-spacer"],["episodes",""],[3,"nzTitle","nzSelect","nzClick",4,"ngFor","ngForOf"],["careplans",""],[3,"nzTitle","nzSelect","nzClick",4,"ngIf"],["ngTour","patientSearch"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange","keyup"],["searchIconButton",""],["ngTour","patienAddNew",4,"isFeaturePermitted"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],["ngTour","patienAddNew"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzDropdownMenu"],["stroke","2px","size","10px","color","#ffffff","name","down"],["patientExtras","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","routerLink","/patient/add"],["nz-menu-item","","routerLink","/patient/bulk-add",4,"isFeaturePermitted"],["nz-menu-item","","routerLink","/patient/bulk-add"]],template:function(t,e){if(1&t&&(_.Xb(0,"nz-tabset",0),_.ec("nzSelectedIndexChange",function(t){return e.onSelectedTabIndexChange(t)}),_.Xb(1,"nz-tab",1,2),_.ec("nzSelect",function(){return e.emitEvent(["ALL_PATIENTS"])})("nzClick",function(){return e.emitEvent(["ALL_PATIENTS"],null,!0)}),_.jc(3,"translate"),_.Wb(),_.Vc(4,pn,2,1,"ng-container",3),_.Vc(5,gn,9,11,"ng-container",3),_.Vc(6,Dn,8,7,"ng-template",null,4,_.Wc),_.Wb(),_.Sb(8,"div",5)),2&t){var n=_.Ic(7);_.rc("nzTabBarExtraContent",n)("nzSelectedIndex",e.selectedTabIndex)("ngStyle",_.yc(9,Cn,e.headerLeft)),_.Db(1),_.sc("nzTitle",_.kc(3,7,"FILTER.ALL_PATIENTS")),_.Eb("data-filter","ALL_PATIENTS"),_.Db(3),_.rc("ngIf",!e.updatingConfig),_.Db(1),_.rc("ngIf",!(null!=e.episodeBlueprints&&e.episodeBlueprints.length))}},directives:[K.d,rn.e,h.r,K.a,h.q,h.p,P.a,on.c,on.b,v.d,v.u,v.x,ln.a,M.a,A.a,he.a,sn.d,sn.b,sn.e,cn.c,cn.e,m.h],pipes:[Qt.a],styles:[".search[_ngcontent-%COMP%]{background:#393939;color:var(--neutral-color);border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-tabs-tab{height:unset}[_nghost-%COMP%]     .ant-tabs-tab-active{border-bottom:4px solid var(--primary-color)!important}[_nghost-%COMP%]     .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:var(--neutral-color)}[_nghost-%COMP%]     .ant-input-group-wrapper{width:inherit}[_nghost-%COMP%]     .ant-tabs{z-index:998;position:fixed;right:0}.header-spacer[_ngcontent-%COMP%]{height:55px}a[_ngcontent-%COMP%]{float:right;color:var(--neutral-color);font-weight:700;height:30px;margin:0 15px}#username[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:3}app-icons[_ngcontent-%COMP%]{vertical-align:middle}"]}),yn),Xn=o("ds6q"),Tn=o("fjzP"),zn=o("Pd5/"),_n=o.n(zn),On=o("gXqy"),Mn=o("9ig3"),An=o("5S6W"),Pn=o("pe0G"),Nn=o("Gskk"),Wn=o("qAZ0"),Rn=o("JA5x"),xn=["chart"];function kn(t,e){if(1&t&&(_.Xb(0,"h2"),_.Xc(1),_.jc(2,"date"),_.Wb()),2&t){var n=_.ic();_.Db(1),_.cd("",null==n.assessmentTrend||null==n.assessmentTrend.metaData?null:n.assessmentTrend.metaData.patient," | ",n.getAge(null==n.assessmentTrend||null==n.assessmentTrend.metaData?null:n.assessmentTrend.metaData.dateOfBirth)||""," years (",_.lc(2,4,null==n.assessmentTrend||null==n.assessmentTrend.metaData?null:n.assessmentTrend.metaData.dateOfBirth,"longDate"),"), ",null==n.assessmentTrend||null==n.assessmentTrend.metaData?null:n.assessmentTrend.metaData.gender.substring(0,1),"")}}function wn(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-option",13),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",null==n?null:n.formId)("nzLabel",null==n?null:n.formName)}}var Vn=function(){return[16,16]};function Ln(t,e){1&t&&(_.Xb(0,"div",16),_.Xb(1,"div",25),_.Xb(2,"label",38),_.Xc(3,"Required"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Vn))}var Fn=function(t){return{abnormal:t}};function Un(t,e){if(1&t&&(_.Xb(0,"span",39),_.Xc(1),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2);_.rc("ngClass",_.yc(2,Fn,i.validateEmail(n.nzLabel))),_.Db(1),_.Zc(" ",n.nzLabel," ")}}function jn(t,e){1&t&&(_.Xb(0,"div",16),_.Xb(1,"div",25),_.Xb(2,"label",38),_.Xc(3,"Required"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Vn))}function Yn(t,e){1&t&&(_.Xb(0,"div",16),_.Xb(1,"div",25),_.Xb(2,"label",38),_.Xc(3,"A valid email address looks like example@email.com"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Vn))}function Bn(t,e){1&t&&(_.Xb(0,"div",16),_.Xb(1,"div",25),_.Xb(2,"label",38),_.Xc(3,"Required"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Vn))}var Hn=function(t){return{error:t}};function Gn(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",14),_.Xb(2,"label",15),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().includeCMT=t}),_.Xc(3,"Include CMT Notes"),_.Wb(),_.Wb(),_.Xb(4,"div",16),_.Xb(5,"div",17),_.Xb(6,"nz-select",18),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().subjectType=t})("ngModelChange",function(t){return _.Lc(n),_.ic().subject=t}),_.Sb(7,"nz-option",19),_.Sb(8,"nz-option",20),_.Sb(9,"nz-option",21),_.Sb(10,"nz-option",22),_.Wb(),_.Wb(),_.Wb(),_.Xb(11,"div",23),_.Xb(12,"div",24),_.Xb(13,"div",25),_.Xb(14,"input",26,27),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().subject=t}),_.Wb(),_.Wb(),_.Wb(),_.Vc(16,Ln,4,2,"div",28),_.Xb(17,"div",16),_.Xb(18,"div",25),_.Xb(19,"nz-select",29,30),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().emailIds=t})("ngModelChange",function(){return _.Lc(n),_.ic().validate()}),_.Wb(),_.Vc(21,Un,2,4,"ng-template",null,31,_.Wc),_.Wb(),_.Wb(),_.Vc(23,jn,4,2,"div",28),_.Vc(24,Yn,4,2,"div",28),_.Wb(),_.Xb(25,"div",32),_.Xb(26,"div",16),_.Xb(27,"div",25),_.Xb(28,"textarea",33,34),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().note=t}),_.jc(30,"translate"),_.Wb(),_.Wb(),_.Xb(31,"div",35),_.Xb(32,"button",36),_.ec("click",function(){return _.Lc(n),_.ic().getReport()}),_.Xc(33,"Preview"),_.Wb(),_.Xc(34," \xa0 "),_.Xb(35,"button",37),_.ec("click",function(){return _.Lc(n),_.ic().sendMail()}),_.Xc(36),_.jc(37,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Vc(38,Bn,4,2,"div",28),_.Ub()}if(2&t){var i=_.Ic(15),a=_.Ic(22),r=_.Ic(29),o=_.ic();_.Db(2),_.rc("ngModel",o.includeCMT),_.Db(2),_.rc("nzGutter",_.xc(24,Vn)),_.Db(2),_.rc("ngModel",o.subjectType)("ngClass",_.yc(25,Hn,(null==i?null:i.invalid)&&!(null==i||!i.errors.required))),_.Db(6),_.rc("nzGutter",_.xc(27,Vn))("hidden","CUSTOM"!==o.subjectType),_.Db(2),_.rc("ngModel",o.subject)("ngClass",_.yc(28,Hn,((null==i?null:i.dirty)||(null==i?null:i.touched))&&(null==i?null:i.invalid)&&!(null==i||!i.errors.required))),_.Db(2),_.rc("ngIf",(null==i?null:i.invalid)&&((null==i?null:i.dirty)||(null==i?null:i.touched))&&(null==i?null:i.errors.required)),_.Db(1),_.rc("nzGutter",_.xc(30,Vn)),_.Db(2),_.rc("ngModel",o.emailIds)("nzCustomTemplate",a),_.Db(4),_.rc("ngIf",!!o.errors.includes("INVALID_EMAIL")),_.Db(1),_.rc("ngIf",!!o.errors.includes("INVALID_EMAIL_FORMAT")),_.Db(2),_.rc("nzGutter",_.xc(31,Vn)),_.Db(2),_.sc("placeholder",_.kc(30,20,"ASSESSMENT.TYPE_MSG")),_.rc("ngModel",o.note)("ngClass",_.yc(32,Hn,((null==r?null:r.dirty)||(null==r?null:r.touched))&&(null==r?null:r.invalid)&&!(null==r||!r.errors.required))),_.Db(8),_.Yc(_.kc(37,22,"COMMON.SEND")),_.Db(2),_.rc("ngIf",(null==r?null:r.invalid)&&((null==r?null:r.dirty)||(null==r?null:r.touched))&&(null==r?null:r.errors.required))}}function Zn(t,e){1&t&&(_.Xb(0,"h2"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc("",_.kc(2,1,"FORMS_TREND.NO_DATA_AVAILABLE")," !!!"))}function $n(t,e){if(1&t&&(_.Xb(0,"div",51),_.Xb(1,"h2"),_.Xc(2),_.jc(3,"formName"),_.Wb(),_.Xb(4,"h2"),_.Xc(5),_.Wb(),_.Wb(),_.Xb(6,"div",51),_.Xb(7,"label"),_.Xc(8),_.jc(9,"date"),_.Wb(),_.Xb(10,"label"),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Wb()),2&t){var n=_.ic(3);_.Db(2),_.Yc(_.kc(3,4,null==n.assessmentTrend||null==n.assessmentTrend.snapshot?null:n.assessmentTrend.snapshot.assessment)),_.Db(3),_.Yc(null==n.assessmentTrend||null==n.assessmentTrend.snapshot||null==n.assessmentTrend.snapshot.forms[0]?null:n.assessmentTrend.snapshot.forms[0].score),_.Db(3),_.Yc(_.lc(9,6,null==n.assessmentTrend||null==n.assessmentTrend.snapshot||null==n.assessmentTrend.snapshot.forms[0]?null:n.assessmentTrend.snapshot.forms[0].assessedOn,"d MMMM, y")),_.Db(3),_.Yc(_.kc(12,9,"FORMS_TREND.TOTAL_ASSESSMENT_SCORE"))}}function qn(t,e){1&t&&(_.Xb(0,"h3"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"FORMS_TREND.VIEW_HISTORY")))}function Kn(t,e){1&t&&(_.Xb(0,"h3"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"FORMS_TREND.REFERENCE_RANGE")))}function Qn(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.ad("",null==n?null:n.startRange," - ",null==n?null:n.endRange,""),_.Db(2),_.Yc(null==n?null:n.identification)}}var Jn=function(){return[48,16]};function ti(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",43),_.Xb(1,"div",44),_.Xb(2,"nz-card",45),_.Sb(3,"nz-card-meta",46),_.jc(4,"translate"),_.Xb(5,"nz-divider",47),_.Vc(6,$n,13,11,"ng-template",null,48,_.Wc),_.Wb(),_.Wb(),_.Xb(8,"div",49),_.Xb(9,"nz-divider",47),_.Vc(10,qn,3,3,"ng-template",null,50,_.Wc),_.Wb(),_.Xb(12,"div",51),_.Xb(13,"button",52),_.ec("click",function(){_.Lc(n);var t=_.ic(2);return t.clickedViewHistoryButton=1,t.getReportForLastNDays(30)}),_.Xc(14),_.jc(15,"translate"),_.Wb(),_.Xb(16,"button",52),_.ec("click",function(){_.Lc(n);var t=_.ic(2);return t.clickedViewHistoryButton=2,t.getReportForLastNDays(60)}),_.Xc(17),_.jc(18,"translate"),_.Wb(),_.Wb(),_.Xb(19,"div",51),_.Xb(20,"button",52),_.ec("click",function(){_.Lc(n);var t=_.ic(2);return t.clickedViewHistoryButton=3,t.getReportForLastNDays(90)}),_.Xc(21),_.jc(22,"translate"),_.Wb(),_.Xb(23,"button",52),_.ec("click",function(){_.Lc(n);var t=_.ic(2);return t.clickedViewHistoryButton=4,t.enableDateRangePicker=!0}),_.Xc(24),_.jc(25,"translate"),_.Wb(),_.Wb(),_.Xb(26,"div",51),_.Xb(27,"nz-range-picker",53),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic(2).dateRange=t})("ngModelChange",function(){return _.Lc(n),_.ic(2).getReportForLastNDays(0,!0)}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(28,"nz-card",54),_.Xb(29,"nz-divider",47),_.Vc(30,Kn,3,3,"ng-template",null,55,_.Wc),_.Wb(),_.Xb(32,"nz-table",56,57),_.Xb(34,"thead"),_.Xb(35,"tr"),_.Xb(36,"th"),_.Xc(37),_.jc(38,"translate"),_.Wb(),_.Xb(39,"th"),_.Xc(40),_.jc(41,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(42,"tbody"),_.Vc(43,Qn,5,3,"tr",12),_.Wb(),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=_.Ic(7),a=_.Ic(11),r=_.Ic(31),o=_.Ic(33),l=_.ic(2);_.rc("nzGutter",_.xc(35,Jn)),_.Db(3),_.sc("nzTitle",_.kc(4,21,"FORMS_TREND.LAST_MEASURED")),_.Db(2),_.rc("nzText",i),_.Db(4),_.rc("nzText",a),_.Db(4),_.rc("nzType",1===l.clickedViewHistoryButton?"primary":"default"),_.Db(1),_.Yc(_.kc(15,23,"FORMS_TREND.LAST_THIRTY_DAYS")),_.Db(2),_.rc("nzType",2===l.clickedViewHistoryButton?"primary":"default"),_.Db(1),_.Yc(_.kc(18,25,"FORMS_TREND.LAST_SIXTY_DAYS")),_.Db(3),_.rc("nzType",3===l.clickedViewHistoryButton?"primary":"default"),_.Db(1),_.Yc(_.kc(22,27,"FORMS_TREND.LAST_NINETY_DAYS")),_.Db(2),_.rc("nzType",4===l.clickedViewHistoryButton?"primary":"default"),_.Db(1),_.Yc(_.kc(25,29,"FORMS_TREND.CUSTOM_RANGE")),_.Db(3),_.rc("nzAllowClear",!1)("nzDisabledDate",l.disabledEndDate)("ngModel",l.dateRange)("nzDisabled",!l.enableDateRangePicker),_.Db(2),_.rc("nzText",r),_.Db(3),_.rc("nzData",null==l.assessmentTrend||null==l.assessmentTrend.snapshot?null:l.assessmentTrend.snapshot.referenceRange),_.Db(5),_.Yc(_.kc(38,31,"FORMS_TREND.SCORE_RANGE")),_.Db(3),_.Yc(_.kc(41,33,"FORMS_TREND.RISK_CATEGORY")),_.Db(3),_.rc("ngForOf",o.data)}}function ei(t,e){if(1&t&&(_.Xb(0,"h3"),_.Xb(1,"strong"),_.Xc(2),_.Wb(),_.Wb()),2&t){var n=_.ic(3);_.Db(2),_.Yc(n.graphTitle)}}function ni(t,e){if(1&t){var n=_.Yb();_.Xb(0,"google-chart",62,63),_.ec("select",function(t){return _.Lc(n),_.ic(3).onGraphPointSelect(t)})("ready",function(t){return _.Lc(n),_.ic(3).onGraphReady(t)}),_.Wb()}if(2&t){var i=_.ic(3);_.rc("data",i.graphData)("options",i.graphOptions)("columns",i.columnNames)}}function ii(t,e){if(1&t&&(_.Xb(0,"div",64),_.Xb(1,"label",65),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"strong",66),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Xb(7,"label",67),_.Xc(8),_.jc(9,"translate"),_.Wb(),_.Xb(10,"strong",68),_.Xc(11),_.Wb(),_.Wb()),2&t){var n=_.ic(3);_.Db(2),_.Zc(" ",_.kc(3,4,"FORMS_TREND.ASSESSED_ON")," "),_.Db(3),_.Zc(" ",_.lc(6,6,n.currentAssessedOn,"d MMMM, y")," "),_.Db(3),_.Zc(" ",_.kc(9,9,"FORMS_TREND.TOTAL_ASSESSMENT_SCORE")," "),_.Db(3),_.Zc(" ",n.totalScoreOfQuestionnaire," ")}}function ai(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td",74),_.Xc(6),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(n.question),_.Db(2),_.Yc(n.answer),_.Db(2),_.Yc(n.score)}}function ri(t,e){if(1&t&&(_.Xb(0,"nz-table",69,70),_.Xb(2,"thead"),_.Xb(3,"tr"),_.Xb(4,"th",71),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xb(7,"th",72),_.Xc(8),_.jc(9,"translate"),_.Wb(),_.Xb(10,"th",73),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(13,"tbody"),_.Vc(14,ai,7,3,"tr",12),_.Wb(),_.Wb()),2&t){var n=_.Ic(1),i=_.ic(3);_.rc("nzData",i.questionnaireData)("nzShowPagination",!1)("nzFrontPagination",!1),_.Db(5),_.Yc(_.kc(6,7,"FORMS_TREND.ASSESSMENT_QUESTION")),_.Db(3),_.Yc(_.kc(9,9,"FORMS_TREND.ANSWER")),_.Db(3),_.Yc(_.kc(12,11,"FORMS_TREND.SCORE")),_.Db(3),_.rc("ngForOf",n.data)}}function oi(t,e){if(1&t&&(_.Xb(0,"nz-card"),_.Vc(1,ei,3,1,"h3",3),_.Xb(2,"div",58),_.Vc(3,ni,2,3,"google-chart",59),_.Wb(),_.Sb(4,"br"),_.Vc(5,ii,12,11,"div",60),_.Sb(6,"br"),_.Vc(7,ri,15,13,"nz-table",61),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf",n.graphTitle),_.Db(2),_.rc("ngIf",n.graphData),_.Db(2),_.rc("ngIf",n.questionnaireData&&n.questionnaireData.length>0),_.Db(2),_.rc("ngIf",n.questionnaireData&&n.questionnaireData.length>0)}}function li(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"h6",77),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Xb(4,"p",78),_.Xc(5),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(_.lc(3,2,null==n?null:n.date,"MMM-dd-yyyy HH:mm")),_.Db(3),_.Yc((null==n?null:n.notes)||"")}}function si(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",75),_.Xb(2,"h3",76),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Wb(),_.Vc(5,li,6,5,"div",12),_.Ub()),2&t){var n=_.ic(2);_.Db(3),_.Yc(_.kc(4,2,"COMMON.CMT_LOGS")),_.Db(2),_.rc("ngForOf",n.cmtDetails)}}function ci(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",5),_.ec("click",function(){return _.Lc(n),_.ic(2).onCMTClick()}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.rc("nzSize","middle"),_.Db(1),_.Zc(" ",_.kc(2,2,"CMT.ADD")," "))}function ui(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"br"),_.Vc(2,Zn,3,3,"ng-template",null,40,_.Wc),_.Vc(4,ti,44,36,"div",41),_.Sb(5,"br"),_.Vc(6,oi,8,4,"nz-card",3),_.Vc(7,si,6,4,"ng-container",3),_.Vc(8,ci,3,4,"button",42),_.Ub()),2&t){var n=_.Ic(3),i=_.ic();_.Db(4),_.rc("ngIf",null==i.assessmentTrend||null==i.assessmentTrend.snapshot?null:i.assessmentTrend.snapshot.forms)("ngIfElse",n),_.Db(2),_.rc("ngIf",i.graphData),_.Db(1),_.rc("ngIf",i.cmtDetails&&i.cmtDetails.length),_.Db(1),_.rc("ngIf",i.isEpisodeIdAlreadyPresent||i.patientStatus&&"IN_PROGRESS"==i.patientStatus&&i.episodeType&&"GENERAL"==i.episodeType)}}var di,bi,pi,fi,gi,hi=((bi=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l,s,c,u,d,p,f){var g;return b(this,i),(g=n.call(this))._patientsEventLogger=t,g._patientCommunicationModalService=e,g._formTrendService=a,g._formNewService=r,g._datePipe=o,g._notificationsService=l,g.translationService=s,g._formNamePipe=c,g._dataSharingService=u,g._router=d,g.datePipe=p,g._episodesService=f,g.strings=["FORMS_TREND.ASSESSED_ON","FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE","FORMS_TREND.ERROR_FETCHING_REPORT"],g.subjectType="Assessment Trend Report",g.subject="Assessment Trend Report",g.errors=[],g.note="",g.vitals=[],g.vitalsOriginal=[],g.listOfForms=[],g.loadingAllForms=!1,g.isEpisodeIdAlreadyPresent=!0,g.isChartLoading=!0,g.columnNames=[],g.options={hAxis:{title:"Dates - Measured On",textStyle:{fontSize:12},direction:-1},curveType:"function",pointSize:5,width:(window.innerWidth-.25*window.innerWidth).toString(),height:450,legend:{position:"bottom"},selectionMode:"multiple",animation:{startup:!0,duration:1e3}},g.cmtDetails=[],g.disabledEndDate=function(t){return Object(On.a)(new Date,t)<0},g.validateEmail=function(t){return!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},g.dateRange=[],g.enableDateRangePicker=!1,g.includeVitals=!0,g.includeCMT=!0,g}return d(i,[{key:"ngOnInit",value:function(){this.clickedViewHistoryButton=4,this.enableDateRangePicker=!0,this.dateRange[0]=Object(Mn.a)(new Date),this.dateRange[1]=new Date,this.initTranslationStrings(),this.loadAllForms(),this.episodeId||(this.isEpisodeIdAlreadyPresent=!1,this.getEpisodesData())}},{key:"initTranslationStrings",value:function(){var t,n=this;(t=this.translationService).getMultiple.apply(t,e(this.strings)).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){n.translatedStrings=t})}},{key:"getEpisodesData",value:function(){var t=this;this._episodesService.getActiveEpisode(this.patientId,"GENERAL").subscribe(function(e){var n;(null==e?void 0:e.length)&&(t.episodeId=null===(n=e[0])||void 0===n?void 0:n.id,t.episodeType=e[0].episodeType,t.patientStatus=e[0].status)})}},{key:"getFormTrend",value:function(){var t=this;this.loading=!0,this.graphTitle=null;var e=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),n=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._formTrendService.getFormScoresTrend(this.patientId,this.formBlueprintId,this.formId,this.scoredAssessmentType,e,n).subscribe(function(e){t.formTrend=e,(null==e?void 0:e.graphData)?(t.loading=!1,t.populateGraphData()):t._notificationsService.error("Form Trend Report",t.translatedStrings.get("FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE"))},function(e){t.loading=!1,t._notificationsService.error("Form Trend Report",t.translatedStrings.get("FORMS_TREND.ERROR_FETCHING_REPORT"))})}},{key:"getFormAssessmentTrend",value:function(){var t=this;this.loading=!0,this.graphTitle=null,this.graphData=null;var e=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),n=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._formTrendService.getAssessmentReport(this.patientId,this.formBlueprintId,e,n).subscribe(function(e){var n;if(t.assessmentTrend=e,t.updateCMT(),0==(null===(n=null==e?void 0:e.snapshot)||void 0===n?void 0:n.forms.length))return t._notificationsService.error("Form Trend Report",t.translatedStrings.get("FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE")),void(t.loading=!1);t.populateGraphData(),t.loading=!1},function(e){t.loading=!1,t._notificationsService.error("Form Trend Report",t.translatedStrings.get("FORMS_TREND.ERROR_FETCHING_REPORT"))})}},{key:"updateCMT",value:function(){var t;this.cmtDetails=(null===(t=this.assessmentTrend)||void 0===t?void 0:t.patientCommunications)||[]}},{key:"populateGraphData",value:function(){var t,e,n,i,a,r,o,l,s,c=this;this.graphData=null===(n=null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.snapshot)||void 0===e?void 0:e.forms)||void 0===n?void 0:n.map(function(t){return[c._datePipe.transform(t.assessedOn,"MMM d"),t.score]}),this.graphTitle=this._datePipe.transform(null===(a=null===(i=this.assessmentTrend)||void 0===i?void 0:i.metaData)||void 0===a?void 0:a.startDate,"mediumDate")+" - "+this._datePipe.transform(null===(o=null===(r=this.assessmentTrend)||void 0===r?void 0:r.metaData)||void 0===o?void 0:o.endDate,"mediumDate"),this.columnNames=["Assessed On","Assessment Score"],this.graphOptions={titlePosition:"none",hAxis:{title:this.translatedStrings.get("FORMS_TREND.ASSESSED_ON"),titleTextStyle:{bold:!0,italic:!1},direction:-1},vAxis:{title:this._formNamePipe.transform(null===(s=null===(l=this.assessmentTrend)||void 0===l?void 0:l.snapshot)||void 0===s?void 0:s.assessment),titleTextStyle:{bold:!0,italic:!1},gridlines:{count:this.graphData.size}},legend:{position:"none"},pointSize:3,interpolateNulls:!0}}},{key:"onGraphReady",value:function(t){var e,n,i,a,r,o,l;null===(n=null===(e=this.chart)||void 0===e?void 0:e.chart)||void 0===n||n.setSelection([{row:0,column:1}]),this.currentAssessedOn=null===(a=null===(i=this.formTrend)||void 0===i?void 0:i.graphData[0])||void 0===a?void 0:a.assessedOn,this.showAssessmentQuestions(null===(l=null===(o=null===(r=this.formTrend)||void 0===r?void 0:r.graphData)||void 0===o?void 0:o[0])||void 0===l?void 0:l.formId)}},{key:"onGraphPointSelect",value:function(t){var e,n,i,a,r,o,l,s,c,u,d,b=null===(n=null===(e=null==t?void 0:t.selection)||void 0===e?void 0:e[0])||void 0===n?void 0:n.row;this.currentAssessedOn=null===(r=null===(a=null===(i=this.assessmentTrend)||void 0===i?void 0:i.snapshot)||void 0===a?void 0:a.forms[b])||void 0===r?void 0:r.assessedOn,this.questionnaireData=null===(s=null===(l=null===(o=this.assessmentTrend)||void 0===o?void 0:o.snapshot)||void 0===l?void 0:l.forms[b])||void 0===s?void 0:s.questions,this.totalScoreOfQuestionnaire=null===(d=null===(u=null===(c=this.assessmentTrend)||void 0===c?void 0:c.snapshot)||void 0===u?void 0:u.forms[b])||void 0===d?void 0:d.score}},{key:"getReportForLastNDays",value:function(t,e){this.graphData=null,e||(this.enableDateRangePicker=!1,this.dateRange[0]=_n()(new Date,t-1),this.dateRange[1]=new Date),this.getFormAssessmentTrend()}},{key:"getAge",value:function(t){var e=Date.now()-new Date(t).getTime(),n=new Date(e);return Math.abs(n.getUTCFullYear()-1970)}},{key:"showAssessmentQuestions",value:function(t){var e,n,i;t?(this.formId=t,this.questionnaireData=null===(e=this.formTrend)||void 0===e?void 0:e.formQuestionnaireDataMap[t],this.totalScoreOfQuestionnaire=null===(i=null===(n=this.formTrend)||void 0===n?void 0:n.form)||void 0===i?void 0:i.assessmentScore):(this.questionnaireData=[],this.totalScoreOfQuestionnaire=0)}},{key:"showEmailInput",value:function(){var t=this;this.includeVitals=!this.includeVitals,this.includeCMT=!this.includeCMT,this._dataSharingService.tenantSettings.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){var n;e&&((null===(n=null==e?void 0:e.tenantSupport)||void 0===n?void 0:n.internalEmail)&&(t.emailIds||(t.emailIds=[]),t.emailIds.push(e.tenantSupport.internalEmail)),t.isEmailVisible=!t.isEmailVisible)}),this.initialiseNoteString()}},{key:"initialiseNoteString",value:function(){var t=localStorage.getItem("loggedInUserName");this.note="Hi,\n\nPlease find attached the assessment report for patient: ".concat(this.patientName,"\n\nThe report has been shared with you by ").concat(t)}},{key:"validate",value:function(){var t,e,n,i,a,r=this;this.errors=[];var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return(null===(t=this.emailIds)||void 0===t?void 0:t.length)||this.errors.push("INVALID_EMAIL"),null===(e=this.emailIds)||void 0===e||e.forEach(function(t){var e;o.test(t)||-1!==(null===(e=r.errors)||void 0===e?void 0:e.findIndex(function(t){return"INVALID_EMAIL_FORMAT"===t}))||r.errors.push("INVALID_EMAIL_FORMAT")}),(null===(n=this.subject)||void 0===n?void 0:n.length)||this.errors.push("INVALID_SUBJECT"),(null===(i=this.note)||void 0===i?void 0:i.length)||this.errors.push("INVALID_NOTE"),!(null===(a=this.errors)||void 0===a?void 0:a.length)}},{key:"sendMail",value:function(){this.validate()&&this.getReport("share")}},{key:"createGenerateVitalHistoryReportRequest",value:function(t,e,n,i,a,r,o){return{patientId:t,vitalType:e,startDate:this._datePipe.transform(n,"yyyy-MM-dd"),endDate:this._datePipe.transform(i,"yyyy-MM-dd"),emailIds:a,subject:r,note:o}}},{key:"getDateForReport",value:function(t){return this._datePipe.transform(t,"yyyy-MM-dd")}},{key:"getReport",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preview",n=this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/printable/bhi-snapshot/"+this.patientId],{queryParams:{startDate:this.getDateForReport(this.dateRange[0]),endDate:this.getDateForReport(this.dateRange[1]),action:e,email:null===(t=this.emailIds)||void 0===t?void 0:t.join(","),subject:this.subject,note:this.note,includeCMT:this.includeCMT,formId:this.formId,formBlueprintId:this.formBlueprintId,scoredAssessmentType:this.scoredAssessmentType,episodeId:this.episodeId,cmtStart:this.dateRange[0].getTime(),cmtEnd:this.dateRange[1].getTime()}}));window.open(n,"_blank"),"preview"!==e&&(this.emailIds=[])}},{key:"loadAllForms",value:function(){var t=this;this.loadingAllForms=!0,this._formNewService.getForms(0,100,"").subscribe(function(e){var n,i=[];e.data.forms.obj.forEach(function(t){"SMS_ASSESSMENT"!=t.type&&i.push({formId:t._id,formName:t.title})}),t.listOfForms=i.sort(function(t,e){return t.formName.localeCompare(e.formName)}),t.formBlueprintId=t.formBlueprintId||(null===(n=t.listOfForms)||void 0===n?void 0:n[0].formId),t.loadingAllForms=!1,t.refresh()},function(e){t.loadingAllForms=!1})}},{key:"getFullDate",value:function(t){var e=new Date(t);return this.datePipe.transform(e,"MMM d, h:mm a")}},{key:"refresh",value:function(){this.formId=null,this.getFormAssessmentTrend()}},{key:"onCMTClick",value:function(){var t,e,n,i,a=this;this._patientsEventLogger.patientActionEvent(this.patientId,"add_cmt"),this._patientCommunicationModalService.createCMTModal(null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData)||void 0===e?void 0:e.patient,this.patientId,this.episodeId,Ye.a.CARE_MANAGEMENT_TIME,null,null,new Date(null===(i=null===(n=this.assessmentTrend)||void 0===n?void 0:n.metaData)||void 0===i?void 0:i.endDate).getTime()).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){a.refresh()})}}]),i}(D.a)).\u0275fac=function(t){return new(t||bi)(_.Rb(X.a),_.Rb(je.a),_.Rb(Tn.a),_.Rb(Pn.a),_.Rb(h.e),_.Rb(V.b),_.Rb(Ze.a),_.Rb(An.a),_.Rb(Be.a),_.Rb(m.g),_.Rb(h.e),_.Rb(Nn.a))},bi.\u0275cmp=_.Lb({type:bi,selectors:[["app-form-trend"]],viewQuery:function(t,e){var n;1&t&&_.ed(xn,1),2&t&&_.Hc(n=_.fc())&&(e.chart=n.first)},inputs:{patientId:"patientId",formBlueprintId:"formBlueprintId",formId:"formId",patientName:"patientName",vitalType:"vitalType",episodeId:"episodeId"},features:[_.Cb([h.e,An.a]),_.Ab],decls:21,vars:17,consts:[[3,"nzSpinning"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","14"],[4,"ngIf"],["nz-col","","id","header-actions",3,"nzSpan"],["nz-button","","nzType","primary",1,"report-actions",3,"nzSize","click"],["size","10px","color","#ffffff","name","download"],["nz-button","","nzType","primary",1,"actions",3,"nzSize","click"],["size","10px","color","#ffffff","name","share",1,"share-icon",3,"originalStyle"],["nz-col","","nzSpan","5"],["nz-typography","",1,"minor-headings"],["id","blueprint-selector",3,"ngModel","nzLoading","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-col","","nzSpan","14","id","shareOptions"],["nz-checkbox","",2,"margin-left","8px",3,"ngModel","ngModelChange"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","18",1,"custom-dropdown"],["nzPlaceHolder","Subject",3,"ngModel","ngClass","ngModelChange"],["nzValue","Assessment Trend Report","nzLabel","Assessment Trend Report"],["nzValue","Notification from Cooey Health","nzLabel","Notification from Cooey Health"],["nzValue","Escalation from Cooey Health","nzLabel","Escalation from Cooey Health"],["nzValue","CUSTOM","nzLabel","Custom"],[1,"mail"],["nz-row","",3,"nzGutter","hidden"],["nz-col","","nzSpan","18"],["required","","nz-input","","placeholder","Subject","id","subjectModel","name","subjectModel",3,"ngModel","ngClass","ngModelChange"],["subjectModel","ngModel"],["nz-row","",3,"nzGutter",4,"ngIf"],["id","emailModel","name","emailModel","nzMode","tags","nzPlaceHolder","Email IDs",3,"ngModel","nzCustomTemplate","ngModelChange"],["emailModel","ngModel"],["defaultTemplate",""],[1,"preview-area"],["required","","rows","6","nz-input","","id","noteModel","name","noteModel",3,"placeholder","ngModel","ngClass","ngModelChange"],["noteModel","ngModel"],["nz-col","","nzSpan","6","id","share"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-typography","","nzType","danger"],[3,"ngClass"],["noDataAvailable",""],["class","parent-div","nz-row","",3,"nzGutter",4,"ngIf","ngIfElse"],["nz-button","","nzType","primary","class","report-actions",3,"nzSize","click",4,"ngIf"],["nz-row","",1,"parent-div",3,"nzGutter"],["nz-col","","nzSpan","12"],[1,"last-measured-card"],[3,"nzTitle"],["nzType","vertical",3,"nzText"],["text",""],[1,"view-history-div"],["viewHistory",""],[1,"card-data"],["nz-button","",3,"nzType","click"],["nzFormat","MMM d, y",3,"nzAllowClear","nzDisabledDate","ngModel","nzDisabled","ngModelChange"],["nz-col","","nzOffset","1","nzSpan","10"],["heading",""],["nzSize","small","nzShowPagination","false",3,"nzData"],["referenceRangeTable",""],["id","curve_chart"],["style","width: 100%;","type","LineChart","dynamicResize","true",3,"data","options","columns","select","ready",4,"ngIf"],["nz-row","",4,"ngIf"],["width","100%","nzSize","middle",3,"nzData","nzShowPagination","nzFrontPagination",4,"ngIf"],["type","LineChart","dynamicResize","true",2,"width","100%",3,"data","options","columns","select","ready"],["chart",""],["nz-row",""],["nz-col","","nzOffset","1","nzSpan","4"],["nz-col","","nzSpan","6"],["nz-col","","nzOffset","4","nzSpan","6"],["nz-col","","nzSpan","3"],["width","100%","nzSize","middle",3,"nzData","nzShowPagination","nzFrontPagination"],["assessmentDataTable",""],["nzWidth","60%"],["nzWidth","25%"],["nzWidth","15%",2,"text-align","center !important"],[2,"text-align","center"],["id","heading-wrapper"],["id","heading"],["nz-typography","",1,"sub-heading"],[1,"content"]],template:function(t,e){1&t&&(_.Xb(0,"nz-spin",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Vc(3,kn,3,7,"h2",3),_.Wb(),_.Xb(4,"div",4),_.Xb(5,"button",5),_.ec("click",function(){return e.getReport("download")}),_.Sb(6,"app-icons",6),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Xb(9,"button",7),_.ec("click",function(){return e.showEmailInput()}),_.Sb(10,"app-icons",8),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Xc(13," \xa0\xa0 "),_.Wb(),_.Wb(),_.Xb(14,"div",9),_.Xb(15,"h5",10),_.Xc(16,"Assessment Forms:"),_.Wb(),_.Xb(17,"nz-select",11),_.ec("ngModelChange",function(t){return e.formBlueprintId=t})("ngModelChange",function(){return e.refresh()}),_.Vc(18,wn,2,2,"ng-container",12),_.Wb(),_.Wb(),_.Vc(19,Gn,39,34,"ng-container",3),_.Vc(20,ui,9,5,"ng-container",3),_.Wb()),2&t&&(_.rc("nzSpinning",e.loading),_.Db(3),_.rc("ngIf",null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient),_.Db(1),_.rc("nzSpan",10),_.Db(1),_.rc("nzSize","middle"),_.Db(2),_.Zc(" \xa0 ",_.kc(8,13,"PATIENTS.REPORTDOWNLOAD")," "),_.Db(2),_.rc("nzSize","middle"),_.Db(1),_.rc("originalStyle",!0),_.Db(1),_.Zc(" \xa0 ",_.kc(12,15,"PATIENTS.REPORTSHARE")," "),_.Db(6),_.rc("ngModel",e.formBlueprintId)("nzLoading",e.loadingAllForms),_.Db(1),_.rc("ngForOf",e.listOfForms),_.Db(1),_.rc("ngIf",e.isEmailVisible),_.Db(1),_.rc("ngIf",e.assessmentTrend))},directives:[Wn.a,Z.c,Z.a,h.q,M.a,A.a,P.a,he.a,H.a,Y.d,v.u,v.x,h.p,Y.a,q.a,h.o,on.b,v.d,v.C,Rn.a,Rn.c,G.a,ge.a,ge.c,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,p.a],pipes:[Qt.a,h.e,An.a],styles:[".card-data[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.card-data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2px}.ant-card-meta-title[_ngcontent-%COMP%]{margin-left:10px}nz-divider[_ngcontent-%COMP%]{border-left:2px solid var(--primary-color);width:100%;display:block}[_nghost-%COMP%]     .ant-divider-inner-text{display:block}nz-card-meta[_ngcontent-%COMP%]{margin:0 0 10px 10px}[_nghost-%COMP%]     d .ant-card-body{padding:7px;width:100%;height:100px}nz-card[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:30px;padding:0!important}.last-measured-card[_ngcontent-%COMP%]{height:110px;padding:7px 17px!important}.last-measured-card[_ngcontent-%COMP%]     .ant-card-body{padding:0}nz-divider[_ngcontent-%COMP%]{height:1.5em;padding-left:3px}[_nghost-%COMP%]     .ant-divider-inner-text{padding-left:2px}.last-measured-card[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{height:4em}nz-table[_ngcontent-%COMP%]{font-weight:700;border:none;border-spacing:0;border-collapse:collapse}[_nghost-%COMP%]     .ant-table table{border-spacing:0;border-collapse:collapse}.view-history-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-content:space-between;height:150px;width:80%;margin-left:5%}.view-history-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:120px;border-radius:50px;overflow:hidden}[_nghost-%COMP%]     .ant-table-tbody>tr{border-spacing:0}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border:none}[_nghost-%COMP%]     .ant-table-thead>tr>th{height:auto!important}[_nghost-%COMP%]     .ant-table-small .ant-table-thead>tr>th{background-color:transparent!important;color:#000;border:none}[_nghost-%COMP%]     .ant-table-middle .ant-table-thead>tr>th{padding:4px 8px}[_nghost-%COMP%]     .ant-table-container table>thead>tr:first-child th:last-child, [_nghost-%COMP%]     .ant-table-thead>tr>th:first-child{border-radius:0!important}[_nghost-%COMP%]     .ant-col{padding-top:0!important}.parent-div[_ngcontent-%COMP%]{height:300px}.parent-div[_ngcontent-%COMP%] > nz-card[_ngcontent-%COMP%]{overflow-y:auto;max-height:96%}.report-actions[_ngcontent-%COMP%]{font-size:12px}#header-actions[_ngcontent-%COMP%]{text-align:center}.custom-dropdown[_ngcontent-%COMP%]{margin-top:23px}.mail[_ngcontent-%COMP%], .preview-area[_ngcontent-%COMP%]{margin-top:12px}#share[_ngcontent-%COMP%]{margin-top:100px}.actions[_ngcontent-%COMP%]{margin-left:16px}#shareOptions[_ngcontent-%COMP%]{margin-left:60%;position:relative;bottom:29px}#heading-wrapper[_ngcontent-%COMP%]{border-left:2px solid var(--primary-color);padding-left:2.5%}#heading[_ngcontent-%COMP%]{font-size:16px}.sub-heading[_ngcontent-%COMP%]{font-size:12px;color:#949494}.content[_ngcontent-%COMP%]{font-size:12px;color:var(--light-black)}.share-icon[_ngcontent-%COMP%]{position:relative;top:1px}"]}),bi),vi=((di=function(){function t(e){b(this,t),this._modalService=e}return d(t,[{key:"createModal",value:function(t,e,n,i,a){return this._modalService.create({nzContent:hi,nzComponentParams:{patientId:t,formBlueprintId:e,formId:n,patientName:i,episodeId:a},nzWidth:"900px",nzBodyStyle:{padding:"35px",borderRadius:"15px",backgroundColor:"#f2f2f2"},nzFooter:null})}}]),t}()).\u0275fac=function(t){return new(t||di)(_.bc(O.f))},di.\u0275prov=_.Nb({token:di,factory:di.\u0275fac,providedIn:"root"}),di),mi=o("5mgp"),Si={steps:[{stepName:"patientListHeaders",title:"Patient Header",description:"Find all patients categorized under different types of episodes and statuses.",options:{smoothScroll:!0,placement:"right",className:"left-aligned-center"}},{stepName:"patientSearch",title:"Search",description:"Searching for a specific patient? Try searching here using Name, Phone number or E-mail.",options:{smoothScroll:!0,placement:"left",className:"right-aligned-center"}},{stepName:"patienAddNew",title:"Add New Patient",description:"Use this to on-board a new patient into the system.",options:{smoothScroll:!0,placement:"left",continueIfTargetAbsent:!0,className:"right-aligned"}},{stepName:"patientFilterDesc",title:"Applied Filters",description:"Applied a filter? The descriptions are here!",options:{smoothScroll:!0,placement:"right",continueIfTargetAbsent:!0,className:"left-aligned-center"}},{stepName:"patientList",title:"Patients Info",description:"Find all the info related to patients in this table - Vitals, TMS, Assessment, Reports etc.",options:{smoothScroll:!0,placement:"right",className:"right-aligned"},showHelpRedirect:!0}],tourOptions:{backdrop:!0,customTemplate:!0}},Ii=o("MXg9"),Di=o("eJ3O"),yi=o("wpKq"),Ci=o("iCh7"),Ei=o("zM63"),Xi=o("jPNr"),Ti=o("mrSG"),zi=((pi=function(){function t(e,n){b(this,t),this._modalRef=e,this._translationService=n}return d(t,[{key:"ngOnInit",value:function(){var t=this;this._translationService.get(this.message).subscribe(function(e){t.translatedMessage=e})}},{key:"viewed",value:function(){this._modalRef.close()}}]),t}()).\u0275fac=function(t){return new(t||pi)(_.Rb(O.e),_.Rb(Ze.a))},pi.\u0275cmp=_.Lb({type:pi,selectors:[["app-feature-popup"]],inputs:{message:"message",featureName:"featureName"},decls:3,vars:1,consts:[["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(_.Xc(0),_.Xb(1,"button",0),_.ec("click",function(){return e.viewed()}),_.Xc(2,"Okay, got it"),_.Wb()),2&t&&_.Zc("",e.translatedMessage,"\n")},directives:[M.a,A.a,P.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto;text-align:left;font-size:12px;line-height:1.25}button[_ngcontent-%COMP%]{margin:7px auto}"]}),pi),_i=o("9/EM"),Oi=o("EhJz"),Mi=o("/KA4"),Ai=o("cA1j"),Pi=((fi=function(){function t(e,n,i,a){b(this,t),this.elementRef=e,this.renderer=n,this._modalService=i,this.featureHighlightService=a,this.hideElement=!1,this.cacheIdentifier="_popup"}return d(t,[{key:"ngAfterViewInit",value:function(){var t,e,n,i,a,r=this,o=this.featureHighlightService.getFeatureHighlightConfig(this.featureKey);if(o&&!o.disabled){if("true"!==localStorage.getItem(this.featureKey+this.cacheIdentifier)){var l=Object(_i.a)(new Date(o.releaseDate),o.expiresInDays);Object(Oi.a)(new Date,l)&&(localStorage.setItem(this.featureKey+this.cacheIdentifier,"true"),this.hide())}if("true"!==localStorage.getItem(this.featureKey+this.cacheIdentifier)){var s=this.elementRef.nativeElement;this.renderer.setStyle(s,"z-index",1001),this.renderer.setStyle(s,"pointer-events","none"),this._modalService.create({nzContent:zi,nzComponentParams:{message:o.message,featureName:this.featureKey},nzClosable:!1,nzFooter:null,nzWidth:"230px",nzBodyStyle:{padding:"12px"},nzMaskClosable:!1,nzStyle:{position:(null===(t=this.position)||void 0===t?void 0:t.position)||"relative",top:null===(e=this.position)||void 0===e?void 0:e.top,left:null===(n=this.position)||void 0===n?void 0:n.left,right:null===(i=this.position)||void 0===i?void 0:i.right,bottom:null===(a=this.position)||void 0===a?void 0:a.bottom}}).afterClose.subscribe(function(){localStorage.setItem(r.featureKey+r.cacheIdentifier,"true"),r.renderer.removeStyle(s,"z-index"),r.renderer.removeStyle(s,"pointer-events"),r.hide()})}else this.hide()}else this.hide()}},{key:"hide",value:function(){this.hideElement&&this.renderer.setStyle(this.elementRef.nativeElement,"display","none")}}]),t}()).\u0275fac=function(t){return new(t||fi)(_.Rb(_.l),_.Rb(_.F),_.Rb(O.f),_.Rb(Ai.a))},fi.\u0275dir=_.Mb({type:fi,selectors:[["","featureHighlight",""]],inputs:{position:"position",featureKey:"featureKey",hideElement:"hideElement"}}),Object(Ti.b)([Object(Mi.a)(),Object(Ti.c)("design:type",Boolean)],fi.prototype,"hideElement",void 0),fi),Ni=o("SKKP"),Wi=o("Beax"),Ri=o("U2hf"),xi=o("vduv"),ki=((gi=function(){function t(e){var n=this;b(this,t),this._element=e,this.checkLastMeasuredVitalsWidget=function(t){var e,i;(null===(e=n.episodeBlueprints)||void 0===e?void 0:e.length)||"CARE_PLANS"!==n.selectedFilterTab[0]?n.selectedEpisodeBlueprint&&(null===(i=n.selectedEpisodeBlueprint)||void 0===i?void 0:i.filter(function(e){return-1!==e.enabledServiceCodes.findIndex(function(e){return e===t})})).length>0?n.enableFeature():n.disableFeature():n.enableFeature()},this.checkByEpisodeBlueprint=function(t){var e;n.selectedEpisodeBlueprint&&(null===(e=n.selectedEpisodeBlueprint)||void 0===e?void 0:e.filter(function(e){return-1!==e.enabledServiceCodes.findIndex(function(e){return e===t})})).length>0?n.enableFeature():n.disableFeature()},this.selectedFilterTab=[]}return d(t,[{key:"widget",set:function(t){this.widgetEnabled=t,this.checkState()}},{key:"selectedFilter",set:function(t){this.selectedFilterTab=t,this.checkState()}},{key:"blueprints",set:function(t){var e;this.episodeBlueprints=t,this.setSelectedBlueprint(),(null===(e=this.episodeBlueprints)||void 0===e?void 0:e.length)||this.checkState()}},{key:"episodeType",set:function(t){this.selectedEpisodeType=t,this.setSelectedBlueprint(),this.checkState()}},{key:"setSelectedBlueprint",value:function(){var t,e,n=this;this.selectedEpisodeBlueprint=null===(e=null===(t=this.episodeBlueprints)||void 0===t?void 0:t.filter(function(t){return!t.archived}))||void 0===e?void 0:e.filter(function(t){return t.type===n.selectedEpisodeType})}},{key:"checkState",value:function(){switch(this.widgetEnabled){case"VITAL_ADHERENCE":this.checkByEpisodeBlueprint("99454");break;case"TMS_ADHERENCE":this.checkByEpisodeBlueprint("99457");break;case"ADDITIONAL_TMS_ADHERENCE":this.checkByEpisodeBlueprint("99458");break;case"ADDITIONAL_TMS_B_ADHERENCE":this.checkByEpisodeBlueprint("99458B");break;case"CMT_ADHERENCE":this.checkByEpisodeBlueprint("99484");break;case"LAST_MEASURED_VITALS":this.checkLastMeasuredVitalsWidget("99454");break;case"NON_COMPLEX_TMS":this.checkByEpisodeBlueprint("99490");break;case"NON_COMPLEX_TMS_PHYSICIAN":this.checkByEpisodeBlueprint("99491");break;case"NON_COMPLEX_ADDITIONAL_TMS":this.checkByEpisodeBlueprint("99439");break;case"NON_COMPLEX_ADDITIONAL_TMS_B":this.checkByEpisodeBlueprint("99439B");break;case"COMPLEX_TMS":this.checkByEpisodeBlueprint("99487");break;case"COMPLEX_ADDITIONAL_TMS":this.checkByEpisodeBlueprint("99489")}}},{key:"enableFeature",value:function(){this._element.nativeElement.style.display="revert"}},{key:"disableFeature",value:function(){this._element.nativeElement.style.display="none"}}]),t}()).\u0275fac=function(t){return new(t||gi)(_.Rb(_.l))},gi.\u0275dir=_.Mb({type:gi,selectors:[["","episodeWidgetEnabled",""]],inputs:{widget:["episodeWidgetEnabled","widget"],selectedFilter:"selectedFilter",blueprints:"blueprints",episodeType:"episodeType"}}),gi),wi=o("nJia"),Vi=o("wjar"),Li=o("0zwC"),Fi=o("Edj7"),Ui=o("Ujc4"),ji=o("FVa/"),Yi=o("GSAy"),Bi=o("QlLE"),Hi=["conversationContainer"];function Gi(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"SMS.NO_MESSAGES")," "))}function Zi(t,e){}function $i(t,e){if(1&t&&(_.Xb(0,"nz-empty",14),_.Vc(1,Gi,3,3,"ng-template",null,15,_.Wc),_.Vc(3,Zi,0,0,"ng-template",null,16,_.Wc),_.Wb()),2&t){var n=_.Ic(2),i=_.Ic(4);_.rc("nzNotFoundContent",n)("nzNotFoundFooter",i)}}function qi(t,e){if(1&t&&(_.Xb(0,"div",19),_.Sb(1,"nz-badge",20),_.Xb(2,"p",21),_.Xc(3),_.Wb(),_.Xb(4,"p",22),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("nzDot",!n.read),_.Db(2),_.Zc(" ",null==n?null:n.message," "),_.Db(2),_.Zc(" ",_.lc(6,3,null==n?null:n.createdOn,"medium")," ")}}function Ki(t,e){if(1&t&&(_.Xb(0,"div",23),_.Sb(1,"nz-badge",24),_.Xb(2,"p",25),_.Xc(3),_.Wb(),_.Xb(4,"p",26),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("nzDot",!n.read),_.Db(2),_.Zc(" ",null==n?null:n.message," "),_.Db(2),_.Zc(" ",_.lc(6,3,null==n?null:n.createdOn,"medium")," ")}}function Qi(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"div",3),_.Xb(2,"div",4),_.Vc(3,qi,7,6,"div",17),_.Sb(4,"div"),_.Vc(5,Ki,7,6,"div",18),_.Wb(),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(3),_.rc("ngIf","SENT"==n.status),_.Db(2),_.rc("ngIf","RECEIVED"==n.status)}}function Ji(t,e){if(1&t&&(_.Xb(0,"div"),_.Vc(1,$i,5,2,"nz-empty",12),_.Vc(2,Qi,6,2,"div",13),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",null!=n.conversations&&0==n.conversations.length),_.Db(1),_.rc("ngForOf",n.conversations)}}var ta,ea=((ta=function(){function t(n,i,a,r,o){var l,s=this;b(this,t),this.smsService=n,this._modalService=i,this._modalRef=a,this.translationService=r,this._notificationsService=o,this.conversations=new Array,this.page=1,this.strings=["MENU.PATIENTS","SMS.SMS_SENT_SUCCESSFULLY"],this.refresh=!1,this.unReadMessagesPresent=!0,(l=this.translationService).getMultiple.apply(l,e(this.strings)).subscribe(function(t){s.translatedStrings=t})}return d(t,[{key:"ngOnDestroy",value:function(){this.close()}},{key:"ngOnInit",value:function(){this.loadingConversation=!0,this.userId=localStorage.getItem("loggedInUser"),this.getConversations()}},{key:"ngAfterViewChecked",value:function(){this.scrollToBottom()}},{key:"onScroll",value:function(){var t=this.conversationContainer.nativeElement;this.disableScrollDown=!(this.disableScrollDown&&t.scrollHeight-t.scrollTop===t.clientHeight)}},{key:"scrollToBottom",value:function(){if(!this.disableScrollDown)try{this.conversationContainer.nativeElement.scrollTop=this.conversationContainer.nativeElement.scrollHeight}catch(t){}}},{key:"getConversations",value:function(){var t=this;this.smsService.getConversations(this.patientId,0,100).subscribe(function(n){t.conversations=e(n).reverse(),t.loadingConversation=!1;var i=n.filter(function(t){return!t.read});t.unReadMessagesPresent=0!=i.length})}},{key:"sendSMS",value:function(){var t=this;this._modalService.create({nzContent:Yi.a,nzComponentParams:{patientList:[this.patient],showFilter:!1,usePrimaryNumber:this.usePrimaryNumber},nzStyle:{width:"800px"},nzBodyStyle:{background:"rgb(239, 242, 240)"},nzClosable:!0,nzFooter:null}).afterClose.subscribe(function(e){e.smsSent&&(t._notificationsService.success(t.translatedStrings.get("MENU.PATIENTS"),t.translatedStrings.get("SMS.SMS_SENT_SUCCESSFULLY")),t.conversations.push(e))})}},{key:"markasRead",value:function(){var t=this,e=this.getMessageIds();this.smsService.markAsRead({messageIds:e}).subscribe(function(e){t.getConversations(),t.refresh=!0})}},{key:"getMessageIds",value:function(){var t=new Array;return this.conversations.forEach(function(e){return t.push(e.id)}),t}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._modalRef.close(t)}}]),t}()).\u0275fac=function(t){return new(t||ta)(_.Rb(ji.a),_.Rb(O.f),_.Rb(O.e),_.Rb(Ze.a),_.Rb(V.b))},ta.\u0275cmp=_.Lb({type:ta,selectors:[["app-conversations"]],viewQuery:function(t,e){var n;1&t&&_.ed(Hi,1),2&t&&_.Hc(n=_.fc())&&(e.conversationContainer=n.first)},inputs:{patientId:"patientId",patientName:"patientName",patient:"patient",usePrimaryNumber:"usePrimaryNumber"},decls:21,vars:14,consts:[["id","wrapper","cdkDrag","","cdkDragRootElement",".ant-modal-content","cdkDragHandle",""],["id","heading"],["size","16px","name","reload",1,"refresh-btn",3,"click"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","24"],[1,"conversation-layout",3,"scroll"],["conversationContainer",""],[4,"ngIf"],["nz-row","","nzGutter","16",1,"footer"],["nz-col","","nzSpan","12"],["nz-button","","nzType","default","nzShape","round",1,"sms-actions",3,"nzSize","disabled","click"],["nz-button","","nzType","primary","nzShape","round",1,"sms-actions",3,"nzSize","click"],["class","no-data","nzNotFoundImage","https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],[4,"ngFor","ngForOf"],["nzNotFoundImage","https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",1,"no-data",3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["class","message-box right-message-box",4,"ngIf"],["class","message-box left-message-box",4,"ngIf"],[1,"message-box","right-message-box"],[1,"badge","right-badge",3,"nzDot"],[1,"conversation-message","right-message"],[1,"conversation-time","conversation-time-right"],[1,"message-box","left-message-box"],[1,"badge","left-badge",3,"nzDot"],[1,"conversation-message","left-message"],[1,"conversation-time","conversation-time-left"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"strong",1),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"app-icons",2),_.ec("click",function(){return e.getConversations()}),_.Wb(),_.Sb(5,"br"),_.Sb(6,"br"),_.Xb(7,"div",3),_.Xb(8,"div",4),_.Xb(9,"div",5,6),_.ec("scroll",function(){return e.onScroll()}),_.Vc(11,Ji,3,2,"div",7),_.Wb(),_.Wb(),_.Wb(),_.Xb(12,"div",8),_.Xb(13,"div",9),_.Xb(14,"button",10),_.ec("click",function(){return e.markasRead()}),_.Xc(15),_.jc(16,"translate"),_.Wb(),_.Wb(),_.Xb(17,"div",9),_.Xb(18,"button",11),_.ec("click",function(){return e.sendSMS()}),_.Xc(19),_.jc(20,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.ad(" ",_.kc(3,8,"SMS.MESSAGE_HISTORY")," : ",e.patientName," "),_.Db(9),_.rc("ngIf",!e.loadingConversation),_.Db(3),_.rc("nzSize","medium")("disabled",!e.unReadMessagesPresent),_.Db(1),_.Zc(" ",_.kc(16,10,"SMS.MARK_AS_READ")," "),_.Db(3),_.rc("nzSize","medium"),_.Db(1),_.Zc(" ",_.kc(20,12,"SMS.RESPOND")," "))},directives:[he.a,Z.c,Z.a,h.q,M.a,A.a,P.a,h.p,Bi.b,Ni.a],pipes:[Qt.a,h.e],styles:["[_nghost-%COMP%]     .ant-modal-content{background-color:#eff2f0 0 0 no-repeat padding-box}#wrapper[_ngcontent-%COMP%]{font-size:12px}#heading[_ngcontent-%COMP%]{padding-left:1%;font-size:14px;font-weight:600;border-left:3px solid var(--primary-color)}strong[_ngcontent-%COMP%]{font-size:12px}.conversation-layout[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:6px;opacity:1;width:100%;height:400px;padding:1px 20px 20px;overflow:scroll}.message-box[_ngcontent-%COMP%]{opacity:1;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:60%;margin-top:20px}.right-message-box[_ngcontent-%COMP%]{float:right;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid #dbdbdb;border-radius:15px 15px 0 15px;padding:10px}.right-message[_ngcontent-%COMP%]{color:var(--light-black)}.conversation-message[_ngcontent-%COMP%]{text-align:left;font:normal normal normal 12px/18px Nunito;letter-spacing:0;opacity:1;margin-bottom:0}.left-message[_ngcontent-%COMP%]{color:var(--neutral-color);flex:1}.left-message-box[_ngcontent-%COMP%]{float:left;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:15px 15px 15px 0;padding:10px}.conversation-time[_ngcontent-%COMP%]{font:normal normal 600 8px/18px Nunito;letter-spacing:0;opacity:1;margin-bottom:0}.conversation-time-left[_ngcontent-%COMP%]{text-align:right;color:var(--neutral-color)}.conversation-time-right[_ngcontent-%COMP%]{text-align:right;color:#969494;margin-bottom:0}.footer[_ngcontent-%COMP%]{padding:20px;text-align:center}.badge[_ngcontent-%COMP%]{margin:4px;padding-top:4px}.left-badge[_ngcontent-%COMP%]{float:right}.right-badge[_ngcontent-%COMP%]{float:left}.refresh-btn[_ngcontent-%COMP%]{float:right;margin-right:30px;margin-top:-5px}.no-data[_ngcontent-%COMP%]{margin-top:17%}"]}),ta),na=o("6i1W");function ia(t,e){1&t&&(_.Vb(0),_.Xc(1," | Preferred"),_.Ub())}function aa(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",10),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic(4).showConversations(null==t?null:t.preferred)}),_.Xb(1,"label",11),_.Xc(2),_.jc(3,"titlecase"),_.Vc(4,ia,2,0,"ng-container",0),_.Wb(),_.Sb(5,"br"),_.Xb(6,"span",12),_.Xc(7),_.Wb(),_.Xc(8,": "),_.Xb(9,"span"),_.Xc(10),_.Wb(),_.Wb()}if(2&t){var i=_.ic().$implicit;_.Db(2),_.Zc(" ",_.kc(3,5,(null==i?null:i.label)||"Phone Number")," "),_.Db(2),_.rc("ngIf",null==i?null:i.preferred),_.Db(3),_.Yc("MOBILE"===(null==i?null:i.type)?"M":"L"),_.Db(3),_.ad("",null==i?null:i.countryCode," ",null==i?null:i.number,"")}}function ra(t,e){if(1&t&&(_.Vb(0),_.Vc(1,aa,11,7,"li",9),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngIf",!(null==n||null==n.number||!n.number.length))}}var oa=function(t){return{disabled:t}};function la(t,e){if(1&t&&(_.Xb(0,"nz-badge",3),_.Xb(1,"a",4),_.Sb(2,"app-icons",5),_.Wb(),_.Xb(3,"nz-dropdown-menu",null,6),_.Xb(5,"ul",7),_.Vc(6,ra,2,1,"ng-container",8),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(4),i=_.ic(3);_.rc("nzCount",i.unreadMessageCount)("ngClass",_.yc(6,oa,!(null!=i.numbers&&i.numbers.length))),_.Db(1),_.rc("nzDropdownMenu",n)("nzDisabled",!(null!=i.numbers&&i.numbers.length)),_.Db(1),_.rc("color",null!=i.numbers&&i.numbers.length?"rgb(138, 138, 138)":"#d8d8d8"),_.Db(4),_.rc("ngForOf",i.numbers)}}var sa=function(){return["VIEW_CONVERSATION"]};function ca(t,e){1&t&&(_.Vb(0),_.Vc(1,la,7,8,"nz-badge",2),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,sa)))}function ua(t,e){1&t&&(_.Vb(0),_.Vc(1,ca,2,2,"ng-container",1),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,sa)))}var da,ba,pa=((ba=function(){function t(e,n){b(this,t),this._modalService=e,this._dataSharingService=n,this.onClose=new _.n}return d(t,[{key:"phoneNumbers",set:function(t){t||(t=[]),t=null==t?void 0:t.filter(function(t){var e;return null===(e=null==t?void 0:t.notificationConfig[na.b.SMS])||void 0===e?void 0:e.enabled}),this.numbers=t}},{key:"ngOnInit",value:function(){this._tenantConfigObserver=this._dataSharingService.tenantSettings}},{key:"showConversations",value:function(t){var e=this;this.conversationDialog||(this.conversationDialog=this._modalService.create({nzContent:ea,nzComponentParams:{patientId:this.patientId,patientName:this.patientName,patient:this.patient,usePrimaryNumber:t},nzBodyStyle:{background:"#EFF2F0"},nzStyle:{width:"800px"},nzClosable:!0,nzFooter:null}),this.conversationDialog.afterClose.subscribe(function(){e.onClose.emit(),e.conversationDialog=null}))}}]),t}()).\u0275fac=function(t){return new(t||ba)(_.Rb(O.f),_.Rb(Be.a))},ba.\u0275cmp=_.Lb({type:ba,selectors:[["app-conversation-widget"]],inputs:{patientId:"patientId",patientName:"patientName",patient:"patient",unreadMessageCount:"unreadMessageCount",phoneNumbers:"phoneNumbers"},outputs:{onClose:"onClose"},decls:2,vars:3,consts:[[4,"ngIf"],[4,"isFeaturePermitted"],[3,"nzCount","ngClass",4,"isFeaturePermitted"],[3,"nzCount","ngClass"],["nz-dropdown","",3,"nzDropdownMenu","nzDisabled"],["name","sms","size","20px",3,"color"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],[4,"ngFor","ngForOf"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-item","",3,"click"],["nz-typography","","nzType","secondary"],["nz-typography","","nzType","success"]],template:function(t,e){var n;(1&t&&(_.Vc(0,ua,2,2,"ng-container",0),_.jc(1,"async")),2&t)&&_.rc("ngIf",null==(n=_.kc(1,1,e._tenantConfigObserver))||null==n.smsConfig?null:n.smsConfig.enableConversation)},directives:[h.q,ln.a,Ni.a,h.o,sn.a,sn.b,he.a,sn.e,cn.c,h.p,P.a,cn.e,H.a],pipes:[h.b,h.A],styles:["app-icons[_ngcontent-%COMP%]{margin:0 10px}label[_ngcontent-%COMP%]{font-size:11px}span[_ngcontent-%COMP%]{font-size:12px}"]}),ba),fa=((da=function(){function t(e,n,i,a){b(this,t),this._dataSharingService=e,this._cdRef=n,this._templateRef=i,this._viewContainerRef=a}return d(t,[{key:"ngOnInit",value:function(){this.getTenantSettings()}},{key:"ngOnDestroy",value:function(){this.$tenantSettings.unsubscribe()}},{key:"getTenantSettings",value:function(){var t=this;this.$tenantSettings=this._dataSharingService.tenantSettings.subscribe(function(e){e&&!t.tenantSettings&&(t.tenantSettings=e,t.checkStatus())})}},{key:"checkStatus",value:function(){switch(this.isPatientComponentEnabled){case"APPOINTMENT":this.isAppointmentEnabled();break;default:this.disableFeature()}}},{key:"enableFeature",value:function(){this._viewContainerRef.createEmbeddedView(this._templateRef),this._cdRef.detectChanges()}},{key:"disableFeature",value:function(){this._viewContainerRef.clear(),this._cdRef.detectChanges()}},{key:"isAppointmentEnabled",value:function(){var t,e;(null===(e=null===(t=this.tenantSettings)||void 0===t?void 0:t.appointmentConfig)||void 0===e?void 0:e.appointmentEnabled)?this.enableFeature():this.disableFeature()}}]),t}()).\u0275fac=function(t){return new(t||da)(_.Rb(Be.a),_.Rb(_.h),_.Rb(_.N),_.Rb(_.R))},da.\u0275dir=_.Mb({type:da,selectors:[["","isPatientComponentEnabled",""]],inputs:{isPatientComponentEnabled:"isPatientComponentEnabled"}}),da),ga=o("W9fG"),ha=o("BQXE");function va(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"nz-progress",1),_.ec("click",function(){return _.Lc(n),_.ic().showTMS()}),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(1),_.rc("nzWidth",30)("nzPercent",i.percent)("nzFormat",i.format)("nzStrokeColor","#a7c853")("nzStrokeWidth",8)}}function ma(t,e){1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2,"N/A"),_.Wb(),_.Ub())}var Sa,Ia=((Sa=function(){function t(e){var n=this;b(this,t),this._patientCommunicationModalService=e,this.serviceCodes=new Map([["NON_COMPLEX_TMS","99490"],["NON_COMPLEX_TMS_PHYSICIAN","99491"],["NON_COMPLEX_ADDITIONAL_TMS","99439"],["NON_COMPLEX_ADDITIONAL_TMS_B","99439B"],["COMPLEX_TMS","99487"],["COMPLEX_ADDITIONAL_TMS","99489"]]),this.serviceCodesCount=new Map([["NON_COMPLEX_TMS","totalNonComplexTMSCompleted"],["NON_COMPLEX_ADDITIONAL_TMS","totalNonComplexAdditionalTMSCompleted"],["NON_COMPLEX_ADDITIONAL_TMS_B","totalNonComplexAdditionalTMSBCompleted"],["NON_COMPLEX_TMS_PHYSICIAN","totalNonComplexTMSPhysicianCompleted"],["COMPLEX_TMS","totalComplexTMSCompleted"],["COMPLEX_ADDITIONAL_TMS","totalComplexAdditionalTMSCompleted"]]),this.format=function(t){var e,i,a,r,o,l,s;if(n.cptCode&&(null===(e=n.patient)||void 0===e?void 0:e.episode)){var c=Math.floor((null===(i=n.patient)||void 0===i?void 0:i.episode[null===(a=n.serviceCodesCount)||void 0===a?void 0:a.get(n.cptCode)])/20*100);return null===(r=n.patient)||void 0===r||null===(o=n.serviceCodesCount)||void 0===o||o.get(n.cptCode),n.percent=c,null===(l=n.patient)||void 0===l?void 0:l.episode[null===(s=n.serviceCodesCount)||void 0===s?void 0:s.get(n.cptCode)]}},this.onSave=new _.n}return d(t,[{key:"patientData",set:function(t){this.patient=t,this.format(void 0)}},{key:"ngOnInit",value:function(){this.checkIfTMSAdditionPossible()}},{key:"showTMS",value:function(){var t,e=this;if(this.canAddTMS){var n=this._patientCommunicationModalService.createCCMTMS(this.patient,null===(t=this.patient)||void 0===t?void 0:t.episode.blueprintId,this.cptCode,this.referrer);this.subscription$=n.afterClose.subscribe(function(t){t&&e.onSave.emit()})}}},{key:"checkIfTMSAdditionPossible",value:function(){var t,e,n,i,a,r,o;if(this.cptCode&&(null===(t=this.patient)||void 0===t?void 0:t.episode)){var l=!1;Ye.a.NON_COMPLEX_TMS===this.cptCode&&(l=!0),Ye.a.NON_COMPLEX_ADDITIONAL_TMS===this.cptCode&&(null===(e=this.patient)||void 0===e?void 0:e.episode[null===(n=this.serviceCodesCount)||void 0===n?void 0:n.get(Ye.a.NON_COMPLEX_TMS)])>=20&&(null===(i=this.patient)||void 0===i?void 0:i.episode[null===(a=this.serviceCodesCount)||void 0===a?void 0:a.get(this.cptCode)])<20&&(l=!0),Ye.a.NON_COMPLEX_ADDITIONAL_TMS_B===this.cptCode&&(null===(r=this.patient)||void 0===r?void 0:r.episode[null===(o=this.serviceCodesCount)||void 0===o?void 0:o.get(Ye.a.NON_COMPLEX_ADDITIONAL_TMS)])>=20&&(l=!0),Ye.a.NON_COMPLEX_TMS_PHYSICIAN===this.cptCode&&(l=!0),this.canAddTMS=l}}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.subscription$)||void 0===t||t.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Sa)(_.Rb(je.a))},Sa.\u0275cmp=_.Lb({type:Sa,selectors:[["app-non-complex-tms"]],inputs:{blueprint:"blueprint",cptCode:"cptCode",referrer:"referrer",patientData:["patient","patientData"]},outputs:{onSave:"onSave"},decls:4,vars:8,consts:[[4,"ngIf"],["nzType","circle",3,"nzWidth","nzPercent","nzFormat","nzStrokeColor","nzStrokeWidth","click"]],template:function(t,e){1&t&&(_.Vc(0,va,2,5,"ng-container",0),_.jc(1,"filterList"),_.Vc(2,ma,3,0,"ng-container",0),_.jc(3,"filterList")),2&t&&(_.rc("ngIf",_.lc(1,2,null==e.serviceCodes?null:e.serviceCodes.get(e.cptCode),null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)),_.Db(2),_.rc("ngIf",!_.lc(3,5,null==e.serviceCodes?null:e.serviceCodes.get(e.cptCode),null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)))},directives:[h.q,ga.a],pipes:[ha.a],styles:["[_nghost-%COMP%]     .ant-progress-inner{background-color:unset;display:inherit;overflow:unset}[_nghost-%COMP%]     .ant-progress-text{margin-top:unset}strong[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-progress-status-success .ant-progress-text{margin-top:unset!important;font-size:9px}"]}),Sa);function Da(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"nz-progress",1),_.ec("click",function(){return _.Lc(n),_.ic().showTMS()}),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(1),_.rc("nzWidth",30)("nzPercent",i.percent)("nzFormat",i.format)("nzStrokeColor","#a7c853")("nzStrokeWidth",8)}}function ya(t,e){1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2,"N/A"),_.Wb(),_.Ub())}var Ca,Ea,Xa,Ta=((Ca=function(){function t(e){var n=this;b(this,t),this._patientCommunicationModalService=e,this.format=function(t){var e,i,a,r,o=Math.floor((null===(i=null===(e=n.patient)||void 0===e?void 0:e.episode)||void 0===i?void 0:i.totalComplexTMSCompleted)/60*100);return n.patient,n.percent=o,null===(r=null===(a=n.patient)||void 0===a?void 0:a.episode)||void 0===r?void 0:r.totalComplexTMSCompleted},this.canAddTMS=!0,this.onSave=new _.n}return d(t,[{key:"patientData",set:function(t){this.patient=t,this.format(void 0)}},{key:"showTMS",value:function(){var t,e=this;if(this.canAddTMS){var n=this._patientCommunicationModalService.createCCMTMS(this.patient,null===(t=this.patient)||void 0===t?void 0:t.episode.blueprintId,Ye.a.COMPLEX_TMS);this.subscription$=n.afterClose.subscribe(function(t){t&&e.onSave.emit()})}}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.subscription$)||void 0===t||t.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Ca)(_.Rb(je.a))},Ca.\u0275cmp=_.Lb({type:Ca,selectors:[["app-complex-tms"]],inputs:{blueprint:"blueprint",patientData:["patient","patientData"]},outputs:{onSave:"onSave"},decls:4,vars:8,consts:[[4,"ngIf"],["nzType","circle",3,"nzWidth","nzPercent","nzFormat","nzStrokeColor","nzStrokeWidth","click"]],template:function(t,e){1&t&&(_.Vc(0,Da,2,5,"ng-container",0),_.jc(1,"filterList"),_.Vc(2,ya,3,0,"ng-container",0),_.jc(3,"filterList")),2&t&&(_.rc("ngIf",_.lc(1,2,"99487",null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)),_.Db(2),_.rc("ngIf",!_.lc(3,5,"99487",null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)))},directives:[h.q,ga.a],pipes:[ha.a],styles:["[_nghost-%COMP%]     .ant-progress-inner{background-color:unset;display:inherit;overflow:unset}[_nghost-%COMP%]     .ant-progress-text{margin-top:unset}strong[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-progress-status-success .ant-progress-text{margin-top:unset!important;font-size:9px}"]}),Ca),za=o("ZyQt"),_a=o("A07A"),Oa=o("fgTL"),Ma=function(t){return t.TO_BE_OBTAINED="TO_BE_OBTAINED",t.EXPIRING_THIS_MONTH="EXPIRING_THIS_MONTH",t.EXPIRED_LAST_MONTH="EXPIRED_LAST_MONTH",t}({}),Aa=((Ea=function(){function t(){b(this,t)}return d(t,[{key:"transform",value:function(t,e,n,i,a,r,o,l){return n?window.innerWidth<1400?this.widthForSmallerScreens(t,e,n,i,a,r,o,l):this.widthForLargerScreens(t,e,n,i,a,r,o,l):t}},{key:"widthForLargerScreens",value:function(t,e,n,i,a,r,o,l){switch(n){case Oa.a.ALL_PATIENTS:t=e?["14%","3%","15%","25%","25%","20%"]:["14%","3%","15%","50%","20%"];break;case Oa.a.NO_ACTIVE_EPISODES:t=["15%","5%","15%","15%","20%"];break;case Oa.a.CARE_PLANS:case Oa.a.NO_ACTIVE_CARE_PLANS:t=["14%","3%","15%","10%","10%","10%"];break;case Oa.a.EPISODES:case Oa.a.DST:case Oa.a.VITAL_DAYS_REMAINING:case Oa.a.TMS_REMAINING:case Oa.a.INACTIVE_PATIENTS:case Oa.a.RPM_VITAL_COMPLIANCE:case Oa.a.ASSESSMENT_COMPLIANCE:case Oa.a.ON_BOARDING:if("GENERAL"===i){t=this.checkIfBHIEnabled(a,r)?["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"]:["5%","15%","3%","15%","8%","8%","10%","10%","10%","10%","10%","10%"];break}if("CCM"===i){this.checkIfCCMEnabled(a,r),t=["5%","12%","5%","12%","10%","10%","10%"];break}if("TOC"===i){t=["5%","15%","3%","15%","17%","17%","17%","11%"];break}t=["5%","12%","3%","15%","10%","8%","12%","10%","8%","8%","8%"];break;case Oa.a.CMT:t=["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"];break;case Oa.a.CONSENT_FORM:switch(o){case Ma.TO_BE_OBTAINED:t=["14%","3%","15%","10%","15%","15%","15%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case Oa.a.PHYSICIAN_ORDER:switch(l){case Ma.TO_BE_OBTAINED:t=["14%","3%","15%","15%","20%","20%","15%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case Oa.a.PATIENT_NOT_SERVICED:t=["5%","12%","5%","12%","10%","10%","10%","10%"];break;case Oa.a.CCM_CMT_REMAINING:t=["5%","12%","5%","12%","10%","10%","10%"]}return t}},{key:"widthForSmallerScreens",value:function(t,e,n,i,a,r,o,l){switch(n){case Oa.a.ALL_PATIENTS:t=e?["14%","3%","15%","25%","25%","20%"]:["14%","3%","15%","50%","20%"];break;case Oa.a.NO_ACTIVE_EPISODES:t=e?["15%","5%","15%","15%","20%"]:["20%","5%","20%","25%","10%"];break;case Oa.a.CARE_PLANS:case Oa.a.NO_ACTIVE_CARE_PLANS:t=["14%","3%","15%","10%","10%","10%"];break;case Oa.a.EPISODES:case Oa.a.DST:case Oa.a.VITAL_DAYS_REMAINING:case Oa.a.TMS_REMAINING:case Oa.a.INACTIVE_PATIENTS:case Oa.a.RPM_VITAL_COMPLIANCE:case Oa.a.ASSESSMENT_COMPLIANCE:case Oa.a.ON_BOARDING:if("GENERAL"===i){t=this.checkIfBHIEnabled(a,r)?e?["5%","15%","3%","10%","15%","8%","12%","10%","10%","10%"]:["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"]:["5%","15%","3%","15%","8%","8%","10%","10%","10%","10%","10%","10%"];break}if("CCM"===i){this.checkIfCCMEnabled(a,r),t=["5%","12%","5%","12%","10%","10%","10%"];break}if("TOC"===i){t=["5%","15%","3%","15%","17%","17%","17%","11%"];break}t=["5%","12%","3%","15%","10%","8%","12%","10%","8%","8%","8%"];break;case Oa.a.CMT:t=["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"];break;case Oa.a.CONSENT_FORM:switch(o){case Ma.TO_BE_OBTAINED:t=["14%","3%","15%","15%","20%","20%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case Oa.a.PHYSICIAN_ORDER:switch(l){case Ma.TO_BE_OBTAINED:t=e?["14%","3%","15%","15%","20%","15%","15%","20%","15%"]:["14%","3%","15%","20%","20%","15%","20%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case Oa.a.CCM_CMT_REMAINING:t=["5%","12%","5%","12%","10%","10%","10%"]}return t}},{key:"checkIfBHIEnabled",value:function(t,e){if((null==t?void 0:t.length)&&e){var n=Object(qe.a)().map(function(t){return t.id});return!!(null==t?void 0:t.filter(function(t){return t.type===e&&!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(function(t){return n.indexOf(t)>=0}))}))}}},{key:"checkIfCCMEnabled",value:function(t,e){if((null==t?void 0:t.length)&&e){var n=Object(qe.b)().map(function(t){return t.id});return!!(null==t?void 0:t.filter(function(t){return t.type===e&&!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(function(t){return n.indexOf(t)>=0}))}))}}}]),t}()).\u0275fac=function(t){return new(t||Ea)},Ea.\u0275pipe=_.Qb({name:"tableWidth",type:Ea,pure:!0}),Ea),Pa=o("m3lz"),Na=o("vDSh"),Wa=o("CRwX"),Ra=((Xa=function(){function t(){b(this,t),this.value=0,this.parameters=[],this.keys=[]}return d(t,[{key:"transform",value:function(t){return t&&(null==t?void 0:t.value)?"BLOOD_PRESSURE"===t.vitalType?this.getBloodPressureValue(t):this.getOtherVitalValue(t):""}},{key:"getBloodPressureValue",value:function(t){var e=null==t?void 0:t.value.SYSTOLIC,n=null==t?void 0:t.value.DIASTOLIC;return e&&n?"".concat(e,"/").concat(n):"N/A"}},{key:"getOtherVitalValue",value:function(t){return t.value[Object.keys(t.value)[0]]}}]),t}()).\u0275fac=function(t){return new(t||Xa)},Xa.\u0275pipe=_.Qb({name:"vital",type:Xa,pure:!0}),Xa),xa=o("wsR7"),ka=o("mLmo");function wa(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",21),_.Xb(2,"div",22),_.Xb(3,"div",23),_.Xb(4,"label",24),_.Xc(5,"Patient Type"),_.Wb(),_.Wb(),_.Xb(6,"div",25),_.Xb(7,"nz-select",26),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().assignedStaffType=t})("ngModelChange",function(){return _.Lc(n),_.ic().onAssignedStaffChange()}),_.Sb(8,"nz-option",27),_.Sb(9,"nz-option",28),_.Sb(10,"nz-option",29),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(7),_.rc("ngModel",i.assignedStaffType)}}function Va(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",31),_.ec("click",function(){return _.Lc(n),_.ic(2).repeatEpisodes()}),_.Sb(1,"app-icons",32),_.Xc(2),_.jc(3,"translate"),_.Wb()}2&t&&(_.Db(2),_.Zc("\xa0\xa0 ",_.kc(3,1,"COMMON.REPEATTYPE")," "))}function La(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Va,4,3,"button",30),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf","NO_ACTIVE_EPISODES"===n.selectedFilterData[0])}}function Fa(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",34),_.ec("click",function(){return _.Lc(n),_.ic(2).getPatientsList(1,!1,"XLS")}),_.Sb(1,"app-icons",35),_.Xc(2),_.jc(3,"translate"),_.Wb()}2&t&&(_.Db(2),_.Zc("\xa0\xa0 ",_.kc(3,1,"COMMON.DOWNLOAD")," "))}function Ua(t,e){if(1&t&&(_.Xb(0,"span"),_.Vc(1,Fa,4,3,"button",33),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",n.selectedFilterData.length||n.selectedCaretakerId||n.selectedGroupId)}}function ja(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"li",44),_.ec("click",function(){return _.Lc(n),_.ic(2).generateVitalReport()}),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Sb(4,"li",42),_.Ub()}2&t&&(_.Db(2),_.Yc(_.kc(3,1,"BULK_ACTION.GENERATE_VITAL_REPORT")))}function Ya(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"li",44),_.ec("click",function(){return _.Lc(n),_.ic(2).generateAssessmentReport()}),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Sb(4,"li",42),_.Ub()}2&t&&(_.Db(2),_.Yc(_.kc(3,1,"BULK_ACTION.GENERATE_ASSESSMENT_REPORT")))}function Ba(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){return _.Lc(n),_.ic(2).assignStaff()}),_.Xc(1," Assign Monitoring Staff "),_.Wb()}}function Ha(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){return _.Lc(n),_.ic(3).assignPrimaryStaff()}),_.Xc(1," Assign Primary Monitoring Staff "),_.Wb()}}function Ga(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Ha,2,0,"li",41),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf","TENANT_ADMIN"===n.activeRoleType)}}function Za(t,e){1&t&&(_.Xb(0,"li",45),_.Xb(1,"span"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Zc("",_.kc(3,1,"COMMON.BULK_ADD")," Notes"))}var $a=function(){return{feature:"vitalConfig?.enabled"}},qa=function(){return{feature:"featureConfigs?.formsEnabled"}},Ka=function(){return["MARK_AS_PRIMARY_MONITORING_STAFF"]},Qa=function(){return["BULK_ADD_PATIENT"]};function Ja(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"button",36),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",37),_.Wb(),_.Xb(5,"nz-dropdown-menu",null,38),_.Xb(7,"ul",39),_.Vc(8,ja,5,3,"ng-container",40),_.Vc(9,Ya,5,3,"ng-container",40),_.Vc(10,Ba,2,0,"li",41),_.Vc(11,Ga,2,1,"ng-container",5),_.Sb(12,"li",42),_.Vc(13,Za,4,3,"li",43),_.Wb(),_.Wb(),_.Ub()),2&t){var n=_.Ic(6),i=_.ic();_.Db(1),_.rc("nzDropdownMenu",n),_.Db(1),_.Zc(" ",_.kc(3,7,"BULK_ACTION.BULK_ACTIONS")," \xa0"),_.Db(6),_.rc("isTenantFeatureEnabled",_.xc(9,$a)),_.Db(1),_.rc("isTenantFeatureEnabled",_.xc(10,qa)),_.Db(1),_.rc("ngIf","TENANT_ADMIN"===i.activeRoleType),_.Db(1),_.rc("isFeaturePermitted",_.xc(11,Ka)),_.Db(2),_.rc("isFeaturePermitted",_.xc(12,Qa))}}function tr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",47),_.ec("click",function(){return _.Lc(n),_.ic(2).onSendSMSClick()}),_.Sb(1,"app-icons",48),_.Xc(2),_.jc(3,"translate"),_.Wb()}if(2&t){var i=_.ic(2);_.rc("disabled",i.loading),_.Db(2),_.Zc(" \xa0\xa0",_.kc(3,2,"SMS.SEND_SMS")," ")}}function er(t,e){if(1&t&&(_.Vb(0),_.Vc(1,tr,4,4,"button",46),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",n.conversationEnabled)}}function nr(t,e){1&t&&_.Sb(0,"th")}function ir(t,e){1&t&&(_.Xb(0,"th",49),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"SITE")," "))}function ar(t,e){1&t&&(_.Xb(0,"th"),_.Xc(1," Sub tenant "),_.Wb())}function rr(t,e){1&t&&(_.Vb(0),_.Xb(1,"th",50),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Ub()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"COMMON.CAREPLAN")))}function or(t,e){1&t&&(_.Vb(0),_.Xb(1,"th",50),_.Xc(2,"Plan of Care"),_.Wb(),_.Ub())}function lr(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"th",51),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("CMT",t)}),_.Xc(2," CMT "),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(1),_.rc("episodeWidgetEnabled","CMT_ADHERENCE")("blueprints",i.enabledEpisodeBlueprints)("selectedFilter",i.selectedFilterData)("episodeType",i.selectedEpisodeType)("nzSortFn",!0)}}function sr(t,e){1&t&&(_.Vb(0),_.Xb(1,"th",52),_.Xc(2," Non-complex CMT "),_.Wb(),_.Xb(3,"th",52),_.Xc(4," Complex CMT "),_.Wb(),_.Ub())}function cr(t,e){1&t&&(_.Vb(0),_.Xb(1,"th",52),_.Xc(2," SMS Sent "),_.Wb(),_.Xb(3,"th",52),_.Xc(4," Attempt Count "),_.Wb(),_.Xb(5,"th",52),_.Xc(6," CMT "),_.Wb(),_.Ub())}function ur(t,e){1&t&&(_.Vb(0),_.Xb(1,"th"),_.Xc(2,"Last Serviced Date"),_.Wb(),_.Ub())}function dr(t,e){1&t&&(_.Vb(0),_.Xb(1,"th",53),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Ub()),2&t&&(_.Db(2),_.Zc(" ",_.kc(3,1,"PATIENT.LAST_MEASURED_ASSESSMENTS")," "))}function br(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"th",54),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("VITAL_DAYS_REMAINING",t)}),_.Xb(2,"div",55),_.Xb(3,"span",56),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(6,"th",57),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("TMS",t)}),_.Xb(7,"div",55),_.Xb(8,"span",56),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"span",58),_.Sb(12,"app-icons",59),_.Wb(),_.Wb(),_.Wb(),_.Xb(13,"th",60),_.Xc(14),_.jc(15,"translate"),_.Wb(),_.Ub()}if(2&t){_.ic();var i=_.Ic(54);_.Db(1),_.rc("nzSortFn",!0)("nzTooltipTitle","Vital Days Remaining"),_.Db(3),_.Yc(_.kc(5,9,"PATIENT.VITALS_REM")),_.Db(2),_.rc("nzSortFn",!0)("nzBreakWord",!0),_.Db(3),_.Yc(_.kc(10,11,"PATIENT.TMS_COMPLETED")),_.Db(2),_.rc("nzTooltipTitle",i),_.Db(1),_.rc("originalStyle",!0),_.Db(2),_.Zc(" ",_.kc(15,13,"PATIENT.LAST_MEASURED_VITALSIGNS")," ")}}function pr(t,e){1&t&&(_.Vb(0),_.Xb(1,"th"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Ub()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"EPISODE.EPISODE_HISTORY")))}function fr(t,e){1&t&&(_.Vb(0),_.Xb(1,"th"),_.Xc(2,"Episode"),_.Wb(),_.Ub())}function gr(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"th",61),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("EPISODE_START_DATE",t)}),_.Xc(2,"Starting From"),_.Wb(),_.Xb(3,"th",61),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("EPISODE_END_DATE",t)}),_.Xc(4,"To"),_.Wb(),_.Ub()}2&t&&(_.Db(1),_.rc("nzSortFn",!0),_.Db(2),_.rc("nzSortFn",!0))}function hr(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"th",61),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("CONSENT_VALID_UPTO",t)}),_.Xc(2,"Consent Form Valid Upto "),_.Wb(),_.Ub()}2&t&&(_.Db(1),_.rc("nzSortFn",!0))}function vr(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"th",61),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("PHYSICIAN_ORDER_VALID_UPTO",t)}),_.Xc(2,"Physician Order Valid Upto"),_.Wb(),_.Ub()}2&t&&(_.Db(1),_.rc("nzSortFn",!0))}function mr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"th",62),_.ec("nzSortOrderChange",function(t){return _.Lc(n),_.ic().setSortKey("ALERTS",t)}),_.Wb()}2&t&&_.rc("nzSortFn",!0)}function Sr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"app-icons",86),_.ec("click",function(){_.Lc(n);var t=_.ic(3).$implicit;return _.ic().startTimer(t)}),_.Wb()}if(2&t){var i=_.ic(4);_.rc("nzTooltipTitle",i.timerRunning?"End Timer":"Start Timer")}}function Ir(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Sr,1,1,"app-icons",85),_.Ub()),2&t){var n=_.ic(3);_.Db(1),_.rc("ngIf",!(n.timerRunning||null!=n.timedPatient&&n.timedPatient.id))}}function Dr(t,e){if(1&t&&(_.Xb(0,"td"),_.Vc(1,Ir,2,1,"ng-container",4),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("ngIf","IN_PROGRESS"===(null==n||null==n.episode?null:n.episode.episodeStatus))}}function yr(t,e){if(1&t&&(_.Xb(0,"td"),_.Vb(1),_.Xb(2,"div",87),_.Xb(3,"span",88),_.jc(4,"userLocations"),_.Xc(5),_.jc(6,"titlecase"),_.jc(7,"userLocations"),_.Wb(),_.Wb(),_.Ub(),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(3),_.rc("nzTooltipTitle",_.kc(4,2,null==n?null:n.sites)||"-"),_.Db(2),_.Zc(" ",_.kc(6,4,_.kc(7,6,null==n?null:n.sites))," ")}}function Cr(t,e){if(1&t&&(_.Xb(0,"td"),_.Xc(1),_.jc(2,"tenantName"),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",_.kc(2,1,null==n?null:n.tenantId)," ")}}function Er(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",89),_.Xb(2,"span",88),_.jc(3,"careplanName"),_.Xc(4),_.jc(5,"careplanName"),_.Wb(),_.Wb(),_.Ub()),2&t){var n=_.ic(3).$implicit;_.Db(2),_.rc("nzTooltipTitle",_.kc(3,2,null==n||null==n.carePlan?null:n.carePlan.blueprintId)),_.Db(2),_.Zc(" ",_.kc(5,4,null==n||null==n.carePlan?null:n.carePlan.blueprintId)," ")}}function Xr(t,e){1&t&&(_.Vb(0),_.Xb(1,"div",89),_.Xb(2,"span",88),_.jc(3,"translate"),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Ub()),2&t&&(_.Db(2),_.sc("nzTooltipTitle",_.kc(3,2,"CAREPLAN_EXPIRED")),_.Db(2),_.Zc(" ",_.kc(5,4,"CAREPLAN_EXPIRED")," "))}function Tr(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Er,6,6,"ng-container",4),_.jc(2,"dateCompare"),_.Vc(3,Xr,6,6,"ng-container",4),_.jc(4,"dateCompare"),_.Ub()),2&t){var n=_.ic(2).$implicit;_.Db(1),_.rc("ngIf",_.kc(2,2,null==n||null==n.carePlan?null:n.carePlan.endDate)),_.Db(2),_.rc("ngIf",!_.kc(4,4,null==n||null==n.carePlan?null:n.carePlan.endDate))}}function zr(t,e){1&t&&(_.Vb(0),_.Xb(1,"div",89),_.Xb(2,"span",88),_.Xc(3," No Care Plan Assigned "),_.Wb(),_.Wb(),_.Ub()),2&t&&(_.Db(2),_.rc("nzTooltipTitle","No Care Plan Assigned"))}function _r(t,e){if(1&t){var n=_.Yb();_.Xb(0,"td",63),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().viewCareplanActionItems(null==t?null:t.id,null==t||null==t.carePlan?null:t.carePlan.id)}),_.Vc(1,Tr,5,6,"ng-container",4),_.Vc(2,zr,4,1,"ng-container",4),_.Wb()}if(2&t){var i=_.ic().$implicit;_.Db(1),_.rc("ngIf",null==i||null==i.carePlan?null:i.carePlan.careplanType),_.Db(1),_.rc("ngIf",!(null!=i&&null!=i.carePlan&&i.carePlan.careplanType))}}function Or(t,e){if(1&t){var n=_.Yb();_.Xb(0,"td",91),_.ec("click",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic().gotoPlanOfCareHistory(t,null==t||null==t.episode?null:t.episode.id)}),_.Xc(1," Assigned "),_.Wb()}if(2&t){var i=_.ic(2).$implicit;_.tc("nzTooltipTitle","",null==i?null:i.assignedPlanOfCare," plan of care assigned")}}function Mr(t,e){1&t&&(_.Xb(0,"td"),_.Xc(1,"Not Assigned"),_.Wb())}function Ar(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Or,2,1,"td",90),_.Vc(2,Mr,2,0,"td",4),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("ngIf",0<(null==n?null:n.assignedPlanOfCare)),_.Db(1),_.rc("ngIf",0===(null==n?null:n.assignedPlanOfCare))}}function Pr(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"td",92),_.Xb(2,"nz-progress",93),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().onCMTClick(t)}),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic().$implicit,a=_.ic();_.Db(1),_.rc("episodeWidgetEnabled","CMT_ADHERENCE")("blueprints",a.enabledEpisodeBlueprints)("episodeType",a.selectedEpisodeType)("selectedFilter",a.selectedFilterData),_.Db(1),_.sc("nzPercent",(null==i||null==i.episode?null:i.episode.totalCMTCompleted)/20*100),_.rc("nzFormat",a.cmtFormat)}}function Nr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"app-non-complex-tms",97),_.ec("onSave",function(){return _.Lc(n),_.ic(3).getPatientsList()}),_.Wb()}if(2&t){var i=_.ic(2).$implicit,a=_.ic();_.rc("blueprint",a.selectedBlueprintId)("patient",i)("cptCode","NON_COMPLEX_TMS")}}function Wr(t,e){1&t&&(_.Xb(0,"span",98),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"NA"),""))}function Rr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"app-complex-tms",99),_.ec("onSave",function(){return _.Lc(n),_.ic(3).getPatientsList()}),_.Wb()}if(2&t){var i=_.ic(2).$implicit,a=_.ic();_.rc("blueprint",a.selectedBlueprintId)("patient",i)}}function xr(t,e){1&t&&(_.Xb(0,"span",98),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"NA"),""))}function kr(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td",52),_.Vc(2,Nr,1,3,"app-non-complex-tms",94),_.Vc(3,Wr,3,3,"span",95),_.Wb(),_.Xb(4,"td",52),_.Vc(5,Rr,1,2,"app-complex-tms",96),_.Vc(6,xr,3,3,"span",95),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.rc("ngIf","SUSPENDED"!==(null==n||null==n.episode?null:n.episode.episodeStatus)),_.Db(1),_.rc("ngIf","SUSPENDED"===(null==n||null==n.episode?null:n.episode.episodeStatus)),_.Db(2),_.rc("ngIf","SUSPENDED"!==(null==n||null==n.episode?null:n.episode.episodeStatus)),_.Db(1),_.rc("ngIf","SUSPENDED"===(null==n||null==n.episode?null:n.episode.episodeStatus))}}function wr(t,e){1&t&&(_.Xb(0,"nz-tag",105),_.Xc(1,"Yes"),_.Wb())}function Vr(t,e){1&t&&(_.Xb(0,"nz-tag",106),_.Xc(1,"No"),_.Wb())}function Lr(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"td",52),_.Vc(2,wr,2,0,"nz-tag",100),_.Vc(3,Vr,2,0,"nz-tag",101),_.Wb(),_.Xb(4,"td",52),_.Xb(5,"nz-tag",102),_.Xc(6),_.Wb(),_.Wb(),_.Xb(7,"td",52),_.Xb(8,"div",103),_.Xb(9,"div",104),_.Xb(10,"nz-progress",93),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().onToCCMTClick(t)}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic().$implicit,a=_.ic();_.Db(2),_.rc("ngIf",!(null==i||null==i.episode||null==i.episode.eventState||!i.episode.eventState.lastSMSDateTime)),_.Db(1),_.rc("ngIf",!(null!=i&&null!=i.episode&&null!=i.episode.eventState&&i.episode.eventState.lastSMSDateTime)),_.Db(3),_.Zc("Attempt ",(null==i||null==i.episode||null==i.episode.eventState?null:i.episode.eventState.totalContactAttempts)||0,""),_.Db(4),_.sc("nzPercent",null==i||null==i.episode?null:i.episode.totalCMTCompleted),_.rc("nzFormat",a.tocFormat)}}function Fr(t,e){if(1&t&&(_.Xb(0,"td",88),_.jc(1,"dateCompare"),_.Xc(2),_.jc(3,"date"),_.Wb()),2&t){var n=_.ic(2).$implicit;_.tc("nzTooltipTitle","Serviced ",_.lc(1,2,null==n||null==n.lastServiceDates?null:n.lastServiceDates.CCM,"DAYS")," days ago"),_.Db(2),_.Zc(" ",_.lc(3,5,null==n||null==n.lastServiceDates?null:n.lastServiceDates.CCM,"d MMMM, y")," ")}}function Ur(t,e){if(1&t&&(_.Xb(0,"td",88),_.jc(1,"dateCompare"),_.Xc(2),_.jc(3,"date"),_.Wb()),2&t){var n=_.ic(2).$implicit;_.tc("nzTooltipTitle","Serviced ",_.lc(1,2,null==n||null==n.lastServiceDates?null:n.lastServiceDates.RPM,"DAYS")," days ago"),_.Db(2),_.Zc(" ",_.lc(3,5,null==n||null==n.lastServiceDates?null:n.lastServiceDates.RPM,"d MMMM, y")," ")}}function jr(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Fr,4,8,"td",107),_.Vc(2,Ur,4,8,"td",107),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf","CCM"===n.selectedEpisodeType),_.Db(1),_.rc("ngIf","RPM"===n.selectedEpisodeType)}}function Yr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-statistic",111),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit,e=_.ic(2).$implicit;return _.ic().navigateGeneral(e,null==e||null==e.assessmentScores[t]?null:e.assessmentScores[t].parentFormId,null==e||null==e.assessmentScores[t]?null:e.assessmentScores[t].id,null==e?null:e.id,null==e?null:e.phoneNumbers)}),_.jc(1,"formName"),_.Wb()}if(2&t){var i=_.ic().$implicit,a=_.ic(2).$implicit;_.sc("nzTitle",null==a||null==a.assessmentScores[i]?null:a.assessmentScores[i].score),_.sc("nzValue",_.kc(1,2,null==a||null==a.assessmentScores[i]?null:a.assessmentScores[i].name))}}function Br(t,e){1&t&&(_.Xb(0,"span",98),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"NA"),""))}function Hr(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td",109),_.Vc(2,Yr,2,4,"nz-statistic",110),_.Vc(3,Br,3,3,"span",95),_.Wb(),_.Ub()),2&t){var n=e.$implicit,i=_.ic(2).$implicit;_.Db(2),_.rc("ngIf",null==i?null:i.assessmentScores),_.Db(1),_.rc("ngIf",!(null!=i&&i.assessmentScores&&null!=i&&i.assessmentScores[n]))}}var Gr=function(){return[2,1,0]};function Zr(t,e){1&t&&(_.Vb(0),_.Vc(1,Hr,4,2,"ng-container",108),_.Ub()),2&t&&(_.Db(1),_.rc("ngForOf",_.xc(1,Gr)))}function $r(t,e){if(1&t&&(_.Xb(0,"div",121),_.Xb(1,"p",122),_.Xc(2),_.Wb(),_.Wb()),2&t){var n=_.ic(2).$implicit,i=_.ic();_.Db(2),_.Zc(" ",i.vitalsFormat((null==n||null==n.vitalState?null:n.vitalState.compliantForDays)/16*100)," ")}}function qr(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-progress",123),_.ec("click",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic().viewCareplanActionItems(null==t?null:t.id,null==t||null==t.carePlan?null:t.carePlan.id)}),_.Wb()}if(2&t){var i=_.ic(2).$implicit;_.sc("nzSuccessPercent",(null==i||null==i.vitalState?null:i.vitalState.compliantForDays)/16*100),_.rc("nzShowInfo",!1)("nzPercent",100)}}function Kr(t,e){if(1&t&&(_.Xb(0,"p",122),_.Xc(1),_.Wb()),2&t){var n=_.ic(3).$implicit;_.Db(1),_.Zc(" ",null==n||null==n.episode?null:n.episode.totalTMSCompleted," ")}}function Qr(t,e){1&t&&(_.Xb(0,"p",122),_.Xc(1," Completed "),_.Wb())}function Jr(t,e){if(1&t&&(_.Xb(0,"div",121),_.Vc(1,Kr,2,1,"p",124),_.Vc(2,Qr,2,0,"p",124),_.Wb()),2&t){var n=_.ic(2).$implicit;_.Db(1),_.rc("ngIf",(null==n||null==n.episode?null:n.episode.totalTMSCompleted)<60),_.Db(1),_.rc("ngIf",(null==n||null==n.episode?null:n.episode.totalTMSCompleted)>=60)}}function to(t,e){if(1&t&&_.Sb(0,"nz-progress",125),2&t){var n=_.ic(2).$implicit;_.sc("nzSuccessPercent",(null==n||null==n.episode?null:n.episode.totalTMSCompleted)/20*100),_.rc("nzPercent",100)("nzShowInfo",!1)}}function eo(t,e){if(1&t&&_.Sb(0,"nz-progress",125),2&t){var n=_.ic(2).$implicit;_.sc("nzSuccessPercent",100*((null==n||null==n.episode?null:n.episode.totalTMSCompleted)>20&&(null==n||null==n.episode?null:n.episode.totalTMSCompleted)/40)),_.rc("nzPercent",100)("nzShowInfo",!1)}}function no(t,e){if(1&t&&_.Sb(0,"nz-progress",126),2&t){var n=_.ic(2).$implicit;_.sc("nzSuccessPercent",100*((null==n||null==n.episode?null:n.episode.totalTMSCompleted)>40&&(null==n||null==n.episode?null:n.episode.totalTMSCompleted)/60)),_.rc("nzShowInfo",!1)}}function io(t,e){if(1&t&&(_.Sb(0,"nz-statistic",129),_.jc(1,"vital"),_.jc(2,"vitalName")),2&t){var n=_.ic().$implicit,i=_.ic(2).$implicit;_.sc("nzTitle",_.kc(1,2,null==i||null==i.vitalState?null:i.vitalState.latestVitals[n])),_.sc("nzValue",null!=i&&null!=i.vitalState&&null!=i.vitalState.latestVitals[n]&&i.vitalState.latestVitals[n].id?_.kc(2,4,null==i||null==i.vitalState||null==i.vitalState.latestVitals[n]?null:i.vitalState.latestVitals[n].vitalType):"")}}function ao(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"td",127),_.ec("click",function(){_.Lc(n);var t=e.$implicit,i=_.ic(2),a=i.index,r=i.$implicit;return _.ic().navigate(a,"vital-trend",null==r?null:r.id,null==r?null:r.name,null==r?null:r.gender,null==r?null:r.dateOfBirth,null==r?null:r.patientStatus,null==r||null==r.episode?null:r.episode.id,null==r||null==r.carePlan?null:r.carePlan.id,null==r||null==r.carePlan?null:r.carePlan.startDate,null==r||null==r.assessmentScores[t]?null:r.assessmentScores[t].id,null==r||null==r.episode?null:r.episode.totalTMSCompleted,null==r||null==r.episode?null:r.episode.totalAdditionalTMSCompleted,null==r?null:r.phoneNumbers,null==r||null==r.vitalState?null:r.vitalState.latestVitals[t],null==r?null:r.tenantId)}),_.Vc(2,io,3,6,"nz-statistic",128),_.Wb(),_.Ub()}if(2&t){var i=_.ic(2).$implicit,a=_.ic();_.Db(2),_.rc("ngIf",a.selectedEpisodeType&&(null==i||null==i.vitalState||null==i.vitalState.latestVitals?null:i.vitalState.latestVitals.length))}}var ro=function(){return[0,1,2]};function oo(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"td",112),_.Vc(2,$r,3,1,"div",113),_.jc(3,"dateCompare"),_.Xb(4,"div",114),_.Vc(5,qr,1,3,"nz-progress",115),_.jc(6,"dateCompare"),_.Wb(),_.Wb(),_.Xb(7,"td",116),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().onTMSClick(t,"TMS","TREATMENT_MANAGEMENT_SERVICE")}),_.Vc(8,Jr,3,2,"div",117),_.jc(9,"dateCompare"),_.Xb(10,"div",114),_.Xb(11,"div",118),_.Vc(12,to,1,3,"nz-progress",119),_.jc(13,"dateCompare"),_.Wb(),_.Xb(14,"div",118),_.Vc(15,eo,1,3,"nz-progress",119),_.jc(16,"dateCompare"),_.Wb(),_.Xb(17,"div",118),_.Vc(18,no,1,2,"nz-progress",120),_.jc(19,"dateCompare"),_.Wb(),_.Wb(),_.Wb(),_.Vc(20,ao,3,1,"ng-container",108),_.Ub()}if(2&t){var i=_.ic().$implicit;_.Db(2),_.rc("ngIf",_.kc(3,7,(null==i||null==i.carePlan?null:i.carePlan.id)&&(null==i||null==i.carePlan?null:i.carePlan.endDate))),_.Db(3),_.rc("ngIf",_.kc(6,9,(null==i||null==i.carePlan?null:i.carePlan.id)&&(null==i||null==i.carePlan?null:i.carePlan.endDate))),_.Db(3),_.rc("ngIf",_.kc(9,11,(null==i||null==i.carePlan?null:i.carePlan.id)&&(null==i||null==i.carePlan?null:i.carePlan.endDate))),_.Db(4),_.rc("ngIf",_.kc(13,13,(null==i||null==i.carePlan?null:i.carePlan.id)&&(null==i||null==i.carePlan?null:i.carePlan.endDate))),_.Db(3),_.rc("ngIf",_.kc(16,15,(null==i||null==i.carePlan?null:i.carePlan.id)&&(null==i||null==i.carePlan?null:i.carePlan.endDate))),_.Db(3),_.rc("ngIf",_.kc(19,17,(null==i||null==i.carePlan?null:i.carePlan.id)&&(null==i||null==i.carePlan?null:i.carePlan.endDate))),_.Db(2),_.rc("ngForOf",_.xc(19,ro))}}function lo(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.jc(3,"date"),_.Ub()),2&t){var n=_.ic(2).$implicit;_.Db(1),_.ad(" ",_.kc(2,2,"PREVIOUS_EPISODE_ENDED_ON"),": ",_.lc(3,4,null==n||null==n.previousEpisodes[0]?null:n.previousEpisodes[0].endDate,"mediumDate")," ")}}function so(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PREVIOUS_EPISODE_SUSPENDED")," "))}function co(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc("",_.kc(2,1,"NO_PREVIOUS_EPISODE")," "))}function uo(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td",130),_.Vc(2,lo,4,7,"ng-container",4),_.Vc(3,so,3,3,"ng-container",4),_.Vc(4,co,3,3,"ng-container",4),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.rc("ngIf",(null==n||null==n.previousEpisodes?null:n.previousEpisodes.length)&&"SUSPENDED"!==(null==n||null==n.previousEpisodes[0]?null:n.previousEpisodes[0].status)),_.Db(1),_.rc("ngIf",(null==n||null==n.previousEpisodes?null:n.previousEpisodes.length)&&"SUSPENDED"===(null==n||null==n.previousEpisodes[0]?null:n.previousEpisodes[0].status)),_.Db(1),_.rc("ngIf",!(null!=n&&null!=n.previousEpisodes&&n.previousEpisodes.length))}}function bo(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td"),_.Xc(2),_.jc(3,"episodeName"),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.Zc(" ",_.kc(3,1,null==n.episode?null:n.episode.episodeType)," ")}}function po(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td"),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Xb(4,"td"),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.Zc(" ",_.lc(3,2,null==n.episode?null:n.episode.startDate,"d MMMM, y")," "),_.Db(3),_.Zc(" ",_.lc(6,5,null==n.episode?null:n.episode.endDate,"d MMMM, y")," ")}}function fo(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td"),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.Zc(" ",_.lc(3,1,n.expirationDate,"d MMMM, y")," ")}}function go(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"td"),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.Zc(" ",_.lc(3,1,n.expirationDate,"d MMMM, y")," ")}}function ho(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-badge",131),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().showAlertDrawer(null==t?null:t.id,null==t?null:t.name,!1,null==t||null==t.episode?null:t.episode.id,null==t||null==t.carePlan?null:t.carePlan.id,null==t||null==t.carePlan?null:t.carePlan.startDate,null==t||null==t.episode?null:t.episode.totalTMSCompleted,null==t||null==t.episode?null:t.episode.totalAdditionalTMSCompleted,null==t?null:t.phoneNumbers)}),_.Sb(1,"app-icons",132),_.Wb()}if(2&t){var i=_.ic().$implicit;_.rc("nzCount",null==i?null:i.pendingAlertsCount),_.Db(1),_.rc("originalStyle",!0)}}function vo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(),e=t.index,i=t.$implicit;return _.ic().navigate(e,"view",null==i?null:i.id)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PATIENT.VIEW_PATIENT_DETAILS"),""))}function mo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(),e=t.index,i=t.$implicit;return _.ic().navigate(e,"edit",null==i?null:i.id,null==i?null:i.name)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}if(2&t){var i=_.ic().$implicit;_.Jb("disabled","DISCHARGED"===(null==i?null:i.patientStatus)||"NOT_ONBOARDED"===(null==i?null:i.patientStatus)),_.Db(1),_.Zc(" ",_.kc(2,3,"PATIENT.EDIT_PATIENT_DETAILS"),"")}}function So(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().runInsuranceTiering(null==t?null:t.id)}),_.Xc(1," Run Insurance Tiering "),_.Wb()}}function Io(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().runQualification(null==t?null:t.id)}),_.Xc(1," Run Qualification "),_.Wb()}}function Do(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().queryCCDA(null==t?null:t.id,"PatientQuery")}),_.Xc(1," Pull Patient Summary "),_.Wb()}}function yo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().queryCCDA(null==t?null:t.id,"VisitQuery")}),_.Xc(1," Pull Visit Summary "),_.Wb()}}function Co(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(),e=t.index,i=t.$implicit,a=_.ic();return a.navigate(e,"vital-trend",null==i?null:i.id,null==i?null:i.name,null==i?null:i.gender,null==i?null:i.dateOfBirth,null==i?null:i.patientStatus,null==i||null==i.episode?null:i.episode.id,null==i||null==i.carePlan?null:i.carePlan.id,null==i||null==i.carePlan?null:i.carePlan.startDate,null==i||null==i.assessmentScores[a.index]?null:i.assessmentScores[a.index].id,null==i||null==i.episode?null:i.episode.totalTMSCompleted,null==i||null==i.episode?null:i.episode.totalAdditionalTMSCompleted,null==i?null:i.phoneNumbers)}),_.Xc(1," Vital Trend Menu "),_.Wb()}}function Eo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic().navigateAssessment(t,null==t||null==t.assessmentScores[0]?null:t.assessmentScores[0].parentFormId,null==t||null==t.assessmentScores[0]?null:t.assessmentScores[0].id,null==t?null:t.id,null==t?null:t.phoneNumbers)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PATIENT.VIEW_ASSESSMENT_TREND")," "))}var Xo=function(){return["VIEW_PATIENT_DETAILS"]};function To(t,e){1&t&&(_.Vb(0),_.Vc(1,Eo,3,3,"li",80),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,Xo)))}function zo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic().showAssessmentDetails(t)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PATIENT.VIEW_ASSESSMENT")," "))}var _o=function(){return["VIEW_ASSESSMENT"]};function Oo(t,e){1&t&&(_.Vb(0),_.Vc(1,zo,3,3,"li",80),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,_o)))}function Mo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic().showBHIAssessmentDetails(t)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PATIENT.VIEW_BHI_ASSESSMENT")," "))}function Ao(t,e){1&t&&(_.Vb(0),_.Vc(1,Mo,3,3,"li",80),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,_o)))}function Po(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic(2),e=t.index,i=t.$implicit;return _.ic().navigate(e,"appointment",null==i?null:i.id)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}if(2&t){var i=_.ic(2).$implicit;_.Jb("disabled","DISCHARGED"===(null==i?null:i.patientStatus)||"NOT_ONBOARDED"===(null==i?null:i.patientStatus)),_.Db(1),_.Zc(" ",_.kc(2,3,"COMMON.ADDAPPOINTMENT"),"")}}var No=function(){return["ADD_APPOINTMENT"]};function Wo(t,e){1&t&&(_.Vb(0),_.Vc(1,Po,3,5,"li",81),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,No)))}function Ro(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().showNotes(null==t?null:t.id,null==t?null:t.name,null==t?null:t.tenantId)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}if(2&t){var i=_.ic().$implicit;_.Jb("disabled","DISCHARGED"===(null==i?null:i.patientStatus)||"NOT_ONBOARDED"===(null==i?null:i.patientStatus)),_.Db(1),_.Yc(_.kc(2,3,"LEADS.ADDNOTE"))}}function xo(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit,e=_.ic();return e.showHistory(null==t?null:t.id,null==t?null:t.name,e.selectedEpisodeType)}),_.Xc(1,"Communication History"),_.Wb()}if(2&t){var i=_.ic().$implicit;_.Jb("disabled","DISCHARGED"===(null==i?null:i.patientStatus)||"NOT_ONBOARDED"===(null==i?null:i.patientStatus))}}function ko(t,e){if(1&t){var n=_.Yb();_.Xb(0,"li",44),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().suspendEpisode(null==t||null==t.episode?null:t.episode.id)}),_.Xc(1,"Suspend Episode"),_.Wb()}if(2&t){var i=_.ic().$implicit;_.Jb("disabled","COMPLETED"===(null==i||null==i.episode?null:i.episode.episodeStatus)||"SUSPENDED"===(null==i||null==i.episode?null:i.episode.episodeStatus))}}var wo=function(t){return{disabled:t}},Vo=function(){return["VIEW_PATIENT_ALERT"]},Lo=function(){return["VIEW_PATIENT"]},Fo=function(){return["EDIT_PATIENT"]},Uo=function(){return{feature:"redoxConfig?.enabled",tenantId:"data?.tenantId"}},jo=function(){return["VIEW_PATIENT","EDIT_PATIENT"]},Yo=function(){return{feature:"featureConfigs?.formsEnabled",tenantId:"data?.tenantId"}},Bo=function(){return["VIEW_PATIENT_NOTES"]};function Ho(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"tr"),_.Vc(2,Dr,2,1,"td",4),_.Xb(3,"td",63),_.ec("click",function(){_.Lc(n);var t=e.index,i=e.$implicit;return _.ic().navigate(t,"view",null==i?null:i.id)}),_.Xb(4,"div",64),_.Xc(5),_.jc(6,"titlecase"),_.Wb(),_.Wb(),_.Xb(7,"td",65),_.Sb(8,"app-patient-status-tag",66),_.Wb(),_.Xb(9,"td",67),_.Xb(10,"app-video-call-widget",68),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic().logAction("video_call",null==t?null:t.id)}),_.Wb(),_.Xb(11,"app-audio-call-widget",69),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic().logAction("audio_call",null==t?null:t.id)}),_.Wb(),_.Xb(12,"app-conversation-widget",70),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic().logAction("sms",null==t?null:t.id)})("onClose",function(){_.Lc(n);var t=_.ic();return t.getPatientsList(t.pageIndex)}),_.Wb(),_.Wb(),_.Vc(13,yr,8,8,"td",4),_.Vc(14,Cr,3,3,"td",16),_.Vc(15,_r,3,2,"td",71),_.Vc(16,Ar,3,2,"ng-container",4),_.Vc(17,Pr,3,6,"ng-container",4),_.Vc(18,kr,7,4,"ng-container",4),_.Vc(19,Lr,11,5,"ng-container",4),_.Vc(20,jr,3,2,"ng-container",4),_.Vc(21,Zr,2,2,"ng-container",4),_.Vc(22,oo,21,20,"ng-container",4),_.Vc(23,uo,5,3,"ng-container",4),_.Vc(24,bo,4,3,"ng-container",4),_.Vc(25,po,7,8,"ng-container",4),_.Vc(26,fo,4,4,"ng-container",4),_.Vc(27,go,4,4,"ng-container",4),_.Xb(28,"td"),_.Xb(29,"div",72),_.Xb(30,"div",73),_.Vc(31,ho,2,2,"nz-badge",74),_.Wb(),_.Xb(32,"div",73),_.Xb(33,"app-icons",75),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic().showDetails(null==t?null:t.id,"BASIC_DETAILS",null==t||null==t.episode?null:t.episode.id)}),_.Wb(),_.Wb(),_.Xb(34,"div",73),_.Xb(35,"a",76),_.Sb(36,"app-icons",77),_.Wb(),_.Wb(),_.Wb(),_.Xb(37,"nz-dropdown-menu",null,78),_.Xb(39,"ul",79),_.Vc(40,vo,3,3,"li",80),_.Vc(41,mo,3,5,"li",81),_.Vc(42,So,2,0,"li",82),_.Vc(43,Io,2,0,"li",82),_.Vc(44,Do,2,0,"li",80),_.Vc(45,yo,2,0,"li",80),_.Vc(46,Co,2,0,"li",41),_.Vc(47,To,2,2,"ng-container",40),_.Vc(48,Oo,2,2,"ng-container",4),_.Vc(49,Ao,2,2,"ng-container",4),_.Vc(50,Wo,2,2,"ng-container",83),_.Vc(51,Ro,3,5,"li",81),_.Vc(52,xo,2,2,"li",84),_.Vc(53,ko,2,2,"li",84),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit,a=_.Ic(38),r=_.ic();_.Db(2),_.rc("ngIf",r.selectedFilterData[0]&&"ALL_PATIENTS"!==r.selectedFilterData[0]&&"CONSENT_FORM"!==r.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==r.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==r.selectedFilterData[0]),_.Db(2),_.rc("nzTooltipTitle",null==i?null:i.name)("nzTooltipVisible",r.tooltipState),_.Db(1),_.Zc(" ",_.kc(6,46,null==i?null:i.name)," "),_.Db(3),_.rc("patientStatus",null==i?null:i.patientStatus),_.Db(1),_.rc("ngClass",_.yc(48,wo,"DISCHARGED"===(null==i?null:i.patientStatus)||"NOT_ONBOARDED"===(null==i?null:i.patientStatus))),_.Db(1),_.rc("userId",null==i?null:i.id),_.Db(1),_.rc("userId",null==i?null:i.id)("phoneNumbers",null==i?null:i.phoneNumbers)("tenantId",null==i?null:i.tenantId),_.Db(1),_.rc("patientId",null==i?null:i.id)("patientName",null==i?null:i.name)("patient",i)("unreadMessageCount",null==i?null:i.unreadMessagesCount)("phoneNumbers",null==i?null:i.phoneNumbers),_.Db(1),_.rc("ngIf","ALL_PATIENTS"===r.selectedFilterData[0]&&"CONSENT_FORM"!==r.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==r.selectedFilterData[0]||"NO_ACTIVE_EPISODES"===r.selectedFilterData[0]),_.Db(2),_.rc("ngIf","ALL_PATIENTS"!==r.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==r.selectedFilterData[0]&&"CCM"!==r.selectedEpisodeType&&"TOC"!==r.selectedEpisodeType),_.Db(1),_.rc("ngIf","ALL_PATIENTS"!==r.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==r.selectedFilterData[0]&&"CCM"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf","GENERAL"===r.selectedEpisodeType||"BHI"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf","CCM"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf","TOC"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf",r.selectedFilterData&&"PATIENT_NOT_SERVICED"===r.selectedFilterData[0]),_.Db(1),_.rc("ngIf","GENERAL"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf","RPM"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf","NO_ACTIVE_EPISODES"===r.selectedFilterData[0]),_.Db(1),_.rc("ngIf",r.selectedFilterData&&("CONSENT_FORM"===r.selectedFilterData[0]||"PHYSICIAN_ORDER"===r.selectedFilterData[0])),_.Db(1),_.rc("ngIf",r.selectedFilterData&&("CONSENT_FORM"===r.selectedFilterData[0]||"PHYSICIAN_ORDER"===r.selectedFilterData[0])),_.Db(1),_.rc("ngIf",r.selectedFilterData&&"CONSENT_FORM"===r.selectedFilterData[0]&&"TO_BE_OBTAINED"!==r.consentFormStatus),_.Db(1),_.rc("ngIf",r.selectedFilterData&&"PHYSICIAN_ORDER"===r.selectedFilterData[0]&&"TO_BE_OBTAINED"!==r.physicianOrderStatus),_.Db(4),_.rc("isFeaturePermitted",_.xc(50,Vo)),_.Db(2),_.rc("originalStyle",!0),_.Db(2),_.rc("nzDropdownMenu",a),_.Db(5),_.rc("isFeaturePermitted",_.xc(51,Lo)),_.Db(1),_.rc("isFeaturePermitted",_.xc(52,Fo)),_.Db(1),_.rc("isTenantFeatureEnabled",_.xc(53,Uo)),_.Db(1),_.rc("isTenantFeatureEnabled",_.xc(54,Uo)),_.Db(1),_.rc("isFeaturePermitted",_.xc(55,jo)),_.Db(1),_.rc("isFeaturePermitted",_.xc(56,jo)),_.Db(1),_.rc("ngIf","RPM"===r.selectedEpisodeType),_.Db(1),_.rc("isTenantFeatureEnabled",_.xc(57,Yo)),_.Db(1),_.rc("ngIf","GENERAL"===r.selectedEpisodeType),_.Db(1),_.rc("ngIf","GENERAL"===r.selectedEpisodeType),_.Db(1),_.rc("isPatientComponentEnabled","APPOINTMENT"),_.Db(1),_.rc("isFeaturePermitted",_.xc(58,Bo)),_.Db(1),_.rc("ngIf","ALL_PATIENTS"!==r.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==r.selectedFilterData[0]),_.Db(1),_.rc("ngIf",r.selectedFilterData&&"PATIENT_NOT_SERVICED"===r.selectedFilterData[0])}}function Go(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.Yc(n.pageIndex*n.pageSize)}}function Zo(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.Yc(n.totalCount)}}function $o(t,e){if(1&t&&(_.Xb(0,"h5",133),_.Xc(1),_.jc(2,"translate"),_.jc(3,"translate"),_.Vc(4,Go,2,1,"ng-container",4),_.Vc(5,Zo,2,1,"ng-container",4),_.Xc(6),_.Wb()),2&t){var n=_.ic();_.Db(1),_.bd(" ",_.kc(2,6,"COMMON.SHOWING")," ",(n.pageIndex-1)*n.pageSize+1," ",_.kc(3,8,"TABLEHEADER.TO")," "),_.Db(3),_.rc("ngIf",n.pageIndex*n.pageSize<n.totalCount),_.Db(1),_.rc("ngIf",n.pageIndex*n.pageSize>=n.totalCount),_.Db(1),_.Zc(" of ",n.totalCount," ")}}function qo(t,e){1&t&&(_.Xb(0,"div"),_.Xb(1,"p",134),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"p",134),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xb(7,"p",134),_.Xc(8),_.jc(9,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Zc(" - ",_.kc(3,3,"TMS.PATIENT_LISTING_SCREEN_TOOLTIP.TMS"),""),_.Db(3),_.Zc(" - ",_.kc(6,5,"TMS.PATIENT_LISTING_SCREEN_TOOLTIP.ADDITIONAL_TMS_A"),""),_.Db(3),_.Zc(" - ",_.kc(9,7,"TMS.PATIENT_LISTING_SCREEN_TOOLTIP.ADDITIONAL_TMS_B"),""))}var Ko,Qo,Jo,tl,el=function(){return["REPEAT_EPISODE"]},nl=function(){return["DOWNLOAD_PATIENT_REPORT"]},il=function(){return{top:"150px",left:"36%"}},al=function(){return{right:"-6px !important",top:"-1px !important",backgroundColor:"#ff3939",boxShadow:"-1px -1px 0 1px #ff3939",color:"white",padding:"0px"}},rl=function(){return["VIEW_CONVERSATION"]},ol=function(t,e,n,i,a,r,o,l){return[t,e,n,i,a,r,o,l]},ll=function(){return[25,50,75,100]},sl=function(){return{x:"1150px"}},cl=((Ko=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l,s,c,u,d,p,f,g,h,v,m){var S;return b(this,i),(S=n.call(this))._patientsService=t,S._router=e,S._dataSharingService=a,S._notificationsService=r,S._translationService=o,S._patientCommunicationModalService=l,S._patientsModalsService=s,S._patientsDrawerService=c,S._formsTrendModalService=u,S._progress=d,S._patientsEventLogger=p,S._patientUrlService=f,S._patientFilterCountService=g,S._guidedTourService=h,S._episodeModalService=v,S._insuranceService=m,S.TASK_REFRESH_INTERVAL_MS=6e4,S.autoRefresh$=Object(Di.timer)(S.TASK_REFRESH_INTERVAL_MS,S.TASK_REFRESH_INTERVAL_MS),S.trackById=function(t,e){return null==e?void 0:e.id},S.assignedStaffType="ALL",S.listOfAllPatients=[],S.loading=!1,S.selectedFilter=["ALL_PATIENTS"],S.selectedFilterData=["ALL_PATIENTS"],S.dateRange=[],S.pageIndex=1,S.widthConfig=["14%","3%","15%","25%","25%","20%"],S.showAllAlerts=!1,S.patientRequests$=new Xn.Subject,S.patientComponentIsActive=!0,S.patientHeaderTabName="ALL_PATIENTS",S.episodeBlueprintTypes=new Set,S.episodeBlueprintTypeBlueprintIdMap=new Map,S.vitalsFormat=function(t){var e=Math.ceil(16*t/100),n=16-e;return 16>e?n<10?"0".concat(n):"".concat(n):"Completed"},S.tmsFormat=function(t){var e=Math.floor(60*t/100),n=60-e;return 60>e?n<10?"0".concat(n,"\n Minutes"):"".concat(n,"\n Minutes"):"Completed"},S.cmtFormat=function(t){var e=Math.floor(20*t/100),n=20-e;return 20>e?n<10?"0".concat(n,"\n Minutes"):"".concat(n,"\n Minutes"):"Completed"},S.tocFormat=function(t){return t<10?"0".concat(t,"\n Minutes"):"".concat(t,"\n Minutes")},S.primaryToggleText="TOOLTIP.PRIMARY_STAFF_TOGGLE.PRIMARY",S._dataSharingService.getTimer().pipe(Object(Ve.a)(S.unsubscribed)).subscribe(function(t){t&&("COMPLETED"===(null==t?void 0:t.state)||"END"===(null==t?void 0:t.state)?(S.timerRunning=!1,S.timedPatient=void 0,S.patientRequests$.next()):S.timerRunning=!0)}),S}return d(i,[{key:"ngOnInit",value:function(){var t,n=this;this.activeRoleType=localStorage.getItem("loggedInUserRole"),this._patientUrlService.getParameterValue("requestTenantIds")&&(this.selectedTenantIds=this._patientUrlService.getParameterValue("requestTenantIds").split(","),localStorage.setItem(an.a.REQUEST_TENANT_IDS,this._patientUrlService.getParameterValue("requestTenantIds"))),this.activeRoleType=localStorage.getItem("loggedInUserRole"),"MONITORING_STAFF"==this.activeRoleType&&(this.isPrimary=!0,this._patientUrlService.setParameter({assignedStaffType:"PRIMARY"})),(t=this._translationService).getMultiple.apply(t,e($e.STRINGS)).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){n.translatedStrings=t}),this.clearInfoDrawerState(),this.subscribeToActivatedRoute(),this.getTenantConfig(),this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied(),this._dataSharingService.onSubTenantChange().pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){n.onSubTenantChange(t)})}},{key:"subscribeToActivatedRoute",value:function(){var t=this;this._router.events.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){var n,i;e instanceof m.d&&(t.patientComponentIsActive="/patient"===e.url||(null===(n=e.url)||void 0===n?void 0:n.startsWith("/patient?"))),"popstate"!==e.navigationTrigger||"/patient"!==e.url&&!(null===(i=e.url)||void 0===i?void 0:i.startsWith("/patient?"))||t.checkIfInfoDrawerStateAvailable(),e instanceof m.d&&(t.drawer=null)}),this.activatedRoute.queryParams.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){var n;if(t.patientComponentIsActive){if(t.activeRoleType=localStorage.getItem("loggedInUserRole"),t.assignedStaffType=t._patientUrlService.getParameterValue("assignedStaffType"),void 0===t.assignedStaffType)return t.assignedStaffType=sessionStorage.getItem("patientType"),void t._patientUrlService.setParameter({assignedStaffType:t.assignedStaffType});t.selectedCaretakerId=t._patientUrlService.getParameterValue("staffId"),t.selectedPhysicianId=t._patientUrlService.getParameterValue("physicians"),t.selectedSiteId=t._patientUrlService.getParameterValue("siteId");var i=t._patientUrlService.getParameterValue("d1"),a=t._patientUrlService.getParameterValue("d2");i&&a&&(t.dateRange=[i,a]);var r=t._patientUrlService.getParameterValue("filter"),o=t._patientUrlService.getParameterValue("sub-filter");t.consentFormStatus=t._patientUrlService.getParameterValue("consentFormStatus"),t.physicianOrderStatus=t._patientUrlService.getParameterValue("physicianOrderStatus"),t.selectedEpisodeType=o,t._patientUrlService.setParameter({selectedEpisodeType:t.selectedEpisodeType}),t.selectedFilterData=[r,o],t.selectedFilter=JSON.parse(JSON.stringify(t.selectedFilterData)),t.sort=t._patientUrlService.getParameterValue("sort"),t.order=t._patientUrlService.getParameterValue("order"),t.selectedEpisodeType=t._patientUrlService.getParameterValue("selectedEpisodeType"),null===(n=t.headerComponent)||void 0===n||n.setActiveTab(),t.getPatientsList()}})}},{key:"onPatientHeaderTabChange",value:function(t){var e=t.blueprintId;this.selectedBlueprintId=e}},{key:"onHeaderTabNameChange",value:function(t){this.patientHeaderTabName=t,this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied()}},{key:"getOffset",value:function(t){return 1!==t?(t-1)*this.pageSize:0}},{key:"clearFilters",value:function(){var t;null===(t=this.headerComponent)||void 0===t||t.setActiveTab(),this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied()}},{key:"showHistory",value:function(t,e,n){this._patientsModalsService.showCommunicationHistory(t,e,n)}},{key:"initPatientRequestObservable",value:function(){var t=this,e=this._patientUrlService.getParameterValue("d1"),n=this._patientUrlService.getParameterValue("d2");this.dateRange=null,e&&n&&(this.dateRange=[e,n]),this.patientRequests$.pipe(Object(Le.a)(function(){return t._patientsService.fetchPatientsList(t.getOffset(t.pageIndex),t.pageSize,t._patientUrlService.getParameterValue("staffId"),t._patientUrlService.getParameterValue("physicians"),t.sort,t.order,t._patientUrlService.getParameterValue("filter"),t._patientUrlService.getParameterValue("episodeBlueprint"),t._patientUrlService.getParameterValue("selectedEpisodeType"),t._patientUrlService.getParameterValue("siteId"),t.dateRange,t._patientUrlService.getParameterValue("search"),t._patientUrlService.getParameterValue("carePlanId"),t._patientUrlService.getParameterValue("v1"),t._patientUrlService.getParameterValue("v2"),t._patientUrlService.getParameterValue("op"),t._patientUrlService.getParameterValue("dstFilterType"),t._patientUrlService.getParameterValue("tms"),t._patientUrlService.getParameterValue("cmt"),t._patientUrlService.getParameterValue("ccmCmt"),t.responseType,t.smsPatientListLoading,t._patientUrlService.getParameterValue("consentFormStatus"),t._patientUrlService.getParameterValue("physicianOrderStatus"),t._patientUrlService.getParameterValue("patientStatus"),t._patientUrlService.getParameterValue("episodeStatus"),t._patientUrlService.getParameterValue("vitalFilter"),t._patientUrlService.getParameterValue("assessmentFilter"),t._patientUrlService.getParameterValue("assessment"),t._patientUrlService.getParameterValue("rpmVitalCompliance"),t._patientUrlService.getParameterValue("onBoardingFilter"),t._patientUrlService.getParameterValue("languages"),t._patientUrlService.getParameterValue("assignedStaffType"),t._patientUrlService.getParameterValue("patientCreationStartDate"),t._patientUrlService.getParameterValue("patientCreationEndDate"))})).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){t.totalFiltersApplied=t._patientFilterCountService.calculateTotalNumberOfFiltersApplied(),t.smsPatientListLoading?(t.listOfAllPatientsForSMS=e.result.filter(function(t){return t.patientStatus!==Ii.a.NOT_ONBOARDED&&t.patientStatus!==Ii.a.DISCHARGED}),t.smsPatientListLoading=!1,t.loading=!1,t.showSendSmsModal()):("XLS"===t.responseType&&t.downloadExcelReport(e.filename),t.totalCount=e.metaData.totalCount,t.listOfAllPatients=e.result,t.loading=!1,t._progress.ref().complete())},function(e){var n;t._notificationsService.error(t.translatedStrings.get("MENU.PATIENTS"),null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message),t._progress.ref().complete()})}},{key:"onAssignedStaffChange",value:function(){sessionStorage.setItem("patientType",this.assignedStaffType),this._patientUrlService.setParameter({assignedStaffType:this.assignedStaffType}),this._dataSharingService.triggerAlertRefresh()}},{key:"getPatientsList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;e||(this.pageIndex=t),this.loading=!0,this.smsPatientListLoading=e,this.responseType=n,this.assignCaretakerIdIfStaffLoggedIn(),this.patientRequests$.next()}},{key:"downloadExcelReport",value:function(t){if(this._patientsEventLogger.downloadStartReportEvent("",t,"patients","patient_list_excel"),!t)return this._notificationsService.error(this.translatedStrings.get("MENU.PATIENTS"),this.translatedStrings.get("UNABLE_TO_DOWNLOAD_REPORT")),void this._patientsEventLogger.downloadFailReportEvent("",t,"Filename not provided","patients","patient_list_excel");var e="".concat(E.g.url,"/v2/media/").concat(t);this._patientsEventLogger.downloadSuccessReportEvent("",t,"patients","patient_list_excel"),window.open(e),this.getPatientsList()}},{key:"applyFilter",value:function(t){this._patientUrlService.setParameter({search:t}),this.searchKey=t}},{key:"changePageSize",value:function(t){this.pageIndex=1,this.pageSize=t,this.getPatientsList()}},{key:"setSortKey",value:function(t,e){this.sort=t,this.order="ascend"===e?"ASC":"DESC",this.getPatientsList()}},{key:"assignCaretakerIdIfStaffLoggedIn",value:function(){"CARE_TAKER"===localStorage.getItem("loggedInUserAccountType")&&(this.selectedCaretakerId=localStorage.getItem("loggedInUser"))}},{key:"showAlertDrawer",value:function(t,e,n,i,a,r,o,l,s){var c=this;this._patientsEventLogger.patientActionEvent(t,"open_alert_drawer"),this._patientsDrawerService.alerts(t,e,n,i,a,r,o,l,s).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t||(c.clearInfoDrawerState(),c.getPatientsList(c.pageIndex))})}},{key:"showDetails",value:function(t,e,n){var i=this;e===He.a.BASIC_DETAILS&&n&&(e=He.a.EPISODE_DETAILS),this._patientsService.fetchPatientDetails(t,e,n).subscribe(function(t){i._dataSharingService.patientDetails.next(t),i.setInfoDrawerState(e,t,n),i.showInfoDrawerBasedOnType(e,t)})}},{key:"showBasicInfo",value:function(t){var e=this;this.drawer||(this.drawer=this._patientsDrawerService.basicInfo(t),this.drawer.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t||e.clearInfoDrawerState()}))}},{key:"showHealthScoreDetails",value:function(t){var e,n,i=this;if(this._patientsEventLogger.patientActionEvent(t.id,"show_health_score_details"),!this.drawer)if(null===(e=null==t?void 0:t.userHealthScores)||void 0===e?void 0:e.length){var a=null===(n=null==t?void 0:t.episode)||void 0===n?void 0:n.id;this.setInfoDrawerState(He.a.HEALTH_SCORE,t,a),this.drawer=this._patientsDrawerService.healthScoreDetails(t.id,t.name,t.userHealthScores[0]),this.drawer.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t||i.clearInfoDrawerState()})}else this._notificationsService.error(this.translatedStrings.get("ROTHMAN_INDEX"),this.translatedStrings.get("PATIENT_NOT_MEASURED_HEALTH_SCORE"))}},{key:"showAssessmentDetails",value:function(t){this._patientsEventLogger.patientActionEvent(t.id,"show_assessment_details"),this._patientsModalsService.assessmentDetails(t)}},{key:"showBHIAssessmentDetails",value:function(t){this._patientsEventLogger.patientActionEvent(t.id,"show_bhi_details"),this._router.navigate(["analytics/bhi-assessment-report",t.id],{queryParams:{patientId:t.id,episodeBlueprintId:this.selectedBlueprintId}})}},{key:"showVitalDetails",value:function(t,e,n,i,a,r,o,l,s,c,u){var d=this;if(this._patientsEventLogger.patientActionEvent(e,"show_vitals_details"),e){var b="";t&&(b=null==t?void 0:t.vitalType),this._patientsModalsService.vitalDetails(b,e,n,a,i,r,o,l,this.selectedEpisodeType,s,c,u).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&d.getPatientsList()})}}},{key:"showNotes",value:function(t,e,n){var i=this;this._patientsModalsService.notes(t,e,n).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){null!=t&&i._notificationsService.success(i.translatedStrings.get("MENU.PATIENTS"),i.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY"))})}},{key:"showFiltersModal",value:function(){var t,e=this;this._patientsEventLogger.patientActionEvent("","show_filter_dialog"),this._patientsModalsService.filters(this.enabledEpisodeBlueprints,this.selectedBlueprintId,this.patientHeaderTabName,null===(t=this.tenantConfig)||void 0===t?void 0:t.tenantId).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&(e.totalFiltersApplied=e._patientFilterCountService.calculateTotalNumberOfFiltersApplied(),e._patientsEventLogger.patientFilterActionEvent(e.selectedFilterData,"patient_list_filter"))})}},{key:"getTenantConfig",value:function(){var t=this;this._dataSharingService.assignedTenantSettings.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){t.enabledEpisodeBlueprints=[],e.forEach(function(e,n){var i;null===(i=null==e?void 0:e.episodeBlueprints)||void 0===i||i.forEach(function(e){(null==e?void 0:e.archived)||(t.enabledEpisodeBlueprints.push(e),t.episodeBlueprintTypes.add(e.type),null!=t._patientUrlService.getParameterValue("episodeBlueprint")&&null!=t._patientUrlService.getParameterValue("episodeBlueprint")&&e.id==t._patientUrlService.getParameterValue("episodeBlueprint")&&(t.selectedEpisodeType=e.type),t._patientUrlService.setParameter({selectedEpisodeType:t.selectedEpisodeType}))})})}),this._dataSharingService.tenantSettings.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){var n,i,a;e&&(t.tenantConfig=e,t.conversationEnabled=null===(n=null==e?void 0:e.smsConfig)||void 0===n?void 0:n.enableConversation,t.pageSize=(null===(a=null===(i=null==e?void 0:e.featureConfigs)||void 0===i?void 0:i.patientsModule)||void 0===a?void 0:a.patientsListPerPage)||50,t.initPatientRequestObservable(),t.getPatientsList())})}},{key:"viewCareplanActionItems",value:function(t,e){this._router.navigate(["careplanassignments/patient/".concat(t,"/actionitems")],{queryParams:{careplanId:e}})}},{key:"logAction",value:function(t,e){this._patientsEventLogger.patientActionEvent(e,t)}},{key:"onSubTenantChange",value:function(t){"object"!=typeof t||""==t||null==t||null==t||(null==t?void 0:t.length)||(this.requestTenantIds=t.join()),this._patientUrlService.setParameter({requestTenantIds:this.requestTenantIds}),this.getPatientsList()}},{key:"onTMSClick",value:function(t,e,n){var i,a,r,o,l,s,c,u=this;this._patientsEventLogger.patientActionEvent(t.id,"add_TMS");var d=(null===(i=null==t?void 0:t.episode)||void 0===i?void 0:i.totalTMSCompleted)?(null===(a=null==t?void 0:t.episode)||void 0===a?void 0:a.totalTMSCompleted)/20*100:0,b=(null===(r=null==t?void 0:t.episode)||void 0===r?void 0:r.totalAdditionalTMSCompleted)?(null===(o=null==t?void 0:t.episode)||void 0===o?void 0:o.totalAdditionalTMSCompleted)/20*100:0;e=d<100?"TMS":b<100?"ADDITIONAL_TMS":"ADDITIONAL_TMS_B";var p=new Date(null===(l=null==t?void 0:t.carePlan)||void 0===l?void 0:l.startDate);(null===(s=null==t?void 0:t.carePlan)||void 0===s?void 0:s.id)?this._patientCommunicationModalService.createTMSModal(t,null===(c=null==t?void 0:t.episode)||void 0===c?void 0:c.id,e,n,p).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&u.getPatientsList()}):this._notificationsService.error(this.translatedStrings.get("TMS"),this.translatedStrings.get("TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED"))}},{key:"onCMTClick",value:function(t){var e,n,i=this;this._patientsEventLogger.patientActionEvent(t.id,"add_cmt"),this._patientCommunicationModalService.createCMTModal(t.name,null==t?void 0:t.id,null===(e=null==t?void 0:t.episode)||void 0===e?void 0:e.id,Ye.a.CARE_MANAGEMENT_TIME,null,null,new Date(null===(n=null==t?void 0:t.episode)||void 0===n?void 0:n.endDate).getTime()).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&i.getPatientsList()})}},{key:"onToCCMTClick",value:function(t){var e=this;this._patientCommunicationModalService.createTOCTMS(t).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&e.getPatientsList()})}},{key:"clearInfoDrawerState",value:function(){this.drawer=null,sessionStorage.removeItem("infoDrawer")}},{key:"setInfoDrawerState",value:function(t,e,n){sessionStorage.setItem("infoDrawer",JSON.stringify({type:t,patientDetails:e,episodeId:n}))}},{key:"checkIfInfoDrawerStateAvailable",value:function(){var t=JSON.parse(sessionStorage.getItem("infoDrawer"));t&&this.showInfoDrawerBasedOnType(t.type,t.patientDetails)}},{key:"showInfoDrawerBasedOnType",value:function(t,e){switch(t){case He.a.BASIC_DETAILS:case He.a.EPISODE_DETAILS:this.showBasicInfo(e);break;case He.a.HEALTH_SCORE:this.showHealthScoreDetails(e)}}},{key:"navigate",value:function(t,e,n,i,a,r,o,l,s,c,u,d,b,p,f,g){var h=this;this.tooltipState=!1,this._patientsEventLogger.patientActionEvent(n,e),setTimeout(function(){switch(e){case"add":h._router.navigate(["patient/add/"]);break;case"bulk-add":h._router.navigate(["patient/bulk-add/"]);break;case"view":h._router.navigate(["patient/view/",n]);break;case"edit":h._router.navigate(["patient/edit/",n],{queryParams:{patientName:i}});break;case"healthscore":h._router.navigate(["patient/healthscore/",n]);break;case"appointment":h._router.navigate(["appointments/create",n]);break;case"vital-trend":h._router.navigate(["patient/vital-trend",n],{queryParams:{patientName:i,patientId:n,gender:a,dob:r,patientStatus:o,episodeId:l,careplanId:s,carePlanstartDate:c,blueprintId:h.selectedBlueprintId,formId:u,tmsPercent:d,additionalTMSPercent:b,phoneNumbers:JSON.stringify(p),latestVital:JSON.stringify(f),tenantId:g}})}})}},{key:"onSendSMSClick",value:function(){this._patientsEventLogger.patientActionEvent("","send_sms_box");var t=localStorage.getItem(an.a.REQUEST_TENANT_IDS).split(",");this.isAccessAcrossSubTenants&&t.length>1?this._notificationsService.info("SMS","Please choose only one tenant to send SMS"):this.getPatientsList(1,!0,Ge.a.JSON)}},{key:"showSendSmsModal",value:function(){var t=this;this._patientsModalsService.sendSms(this.listOfAllPatientsForSMS,this.selectedEpisodeType,this.dateRange,this.totalFiltersApplied).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(){t.getPatientsList()})}},{key:"repeatEpisodes",value:function(){var t=this;this._patientsEventLogger.patientActionEvent("","repeat_episode"),this._patientsModalsService.repeatEpisode(this.translatedStrings.get("EPISODE.REPEAT_EPISODE"),Array.from(this.episodeBlueprintTypes)).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){e||t.getPatientsList()})}},{key:"showFormTrend",value:function(t,e,n){var i,a,r,o;this._patientsEventLogger.patientActionEvent(null==t?void 0:t.id,"show_form_trend_modal"),e&&n?this._formsTrendModalService.createModal(null==t?void 0:t.id,e,n,null==t?void 0:t.name,null===(i=t.episode)||void 0===i?void 0:i.id):this._formsTrendModalService.createModal(null==t?void 0:t.id,null===(a=null==t?void 0:t.assessmentScores[0])||void 0===a?void 0:a.parentFormId,null===(r=null==t?void 0:t.assessmentScores[0])||void 0===r?void 0:r.id,null==t?void 0:t.name,null===(o=t.episode)||void 0===o?void 0:o.id)}},{key:"tutorialViewed",value:function(){this.featureIntroduced=!0}},{key:"startFiltersTour",value:function(){this._guidedTourService.startTour(Si)}},{key:"generateVitalReport",value:function(){this._router.navigate(["patient/bulk-trend-report/vital"],{queryParams:this.activatedRoute.snapshot.queryParams})}},{key:"generateAssessmentReport",value:function(){this._router.navigate(["patient/bulk-trend-report/assessment"],{queryParams:this.activatedRoute.snapshot.queryParams})}},{key:"assignStaff",value:function(){this._router.navigate(["bulk/assign/monitoring-staff"])}},{key:"assignPrimaryStaff",value:function(){this._router.navigate(["bulk/assign/monitoring-staff"],{queryParams:{assign:"PRIMARY"}})}},{key:"navigateAssessment",value:function(t,e,n,i,a){var r;this._router.navigate(["patient/assessment-trend",i],{queryParams:{patientId:i,blueprintId:e,episodeId:null===(r=null==t?void 0:t.episode)||void 0===r?void 0:r.id,phoneNumbers:JSON.stringify(a)}})}},{key:"navigateGeneral",value:function(t,e,n,i,a){var r;this._router.navigate(["patient/assessment-trend",i],{queryParams:{patientId:i,blueprintId:e,episodeId:null===(r=null==t?void 0:t.episode)||void 0===r?void 0:r.id,fromGeneral:!0,phoneNumbers:JSON.stringify(a)}})}},{key:"gotoPlanOfCareHistory",value:function(t,e){this._router.navigate(["episodes/plan-of-care/details",null==t?void 0:t.id,e],{queryParams:{tab:"history",patientName:null==t?void 0:t.name}})}},{key:"startTimer",value:function(t){var e;this.timerRunning=!0,this.timedPatient=t;var n=localStorage.getItem("loggedInUserAccountType"),i=localStorage.getItem("loggedInUser"),a={attendeeId:null==t?void 0:t.id,attendeeName:null==t?void 0:t.name,tenantId:null==t?void 0:t.tenantId,attenderId:"CARE_TAKER"===n?i:null,episodeId:null===(e=null==t?void 0:t.episode)||void 0===e?void 0:e.id};this._dataSharingService.setTimer({state:"START",data:a,showStickyNote:!0})}},{key:"runInsuranceTiering",value:function(t){var e=this;this._insuranceService.applyInsuranceTierRulesToPatient(t).subscribe(function(){e._notificationsService.success("Patients","Insurance tiering completed")})}},{key:"runQualification",value:function(t){var e=this;this._patientsService.qualifyPatients({userIds:[t]}).subscribe(function(){e._notificationsService.success("Patients","Qualification in progress...")})}},{key:"queryCCDA",value:function(t,e){var n=this;this._patientsService.queryCCDA(t,e).subscribe(function(){n._notificationsService.success("Clinical Summary","Information queried successfully")},function(t){var e;n._notificationsService.error("Clinical Summary",(null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)||"Error querying information, please try again later")})}},{key:"suspendEpisode",value:function(t){var e=this;this._episodeModalService.createSuspendModal(t).afterClose.subscribe(function(t){t&&e.getPatientsList()})}}]),i}(D.a)).\u0275fac=function(t){return new(t||Ko)(_.Rb(y.a),_.Rb(m.g),_.Rb(Be.a),_.Rb(V.b),_.Rb(Ze.a),_.Rb(je.a),_.Rb(Ue.a),_.Rb(Fe.a),_.Rb(vi),_.Rb(Ei.a),_.Rb(X.a),_.Rb(Ke.a),_.Rb(mi.a),_.Rb(rn.c),_.Rb(yi.a),_.Rb(Ci.a))},Ko.\u0275cmp=_.Lb({type:Ko,selectors:[["app-patients"]],viewQuery:function(t,e){var n;1&t&&_.ed(En,1),2&t&&_.Hc(n=_.fc())&&(e.headerComponent=n.first)},features:[_.Ab],decls:55,vars:82,consts:[[3,"filterType","search","selectedTabHeader"],["id","sub-header"],["nz-button","","nzShape","circle",3,"click"],["size","14px","name","reload",3,"altColorScheme"],[4,"ngIf"],[4,"isFeaturePermitted"],["nz-button","","nzType","primary","id","filters-button","featureHighlight","","featureKey","sites_filter",3,"position","click"],["size","12px","color","#ffffff","altColor","#ffffff","name","filter"],["nzStandalone","",3,"nzOverflowCount","nzShowDot","nzCount","nzStyle"],[1,"container"],["ngTour","patientFilterDesc",3,"clear"],["nzSize","middle","ngTour","patientList",3,"nzShowPagination","nzShowSizeChanger","nzData","nzPageIndex","nzPageSize","nzFrontPagination","nzTotal","nzLoading","nzWidthConfig","nzShowTotal","nzNoResult","nzVirtualForTrackBy","nzPageSizeOptions","nzScroll","nzPageIndexChange","nzPageSizeChange"],["patientsTable",""],["id","name",1,"align-left",3,"nzSortFn","nzSortOrderChange"],["id","communication",1,"align-center","table-column-contact"],["id","location",4,"ngIf"],[4,"isAccessAcrossTenantEnabled"],["id","alerts",3,"nzSortFn","nzSortOrderChange",4,"isFeaturePermitted"],[4,"ngFor","ngForOf","ngForTrackBy"],["totalPatientsCount",""],["titleTemplate",""],[2,"display","inline-block","min-width","230px"],["nz-row","","nzAlign","middle","nzGutter","12"],["nz-col",""],["nz-typography","","nzType","secondary"],["nz-col","","nzFlex","150px"],["nzPlaceHolder","Select patient type",3,"ngModel","ngModelChange"],["nzValue","ALL","nzLabel","All"],["nzValue","PRIMARY","nzLabel","Primary"],["nzValue","OTHER","nzLabel","Secondary"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["size","12px","color","#ffffff","altColor","#ffffff","name","retweet"],["nz-button","","class","secondary-actions",3,"click",4,"ngIf"],["nz-button","",1,"secondary-actions",3,"click"],["size","12px","color","#ffffff","altColor","#ffffff","name","download"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzDropdownMenu"],["color","#ffffff","stroke","2px","size","10px","altColor","#ffffff","name","down"],["bulkActionMenu","nzDropdownMenu"],["nz-menu",""],[4,"isTenantFeatureEnabled"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider","",1,"menu-divider"],["nz-menu-item","","routerLink","/patient/bulk-add-notes",4,"isFeaturePermitted"],["nz-menu-item","",3,"click"],["nz-menu-item","","routerLink","/patient/bulk-add-notes"],["nz-button","","nzType","primary","id","filters-button",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary","id","filters-button",3,"disabled","click"],["size","12px","color","#ffffff","altColor","#ffffff","name","sms"],["id","location"],["id","careplan"],["id","cmt-recorded",1,"align-center","wrap-text","table-column-progress",3,"episodeWidgetEnabled","blueprints","selectedFilter","episodeType","nzSortFn","nzSortOrderChange"],[1,"align-center"],["colspan","3",1,"align-center","table-column-last-vital"],["id","vital-days-remaining","nz-tooltip","",1,"align-center",3,"nzSortFn","nzTooltipTitle","nzSortOrderChange"],[1,"header-word-wrap"],[1,"header-word-wrap-text"],["id","tms-remaining",1,"align-center","table-column-tms",3,"nzSortFn","nzBreakWord","nzSortOrderChange"],["nz-tooltip","","nzTooltipPlacement","right",1,"tms-more-details-icon",3,"nzTooltipTitle"],["color","#000","name","infoCircle","size","12px",3,"originalStyle"],["id","vitals","colspan","3",1,"align-center","table-column-last-vital"],[3,"nzSortFn","nzSortOrderChange"],["id","alerts",3,"nzSortFn","nzSortOrderChange"],["actionable","",3,"click"],["nz-tooltip","",1,"ellipsis-text","char-limit",3,"nzTooltipTitle","nzTooltipVisible"],["nzAlign","right"],["isToolTipEnabled","true",3,"patientStatus"],[1,"align-center",3,"ngClass"],[3,"userId","click"],[3,"userId","phoneNumbers","tenantId","click"],[3,"patientId","patientName","patient","unreadMessageCount","phoneNumbers","click","onClose"],["actionable","",3,"click",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","8",1,"actions"],[3,"nzCount","click",4,"isFeaturePermitted"],["name","profile","size","22px",3,"originalStyle","click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","28px"],["patientSubMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click",4,"isFeaturePermitted"],["nz-menu-item","",3,"disabled","click",4,"isFeaturePermitted"],["nz-menu-item","",3,"click",4,"isTenantFeatureEnabled"],[4,"isPatientComponentEnabled"],["nz-menu-item","",3,"disabled","click",4,"ngIf"],["nz-tooltip","","name","play",3,"nzTooltipTitle","click",4,"ngIf"],["nz-tooltip","","name","play",3,"nzTooltipTitle","click"],[1,"ellipsis-text"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ellipsis-text","char-limit"],["actionable","","nz-tooltip","",3,"nzTooltipTitle","click",4,"ngIf"],["actionable","","nz-tooltip","",3,"nzTooltipTitle","click"],[1,"align-center",3,"episodeWidgetEnabled","blueprints","episodeType","selectedFilter"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add CMT","nzStrokeColor","#a9cc54","nzStrokeWidth","4",1,"line-progress",3,"nzFormat","nzPercent","click"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","cptCode","onSave",4,"ngIf"],["class","ant-statistic-title",4,"ngIf"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","onSave",4,"ngIf"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","cptCode","onSave"],[1,"ant-statistic-title"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","onSave"],["nzColor","success",4,"ngIf"],["nzColor","danger",4,"ngIf"],["nzColor","warning"],["nz-row","",1,"step-progress","step-progress-inner"],["nz-col","","nzSpan","24"],["nzColor","success"],["nzColor","danger"],["nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[4,"ngFor","ngForOf"],["actionable","",1,"align-center","table-data-assessment"],[3,"nzTitle","nzValue","click",4,"ngIf"],[3,"nzTitle","nzValue","click"],["nzAlign","center"],["class","step-progress","nz-row","","nzJustify","center","nzAlign","center",4,"ngIf"],["nz-row","","nzJustify","center","nzAlign","center","nzGutter","4",1,"step-progress","step-progress-inner"],["nzStrokeColor","#BEBEBE","nzStrokeWidth","4",3,"nzSuccessPercent","nzShowInfo","nzPercent","click",4,"ngIf"],["nzAlign","center",3,"click"],["nz-row","","class","step-progress","nzJustify","center","nzAlign","center",4,"ngIf"],["nz-col","","nzSpan","8"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4","class","line-progress",3,"nzPercent","nzSuccessPercent","nzShowInfo",4,"ngIf"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4","class","line-progress",3,"nzSuccessPercent","nzShowInfo",4,"ngIf"],["nz-row","","nzJustify","center","nzAlign","center",1,"step-progress"],[1,"completed-label"],["nzStrokeColor","#BEBEBE","nzStrokeWidth","4",3,"nzSuccessPercent","nzShowInfo","nzPercent","click"],["class","completed-label",4,"ngIf"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4",1,"line-progress",3,"nzPercent","nzSuccessPercent","nzShowInfo"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4",1,"line-progress",3,"nzSuccessPercent","nzShowInfo"],["nzAlign","center","actionable","",3,"click"],[3,"nzTitle","nzValue",4,"ngIf"],[3,"nzTitle","nzValue"],["actionable",""],[3,"nzCount","click"],["name","notification","size","20px",3,"originalStyle"],["nz-typography",""],[1,"title-template-text"]],template:function(t,e){if(1&t&&(_.Xb(0,"app-patient-header",0),_.ec("filterType",function(t){return e.onPatientHeaderTabChange(t)})("search",function(t){return e.applyFilter(t)})("selectedTabHeader",function(t){return e.onHeaderTabNameChange(t)}),_.Wb(),_.Xb(1,"nz-page-header",1),_.Xb(2,"nz-page-header-extra"),_.Xb(3,"button",2),_.ec("click",function(){return e.getPatientsList(e.pageIndex)}),_.Sb(4,"app-icons",3),_.Wb(),_.Vc(5,wa,11,1,"ng-container",4),_.Vc(6,La,2,1,"ng-container",5),_.Vc(7,Ua,2,1,"span",5),_.Vc(8,Ja,14,13,"ng-container",5),_.Xb(9,"button",6),_.ec("click",function(){return e.showFiltersModal()}),_.Sb(10,"app-icons",7),_.Xc(11),_.jc(12,"translate"),_.Sb(13,"nz-badge",8),_.Wb(),_.Vc(14,er,2,1,"ng-container",5),_.Wb(),_.Wb(),_.Xb(15,"div",9),_.Xb(16,"app-filter-desc",10),_.ec("clear",function(){return e.clearFilters()}),_.Wb(),_.Xb(17,"nz-table",11,12),_.ec("nzPageIndexChange",function(t){return e.getPatientsList(t)})("nzPageSizeChange",function(t){return e.changePageSize(t)}),_.jc(19,"tableWidth"),_.jc(20,"translate"),_.Xb(21,"thead"),_.Xb(22,"tr"),_.Vc(23,nr,1,0,"th",4),_.Xb(24,"th",13),_.ec("nzSortOrderChange",function(t){return e.setSortKey("NAME",t)}),_.Xc(25),_.jc(26,"translate"),_.Wb(),_.Sb(27,"th"),_.Xb(28,"th",14),_.Xc(29),_.jc(30,"translate"),_.Wb(),_.Vc(31,ir,3,3,"th",15),_.Vc(32,ar,2,0,"th",16),_.Vc(33,rr,4,3,"ng-container",4),_.Vc(34,or,3,0,"ng-container",4),_.Vc(35,lr,3,5,"ng-container",4),_.Vc(36,sr,5,0,"ng-container",4),_.Vc(37,cr,7,0,"ng-container",4),_.Vc(38,ur,3,0,"ng-container",4),_.Vc(39,dr,4,3,"ng-container",4),_.Vc(40,br,16,15,"ng-container",4),_.Vc(41,pr,4,3,"ng-container",4),_.Vc(42,fr,3,0,"ng-container",4),_.Vc(43,gr,5,2,"ng-container",4),_.Vc(44,hr,3,1,"ng-container",4),_.Vc(45,vr,3,1,"ng-container",4),_.Vc(46,mr,1,1,"th",17),_.Wb(),_.Wb(),_.Xb(47,"tbody"),_.Vc(48,Ho,54,59,"ng-container",18),_.Wb(),_.Wb(),_.Vc(49,$o,7,10,"ng-template",null,19,_.Wc),_.Sb(51,"br"),_.Sb(52,"br"),_.Wb(),_.Vc(53,qo,10,9,"ng-template",null,20,_.Wc)),2&t){var n=_.Ic(18),i=_.Ic(50);_.Db(4),_.rc("altColorScheme",!0),_.Db(1),_.rc("ngIf",!("TENANT_ADMIN"==e.activeRoleType||"PHYSICIAN"==e.activeRoleType)),_.Db(1),_.rc("isFeaturePermitted",_.xc(64,el)),_.Db(1),_.rc("isFeaturePermitted",_.xc(65,nl)),_.Db(1),_.rc("isFeaturePermitted",_.xc(66,nl)),_.Db(1),_.rc("position",_.xc(67,il)),_.Db(2),_.Zc(" \xa0\xa0",_.kc(12,47,"PATIENT.FILTERS")," "),_.Db(2),_.rc("nzOverflowCount",9)("nzShowDot",!1)("nzCount",e.totalFiltersApplied)("nzStyle",_.xc(68,al)),_.Db(1),_.rc("isFeaturePermitted",_.xc(69,rl)),_.Db(3),_.sc("nzNoResult",_.kc(20,58,"PATIENT_LISTING_SCREEN_NO_DATA_MESSAGE")),_.rc("nzShowPagination",!0)("nzShowSizeChanger",!0)("nzData",e.listOfAllPatients)("nzPageIndex",e.pageIndex)("nzPageSize",e.pageSize)("nzFrontPagination",!1)("nzTotal",e.totalCount)("nzLoading",e.loading)("nzWidthConfig",_.oc(19,49,_.Fc(70,ol,e.widthConfig,e.isAccessAcrossSubTenants,e.selectedFilterData[0],e.selectedFilterData[1],e.enabledEpisodeBlueprints,e.selectedEpisodeType,e.consentFormStatus,e.physicianOrderStatus)))("nzShowTotal",i)("nzVirtualForTrackBy",e.trackById)("nzPageSizeOptions",_.xc(79,ll))("nzScroll",_.xc(80,sl)),_.Db(6),_.rc("ngIf",e.selectedFilterData[0]&&"ALL_PATIENTS"!==e.selectedFilterData[0]&&"CONSENT_FORM"!==e.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==e.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==e.selectedFilterData[0]),_.Db(1),_.rc("nzSortFn",!0),_.Db(1),_.Zc(" ",_.kc(26,60,"COMMON.NAME")," "),_.Db(4),_.Yc(_.kc(30,62,"TABLEHEADER.CONTACT")),_.Db(2),_.rc("ngIf","ALL_PATIENTS"===e.selectedFilterData[0]&&"CONSENT_FORM"!==e.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==e.selectedFilterData[0]||"NO_ACTIVE_EPISODES"===e.selectedFilterData[0]),_.Db(2),_.rc("ngIf","ALL_PATIENTS"!==e.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==e.selectedFilterData[0]&&"CCM"!==e.selectedEpisodeType&&"TOC"!==e.selectedEpisodeType),_.Db(1),_.rc("ngIf","ALL_PATIENTS"!==e.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==e.selectedFilterData[0]&&"CCM"===e.selectedEpisodeType),_.Db(1),_.rc("ngIf","GENERAL"===e.selectedEpisodeType||"BHI"===e.selectedEpisodeType),_.Db(1),_.rc("ngIf","CCM"===e.selectedEpisodeType),_.Db(1),_.rc("ngIf","TOC"===e.selectedEpisodeType),_.Db(1),_.rc("ngIf",e.selectedFilterData&&"PATIENT_NOT_SERVICED"===e.selectedFilterData[0]),_.Db(1),_.rc("ngIf","GENERAL"===e.selectedEpisodeType),_.Db(1),_.rc("ngIf","RPM"===e.selectedEpisodeType),_.Db(1),_.rc("ngIf","NO_ACTIVE_EPISODES"===e.selectedFilterData[0]),_.Db(1),_.rc("ngIf",e.selectedFilterData&&("CONSENT_FORM"===e.selectedFilterData[0]||"PHYSICIAN_ORDER"===e.selectedFilterData[0])),_.Db(1),_.rc("ngIf",e.selectedFilterData&&("CONSENT_FORM"===e.selectedFilterData[0]||"PHYSICIAN_ORDER"===e.selectedFilterData[0])),_.Db(1),_.rc("ngIf",e.selectedFilterData&&"CONSENT_FORM"===e.selectedFilterData[0]&&"TO_BE_OBTAINED"!==e.consentFormStatus),_.Db(1),_.rc("ngIf",e.selectedFilterData&&"PHYSICIAN_ORDER"===e.selectedFilterData[0]&&"TO_BE_OBTAINED"!==e.physicianOrderStatus),_.Db(1),_.rc("isFeaturePermitted",_.xc(81,Vo)),_.Db(2),_.rc("ngForOf",null==n?null:n.data)("ngForTrackBy",e.trackById)}},directives:[En,Xi.b,Xi.d,M.a,A.a,P.a,he.a,h.q,ln.a,Pi,Ni.a,Wi.a,rn.e,Q.f,Q.n,Q.o,Q.e,Q.l,Q.k,B.a,Q.i,h.p,Z.c,Z.a,H.a,Y.d,v.u,v.x,Y.a,sn.d,sn.b,sn.e,cn.c,Ri.a,xi.a,cn.d,cn.e,m.h,ki,wi.d,Q.b,Vi.a,Q.a,Li.a,h.o,Fi.a,Ui.a,pa,sn.a,fa,ga.a,Ia,Ta,za.a,_a.a],pipes:[Qt.a,Aa,h.A,Pa.a,Jt.a,Na.a,Wa.a,h.e,An.a,Ra,xa.a,ka.a],styles:["[_nghost-%COMP%]     .ant-tabs{height:55px}[_nghost-%COMP%]     .ant-tabs-nav{background:var(--light-black)}[_nghost-%COMP%]     .ant-tabs-tab{color:var(--neutral-color)}#sub-header[_ngcontent-%COMP%]{background:transparent;padding:0 20px}.container[_ngcontent-%COMP%]{padding:0 20px!important}.strong[_ngcontent-%COMP%]{font-weight:bolder}[_nghost-%COMP%]     .ant-table-column-sorter-down, [_nghost-%COMP%]     .ant-table-column-sorter-up{color:var(--light-black)}[_nghost-%COMP%]     .ant-progress-steps-item{min-width:40px;border-radius:9px}[_nghost-%COMP%]     .ant-statistic-title{font-size:13px!important;font-weight:700;margin-bottom:0;color:#0f2015}[_nghost-%COMP%]     .ant-statistic-content{font-size:10px!important;font-weight:700;color:#8a8a8a}[_nghost-%COMP%]     .ant-badge-count{min-width:15px!important;height:15px!important;font-size:10px!important;line-height:15px!important;top:-10px!important;right:-5px!important;transform:none!important}.ant-btn-circle-outline[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-btn-circle{border:none}.secondary-actions[_ngcontent-%COMP%]{background-color:var(--medium-grey);color:var(--neutral-color);border:none}.secondary-actions[_ngcontent-%COMP%]:hover{background-color:#919191}#filters-button[_ngcontent-%COMP%]{width:120px}#alerts[_ngcontent-%COMP%]{padding-right:125px!important}.align-left[_ngcontent-%COMP%]{text-align:left!important}.align-center[_ngcontent-%COMP%]{text-align:center!important}.score-value[_ngcontent-%COMP%]{color:var(--primary-color);font-size:15px;font-weight:400}.health-score-baseline[_ngcontent-%COMP%]{font-size:12px;color:var(--dark-grey)}.danger[_ngcontent-%COMP%]{color:#d81b60}.average[_ngcontent-%COMP%], .warning[_ngcontent-%COMP%]{color:orange}.good[_ngcontent-%COMP%]{color:var(--primary-color)}.very-good[_ngcontent-%COMP%]{color:var(--primary-color-dark)}[_nghost-%COMP%]     .ant-badge-dot{margin-top:5px;width:10px;height:10px}[_nghost-%COMP%]     .ant-statistic-content-value:empty{display:none!important}.ellipsis-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.char-limit[_ngcontent-%COMP%]{max-width:18ch}td[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:13.5px}td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{padding-left:20px!important}td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{text-align:right!important;padding-right:25px!important;word-spacing:5px;width:15%}.line-progress[_ngcontent-%COMP%]{line-height:1.2}[_nghost-%COMP%]     .ant-progress-outer{display:flex;align-content:center;flex-direction:column;padding-right:0!important;align-items:center;margin:auto!important}[_nghost-%COMP%]     .ant-progress-inner{display:block;max-width:40px;min-width:20px;margin:auto;background-color:var(--grey)}[_nghost-%COMP%]     .ant-progress-success-bg{background-color:var(--primary-color)}[_nghost-%COMP%]     .ant-progress-text{text-align:center;margin:-30px auto auto;display:block;width:unset;white-space:pre;color:var(--light-black)}[_nghost-%COMP%]     .ant-progress-status-success .ant-progress-text{margin-top:-20px!important}[_nghost-%COMP%]     .ant-progress-line{font-size:11px}li.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.disabled[_ngcontent-%COMP%], li.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.completed-label[_ngcontent-%COMP%]{margin-bottom:0;text-align:center;font-size:12px}.tms-adherence-container[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;align-items:center;justify-content:center}.wrap-text[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.step-progress[_ngcontent-%COMP%]{width:70px;margin-left:auto!important;margin-right:auto!important}.step-progress-inner[_ngcontent-%COMP%]{margin-top:-8px}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:0 solid #f0f0f0}.header-word-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.header-word-wrap-text[_ngcontent-%COMP%]{box-sizing:border-box;white-space:pre-line;word-wrap:break-word;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;max-width:91px}.title-template-text[_ngcontent-%COMP%]{font-size:10px}.table-column-progress[_ngcontent-%COMP%]{width:175px;min-width:136px}.table-column-contact[_ngcontent-%COMP%]{min-width:136px}.table-column-last-vital[_ngcontent-%COMP%]{width:270px}.table-column-tms[_ngcontent-%COMP%]{width:150px}.table-data-assessment[_ngcontent-%COMP%]{min-width:90px;width:120px}.table-column-health-score[_ngcontent-%COMP%]{min-width:100px;width:150px}.tms-more-details-icon[_ngcontent-%COMP%] > app-icons[_ngcontent-%COMP%]{display:block;margin-left:5px}.actions[_ngcontent-%COMP%]{bottom:-5px}.name[_ngcontent-%COMP%]{background-color:var(--primary-color);height:30px;padding-top:5px;margin-top:0;border-radius:3px}.download[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{color:var(--neutral-color)}.download[_ngcontent-%COMP%]{position:absolute;right:50px}.line[_ngcontent-%COMP%]{opacity:.2;border:1px solid #707070;width:85%;margin-left:15px}.menu-divider[_ngcontent-%COMP%]{margin-left:8px!important;margin-right:8px!important}  .ant-dropdown-menu{right:60px}"]}),Ko),ul=o("0W7X"),dl=o("2sp+"),bl=o("4ik+"),pl=o("1jOk"),fl=o("5Qfn"),gl=o("mfqL"),hl=o("IVUT"),vl=function(t){return t[t.LEAD=0]="LEAD",t[t.DEFAULT=1]="DEFAULT",t}({}),ml=function(t){return t.DIABETIC="DIABETIC",t.HYPERTENSION="HYPERTENSION",t.HYPOTENSION="HYPOTENSION",t}({}),Sl=o("sWYD"),Il=o("NFKh"),Dl=function(t){if(t)return Object(Sl.a)(t,"yyyy-MM-dd")},yl=function(t){var e,n,i,a,r,o,l,s,c,u,d,b,p,f,g,h,v,m,S,I;return{line1:null===(n=null===(e=null==t?void 0:t.controls)||void 0===e?void 0:e.streetAddress)||void 0===n?void 0:n.value,line2:null===(a=null===(i=null==t?void 0:t.controls)||void 0===i?void 0:i.streetAddress2)||void 0===a?void 0:a.value,city:null===(o=null===(r=null==t?void 0:t.controls)||void 0===r?void 0:r.city)||void 0===o?void 0:o.value,state:null===(s=null===(l=null==t?void 0:t.controls)||void 0===l?void 0:l.state)||void 0===s?void 0:s.value,country:null===(u=null===(c=null==t?void 0:t.controls)||void 0===c?void 0:c.country)||void 0===u?void 0:u.value,pin:null===(b=null===(d=null==t?void 0:t.controls)||void 0===d?void 0:d.zipCode)||void 0===b?void 0:b.value,zipCode:null===(f=null===(p=null==t?void 0:t.controls)||void 0===p?void 0:p.zipCode)||void 0===f?void 0:f.value,poBox:null===(h=null===(g=null==t?void 0:t.controls)||void 0===g?void 0:g.poBox)||void 0===h?void 0:h.value,lat:null===(m=null===(v=null==t?void 0:t.controls)||void 0===v?void 0:v.lat)||void 0===m?void 0:m.value,lng:null===(I=null===(S=null==t?void 0:t.controls)||void 0===S?void 0:S.lng)||void 0===I?void 0:I.value}},Cl=function(t){var e,n,i,a,r,o,l,s,c,u,d,b,p,f,g,h,v,m,S,I={height:(S=null===(n=null===(e=null==t?void 0:t.controls)||void 0===e?void 0:e.height)||void 0===n?void 0:n.value,"FEET"===S.unit?{unit:S.unit,value:12*S.value1+ +S.value2}:{unit:S.unit,value:S.value1}),weight:null===(a=null===(i=null==t?void 0:t.controls)||void 0===i?void 0:i.weight)||void 0===a?void 0:a.value,waistSize:null===(o=null===(r=null==t?void 0:t.controls)||void 0===r?void 0:r.waist)||void 0===o?void 0:o.value,hipSize:null===(s=null===(l=null==t?void 0:t.controls)||void 0===l?void 0:l.hip)||void 0===s?void 0:s.value,bloodGroup:null===(u=null===(c=null==t?void 0:t.controls)||void 0===c?void 0:c.bloodGroup)||void 0===u?void 0:u.value};I.habits=(null===(b=null===(d=null==t?void 0:t.controls)||void 0===d?void 0:d.smoking)||void 0===b?void 0:b.value)?[{habitType:"SMOKING"}]:null;var D=[{condition:"DIABETIC",haveMedication:!1},{condition:"HYPERTENSION",haveMedication:!!(null===(f=null===(p=null==t?void 0:t.controls)||void 0===p?void 0:p.hypertensionMedication)||void 0===f?void 0:f.value)}];return(null===(h=null===(g=null==t?void 0:t.controls)||void 0===g?void 0:g.diabetic)||void 0===h?void 0:h.value)||(D=D.filter(function(t){return t.condition!==ml.DIABETIC})),(null===(m=null===(v=null==t?void 0:t.controls)||void 0===v?void 0:v.hypertension)||void 0===m?void 0:m.value)||(D=D.filter(function(t){return t.condition!==ml.HYPERTENSION})),I.healthConditions=D,I},El=function(t,e,n){var i,a,r,o,l,s,c,u,d,b,p,f,g,h,v={CALL:{enabled:null!==(i=null==e?void 0:e.audioCallNotification)&&void 0!==i&&i},SMS:{enabled:null!==(a=null==e?void 0:e.smsNotification)&&void 0!==a&&a},REMINDER_SMS:{enabled:null!==(r=null==e?void 0:e.reminderSMSNotification)&&void 0!==r&&r},VIDEO_CALL:{enabled:null!==(o=null==e?void 0:e.videoCallNotification)&&void 0!==o&&o}},m={label:null==e?void 0:e.label,number:null===(l=null==e?void 0:e.number)||void 0===l?void 0:l.trim(),type:null!==(s=null==e?void 0:e.type)&&void 0!==s?s:na.c.MOBILE,preferred:null===(c=null==e?void 0:e.preferred)||void 0===c||c,notificationConfig:v,countryCode:t};if(!(null==n?void 0:n.number))return[m];var S={CALL:{enabled:null!==(u=null==n?void 0:n.audioCallNotification)&&void 0!==u&&u},SMS:{enabled:null!==(d=null==n?void 0:n.smsNotification)&&void 0!==d&&d},REMINDER_SMS:{enabled:null!==(b=null==n?void 0:n.reminderSMSNotification)&&void 0!==b&&b},VIDEO_CALL:{enabled:null!==(p=null==e?void 0:e.videoCallNotification)&&void 0!==p&&p}};return[m,{label:null==n?void 0:n.label,number:null===(f=null==n?void 0:n.number)||void 0===f?void 0:f.trim(),type:null!==(g=null==n?void 0:n.type)&&void 0!==g?g:na.c.MOBILE,preferred:null!==(h=null==n?void 0:n.preferred)&&void 0!==h&&h,notificationConfig:S,countryCode:t}]},Xl=function(t,e){var n;16<=(null==t?void 0:t.length)?t=null==t?void 0:t.substring(0,16):15>(null==t?void 0:t.length)?t+="1234567891234567".substring(0,16-(null==t?void 0:t.length)):t||(t="1234567891234567");var i=Il.enc.Latin1.parse(t),a=Il.enc.Latin1.parse(t);return null===(n=Il.AES.encrypt(e,i,{iv:a,mode:Il.mode.CBC,padding:Il.pad.ZeroPadding}))||void 0===n?void 0:n.toString()},Tl=o("/uUt"),zl=o("rzIX"),_l=o("4+6U"),Ol=function t(){b(this,t),this.firstName=new v.i(null,v.D.required),this.lastName=new v.i(null,v.D.required),this.username=new v.i,this.email=new v.i(null,v.D.email),this.notes=new v.i,this.password=new v.i(null,v.D.minLength(8)),this.dateOfBirth=new v.i(null,v.D.required),this.timeZone=new v.i(null,v.D.required),this.gender=new v.i(null,v.D.required),this.language=new v.i(null,v.D.required),this.streetAddress=new v.i,this.streetAddress2=new v.i,this.city=new v.i,this.state=new v.i,this.country=new v.i,this.zipCode=new v.i,this.poBox=new v.i,this.lat=new v.i,this.lng=new v.i,this.primaryNumber=new v.l({number:new v.i(null,[v.D.required,v.D.minLength(6),v.D.pattern(/^[0-9 -]\d*$/)]),preferred:new v.i(!0),label:new v.i("Primary Number",[v.D.required]),type:new v.i(na.c.MOBILE),audioCallNotification:new v.i,smsNotification:new v.i,reminderSMSNotification:new v.i,videoCallNotification:new v.i}),this.secondaryNumber=new v.l({number:new v.i(null,[v.D.minLength(6),v.D.pattern(/^[0-9 -]\d*$/)]),preferred:new v.i,label:new v.i("Secondary Number"),type:new v.i,audioCallNotification:new v.i,smsNotification:new v.i,reminderSMSNotification:new v.i,videoCallNotification:new v.i(na.c.LANDLINE)}),this.location=new v.i(null,v.D.required),this.profileTags=new v.i,this.height=new v.i,this.weight=new v.l({unit:new v.i,value:new v.i}),this.waist=new v.l({unit:new v.i,value:new v.i}),this.hip=new v.l({unit:new v.i,value:new v.i}),this.bloodGroup=new v.i,this.smoking=new v.i,this.diabetic=new v.i,this.hypertension=new v.i,this.hypertensionMedication=new v.i,this.insurance=new v.i,this.hospitalId=new v.i,this.availableHours=new v.l({days:new v.i([]),fromTime:new v.i,toTime:new v.i}),this.patientConsent=new v.l({vmConsent:new v.i,hipaaConsent:new v.i})},Ml=o("RKSz"),Al=function(t,e,n,i){var a=new Ol;return"en"===i&&(i="en_US"),xl(a),a.timeZone.setValue(null!=t?t:"Canada/Eastern"),a.language.setValue(null!=i?i:"en_US"),a.height.setValue({unit:null!=e?e:"FEET",value1:null,value2:null}),a.weight.setValue({unit:null!=n?n:"LBS",value:null}),a.waist.setValue({unit:"CMS",value:null}),a.hip.setValue({unit:"CMS",value:null}),a},Pl=function(t,e){t.streetAddress.setValue(null==e?void 0:e.line1),t.streetAddress2.setValue(null==e?void 0:e.line2),t.city.setValue(null==e?void 0:e.city),t.state.setValue(null==e?void 0:e.state),t.country.setValue(null==e?void 0:e.country),t.zipCode.setValue(null==e?void 0:e.pin),t.poBox.setValue(null==e?void 0:e.poBox)},Nl=function(t,e){(null==e?void 0:e.length)&&e.forEach(function(e){"SMOKING"===e.habitType&&t.smoking.setValue({input:!0})})},Wl=function(t,e){var n,i,a,r,o,l,s,c,u,d,b,p,f,g,h,v;e&&t.insurance.setValue({primaryCarrierName:null===(n=null==e?void 0:e.primaryInsuranceDetails)||void 0===n?void 0:n.carrierName,primaryMemberId:null===(i=null==e?void 0:e.primaryInsuranceDetails)||void 0===i?void 0:i.insuranceId,primaryEffectiveDate:null===(a=null==e?void 0:e.primaryInsuranceDetails)||void 0===a?void 0:a.effectiveDate,primaryExpirationDate:null===(r=null==e?void 0:e.primaryInsuranceDetails)||void 0===r?void 0:r.expirationDate,primaryPlanId:null===(o=null==e?void 0:e.primaryInsuranceDetails)||void 0===o?void 0:o.planId,secondaryInsured:(null==e?void 0:e.secondaryInsured)||!!(null===(l=null==e?void 0:e.secondaryInsuranceDetails)||void 0===l?void 0:l.insuranceId),secondaryCarrierName:null===(s=null==e?void 0:e.secondaryInsuranceDetails)||void 0===s?void 0:s.carrierName,secondaryMemberId:null===(c=null==e?void 0:e.secondaryInsuranceDetails)||void 0===c?void 0:c.insuranceId,secondaryEffectiveDate:null===(u=null==e?void 0:e.secondaryInsuranceDetails)||void 0===u?void 0:u.effectiveDate,secondaryExpirationDate:null===(d=null==e?void 0:e.secondaryInsuranceDetails)||void 0===d?void 0:d.expirationDate,secondaryPlanId:null===(b=null==e?void 0:e.secondaryInsuranceDetails)||void 0===b?void 0:b.planId,tertiaryCarrierName:null===(p=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===p?void 0:p.carrierName,tertiaryMemberId:null===(f=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===f?void 0:f.insuranceId,tertiaryEffectiveDate:null===(g=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===g?void 0:g.effectiveDate,tertiaryExpirationDate:null===(h=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===h?void 0:h.expirationDate,tertiaryPlanId:null===(v=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===v?void 0:v.planId,tier:null==e?void 0:e.tier})},Rl=function(t,e){var n=null==e?void 0:e.find(function(t){return t.source===Ml.a.HOSPITAL_INTERNAL_ID});t.hospitalId.setValue(null==n?void 0:n.sourceId)},xl=function(t){t.primaryNumber.setValue({label:"Primary Number",number:"",type:"MOBILE",preferred:!0,audioCallNotification:!0,smsNotification:!0,reminderSMSNotification:!1,videoCallNotification:!0}),t.secondaryNumber.setValue({label:"Secondary Number",number:"",type:"MOBILE",preferred:!1,audioCallNotification:!0,smsNotification:!0,reminderSMSNotification:!1,videoCallNotification:!0})},kl=function(t,e){var n,i,a,r,o,l,s,c,u,d,b,p,f,g,h,v,m,S,I,D,y,C,E,X,T,z,_,O;if(null==e?void 0:e.length){var M=e[0];t.primaryNumber.setValue({label:(null==M?void 0:M.label)||"Primary Number",number:null===(n=null==M?void 0:M.number)||void 0===n?void 0:n.trim(),type:(null==M?void 0:M.type)||"MOBILE",preferred:null==M?void 0:M.preferred,audioCallNotification:null===(a=null===(i=null==M?void 0:M.notificationConfig[na.b.CALL])||void 0===i?void 0:i.enabled)||void 0===a||a,smsNotification:null===(o=null===(r=null==M?void 0:M.notificationConfig[na.b.SMS])||void 0===r?void 0:r.enabled)||void 0===o||o,reminderSMSNotification:null!==(s=null===(l=null==M?void 0:M.notificationConfig[na.b.REMINDER_SMS])||void 0===l?void 0:l.enabled)&&void 0!==s&&s,videoCallNotification:null===(u=null===(c=null==M?void 0:M.notificationConfig[na.b.VIDEO_CALL])||void 0===c?void 0:c.enabled)||void 0===u||u}),t.secondaryNumber.setValue({label:(null===(d=e[1])||void 0===d?void 0:d.label)||"Secondary Number",number:null!==(f=null===(p=null===(b=e[1])||void 0===b?void 0:b.number)||void 0===p?void 0:p.trim())&&void 0!==f?f:"",type:(null===(g=e[1])||void 0===g?void 0:g.type)||"MOBILE",preferred:null!==(v=null===(h=e[1])||void 0===h?void 0:h.preferred)&&void 0!==v&&v,audioCallNotification:null===(I=null===(S=null===(m=e[1])||void 0===m?void 0:m.notificationConfig[na.b.CALL])||void 0===S?void 0:S.enabled)||void 0===I||I,smsNotification:null===(C=null===(y=null===(D=e[1])||void 0===D?void 0:D.notificationConfig[na.b.SMS])||void 0===y?void 0:y.enabled)||void 0===C||C,reminderSMSNotification:null!==(T=null===(X=null===(E=e[1])||void 0===E?void 0:E.notificationConfig[na.b.REMINDER_SMS])||void 0===X?void 0:X.enabled)&&void 0!==T&&T,videoCallNotification:null===(O=null===(_=null===(z=e[1])||void 0===z?void 0:z.notificationConfig[na.b.VIDEO_CALL])||void 0===_?void 0:_.enabled)||void 0===O||O})}},wl=function(t,e){t.availableHours.setValue({days:(null==e?void 0:e.days)||[],fromTime:(null==e?void 0:e.fromTime)||null,toTime:(null==e?void 0:e.toTime)||null})},Vl=function(t,e){var n,i;t.patientConsent.setValue({vmConsent:null!==(n=null==e?void 0:e.vmConsent)&&void 0!==n&&n,hipaaConsent:null!==(i=null==e?void 0:e.hipaaConsent)&&void 0!==i&&i})},Ll=o("h51P"),Fl=o("bnsq"),Ul=((Qo=function(){function t(e){b(this,t),this._permissionsService=e}return d(t,[{key:"isPrivileged",value:function(t){var e=this._permissionsService.getPermissionsForUser(),n=!1;return localStorage.getItem("loggedInUserRole")==w.a.TENANT_ADMIN||!!(null==e?void 0:e.length)&&(t.forEach(function(t){-1!==e.findIndex(function(e){return e===t})&&(n=!0)}),n)}}]),t}()).\u0275fac=function(t){return new(t||Qo)(_.bc(Fl.a))},Qo.\u0275prov=_.Nb({token:Qo,factory:Qo.\u0275fac,providedIn:"root"}),Qo),jl=o("pxUr"),Yl=o("PScX"),Bl=o("ocnv"),Hl=o("5iDH"),Gl=o("EGpF"),Zl=o("ix5O"),$l=o("Zy1z"),ql=o("z4wI"),Kl=((tl=function(e){r(i,e);var n=l(i);function i(e){var a;return b(this,i),(a=n.call(this)).fb=e,a.onChange=function(){},a.onTouched=function(){},a.form=a.fb.group({unit:new v.i,value1:new v.i,value2:new v.i}),a.form.valueChanges.pipe(Object(Ve.a)(a.unsubscribed)).subscribe(function(t){a.onChange(t),a.onTouched()}),a.form.controls.unit.valueChanges.pipe(Object($l.a)()).pipe(Object(Ve.a)(a.unsubscribed)).subscribe(function(e){var n=t(e,2),i=n[0],r=n[1];return a.convertValuesAccordingToUnit(i,r)}),a}return d(i,[{key:"value",get:function(){return this.form.value},set:function(t){this.form.setValue(t),this.onChange(t),this.onTouched()}},{key:"heightControl",get:function(){return this.form.controls}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"writeValue",value:function(t){t&&(this.value=t),null===t&&this.form.reset()}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"validate",value:function(t){return this.form.valid?null:{input:{valid:!1}}}},{key:"convertValuesAccordingToUnit",value:function(t,e){"IN"===t&&"FEET"===e&&this.convertInchesToFeet(this.form.controls.value1.value),"IN"===t&&"CMS"===e&&(this.form.controls.value1.setValue(2.54*this.form.controls.value1.value),this.form.controls.value2.setValue(null)),"CMS"===t&&"FEET"===e&&this.convertInchesToFeet(this.form.controls.value1.value/2.54),"CMS"===t&&"IN"===e&&(this.form.controls.value1.setValue(this.form.controls.value1.value/2.54),this.form.controls.value2.setValue(null)),"FEET"===t&&"IN"===e&&this.convertFeetToInches(),"FEET"===t&&"CMS"===e&&this.convertFeetToCms()}},{key:"convertInchesToFeet",value:function(t){var e=Math.floor(t/12),n=t-12*e;this.form.controls.value1.setValue(e),this.form.controls.value2.setValue(n)}},{key:"convertFeetToInches",value:function(){this.form.controls.value1.setValue(12*this.form.controls.value1.value+this.form.controls.value2.value),this.form.controls.value2.setValue(null)}},{key:"convertFeetToCms",value:function(){this.form.controls.value1.setValue(2.54*(12*this.form.controls.value1.value+this.form.controls.value2.value)),this.form.controls.value2.setValue(null)}}]),i}(D.a)).\u0275fac=function(t){return new(t||tl)(_.Rb(v.h))},tl.\u0275cmp=_.Lb({type:tl,selectors:[["user-height"]],features:[_.Cb([{provide:v.s,useExisting:Object(_.W)(function(){return tl}),multi:!0},{provide:v.r,useExisting:Object(_.W)(function(){return tl}),multi:!0}]),_.Ab],decls:17,vars:4,consts:[["nz-form","",3,"formGroup"],["nz-row","","nzGutter","8"],["nz-col","","nzSpan","8"],["formControlName","unit"],["nzValue","FEET","nzLabel","Feet"],["nzValue","CMS","nzLabel","Cms"],["nzValue","IN","nzLabel","Inches"],["formControlName","value1",3,"nzMin"],["nz-col","","nzSpan","8",3,"hidden"],["formControlName","value2",3,"nzMin"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"nz-form-item"),_.Xb(4,"nz-form-control"),_.Xb(5,"nz-select",3),_.Sb(6,"nz-option",4),_.Sb(7,"nz-option",5),_.Sb(8,"nz-option",6),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(9,"div",2),_.Xb(10,"nz-form-item"),_.Xb(11,"nz-form-control"),_.Sb(12,"nz-input-number",7),_.Wb(),_.Wb(),_.Wb(),_.Xb(13,"div",8),_.Xb(14,"nz-form-item"),_.Xb(15,"nz-form-control"),_.Sb(16,"nz-input-number",9),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.rc("formGroup",e.form),_.Db(12),_.rc("nzMin",1),_.Db(1),_.rc("hidden","FEET"!=(null==e.form||null==e.form.value?null:e.form.value.unit)),_.Db(3),_.rc("nzMin",1))},directives:[Bl.b,v.v,v.m,Z.c,Z.a,Bl.c,Bl.a,Y.d,v.u,v.k,Y.a,ql.a],styles:["[_nghost-%COMP%]     .ant-select {\n\t\t\t\tfont: normal normal normal 10px/14px 'Nunito';\n\t\t\t\tcolor: #8a8a8a;\n\t\t\t\tborder: 1px solid #e8e8e8 !important;\n\t\t\t}\n\n\t\t\t[_nghost-%COMP%]     .ant-select-selector {\n\t\t\t\tborder: 1px solid #e8e8e8 !important;\n\t\t\t\tbackground: #dbdbdb 0% 0% no-repeat padding-box !important;\n\t\t\t}\n\n\t\t\t[_nghost-%COMP%]     .ant-input-number {\n\t\t\t\twidth: 100%;\n\t\t\t\tbackground: #fbfbfb 0% 0% no-repeat padding-box;\n\t\t\t\tborder: 1px solid #e8e8e8 !important;\n\t\t\t}\n\n\t\t\t[_nghost-%COMP%]     .anticon svg {\n\t\t\t\tcolor: black;\n\t\t\t\tfont-size: 10px;\n\t\t\t}"]}),tl),Ql=((Jo=function(t){r(n,t);var e=l(n);function n(t){var i;return b(this,n),(i=e.call(this)).fb=t,i.onChange=function(){},i.onTouched=function(){},i.form=i.fb.group({primaryCarrierName:new v.i,primaryMemberId:new v.i,secondaryInsured:new v.i,secondaryCarrierName:new v.i,secondaryMemberId:new v.i}),i.form.valueChanges.pipe(Object(Ve.a)(i.unsubscribed)).subscribe(function(t){i.onChange(t),i.onTouched()}),i.form.controls.secondaryInsured.valueChanges.pipe(Object(Ve.a)(i.unsubscribed)).subscribe(function(t){t?(i.form.controls.secondaryCarrierName.enable(),i.form.controls.secondaryMemberId.enable()):(i.form.controls.secondaryCarrierName.disable(),i.form.controls.secondaryMemberId.disable())}),i}return d(n,[{key:"value",get:function(){return this.form.value},set:function(t){this.form.patchValue(t),this.onChange(t),this.onTouched()}},{key:"insuranceControl",get:function(){return this.form.controls}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"writeValue",value:function(t){t&&(this.value=t),null===t&&this.form.reset()}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"validate",value:function(t){return this.form.valid?null:{input:{valid:!1}}}}]),n}(D.a)).\u0275fac=function(t){return new(t||Jo)(_.Rb(v.h))},Jo.\u0275cmp=_.Lb({type:Jo,selectors:[["user-insurance"]],features:[_.Cb([{provide:v.s,useExisting:Object(_.W)(function(){return Jo}),multi:!0},{provide:v.r,useExisting:Object(_.W)(function(){return Jo}),multi:!0}]),_.Ab],decls:50,vars:19,consts:[["nz-form","",3,"formGroup"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-typography",""],["nz-col","","nzSpan","6","id","top-left",1,"shaded"],["id","multiple"],["nz-col","","nzSpan","6","id","top-right",1,"shaded"],["nzSize","small","formControlName","secondaryInsured"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","6",1,"shaded"],["formControlName","primaryCarrierName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","primaryMemberId","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-col","","nzSpan","6","id","bottom-left",1,"shaded"],["formControlName","secondaryCarrierName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-col","","nzSpan","6","id","bottom-right",1,"shaded"],["formControlName","secondaryMemberId","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"h3",3),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Xb(6,"div",4),_.Xb(7,"label",5),_.Xc(8),_.jc(9,"translate"),_.Wb(),_.Wb(),_.Xb(10,"div",6),_.Sb(11,"nz-switch",7),_.Wb(),_.Wb(),_.Xb(12,"div",1),_.Xb(13,"div",8),_.Xb(14,"label"),_.Xc(15),_.jc(16,"translate"),_.Wb(),_.Wb(),_.Xb(17,"div",8),_.Xb(18,"label"),_.Xc(19),_.jc(20,"translate"),_.Wb(),_.Wb(),_.Xb(21,"div",9),_.Xb(22,"label"),_.Xc(23),_.jc(24,"translate"),_.Wb(),_.Wb(),_.Xb(25,"div",9),_.Xb(26,"label"),_.Xc(27),_.jc(28,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(29,"div",1),_.Xb(30,"div",8),_.Xb(31,"nz-form-item"),_.Xb(32,"nz-form-control"),_.Xb(33,"nz-input-group"),_.Sb(34,"input",10),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(35,"div",8),_.Xb(36,"nz-form-item"),_.Xb(37,"nz-form-control"),_.Xb(38,"nz-input-group"),_.Sb(39,"input",11),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(40,"div",12),_.Xb(41,"nz-form-item"),_.Xb(42,"nz-form-control"),_.Xb(43,"nz-input-group"),_.Sb(44,"input",13),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(45,"div",14),_.Xb(46,"nz-form-item"),_.Xb(47,"nz-form-control"),_.Xb(48,"nz-input-group"),_.Sb(49,"input",15),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.rc("formGroup",e.form),_.Db(4),_.Yc(_.kc(5,7,"PATIENT.INSURANCE_INFORMATION")),_.Db(4),_.Yc(_.kc(9,9,"PATIENT.DOES_PATIENT_HAVE_SECONDARY_INSURANCE")),_.Db(7),_.Yc(_.kc(16,11,"INSURANCE.PRIMARY_INSURANCE_CARRIER_NAME")),_.Db(4),_.Yc(_.kc(20,13,"INSURANCE.INSURER_MEMBER_ID")),_.Db(4),_.Yc(_.kc(24,15,"INSURANCE.SECONDARY_INSURANCE_CARRIER_NAME")),_.Db(4),_.Yc(_.kc(28,17,"INSURANCE.INSURER_MEMBER_ID")))},directives:[Bl.b,v.v,v.m,Z.c,Z.a,H.a,Gl.a,v.u,v.k,Bl.c,Bl.a,P.a,on.c,v.d,on.b],pipes:[Qt.a],styles:["[_nghost-%COMP%]     .ant-input-group-addon:empty{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid #e8e8e8}[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px!important}input[_ngcontent-%COMP%]{border:1px solid #e8e8e8}[_nghost-%COMP%]     .ant-select-selector{background:inherit!important}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:#262626}[_nghost-%COMP%]     .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form label{font:normal normal normal 12px/16px Nunito;color:#2f4f4f;flex-direction:row-reverse}[_nghost-%COMP%]     .ant-checkbox-wrapper{display:inline-flex}[_nghost-%COMP%]     .ant-checkbox-checked{border:none}nz-spin[_ngcontent-%COMP%]{display:inline-block;margin-right:10px}","h3[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: 5px;\n\t\t\t\tmargin-top: 5px;\n\t\t\t}\n\n\t\t\t#multiple[_ngcontent-%COMP%] {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\tlabel[_ngcontent-%COMP%] {\n\t\t\t\tfont: normal normal normal 12px/16px 'Nunito';\n\t\t\t\tcolor: var(--tertiary-color);\n\t\t\t\tmargin-left: 5px;\n\t\t\t\tmargin-bottom: 5px;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.shaded[_ngcontent-%COMP%] {\n\t\t\t\tbackground: #dbdbdb 0% 0% no-repeat padding-box;\n\t\t\t}\n\n\t\t\t#top-left[_ngcontent-%COMP%] {\n\t\t\t\tpadding-top: 15px;\n\t\t\t\tpadding-bottom: 10px;\n\t\t\t\tborder-top-left-radius: 5px;\n\t\t\t}\n\n\t\t\t#top-right[_ngcontent-%COMP%] {\n\t\t\t\tpadding-top: 15px;\n\t\t\t\tborder-top-right-radius: 5px;\n\t\t\t}\n\n\t\t\t#bottom-left[_ngcontent-%COMP%] {\n\t\t\t\tborder-bottom-left-radius: 5px;\n\t\t\t}\n\n\t\t\t#bottom-right[_ngcontent-%COMP%] {\n\t\t\t\tborder-bottom-right-radius: 5px;\n\t\t\t}"]}),Jo),Jl=["patientFormEl"],ts=["searchAddress"];function es(t,e){if(1&t){var n=_.Yb();_.Xb(0,"app-icons",94),_.ec("click",function(){_.Lc(n);var t=_.ic(2);return t.passwordVisible=!t.passwordVisible}),_.Wb()}if(2&t){var i=_.ic(2);_.rc("color",i.passwordVisible?"#a7c853":"#8A8A8A")}}function ns(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"COMMON.REQUIRED")," "))}function is(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"RESET_PASSWORD.MINIMUM_LENGTH_ALERT_MESSAGE")," "))}function as(t,e){if(1&t&&(_.Vc(0,ns,3,3,"ng-container",95),_.Vc(1,is,3,3,"ng-container",95)),2&t){var n=e.$implicit;_.rc("ngIf",n.hasError("required")),_.Db(1),_.rc("ngIf",n.hasError("minlength"))}}function rs(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"COMMON.REQUIRED")," "))}function os(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function ls(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PATIENT.EMAIL_ALREADY_ASSIGNED_TO_USER")," "))}function ss(t,e){if(1&t&&(_.Vc(0,rs,3,3,"ng-container",95),_.Vc(1,os,3,3,"ng-container",95),_.Vc(2,ls,3,3,"ng-container",95)),2&t){var n=e.$implicit;_.rc("ngIf",n.hasError("required")),_.Db(1),_.rc("ngIf",n.hasError("email")),_.Db(1),_.rc("ngIf",n.hasError("notUnique"))}}function cs(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function us(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function ds(t,e){if(1&t&&(_.Xb(0,"label",97),_.Xc(1),_.Wb()),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key),_.Db(1),_.Zc(" ",null==n?null:n.value," ")}}function bs(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"COMMON.REQUIRED")," "))}function ps(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function fs(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function gs(t,e){if(1&t&&(_.Xb(0,"div",98),_.Vc(1,bs,3,3,"ng-container",95),_.Vc(2,ps,3,3,"ng-container",95),_.Vc(3,fs,3,3,"ng-container",95),_.Wb()),2&t){var n=_.ic(2),i=null,a=null,r=null,o=null,l=null,s=null;_.Db(1),_.rc("ngIf",null==n.patientForm||null==(i=n.patientForm.get("primaryNumber"))||null==(a=i.get("number"))?null:a.errors.required),_.Db(1),_.rc("ngIf",null==n.patientForm||null==(r=n.patientForm.get("primaryNumber"))||null==(o=r.get("number"))?null:o.errors.minlength),_.Db(1),_.rc("ngIf",null==n.patientForm||null==(l=n.patientForm.get("primaryNumber"))||null==(s=l.get("number"))?null:s.errors.pattern)}}function hs(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"COMMON.REQUIRED")," "))}function vs(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function ms(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function Ss(t,e){if(1&t&&(_.Xb(0,"div",98),_.Vc(1,hs,3,3,"ng-container",95),_.Vc(2,vs,3,3,"ng-container",95),_.Vc(3,ms,3,3,"ng-container",95),_.Wb()),2&t){var n=_.ic(2),i=null,a=null,r=null,o=null,l=null,s=null;_.Db(1),_.rc("ngIf",null==n.patientForm||null==(i=n.patientForm.get("secondaryNumber"))||null==(a=i.get("number"))?null:a.errors.required),_.Db(1),_.rc("ngIf",null==n.patientForm||null==(r=n.patientForm.get("secondaryNumber"))||null==(o=r.get("number"))?null:o.errors.minlength),_.Db(1),_.rc("ngIf",null==n.patientForm||null==(l=n.patientForm.get("secondaryNumber"))||null==(s=l.get("number"))?null:s.errors.pattern)}}function Is(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"span",103),_.Xb(2,"span",104),_.jc(3,"tenantName"),_.Xc(4),_.jc(5,"tenantName"),_.Wb(),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(2),_.rc("nzTooltipTitle",_.kc(3,2,null==n?null:n.tenantId)),_.Db(2),_.Zc(" ",_.kc(5,4,null==n?null:n.tenantId)," ")}}var Ds=function(){return["topLeft","leftTop"]};function ys(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"nz-option",99),_.Xb(2,"span",100),_.Xb(3,"span",101),_.Xc(4),_.Wb(),_.Vc(5,Is,6,6,"ng-container",102),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.sc("nzLabel",null==n?null:n.value),_.rc("nzValue",null==n?null:n.key),_.Db(2),_.rc("nzTooltipTitle",null==n?null:n.value)("nzTooltipPlacement",_.xc(5,Ds)),_.Db(1),_.Zc(" ",null==n?null:n.value," ")}}function Cs(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function Es(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function Xs(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function Ts(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function zs(t,e){if(1&t&&_.Sb(0,"nz-option",96),2&t){var n=e.$implicit;_.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}var _s=function(){return{standalone:!0}},Os=function(){return[48,0]},Ms=function(){return[56,0]},As=function(t){return{"disabled-text":t}};function Ps(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",1),_.Xb(1,"form",2,3),_.ec("ngSubmit",function(){return _.Lc(n),_.ic().submit()})("keydown.enter",function(t){return t.preventDefault()}),_.Xb(3,"h3",4),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Sb(6,"div",5),_.Xb(7,"div",6),_.Xb(8,"div",7),_.Xb(9,"nz-form-item"),_.Xb(10,"nz-form-control",8),_.jc(11,"translate"),_.Xb(12,"label"),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Sb(15,"input",9),_.Wb(),_.Wb(),_.Wb(),_.Xb(16,"div",7),_.Xb(17,"nz-form-item"),_.Xb(18,"nz-form-control",8),_.jc(19,"translate"),_.Xb(20,"label"),_.Xc(21),_.jc(22,"translate"),_.Wb(),_.Sb(23,"input",10),_.Wb(),_.Wb(),_.Wb(),_.Xb(24,"div",7),_.Xb(25,"nz-form-item"),_.Xb(26,"nz-form-control",8),_.jc(27,"translate"),_.Xb(28,"label"),_.Xc(29),_.jc(30,"translate"),_.Wb(),_.Sb(31,"input",11),_.Wb(),_.Wb(),_.Wb(),_.Xb(32,"div",7),_.Xb(33,"nz-form-item"),_.Xb(34,"nz-form-control",8),_.Xb(35,"label"),_.Xc(36),_.jc(37,"translate"),_.Wb(),_.Xb(38,"nz-input-group",12),_.Sb(39,"input",13),_.Wb(),_.Wb(),_.Vc(40,es,1,1,"ng-template",null,14,_.Wc),_.Vc(42,as,2,2,"ng-template",null,15,_.Wc),_.Wb(),_.Wb(),_.Wb(),_.Sb(44,"div",5),_.Xb(45,"div",6),_.Xb(46,"div",7),_.Xb(47,"nz-form-item"),_.Xb(48,"nz-form-control",8),_.Xb(49,"nz-input-group"),_.Xb(50,"label"),_.Xc(51),_.jc(52,"translate"),_.Wb(),_.Sb(53,"input",16),_.Wb(),_.Wb(),_.Vc(54,ss,3,3,"ng-template",null,17,_.Wc),_.Wb(),_.Wb(),_.Xb(56,"div",7),_.Xb(57,"nz-form-item"),_.Xb(58,"nz-form-control",8),_.jc(59,"translate"),_.Xb(60,"label"),_.Xc(61),_.jc(62,"translate"),_.Wb(),_.Sb(63,"nz-date-picker",18),_.Wb(),_.Wb(),_.Wb(),_.Xb(64,"div",7),_.Xb(65,"nz-form-item"),_.Xb(66,"nz-form-control",8),_.jc(67,"translate"),_.Xb(68,"label"),_.Xc(69),_.jc(70,"translate"),_.Wb(),_.Xb(71,"nz-select",19),_.Vc(72,cs,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(73,"div",7),_.Xb(74,"nz-form-item"),_.Xb(75,"nz-form-control",8),_.jc(76,"translate"),_.Xb(77,"label"),_.Xc(78),_.jc(79,"translate"),_.Wb(),_.Xb(80,"nz-select",21),_.Vc(81,us,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(82,"div",5),_.Xb(83,"div",6),_.Xb(84,"div",22),_.Xb(85,"nz-form-item"),_.Xb(86,"nz-form-control"),_.Xb(87,"label"),_.Xc(88),_.jc(89,"translate"),_.Wb(),_.Sb(90,"textarea",23),_.Wb(),_.Wb(),_.Wb(),_.Xb(91,"div",7),_.Xb(92,"nz-form-item"),_.Xb(93,"nz-form-control",8),_.jc(94,"translate"),_.Xb(95,"label"),_.Xc(96),_.jc(97,"translate"),_.Wb(),_.Xb(98,"nz-radio-group",24),_.Vc(99,ds,2,2,"label",25),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(100,"div",26),_.Xb(101,"div",7),_.Xb(102,"nz-form-item"),_.Xb(103,"nz-form-control"),_.Sb(104,"nz-switch",27),_.Xb(105,"label",28),_.Xc(106),_.jc(107,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(108,"div",7),_.Xb(109,"nz-form-item"),_.Xb(110,"nz-form-control",8),_.jc(111,"translate"),_.Sb(112,"nz-switch",29),_.Xb(113,"label",28),_.Xc(114),_.jc(115,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(116,"nz-divider"),_.Xb(117,"div"),_.Xb(118,"h4",4),_.Xc(119),_.jc(120,"translate"),_.Wb(),_.Xb(121,"div",30),_.Xb(122,"div",31),_.Xb(123,"div",32),_.Xb(124,"label",33),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().daysAllChecked=t})("ngModelChange",function(){return _.Lc(n),_.ic().updateAllChecked()}),_.Xc(125," Check all "),_.Wb(),_.Wb(),_.Xb(126,"div",34),_.Xb(127,"nz-checkbox-group",35),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().daysOptions=t})("ngModelChange",function(){return _.Lc(n),_.ic().updateSingleChecked()}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(128,"div",36),_.Xb(129,"div",30),_.Xb(130,"div",37),_.Xc(131," Available from: "),_.Wb(),_.Xb(132,"div",38),_.Xc(133," Available till: "),_.Wb(),_.Wb(),_.Xb(134,"div",30),_.Xb(135,"div",39),_.Xb(136,"nz-time-picker",40),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().onTimeChange(t,"FROM")}),_.Wb(),_.Wb(),_.Xb(137,"div",41),_.Xb(138,"nz-time-picker",42),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().onTimeChange(t,"TO")}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(139,"nz-divider"),_.Xb(140,"div",43),_.Xb(141,"div",44),_.Xb(142,"div",45),_.Xb(143,"div",22),_.Xb(144,"label"),_.Xc(145,"Primary Contact Number*"),_.Wb(),_.Wb(),_.Wb(),_.Xb(146,"div",43),_.Xb(147,"div",46),_.Xb(148,"nz-form-item"),_.Xb(149,"nz-form-control",8),_.Xb(150,"nz-input-group",47),_.Sb(151,"input",48),_.Wb(),_.Wb(),_.Vc(152,gs,4,3,"div",49),_.Wb(),_.Wb(),_.Xb(153,"div",46),_.Xb(154,"nz-form-item"),_.Xb(155,"nz-form-control"),_.Xb(156,"label",50),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().resetPreferredSecondaryNumber(t)}),_.Xc(157," Mark as preferred "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(158,"div",43),_.Xb(159,"div",51),_.Xb(160,"label"),_.Xc(161,"Type"),_.Wb(),_.Wb(),_.Xb(162,"div",51),_.Xb(163,"label"),_.Xc(164,"Preferences"),_.Wb(),_.Wb(),_.Wb(),_.Xb(165,"div",43),_.Xb(166,"div",51),_.Xb(167,"nz-form-item"),_.Xb(168,"nz-form-control"),_.Xb(169,"nz-select",52),_.Sb(170,"nz-option",53),_.Sb(171,"nz-option",54),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(172,"div",51),_.Xb(173,"nz-form-item"),_.Xb(174,"nz-form-control"),_.Sb(175,"nz-switch",55),_.Xb(176,"label",56),_.Xc(177," Contact via Audio Call "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(178,"div",43),_.Xb(179,"div",51),_.Xb(180,"div"),_.Xb(181,"label"),_.Xc(182,"Label"),_.Wb(),_.Wb(),_.Xb(183,"nz-form-item"),_.Xb(184,"nz-form-control",8),_.jc(185,"translate"),_.Xb(186,"nz-input-group"),_.Sb(187,"input",57),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(188,"div",51),_.Xb(189,"nz-form-item"),_.Xb(190,"nz-form-control"),_.Sb(191,"nz-switch",58),_.Xb(192,"label",56),_.Xc(193," Contact via SMS "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(194,"div",45),_.Xb(195,"div",51),_.Xb(196,"label"),_.Xc(197,"Other Preferences"),_.Wb(),_.Wb(),_.Wb(),_.Xb(198,"div",45),_.Xb(199,"div",51),_.Xb(200,"nz-form-item"),_.Xb(201,"nz-form-control"),_.Sb(202,"nz-switch",59),_.Xb(203,"label",56),_.Xc(204," Prefers Reminder SMS "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(205,"div",51),_.Xb(206,"nz-form-item"),_.Xb(207,"nz-form-control"),_.Sb(208,"nz-switch",60),_.Xb(209,"label",56),_.Xc(210," Contact via Video Call "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(211,"div",61),_.Xb(212,"div",45),_.Xb(213,"div",22),_.Xb(214,"label"),_.Xc(215,"Secondary Contact Number"),_.Wb(),_.Wb(),_.Wb(),_.Xb(216,"div",43),_.Xb(217,"div",46),_.Xb(218,"nz-form-item"),_.Xb(219,"nz-form-control"),_.Xb(220,"nz-input-group",47),_.Sb(221,"input",48),_.Wb(),_.Wb(),_.Vc(222,Ss,4,3,"div",49),_.Wb(),_.Wb(),_.Xb(223,"div",46),_.Xb(224,"nz-form-item"),_.Xb(225,"nz-form-control"),_.Xb(226,"label",50),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().resetPreferredPrimaryNumber(t)}),_.Xc(227," Mark as preferred "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(228,"div",43),_.Xb(229,"div",51),_.Xb(230,"label"),_.Xc(231,"Type"),_.Wb(),_.Wb(),_.Xb(232,"div",51),_.Xb(233,"label"),_.Xc(234,"Preferences"),_.Wb(),_.Wb(),_.Wb(),_.Xb(235,"div",43),_.Xb(236,"div",51),_.Xb(237,"nz-form-item"),_.Xb(238,"nz-form-control"),_.Xb(239,"nz-select",52),_.Sb(240,"nz-option",53),_.Sb(241,"nz-option",54),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(242,"div",51),_.Xb(243,"nz-form-item"),_.Xb(244,"nz-form-control"),_.Sb(245,"nz-switch",55),_.Xb(246,"label",56),_.Xc(247," Contact via Audio Call "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(248,"div",43),_.Xb(249,"div",51),_.Xb(250,"div"),_.Xb(251,"label"),_.Xc(252,"Label"),_.Wb(),_.Wb(),_.Xb(253,"nz-form-item"),_.Xb(254,"nz-form-control",8),_.jc(255,"translate"),_.Xb(256,"nz-input-group"),_.Sb(257,"input",57),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(258,"div",51),_.Xb(259,"nz-form-item"),_.Xb(260,"nz-form-control"),_.Sb(261,"nz-switch",58),_.Xb(262,"label",56),_.Xc(263," Contact via SMS "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(264,"div",45),_.Xb(265,"div",51),_.Xb(266,"label"),_.Xc(267,"Other Preferences"),_.Wb(),_.Wb(),_.Wb(),_.Xb(268,"div",45),_.Xb(269,"div",51),_.Xb(270,"nz-form-item"),_.Xb(271,"nz-form-control"),_.Sb(272,"nz-switch",59),_.Xb(273,"label",56),_.Xc(274," Prefers Reminder SMS "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(275,"nz-divider"),_.Xb(276,"div",6),_.Xb(277,"div",51),_.Xb(278,"label"),_.Xc(279),_.jc(280,"translate"),_.Wb(),_.Wb(),_.Xb(281,"div",62),_.Xb(282,"label"),_.Xc(283),_.jc(284,"translate"),_.Wb(),_.Wb(),_.Xb(285,"div",63),_.Xb(286,"label"),_.Xc(287,"PO Box #"),_.Wb(),_.Wb(),_.Wb(),_.Xb(288,"div",6),_.Xb(289,"div",51),_.Xb(290,"nz-form-item"),_.Xb(291,"nz-form-control",8),_.jc(292,"translate"),_.Sb(293,"input",64,65),_.jc(295,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(296,"div",62),_.Xb(297,"nz-form-item"),_.Xb(298,"nz-form-control",8),_.jc(299,"translate"),_.Sb(300,"input",66),_.Wb(),_.Wb(),_.Wb(),_.Xb(301,"div",63),_.Xb(302,"nz-form-item"),_.Xb(303,"nz-form-control",8),_.jc(304,"translate"),_.Sb(305,"input",67),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(306,"div",5),_.Xb(307,"div",6),_.Xb(308,"div",68),_.Xb(309,"label"),_.Xc(310),_.jc(311,"translate"),_.Wb(),_.Wb(),_.Xb(312,"div",68),_.Xb(313,"label"),_.Xc(314),_.jc(315,"translate"),_.Wb(),_.Wb(),_.Xb(316,"div",68),_.Xb(317,"label"),_.Xc(318),_.jc(319,"translate"),_.Wb(),_.Wb(),_.Xb(320,"div",68),_.Xb(321,"label"),_.Xc(322),_.jc(323,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(324,"div",6),_.Xb(325,"div",68),_.Xb(326,"nz-form-item"),_.Xb(327,"nz-form-control",8),_.jc(328,"translate"),_.Sb(329,"input",69),_.Wb(),_.Wb(),_.Wb(),_.Xb(330,"div",68),_.Xb(331,"nz-form-item"),_.Xb(332,"nz-form-control",8),_.jc(333,"translate"),_.Sb(334,"input",70),_.Wb(),_.Wb(),_.Wb(),_.Xb(335,"div",68),_.Xb(336,"nz-form-item"),_.Xb(337,"nz-form-control",8),_.jc(338,"translate"),_.Sb(339,"input",71),_.Wb(),_.Wb(),_.Wb(),_.Xb(340,"div",68),_.Xb(341,"nz-form-item"),_.Xb(342,"nz-form-control",8),_.jc(343,"translate"),_.Sb(344,"input",72),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(345,"nz-divider"),_.Sb(346,"div",5),_.Sb(347,"div",5),_.Xb(348,"h3",4),_.Xc(349),_.jc(350,"translate"),_.Wb(),_.Sb(351,"div",5),_.Xb(352,"div",6),_.Xb(353,"div",68),_.Xb(354,"label"),_.Xc(355,"Site*"),_.Wb(),_.Wb(),_.Xb(356,"div",68),_.Xb(357,"label"),_.Xc(358),_.jc(359,"translate"),_.Wb(),_.Wb(),_.Xb(360,"div",68),_.Xb(361,"label"),_.Xc(362),_.jc(363,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(364,"div",6),_.Xb(365,"div",68),_.Xb(366,"nz-form-item"),_.Xb(367,"nz-form-control",8),_.jc(368,"translate"),_.Xb(369,"nz-select",73),_.Vc(370,ys,6,6,"ng-container",74),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(371,"div",68),_.Xb(372,"nz-form-item"),_.Xb(373,"nz-form-control",8),_.jc(374,"translate"),_.Xb(375,"nz-select",75),_.Vc(376,Cs,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(377,"div",68),_.Xb(378,"nz-form-item"),_.Xb(379,"nz-form-control"),_.Sb(380,"input",76),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(381,"div",5),_.Sb(382,"div",5),_.Sb(383,"div",5),_.Sb(384,"nz-divider"),_.Xb(385,"h3",4),_.Xc(386),_.jc(387,"translate"),_.Wb(),_.Sb(388,"div",5),_.Xb(389,"div",6),_.Xb(390,"div",7),_.Xb(391,"label"),_.Xc(392),_.jc(393,"translate"),_.Wb(),_.Wb(),_.Xb(394,"div",7),_.Xb(395,"label"),_.Xc(396),_.jc(397,"translate"),_.Wb(),_.Wb(),_.Xb(398,"div",7),_.Xb(399,"label"),_.Xc(400),_.jc(401,"translate"),_.Wb(),_.Wb(),_.Xb(402,"div",7),_.Xb(403,"label"),_.Xc(404),_.jc(405,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(406,"div",6),_.Xb(407,"div",7),_.Sb(408,"user-height",77),_.Wb(),_.Xb(409,"div",78),_.Xb(410,"div",79),_.Xb(411,"div",62),_.Xb(412,"nz-form-item"),_.Xb(413,"nz-form-control",8),_.jc(414,"translate"),_.Xb(415,"nz-select",80),_.Vc(416,Es,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(417,"div",81),_.Xb(418,"nz-form-item"),_.Xb(419,"nz-form-control",8),_.jc(420,"translate"),_.Sb(421,"nz-input-number",82),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(422,"div",83),_.Xb(423,"div",79),_.Xb(424,"div",62),_.Xb(425,"nz-form-item"),_.Xb(426,"nz-form-control",8),_.jc(427,"translate"),_.Xb(428,"nz-select",80),_.Vc(429,Xs,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(430,"div",81),_.Xb(431,"nz-form-item"),_.Xb(432,"nz-form-control",8),_.jc(433,"translate"),_.Sb(434,"nz-input-number",82),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(435,"div",84),_.Xb(436,"div",79),_.Xb(437,"div",62),_.Xb(438,"nz-form-item"),_.Xb(439,"nz-form-control",8),_.jc(440,"translate"),_.Xb(441,"nz-select",80),_.Vc(442,Ts,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(443,"div",81),_.Xb(444,"nz-form-item"),_.Xb(445,"nz-form-control",8),_.jc(446,"translate"),_.Sb(447,"nz-input-number",82),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(448,"div",5),_.Xb(449,"div",6),_.Xb(450,"div",85),_.Xb(451,"nz-form-item"),_.Xb(452,"nz-form-control",8),_.jc(453,"translate"),_.Xb(454,"label"),_.Xc(455),_.jc(456,"translate"),_.Wb(),_.Xb(457,"nz-select",86),_.Vc(458,zs,1,2,"nz-option",20),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(459,"div",87),_.Xb(460,"div",88),_.Xb(461,"div",7),_.Xb(462,"nz-form-item"),_.Xb(463,"nz-form-control",8),_.jc(464,"translate"),_.Xb(465,"label"),_.Xc(466),_.jc(467,"translate"),_.Wb(),_.Xb(468,"label",89),_.Xc(469),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(470,"div",7),_.Xb(471,"nz-form-item"),_.Xb(472,"nz-form-control",8),_.jc(473,"translate"),_.Xb(474,"label"),_.Xc(475,"\xa0"),_.Wb(),_.Xb(476,"label",90),_.Xc(477),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(478,"div",7),_.Xb(479,"nz-form-item"),_.Xb(480,"nz-form-control",8),_.jc(481,"translate"),_.Xb(482,"label"),_.Xc(483,"\xa0"),_.Wb(),_.Xb(484,"label",91),_.Xc(485),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(486,"div",7),_.Xb(487,"nz-form-item"),_.Xb(488,"nz-form-control",8),_.jc(489,"translate"),_.Xb(490,"label"),_.Xc(491,"\xa0"),_.Wb(),_.Xb(492,"label",92),_.Xc(493),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(494,"div",5),_.Sb(495,"div",5),_.Sb(496,"div",5),_.Sb(497,"nz-divider"),_.Xb(498,"div",6),_.Xb(499,"div",31);_.Sb(500,"user-insurance",93),_.Wb(),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=_.Ic(41),a=_.Ic(43),r=_.Ic(55),o=_.ic(),l=null,s=null,c=null,u=null,d=null,b=null,p=null,f=null,g=null,h=null,v=null,m=null,S=null,I=null,D=null,y=null,C=null,E=null;_.Db(1),_.rc("formGroup",o.patientForm),_.Db(3),_.Yc(_.kc(5,120,"PATIENT.BASIC_PATIENT_INFORMATION")),_.Db(6),_.sc("nzErrorTip",_.kc(11,122,"COMMON.REQUIRED")),_.Db(3),_.Zc("",_.kc(14,124,"COMMON.FIRSTNAME"),"*"),_.Db(5),_.sc("nzErrorTip",_.kc(19,126,"COMMON.REQUIRED")),_.Db(3),_.Zc("",_.kc(22,128,"COMMON.LASTNAME"),"*"),_.Db(5),_.sc("nzErrorTip",_.kc(27,130,"COMMON.REQUIRED")),_.Db(3),_.Yc(_.kc(30,132,"COMMON.USERNAME")),_.Db(5),_.rc("nzErrorTip",a),_.Db(2),_.Yc(_.kc(37,134,"COMMON.PASSWORD")),_.Db(2),_.rc("nzSuffix",i),_.Db(1),_.rc("type",o.passwordVisible?"text":"password"),_.Db(9),_.rc("nzErrorTip",r),_.Db(3),_.Yc(_.kc(52,136,"COMMON.EMAIL")),_.Db(7),_.sc("nzErrorTip",_.kc(59,138,"COMMON.REQUIRED")),_.Db(3),_.Zc("",_.kc(62,140,"COMMON.DOB"),"*"),_.Db(2),_.rc("nzFormat","MM-dd-yyyy")("nzDisabledDate",o.disabledDate),_.Db(3),_.sc("nzErrorTip",_.kc(67,142,"COMMON.REQUIRED")),_.Db(3),_.Zc("",_.kc(70,144,"PATIENT.TIME_ZONE"),"*"),_.Db(3),_.rc("ngForOf",o.timezones),_.Db(3),_.sc("nzErrorTip",_.kc(76,146,"COMMON.REQUIRED")),_.Db(3),_.Zc("",_.kc(79,148,"PATIENT.PREFERRED_COMMUNICATION_LANGUAGE"),"*"),_.Db(3),_.rc("ngForOf",o.languages),_.Db(7),_.Yc(_.kc(89,150,"PATIENT.NOTES")),_.Db(5),_.sc("nzErrorTip",_.kc(94,152,"COMMON.REQUIRED")),_.Db(3),_.Zc("",_.kc(97,154,"PATIENT.GENDER"),"*"),_.Db(3),_.rc("ngForOf",o.genders),_.Db(7),_.Yc(_.kc(107,156,"PATIENT.VM_CONSENT")),_.Db(4),_.sc("nzErrorTip",_.kc(111,158,"COMMON.REQUIRED")),_.Db(4),_.Yc(_.kc(115,160,"PATIENT.HIPAA_CONSENT")),_.Db(5),_.Yc(_.kc(120,162,"PATIENT.AVAILABLE_HOURS")),_.Db(5),_.rc("ngModel",o.daysAllChecked)("nzIndeterminate",o.daysIndeterminate)("ngModelOptions",_.xc(242,_s)),_.Db(3),_.rc("ngModel",o.daysOptions)("ngModelOptions",_.xc(243,_s)),_.Db(9),_.rc("nzUse12Hours",!0),_.Db(2),_.rc("nzUse12Hours",!0),_.Db(2),_.rc("nzGutter",_.xc(244,Os)),_.Db(6),_.rc("nzGutter",_.xc(245,Ms)),_.Db(3),_.rc("nzErrorTip",o.mobileErrors),_.Db(1),_.tc("nzAddOnBefore","[",o.countryCode,"]"),_.Db(2),_.rc("ngIf",(null==o.patientForm||null==(l=o.patientForm.get("primaryNumber"))?null:l.get("number").dirty)&&(null==o.patientForm||null==(l=o.patientForm.get("primaryNumber"))||null==(s=l.get("number"))?null:s.errors)),_.Db(4),_.rc("nzValue",o.preferred),_.Db(2),_.rc("nzGutter",_.xc(246,Ms)),_.Db(7),_.rc("nzGutter",_.xc(247,Ms)),_.Db(11),_.rc("ngClass",_.yc(248,As,!(null!=o.patientForm&&null!=(c=o.patientForm.get("primaryNumber"))&&null!=(u=c.get("audioCallNotification"))&&u.value))),_.Db(2),_.rc("nzGutter",_.xc(250,Ms)),_.Db(6),_.sc("nzErrorTip",_.kc(185,164,"COMMON.REQUIRED")),_.Db(8),_.rc("ngClass",_.yc(251,As,!(null!=o.patientForm&&null!=(d=o.patientForm.get("primaryNumber"))&&null!=(b=d.get("smsNotification"))&&b.value))),_.Db(11),_.rc("ngClass",_.yc(253,As,!(null!=o.patientForm&&null!=(p=o.patientForm.get("primaryNumber"))&&null!=(f=p.get("reminderSMSNotification"))&&f.value))),_.Db(6),_.rc("ngClass",_.yc(255,As,!(null!=o.patientForm&&null!=(g=o.patientForm.get("primaryNumber"))&&null!=(h=g.get("videoCallNotification"))&&h.value))),_.Db(7),_.rc("nzGutter",_.xc(257,Ms)),_.Db(4),_.tc("nzAddOnBefore","[",o.countryCode,"]"),_.Db(2),_.rc("ngIf",(null==o.patientForm||null==(v=o.patientForm.get("secondaryNumber"))?null:v.get("number").dirty)&&(null==o.patientForm||null==(v=o.patientForm.get("secondaryNumber"))||null==(m=v.get("number"))?null:m.errors)),_.Db(4),_.rc("nzValue",o.preferred),_.Db(2),_.rc("nzGutter",_.xc(258,Ms)),_.Db(7),_.rc("nzGutter",_.xc(259,Ms)),_.Db(11),_.rc("ngClass",_.yc(260,As,!(null!=o.patientForm&&null!=(S=o.patientForm.get("secondaryNumber"))&&null!=(I=S.get("audioCallNotification"))&&I.value))),_.Db(2),_.rc("nzGutter",_.xc(262,Ms)),_.Db(6),_.sc("nzErrorTip",_.kc(255,166,"COMMON.REQUIRED")),_.Db(8),_.rc("ngClass",_.yc(263,As,!(null!=o.patientForm&&null!=(D=o.patientForm.get("secondaryNumber"))&&null!=(y=D.get("smsNotification"))&&y.value))),_.Db(11),_.rc("ngClass",_.yc(265,As,!(null!=o.patientForm&&null!=(C=o.patientForm.get("secondaryNumber"))&&null!=(E=C.get("reminderSMSNotification"))&&E.value))),_.Db(6),_.Yc(_.kc(280,168,"PATIENT.HOME_ADDRESS_LINE_1")),_.Db(4),_.Yc(_.kc(284,170,"PATIENT.ADDRESS_LINE_2")),_.Db(8),_.sc("nzErrorTip",_.kc(292,172,"COMMON.REQUIRED")),_.Db(2),_.sc("placeholder",_.kc(295,174,"PATIENT.SEARCH_OR_ENTER_PATIENT_RESIDENTIAL_ADDRESS")),_.Db(5),_.sc("nzErrorTip",_.kc(299,176,"COMMON.REQUIRED")),_.Db(5),_.sc("nzErrorTip",_.kc(304,178,"COMMON.REQUIRED")),_.Db(7),_.Yc(_.kc(311,180,"ZIP_CODE")),_.Db(4),_.Yc(_.kc(315,182,"COMMON.COUNTRY")),_.Db(4),_.Yc(_.kc(319,184,"COMMON.STATE")),_.Db(4),_.Yc(_.kc(323,186,"COMMON.CITY")),_.Db(5),_.sc("nzErrorTip",_.kc(328,188,"COMMON.REQUIRED")),_.Db(5),_.sc("nzErrorTip",_.kc(333,190,"COMMON.REQUIRED")),_.Db(5),_.sc("nzErrorTip",_.kc(338,192,"COMMON.REQUIRED")),_.Db(5),_.sc("nzErrorTip",_.kc(343,194,"COMMON.REQUIRED")),_.Db(7),_.Yc(_.kc(350,196,"PATIENT.ORGANIZATIONAL_INFORMATION")),_.Db(9),_.Yc(_.kc(359,198,"COMMON.PROFILETAG")),_.Db(4),_.Yc(_.kc(363,200,"PATIENT.ID")),_.Db(5),_.sc("nzErrorTip",_.kc(368,202,"COMMON.REQUIRED")),_.Db(3),_.rc("ngForOf",o.locations),_.Db(3),_.sc("nzErrorTip",_.kc(374,204,"COMMON.REQUIRED")),_.Db(2),_.rc("nzMode","multiple"),_.Db(1),_.rc("ngForOf",o.tags),_.Db(10),_.Yc(_.kc(387,206,"PATIENT.HEALTH_INFORMATION")),_.Db(6),_.Yc(_.kc(393,208,"COMMON.HEIGHT")),_.Db(4),_.Yc(_.kc(397,210,"COMMON.WEIGHT")),_.Db(4),_.Yc(_.kc(401,212,"PATIENT.WAIST_SIZE")),_.Db(4),_.Yc(_.kc(405,214,"PATIENT.HIP_SIZE")),_.Db(9),_.sc("nzErrorTip",_.kc(414,216,"COMMON.REQUIRED")),_.Db(3),_.rc("ngForOf",o.weightUnits),_.Db(3),_.sc("nzErrorTip",_.kc(420,218,"COMMON.REQUIRED")),_.Db(2),_.rc("nzMin",1),_.Db(5),_.sc("nzErrorTip",_.kc(427,220,"COMMON.REQUIRED")),_.Db(3),_.rc("ngForOf",o.waistHipUnits),_.Db(3),_.sc("nzErrorTip",_.kc(433,222,"COMMON.REQUIRED")),_.Db(2),_.rc("nzMin",1),_.Db(5),_.sc("nzErrorTip",_.kc(440,224,"COMMON.REQUIRED")),_.Db(3),_.rc("ngForOf",o.waistHipUnits),_.Db(3),_.sc("nzErrorTip",_.kc(446,226,"COMMON.REQUIRED")),_.Db(2),_.rc("nzMin",1),_.Db(5),_.sc("nzErrorTip",_.kc(453,228,"COMMON.REQUIRED")),_.Db(3),_.Yc(_.kc(456,230,"COMMON.BLOODGROUP")),_.Db(3),_.rc("ngForOf",o.bloodGroups),_.Db(5),_.sc("nzErrorTip",_.kc(464,232,"COMMON.REQUIRED")),_.Db(3),_.Yc(_.kc(467,234,"PATIENT.SELECT_IF_YES")),_.Db(2),_.rc("nzValue",null==o.healthQuestions[0]?null:o.healthQuestions[0].key),_.Db(1),_.Zc(" ",null==o.healthQuestions[0]?null:o.healthQuestions[0].value," "),_.Db(3),_.sc("nzErrorTip",_.kc(473,236,"COMMON.REQUIRED")),_.Db(4),_.rc("nzValue",null==o.healthQuestions[1]?null:o.healthQuestions[1].key),_.Db(1),_.Zc(" ",null==o.healthQuestions[1]?null:o.healthQuestions[1].value," "),_.Db(3),_.sc("nzErrorTip",_.kc(481,238,"COMMON.REQUIRED")),_.Db(4),_.rc("nzValue",null==o.healthQuestions[2]?null:o.healthQuestions[2].key),_.Db(1),_.Zc(" ",null==o.healthQuestions[2]?null:o.healthQuestions[2].value," "),_.Db(3),_.sc("nzErrorTip",_.kc(489,240,"COMMON.REQUIRED")),_.Db(4),_.rc("nzValue",null==o.healthQuestions[3]?null:o.healthQuestions[3].key)("nzDisabled",!(null!=o.patientForm&&null!=o.patientForm.controls.hypertension&&o.patientForm.controls.hypertension.value)),_.Db(1),_.Zc(" ",null==o.healthQuestions[3]?null:o.healthQuestions[3].value," ")}}var Ns,Ws=((Ns=function(t){r(n,t);var e=l(n);function n(t,i,a,r,o,l,s,c,u,d,p,f,g,h,v,m){var S,I;b(this,n),(S=e.call(this))._fb=t,S._router=i,S._tagsService=a,S._leadsService=r,S.mapsAPILoader=o,S._staffService=l,S._messageService=s,S._patientsService=c,S._emailValidator=u,S._dataSharingService=d,S._notificationsService=p,S._patientsEventLogger=f,S._activatedRoute=g,S._translationsService=h,S._googleLocationService=v,S._privilegeUtil=m,S.timezones=Object(pl.e)(),S.genders=Object(pl.b)(),S.languages=Object(pl.d)(),S.weightUnits=Object(pl.g)(),S.waistHipUnits=Object(pl.f)(),S.bloodGroups=Object(pl.a)(),S.healthQuestions=Object(pl.c)(),S.disabledDate=function(t){return function(t){return Object(On.a)(t,new Date)>0}(t)},S.daysOptions=[{label:"Mondays",value:"Mondays",checked:!1},{label:"Tuesdays",value:"Tuesdays",checked:!1},{label:"Wednesdays",value:"Wednesdays",checked:!1},{label:"Thursdays",value:"Thursdays",checked:!1},{label:"Fridays",value:"Fridays",checked:!1}],S.daysIndeterminate=!1,S.daysAllChecked=!1;var D=S._activatedRoute.snapshot.queryParamMap.get("patientName")||"Add a patient";return S.patientId=S._activatedRoute.snapshot.paramMap.get("id"),S.mode=S._activatedRoute.snapshot.paramMap.get("mode")||"add",S.siteId=S._activatedRoute.snapshot.queryParamMap.get("siteId"),S.physicianId=S._activatedRoute.snapshot.queryParamMap.get("physicianId"),null===(I=S._dataSharingService.tenantSettings)||void 0===I||I.pipe(Object(Ve.a)(S.unsubscribed)).subscribe(function(t){var e;t&&(S.tenantConfig=t,S.countryCode=null===(e=S.tenantConfig)||void 0===e?void 0:e.countryCode,S.initializeForm())}),S._translationsService.getMultiple("PATIENT","PATIENT.SAVED_SUCCESSFULLY").pipe(Object(Ve.a)(S.unsubscribed)).subscribe(function(t){return S.translatedStrings=t}),S._routeHelperService.setTitleForRoute(D),S._routeHelperService.isPrimaryActionTriggered().pipe(Object(bl.filter)(function(t){return!!t}),Object(Ve.a)(S.unsubscribed)).subscribe(function(){var t,e;"PENDING"!==S.patientForm.status&&(null===(e=null===(t=S.patientFormEl)||void 0===t?void 0:t.ngSubmit)||void 0===e||e.next())}),S}return d(n,[{key:"initializeForm",value:function(){var t=this;({add:function(){return t.newFormInitializer()},edit:function(){return t.existingPatientFormInitializer()},lead:function(){return t.leadFormInitializer()}})[this.mode]()}},{key:"newFormInitializer",value:function(){var t,e,n,i,a,r,o,l,s,c=this,u=null===(t=this.tenantConfig)||void 0===t?void 0:t.timeZone,d=null===(e=this.tenantConfig)||void 0===e?void 0:e.language,b=null===(i=null===(n=this.tenantConfig)||void 0===n?void 0:n.usersBodyMeasurementUnits)||void 0===i?void 0:i.heightUnit,p=null===(r=null===(a=this.tenantConfig)||void 0===a?void 0:a.usersBodyMeasurementUnits)||void 0===r?void 0:r.weightUnit;this.patientForm=this._fb.group(Al(u,b,p,d)),null===(s=null===(l=null===(o=this.patientForm)||void 0===o?void 0:o.controls)||void 0===l?void 0:l.email)||void 0===s||s.setAsyncValidators(this._emailValidator.uniqueEmailValidator()),setTimeout(function(){return c.searchAddress()}),this.getLocationFromZipcode(),this.validatePhoneNumberType()}},{key:"existingPatientFormInitializer",value:function(){var t=this;this._patientsService.fetchPatientById(this.patientId).subscribe(function(e){var n,i,a;t.patientForm=t._fb.group(function(t){var e,n,i,a,r,o,l,s,c,u,d,b,p,f,g,h,v,m,S,I,D,y,C,E,X,T,z,_,O=new Ol;for(var M in null==t.availableHours&&(t.availableHours={days:[],fromTime:null,toTime:null}),null==t.patientConsent&&(t.patientConsent={vmConsent:!1,hipaaConsent:!1}),t)null===(e=O[M])||void 0===e||e.setValue(t[M]);return O.notes.setValue(null===(n=null==t?void 0:t.quickNote)||void 0===n?void 0:n.content),O.dateOfBirth.setValue(Object(_l.a)(t.dateOfBirth)),O.location.setValue(t.locationId),O.language.setValue(null===(i=null==t?void 0:t.language)||void 0===i?void 0:i.locale),O.bloodGroup.setValue(null===(a=null==t?void 0:t.healthInfo)||void 0===a?void 0:a.bloodGroup),null===(r=O.weight)||void 0===r||r.setValue({unit:null!==(s=null===(l=null===(o=null==t?void 0:t.healthInfo)||void 0===o?void 0:o.weight)||void 0===l?void 0:l.unit)&&void 0!==s?s:"LBS",value:null!==(d=null===(u=null===(c=null==t?void 0:t.healthInfo)||void 0===c?void 0:c.weight)||void 0===u?void 0:u.value)&&void 0!==d?d:null}),null===(b=O.waist)||void 0===b||b.setValue({unit:null!==(g=null===(f=null===(p=null==t?void 0:t.healthInfo)||void 0===p?void 0:p.waistSize)||void 0===f?void 0:f.unit)&&void 0!==g?g:"CMS",value:null!==(m=null===(v=null===(h=null==t?void 0:t.healthInfo)||void 0===h?void 0:h.waistSize)||void 0===v?void 0:v.value)&&void 0!==m?m:null}),null===(S=O.hip)||void 0===S||S.setValue({unit:null!==(y=null===(D=null===(I=null==t?void 0:t.healthInfo)||void 0===I?void 0:I.hipSize)||void 0===D?void 0:D.unit)&&void 0!==y?y:"CMS",value:null!==(X=null===(E=null===(C=null==t?void 0:t.healthInfo)||void 0===C?void 0:C.hipSize)||void 0===E?void 0:E.value)&&void 0!==X?X:null}),kl(O,null==t?void 0:t.phoneNumbers),Rl(O,null==t?void 0:t.externalSources),function(t,e){var n,i,a;if((null==e?void 0:e.unit)&&"FEET"!==(null==e?void 0:e.unit))null===(n=t.height)||void 0===n||n.setValue({unit:null==e?void 0:e.unit,value1:null!==(i=null==e?void 0:e.value)&&void 0!==i?i:null,value2:null});else{var r=Math.floor((null==e?void 0:e.value)/12);null===(a=t.height)||void 0===a||a.setValue({unit:(null==e?void 0:e.unit)||"FEET",value1:r,value2:(null==e?void 0:e.value)-12*r})}}(O,null===(T=null==t?void 0:t.healthInfo)||void 0===T?void 0:T.height),Pl(O,null==t?void 0:t.address),Nl(O,null===(z=null==t?void 0:t.healthInfo)||void 0===z?void 0:z.habits),function(t,e){(null==e?void 0:e.length)&&e.forEach(function(e){ml.DIABETIC===e.condition&&t.diabetic.setValue({input:!0}),ml.HYPERTENSION===e.condition&&t.hypertension.setValue({input:!0}),ml.HYPERTENSION===e.condition&&e.haveMedication&&t.hypertensionMedication.setValue({input:!0})})}(O,null===(_=null==t?void 0:t.healthInfo)||void 0===_?void 0:_.healthConditions),Wl(O,null==t?void 0:t.insuranceInformation),Vl(O,null==t?void 0:t.patientConsent),wl(O,null==t?void 0:t.availableHours),O}(e)),null===(a=null===(i=null===(n=t.patientForm)||void 0===n?void 0:n.controls)||void 0===i?void 0:i.email)||void 0===a||a.setAsyncValidators(t._emailValidator.uniqueEmailValidator(t.patientId)),setTimeout(function(){var n,i;return null===(i=null===(n=t.patientForm)||void 0===n?void 0:n.controls)||void 0===i?void 0:i.email.setValue(null==e?void 0:e.email)}),setTimeout(function(){return t.searchAddress()}),t.getLocationFromZipcode(),t.validatePhoneNumberType(),t.daysOptions.forEach(function(t){var n,i;return t.checked=null===(i=null===(n=null==e?void 0:e.availableHours)||void 0===n?void 0:n.days)||void 0===i?void 0:i.includes(t.value)})})}},{key:"leadFormInitializer",value:function(){var t=this;this._leadsService.getSpecificLeadForUser(this.patientId).subscribe(function(e){var n,i,a,r,o,l,s,c,u,d,b,p=null===(n=t.tenantConfig)||void 0===n?void 0:n.timeZone,f=null===(i=t.tenantConfig)||void 0===i?void 0:i.language,g=null===(r=null===(a=t.tenantConfig)||void 0===a?void 0:a.usersBodyMeasurementUnits)||void 0===r?void 0:r.heightUnit,h=null===(l=null===(o=t.tenantConfig)||void 0===o?void 0:o.usersBodyMeasurementUnits)||void 0===l?void 0:l.weightUnit;t.patientForm=t._fb.group(function(t,e,n,i,a,r){var o,l,s,c,u,d,b,p,f,g,h,v,m,S,I,D,y,C,E,X,T=Al(e,n,i,a);return null===(o=null==T?void 0:T.firstName)||void 0===o||o.setValue(null===(l=null==t?void 0:t.patientInfo)||void 0===l?void 0:l.firstName),null===(s=null==T?void 0:T.lastName)||void 0===s||s.setValue(null===(c=null==t?void 0:t.patientInfo)||void 0===c?void 0:c.lastName),T.dateOfBirth.setValue(Object(_l.a)(null===(u=null==t?void 0:t.patientInfo)||void 0===u?void 0:u.dateOfBirth)),null===(d=null==T?void 0:T.email)||void 0===d||d.setValue(null===(b=null==t?void 0:t.patientInfo)||void 0===b?void 0:b.email),null===(p=null==T?void 0:T.gender)||void 0===p||p.setValue(null===(f=null==t?void 0:t.patientInfo)||void 0===f?void 0:f.gender),r&&T.location.setValue(r),(null===(h=null===(g=null==t?void 0:t.patientInfo)||void 0===g?void 0:g.locations)||void 0===h?void 0:h.length)&&T.location.setValue(null===(m=null===(v=null==t?void 0:t.patientInfo)||void 0===v?void 0:v.locations[0])||void 0===m?void 0:m.id),Pl(T,null===(S=null==t?void 0:t.patientInfo)||void 0===S?void 0:S.address),Nl(T,null===(I=null==t?void 0:t.patientInfo)||void 0===I?void 0:I.habits),kl(T,null===(D=null==t?void 0:t.patientInfo)||void 0===D?void 0:D.phoneNumbers),Rl(T,null===(y=null==t?void 0:t.patientInfo)||void 0===y?void 0:y.externalSources),Wl(T,null===(C=null==t?void 0:t.patientInfo)||void 0===C?void 0:C.insuranceInformation),Vl(T,null===(E=null==t?void 0:t.patientInfo)||void 0===E?void 0:E.patientConsent),wl(T,null===(X=null==t?void 0:t.patientInfo)||void 0===X?void 0:X.availableHours),T}(e,p,g,h,f,t.siteId)),null===(u=null===(c=null===(s=t.patientForm)||void 0===s?void 0:s.controls)||void 0===c?void 0:c.email)||void 0===u||u.setAsyncValidators(t._emailValidator.uniqueEmailValidator(t.patientId)),t.countryCode=null===(b=null===(d=null==e?void 0:e.patientInfo)||void 0===d?void 0:d.phoneNumbers[0])||void 0===b?void 0:b.countryCode,setTimeout(function(){var n,i,a;return null===(i=null===(n=t.patientForm)||void 0===n?void 0:n.controls)||void 0===i?void 0:i.email.setValue(null===(a=null==e?void 0:e.patientInfo)||void 0===a?void 0:a.email)}),setTimeout(function(){return t.searchAddress()}),t.getLocationFromZipcode(),t.validatePhoneNumberType(),t.daysOptions.forEach(function(t){var n,i,a;return t.checked=null===(a=null===(i=null===(n=null==e?void 0:e.patientInfo)||void 0===n?void 0:n.availableHours)||void 0===i?void 0:i.days)||void 0===a?void 0:a.includes(t.value)})})}},{key:"validatePhoneNumberType",value:function(){var t,e,n,i,a,r,o,l,s,c,u=this;null===(a=null===(i=null===(n=null===(e=null===(t=this.patientForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.primaryNumber)||void 0===n?void 0:n.valueChanges)||void 0===i?void 0:i.pipe(Object(Ve.a)(this.unsubscribed)))||void 0===a||a.subscribe(function(t){var e,n,i,a,r,o;if("LANDLINE"===(null==t?void 0:t.type)){var l=null===(i=null===(n=null===(e=u.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.primaryNumber)||void 0===i?void 0:i.value;l.smsNotification=!1,l.reminderSMSNotification=!1,null===(o=null===(r=null===(a=u.patientForm)||void 0===a?void 0:a.controls)||void 0===r?void 0:r.primaryNumber)||void 0===o||o.patchValue(l,{emitEvent:!1})}}),null===(c=null===(s=null===(l=null===(o=null===(r=this.patientForm)||void 0===r?void 0:r.controls)||void 0===o?void 0:o.secondaryNumber)||void 0===l?void 0:l.valueChanges)||void 0===s?void 0:s.pipe(Object(Ve.a)(this.unsubscribed)))||void 0===c||c.subscribe(function(t){var e,n,i,a,r,o,l,s,c,d,b,p,f,g,h,m,S,I,D,y,C,E,X,T,z,_;if("LANDLINE"===(null==t?void 0:t.type)){var O=null===(i=null===(n=null===(e=u.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.secondaryNumber)||void 0===i?void 0:i.value;O.smsNotification=!1,O.reminderSMSNotification=!1,null===(o=null===(r=null===(a=u.patientForm)||void 0===a?void 0:a.controls)||void 0===r?void 0:r.secondaryNumber)||void 0===o||o.patchValue(O,{emitEvent:!1})}(null===(d=null===(c=null===(s=null===(l=u.patientForm)||void 0===l?void 0:l.controls)||void 0===s?void 0:s.secondaryNumber)||void 0===c?void 0:c.value.number)||void 0===d?void 0:d.length)?null===(g=null===(f=null===(p=null===(b=u.patientForm)||void 0===b?void 0:b.controls)||void 0===p?void 0:p.secondaryNumber)||void 0===f?void 0:f.get("label"))||void 0===g||g.setValidators([v.D.required,v.D.minLength(1)]):null===(I=null===(S=null===(m=null===(h=u.patientForm)||void 0===h?void 0:h.controls)||void 0===m?void 0:m.secondaryNumber)||void 0===S?void 0:S.get("label"))||void 0===I||I.clearValidators(),null===(E=null===(C=null===(y=null===(D=u.patientForm)||void 0===D?void 0:D.controls)||void 0===y?void 0:y.secondaryNumber)||void 0===C?void 0:C.get("label"))||void 0===E||E.markAsDirty({onlySelf:!0}),null===(_=null===(z=null===(T=null===(X=u.patientForm)||void 0===X?void 0:X.controls)||void 0===T?void 0:T.secondaryNumber)||void 0===z?void 0:z.get("label"))||void 0===_||_.updateValueAndValidity({onlySelf:!0})})}},{key:"ngOnInit",value:function(){this._patientsEventLogger.patientActionEvent("","add_patient_dropdown"),this.getAllTags(),this.getAllLocations()}},{key:"getAllTags",value:function(){var t=this;this._tagsService.getTags("PATIENT",-1,0).subscribe(function(e){var n;t.tags=null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.map(function(t){return{key:null==t?void 0:t.name,value:null==t?void 0:t.name}})})}},{key:"getAllLocations",value:function(){var t=this;this._staffService.fetchSitesForStaff().subscribe(function(e){t.locations=null==e?void 0:e.map(function(t){return{key:null==t?void 0:t.id,value:null==t?void 0:t.name,tenantId:null==t?void 0:t.tenantId}})})}},{key:"searchAddress",value:function(){var t=this;this.mapsAPILoader.load().then(function(){var e,n=new google.maps.places.Autocomplete(null===(e=t.searchElementRef)||void 0===e?void 0:e.nativeElement);n.addListener("place_changed",function(){var e=dl.a.mapAddress(n);["streetAddress","streetAddress2","city","state","country","zipCode","lat","lng"].forEach(function(n){var i,a;null===(a=null===(i=t.patientForm)||void 0===i?void 0:i.controls[n])||void 0===a||a.patchValue(e[n],{emitEvent:!1})})})})}},{key:"getLocationFromZipcode",value:function(){var t,e,n,i=this;null===(n=null===(e=null===(t=this.patientForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.zipCode)||void 0===n||n.valueChanges.pipe(Object(en.a)(500),Object(Tl.a)(),Object(bl.filter)(function(t){return(null==t?void 0:t.length)>4}),Object(Le.a)(function(t){return i._googleLocationService.fetchLocationFromZipCode(t)})).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){var e,n,a,r,o,l,s,c,u,d;null===(e=null==t?void 0:t.results)||void 0===e||e.forEach(function(t){var e;null===(e=null==t?void 0:t.address_components)||void 0===e||e.forEach(function(t){var e,n,i;-1!==(null===(e=null==t?void 0:t.types)||void 0===e?void 0:e.findIndex(function(t){return"country"===t}))&&(c=t.long_name),-1!==(null===(n=null==t?void 0:t.types)||void 0===n?void 0:n.findIndex(function(t){return"administrative_area_level_1"===t}))&&(u=t.long_name),-1!==(null===(i=null==t?void 0:t.types)||void 0===i?void 0:i.findIndex(function(t){return"locality"===t}))&&(d=t.long_name)})}),null===(a=null===(n=i.patientForm)||void 0===n?void 0:n.controls)||void 0===a||a.city.setValue(d),null===(o=null===(r=i.patientForm)||void 0===r?void 0:r.controls)||void 0===o||o.state.setValue(u),null===(s=null===(l=i.patientForm)||void 0===l?void 0:l.controls)||void 0===s||s.country.setValue(c)})}},{key:"submit",value:function(){var t,e=this;for(var n in this.patientForm.controls)if("email"!==n){if("primaryNumber"===n||"secondaryNumber"===n)for(var i in this.patientForm.controls[n].controls)this.patientForm.controls[n].controls[i].markAsDirty(),this.patientForm.controls[n].controls[i].updateValueAndValidity();this.patientForm.controls[n].markAsDirty(),this.patientForm.controls[n].updateValueAndValidity()}var a=function(t,n,i,a){var r,o,l,s,c,u,d,b,p,f,g,h,v,m,S,I,D,y,C,E,X,T,z,_,O,M,A,P,N,W,R,x,k,w,V,L,F,U,j,Y,B,H,G,Z,$,q,K,Q,J=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vl.DEFAULT,tt=arguments.length>5?arguments[5]:void 0;return{id:e.patientId,firstName:null===(o=null===(r=null==t?void 0:t.controls)||void 0===r?void 0:r.firstName)||void 0===o?void 0:o.value,lastName:null===(s=null===(l=null==t?void 0:t.controls)||void 0===l?void 0:l.lastName)||void 0===s?void 0:s.value,dateOfBirth:Dl(null===(u=null===(c=null==t?void 0:t.controls)||void 0===c?void 0:c.dateOfBirth)||void 0===u?void 0:u.value),language:{locale:(null===(b=null===(d=null==t?void 0:t.controls)||void 0===d?void 0:d.language)||void 0===b?void 0:b.value)||"en_US"},email:null===(f=null===(p=null==t?void 0:t.controls)||void 0===p?void 0:p.email)||void 0===f?void 0:f.value,username:null===(h=null===(g=null==t?void 0:t.controls)||void 0===g?void 0:g.username)||void 0===h?void 0:h.value,quickNote:null===(m=null===(v=null==t?void 0:t.controls)||void 0===v?void 0:v.notes)||void 0===m?void 0:m.value,encryptedPassword:Xl(null===(I=null===(S=null==t?void 0:t.controls)||void 0===S?void 0:S.email)||void 0===I?void 0:I.value,null===(y=null===(D=null==t?void 0:t.controls)||void 0===D?void 0:D.password)||void 0===y?void 0:y.value),country:null===(E=null===(C=null==t?void 0:t.controls)||void 0===C?void 0:C.country)||void 0===E?void 0:E.value,phoneNumbers:El(i,null===(T=null===(X=null==t?void 0:t.controls)||void 0===X?void 0:X.primaryNumber)||void 0===T?void 0:T.value,null===(_=null===(z=null==t?void 0:t.controls)||void 0===z?void 0:z.secondaryNumber)||void 0===_?void 0:_.value),gender:null===(M=null===(O=null==t?void 0:t.controls)||void 0===O?void 0:O.gender)||void 0===M?void 0:M.value,groupId:null!==(W=null===(N=null===(P=null===(A=null==t?void 0:t.controls)||void 0===A?void 0:A.groupId)||void 0===P?void 0:P.value)||void 0===N?void 0:N.subGroup)&&void 0!==W?W:null===(k=null===(x=null===(R=null==t?void 0:t.controls)||void 0===R?void 0:R.groupId)||void 0===x?void 0:x.value)||void 0===k?void 0:k.group,address:yl(t),timeZone:null===(V=null===(w=null==t?void 0:t.controls)||void 0===w?void 0:w.timeZone)||void 0===V?void 0:V.value,profileTags:null===(F=null===(L=null==t?void 0:t.controls)||void 0===L?void 0:L.profileTags)||void 0===F?void 0:F.value,countryCode:i,locationId:null===(j=null===(U=null==t?void 0:t.controls)||void 0===U?void 0:U.location)||void 0===j?void 0:j.value,hospitalId:null===(B=null===(Y=null==t?void 0:t.controls)||void 0===Y?void 0:Y.hospitalId)||void 0===B?void 0:B.value,insuranceInformation:(Q=null===(G=null===(H=null==t?void 0:t.controls)||void 0===H?void 0:H.insurance)||void 0===G?void 0:G.value,{primaryInsuranceDetails:{carrierName:null==Q?void 0:Q.primaryCarrierName,insuranceId:null==Q?void 0:Q.primaryMemberId,effectiveDate:null==Q?void 0:Q.primaryEffectiveDate,expirationDate:null==Q?void 0:Q.primaryExpirationDate,planId:null==Q?void 0:Q.primaryPlanId},secondaryInsuranceDetails:{carrierName:null==Q?void 0:Q.secondaryCarrierName,insuranceId:null==Q?void 0:Q.secondaryMemberId,effectiveDate:null==Q?void 0:Q.secondaryEffectiveDate,expirationDate:null==Q?void 0:Q.secondaryExpirationDate,planId:null==Q?void 0:Q.secondaryPlanId},tertiaryInsuranceDetails:{carrierName:null==Q?void 0:Q.tertiaryCarrierName,insuranceId:null==Q?void 0:Q.tertiaryMemberId,effectiveDate:null==Q?void 0:Q.tertiaryEffectiveDate,expirationDate:null==Q?void 0:Q.tertiaryExpirationDate,planId:null==Q?void 0:Q.tertiaryPlanId},secondaryInsured:null==Q?void 0:Q.secondaryInsured,tier:null==Q?void 0:Q.tier}),healthInfo:Cl(t),tenantId:a,onboardingType:J,physicianId:tt,availableHours:null===($=null===(Z=null==t?void 0:t.controls)||void 0===Z?void 0:Z.availableHours)||void 0===$?void 0:$.value,patientConsent:null===(K=null===(q=null==t?void 0:t.controls)||void 0===q?void 0:q.patientConsent)||void 0===K?void 0:K.value}}(this.patientForm,0,this.countryCode,null===(t=this.tenantConfig)||void 0===t?void 0:t.tenantId);if("VALID"===this.patientForm.status){"lead"===this.mode&&(a.id=void 0,a.onboardingType=vl.LEAD,a.physicianId=this.physicianId);var r=this.activatedRoute.snapshot.queryParamMap.get("context");this._patientsEventLogger.patientAddActionEvent("",a.firstName+" "+a.lastName,"add_new_patient");var o=this._patientsService.savePatient(a),l=this._patientsService.updatePatient(a);Object(fl.iif)(function(){return!!a.id},l,o).subscribe(function(t){var n,i;if("lead"!==e.mode)if(e._notificationsService.success(e.translatedStrings.get("PATIENT"),e.translatedStrings.get("PATIENT.SAVED_SUCCESSFULLY")),"episode-creation"===r)e._router.navigate(["/patient/view/".concat(t.id)],{queryParams:{tab:"episodes"}});else if(a.id)e._router.navigate(["/patient/view/".concat(t.id)]);else if(e._privilegeUtil.isPrivileged(new Array(ul.a.ASSIGN_PHYSICIAN_TO_PATIENT))){var o={role:w.a.PHYSICIAN};"lead"===e.mode&&(null===(i=null===(n=e.tenantConfig)||void 0===n?void 0:n.redoxConfig)||void 0===i?void 0:i.enabled)&&(o.context="EPISODE_AUTO_CREATION",o.contextMode="lead"),e._router.navigate(["/patient/assign/physician/".concat(t.id)],{queryParams:o})}else e._router.navigate(["/patient/view/".concat(t.id)]);else{var l=e._messageService.loading("Please wait while we create the patient profile..",{nzDuration:0}).messageId;e.convertLead(e.patientId,t.id).subscribe(function(n){var i,a;if(e._messageService.remove(l),e._privilegeUtil.isPrivileged(new Array(ul.a.ASSIGN_PHYSICIAN_TO_PATIENT))){var r={role:w.a.PHYSICIAN};"lead"===e.mode&&(null===(a=null===(i=e.tenantConfig)||void 0===i?void 0:i.redoxConfig)||void 0===a?void 0:a.enabled)&&(r.context="EPISODE_AUTO_CREATION",r.contextMode="lead"),e._router.navigate(["/patient/assign/physician/".concat(t.id)],{queryParams:r})}else e._router.navigate(["/patient/view/".concat(t.id)])})}})}}},{key:"convertLead",value:function(t,e){return this._leadsService.convertLeadToPatient(t,e)}},{key:"resetPreferredPrimaryNumber",value:function(t){if(t){var e=this.patientForm.controls.primaryNumber.value;e.preferred=!1,this.patientForm.controls.primaryNumber.patchValue(e,{emitEvent:!1})}}},{key:"resetPreferredSecondaryNumber",value:function(t){if(t){var e=this.patientForm.controls.secondaryNumber.value;e.preferred=!1,this.patientForm.controls.secondaryNumber.patchValue(e,{emitEvent:!1})}}},{key:"updateAllChecked",value:function(){this.daysIndeterminate=!1,this.daysOptions=this.daysOptions.map(this.daysAllChecked?function(t){return Object.assign(Object.assign({},t),{checked:!0})}:function(t){return Object.assign(Object.assign({},t),{checked:!1})}),this.updateAvailableHours()}},{key:"updateSingleChecked",value:function(){this.daysOptions.every(function(t){return!t.checked})?(this.daysAllChecked=!1,this.daysIndeterminate=!1):this.daysOptions.every(function(t){return t.checked})?(this.daysAllChecked=!0,this.daysIndeterminate=!1):this.daysIndeterminate=!0,this.updateAvailableHours()}},{key:"updateAvailableHours",value:function(){var t=this.daysOptions.filter(function(t){return t.checked}).map(function(t){return t.value});this.patientForm.controls.availableHours.get("days").setValue(t)}},{key:"onTimeChange",value:function(t,e){}}]),n}(D.a)).\u0275fac=function(t){return new(t||Ns)(_.Rb(v.h),_.Rb(m.g),_.Rb(gl.a),_.Rb(hl.a),_.Rb(jl.b),_.Rb(T.a),_.Rb(Yl.e),_.Rb(y.a),_.Rb(zl.a),_.Rb(Be.a),_.Rb(V.b),_.Rb(X.a),_.Rb(m.a),_.Rb(Ze.a),_.Rb(Ll.a),_.Rb(Ul))},Ns.\u0275cmp=_.Lb({type:Ns,selectors:[["app-patient-form"]],viewQuery:function(t,e){var n;1&t&&(_.ed(Jl,1),_.ed(ts,1)),2&t&&(_.Hc(n=_.fc())&&(e.patientFormEl=n.first),_.Hc(n=_.fc())&&(e.searchElementRef=n.first))},features:[_.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["ngNoForm","","id","patientsForm","nz-form","","appScrollToFirstInvalid","",3,"formGroup","ngSubmit","keydown.enter"],["patientFormEl","ngForm"],["nz-typography",""],[1,"divider"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],[3,"nzErrorTip"],["formControlName","firstName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","lastName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","username","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],[3,"nzSuffix"],["nz-input","","formControlName","password","readonly","","onfocus","this.removeAttribute('readonly')",3,"type"],["passwordSuffix",""],["passwordErrors",""],["formControlName","email","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["emailErrors",""],["formControlName","dateOfBirth","nzPlaceHolder","MM-DD-YYYY",3,"nzFormat","nzDisabledDate"],["formControlName","timeZone","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","language","nzPlaceHolder","Select a language"],["nz-col","","nzXs","24","nzSm","12","nzMd","18"],["rows","3","nz-input","","formControlName","notes","placeholder","Patient preferences/conditions etc"],["formControlName","gender"],["nz-radio","","class","radio-label",3,"nzValue",4,"ngFor","ngForOf"],["nz-row","","nzGutter","16","formGroupName","patientConsent"],["nzSize","small","formControlName","vmConsent"],[1,"radio-label"],["nzSize","small","formControlName","hipaaConsent"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[2,"border-bottom","1px solid rgb(233, 233, 233)","padding-bottom","10px"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelOptions","ngModelChange"],["nz-col","","nzSpan","24",2,"margin-top","20px","padding-left","0px !important"],[3,"ngModel","ngModelOptions","ngModelChange"],["formGroupName","availableHours"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%","margin-left","32px"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%"],["nz-col","","nzSpan","11",2,"width","100%","margin-left","32px"],["formControlName","fromTime","nzFormat","h:mm a",3,"nzUse12Hours","ngModelChange"],["nz-col","","nzSpan","11",2,"width","100%"],["formControlName","toTime","nzFormat","h:mm a",3,"nzUse12Hours","ngModelChange"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","formGroupName","primaryNumber",1,"phone-number-divider"],["nz-row",""],["nz-col","","nzXs","24","nzSm","12","nzMd","12"],[3,"nzAddOnBefore"],["formControlName","number","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-typography","","nzType","danger","class","errors",4,"ngIf"],["formControlName","preferred","nz-radio","",3,"nzValue","ngModelChange"],["nz-col","","nzSpan","12"],["formControlName","type"],["nzValue","MOBILE","nzLabel","Mobile"],["nzValue","LANDLINE","nzLabel","Landline"],["nzSize","small","formControlName","audioCallNotification"],[1,"radio-label",3,"ngClass"],["formControlName","label","nz-input",""],["nzSize","small","formControlName","smsNotification"],["nzSize","small","formControlName","reminderSMSNotification"],["nzSize","small","formControlName","videoCallNotification"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","formGroupName","secondaryNumber"],["nz-col","","nzSpan","8"],["nz-col","","nzSpan","4"],["formControlName","streetAddress","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"placeholder"],["searchAddress",""],["formControlName","streetAddress2","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","poBox","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-col","","nzSpan","6"],["formControlName","zipCode","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","country","nz-input","","readonly",""],["formControlName","state","nz-input","","readonly",""],["formControlName","city","nz-input","","readonly",""],["formControlName","location","nzShowSearch",""],[4,"ngFor","ngForOf"],["formControlName","profileTags","nzShowSearch","","nzAllowClear","",3,"nzMode"],["formControlName","hospitalId","nz-input",""],["formControlName","height"],["nz-col","","nzXs","24","nzSm","12","nzMd","6","formGroupName","weight"],["nz-row","","nzGutter","8"],["formControlName","unit",1,"measurement-units"],["nz-col","","nzSpan","16"],["formControlName","value",3,"nzMin"],["nz-col","","nzXs","24","nzSm","12","nzMd","6","formGroupName","waist"],["nz-col","","nzXs","24","nzSm","12","nzMd","6","formGroupName","hip"],["nz-col","","nzXs","24","nzSm","8","nzMd","6"],["formControlName","bloodGroup"],["nz-col","","nzXs","24","nzSm","16","nzMd","18"],["nz-row","","nzGutter","24"],["formControlName","smoking","nz-checkbox","",1,"health-label",3,"nzValue"],["formControlName","diabetic","nz-checkbox","",1,"health-label",3,"nzValue"],["formControlName","hypertension","nz-checkbox","",1,"health-label",3,"nzValue"],["formControlName","hypertensionMedication","nz-checkbox","",1,"health-label",3,"nzValue","nzDisabled"],["formControlName","insurance"],["name","view","size","14px",3,"color","click"],[4,"ngIf"],[3,"nzValue","nzLabel"],["nz-radio","",1,"radio-label",3,"nzValue"],["nz-typography","","nzType","danger",1,"errors"],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"display","flex"],["nz-tooltip","",2,"width","70%",3,"nzTooltipTitle","nzTooltipPlacement"],[4,"isAccessAcrossTenantEnabled"],[2,"width","30%"],["nz-typography","","nzType","secondary","nz-tooltip","",2,"color","var(--primary-color)",3,"nzTooltipTitle"]],template:function(t,e){1&t&&_.Vc(0,Ps,501,267,"div",0),2&t&&_.rc("ngIf",e.patientForm)},directives:[h.q,Bl.b,Hl.a,v.v,v.m,H.a,Z.c,Z.a,Bl.c,Bl.a,v.d,on.b,v.u,v.k,P.a,on.c,on.d,ge.a,Y.d,h.p,F.c,v.n,Gl.a,G.a,q.a,v.x,q.b,Zl.a,F.b,Y.a,h.o,Kl,ql.a,Ql,he.a,wi.d,B.a],pipes:[Qt.a,Jt.a],styles:[".container[_ngcontent-%COMP%]{padding:40px 100px 100px 60px!important}label[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);margin-left:5px;margin-bottom:5px;display:block}.radio-label[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-input-group-addon:empty{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px!important}input[_ngcontent-%COMP%]{border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-select-selector{background:inherit!important}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:var(--light-black)}[_nghost-%COMP%]     .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form label{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);flex-direction:row-reverse}[_nghost-%COMP%]     .ant-checkbox-wrapper{display:inline-flex}[_nghost-%COMP%]     .ant-checkbox-checked{border:none}.measurement-units[_ngcontent-%COMP%]{font:normal normal normal 10px/14px Nunito;color:#8a8a8a;border:1px solid var(--grey)!important}[_nghost-%COMP%]     .measurement-units .ant-select-selector{border:1px solid var(--grey)!important;background:#dbdbdb 0 0 no-repeat padding-box!important}[_nghost-%COMP%]     .ant-input-number{width:100%;background:#fbfbfb 0 0 no-repeat padding-box!important;border:1px solid var(--grey)!important}[_nghost-%COMP%]     .measurement-units .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form-item-explain-error{text-align:right}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.divider[_ngcontent-%COMP%]{height:10px}.health-label[_ngcontent-%COMP%]{display:block;width:100%}[_nghost-%COMP%]     .ant-checkbox{float:right}[_nghost-%COMP%]     .ant-checkbox+span{padding-left:0}[_nghost-%COMP%]     span.ant-radio+*{padding-right:0;padding-left:4px}textarea[_ngcontent-%COMP%]{resize:none;padding:15px;background:#fbfbfb}.phone-number-divider[_ngcontent-%COMP%]{border-right:1px solid #d8d8d8}.errors[_ngcontent-%COMP%]{width:100%;text-align:end}.disabled-text[_ngcontent-%COMP%]{color:#8a8a8a!important}"]}),Ns),Rs=o("IW2O"),xs=o("VGjC"),ks=o("UpsY");function ws(t,e){if(1&t&&(_.Xb(0,"strong",12),_.Xc(1),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.Zc(" ",null==n.assignedPhysicians[0]?null:n.assignedPhysicians[0].fullName," ")}}function Vs(t,e){if(1&t&&(_.Vb(0),_.Xc(1," You can assign / un-assign one or multiple monitoring staff for this patient from the "),_.Xb(2,"strong",12),_.Xc(3),_.jc(4,"userLocation"),_.Wb(),_.Xc(5," site who is assigned to "),_.Vc(6,ws,2,1,"strong",13),_.Ub()),2&t){var n=_.ic();_.Db(3),_.Yc(_.kc(4,2,n.patientLocation)),_.Db(3),_.rc("ngIf",null==n.assignedPhysicians?null:n.assignedPhysicians.length)}}function Ls(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",14),_.ec("click",function(t){return _.Lc(n),_.ic().search(t)}),_.Sb(1,"app-icons",15),_.Wb()}2&t&&(_.Db(1),_.rc("originalStyle",!0))}function Fs(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-empty",16),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("nzNotFoundContent",n.searchKey?"No monitoring staff available matching your search":"No monitoring staff found")}}function Us(t,e){if(1&t&&_.Sb(0,"nz-ribbon",30),2&t){_.ic(2);var n=_.Ic(23);_.rc("nzText",n)}}function js(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",32),_.ec("click",function(){_.Lc(n);var t=_.ic(3).$implicit;return _.ic().assignPrimaryStaff(t.id)}),_.Sb(1,"span",33),_.Wb()}}function Ys(t,e){if(1&t&&(_.Vb(0),_.Vc(1,js,2,0,"button",31),_.Ub()),2&t){var n=_.ic(2).$implicit,i=_.ic();_.Db(1),_.rc("ngIf",!i.primaryStaffs.has(n.id))}}function Bs(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Ys,2,1,"ng-container",4),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("ngIf",null==n?null:n.selected)}}function Hs(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" 0",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount)||0," ")}}function Gs(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount," ")}}function Zs(t,e){1&t&&(_.Vb(0),_.Xc(1," Physician "),_.Ub())}function $s(t,e){1&t&&(_.Vb(0),_.Xc(1," Physicians "),_.Ub())}function qs(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" 0",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0," ")}}function Ks(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount," ")}}function Qs(t,e){1&t&&(_.Vb(0),_.Xc(1," Active Patient "),_.Ub())}function Js(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" Active ",_.kc(2,1,"COMMON.PATIENTS")," "))}var tc=function(t){return{border:t}},ec=function(){return["MARK_AS_PRIMARY_MONITORING_STAFF"]},nc=function(t){return[t]};function ic(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",17),_.Vc(2,Us,1,1,"nz-ribbon",18),_.Xb(3,"div",19),_.Xb(4,"div",20),_.Xb(5,"label",21),_.ec("ngModelChange",function(t){return e.$implicit.selected=t})("ngModelChange",function(t){_.Lc(n);var i=e.$implicit;return _.ic().onStaffSelected(t,i.id)}),_.Wb(),_.Wb(),_.Wb(),_.Xb(6,"h5",22),_.Xb(7,"strong",23),_.Xb(8,"span",24),_.Xc(9),_.jc(10,"titlecase"),_.Wb(),_.Vc(11,Bs,2,1,"ng-container",25),_.Wb(),_.Wb(),_.Xb(12,"h5",26),_.Xc(13),_.Wb(),_.Xb(14,"h5",26),_.jc(15,"userLocations"),_.Xc(16),_.jc(17,"userLocations"),_.Wb(),_.Xb(18,"div",27),_.Xb(19,"div",2),_.Xb(20,"span",28),_.Vc(21,Hs,2,1,"ng-container",4),_.Vc(22,Gs,2,1,"ng-container",4),_.Wb(),_.Xb(23,"span",29),_.Vc(24,Zs,2,0,"ng-container",4),_.Vc(25,$s,2,0,"ng-container",4),_.Wb(),_.Wb(),_.Xb(26,"div",2),_.Xb(27,"span",28),_.Vc(28,qs,2,1,"ng-container",4),_.Vc(29,Ks,2,1,"ng-container",4),_.Wb(),_.Xb(30,"span",29),_.Vc(31,Qs,2,0,"ng-container",4),_.Vc(32,Js,3,3,"ng-container",4),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit,a=_.ic();_.Db(1),_.rc("ngClass",null!=i&&i.assigned?"assigned shadowed":"")("ngStyle",_.yc(33,tc,null!=i&&i.selected?"2px solid #a7c853":"2px solid #ffffff")),_.Db(1),_.rc("ngIf",a.primaryStaffs.has(null==i?null:i.id)),_.Db(3),_.rc("ngModel",i.selected)("nzValue",i.id),_.Db(2),_.rc("ngClass",null!=i&&i.assigned?"assigned":""),_.Db(1),_.rc("nzTooltipTitle",(null==i?null:i.fullName)||"N/A"),_.Db(1),_.Zc(" ",_.kc(10,27,null==i?null:i.fullName)||"N/A"," "),_.Db(2),_.rc("isFeaturePermitted",_.xc(35,ec)),_.Db(1),_.sc("nzTooltipTitle",null==i||null==i.roles[0]?null:i.roles[0].name),_.rc("ngClass",_.yc(36,nc,null!=i&&i.assigned?"assigned":"")),_.Db(1),_.Zc(" ",null==i||null==i.roles[0]?null:i.roles[0].name," "),_.Db(1),_.sc("nzTooltipTitle",_.kc(15,29,null==i?null:i.locations)),_.rc("ngClass",_.yc(38,nc,null!=i&&i.assigned?"assigned":"")),_.Db(2),_.Zc(" ",_.kc(17,31,null==i?null:i.locations)," "),_.Db(4),_.rc("ngClass",null!=i&&i.assigned?"assigned":""),_.Db(1),_.rc("ngIf",((null==i||null==i.clinicianState?null:i.clinicianState.assignedPhysicianCount)||0)<10),_.Db(1),_.rc("ngIf",((null==i||null==i.clinicianState?null:i.clinicianState.assignedPhysicianCount)||0)>=10),_.Db(1),_.rc("ngClass",null!=i&&i.assigned?"assigned":""),_.Db(1),_.rc("ngIf",1===((null==i||null==i.clinicianState?null:i.clinicianState.assignedPhysicianCount)||0)),_.Db(1),_.rc("ngIf",1!==((null==i||null==i.clinicianState?null:i.clinicianState.assignedPhysicianCount)||0)),_.Db(2),_.rc("ngClass",null!=i&&i.assigned?"assigned":""),_.Db(1),_.rc("ngIf",((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)<10),_.Db(1),_.rc("ngIf",((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)>=10),_.Db(1),_.rc("ngClass",null!=i&&i.assigned?"assigned":""),_.Db(1),_.rc("ngIf",1===((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)),_.Db(1),_.rc("ngIf",1!==((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0))}}function ac(t,e){1&t&&(_.Xb(0,"span"),_.Sb(1,"span",34),_.Xc(2," Primary "),_.Wb())}var rc,oc=((rc=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l,s,c,u){var d;return b(this,i),(d=n.call(this))._router=t,d._patientsService=e,d._activatedRoute=a,d._patientsEventLogger=r,d._modalService=o,d._staffService=l,d._dataSharingService=s,d._notificationsService=c,d._userService=u,d.primaryStaffs=new Set,d.patientId=d._activatedRoute.snapshot.params.id,d.patientName=d._activatedRoute.snapshot.params.patientName,d.patientLocation=d._activatedRoute.snapshot.params.location,d.staff=[],d.filteredStaff=[],d.selectedStaffIds=new Set,d.loggedInUser=localStorage.getItem("loggedInUser"),d.loggedInUserRole=localStorage.getItem("loggedInUserRole"),d._routeHelperService.isPrimaryActionTriggered().pipe(Object(bl.filter)(function(t){return!!t}),Object(Rs.takeUntil)(d.unsubscribed)).subscribe(function(){return d.assignStaff()}),d._routeHelperService.isSecondaryActionTriggered().pipe(Object(bl.filter)(function(t){return!!t}),Object(Rs.takeUntil)(d.unsubscribed)).subscribe(function(){return d.viewPatient()}),d._dataSharingService.tenantSettings.pipe(Object(bl.filter)(function(t){return!!t}),Object(Rs.takeUntil)(d.unsubscribed)).subscribe(function(t){return d.tenantConfig=t}),d}return d(i,[{key:"ngOnInit",value:function(){var t=this;w.a.MONITORING_STAFF===this.loggedInUserRole?this._patientsService.bulkAssignStaff(this.patientId,[this.loggedInUser]).subscribe(function(){return t.getDetailsById()}):this.getDetailsById()}},{key:"getPatientDetails",value:function(t){var e=this;this._patientsService.fetchPatientById(t).subscribe(function(t){e.patientInfo=t,e.patientInfo.monitoringStaffs.primaryStaff.forEach(function(t){return e.primaryStaffs.add(t)})})}},{key:"getDetailsById",value:function(){var t=this,e=this._activatedRoute.snapshot.params.id;this.getPatientDetails(e),this._staffService.fetchStaffMemberById(e).subscribe(function(e){t.assignedPhysicians=null==e?void 0:e.assignedUsers[w.a.PHYSICIAN],t.getAllStaff()})}},{key:"getAllStaff",value:function(){var t,n=this;this._staffService.fetchStaffMemberById(null===(t=this.assignedPhysicians[0])||void 0===t?void 0:t.id).subscribe(function(t){var i=null==t?void 0:t.assignedUsers[w.a.MONITORING_STAFF];w.a.MONITORING_STAFF===n.loggedInUserRole&&(i=null==i?void 0:i.filter(function(t){return t.id===n.loggedInUser}),n._userService.getUser(n.loggedInUser).subscribe(function(t){n.loggedInUserPriviliges=t.role.privileges,n.loggedInUserPriviliges.includes("MARK_AS_PRIMARY_MONITORING_STAFF")&&n.primaryStaffs.add(n.loggedInUser)})),n.staff=e(i),n.filteredStaff=e(i),n.prevPrimaryStaff=Array.from(n.primaryStaffs)[0],n.getStaffForPatient()})}},{key:"getStaffForPatient",value:function(){var t=this;this._patientsService.fetchCaretakersForPatient(this.patientId).subscribe(function(n){n.forEach(function(e){var n=t.staff.find(function(t){return t.id===e.id});n&&(n.selected=!0,n.assigned=!0)}),t.assignedStaff=e(n)})}},{key:"onStaffSelected",value:function(t,e){var n=this.staff.filter(function(t){return 1==t.selected}).map(function(t){return t.id});n.length||this.primaryStaffs.clear(),!this.primaryStaffs.size&&t?this.primaryStaffs.add(e):this.primaryStaffs.size&&!t&&null!=this.prevPrimaryStaff?(this.primaryStaffs.delete(e),this.primaryStaffs.add(this.prevPrimaryStaff)):this.prevPrimaryStaff||!this.primaryStaffs.size||t||(this.primaryStaffs.delete(e),this.primaryStaffs.size||this.primaryStaffs.add(n[0]))}},{key:"filterStaff",value:function(t){this.filteredStaff=t?this.staff.filter(function(e){var n,i;return null===(i=null===(n=null==e?void 0:e.fullName)||void 0===n?void 0:n.toLowerCase())||void 0===i?void 0:i.includes(null==t?void 0:t.toLowerCase())}):e(this.staff)}},{key:"assignStaff",value:function(){var t=this,e=this.staff.filter(function(t){return t.selected}).map(function(t){return t.id}),n=this.staff.filter(function(t){return t.selected}).map(function(t){return t.firstName+t.lastName});w.a.MONITORING_STAFF===this.loggedInUserRole?(this._userService.getUser(this.loggedInUser).subscribe(function(t){}),e=[this.loggedInUser]):e=e.filter(function(e){return e!==t.loggedInUser}),e.length?this.assignStaffToPatient(e,n):this._modalService.confirm({nzTitle:"Skip assigning monitoring staff?",nzContent:"To save and proceed, at least one clinician must be assigned",nzOkText:"Skip for now",nzOnOk:function(){t.assignStaffToPatient(e,n)}})}},{key:"assignStaffToPatient",value:function(t,e){var n=this;this._patientsService.bulkAssignStaff(this.patientId,t).subscribe(function(){n._patientsEventLogger.staffAssignEvent(n.patientId,n.patientName,e,"assign_staff"),n.primaryStaffs.size>0?n._patientsService.markPrimaryMonitoringStaff(n.patientId,Array.from(n.primaryStaffs.values()).pop()).subscribe(function(){n.postStaffAssign(t,e)}):n.postStaffAssign(t,e)})}},{key:"postStaffAssign",value:function(t,e){var n,i,a,r,o="".concat(null==t?void 0:t.length," staff assigned");if(t.length||(o="No staff selected!"),t.length||(o="No monitoring staff selected!"),(null==t?void 0:t.length)<(null===(n=this.assignedStaff)||void 0===n?void 0:n.length)&&(o="".concat(Math.abs((null==t?void 0:t.length)-(null===(i=this.assignedStaff)||void 0===i?void 0:i.length))," staff unassigned")),this._notificationsService.info("Monitoring Staff",o),"EPISODE_AUTO_CREATION"===this._activatedRoute.snapshot.queryParams.context){var l=null===(r=null===(a=this.tenantConfig)||void 0===a?void 0:a.episodeBlueprints)||void 0===r?void 0:r.find(function(t){return"CCM"===t.type}),s={context:"AUTO_CREATION",contextMode:this._activatedRoute.snapshot.queryParams.contextMode};return(null==l?void 0:l.id)&&(s.blueprintId=null==l?void 0:l.id),void this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:s})}"lead"===this._activatedRoute.snapshot.queryParams.contextMode?this._router.navigate(["/leads"],{queryParams:{tab:"ACTIVE",status:"ACTIVE"}}):this.viewPatient()}},{key:"viewPatient",value:function(){this._router.navigate(["patient/view/",this.patientId])}},{key:"assignPrimaryStaff",value:function(t){this.primaryStaffs.clear(),this.primaryStaffs.add(t)}}]),i}(D.a)).\u0275fac=function(t){return new(t||rc)(_.Rb(m.g),_.Rb(y.a),_.Rb(m.a),_.Rb(X.a),_.Rb(O.f),_.Rb(T.a),_.Rb(Be.a),_.Rb(V.b),_.Rb(xs.a))},rc.\u0275cmp=_.Lb({type:rc,selectors:[["app-staff-assigner"]],features:[_.Ab],decls:24,vars:17,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-typography",""],[4,"ngIf"],["nz-col","","nzOffset","5","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngFor","ngForOf"],["primary",""],[1,"bold"],["class","bold",4,"ngIf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nzStandalone","","class","primary-ribbon",3,"nzText",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-checkbox","",3,"ngModel","nzValue","ngModelChange"],["nz-typography","",1,"name"],[3,"ngClass"],["nz-tooltip","",2,"pointer-events","auto !important",3,"nzTooltipTitle"],[4,"isFeaturePermitted"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"],["nzStandalone","",1,"primary-ribbon",3,"nzText"],["nz-button","","nzType","text",3,"click",4,"ngIf"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","crown","nzTheme","outline","nz-tooltip","","nzTooltipTitle","Primary Monitoring Staff",2,"font-size","16px","pointer-events","auto !important"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"]],template:function(t,e){if(1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"h4",3),_.Xc(4),_.jc(5,"translate"),_.jc(6,"titlecase"),_.Wb(),_.Xb(7,"p",3),_.Xc(8),_.jc(9,"translate"),_.Sb(10,"br"),_.Sb(11,"br"),_.Vc(12,Vs,7,4,"ng-container",4),_.Wb(),_.Wb(),_.Xb(13,"div",5),_.Xb(14,"nz-input-group",6),_.Xb(15,"input",7),_.ec("ngModelChange",function(t){return e.searchKey=t})("ngModelChange",function(t){return e.filterStaff(t)}),_.jc(16,"translate"),_.Wb(),_.Wb(),_.Vc(17,Ls,2,1,"ng-template",null,8,_.Wc),_.Wb(),_.Wb(),_.Xb(19,"div",9),_.Vc(20,Fs,2,1,"ng-container",4),_.Vc(21,ic,33,40,"ng-container",10),_.Wb(),_.Wb(),_.Vc(22,ac,3,0,"ng-template",null,11,_.Wc)),2&t){var n=_.Ic(18);_.Db(4),_.ad("",_.kc(5,9,"PATIENT.ASSIGN_STAFF")," ",_.kc(6,11,e.patientName),""),_.Db(4),_.Zc(" ",_.kc(9,13,"PATIENT.ASSIGN_STAFF_DESC")," "),_.Db(4),_.rc("ngIf",e.patientLocation),_.Db(2),_.rc("nzAddOnAfter",n),_.Db(1),_.sc("placeholder",_.kc(16,15,"COMMON.SEARCH")),_.rc("ngModel",e.searchKey),_.Db(5),_.rc("ngIf",!(null!=e.filteredStaff&&e.filteredStaff.length)),_.Db(1),_.rc("ngForOf",e.filteredStaff)}},directives:[Z.c,Z.a,H.a,h.q,P.a,on.c,on.b,v.d,v.u,v.x,h.p,M.a,A.a,he.a,Bi.b,h.o,h.r,q.a,wi.d,ln.a,Ni.c,j.a],pipes:[Qt.a,h.A,ks.a,Pa.a],styles:[".search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}#self-assign[_ngcontent-%COMP%]{line-height:2.5}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-26px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}.bold[_ngcontent-%COMP%]{font-weight:bolder}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}.primary-ribbon[_ngcontent-%COMP%]{top:-10px;right:-5px}"]}),rc),lc=o("YRM7"),sc=o("ZE2D");function cc(t,e){if(1&t&&_.Sb(0,"img",22),2&t){var n=_.ic();_.rc("src",null==n.patientInfo?null:n.patientInfo.profilePhotoURL,_.Oc)}}function uc(t,e){1&t&&_.Sb(0,"nz-avatar",23),2&t&&_.rc("nzShape","square")("nzSize",150)("nzIcon","user")}function dc(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.MALE")))}function bc(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.FEMALE")))}function pc(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"GENDER.OTHER")))}function fc(t,e){1&t&&(_.Vb(0),_.Xc(1,"English (United States)"),_.Ub())}function gc(t,e){1&t&&(_.Vb(0),_.Xc(1,"Spanish (United States)"),_.Ub())}function hc(t,e){1&t&&(_.Vb(0),_.Xc(1,"Japanese (Japan)"),_.Ub())}function vc(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.line1,",\xa0 ")}}function mc(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.line2,",\xa0 ")}}function Sc(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.city,",\xa0 ")}}function Ic(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.state,"\xa0 ")}}function Dc(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" -\xa0",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.country," ")}}function yc(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" -\xa0",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.pin," ")}}function Cc(t,e){1&t&&(_.Xb(0,"p"),_.Xc(1," N/A "),_.Wb())}function Ec(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1," | Preferred"),_.Wb())}function Xc(t,e){1&t&&(_.Vb(0),_.Sb(1,"app-icons",24),_.Xc(2," \xa0 "),_.Ub()),2&t&&(_.Db(1),_.rc("originalStyle",!0))}function Tc(t,e){1&t&&(_.Vb(0),_.Sb(1,"app-icons",25),_.Xc(2," \xa0 "),_.Ub()),2&t&&(_.Db(1),_.rc("originalStyle",!0))}function zc(t,e){1&t&&(_.Vb(0),_.Sb(1,"app-icons",26),_.Ub()),2&t&&(_.Db(1),_.rc("originalStyle",!0))}function _c(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1," | Preferred"),_.Wb())}function Oc(t,e){1&t&&(_.Vb(0),_.Sb(1,"app-icons",24),_.Xc(2," \xa0 "),_.Ub()),2&t&&(_.Db(1),_.rc("originalStyle",!0))}function Mc(t,e){1&t&&(_.Vb(0),_.Sb(1,"app-icons",26),_.Ub()),2&t&&(_.Db(1),_.rc("originalStyle",!0))}function Ac(t,e){if(1&t&&(_.Xb(0,"div",9),_.Xb(1,"label"),_.Xc(2),_.jc(3,"titlecase"),_.Vc(4,_c,2,0,"span",16),_.Xc(5," \xa0\xa0 "),_.Vc(6,Oc,3,1,"ng-container",16),_.Vc(7,Mc,2,1,"ng-container",16),_.Wb(),_.Sb(8,"br"),_.Xb(9,"strong"),_.Xc(10),_.Wb(),_.Wb()),2&t){var n=_.ic();_.Db(2),_.Zc(" ",_.kc(3,7,(null==n.patientInfo||null==n.patientInfo.phoneNumbers[1]?null:n.patientInfo.phoneNumbers[1].label)||"Phone Number")," "),_.Db(2),_.rc("ngIf",null==n.patientInfo||null==n.patientInfo.phoneNumbers[1]?null:n.patientInfo.phoneNumbers[1].preferred),_.Db(2),_.rc("ngIf",!(null!=n.patientInfo&&null!=n.patientInfo.phoneNumbers[1]&&null!=n.patientInfo.phoneNumbers[1].notificationConfig.SMS&&n.patientInfo.phoneNumbers[1].notificationConfig.SMS.enabled)),_.Db(1),_.rc("ngIf",!(null!=n.patientInfo&&null!=n.patientInfo.phoneNumbers[1]&&null!=n.patientInfo.phoneNumbers[1].notificationConfig.CALL&&n.patientInfo.phoneNumbers[1].notificationConfig.CALL.enabled)),_.Db(3),_.bd(" ","MOBILE"===(null==n.patientInfo||null==n.patientInfo.phoneNumbers[1]?null:n.patientInfo.phoneNumbers[1].type)?"Mobile":"Landline",": [",null==n.patientInfo||null==n.patientInfo.phoneNumbers[1]?null:n.patientInfo.phoneNumbers[1].countryCode,"] ",null==n.patientInfo||null==n.patientInfo.phoneNumbers[1]?null:n.patientInfo.phoneNumbers[1].number," ")}}function Pc(t,e){1&t&&(_.Xb(0,"div",9),_.Xb(1,"strong"),_.Xc(2,"N/A"),_.Wb(),_.Wb())}function Nc(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",21),_.Xb(2,"label",10),_.Xc(3),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(3),_.Zc("",n.label," ")}}var Wc=function(t){return{color:t}};function Rc(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",21),_.Xb(2,"strong",27),_.Xc(3),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(2),_.rc("ngStyle",_.yc(2,Wc,n.checked?"var(--primary-color)":"var(--error-color)")),_.Db(1),_.Yc(n.checked?"Available":"Not Available")}}var xc,kc=function(){return[32,8]},wc=((xc=function(){function t(){b(this,t),this.daysOptions=[{label:"Mondays",value:"Mondays",checked:!1},{label:"Tuesdays",value:"Tuesdays",checked:!1},{label:"Wednesdays",value:"Wednesdays",checked:!1},{label:"Thursdays",value:"Thursdays",checked:!1},{label:"Fridays",value:"Fridays",checked:!1}]}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.daysOptions.forEach(function(e){var n,i,a;return e.checked=null===(a=null===(i=null===(n=t.patientInfo)||void 0===n?void 0:n.availableHours)||void 0===i?void 0:i.days)||void 0===a?void 0:a.includes(e.value)})}}]),t}()).\u0275fac=function(t){return new(t||xc)},xc.\u0275cmp=_.Lb({type:xc,selectors:[["app-patient-basic-information"]],inputs:{patientInfo:"patientInfo"},decls:159,vars:113,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","8","nzMd","6"],["alt","user-profile",3,"src",4,"ngIf"],[3,"nzShape","nzSize","nzIcon",4,"ngIf"],[1,"patient-status-div"],["isFullName","true",3,"patientStatus"],["nz-col","","nzXs","24","nzSm","16","nzMd","18"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","secondary"],[3,"ngSwitch"],[4,"ngSwitchCase"],["nzDisabled","","nzSize","small",3,"ngModel"],["id","address"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"],["nz-col","","nzSpan","6",4,"ngIf"],["nz-col","","nzSpan","12"],["nz-col","","nzSpan","6","nzOffset","6"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","4"],["alt","user-profile",3,"src"],[3,"nzShape","nzSize","nzIcon"],["name","disabledSms",1,"disabled-icons",3,"originalStyle"],["name","disabledVideo",1,"disabled-icons",3,"originalStyle"],["name","disabledAudio",1,"disabled-icons",3,"originalStyle"],[3,"ngStyle"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"div"),_.Vc(4,cc,1,1,"img",3),_.Vc(5,uc,1,3,"nz-avatar",4),_.Xb(6,"div",5),_.Xc(7),_.jc(8,"translate"),_.Sb(9,"app-patient-status-tag",6),_.Wb(),_.Wb(),_.Wb(),_.Xb(10,"div",7),_.Xb(11,"div",8),_.Xb(12,"div",9),_.Xb(13,"label",10),_.Xc(14),_.jc(15,"translate"),_.Wb(),_.Wb(),_.Xb(16,"div",9),_.Xb(17,"label",10),_.Xc(18),_.jc(19,"translate"),_.Wb(),_.Wb(),_.Xb(20,"div",9),_.Xb(21,"label",10),_.Xc(22),_.jc(23,"translate"),_.Wb(),_.Wb(),_.Xb(24,"div",9),_.Xb(25,"label",10),_.Xc(26,"Patient Insurance Tier"),_.Wb(),_.Wb(),_.Wb(),_.Xb(27,"div",8),_.Xb(28,"div",9),_.Xb(29,"strong"),_.Xc(30),_.Wb(),_.Wb(),_.Xb(31,"div",9),_.Xb(32,"strong",11),_.Vc(33,dc,3,3,"ng-container",12),_.Vc(34,bc,3,3,"ng-container",12),_.Vc(35,pc,3,3,"ng-container",12),_.Wb(),_.Wb(),_.Xb(36,"div",9),_.Xb(37,"strong"),_.Xc(38),_.jc(39,"date"),_.Wb(),_.Wb(),_.Xb(40,"div",9),_.Xb(41,"strong"),_.Xc(42),_.Wb(),_.Wb(),_.Wb(),_.Sb(43,"br"),_.Xb(44,"div",8),_.Xb(45,"div",9),_.Xb(46,"label",10),_.Xc(47),_.jc(48,"translate"),_.Wb(),_.Wb(),_.Xb(49,"div",9),_.Xb(50,"label",10),_.Xc(51),_.jc(52,"translate"),_.Wb(),_.Wb(),_.Xb(53,"div",9),_.Xb(54,"label",10),_.Xc(55),_.jc(56,"translate"),_.Wb(),_.Wb(),_.Xb(57,"div",9),_.Xb(58,"label",10),_.Xc(59),_.jc(60,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(61,"div",8),_.Xb(62,"div",9),_.Xb(63,"strong"),_.Xc(64),_.Wb(),_.Wb(),_.Xb(65,"div",9),_.Xb(66,"strong"),_.Xc(67),_.Wb(),_.Wb(),_.Xb(68,"div",9),_.Xb(69,"strong",11),_.Vc(70,fc,2,0,"ng-container",12),_.Vc(71,gc,2,0,"ng-container",12),_.Vc(72,hc,2,0,"ng-container",12),_.Wb(),_.Wb(),_.Xb(73,"div",9),_.Sb(74,"nz-switch",13),_.Wb(),_.Wb(),_.Sb(75,"br"),_.Xb(76,"div",8),_.Xb(77,"div",9),_.Xb(78,"label",10),_.Xc(79),_.jc(80,"translate"),_.Wb(),_.Wb(),_.Xb(81,"div",9),_.Xb(82,"label",10),_.Xc(83,"Primary Contact Number"),_.Wb(),_.Wb(),_.Xb(84,"div",9),_.Xb(85,"label",10),_.Xc(86,"Secondary Contact Number"),_.Wb(),_.Wb(),_.Xb(87,"div",9),_.Xb(88,"label",10),_.Xc(89),_.jc(90,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(91,"div",8),_.Xb(92,"div",9),_.Xb(93,"strong",14),_.Xb(94,"p",15),_.Vc(95,vc,2,1,"ng-container",16),_.Vc(96,mc,2,1,"ng-container",16),_.Vc(97,Sc,2,1,"ng-container",16),_.Vc(98,Ic,2,1,"ng-container",16),_.Vc(99,Dc,2,1,"ng-container",16),_.Vc(100,yc,2,1,"ng-container",16),_.Wb(),_.Vc(101,Cc,2,0,"p",16),_.Wb(),_.Wb(),_.Xb(102,"div",9),_.Xb(103,"label"),_.Xc(104),_.jc(105,"titlecase"),_.Vc(106,Ec,2,0,"span",16),_.Xc(107," \xa0\xa0 "),_.Vc(108,Xc,3,1,"ng-container",16),_.Vc(109,Tc,3,1,"ng-container",16),_.Vc(110,zc,2,1,"ng-container",16),_.Wb(),_.Sb(111,"br"),_.Xb(112,"strong"),_.Xc(113),_.Wb(),_.Wb(),_.Vc(114,Ac,11,9,"div",17),_.Vc(115,Pc,3,0,"div",17),_.Xb(116,"div",9),_.Sb(117,"nz-switch",13),_.Wb(),_.Wb(),_.Xb(118,"div",8),_.Xb(119,"div",18),_.Xb(120,"label",10),_.Xc(121),_.jc(122,"translate"),_.Wb(),_.Wb(),_.Xb(123,"div",19),_.Xb(124,"label",10),_.Xc(125),_.jc(126,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(127,"div",8),_.Xb(128,"div",18),_.Xb(129,"strong"),_.Xc(130),_.Wb(),_.Wb(),_.Xb(131,"div",19),_.Sb(132,"nz-switch",13),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(133,"nz-divider"),_.Xb(134,"div",1),_.Xb(135,"h4"),_.Xc(136),_.jc(137,"translate"),_.Wb(),_.Wb(),_.Xb(138,"div",1),_.Vc(139,Nc,4,1,"ng-container",20),_.Wb(),_.Xb(140,"div",1),_.Vc(141,Rc,4,4,"ng-container",20),_.Wb(),_.Sb(142,"br"),_.Xb(143,"div",1),_.Xb(144,"div",21),_.Xb(145,"label",10),_.Xc(146,"Available from:"),_.Wb(),_.Wb(),_.Xb(147,"div",21),_.Xb(148,"label",10),_.Xc(149,"Available till:"),_.Wb(),_.Wb(),_.Wb(),_.Xb(150,"div",1),_.Xb(151,"div",21),_.Xb(152,"strong"),_.Xc(153),_.jc(154,"date"),_.Wb(),_.Wb(),_.Xb(155,"div",21),_.Xb(156,"strong"),_.Xc(157),_.jc(158,"date"),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.Db(4),_.rc("ngIf",null==e.patientInfo?null:e.patientInfo.profilePhotoURL),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&e.patientInfo.profilePhotoURL)),_.Db(2),_.Zc(" ",_.kc(8,68,"COMMON.STATUS")," "),_.Db(2),_.rc("patientStatus",null==e.patientInfo?null:e.patientInfo.patientStatus),_.Db(2),_.rc("nzGutter",_.xc(105,kc)),_.Db(3),_.Yc(_.kc(15,70,"PATIENT.FULL_NAME")),_.Db(4),_.Yc(_.kc(19,72,"PATIENT.GENDER")),_.Db(4),_.Yc(_.kc(23,74,"COMMON.DOB")),_.Db(5),_.rc("nzGutter",_.xc(106,kc)),_.Db(3),_.Yc((null==e.patientInfo?null:e.patientInfo.fullName)||"N/A"),_.Db(2),_.rc("ngSwitch",null==e.patientInfo?null:e.patientInfo.gender),_.Db(1),_.rc("ngSwitchCase","MALE"),_.Db(1),_.rc("ngSwitchCase","FEMALE"),_.Db(1),_.rc("ngSwitchCase","OTHER"),_.Db(3),_.Yc(_.lc(39,76,null==e.patientInfo?null:e.patientInfo.dateOfBirth,"MM/dd/yyyy")),_.Db(4),_.Yc(null==e.patientInfo||null==e.patientInfo.insuranceInformation?null:e.patientInfo.insuranceInformation.tier),_.Db(2),_.rc("nzGutter",_.xc(107,kc)),_.Db(3),_.Yc(_.kc(48,79,"COMMON.E-MAIL")),_.Db(4),_.Yc(_.kc(52,81,"COMMON.USERNAME")),_.Db(4),_.Yc(_.kc(56,83,"PATIENT.PREFERRED_LANGUAGE")),_.Db(4),_.Yc(_.kc(60,85,"PATIENT.SMS_CONSENT")),_.Db(2),_.rc("nzGutter",_.xc(108,kc)),_.Db(3),_.Yc((null==e.patientInfo?null:e.patientInfo.email)||"N/A"),_.Db(3),_.Yc((null==e.patientInfo?null:e.patientInfo.username)||"N/A"),_.Db(2),_.rc("ngSwitch",null==e.patientInfo||null==e.patientInfo.language?null:e.patientInfo.language.locale),_.Db(1),_.rc("ngSwitchCase","en_US"),_.Db(1),_.rc("ngSwitchCase","es_US"),_.Db(1),_.rc("ngSwitchCase","ja_JP"),_.Db(2),_.rc("ngModel",null==e.patientInfo||null==e.patientInfo.patientConsent?null:e.patientInfo.patientConsent.vmConsent),_.Db(2),_.rc("nzGutter",_.xc(109,kc)),_.Db(3),_.Yc(_.kc(80,87,"PATIENT.HOME_ADDRESS")),_.Db(10),_.Yc(_.kc(90,89,"PATIENT.VM_CONSENT")),_.Db(2),_.rc("nzGutter",_.xc(110,kc)),_.Db(3),_.wc("nzTooltipTitle","",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line1,"\n                             ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line2," ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.city,"\n                             ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.state," ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.country,"\n                             ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.pin,""),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line1),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line2),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.city),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.state),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.country),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.pin),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.line1||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.line2||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.city||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.state||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.country||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.pin)),_.Db(3),_.Zc(" ",_.kc(105,91,(null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].label)||"Phone Number")," "),_.Db(2),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].preferred),_.Db(2),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[0]&&null!=e.patientInfo.phoneNumbers[0].notificationConfig.SMS&&e.patientInfo.phoneNumbers[0].notificationConfig.SMS.enabled)),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[0]&&null!=e.patientInfo.phoneNumbers[0].notificationConfig.VIDEO_CALL&&e.patientInfo.phoneNumbers[0].notificationConfig.VIDEO_CALL.enabled)),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[0]&&null!=e.patientInfo.phoneNumbers[0].notificationConfig.CALL&&e.patientInfo.phoneNumbers[0].notificationConfig.CALL.enabled)),_.Db(3),_.bd(" ","MOBILE"===(null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].type)?"Mobile":"Landline",": [",null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].countryCode,"] ",null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].number," "),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.phoneNumbers[1]?null:e.patientInfo.phoneNumbers[1].number),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[1]&&e.patientInfo.phoneNumbers[1].number)),_.Db(2),_.rc("ngModel",null==e.patientInfo||null==e.patientInfo.patientConsent?null:e.patientInfo.patientConsent.vmConsent),_.Db(1),_.rc("nzGutter",_.xc(111,kc)),_.Db(3),_.Yc(_.kc(122,93,"PATIENT.NOTES")),_.Db(4),_.Yc(_.kc(126,95,"PATIENT.HIPAA_CONSENT")),_.Db(2),_.rc("nzGutter",_.xc(112,kc)),_.Db(3),_.Yc((null==e.patientInfo||null==e.patientInfo.quickNote?null:e.patientInfo.quickNote.content)||"N/A"),_.Db(2),_.rc("ngModel",null==e.patientInfo||null==e.patientInfo.patientConsent?null:e.patientInfo.patientConsent.hipaaConsent),_.Db(4),_.Yc(_.kc(137,97,"PATIENT.AVAILABLE_HOURS")),_.Db(3),_.rc("ngForOf",e.daysOptions),_.Db(2),_.rc("ngForOf",e.daysOptions),_.Db(12),_.Yc(_.lc(154,99,null==e.patientInfo||null==e.patientInfo.availableHours?null:e.patientInfo.availableHours.fromTime,"HH:mm a")||"N/A"),_.Db(4),_.Yc(_.lc(158,102,null==e.patientInfo||null==e.patientInfo.availableHours?null:e.patientInfo.availableHours.toTime,"HH:mm a")||"N/A"))},directives:[Z.c,Z.a,h.q,Li.a,H.a,h.s,h.t,Gl.a,v.u,v.x,wi.d,G.a,h.p,sc.a,he.a,h.r],pipes:[Qt.a,h.e,h.A],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}[_nghost-%COMP%]     .ant-avatar{background:#dddfe1}img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:5px}#address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.patient-status-div[_ngcontent-%COMP%]{margin-top:12px;width:150px;text-align:center;padding:5px}.patient-status-div[_ngcontent-%COMP%]   app-patient-status-tag[_ngcontent-%COMP%]{margin-left:3px}app-icons[_ngcontent-%COMP%]{vertical-align:middle}.disabled-icons[_ngcontent-%COMP%]{pointer-events:none}"]}),xc);function Vc(t,e){if(1&t&&(_.Xb(0,"span"),_.Xc(1),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.Yc((null==n?null:n.sourceId)||"N/A")}}function Lc(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xb(1,"span",6),_.Vc(2,Vc,2,1,"span",7),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngSwitch",null==n?null:n.source),_.Db(1),_.rc("ngSwitchCase","HOSPITAL_INTERNAL_ID")}}function Fc(t,e){1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2,"N/A"),_.Wb(),_.Ub())}function Uc(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"nz-tag",8),_.Xc(2),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzColor","green"),_.Db(1),_.Yc(n)}}function jc(t,e){1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2,"N/A"),_.Wb(),_.Ub())}var Yc,Bc=function(){return[32,8]},Hc=((Yc=function t(){b(this,t)}).\u0275fac=function(t){return new(t||Yc)},Yc.\u0275cmp=_.Lb({type:Yc,selectors:[["app-patient-organisation-information"]],inputs:{patientInfo:"patientInfo"},decls:25,vars:17,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"nzColor"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"label",3),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Xb(6,"div",2),_.Xb(7,"label",3),_.Xc(8,"Site"),_.Wb(),_.Wb(),_.Xb(9,"div",2),_.Xb(10,"label",3),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(13,"div",1),_.Xb(14,"div",2),_.Vc(15,Lc,3,2,"strong",4),_.Vc(16,Fc,3,0,"ng-container",5),_.Wb(),_.Xb(17,"div",2),_.Xb(18,"strong"),_.Xc(19),_.jc(20,"userLocations"),_.Wb(),_.Wb(),_.Xb(21,"div",2),_.Vc(22,Uc,3,2,"ng-container",4),_.Vc(23,jc,3,0,"ng-container",5),_.Wb(),_.Wb(),_.Wb(),_.Sb(24,"br")),2&t&&(_.Db(1),_.rc("nzGutter",_.xc(15,Bc)),_.Db(3),_.Yc(_.kc(5,9,"PATIENT.ID")),_.Db(7),_.Yc(_.kc(12,11,"COMMON.PROFILETAG")),_.Db(2),_.rc("nzGutter",_.xc(16,Bc)),_.Db(2),_.rc("ngForOf",null==e.patientInfo?null:e.patientInfo.externalSources),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.externalSources&&e.patientInfo.externalSources.length)),_.Db(3),_.Yc(_.kc(20,13,null==e.patientInfo?null:e.patientInfo.locations)),_.Db(3),_.rc("ngForOf",null==e.patientInfo?null:e.patientInfo.profileTags),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.profileTags&&e.patientInfo.profileTags.length)))},directives:[Z.c,Z.a,H.a,h.p,h.q,h.s,h.t,za.a],pipes:[Qt.a,Pa.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}"]}),Yc),Gc=o("3CdQ");function Zc(t,e){1&t&&(_.Xb(0,"button",10),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc("+ ",_.kc(2,1,"COMMON.ADD"),""))}function $c(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.Zc(" ",null==n?null:n.name," \xa0 ")}}function qc(t,e){1&t&&(_.Vb(0),_.Xc(1,", "),_.Ub())}function Kc(t,e){if(1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"titlecase"),_.jc(3,"userLocation"),_.Vc(4,qc,2,0,"ng-container",18),_.Wb()),2&t){var n=_.ic(),i=n.$implicit,a=n.index,r=_.ic().$implicit;_.Db(1),_.Zc(" ",_.kc(2,2,_.kc(3,4,null==i?null:i.id)),""),_.Db(3),_.rc("ngIf",a!==(null==r||null==r.locations?null:r.locations.length)-1)}}function Qc(t,e){if(1&t&&(_.Xb(0,"strong"),_.Vc(1,Kc,5,6,"span",18),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngIf",null==n?null:n.defaultLocation)}}function Jc(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",11),_.Xb(1,"nz-card",12),_.Xb(2,"div",13),_.Xb(3,"nz-tag",14),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic().showPhysicianUnassignModal(t)}),_.Xc(4),_.jc(5,"translate"),_.Sb(6,"app-icons",15),_.Wb(),_.Wb(),_.Xb(7,"div"),_.Xb(8,"strong"),_.Xc(9),_.Wb(),_.Xb(10,"p",16),_.Vc(11,$c,2,1,"ng-container",17),_.Wb(),_.Xb(12,"p"),_.Sb(13,"br"),_.Xb(14,"label"),_.Xc(15,"Site: "),_.Wb(),_.Vc(16,Qc,2,1,"strong",17),_.Wb(),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=e.$implicit;_.Db(1),_.rc("nzHoverable",!0),_.Db(2),_.rc("nzColor","red"),_.Db(1),_.Zc(" ",_.kc(5,6,"COMMON.REMOVE")," "),_.Db(5),_.Yc(null==i?null:i.fullName),_.Db(2),_.rc("ngForOf",null==i?null:i.roles),_.Db(5),_.rc("ngForOf",null==i?null:i.locations)}}function tu(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"h3",19),_.Xc(2,"Un-assign physician"),_.Wb(),_.Xb(3,"p"),_.Xb(4,"strong"),_.Xc(5),_.jc(6,"titlecase"),_.Wb(),_.Xc(7," is registered under "),_.Xb(8,"strong"),_.Xc(9),_.Wb(),_.Xc(10,". "),_.Wb(),_.Xb(11,"p"),_.Xc(12),_.jc(13,"titlecase"),_.Wb(),_.Xb(14,"p"),_.Xc(15," You can then proceed to assign another physician. "),_.Wb(),_.Xb(16,"button",20),_.ec("click",function(){return _.Lc(n),_.ic().isUnassignerVisible=!1}),_.Xc(17,"Okay"),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(5),_.Yc(_.kc(6,3,null==i.patientInfo?null:i.patientInfo.fullName)),_.Db(4),_.Yc(null==i.selectedPhysician?null:i.selectedPhysician.fullName),_.Db(3),_.Zc(" If ",_.kc(13,5,null==i.patientInfo?null:i.patientInfo.fullName)," is not onboarded by this physician and the status is marked as 'Not Onboarded', the physician and all of the current monitoring staff will be unassigned. ")}}var eu,nu,iu=function(){return[32,8]},au=((nu=function(){function t(e,n){b(this,t),this._staffService=e,this._physiciansService=n}return d(t,[{key:"ngOnInit",value:function(){this.getPhysiciansForPatient()}},{key:"getPhysiciansForPatient",value:function(){var t=this;this._staffService.fetchStaffByPatientId(this.patientInfo.id).subscribe(function(e){t.physicians=null==e?void 0:e.assignedToUsers.PHYSICIAN,t.physicians&&t._physiciansService.setPhysicianName(JSON.stringify(t.physicians[0].fullName))})}},{key:"showPhysicianUnassignModal",value:function(t){this.selectedPhysician=t,this.isUnassignerVisible=!0}}]),t}()).\u0275fac=function(t){return new(t||nu)(_.Rb(T.a),_.Rb(Gc.a))},nu.\u0275cmp=_.Lb({type:nu,selectors:[["app-patient-physicians"]],inputs:{patientInfo:"patientInfo"},decls:13,vars:9,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","7","nzSm","5","nzMd","3"],[1,"physician-action"],[3,"routerLink"],["nz-button","","nzType","primary",4,"ngIf"],["nz-col","","nzXs","17","nzSm","19","nzMd","21"],["nz-col","","nzXs","24","nzSm","12","nzMd","7","class","physician",4,"ngFor","ngForOf"],["nzWidth","330px",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["nz-button","","nzType","primary"],["nz-col","","nzXs","24","nzSm","12","nzMd","7",1,"physician"],[3,"nzHoverable"],[1,"staff-remover"],[3,"nzColor","click"],["name","delete","size","10px","color","red","altColor","red"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-typography",""],["id","modal-cancel","nz-button","","nzType","primary","nzSize","large",3,"click"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"div",3),_.Xb(4,"strong"),_.Xc(5,"Physicians"),_.Wb(),_.Xb(6,"span",4),_.Vc(7,Zc,3,3,"button",5),_.Wb(),_.Wb(),_.Wb(),_.Xb(8,"div",6),_.Xb(9,"div",1),_.Vc(10,Jc,17,8,"div",7),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(11,"nz-modal",8),_.ec("nzVisibleChange",function(t){return e.isUnassignerVisible=t})("nzOnCancel",function(){return e.isUnassignerVisible=!1}),_.Vc(12,tu,18,7,"ng-container",9),_.Wb()),2&t&&(_.Db(1),_.rc("nzGutter",_.xc(7,iu)),_.Db(5),_.tc("routerLink","/patient/assign/physician/",null==e.patientInfo?null:e.patientInfo.id,""),_.Db(1),_.rc("ngIf",!(null!=e.physicians&&e.physicians.length)),_.Db(2),_.rc("nzGutter",_.xc(8,iu)),_.Db(1),_.rc("ngForOf",e.physicians),_.Db(1),_.rc("nzVisible",e.isUnassignerVisible)("nzFooter",null))},directives:[Z.c,Z.a,m.h,h.q,h.p,O.a,O.b,M.a,A.a,P.a,Rn.a,za.a,he.a,H.a],pipes:[Qt.a,h.A,ks.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}.container[_ngcontent-%COMP%]{padding:2% 10px!important;background:#e6e8eb 0 0 no-repeat padding-box;border:1px solid #e6e8eb;border-radius:15px}nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:16px 0 16px 16px}.physician-action[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.physician-action[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px;display:block}.physician-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:23px;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:5px;line-height:0}nz-tag[_ngcontent-%COMP%]{width:60px;height:16px;cursor:pointer;font:normal normal 600 8px/11px Nunito}.physician[_ngcontent-%COMP%]   .staff-remover[_ngcontent-%COMP%]{visibility:hidden;float:right}.physician[_ngcontent-%COMP%]:hover   .staff-remover[_ngcontent-%COMP%]{visibility:visible}h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}#modal-cancel[_ngcontent-%COMP%]{width:80%;margin:20px auto 0;display:block}"]}),nu),ru=((eu=function(){function t(e,n){b(this,t),this._modalRef=e,this._router=n}return d(t,[{key:"cancel",value:function(){this._modalRef.destroy()}},{key:"assignPhysician",value:function(){var t;this._router.navigate(["/patient/assign/physician/".concat(null===(t=this.patientInfo)||void 0===t?void 0:t.id)]),this._modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||eu)(_.Rb(O.e),_.Rb(m.g))},eu.\u0275cmp=_.Lb({type:eu,selectors:[["app-assign-physician-alert"]],inputs:{patientInfo:"patientInfo"},decls:10,vars:1,consts:[[1,"btn-container"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",2,"margin-left","10px",3,"click"]],template:function(t,e){1&t&&(_.Vb(0),_.Xb(1,"h3"),_.Xc(2,"Assign Physician"),_.Wb(),_.Xb(3,"p"),_.Xc(4),_.Wb(),_.Xb(5,"div",0),_.Xb(6,"button",1),_.ec("click",function(){return e.cancel()}),_.Xc(7,"Cancel "),_.Wb(),_.Xb(8,"button",2),_.ec("click",function(){return e.assignPhysician()}),_.Xc(9,"Assign "),_.Wb(),_.Wb(),_.Ub()),2&t&&(_.Db(4),_.Zc(" Please assign a physician to ",null==e.patientInfo?null:e.patientInfo.fullName,". Once a physician is assigned, you can proceed to assign one or more monitoring staff. "))},directives:[M.a,A.a,P.a],styles:[".btn-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end}"]}),eu),ou=o("KupA");function lu(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",8),_.ec("click",function(){_.Lc(n);var t=_.ic();return t.assignClinicianForPatientEvent(null==t.patientInfo?null:t.patientInfo.id)}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc("+ ",_.kc(2,1,"COMMON.ADD"),""))}function su(t,e){if(1&t&&_.Sb(0,"nz-ribbon",19),2&t){_.ic(3);var n=_.Ic(11);_.rc("nzText",n)}}function cu(t,e){if(1&t){var n=_.Yb();_.Xb(0,"a",21),_.ec("nzOnConfirm",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic(2).unassignClinicianForPatient(null==t?null:t.id)}),_.Xb(1,"nz-tag",22),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",23),_.Wb(),_.Wb()}2&t&&(_.Db(1),_.rc("nzColor","red"),_.Db(1),_.Zc(" ",_.kc(3,2,"COMMON.REMOVE")," "))}var uu=function(){return["DELETE_STAFF"]};function du(t,e){1&t&&(_.Vb(0),_.Vc(1,cu,5,4,"a",20),_.Ub()),2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,uu)))}function bu(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"button",24),_.ec("click",function(){_.Lc(n);var t=_.ic(2).$implicit;return _.ic(2).markAsPrimary(null==t?null:t.id,null==t?null:t.fullName)}),_.Sb(2,"span",25),_.Wb(),_.Ub()}}function pu(t,e){if(1&t&&(_.Vb(0),_.Vc(1,bu,3,0,"ng-container",14),_.Ub()),2&t){var n=_.ic().$implicit,i=_.ic(2);_.Db(1),_.rc("ngIf",!i.primaryMonitoringStaffs.has(null==n?null:n.id))}}function fu(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.Zc(" ",null==n?null:n.name," \xa0 ")}}function gu(t,e){if(1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"titlecase"),_.jc(3,"userLocation"),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",_.kc(2,1,_.kc(3,3,null==n?null:n.id))," ")}}function hu(t,e){if(1&t&&(_.Xb(0,"strong"),_.Vc(1,gu,4,5,"span",14),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngIf",null==n?null:n.defaultLocation)}}var vu=function(){return["MARK_AS_PRIMARY_MONITORING_STAFF"]};function mu(t,e){if(1&t&&(_.Xb(0,"div",10),_.Vc(1,su,1,1,"nz-ribbon",11),_.Xb(2,"nz-card",12),_.Xb(3,"div",13),_.Vc(4,du,2,2,"ng-container",14),_.Wb(),_.Xb(5,"div"),_.Xb(6,"strong"),_.Xb(7,"span",15),_.Xc(8),_.jc(9,"titlecase"),_.Wb(),_.Vc(10,pu,2,1,"ng-container",16),_.Wb(),_.Xb(11,"p",17),_.Vc(12,fu,2,1,"ng-container",18),_.Wb(),_.Xb(13,"p"),_.Sb(14,"br"),_.Xb(15,"label"),_.Xc(16,"Site: "),_.Wb(),_.Xc(17," \xa0 "),_.Vc(18,hu,2,1,"strong",18),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(1),_.rc("ngIf",i.primaryMonitoringStaffs.has(null==n?null:n.id)),_.Db(1),_.rc("nzHoverable",!0),_.Db(2),_.rc("ngIf",!i.primaryMonitoringStaffs.has(null==n?null:n.id)),_.Db(3),_.rc("nzTooltipTitle",(null==n?null:n.fullName)||"N/A"),_.Db(1),_.Zc(" ",_.kc(9,8,null==n?null:n.fullName)||"N/A"," "),_.Db(2),_.rc("isFeaturePermitted",_.xc(10,vu)),_.Db(2),_.rc("ngForOf",null==n?null:n.roles),_.Db(6),_.rc("ngForOf",null==n?null:n.locations)}}var Su=function(){return[32,8]};function Iu(t,e){if(1&t&&(_.Xb(0,"div",1),_.Vc(1,mu,19,11,"div",9),_.Wb()),2&t){var n=_.ic();_.rc("nzGutter",_.xc(2,Su)),_.Db(1),_.rc("ngForOf",n.clinicians)}}function Du(t,e){1&t&&(_.Xb(0,"span"),_.Sb(1,"span",26),_.Xc(2," Primary "),_.Wb())}var yu,Cu=((yu=function(){function t(e,n,i,a,r){b(this,t),this._patientsService=e,this._notificationsService=n,this._patientsEventLogger=i,this._modalService=a,this._router=r,this.primaryMonitoringStaffs=new Set,this.refresh=new _.n}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.getCliniciansForPatient(),this.patientInfo.monitoringStaffs.primaryStaff.forEach(function(e){return t.primaryMonitoringStaffs.add(e)})}},{key:"getCliniciansForPatient",value:function(){var t=this;this._patientsService.fetchCaretakersForPatient(this.patientInfo.id).subscribe(function(e){t.clinicians=null==e?void 0:e.filter(function(t){var e;return-1!==(null===(e=null==t?void 0:t.roles)||void 0===e?void 0:e.findIndex(function(t){return t.type===w.a.MONITORING_STAFF}))})})}},{key:"assignClinicianForPatientEvent",value:function(t){var e,n,i;Array.from(this.patientInfo.physicianStaffs.primaryStaff.values()).length?(this._router.navigate(["/patient/assign-staff/".concat(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"/").concat(null===(n=this.patientInfo)||void 0===n?void 0:n.locationId,"/").concat(null===(i=this.patientInfo)||void 0===i?void 0:i.fullName)]),this._patientsEventLogger.patientDetailsActionEvent(t,"add_monitoring_staff")):this._modalService.create({nzContent:ru,nzComponentParams:{patientInfo:this.patientInfo},nzFooter:null,nzMaskClosable:!1})}},{key:"unassignClinicianForPatient",value:function(t){var e=this;this._patientsEventLogger.patientDetailsActionEvent(this.patientInfo.id,"remove_monitoring_staff"),this._patientsService.unAssignClinician(this.patientInfo.id,t).subscribe(function(){e.getCliniciansForPatient(),e._notificationsService.success("Patient","1 staff member unassigned!")})}},{key:"markAsPrimary",value:function(t,e){var n=this;this._modalService.confirm({nzTitle:"Are you sure you want to assign "+e+" as the new primary monitoring staff?",nzContent:"<i>Note: A patient can have only one primary monitoring staff. </i>",nzOkText:"I'm sure",nzOnOk:function(){n._patientsService.markPrimaryMonitoringStaff(n.patientInfo.id,t).subscribe(function(){n._notificationsService.success("Patient","Assigned "+e+" as primary monitoring staff."),n.refresh.emit(!0)})}})}}]),t}()).\u0275fac=function(t){return new(t||yu)(_.Rb(y.a),_.Rb(V.b),_.Rb(X.a),_.Rb(O.f),_.Rb(m.g))},yu.\u0275cmp=_.Lb({type:yu,selectors:[["app-patient-clinicians-information"]],inputs:{patientInfo:"patientInfo"},outputs:{refresh:"refresh"},decls:12,vars:7,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","7","nzSm","5","nzMd","3"],[1,"staff-action"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-col","","nzXs","17","nzSm","19","nzMd","21"],["nz-row","",3,"nzGutter",4,"ngIf"],["primary",""],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","7","class","staff",4,"ngFor","ngForOf"],["nz-col","","nzXs","24","nzSm","12","nzMd","7",1,"staff"],["nzStandalone","","style","top: 0%;",3,"nzText",4,"ngIf"],[2,"height","150px",3,"nzHoverable"],[1,"staff-remover"],[4,"ngIf"],["nz-tooltip","",2,"pointer-events","auto !important",3,"nzTooltipTitle"],[4,"isFeaturePermitted"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],["nzStandalone","",2,"top","0%",3,"nzText"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to un-assign this staff member?",3,"nzOnConfirm",4,"isFeaturePermitted"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to un-assign this staff member?",3,"nzOnConfirm"],[3,"nzColor"],["name","delete","size","10px","color","red","altColor","red"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","crown","nzTheme","outline","nz-tooltip","","nzTooltipTitle","Primary Monitoring Staff",2,"font-size","16px","pointer-events","auto !important"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"div",3),_.Xb(4,"strong"),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Vc(7,lu,3,3,"button",4),_.Wb(),_.Wb(),_.Xb(8,"div",5),_.Vc(9,Iu,2,3,"div",6),_.Wb(),_.Wb(),_.Wb(),_.Vc(10,Du,3,0,"ng-template",null,7,_.Wc)),2&t&&(_.Db(1),_.rc("nzGutter",_.xc(6,Su)),_.Db(4),_.Yc(_.kc(6,4,"PATIENT.MONITORING_STAFF")),_.Db(2),_.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(2),_.rc("ngIf",!e.loadComponent))},directives:[Z.c,Z.a,h.q,M.a,A.a,P.a,h.p,Rn.a,wi.d,ln.a,H.a,Ni.c,ou.a,za.a,he.a,j.a],pipes:[Qt.a,h.A,ks.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}.container[_ngcontent-%COMP%]{padding:2% 10px!important;background:#e6e8eb 0 0 no-repeat padding-box;border:1px solid #e6e8eb;border-radius:15px}nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:16px 0 16px 16px}nz-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{text-align:right}.staff-action[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.staff-action[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px;display:block}.staff-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:23px;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:5px;line-height:0}nz-tag[_ngcontent-%COMP%]{width:60px;height:16px;cursor:pointer;font:normal normal 600 8px/11px Nunito}app-icons[_ngcontent-%COMP%]{vertical-align:text-bottom}.staff[_ngcontent-%COMP%]   .staff-remover[_ngcontent-%COMP%]{visibility:hidden}.staff[_ngcontent-%COMP%]:hover   .staff-remover[_ngcontent-%COMP%]{visibility:visible}"]}),yu),Eu=o("8VAF");function Xu(t,e){if(1&t&&_.Sb(0,"nz-option",10),2&t){var n=e.$implicit;_.sc("nzLabel",(null==n?null:n.code)+" "+(null==n?null:n.description)),_.rc("nzValue",n)}}function Tu(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Xu,1,2,"nz-option",9),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngForOf",n.options)}}function zu(t,e){1&t&&(_.Xb(0,"nz-option",11),_.Sb(1,"nz-spin",12),_.Xc(2," Loading codes based on input... "),_.Wb())}function _u(t,e){1&t&&(_.Xb(0,"nz-option",11),_.Xc(1," Enter few characters to search... "),_.Wb())}function Ou(t,e){if(1&t&&(_.Xb(0,"nz-card"),_.Xb(1,"div",1),_.Xb(2,"div",13),_.Xb(3,"strong"),_.Xc(4,"Code:"),_.Wb(),_.Xb(5,"input",14),_.ec("ngModelChange",function(t){return e.$implicit.code=t}),_.Wb(),_.Wb(),_.Xb(6,"div",15),_.Xb(7,"strong"),_.Xc(8,"Description:"),_.Wb(),_.Xb(9,"input",16),_.ec("ngModelChange",function(t){return e.$implicit.description=t}),_.Wb(),_.Wb(),_.Xb(10,"div",17),_.Xb(11,"strong"),_.Xc(12,"Type:"),_.Wb(),_.Xb(13,"nz-select",18),_.ec("ngModelChange",function(t){return e.$implicit.type=t}),_.Sb(14,"nz-option",19),_.Sb(15,"nz-option",20),_.Sb(16,"nz-option",21),_.Wb(),_.Wb(),_.Xb(17,"div",17),_.Xb(18,"strong"),_.Xc(19,"Status:"),_.Wb(),_.Xb(20,"nz-select",22),_.ec("ngModelChange",function(t){return e.$implicit.status=t}),_.Sb(21,"nz-option",23),_.Sb(22,"nz-option",24),_.Sb(23,"nz-option",25),_.Wb(),_.Wb(),_.Wb(),_.Sb(24,"br"),_.Xb(25,"div",1),_.Xb(26,"div",13),_.Xb(27,"strong"),_.Xc(28,"Category:"),_.Wb(),_.Xb(29,"input",26),_.ec("ngModelChange",function(t){return e.$implicit.category=t}),_.Wb(),_.Wb(),_.Xb(30,"div",15),_.Xb(31,"strong"),_.Xc(32,"Health Status:"),_.Wb(),_.Xb(33,"input",27),_.ec("ngModelChange",function(t){return e.$implicit.healthStatus=t}),_.Wb(),_.Wb(),_.Xb(34,"div",17),_.Xb(35,"strong"),_.Xc(36,"Start Date:"),_.Wb(),_.Xb(37,"nz-date-picker",28),_.ec("ngModelChange",function(t){return e.$implicit.startDateTime=t}),_.Wb(),_.Wb(),_.Xb(38,"div",17),_.Xb(39,"strong"),_.Xc(40,"End Date:"),_.Wb(),_.Xb(41,"nz-date-picker",29),_.ec("ngModelChange",function(t){return e.$implicit.endDateTime=t}),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(5),_.rc("ngModel",n.code),_.Db(4),_.rc("ngModel",n.description),_.Db(4),_.rc("ngModel",n.type),_.Db(7),_.rc("ngModel",n.status),_.Db(9),_.rc("ngModel",n.category),_.Db(4),_.rc("ngModel",n.healthStatus),_.Db(4),_.rc("ngModel",n.startDateTime),_.Db(4),_.rc("ngModel",n.endDateTime)}}var Mu,Au,Pu=((Au=function(){function t(e,n,i,a,r){var o=this;b(this,t),this._icdCodesService=e,this._patientService=n,this._dataSharingService=i,this._notificationService=a,this._modalRef=r,this.dxCodes=[],this.options=[],this.initialState=!0,this._dataSharingService.tenantSettings.subscribe(function(t){var e;t&&(o.redoxEnabled=null===(e=null==t?void 0:t.redoxConfig)||void 0===e?void 0:e.enabled)})}return d(t,[{key:"search",value:function(t){var e=this;t?(this.isLoading=!0,this.initialState=!1,this._icdCodesService.getICDCodes(t).subscribe(function(t){(null==t?void 0:t.length)&&(e.options=[],t[3].forEach(function(t){e.options.push({code:t[0],description:t[1],type:na.a.UNDETERMINED,status:"Active"})})),e.isLoading=!1})):this.initialState=!0}},{key:"addNewCode",value:function(t){-1===this.dxCodes.findIndex(function(e){return(null==e?void 0:e.code)===(null==t?void 0:t.code)})&&this.dxCodes.push(t),this.options=[]}},{key:"save",value:function(){var t=this;this._patientService.updatePatientDxCodes(this.patientId,this.dxCodes).subscribe(function(){t._notificationService.success("Diagnosis Codes","Codes updated successfully!"),t._modalRef.close(t.dxCodes)})}}]),t}()).\u0275fac=function(t){return new(t||Au)(_.Rb(Eu.a),_.Rb(y.a),_.Rb(Be.a),_.Rb(V.b),_.Rb(O.e))},Au.\u0275cmp=_.Lb({type:Au,selectors:[["app-diagnosis-codes"]],inputs:{patientId:"patientId",dxCodes:"dxCodes"},decls:14,vars:6,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","20"],["nzShowSearch","","nzServerSearch","true","nzNotFoundContent","No ICD codes found matching input...","nzPlaceHolder","Search Diagnosis Code","ngModel","",3,"nzMode","nzDisabled","nzOnSearch","ngModelChange"],[4,"ngIf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nzDisabled","","nzCustomContent",""],["nzSimple","","nzSize","small"],["nz-col","","nzSpan","6"],["nz-input","","placeholder","Code","disabled","",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","8"],["nz-input","","placeholder","Description","disabled","",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","5"],["nzPlaceHolder","Type",3,"ngModel","ngModelChange"],["nzValue","CHRONIC","nzLabel","Chronic"],["nzValue","NON_CHRONIC","nzLabel","Non-Chronic"],["nzValue","UNDETERMINED","nzLabel","Undetermined"],["nzPlaceHolder","Status",3,"ngModel","ngModelChange"],["nzValue","Active","nzLabel","Active"],["nzValue","Inactive","nzLabel","Inactive"],["nzValue","Resolved","nzLabel","Resolved"],["nz-input","","placeholder","Category",3,"ngModel","ngModelChange"],["nz-input","","placeholder","Health Status",3,"ngModel","ngModelChange"],["nzPlaceHolder","Start Date",3,"ngModel","ngModelChange"],["nzPlaceHolder","End Date",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"strong"),_.Xc(4,"Search Diagnosis Code"),_.Wb(),_.Xb(5,"nz-select",3),_.ec("nzOnSearch",function(t){return e.search(t)})("ngModelChange",function(t){return e.addNewCode(t)}),_.Vc(6,Tu,2,1,"ng-container",4),_.Vc(7,zu,3,0,"nz-option",5),_.Vc(8,_u,2,0,"nz-option",5),_.Wb(),_.Wb(),_.Xb(9,"div",6),_.Xb(10,"button",7),_.ec("click",function(){return e.save()}),_.Xc(11,"Save"),_.Wb(),_.Wb(),_.Wb(),_.Sb(12,"nz-divider"),_.Vc(13,Ou,42,8,"nz-card",8),_.Wb()),2&t){var n=null;_.Db(5),_.rc("nzMode","default")("nzDisabled",e.redoxEnabled),_.Db(1),_.rc("ngIf",!e.isLoading),_.Db(1),_.rc("ngIf",e.isLoading),_.Db(1),_.rc("ngIf",e.initialState&&!(null!=e.options&&e.options.length)),_.Db(5),_.rc("ngForOf",null==e.dxCodes||null==(n=e.dxCodes.slice())?null:n.reverse())}},directives:[Z.c,Z.a,Y.d,v.u,v.x,h.q,M.a,A.a,P.a,G.a,h.p,Y.a,Wn.a,Rn.a,on.b,v.d,ge.a],styles:["nz-card[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%]{width:100%;bottom:-20px}"]}),Au),Nu=((Mu=function(){function t(){b(this,t)}return d(t,[{key:"transform",value:function(t,e){return t&&e?"FEET"===e?this.convertInchesToFeet(+t):"".concat(t," ").concat(e):"N/A"}},{key:"convertInchesToFeet",value:function(t){var e=Math.floor(t/12);return"".concat(e," feet ").concat(t-12*e," inches")}}]),t}()).\u0275fac=function(t){return new(t||Mu)},Mu.\u0275pipe=_.Qb({name:"height",type:Mu,pure:!0}),Mu);function Wu(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ","IN"===(null==n.patientInfo||null==n.patientInfo.healthInfo||null==n.patientInfo.healthInfo.hipSize?null:n.patientInfo.healthInfo.hipSize.unit)?"inches":null==n.patientInfo||null==n.patientInfo.healthInfo||null==n.patientInfo.healthInfo.hipSize?null:n.patientInfo.healthInfo.hipSize.unit," ")}}function Ru(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ","IN"===(null==n.patientInfo||null==n.patientInfo.healthInfo||null==n.patientInfo.healthInfo.waistSize?null:n.patientInfo.healthInfo.waistSize.unit)?"inches":null==n.patientInfo||null==n.patientInfo.healthInfo||null==n.patientInfo.healthInfo.waistSize?null:n.patientInfo.healthInfo.waistSize.unit," ")}}function xu(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic();_.Db(1),_.Zc(" ",null==n.patientInfo||null==n.patientInfo.healthInfo||null==n.patientInfo.healthInfo.weight?null:n.patientInfo.healthInfo.weight.unit," ")}}function ku(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.YES")))}function wu(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xb(1,"span",9),_.Vc(2,ku,3,3,"span",10),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngSwitch",null==n?null:n.habitType),_.Db(1),_.rc("ngSwitchCase","SMOKING")}}function Vu(t,e){1&t&&(_.Xb(0,"strong"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.NO")))}function Lu(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.YES")))}function Fu(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xb(1,"span",9),_.Vc(2,Lu,3,3,"span",10),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngSwitch",null==n?null:n.condition),_.Db(1),_.rc("ngSwitchCase","DIABETIC")}}function Uu(t,e){1&t&&(_.Xb(0,"strong"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.NO")))}function ju(t,e){1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.YES")))}function Yu(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xb(1,"span",9),_.Vc(2,ju,3,3,"span",10),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngSwitch",null==n?null:n.condition),_.Db(1),_.rc("ngSwitchCase","HYPERTENSION")}}function Bu(t,e){1&t&&(_.Xb(0,"strong"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"COMMON.NO")))}function Hu(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"nz-tag",11),_.Xc(2),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzColor","green"),_.Db(1),_.ad(" ",null==n?null:n.code,", ",null==n?null:n.description," ")}}function Gu(t,e){1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2,"N/A"),_.Wb(),_.Ub())}var Zu,$u,qu=function(){return[32,8]},Ku=((Zu=function(){function t(e,n){b(this,t),this._modalService=e,this._patientViewModalService=n}return d(t,[{key:"ngAfterViewInit",value:function(){var t,e,n=null===(e=null===(t=this.patientInfo)||void 0===t?void 0:t.healthInfo)||void 0===e?void 0:e.bloodGroup;n&&(n=(n=n.replace("_POSITIVE","+")).replace("_NEGATIVE","-"),this.patientInfo.healthInfo.bloodGroup=n)}},{key:"showDiagnosisCodesModal",value:function(t){var e,n=this,i=this._modalService.create({nzContent:Pu,nzComponentParams:{patientId:null===(e=this.patientInfo)||void 0===e?void 0:e.id,dxCodes:t},nzBodyStyle:{maxHeight:"600px",overflow:"scroll"},nzWidth:"750px",nzFooter:null});null==i||i.afterClose.subscribe(function(t){var e;t&&(n.patientInfo.healthInfo.dxCodes=t);var i={dxCodes:t,patientId:null===(e=n.patientInfo)||void 0===e?void 0:e.id};n._patientViewModalService.updateProfileReadinessModal(i)})}}]),t}()).\u0275fac=function(t){return new(t||Zu)(_.Rb(O.f),_.Rb(lc.a))},Zu.\u0275cmp=_.Lb({type:Zu,selectors:[["app-patient-health-information"]],inputs:{patientInfo:"patientInfo"},decls:81,vars:61,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","secondary"],[4,"ngIf"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","24"],[1,"action"],["nz-button","","nzType","link","id","icd-button",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"nzColor"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"label",3),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Xb(6,"div",2),_.Xb(7,"label",3),_.Xc(8),_.jc(9,"translate"),_.Wb(),_.Wb(),_.Xb(10,"div",2),_.Xb(11,"label",3),_.Xc(12),_.jc(13,"translate"),_.Wb(),_.Wb(),_.Xb(14,"div",2),_.Xb(15,"label",3),_.Xc(16),_.jc(17,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(18,"div",1),_.Xb(19,"div",2),_.Xb(20,"strong"),_.Xc(21),_.Vc(22,Wu,2,1,"ng-container",4),_.Wb(),_.Wb(),_.Xb(23,"div",2),_.Xb(24,"strong"),_.Xc(25),_.Vc(26,Ru,2,1,"ng-container",4),_.Wb(),_.Wb(),_.Xb(27,"div",2),_.Xb(28,"strong"),_.Xc(29),_.jc(30,"height"),_.Wb(),_.Wb(),_.Xb(31,"div",2),_.Xb(32,"strong"),_.Xc(33),_.Vc(34,xu,2,1,"ng-container",4),_.Wb(),_.Wb(),_.Wb(),_.Sb(35,"br"),_.Xb(36,"div",1),_.Xb(37,"div",2),_.Xb(38,"label",3),_.Xc(39),_.jc(40,"translate"),_.Wb(),_.Wb(),_.Xb(41,"div",2),_.Xb(42,"label",3),_.Xc(43),_.jc(44,"translate"),_.Wb(),_.Wb(),_.Xb(45,"div",2),_.Xb(46,"label",3),_.Xc(47),_.jc(48,"translate"),_.Wb(),_.Wb(),_.Xb(49,"div",2),_.Xb(50,"label",3),_.Xc(51),_.jc(52,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(53,"div",1),_.Xb(54,"div",2),_.Xb(55,"strong"),_.Xc(56),_.Wb(),_.Wb(),_.Xb(57,"div",2),_.Vc(58,wu,3,2,"strong",5),_.Vc(59,Vu,3,3,"strong",4),_.Wb(),_.Xb(60,"div",2),_.Vc(61,Fu,3,2,"strong",5),_.Vc(62,Uu,3,3,"strong",4),_.Wb(),_.Xb(63,"div",2),_.Vc(64,Yu,3,2,"strong",5),_.Vc(65,Bu,3,3,"strong",4),_.Wb(),_.Wb(),_.Sb(66,"br"),_.Xb(67,"div",1),_.Xb(68,"div",6),_.Xb(69,"div",7),_.Xb(70,"strong"),_.Xc(71),_.jc(72,"translate"),_.Wb(),_.Xb(73,"button",8),_.ec("click",function(){return e.showDiagnosisCodesModal(null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.dxCodes)}),_.Xc(74),_.jc(75,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(76,"div",1),_.Xb(77,"div",6),_.Vc(78,Hu,3,3,"ng-container",5),_.Vc(79,Gu,3,0,"ng-container",4),_.Wb(),_.Wb(),_.Wb(),_.Sb(80,"br")),2&t&&(_.Db(1),_.rc("nzGutter",_.xc(55,qu)),_.Db(3),_.Yc(_.kc(5,32,"PATIENT.HIP_SIZE")),_.Db(4),_.Yc(_.kc(9,34,"PATIENT.WAIST_SIZE")),_.Db(4),_.Yc(_.kc(13,36,"COMMON.HEIGHT")),_.Db(4),_.Yc(_.kc(17,38,"COMMON.WEIGHT")),_.Db(2),_.rc("nzGutter",_.xc(56,qu)),_.Db(3),_.Zc(" ",(null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.hipSize?null:e.patientInfo.healthInfo.hipSize.value)||"N/A"," "),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.hipSize?null:e.patientInfo.healthInfo.hipSize.value),_.Db(3),_.Zc(" ",(null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.waistSize?null:e.patientInfo.healthInfo.waistSize.value)||"N/A"," "),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.waistSize?null:e.patientInfo.healthInfo.waistSize.value),_.Db(3),_.Zc(" ",_.lc(30,40,null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.height?null:e.patientInfo.healthInfo.height.value,null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.height?null:e.patientInfo.healthInfo.height.unit)||"N/A"," "),_.Db(4),_.Zc(" ",(null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.weight?null:e.patientInfo.healthInfo.weight.value)||"N/A"," "),_.Db(1),_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.weight?null:e.patientInfo.healthInfo.weight.value),_.Db(2),_.rc("nzGutter",_.xc(57,qu)),_.Db(3),_.Yc(_.kc(40,43,"COMMON.BLOODGROUP")),_.Db(4),_.Yc(_.kc(44,45,"PATIENT.SMOKING_HABIT")),_.Db(4),_.Yc(_.kc(48,47,"PATIENT.DIABETIC")),_.Db(4),_.Yc(_.kc(52,49,"PATIENT.HYPERTENSION")),_.Db(2),_.rc("nzGutter",_.xc(58,qu)),_.Db(3),_.Yc((null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.bloodGroup)||"N/A"),_.Db(2),_.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.habits),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.habits&&e.patientInfo.healthInfo.habits.length)),_.Db(2),_.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.healthConditions),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.healthConditions&&e.patientInfo.healthInfo.healthConditions.length)),_.Db(2),_.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.healthConditions),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.healthConditions&&e.patientInfo.healthInfo.healthConditions.length)),_.Db(2),_.rc("nzGutter",_.xc(59,qu)),_.Db(4),_.Yc(_.kc(72,51,"COMMON.ICD_CODES")),_.Db(3),_.Zc(" ",_.kc(75,53,"COMMON.ADD")," / Update "),_.Db(2),_.rc("nzGutter",_.xc(60,qu)),_.Db(2),_.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.dxCodes),_.Db(1),_.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.dxCodes&&e.patientInfo.healthInfo.dxCodes.length)))},directives:[Z.c,Z.a,H.a,h.q,h.p,M.a,P.a,h.s,h.t,za.a],pipes:[Qt.a,Nu],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}#icd-button[_ngcontent-%COMP%]:focus{color:var(--primary-color)}"]}),Zu),Qu=function(){return[32,8]},Ju=(($u=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||$u)},$u.\u0275cmp=_.Lb({type:$u,selectors:[["app-patient-insurance-information"]],inputs:{patientInfo:"patientInfo"},decls:36,vars:24,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","secondary"],["nz-tooltip","",3,"nzTooltipTitle"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"label",3),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Xb(6,"div",2),_.Xb(7,"label",3),_.Xc(8),_.jc(9,"translate"),_.Wb(),_.Wb(),_.Xb(10,"div",2),_.Xb(11,"label",3),_.Xc(12),_.jc(13,"translate"),_.Wb(),_.Wb(),_.Xb(14,"div",2),_.Xb(15,"label",3),_.Xc(16),_.jc(17,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(18,"div",1),_.Xb(19,"div",2),_.Xb(20,"strong",4),_.Xb(21,"span"),_.Xc(22),_.Wb(),_.Wb(),_.Wb(),_.Xb(23,"div",2),_.Xb(24,"strong",4),_.Xb(25,"span"),_.Xc(26),_.Wb(),_.Wb(),_.Wb(),_.Xb(27,"div",2),_.Xb(28,"strong",4),_.Xb(29,"span"),_.Xc(30),_.Wb(),_.Wb(),_.Wb(),_.Xb(31,"div",2),_.Xb(32,"strong",4),_.Xb(33,"span"),_.Xc(34),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(35,"br")),2&t&&(_.Db(1),_.rc("nzGutter",_.xc(22,Qu)),_.Db(3),_.Yc(_.kc(5,14,"INSURANCE.PRIMARY_INSURANCE_CARRIER_NAME")),_.Db(4),_.Yc(_.kc(9,16,"INSURANCE.INSURER_MEMBER_ID")),_.Db(4),_.Yc(_.kc(13,18,"INSURANCE.SECONDARY_INSURANCE_CARRIER_NAME")),_.Db(4),_.Yc(_.kc(17,20,"INSURANCE.INSURER_MEMBER_ID")),_.Db(2),_.rc("nzGutter",_.xc(23,Qu)),_.Db(2),_.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName),_.Db(2),_.Zc(" ",(null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName)||"N/A"," "),_.Db(2),_.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId),_.Db(2),_.Yc((null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId)||"N/A"),_.Db(2),_.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName),_.Db(2),_.Yc((null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName)||"N/A"),_.Db(2),_.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId),_.Db(2),_.Yc((null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId)||"N/A"))},directives:[Z.c,Z.a,H.a,wi.d],pipes:[Qt.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}strong[_ngcontent-%COMP%]{overflow:hidden;display:grid}strong[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),$u),td=o("gDH+"),ed=o("N+jK"),nd=o("uA0X"),id=o("2hFh"),ad=o("IIEM");function rd(t,e){if(1&t&&(_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.jc(3,"deviceName"),_.Wb(),_.Xb(4,"td"),_.Xc(5),_.Wb(),_.Xb(6,"td"),_.Xc(7,"Unassigned"),_.Wb(),_.Xb(8,"td"),_.Xc(9),_.Wb(),_.Xb(10,"td"),_.Xc(11),_.jc(12,"date"),_.Wb(),_.Xb(13,"td"),_.Xc(14),_.Wb(),_.Wb()),2&t){var n=_.ic().$implicit,i=_.ic();_.Db(2),_.Yc(_.kc(3,6,n.type)),_.Db(3),_.Yc(n.imei),_.Db(4),_.Yc(n.changedBy),_.Db(2),_.ad("",_.lc(12,8,n.updatedAt+"Z","MMM dd yyyy, hh:mm a")," ",i.standardTimeZone,""),_.Db(3),_.Yc(i.CONTEXT_NAME_MAP.get(n.unAssignmentContext))}}function od(t,e){if(1&t&&(_.Vb(0),_.Vc(1,rd,15,11,"tr",3),_.Xb(2,"tr"),_.Xb(3,"td"),_.Xc(4),_.jc(5,"deviceName"),_.Wb(),_.Xb(6,"td"),_.Xc(7),_.Wb(),_.Xb(8,"td"),_.Xc(9,"Assigned"),_.Wb(),_.Xb(10,"td"),_.Xc(11),_.Wb(),_.Xb(12,"td"),_.Xc(13),_.jc(14,"date"),_.Wb(),_.Xb(15,"td"),_.Xc(16,"NA"),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit,i=_.ic();_.Db(1),_.rc("ngIf",n.unAssignmentContext),_.Db(3),_.Yc(_.kc(5,6,n.type)),_.Db(3),_.Yc(n.imei),_.Db(4),_.Yc(n.createdBy),_.Db(2),_.ad("",_.lc(14,8,n.createdAt+"Z","MMM dd yyyy, hh:mm a")," ",i.standardTimeZone,"")}}var ld,sd=((ld=function(){function t(e){b(this,t),this._timezoneService=e,this.CONTEXT_NAME_MAP=new Map([["FAULTY_DEVICE","Faulty Device"],["PATIENT_DISCHARGE","Patient Discharged"],["DEVICE_RE_ASSIGNMENT","Device Reassignment"],["INCORRECT_INFORMATION","Incorrect Information"]]),this.standardTimeZone=this._timezoneService.getTimeZone()}return d(t,[{key:"ngOnInit",value:function(){this.deviceHistoryList=e(this.deviceList),this.deviceHistoryList.reverse()}}]),t}()).\u0275fac=function(t){return new(t||ld)(_.Rb(id.a))},ld.\u0275cmp=_.Lb({type:ld,selectors:[["app-device-history"]],inputs:{deviceList:"deviceList"},decls:21,vars:2,consts:[[3,"nzData"],["deviceHistoryTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"h3"),_.Xb(2,"strong"),_.Xc(3," Device Assignment History "),_.Wb(),_.Wb(),_.Xb(4,"nz-table",0,1),_.Xb(6,"thead"),_.Xb(7,"tr"),_.Xb(8,"th"),_.Xc(9,"Device"),_.Wb(),_.Xb(10,"th"),_.Xc(11,"IMEI"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"Status"),_.Wb(),_.Xb(14,"th"),_.Xc(15,"Staff"),_.Wb(),_.Xb(16,"th"),_.Xc(17,"Date"),_.Wb(),_.Xb(18,"th"),_.Xc(19,"Reason"),_.Wb(),_.Wb(),_.Wb(),_.Vc(20,od,17,11,"ng-container",2),_.Wb(),_.Ub()),2&t){var n=_.Ic(5);_.Db(4),_.rc("nzData",e.deviceHistoryList),_.Db(16),_.rc("ngForOf",null==n?null:n.data)}},directives:[Q.f,Q.n,Q.o,Q.e,Q.l,h.p,h.q],pipes:[ad.a,h.e],styles:[".title[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-table-thead>tr>th, td[_ngcontent-%COMP%]{text-align:center!important}[_nghost-%COMP%]     .ant-table-thead>tr>th{height:50px!important}[_nghost-%COMP%]     tr.ant-table-placeholder{display:none}"]}),ld);function cd(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",11),_.ec("click",function(){return _.Lc(n),_.ic(2).showBodyTraceBT105Dialog()}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" + ",_.kc(2,1,"COMMON.ADD")," "))}function ud(t,e){if(1&t&&(_.Vb(0),_.Vc(1,cd,3,3,"button",10),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf","DISCHARGED"!==(null==n.patientInfo?null:n.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==n.patientInfo?null:n.patientInfo.patientStatus))}}function dd(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"nz-tag",16),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic().unassignDevice(null==t?null:t.imei)}),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",17),_.Wb(),_.Ub()}2&t&&(_.Db(1),_.rc("nzColor","red"),_.Db(1),_.Zc(" ",_.kc(3,2,"COMMON.REMOVE")," "))}var bd=function(){return["REMOVE_DEVICES"]};function pd(t,e){if(1&t&&(_.Xb(0,"div",12),_.Xb(1,"nz-card",13),_.Xb(2,"div",14),_.Vc(3,dd,5,4,"ng-container",7),_.Wb(),_.Xb(4,"div"),_.Xb(5,"strong"),_.Xc(6),_.jc(7,"deviceName"),_.Wb(),_.Xb(8,"p",15),_.Xc(9),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzHoverable",!0),_.Db(2),_.rc("isFeaturePermitted",_.xc(6,bd)),_.Db(3),_.Yc(_.kc(7,4,n.type)),_.Db(3),_.Zc("IMEI: ",null==n?null:n.imei,"")}}var fd,gd=function(){return[32,8]},hd=function(){return["ADD_DEVICES"]},vd=((fd=function(){function t(e,n,i){b(this,t),this.devicesService=e,this._bt105CreateModalService=n,this._modalService=i}return d(t,[{key:"ngOnInit",value:function(){this.loadDevices(),this.fetchDeviceHistory()}},{key:"loadDevices",value:function(){var t=this;this.devicesService.getDevicesForUser(this.patientInfo.id).subscribe(function(e){t.devices=e,t.fetchDeviceHistory()})}},{key:"showBodyTraceBT105Dialog",value:function(){var t=this;this._bt105CreateModalService.showModal(this.patientInfo.id).afterClose.subscribe(function(e){e&&t.loadDevices()})}},{key:"fetchDeviceHistory",value:function(){var t=this;this.devicesService.getDeviceHistoryForuser(this.patientInfo.id).subscribe(function(e){t.deviceHistoryList=e})}},{key:"unassignDevice",value:function(t){var e=this;this._modalService.create({nzContent:nd.a,nzComponentParams:{deviceId:t},nzFooter:null,nzWidth:"500px",nzClosable:!1}).afterClose.subscribe(function(t){t&&e.loadDevices()})}},{key:"viewDeviceHistory",value:function(){this._modalService.create({nzContent:sd,nzComponentParams:{deviceList:this.deviceHistoryList},nzFooter:null,nzWidth:"1280px",nzClosable:!0})}}]),t}()).\u0275fac=function(t){return new(t||fd)(_.Rb(ed.a),_.Rb(td.a),_.Rb(O.f))},fd.\u0275cmp=_.Lb({type:fd,selectors:[["app-patient-assigned-devices"]],inputs:{patientInfo:"patientInfo"},decls:16,vars:11,consts:[[1,"container"],[3,"ngClass"],[3,"click"],["name","arrowRight","size","15px"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","7","nzSm","5","nzMd","3"],[1,"device-action"],[4,"isFeaturePermitted"],["nz-col","","nzXs","17","nzSm","19","nzMd","21"],["nz-col","","nzXs","24","nzSm","12","nzMd","7","class","device",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","7",1,"device"],[3,"nzHoverable"],[1,"device-remover"],["nz-typography","","nzType","secondary"],[3,"nzColor","click"],["name","delete","size","10px","color","red","altColor","red"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"span",2),_.ec("click",function(){return(null==e.deviceHistoryList?null:e.deviceHistoryList.length)>0?e.viewDeviceHistory():null}),_.Xc(3," View History \xa0 "),_.Sb(4,"app-icons",3),_.Wb(),_.Wb(),_.Xb(5,"div",4),_.Xb(6,"div",5),_.Xb(7,"div",6),_.Xb(8,"strong"),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Vc(11,ud,2,1,"ng-container",7),_.Wb(),_.Wb(),_.Xb(12,"div",8),_.Xb(13,"div",4),_.Vc(14,pd,10,7,"div",9),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(15,"br")),2&t&&(_.Db(1),_.rc("ngClass",(null==e.deviceHistoryList?null:e.deviceHistoryList.length)>0?"view-history":"view-history-absent"),_.Db(4),_.rc("nzGutter",_.xc(8,gd)),_.Db(4),_.Yc(_.kc(10,6,"COMMON.DEVICES")),_.Db(2),_.rc("isFeaturePermitted",_.xc(9,hd)),_.Db(2),_.rc("nzGutter",_.xc(10,gd)),_.Db(1),_.rc("ngForOf",e.devices))},directives:[h.o,he.a,Z.c,Z.a,ln.a,h.p,h.q,M.a,A.a,P.a,Rn.a,H.a,za.a],pipes:[Qt.a,ad.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}.container[_ngcontent-%COMP%]{padding:2% 10px!important;background:#e6e8eb 0 0 no-repeat padding-box;border:1px solid #e6e8eb;border-radius:15px}nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:8px 0 16px 16px}nz-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{text-align:right}.device-action[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.device-action[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px;display:block}.device-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:23px;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:5px;line-height:0}nz-tag[_ngcontent-%COMP%]{width:60px;height:16px;cursor:pointer;font:normal normal 600 8px/11px Nunito}app-icons[_ngcontent-%COMP%]{vertical-align:text-bottom}.device[_ngcontent-%COMP%]   .device-remover[_ngcontent-%COMP%]{visibility:hidden}.device[_ngcontent-%COMP%]:hover   .device-remover[_ngcontent-%COMP%]{visibility:visible}.view-history[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;cursor:pointer}.view-history[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .view-history-absent[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.view-history[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%], .view-history-absent[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:middle}.view-history-absent[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;color:gray;cursor:not-allowed}"]}),fd),md=o("YPQb"),Sd=function(t){return{disabled:t}};function Id(t,e){if(1&t){var n=_.Yb();_.Xb(0,"tr"),_.Xb(1,"td"),_.Xb(2,"strong"),_.Xc(3),_.Wb(),_.Wb(),_.Xb(4,"td"),_.Xc(5),_.Wb(),_.Xb(6,"td"),_.Xc(7),_.Wb(),_.Xb(8,"td"),_.Xc(9),_.Wb(),_.Xb(10,"td",4),_.Xb(11,"app-icons",5),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).editGuardian(t)}),_.Wb(),_.Xc(12," \xa0 "),_.Xb(13,"a",6),_.ec("nzOnConfirm",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).deletePatientsGuardian(null==t?null:t.id)}),_.Sb(14,"app-icons",7),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=e.$implicit,a=_.ic(2);_.Db(3),_.Yc((null==i?null:i.fullName)||"N/A"),_.Db(2),_.Yc((null==i?null:i.relationship)||"N/A"),_.Db(2),_.Yc((null==i?null:i.email)||"N/A"),_.Db(2),_.Yc((null==i?null:i.mobile)||"N/A"),_.Db(1),_.rc("ngClass",_.yc(5,Sd,"DISCHARGED"===(null==a.patientInfo?null:a.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==a.patientInfo?null:a.patientInfo.patientStatus)))}}var Dd=function(){return["20%","20%","20%","25%","15%"]},yd=function(){return{x:"1250px"}};function Cd(t,e){if(1&t&&(_.Xb(0,"div"),_.Sb(1,"nz-divider"),_.Xb(2,"h4"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"nz-table",1,2),_.Xb(7,"tbody"),_.Vc(8,Id,15,7,"tr",3),_.Wb(),_.Wb(),_.Sb(9,"br"),_.Wb()),2&t){var n=_.Ic(6),i=_.ic();_.Db(3),_.Yc(_.kc(4,6,"PATIENT.GURADIANS")),_.Db(2),_.rc("nzData",i.guardians)("nzShowPagination",!1)("nzWidthConfig",_.xc(8,Dd))("nzScroll",_.xc(9,yd)),_.Db(3),_.rc("ngForOf",null==n?null:n.data)}}var Ed,Xd=((Ed=function(t){r(n,t);var e=l(n);function n(t,i,a,r){var o;return b(this,n),(o=e.call(this))._patientsService=t,o._patientsViewService=i,o._patientViewRefreshService=a,o._notificationsService=r,o._patientViewRefreshService.observeGuardians().pipe(Object(Ve.a)(o.unsubscribed)).subscribe(function(t){t&&o.getAllGuardiansForPatient()}),o}return d(n,[{key:"ngOnInit",value:function(){this.getAllGuardiansForPatient()}},{key:"getAllGuardiansForPatient",value:function(){var t=this;this._patientsService.fetchGuardiansForPatient(this.patientInfo.id).subscribe(function(e){return t.guardians=e})}},{key:"editGuardian",value:function(t){var e=this;this._patientsViewService.showGuardianModal(this.patientInfo.id,t).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&e._patientViewRefreshService.refreshGuardians()})}},{key:"deletePatientsGuardian",value:function(t){var e=this;this._patientsService.deleteGuardian(t).subscribe(function(){e._notificationsService.success("Guardians","Guardian removed successfully!"),e.getAllGuardiansForPatient()})}}]),n}(D.a)).\u0275fac=function(t){return new(t||Ed)(_.Rb(y.a),_.Rb(lc.a),_.Rb(md.a),_.Rb(V.b))},Ed.\u0275cmp=_.Lb({type:Ed,selectors:[["app-patient-guardians-information"]],inputs:{patientInfo:"patientInfo"},features:[_.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination","nzWidthConfig","nzScroll"],["guardiansTable",""],[4,"ngFor","ngForOf"],[3,"ngClass"],["name","edit","strokeWidth","0px",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to delete this guardian?",3,"nzOnConfirm"],["name","delete"]],template:function(t,e){1&t&&_.Vc(0,Cd,10,10,"div",0),2&t&&_.rc("ngIf",null==e.guardians?null:e.guardians.length)},directives:[h.q,G.a,Q.f,Q.i,h.p,Q.o,Q.e,h.o,he.a,ou.a],pipes:[Qt.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}td[_ngcontent-%COMP%]:last-child{text-align:center}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"]}),Ed);function Td(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.Zc(" ",n," ")}}function zd(t,e){1&t&&(_.Vb(0),_.Xc(1,"N/A"),_.Ub())}var _d=function(t){return{disabled:t}};function Od(t,e){if(1&t){var n=_.Yb();_.Xb(0,"tr"),_.Xb(1,"td"),_.Xb(2,"strong"),_.Xc(3),_.Wb(),_.Wb(),_.Xb(4,"td"),_.Xc(5),_.Wb(),_.Xb(6,"td"),_.Vc(7,Td,2,1,"ng-container",3),_.Vc(8,zd,2,0,"ng-container",0),_.Wb(),_.Xb(9,"td",4),_.Xb(10,"app-icons",5),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).editPatientsAlergies(t)}),_.Wb(),_.Xc(11," \xa0 "),_.Xb(12,"a",6),_.ec("nzOnConfirm",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).deletePatientsAllergy(t)}),_.Sb(13,"app-icons",7),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=e.$implicit,a=_.ic(2);_.Db(3),_.Yc((null==i?null:i.name)||"N/A"),_.Db(2),_.Yc((null==i?null:i.level)||"N/A"),_.Db(2),_.rc("ngForOf",null==i?null:i.symptoms),_.Db(1),_.rc("ngIf",!(null!=i&&null!=i.symptoms&&i.symptoms.length)),_.Db(1),_.rc("ngClass",_.yc(5,_d,"DISCHARGED"===(null==a.patientInfo?null:a.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==a.patientInfo?null:a.patientInfo.patientStatus)))}}var Md=function(){return["28%","28%","28%","16%"]},Ad=function(){return{x:"1250px"}};function Pd(t,e){if(1&t&&(_.Xb(0,"div"),_.Sb(1,"nz-divider"),_.Xb(2,"h4"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"nz-table",1,2),_.Xb(7,"tbody"),_.Vc(8,Od,14,7,"tr",3),_.Wb(),_.Wb(),_.Sb(9,"br"),_.Wb()),2&t){var n=_.Ic(6),i=_.ic();_.Db(3),_.Yc(_.kc(4,6,"COMMON.ALLERGY")),_.Db(2),_.rc("nzData",null==i.patientInfo||null==i.patientInfo.healthInfo?null:i.patientInfo.healthInfo.allergies)("nzShowPagination",!1)("nzWidthConfig",_.xc(8,Md))("nzScroll",_.xc(9,Ad)),_.Db(3),_.rc("ngForOf",null==n?null:n.data)}}var Nd,Wd=((Nd=function(t){r(i,t);var n=l(i);function i(t,a,r,o){var l;return b(this,i),(l=n.call(this))._patientsService=t,l._patientsViewService=a,l._patientViewRefreshService=r,l._notificationsService=o,l._patientViewRefreshService.observeAllergies().pipe(Object(Ve.a)(l.unsubscribed)).subscribe(function(t){var n,i;t&&((null===(i=null===(n=l.patientInfo)||void 0===n?void 0:n.healthInfo)||void 0===i?void 0:i.allergies)||(l.patientInfo.healthInfo.allergies=[]),l.patientInfo.healthInfo.allergies=[].concat(e(l.patientInfo.healthInfo.allergies),[t]))}),l}return d(i,[{key:"editPatientsAlergies",value:function(t){var e,n=this;this._patientsViewService.showAllergyModal(null===(e=this.patientInfo)||void 0===e?void 0:e.id,t).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){var e,i,a,r,o;t&&(null===(a=null===(i=null===(e=n.patientInfo)||void 0===e?void 0:e.healthInfo)||void 0===i?void 0:i.allergies)||void 0===a||a.forEach(function(e){e.name===(null==t?void 0:t.name)&&(e=t)}),n.updateAllergies(null===(o=null===(r=n.patientInfo)||void 0===r?void 0:r.healthInfo)||void 0===o?void 0:o.allergies))})}},{key:"updateAllergies",value:function(t){var e=this;this._patientsService.updateAllergiesForPatient(this.patientInfo.id,t).subscribe(function(){e._notificationsService.success("Allergies","Allergy updated successfully!")})}},{key:"deletePatientsAllergy",value:function(t){var e,n,i,a=this,r=null===(i=null===(n=null===(e=this.patientInfo)||void 0===e?void 0:e.healthInfo)||void 0===n?void 0:n.allergies)||void 0===i?void 0:i.filter(function(e){return e.name!==t.name});this._patientsService.updateAllergiesForPatient(this.patientInfo.id,r).subscribe(function(){a.patientInfo.healthInfo.allergies=r,a._notificationsService.success("Allergies","Allergy removed successfully!")})}}]),i}(D.a)).\u0275fac=function(t){return new(t||Nd)(_.Rb(y.a),_.Rb(lc.a),_.Rb(md.a),_.Rb(V.b))},Nd.\u0275cmp=_.Lb({type:Nd,selectors:[["app-patient-allergies-information"]],inputs:{patientInfo:"patientInfo"},features:[_.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination","nzWidthConfig","nzScroll"],["allergiesTable",""],[4,"ngFor","ngForOf"],[3,"ngClass"],["name","edit","strokeWidth","0px",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to delete this allergy?",3,"nzOnConfirm"],["name","delete"]],template:function(t,e){1&t&&_.Vc(0,Pd,10,10,"div",0),2&t&&_.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.allergies?null:e.patientInfo.healthInfo.allergies.length)},directives:[h.q,G.a,Q.f,Q.i,h.p,Q.o,Q.e,h.o,he.a,ou.a],pipes:[Qt.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}td[_ngcontent-%COMP%]:last-child{text-align:center}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"]}),Nd),Rd=function(t){return{disabled:t}};function xd(t,e){if(1&t){var n=_.Yb();_.Xb(0,"tr"),_.Xb(1,"td"),_.Xb(2,"strong"),_.Xc(3),_.Wb(),_.Wb(),_.Xb(4,"td"),_.Xc(5),_.Wb(),_.Xb(6,"td"),_.Xc(7),_.Wb(),_.Xb(8,"td"),_.Xc(9),_.Wb(),_.Xb(10,"td"),_.Xc(11),_.Wb(),_.Xb(12,"td",4),_.Xb(13,"app-icons",5),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).editContact(t)}),_.Wb(),_.Xc(14," \xa0 "),_.Xb(15,"a",6),_.ec("nzOnConfirm",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).deletePatientsContact(null==t?null:t.id)}),_.Sb(16,"app-icons",7),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=e.$implicit,a=_.ic(2);_.Db(3),_.Yc((null==i?null:i.name)||"N/A"),_.Db(2),_.Yc((null==i?null:i.relationship)||"N/A"),_.Db(2),_.Yc((null==i?null:i.email)||"N/A"),_.Db(2),_.Yc((null==i?null:i.type)||"N/A"),_.Db(2),_.Yc((null==i?null:i.mobile)||"N/A"),_.Db(1),_.rc("ngClass",_.yc(6,Rd,"DISCHARGED"===(null==a.patientInfo?null:a.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==a.patientInfo?null:a.patientInfo.patientStatus)))}}var kd=function(){return["20%","15%","15%","15%","15%","15%"]},wd=function(){return{x:"1250px"}};function Vd(t,e){if(1&t&&(_.Xb(0,"div"),_.Sb(1,"nz-divider"),_.Xb(2,"h4"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"nz-table",1,2),_.Xb(7,"tbody"),_.Vc(8,xd,17,8,"tr",3),_.Wb(),_.Wb(),_.Sb(9,"br"),_.Sb(10,"br"),_.Wb()),2&t){var n=_.Ic(6),i=_.ic();_.Db(3),_.Yc(_.kc(4,6,"PATIENT.CONTACTS")),_.Db(2),_.rc("nzData",i.contacts)("nzShowPagination",!1)("nzWidthConfig",_.xc(8,kd))("nzScroll",_.xc(9,wd)),_.Db(3),_.rc("ngForOf",null==n?null:n.data)}}var Ld,Fd=((Ld=function(t){r(n,t);var e=l(n);function n(t,i,a,r){var o;return b(this,n),(o=e.call(this))._patientsService=t,o._patientsViewService=i,o._patientViewRefreshService=a,o._notificationsService=r,o._patientViewRefreshService.observeContacts().pipe(Object(Ve.a)(o.unsubscribed)).subscribe(function(t){t&&o.getAllContactsForPatient()}),o}return d(n,[{key:"ngOnInit",value:function(){this.getAllContactsForPatient()}},{key:"getAllContactsForPatient",value:function(){var t=this;this.patientInfo.id&&this._patientsService.fetchEmergencyContactsForPatient(this.patientInfo.id).subscribe(function(e){return t.contacts=e})}},{key:"editContact",value:function(t){var e=this;this._patientsViewService.showContactModal(this.patientInfo.id,t).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&e._patientViewRefreshService.refreshContacts()})}},{key:"deletePatientsContact",value:function(t){var e=this;this._patientsService.deleteContact(this.patientInfo.id,t).subscribe(function(){e._notificationsService.success("Contacts","Contact removed successfully!"),e.getAllContactsForPatient()})}}]),n}(D.a)).\u0275fac=function(t){return new(t||Ld)(_.Rb(y.a),_.Rb(lc.a),_.Rb(md.a),_.Rb(V.b))},Ld.\u0275cmp=_.Lb({type:Ld,selectors:[["app-patient-contacts-information"]],inputs:{patientInfo:"patientInfo"},features:[_.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination","nzWidthConfig","nzScroll"],["contactsTable",""],[4,"ngFor","ngForOf"],[3,"ngClass"],["name","edit","strokeWidth","0px",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to delete this contact?",3,"nzOnConfirm"],["name","delete"]],template:function(t,e){1&t&&_.Vc(0,Vd,11,10,"div",0),2&t&&_.rc("ngIf",null==e.contacts?null:e.contacts.length)},directives:[h.q,G.a,Q.f,Q.i,h.p,Q.o,Q.e,h.o,he.a,ou.a],pipes:[Qt.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}td[_ngcontent-%COMP%]:last-child{text-align:center}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"]}),Ld),Ud=o("vDMs"),jd=o("ncdi");function Yd(t,e){1&t&&(_.Xb(0,"strong"),_.Xc(1," No notes have been added yet. "),_.Wb())}function Bd(t,e){if(1&t&&(_.Xb(0,"nz-timeline-item"),_.Xc(1),_.jc(2,"titlecase"),_.Sb(3,"br"),_.Xb(4,"em",9),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2).$implicit;_.Db(1),_.Zc(" ",_.kc(2,4,null==n?null:n.note)," "),_.Db(4),_.bd(" ",(null==n?null:n.note)==(null==i||null==i.notes[0]?null:i.notes[0].note)?"Added ":"Edited ","",null!=n&&n.context?"by "+(null==n?null:n.context):""," on ",_.lc(6,6,null==n?null:n.createdAt,"mediumDate")," ")}}function Hd(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2,"Notes:"),_.Wb(),_.Sb(3,"br"),_.Sb(4,"br"),_.Xb(5,"nz-timeline"),_.Vc(6,Bd,7,9,"nz-timeline-item",5),_.Wb(),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(6),_.rc("ngForOf",null==n?null:n.notes)}}function Gd(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"tr"),_.Xb(2,"td",6),_.ec("nzExpandChange",function(t){_.Lc(n);var i=e.$implicit;return _.ic(2).onExpandChange(i.id,t)}),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.Wb(),_.Xb(5,"td"),_.Xc(6),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td"),_.Xc(10),_.Wb(),_.Xb(11,"td"),_.Xc(12),_.jc(13,"date"),_.Wb(),_.Xb(14,"td"),_.Xb(15,"app-icons",7),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).addResource(t)}),_.Wb(),_.Wb(),_.Wb(),_.Xb(16,"tr",8),_.Vc(17,Yd,2,0,"strong",0),_.Vc(18,Hd,7,1,"ng-container",0),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit,a=_.ic(2);_.Db(2),_.rc("nzExpand",a.expandSet.has(i.id)),_.Db(2),_.Yc(null==i?null:i.name),_.Db(2),_.Yc((null==i?null:i.resourceType)||"N/A"),_.Db(2),_.Yc((null==i?null:i.contactNumber)||"N/A"),_.Db(2),_.Yc((null==i?null:i.status)||"N/A"),_.Db(2),_.Yc(null!=i&&i.dateRequested?_.lc(13,9,null==i?null:i.dateRequested,"MM/dd/yyyy"):"N/A"),_.Db(4),_.rc("nzExpand",a.expandSet.has(i.id)),_.Db(1),_.rc("ngIf",!(null!=i&&null!=i.notes&&i.notes.length)),_.Db(1),_.rc("ngIf",null==i||null==i.notes?null:i.notes.length)}}function Zd(t,e){if(1&t&&(_.Xb(0,"div"),_.Sb(1,"nz-divider"),_.Xb(2,"h4"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"nz-table",1,2),_.Xb(7,"thead"),_.Xb(8,"tr",3),_.Sb(9,"th",4),_.Xb(10,"th"),_.Xc(11,"Name"),_.Wb(),_.Xb(12,"th"),_.Xc(13,"Resource Type"),_.Wb(),_.Xb(14,"th"),_.Xc(15,"Contact Number"),_.Wb(),_.Xb(16,"th"),_.Xc(17,"Status"),_.Wb(),_.Xb(18,"th"),_.Xc(19,"Date Requested"),_.Wb(),_.Xb(20,"th"),_.Xc(21,"Action"),_.Wb(),_.Wb(),_.Wb(),_.Xb(22,"tbody"),_.Vc(23,Gd,19,12,"ng-container",5),_.Wb(),_.Wb(),_.Sb(24,"br"),_.Sb(25,"br"),_.Wb()),2&t){var n=_.Ic(6),i=_.ic();_.Db(3),_.Yc(_.kc(4,4,"COMMON.HOME_COMMUNITY_RESOURCE")),_.Db(2),_.rc("nzData",i.resources)("nzShowPagination",!1),_.Db(18),_.rc("ngForOf",null==n?null:n.data)}}var $d,qd=(($d=function(t){r(n,t);var e=l(n);function n(t,i,a){var r;return b(this,n),(r=e.call(this))._homeCommunityResourceService=t,r._patientViewModalService=i,r._patientViewRefreshService=a,r.resources=[],r.expandSet=new Set,r._patientViewRefreshService.observeCommunityResources().pipe(Object(Ve.a)(r.unsubscribed)).subscribe(function(t){t&&r.getData()}),r}return d(n,[{key:"ngOnInit",value:function(){this.getData()}},{key:"getData",value:function(){var t=this;this._homeCommunityResourceService.fetchHomeCommunityResources(this.patientId).subscribe(function(e){return t.resources=e})}},{key:"onExpandChange",value:function(t,e){e?this.expandSet.add(t):this.expandSet.delete(t)}},{key:"addResource",value:function(t){var e=this;this._patientViewModalService.showResourceModal(this.patientId,t).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){e.getData()})}}]),n}(D.a)).\u0275fac=function(t){return new(t||$d)(_.Rb(Ud.a),_.Rb(lc.a),_.Rb(md.a))},$d.\u0275cmp=_.Lb({type:$d,selectors:[["app-home-community"]],inputs:{patientId:"patientId"},features:[_.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination"],["basicTable",""],["hidden",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],["strokeWidth","0px","name","edit",3,"click"],[3,"nzExpand"],["nz-typography","","nzType","secondary"]],template:function(t,e){1&t&&_.Vc(0,Zd,26,6,"div",0),2&t&&_.rc("ngIf",null==e.resources?null:e.resources.length)},directives:[h.q,G.a,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p,Q.j,he.a,Q.p,Q.g,jd.a,jd.b,H.a],pipes:[Qt.a,h.e,h.A],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}"]}),$d),Kd=o("OrU2"),Qd=o("isHH"),Jd=o("/XTn"),tb=o("Ljqs"),eb=o("gSz3"),nb=o("OG+h"),ib=o("IvDN");function ab(t,e){1&t&&(_.Xb(0,"div",8),_.Xb(1,"h5",9),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"PATIENT.ASSIGN_MONITORING_STAFF")))}function rb(t,e){if(1&t&&(_.Vb(0),_.Vc(1,ab,4,3,"div",5),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf",!(null!=n.clinicians&&n.clinicians.length))}}function ob(t,e){1&t&&(_.Xb(0,"div",8),_.Xb(1,"h5",9),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"PATIENT.CREATE_EPISODE")))}function lb(t,e){1&t&&(_.Xb(0,"div",8),_.Xb(1,"h5",9),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"PATIENT.ASSIGN_CAREPLAN")))}function sb(t,e){1&t&&(_.Xb(0,"div",8),_.Xb(1,"h5",9),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,1,"PATIENT.SET_VITAL_RANGE_FOR_ALERT_NOTIFICATIONS")))}function cb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",8),_.Xb(1,"a",10),_.ec("click",function(){return _.Lc(n),_.ic(3).redirectToStaffAssigner()}),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",11),_.Wb(),_.Wb()}2&t&&(_.Db(2),_.Zc(" ",_.kc(3,1,"PATIENT.ASSIGN_NOW")," "))}function ub(t,e){if(1&t&&(_.Vb(0),_.Vc(1,cb,5,3,"div",5),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf",!(null!=n.clinicians&&n.clinicians.length))}}function db(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",8),_.Xb(1,"a",10),_.ec("click",function(){return _.Lc(n),_.ic(2).validateProfileReadiness()}),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",11),_.Wb(),_.Wb()}2&t&&(_.Db(2),_.Zc(" ",_.kc(3,1,"PATIENT.CREATE_NOW")," "))}function bb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",8),_.Xb(1,"a",10),_.ec("click",function(){return _.Lc(n),_.ic(2).showCarePlanTemplates()}),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",11),_.Wb(),_.Wb()}2&t&&(_.Db(2),_.Zc(" ",_.kc(3,1,"PATIENT.ASSIGN_NOW")," "))}var pb=function(){return{tab:"alerts"}};function fb(t,e){if(1&t&&(_.Xb(0,"div",8),_.Xb(1,"a",12),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",11),_.Wb(),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.tc("routerLink","/patient/view/",null==n.patientInfo?null:n.patientInfo.id,""),_.rc("queryParams",_.xc(5,pb)),_.Db(1),_.Zc(" ",_.kc(3,3,"PATIENT.GO_TO_ALERT_SETTINGS")," ")}}function gb(t,e){1&t&&(_.Xb(0,"h4",9),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"PATIENT.PENDING_ACTIONS")))}var hb=function(){return{color:"#DEDEDE"}};function vb(t,e){1&t&&(_.Xb(0,"label",16),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.rc("ngStyle",_.xc(4,hb)),_.Db(1),_.Zc(" ",_.kc(2,2,"PATIENT.PENDING_ACTIONS.HIDE"),""))}function mb(t,e){1&t&&(_.Xb(0,"label",17),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"PATIENT.PENDING_ACTIONS.SHOW"),""))}function Sb(t,e){if(1&t&&(_.Xb(0,"button",13),_.Vc(1,vb,3,5,"label",14),_.Vc(2,mb,3,3,"label",15),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf",n.state),_.Db(1),_.rc("ngIf",!n.state)}}var Ib=function(){return["ASSIGN_MONITORING_STAFF_TO_PATIENT"]};function Db(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"nz-collapse",1),_.Xb(2,"nz-collapse-panel",2),_.ec("nzActiveChange",function(t){return _.Lc(n),_.ic().state=t}),_.Xb(3,"div",3),_.Vc(4,rb,2,1,"ng-container",4),_.Vc(5,ob,4,3,"div",5),_.Vc(6,lb,4,3,"div",5),_.Vc(7,sb,4,3,"div",5),_.Wb(),_.Xb(8,"div",3),_.Vc(9,ub,2,1,"ng-container",4),_.Vc(10,db,5,3,"div",5),_.Vc(11,bb,5,3,"div",5),_.Vc(12,fb,5,6,"div",5),_.Wb(),_.Wb(),_.Vc(13,gb,3,3,"ng-template",null,6,_.Wc),_.Vc(15,Sb,3,2,"ng-template",null,7,_.Wc),_.Wb(),_.Sb(17,"br"),_.Ub()}if(2&t){var i=_.Ic(14),a=_.Ic(16),r=_.ic();_.Db(1),_.rc("nzGhost",!0)("nzExpandIconPosition","right"),_.Db(1),_.rc("nzHeader",i)("nzActive",r.state)("nzExpandedIcon",a),_.Db(2),_.rc("isFeaturePermitted",_.xc(13,Ib)),_.Db(1),_.rc("ngIf",(null==r.tenantConfig||null==r.tenantConfig.episodeBlueprints?null:r.tenantConfig.episodeBlueprints.length)&&!(null!=r.episodes&&r.episodes.totalCount)),_.Db(1),_.rc("ngIf",!(null!=r.tenantConfig&&null!=r.tenantConfig.episodeBlueprints&&r.tenantConfig.episodeBlueprints.length||null!=r.careplans&&r.careplans.length)),_.Db(1),_.rc("ngIf",(null==r.tenantConfig||null==r.tenantConfig.vitalConfig?null:r.tenantConfig.vitalConfig.enabled)&&!(null!=r.userVitalAlerts&&r.userVitalAlerts.length)),_.Db(2),_.rc("isFeaturePermitted",_.xc(14,Ib)),_.Db(1),_.rc("ngIf",(null==r.tenantConfig||null==r.tenantConfig.episodeBlueprints?null:r.tenantConfig.episodeBlueprints.length)&&!(null!=r.episodes&&r.episodes.totalCount)),_.Db(1),_.rc("ngIf",!(null!=r.tenantConfig&&null!=r.tenantConfig.episodeBlueprints&&r.tenantConfig.episodeBlueprints.length||null!=r.careplans&&r.careplans.length)),_.Db(1),_.rc("ngIf",(null==r.tenantConfig||null==r.tenantConfig.vitalConfig?null:r.tenantConfig.vitalConfig.enabled)&&!(null!=r.userVitalAlerts&&r.userVitalAlerts.length))}}var yb,Cb=((yb=function(){function t(e,n,i,a,r,o,l,s){var c=this;b(this,t),this._router=e,this._patientsService=n,this._episodesService=i,this._userVitalAlertService=a,this._dataSharingService=r,this._careplanService=o,this._modalService=l,this._patientViewModalService=s,this.state=!0,this.loading=!0,this._dataSharingService.tenantSettings.subscribe(function(t){var e;t&&(c.tenantConfig=t,t.episodeBlueprints=null===(e=null==t?void 0:t.episodeBlueprints)||void 0===e?void 0:e.filter(function(t){return!t.archived}))})}return d(t,[{key:"ngOnInit",value:function(){this.loadPendingActions()}},{key:"showCarePlanTemplates",value:function(){this._modalService.create({nzContent:nb.a,nzComponentParams:{patientId:this.patientInfo.id,tenantId:this.patientInfo.tenantId},nzFooter:null})}},{key:"loadPendingActions",value:function(){var t=this,e=this._patientsService.fetchCaretakersForPatient(this.patientInfo.id),n=this._episodesService.getEpisodes(this.patientInfo.id,1,0,void 0,[Jd.a.IN_PROGRESS,Jd.a.SCHEDULED]),i=this._careplanService.getActiveCareplansForAPatient(this.patientInfo.id,null),a=this._userVitalAlertService.fetchVitalBlueprintsOfUser(this.patientInfo.id);Object(tb.forkJoin)([e,n,i,a]).subscribe(function(e){var n;t.loading=!1,t.clinicians=null===(n=e[0])||void 0===n?void 0:n.filter(function(t){var e;return-1!==(null===(e=null==t?void 0:t.roles)||void 0===e?void 0:e.findIndex(function(t){return t.type===w.a.MONITORING_STAFF}))}),t.episodes=e[1],t.careplans=e[2],t.userVitalAlerts=e[3]})}},{key:"validateProfileReadiness",value:function(){this._router.navigate([],{queryParams:{tab:"episodes"},queryParamsHandling:"merge"}),this._patientViewModalService.showProfileReadinessModal()}},{key:"redirectToStaffAssigner",value:function(){var t,e,n;Array.from(this.patientInfo.physicianStaffs.primaryStaff.values()).length?this._router.navigate(["/patient/assign-staff/".concat(null===(t=this.patientInfo)||void 0===t?void 0:t.id,"/").concat(null===(e=this.patientInfo)||void 0===e?void 0:e.locationId,"/").concat(null===(n=this.patientInfo)||void 0===n?void 0:n.fullName)]):this._modalService.create({nzContent:ru,nzComponentParams:{patientInfo:this.patientInfo},nzFooter:null,nzMaskClosable:!1})}}]),t}()).\u0275fac=function(t){return new(t||yb)(_.Rb(m.g),_.Rb(y.a),_.Rb(Nn.a),_.Rb(eb.a),_.Rb(Be.a),_.Rb(Qd.a),_.Rb(O.f),_.Rb(lc.a))},yb.\u0275cmp=_.Lb({type:yb,selectors:[["app-patient-pending-actions"]],inputs:{patientInfo:"patientInfo"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"nzGhost","nzExpandIconPosition"],[3,"nzHeader","nzActive","nzExpandedIcon","nzActiveChange"],["nz-row",""],[4,"isFeaturePermitted"],["nz-col","","nzSpan","8",4,"ngIf"],["header",""],["toggle",""],["nz-col","","nzSpan","8"],["nz-typography",""],["nz-button","","nzType","link",3,"click"],["name","arrowRight","size","12px"],["nz-button","","nzType","link",3,"routerLink","queryParams"],["id","toggle","nz-button","","nzType","text"],["nz-typography","",3,"ngStyle",4,"ngIf"],["nz-typography","","nzType","success",4,"ngIf"],["nz-typography","",3,"ngStyle"],["nz-typography","","nzType","success"]],template:function(t,e){1&t&&_.Vc(0,Db,18,15,"ng-container",0),2&t&&_.rc("ngIf",!e.loading&&(!(null!=e.clinicians&&e.clinicians.length)||!(null!=e.episodes&&e.episodes.totalCount)||(null==e.tenantConfig||null==e.tenantConfig.vitalConfig?null:e.tenantConfig.vitalConfig.enabled)&&!(null!=e.userVitalAlerts&&e.userVitalAlerts.length)))},directives:[h.q,ib.a,ib.c,Z.c,ln.a,Z.a,H.a,M.a,P.a,he.a,m.j,h.r],pipes:[Qt.a],styles:["[_nghost-%COMP%]     .ant-collapse{width:100%;border-radius:15px;margin:15px 0;border:1px solid #dedede;background:#393939 0 0 no-repeat padding-box}nz-collapse-panel[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]     .ant-collapse-header{padding:12px 16px 0!important}#toggle[_ngcontent-%COMP%]{float:right;cursor:pointer}h4[_ngcontent-%COMP%]{color:var(--neutral-color)!important}h5[_ngcontent-%COMP%]{color:#dedede!important;font-size:12px!important}[_nghost-%COMP%]     .ant-btn-link{padding:unset;margin-top:-5px;margin-left:-2px}[_nghost-%COMP%]     .ant-btn{border:0}app-icons[_ngcontent-%COMP%]{margin:5px;vertical-align:middle}"]}),yb),Eb=function t(){b(this,t)},Xb=function(t){return{patientName:t}};function Tb(t,e){if(1&t&&(_.Xb(0,"div",5),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()),2&t){var n=_.ic();_.tc("routerLink","/patient/edit/",null==n.patientInfo?null:n.patientInfo.id,""),_.rc("queryParams",_.yc(6,Xb,null==n.patientInfo?null:n.patientInfo.fullName)),_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,4,"PATIENT.EDIT_PROFILE"))}}function zb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().addGuardian()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"PATIENT.ADD_GUARDIAN")))}function _b(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().addAllergy()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"PATIENT.ADD_ALLERGIES")))}function Ob(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().addContact()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"COMMON.ADD_CONTACT")))}function Mb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().addResource()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"COMMON.ADD_HOME_COMMUNITY_RESOURCE")))}function Ab(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",11),_.Xb(1,"a",12),_.ec("nzOnConfirm",function(){return _.Lc(n),_.ic().disableUser()}),_.Xb(2,"div",6),_.Sb(3,"app-icons",13),_.Wb(),_.Xc(4," \xa0 "),_.Xb(5,"strong",14),_.Xb(6,"label",15),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Wb(),_.Xc(9," \xa0 "),_.Sb(10,"app-icons",9),_.Wb(),_.Wb()}2&t&&(_.Db(3),_.rc("originalStyle",!0),_.Db(4),_.Yc(_.kc(8,2,"PATIENT.DEACTIVATE_PROFILE")))}function Pb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().dischargePatient()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"PATIENT.DISCHARGE_PATIENT")))}function Nb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().markPatientAsNotOnboarded()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"PATIENT.NOT_ONBOARDED_REASON.MARK_AS_NOT_ONBOARDED")))}function Wb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",10),_.ec("click",function(){return _.Lc(n),_.ic().assignSiteAndPhysician()}),_.Xb(1,"div",6),_.Sb(2,"app-icons",7),_.Wb(),_.Xc(3," \xa0 "),_.Xb(4,"strong",8),_.Xc(5),_.jc(6,"translate"),_.Wb(),_.Xc(7," \xa0 "),_.Sb(8,"app-icons",9),_.Wb()}2&t&&(_.Db(2),_.rc("originalStyle",!0),_.Db(3),_.Yc(_.kc(6,2,"STAFF.ASSIGN_PHYSICIAN")))}var Rb,xb=function(){return[32,32]},kb=function(){return["DELETE_PATIENT"]},wb=((Rb=function(t){r(n,t);var e=l(n);function n(t,i,a,r,o,l){var s;return b(this,n),(s=e.call(this))._patientsService=t,s._notificationsService=i,s._patientsViewService=a,s._patientViewRefreshService=r,s._patientsEventLogger=o,s._router=l,s}return d(n,[{key:"ngOnInit",value:function(){this.activeRoleType=localStorage.getItem("loggedInUserRole")}},{key:"recoverPassword",value:function(){var t,e,n,i=this;(null===(t=this.patientInfo)||void 0===t?void 0:t.email)&&(this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_recover_password"),this._patientsService.resetPassword(null===(n=this.patientInfo)||void 0===n?void 0:n.email).subscribe(function(){i._notificationsService.success("Password Recovery","Password has been sent to the registered e-mail address!")}))}},{key:"disableUser",value:function(){var t,e,n=this,i=new Eb;i.op="replace",i.path="/isActive",i.value="false",this._patientsEventLogger.patientDetailsDisableActionEvent(null===(t=this.patientInfo)||void 0===t?void 0:t.id,null===(e=this.patientInfo)||void 0===e?void 0:e.fullName,"quick_action_disable_user"),this._patientsService.disableUser(this.patientInfo.id,i).subscribe(function(){n._notificationsService.success("Deactivation","Patient deactivated successfully!"),n._router.navigate(["patient"])})}},{key:"addGuardian",value:function(){var t,e,n=this,i=this._patientsViewService.showGuardianModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id);this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_add_guardian"),i.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&n._patientViewRefreshService.refreshGuardians()})}},{key:"addContact",value:function(){var t,e,n=this,i=this._patientsViewService.showContactModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id);this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_add_contact"),i.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&n._patientViewRefreshService.refreshContacts()})}},{key:"addResource",value:function(){var t,e=this;this._patientsViewService.showResourceModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&e._patientViewRefreshService.refreshCommunityResources()})}},{key:"addAllergy",value:function(){var t,e,n=this,i=this._patientsViewService.showAllergyModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id);this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_add_allergy"),i.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&n._patientViewRefreshService.refreshAllergies(t)})}},{key:"dischargePatient",value:function(){var t,e,n,i=this,a=this._patientsViewService.showDischargePatientModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id,null===(e=this.patientInfo)||void 0===e?void 0:e.fullName);this._patientsEventLogger.patientDetailsActionEvent(null===(n=this.patientInfo)||void 0===n?void 0:n.id,"quick_action_discharge_patient"),a.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){var e;i._router.navigate(["patient/view/",null===(e=i.patientInfo)||void 0===e?void 0:e.id]),window.location.reload()})}},{key:"markPatientAsNotOnboarded",value:function(){var t,e,n,i=this,a=this._patientsViewService.showPatientNotOnboardedModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id,null===(e=this.patientInfo)||void 0===e?void 0:e.fullName);this._patientsEventLogger.patientDetailsActionEvent(null===(n=this.patientInfo)||void 0===n?void 0:n.id,"quick_action_mark_patient_as_not_onboarded"),a.afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){var e;i._router.navigate(["patient/view/",null===(e=i.patientInfo)||void 0===e?void 0:e.id]),t&&window.location.reload()})}},{key:"assignSiteAndPhysician",value:function(){var t,e,n,i=this,a=null===(t=this.patientInfo)||void 0===t?void 0:t.locations[0].id;this._patientsViewService.showSiteAndPhysicianUpdate(null===(e=this.patientInfo)||void 0===e?void 0:e.id,null===(n=this.patientInfo)||void 0===n?void 0:n.fullName,a).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){var e,n;t&&(i._patientsEventLogger.patientDetailsActionEvent(null===(e=i.patientInfo)||void 0===e?void 0:e.id,"assign_site_physician_for_discharged_or_not_onboarded_patient"),i._router.navigate(["/patient/assign/physician/".concat(null===(n=i.patientInfo)||void 0===n?void 0:n.id)],{queryParams:{role:w.a.PHYSICIAN}}))})}}]),n}(D.a)).\u0275fac=function(t){return new(t||Rb)(_.Rb(y.a),_.Rb(V.b),_.Rb(lc.a),_.Rb(md.a),_.Rb(X.a),_.Rb(m.g))},Rb.\u0275cmp=_.Lb({type:Rb,selectors:[["app-patient-quick-actions"]],inputs:{patientInfo:"patientInfo"},features:[_.Ab],decls:14,vars:15,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"click",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",4,"isFeaturePermitted"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams"],[1,"profile-icon"],["name","profileEdit","size","32px",3,"originalStyle"],[1,"action-button"],["name","arrowRight"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","8"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to disable this patient?",3,"nzOnConfirm"],["name","profileDelete","size","32px",3,"originalStyle"],["nz-typography","","nzType","danger",1,"action-button"],["nz-typography","","nzType","danger"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"h4"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"div",1),_.Vc(5,Tb,9,8,"div",2),_.Vc(6,zb,9,4,"div",3),_.Vc(7,_b,9,4,"div",3),_.Vc(8,Ob,9,4,"div",3),_.Vc(9,Mb,9,4,"div",3),_.Vc(10,Ab,11,4,"div",4),_.Vc(11,Pb,9,4,"div",3),_.Vc(12,Nb,9,4,"div",3),_.Vc(13,Wb,9,4,"div",3),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,11,"PATIENT.OTHER_ACCOUNT_ACTIONS")),_.Db(2),_.rc("nzGutter",_.xc(13,xb)),_.Db(1),_.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("isFeaturePermitted",_.xc(14,kb)),_.Db(1),_.rc("ngIf","ACTIVE"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"SUSPENDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"FLAGGED_FOR_DISQUALIFICATION"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","REGISTERED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","TENANT_ADMIN"==e.activeRoleType&&"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)))},directives:[Z.c,h.q,ln.a,Z.a,m.h,he.a,ou.a,H.a],pipes:[Qt.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{width:100%;padding-bottom:32px!important;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey)}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;margin-bottom:15px}[_nghost-%COMP%]     .ant-col-6{cursor:pointer}.profile-icon[_ngcontent-%COMP%]{padding:8px;background-color:#e9e9e9;border-radius:50%;height:50px;width:50px;text-align:center;display:inline-block}strong[_ngcontent-%COMP%]{line-height:40px}app-icons[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{vertical-align:text-bottom;display:inline-block;height:70%}app-icons[_ngcontent-%COMP%]{line-height:50px}.profile-icon[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:unset}@media screen and (orientation:portrait){.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;height:-webkit-fit-content}}.action-button[_ngcontent-%COMP%]{cursor:pointer}"]}),Rb);function Vb(t,e){if(1&t&&_.Sb(0,"app-patient-status-notification",3),2&t){var n=_.ic(2);_.rc("patientInfo",n.patientInfo)}}function Lb(t,e){if(1&t&&_.Sb(0,"app-patient-pending-actions",3),2&t){var n=_.ic(2);_.rc("patientInfo",n.patientInfo)}}function Fb(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",2),_.Vc(1,Vb,1,1,"app-patient-status-notification",1),_.Vc(2,Lb,1,1,"app-patient-pending-actions",1),_.Xb(3,"h4"),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Sb(6,"app-patient-basic-information",3),_.Sb(7,"nz-divider"),_.Xb(8,"h4"),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Sb(11,"app-patient-organisation-information",3),_.Sb(12,"app-patient-physicians",3),_.Sb(13,"nz-divider"),_.Xb(14,"app-patient-clinicians-information",4),_.ec("refresh",function(t){return _.Lc(n),_.ic().onRefresh(t)}),_.Wb(),_.Sb(15,"nz-divider"),_.Xb(16,"h4"),_.Xc(17),_.jc(18,"translate"),_.Wb(),_.Sb(19,"app-patient-health-information",3),_.Xb(20,"h4"),_.Xc(21),_.jc(22,"translate"),_.Wb(),_.Sb(23,"app-patient-insurance-information",3),_.Sb(24,"app-patient-assigned-devices",3),_.Sb(25,"app-patient-guardians-information",3),_.Sb(26,"app-patient-allergies-information",3),_.Sb(27,"app-patient-contacts-information",3),_.Sb(28,"app-home-community",5),_.Wb()}if(2&t){var i=_.ic();_.Db(1),_.rc("ngIf","FLAGGED_FOR_DISQUALIFICATION"===(null==i.patientInfo?null:i.patientInfo.patientStatus)||"SUSPENDED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)||"DISCHARGED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf","ACTIVE"===(null==i.patientInfo?null:i.patientInfo.patientStatus)||"REGISTERED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)),_.Db(2),_.Yc(_.kc(5,17,"COMMON.BASICINFO")),_.Db(2),_.rc("patientInfo",i.patientInfo),_.Db(3),_.Yc(_.kc(10,19,"PATIENT.ORGANIZATIONAL_INFORMATION")),_.Db(2),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("patientInfo",i.patientInfo),_.Db(2),_.rc("patientInfo",i.patientInfo),_.Db(3),_.Yc(_.kc(18,21,"PATIENT.HEALTH_INFORMATION")),_.Db(2),_.rc("patientInfo",i.patientInfo),_.Db(2),_.Yc(_.kc(22,23,"PATIENT.INSURANCE_INFORMATION")),_.Db(2),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("patientId",null==i.patientInfo?null:i.patientInfo.id)}}function Ub(t,e){if(1&t&&_.Sb(0,"app-patient-quick-actions",3),2&t){var n=_.ic();_.rc("patientInfo",n.patientInfo)}}var jb,Yb,Bb,Hb,Gb=((jb=function t(){var e=this;b(this,t),this.refresh=new _.n,this.onRefresh=function(t){e.refresh.emit(t)}}).\u0275fac=function(t){return new(t||jb)},jb.\u0275cmp=_.Lb({type:jb,selectors:[["app-patient-information"]],inputs:{patientInfo:"patientInfo"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],[3,"patientInfo",4,"ngIf"],[1,"container"],[3,"patientInfo"],[3,"patientInfo","refresh"],[3,"patientId"]],template:function(t,e){1&t&&(_.Vc(0,Fb,29,25,"div",0),_.Vc(1,Ub,1,1,"app-patient-quick-actions",1)),2&t&&(_.rc("ngIf",e.patientInfo),_.Db(1),_.rc("ngIf",e.patientInfo))},directives:[h.q,wc,G.a,Hc,au,Cu,Ku,Ju,vd,Xd,Wd,Fd,qd,Kd.a,Cb,wb],pipes:[Qt.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}"]}),jb),Zb=o("sG7K"),$b=o("i7mu"),qb=o("IZEq"),Kb=o("2Vo4"),Qb=((Yb=function(){function t(){b(this,t),this.showAlertHistory$=new Kb.a(!1)}return d(t,[{key:"getShowAlertHistoryObservable",value:function(){return this.showAlertHistory$.asObservable()}},{key:"setShowAlertHistoryObservable",value:function(t){this.showAlertHistory$.next(t)}}]),t}()).\u0275fac=function(t){return new(t||Yb)},Yb.\u0275prov=_.Nb({token:Yb,factory:Yb.\u0275fac,providedIn:"root"}),Yb),Jb=o("7Xlp"),tp=o("SxV6"),ep=((Bb=function(){function t(e){b(this,t),this._http=e,this.rootUrl="".concat(E.g.url,"/v3/almanac/alerts-preference-history")}return d(t,[{key:"getPatientAlertHistory",value:function(t){return this._http.get("".concat(this.rootUrl,"/").concat(t)).pipe(Object(tp.a)())}}]),t}()).\u0275fac=function(t){return new(t||Bb)(_.bc(C.c))},Bb.\u0275prov=_.Nb({token:Bb,factory:Bb.\u0275fac,providedIn:"root"}),Bb),np=o("Ff2k"),ip=((Hb=function(){function t(){b(this,t),this.limitTypeMap=new Map([["limit.min","Min Limit"],["limit.max","Max Limit"]])}return d(t,[{key:"transform",value:function(t){return this.limitTypeMap.get(t)||""}}]),t}()).\u0275fac=function(t){return new(t||Hb)},Hb.\u0275pipe=_.Qb({name:"vitalLimitTypeName",type:Hb,pure:!0}),Hb);function ap(t,e){if(1&t&&(_.Xb(0,"li"),_.Xc(1),_.jc(2,"vitalLimitTypeName"),_.Xb(3,"strong"),_.Xc(4),_.jc(5,"number"),_.jc(6,"lowercase"),_.Wb(),_.Wb()),2&t){var n=_.ic().$implicit,i=_.ic().$implicit,a=_.ic(4);_.Db(1),_.bd(" Changed ",i.parameterType," ",n.context?n.context:""," ",_.kc(2,5,n.name)," to "),_.Db(3),_.ad("",_.lc(5,7,n.currentValue,"1.0-0")," ",_.kc(6,10,a.vitalAndUnits.get(i.parameterType)),"")}}function rp(t,e){if(1&t&&(_.Xb(0,"li"),_.Xc(1," Changed "),_.Xb(2,"strong"),_.Xc(3),_.Wb(),_.Xc(4," max and min limits back to the default values "),_.Wb()),2&t){var n=_.ic(2).$implicit;_.Db(3),_.Yc(n.parameterType)}}function op(t,e){if(1&t&&(_.Vb(0),_.Vc(1,ap,7,12,"li",0),_.Vc(2,rp,5,1,"li",0),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngIf","limit.min"===n.name||"limit.max"===n.name),_.Db(1),_.rc("ngIf","enabled"===n.name&&"false"===n.currentValue)}}function lp(t,e){if(1&t&&(_.Xb(0,"nz-list-item"),_.Xb(1,"p"),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Xb(4,"ul"),_.Vc(5,op,3,2,"ng-container",5),_.Wb(),_.Xb(6,"p"),_.Xc(7,"Modified by "),_.Xb(8,"strong"),_.Xc(9),_.Wb(),_.Wb(),_.Xb(10,"p"),_.Xc(11),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Yc(_.lc(3,4,n.dateOfChange+"Z","dd MMMM Y, hh:mm a")),_.Db(3),_.rc("ngForOf",null==n?null:n.changes),_.Db(4),_.Yc(n.author),_.Db(2),_.Yc(null==n?null:n.reason)}}function sp(t,e){if(1&t&&(_.Xb(0,"nz-list"),_.Vc(1,lp,12,7,"nz-list-item",5),_.Wb()),2&t){var n=_.ic(3);_.Db(1),_.rc("ngForOf",null==n.alertHistory?null:n.alertHistory.vitalAlertPreferenceHistory)}}function cp(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"h3"),_.Xc(2),_.Wb(),_.Vc(3,sp,2,1,"nz-list",2),_.Sb(4,"nz-divider"),_.Ub()),2&t){_.ic();var n=_.Ic(3),i=_.ic();_.Db(2),_.Zc("Log for ",i.alertHistory.patient,""),_.Db(1),_.rc("ngIf",(null==i.alertHistory||null==i.alertHistory.vitalAlertPreferenceHistory?null:i.alertHistory.vitalAlertPreferenceHistory.length)>0)("ngIfElse",n)}}function up(t,e){1&t&&(_.Xb(0,"p"),_.Xc(1,"No modifications have been made to the alerts configuration yet."),_.Wb())}function dp(t,e){1&t&&(_.Xb(0,"h3"),_.Xc(1,"No History Found."),_.Wb())}function bp(t,e){if(1&t&&(_.Vb(0),_.Vc(1,cp,5,3,"ng-container",2),_.Vc(2,up,2,0,"ng-template",null,3,_.Wc),_.Vc(4,dp,2,0,"ng-template",null,4,_.Wc),_.Ub()),2&t){var n=_.Ic(5),i=_.ic();_.Db(1),_.rc("ngIf",i.alertHistory)("ngIfElse",n)}}function pp(t,e){1&t&&_.Sb(0,"nz-spin",6)}var fp,gp,hp=((fp=function(){function t(e,n,i){b(this,t),this.alertHistoryDrawerService=e,this.alertHistoryService=n,this.appInsightsService=i}return d(t,[{key:"ngOnInit",value:function(){this.loading=!0,this.alertHistoryDrawerService.setShowAlertHistoryObservable(!0),this.populateAlertHistory();var t=new Map([["USER_ID",localStorage.getItem("loggedInUser")],["TENANT_ID",localStorage.getItem("loggedInTenant")],["USER_ACCOUNT_TYPE",localStorage.getItem("loggedInUserAccountType")],["PATIENT_ID",this.patientId]]);this.appInsightsService.logEvent("SHOW_VITAL_ALERT_HISTORY",t)}},{key:"ngOnDestroy",value:function(){this.alertHistoryDrawerService.setShowAlertHistoryObservable(!1)}},{key:"populateAlertHistory",value:function(){var t=this;this.alertHistoryService.getPatientAlertHistory(this.patientId).subscribe(function(e){var n,i;t.alertHistory=e,(null===(i=null===(n=t.alertHistory)||void 0===n?void 0:n.vitalAlertPreferenceHistory)||void 0===i?void 0:i.length)>0&&(t.alertHistory.vitalAlertPreferenceHistory.sort(function(t,e){return new Date(e.dateOfChange).getTime()-new Date(t.dateOfChange).getTime()}),t.alertHistory.vitalAlertPreferenceHistory.forEach(function(t){var e,n;t.reason=null===(n=null===(e=null==t?void 0:t.changes)||void 0===e?void 0:e.find(function(t){return"reason"===t.name}))||void 0===n?void 0:n.currentValue})),t.loading=!1},function(e){t.loading=!1})}}]),t}()).\u0275fac=function(t){return new(t||fp)(_.Rb(Qb),_.Rb(ep),_.Rb(Jb.a))},fp.\u0275cmp=_.Lb({type:fp,selectors:[["app-alert-history"]],inputs:{patientId:"patientId",vitalAndUnits:"vitalAndUnits"},decls:2,vars:2,consts:[[4,"ngIf"],["nzSimple","",4,"ngIf"],[4,"ngIf","ngIfElse"],["noModifications",""],["noHistory",""],[4,"ngFor","ngForOf"],["nzSimple",""]],template:function(t,e){1&t&&(_.Vc(0,bp,6,2,"ng-container",0),_.Vc(1,pp,1,0,"nz-spin",1)),2&t&&(_.rc("ngIf",!e.loading),_.Db(1),_.rc("ngIf",e.loading))},directives:[h.q,G.a,np.a,h.p,np.e,Wn.a],pipes:[h.e,ip,h.f,h.n],styles:["p[_ngcontent-%COMP%]{color:#888;font-size:12px;margin-bottom:0}h3[_ngcontent-%COMP%]{font-weight:700}ul[_ngcontent-%COMP%]{padding-left:0;font-size:14px}li[_ngcontent-%COMP%]::marker{color:var(--primary-color)}[_nghost-%COMP%]     .ant-list-item{display:block}nz-spin[_ngcontent-%COMP%]{margin-top:2%;text-align:center}nz-divider[_ngcontent-%COMP%]{border-width:1px;border-style:inset}"]}),fp),vp=o("1MPZ"),mp=function t(e){var i;if(b(this,t),e&&(this.limitType=e.limitType,this.limit=Object.assign({},e.limit),this.notifyPatient=e.notifyPatient,this.notifyCaretaker=e.notifyCaretaker,this.notifyGuardian=e.notifyGuardian,this.tags=Object.assign({},e.tags),(null===(i=e.contexts)||void 0===i?void 0:i.length)>0)){this.contexts=new Array;var a,r=n(e.contexts);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=new vp.a;l.answer=o.answer,l.title=o.title,l.limitType=o.limitType,l.limit=Object.assign({},o.limit),this.contexts.push(l)}}catch(s){r.e(s)}finally{r.f()}}},Sp=function(t){return t.MIN_MAX="MIN_MAX",t.INCREASE_DECREASE="INCREASE_DECREASE",t.INCREASE_DECREASE_IN_PERCENTAGE="INCREASE_DECREASE_IN_PERCENTAGE",t}({}),Ip=function t(){b(this,t)},Dp=function t(e){var i;if(b(this,t),e){if(this.patientId=e.patientId,this.label=e.label,this.unit=e.unit,this.vital=e.vital,this.parameter=e.parameter,this.limitType=e.limitType,this.limit=Object.assign({},e.limit),this.validRange=Object.assign({},e.validRange),this.enabled=e.enabled,this.notifyPatient=e.notifyPatient,this.notifyCaretaker=e.notifyCaretaker,this.notifyGuardian=e.notifyGuardian,this.tags=Object.assign({},e.tags),this.reason=e.reason,(null===(i=e.contexts)||void 0===i?void 0:i.length)>0){this.contexts=new Array;var a,r=n(e.contexts);try{for(r.s();!(a=r.n()).done;){var o=a.value,l=new vp.a;l.answer=o.answer,l.title=o.title,l.limitType=o.limitType,l.limit=Object.assign({},o.limit),this.contexts.push(l)}}catch(s){r.e(s)}finally{r.f()}}e.defaultVitalAlert&&(this.defaultVitalAlert=new mp(e.defaultVitalAlert))}},yp=function t(){b(this,t)},Cp=((gp=function(){function t(){b(this,t)}return d(t,[{key:"createDefaultVitalAlertForTenantVitalWithContext",value:function(t){var e,i,a=new mp;if(t&&(a.limitType=Sp.MIN_MAX,a.limit=new Ip,this.populateVitalNotificationsFromTenantVitalBlueprint(a,t),a.tags=this.createVitalTagsFromTenantVitalBlueprint(t),(null===(e=t.contexts)||void 0===e?void 0:e.length)>0)){a.contexts=new Array;var r,o=n(t.contexts);try{for(o.s();!(r=o.n()).done;){var l=r.value;if((null===(i=null==l?void 0:l.options)||void 0===i?void 0:i.length)>0){var s,c=n(l.options);try{for(c.s();!(s=c.n()).done;){var u=s.value;a.contexts.push(this.createAlertContextFromOptions(u))}}catch(d){c.e(d)}finally{c.f()}}}}catch(d){o.e(d)}finally{o.f()}}return a}},{key:"createAlertContextFromOptions",value:function(t){var e=new vp.a;return e.answer=t.label,e.limitType=Sp.MIN_MAX,e.limit=new Ip,e.limit.min=t.limit.minimum,e.limit.max=t.limit.maximum,e}},{key:"createVitalTagsFromTenantVitalBlueprint",value:function(t){var e=new yp;return e.active=t.active,e.notesEnabled=t.notesEnabled,e.graphEnabled=t.graphEnabled,e}},{key:"populateVitalNotificationsFromTenantVitalBlueprint",value:function(t,e){e.notify&&(t.notifyPatient=e.notify.patient,t.notifyCaretaker=e.notify.caretaker,t.notifyGuardian=e.notify.guardian)}},{key:"createVitalAlertForTenantVitalWithContext",value:function(t,e){var i,a,r,o,l;if(e)l=e;else{(l=new Dp).enabled=!1,l.vital=t.type,l.parameter=t.parameters[0].type,l.limitType=Sp.MIN_MAX,l.limit=new Ip,l.contexts=new Array;var s,c=n(t.contexts);try{for(c.s();!(s=c.n()).done;){var u,d=n(s.value.options);try{for(d.s();!(u=d.n()).done;){var b=u.value;l.contexts.push(this.createAlertContextFromOptions(b))}}catch(p){d.e(p)}finally{d.f()}}}catch(p){c.e(p)}finally{c.f()}this.populateVitalNotificationsFromTenantVitalBlueprint(l,t)}return l.validRange=new Ip,l.validRange.max=null===(i=t.parameters[0])||void 0===i?void 0:i.validLimit.maximum,l.validRange.min=null===(a=t.parameters[0])||void 0===a?void 0:a.validLimit.minimum,l.defaultVitalAlert=this.createDefaultVitalAlertForTenantVitalWithContext(t),this.populateVitalNotificationsFromTenantVitalBlueprint(l.defaultVitalAlert,t),l.label=(null===(r=t.parameters[0])||void 0===r?void 0:r.label)||t.label,l.unit=(null===(o=t.parameters[0])||void 0===o?void 0:o.unit.toLowerCase())||"",l.tags=this.createVitalTagsFromTenantVitalBlueprint(t),l}},{key:"createDefaultVitalAlertFromTenantVitalParameter",value:function(t){var e=new mp;return t&&(e.contexts=[],e.limitType=Sp.MIN_MAX,e.limit=new Ip,e.limit.max=t.globalLimit.maximum,e.limit.min=t.globalLimit.minimum),e}},{key:"createVitalAlertFromTenantVitalParameter",value:function(t,e){var n,i,a,r,o;return e?o=e:((o=new Dp).parameter=t.type,o.contexts=[],o.limitType=Sp.MIN_MAX,o.limit=new Ip,o.limit.max=null===(n=t.globalLimit)||void 0===n?void 0:n.maximum,o.limit.min=null===(i=t.globalLimit)||void 0===i?void 0:i.minimum,o.enabled=!1),o.validRange=new Ip,o.validRange.max=null===(a=null==t?void 0:t.validLimit)||void 0===a?void 0:a.maximum,o.validRange.min=null===(r=null==t?void 0:t.validLimit)||void 0===r?void 0:r.minimum,o.defaultVitalAlert=this.createDefaultVitalAlertFromTenantVitalParameter(t),o}}]),t}()).\u0275fac=function(t){return new(t||gp)},gp.\u0275prov=_.Nb({token:gp,factory:gp.\u0275fac,providedIn:"root"}),gp),Ep=o("F6ss"),Xp=o("s/pX"),Tp=o("Z8/p");function zp(t,e){if(1&t&&(_.Xb(0,"nz-tag",1),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t){var n=_.ic();_.rc("ngClass",n.enabled?"enabled-tag":"disabled-tag"),_.Db(1),_.Yc(_.kc(2,2,"VITAL.GRAPH"))}}function _p(t,e){if(1&t&&(_.Xb(0,"nz-tag",1),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t){var n=_.ic();_.rc("ngClass",n.enabled?"enabled-tag":"disabled-tag"),_.Db(1),_.Yc(_.kc(2,2,"VITAL.NOTES"))}}function Op(t,e){if(1&t&&(_.Xb(0,"nz-tag",1),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t){var n=_.ic();_.rc("ngClass",n.enabled?"enabled-tag":"disabled-tag"),_.Db(1),_.Yc(_.kc(2,2,"VITAL.ACTIVE"))}}var Mp,Ap=((Mp=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Mp)},Mp.\u0275cmp=_.Lb({type:Mp,selectors:[["app-vital-tags"]],inputs:{vitalTags:"vitalTags",enabled:"enabled"},decls:3,vars:3,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(t,e){1&t&&(_.Vc(0,zp,3,4,"nz-tag",0),_.Vc(1,_p,3,4,"nz-tag",0),_.Vc(2,Op,3,4,"nz-tag",0)),2&t&&(_.rc("ngIf",null==e.vitalTags?null:e.vitalTags.graphEnabled),_.Db(1),_.rc("ngIf",null==e.vitalTags?null:e.vitalTags.notesEnabled),_.Db(1),_.rc("ngIf",null==e.vitalTags?null:e.vitalTags.active))},directives:[h.q,za.a,h.o],pipes:[Qt.a],styles:["nz-tag[_ngcontent-%COMP%]{border-radius:2px;border-style:none;width:36px;height:18px;font-size:10px;line-height:14px;letter-spacing:0;padding:2px 0 0 4px}.enabled-tag[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--neutral-color)}.disabled-tag[_ngcontent-%COMP%]{background-color:var(--light-grey);color:#888;opacity:.4}"]}),Mp);function Pp(t,e){if(1&t){var n=_.Yb();_.Xb(0,"span"),_.Xb(1,"p",13),_.Xc(2),_.Wb(),_.Xb(3,"div",14),_.Xb(4,"label",15),_.Xb(5,"strong"),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Sb(8,"br"),_.Xb(9,"span"),_.Xc(10),_.Wb(),_.Wb(),_.Xb(11,"nz-input-number",16),_.ec("ngModelChange",function(t){return e.$implicit.limit.max=t})("ngModelChange",function(t){return _.Lc(n),_.ic(2).onVitalLimitChange(t,"max")}),_.Wb(),_.Wb(),_.Xb(12,"div",14),_.Xb(13,"label",17),_.Xb(14,"strong"),_.Xc(15),_.jc(16,"translate"),_.Wb(),_.Sb(17,"br"),_.Xb(18,"span"),_.Xc(19),_.Wb(),_.Wb(),_.Xb(20,"nz-input-number",18),_.ec("ngModelChange",function(t){return e.$implicit.limit.min=t})("ngModelChange",function(t){return _.Lc(n),_.ic(2).onVitalLimitChange(t,"min")}),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=e.$implicit,a=_.ic(2);_.Db(2),_.Zc(" ",null==i?null:i.answer," "),_.Db(4),_.Yc(_.kc(7,13,"VITAL.MAX_LIMIT")),_.Db(4),_.Yc(a.vitalAlert.unit),_.Db(1),_.rc("ngModel",i.limit.max)("nzMin",a.vitalAlert.validRange.min)("nzMax",a.vitalAlert.validRange.max)("nzStep",1),_.Db(4),_.Yc(_.kc(16,15,"VITAL.MIN_LIMIT")),_.Db(4),_.Yc(a.vitalAlert.unit),_.Db(1),_.rc("ngModel",i.limit.min)("nzMin",a.vitalAlert.validRange.min)("nzMax",a.vitalAlert.validRange.max)("nzStep",1)}}function Np(t,e){if(1&t&&(_.Xb(0,"div",11),_.Vc(1,Pp,21,17,"span",12),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngForOf",null==n.vitalAlert?null:n.vitalAlert.contexts)}}function Wp(t,e){1&t&&(_.Xb(0,"label",19),_.Xc(1,"Required"),_.Wb())}function Rp(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",11),_.Xb(1,"span",14),_.Xb(2,"label",15),_.Xb(3,"strong"),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Sb(6,"br"),_.Xb(7,"span"),_.Xc(8),_.Wb(),_.Wb(),_.Xb(9,"nz-input-number",16),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().vitalAlert.limit.max=t})("ngModelChange",function(t){return _.Lc(n),_.ic().onVitalLimitChange(t,"max")}),_.Wb(),_.Wb(),_.Xb(10,"span",14),_.Xb(11,"label",17),_.Xb(12,"strong"),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Sb(15,"br"),_.Xb(16,"span"),_.Xc(17),_.Wb(),_.Wb(),_.Xb(18,"nz-input-number",18),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().vitalAlert.limit.min=t})("ngModelChange",function(t){return _.Lc(n),_.ic().onVitalLimitChange(t,"min")}),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(4),_.Yc(_.kc(5,12,"VITAL.MAX_LIMIT")),_.Db(4),_.Yc(null==i.vitalAlert?null:i.vitalAlert.unit),_.Db(1),_.rc("ngModel",i.vitalAlert.limit.max)("nzMin",i.vitalAlert.validRange.min)("nzMax",i.vitalAlert.validRange.max)("nzStep",1),_.Db(4),_.Yc(_.kc(14,14,"VITAL.MIN_LIMIT")),_.Db(4),_.Yc(i.vitalAlert.unit),_.Db(1),_.rc("ngModel",i.vitalAlert.limit.min)("nzMin",i.vitalAlert.validRange.min)("nzMax",i.vitalAlert.validRange.max)("nzStep",1)}}var xp,kp=function(){return{minRows:4,maxRows:4}},wp=function(t){return{border:t}},Vp=((xp=function(){function t(e,n,i,a,r){b(this,t),this._modalRef=e,this.userVitalAlertService=n,this._notificationsService=i,this.appInsightsService=a,this._translationsService=r,this.loadingSave=!1,this.telemetryProperties=new Map}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.existingVitalAlert=new Dp(this.vitalAlert),this.$translationSubscription=this._translationsService.getMultiple("VITAL.DEFINE_LIMITS","VITAL.DEFINE_DIFFERENT_LIMITS","VITAL.SET_NEW_LIMITS").subscribe(function(e){t.translatedStrings=e,t.title=t.translatedStrings.get("VITAL.SET_NEW_LIMITS").replace("{VITAL}",t.vitalAlert.label)}),this.vitalAlert.reason=""}},{key:"areNotifyUsersChanged",value:function(){return this.vitalAlert.notifyPatient!==this.existingVitalAlert.notifyPatient||this.vitalAlert.notifyCaretaker!==this.existingVitalAlert.notifyCaretaker||this.vitalAlert.notifyGuardian!==this.existingVitalAlert.notifyGuardian}},{key:"onNotifyUsersChange",value:function(){this.notifyUserChanged=this.areNotifyUsersChanged()}},{key:"isVitalAlertChanged",value:function(){var t,e=this;if(this.notifyUserChanged)return!0;if(!((null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0))return this.vitalAlert.limit&&(this.vitalAlert.limit.min!==this.existingVitalAlert.limit.min||this.vitalAlert.limit.max!==this.existingVitalAlert.limit.max);var i,a=n(this.vitalAlert.contexts);try{var r=function(){var t=i.value,n=e.existingVitalAlert.contexts.filter(function(e){return e.answer===t.answer});if(t.limit.max!==n[0].limit.max||t.limit.min!==n[0].limit.min)return{v:!0}};for(a.s();!(i=a.n()).done;){var o=r();if("object"==typeof o)return o.v}}catch(l){a.e(l)}finally{a.f()}return!1}},{key:"areValidMinAndMaxValues",value:function(){var t;if(!((null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0))return this.vitalAlert.limit&&this.vitalAlert.limit.max>this.vitalAlert.limit.min;var e,i=n(this.vitalAlert.contexts);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(!(a.limit.max>a.limit.min))return!1}}catch(r){i.e(r)}finally{i.f()}return!0}},{key:"saveUserVitalAlert",value:function(){var t=this;if(this.saveButtonClicked=!0,this.vitalAlert.reason.trim())if(this.populateAppInsights(),this.loadingSave=!0,this.isVitalAlertChanged()){if(!this.areValidMinAndMaxValues())return this.loadingSave=!1,this.validLimits=!1,this._notificationsService.error("Invalid Min Max Values!!!","Minimum should not be equal to or greater than Maximum value"),void this.appInsightsService.logEvent("INVALID_VITAL_ALERT_VALUES",this.telemetryProperties);this.vitalAlert.enabled=!0;var e=new Tp.a(this.vitalAlert);this.userVitalAlertService.editVitalBlueprintsOfUser(e).subscribe(function(e){t.loadingSave=!1,t.appInsightsService.logEvent("VITAL_ALERT_SAVE_SUCCESS",t.telemetryProperties),t.close(t.vitalAlert)},function(e){t.appInsightsService.logEvent(e),t.appInsightsService.logEvent("VITAL_ALERT_SAVE_ERROR",t.telemetryProperties),t._notificationsService.error("Operation failed!!!","Vital Could not be saved. Please try again later"),t.loadingSave=!1})}else this.appInsightsService.logEvent("VITAL_ALERT_SAVE_LIMIT_VALUE_DUPLICATE",this.telemetryProperties),this._notificationsService.error(this.translatedStrings.get("VITAL.DEFINE_LIMITS"),this.translatedStrings.get("VITAL.DEFINE_DIFFERENT_LIMITS")),this.loadingSave=!1;else this.vitalAlert.reason=""}},{key:"populateAppInsights",value:function(){this.telemetryProperties.set("VITAL_ALERT_ENABLED",this.vitalAlert.enabled?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_NOTIFY_PATIENT",this.vitalAlert.notifyPatient?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_NOTIFY_CARETAKER",this.vitalAlert.notifyCaretaker?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_NOTIFY_GUARDIAN",this.vitalAlert.notifyGuardian?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_PARAMETER",this.vitalAlert.parameter),this.telemetryProperties.set("VITAL_ALERT_VITAL",this.vitalAlert.vital),this.telemetryProperties.set("PATIENT_ID",this.vitalAlert.patientId),this.telemetryProperties.set("VITAL_ALERT_LIMIT_TYPE",this.vitalAlert.limitType),this.telemetryProperties.set("VITAL_ALERT_LIMIT",null!=this.vitalAlert.contexts&&0!=this.vitalAlert.contexts.length?this.vitalAlert.contexts.toString():this.vitalAlert.limit.toString())}},{key:"resetToDefault",value:function(){var t=this;this.appInsightsService.logEvent("VITAL_ALERT_RESET_TO_DEFAULT_CLICKED",this.telemetryProperties),this.userVitalAlertService.deleteVitalBlueprintOfUser(this.vitalAlert.patientId,this.vitalAlert.parameter).subscribe(function(e){t.reset(),t.appInsightsService.logEvent("VITAL_ALERT_RESET_TO_DEFAULT_SUCCESS",t.telemetryProperties),t.close(t.vitalAlert)},function(e){t.appInsightsService.logEvent(e),t.appInsightsService.logEvent("VITAL_ALERT_RESET_TO_DEFAULT_FAILURE",t.telemetryProperties),t._notificationsService.error("Operation failed!!!","Vital Could not be reset to default. Please try again later")})}},{key:"close",value:function(t){this._modalRef.destroy(t)}},{key:"reset",value:function(){var t;if(this.vitalAlert.defaultVitalAlert&&(this.vitalAlert.limitType=this.vitalAlert.defaultVitalAlert.limitType,this.vitalAlert.limit=Object.assign({},this.vitalAlert.defaultVitalAlert.limit),this.vitalAlert.notifyPatient=this.vitalAlert.defaultVitalAlert.notifyPatient,this.vitalAlert.notifyCaretaker=this.vitalAlert.defaultVitalAlert.notifyCaretaker,this.vitalAlert.notifyGuardian=this.vitalAlert.defaultVitalAlert.notifyGuardian,this.vitalAlert.tags=Object.assign({},this.vitalAlert.defaultVitalAlert.tags),(null===(t=this.vitalAlert.defaultVitalAlert.contexts)||void 0===t?void 0:t.length)>0)){this.vitalAlert.contexts=new Array;var e,i=n(this.vitalAlert.defaultVitalAlert.contexts);try{for(i.s();!(e=i.n()).done;){var a=e.value,r=new vp.a;r.answer=a.answer,r.title=a.title,r.limitType=a.limitType,r.limit=Object.assign({},a.limit),this.vitalAlert.contexts.push(r)}}catch(o){i.e(o)}finally{i.f()}}this.vitalAlert.enabled=!1}},{key:"onVitalLimitChange",value:function(t,e){t?"min"===e?this.validLimits=t>=this.vitalAlert.validRange.min:"max"===e&&(this.validLimits=t<=this.vitalAlert.validRange.max):this.validLimits=!1}}]),t}()).\u0275fac=function(t){return new(t||xp)(_.Rb(O.e),_.Rb(eb.a),_.Rb(V.b),_.Rb(Jb.a),_.Rb(Ze.a))},xp.\u0275cmp=_.Lb({type:xp,selectors:[["app-vital-alert-edit"]],inputs:{vitalAlert:"vitalAlert"},decls:35,vars:38,consts:[["class","max-min-limits-div",4,"ngIf","ngIfElse"],["enabled","true",3,"vitalTags"],[1,"notify-div"],["nz-checkbox","",3,"ngModel","ngModelChange"],["nz-checkbox","","nz-tooltip","",3,"nzTooltipTitle","ngModel","ngModelChange"],["rows","4","nz-input","","required","",3,"nzAutosize","placeholder","ngModel","ngStyle","ngModelChange"],["nz-typography","","nzType","danger","style","text-align: right;",4,"ngIf"],[1,"buttons"],["nz-button","","nzSize","large","nzType","default",3,"disabled","click"],["nz-button","","nzSize","large","nzType","primary",3,"nzLoading","disabled","click"],["normalVitalLimit",""],[1,"max-min-limits-div"],[4,"ngFor","ngForOf"],["nz-typography",""],[1,"min-max-limit"],["for","max-limit"],["id","max-limit",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange"],["for","min-limit"],["id","min-limit",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange"],["nz-typography","","nzType","danger",2,"text-align","right"]],template:function(t,e){if(1&t&&(_.Xb(0,"h3"),_.Xc(1,"Set new "),_.Xb(2,"strong"),_.Xc(3),_.Wb(),_.Xc(4," limits"),_.Wb(),_.Vc(5,Np,2,1,"div",0),_.Sb(6,"app-vital-tags",1),_.Xb(7,"div",2),_.Xb(8,"strong"),_.Xc(9,"Notify:"),_.Wb(),_.Xb(10,"label",3),_.ec("ngModelChange",function(t){return e.vitalAlert.notifyPatient=t})("ngModelChange",function(){return e.onNotifyUsersChange()}),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Xb(13,"label",3),_.ec("ngModelChange",function(t){return e.vitalAlert.notifyCaretaker=t})("ngModelChange",function(){return e.onNotifyUsersChange()}),_.Xc(14),_.jc(15,"translate"),_.Wb(),_.Xb(16,"label",4),_.ec("ngModelChange",function(t){return e.vitalAlert.notifyGuardian=t})("ngModelChange",function(){return e.onNotifyUsersChange()}),_.jc(17,"translate"),_.Xc(18),_.jc(19,"translate"),_.Wb(),_.Wb(),_.Xb(20,"label"),_.Xb(21,"strong"),_.Xc(22,"Notes *"),_.Wb(),_.Wb(),_.Xb(23,"textarea",5),_.ec("ngModelChange",function(t){return e.vitalAlert.reason=t}),_.jc(24,"translate"),_.Wb(),_.Vc(25,Wp,2,0,"label",6),_.Xb(26,"span",7),_.Xb(27,"button",8),_.ec("click",function(){return e.resetToDefault()}),_.Xc(28),_.jc(29,"translate"),_.Wb(),_.Xb(30,"button",9),_.ec("click",function(){return e.saveUserVitalAlert()}),_.Xc(31),_.jc(32,"translate"),_.Wb(),_.Wb(),_.Vc(33,Rp,19,16,"ng-template",null,10,_.Wc)),2&t){var n=_.Ic(34);_.Db(3),_.Yc(e.vitalAlert.label),_.Db(2),_.rc("ngIf",(null==e.vitalAlert.contexts?null:e.vitalAlert.contexts.length)>0)("ngIfElse",n),_.Db(1),_.rc("vitalTags",null==e.vitalAlert?null:e.vitalAlert.tags),_.Db(4),_.rc("ngModel",e.vitalAlert.notifyPatient),_.Db(1),_.Yc(_.kc(12,21,"PATIENT")),_.Db(2),_.rc("ngModel",e.vitalAlert.notifyCaretaker),_.Db(1),_.Yc(_.kc(15,23,"CARETAKER")),_.Db(2),_.sc("nzTooltipTitle",_.kc(17,25,"VITAL.NOTIFICATION_GUARDIAN_APP")),_.rc("ngModel",e.vitalAlert.notifyGuardian),_.Db(2),_.Yc(_.kc(19,27,"GUARDIAN")),_.Db(5),_.sc("placeholder",_.kc(24,29,"VITAL.ALERT_CHANGE_EXPLANATION_NOTE")),_.rc("nzAutosize",_.xc(35,kp))("ngModel",e.vitalAlert.reason)("ngStyle",_.yc(36,wp,e.saveButtonClicked&&!e.vitalAlert.reason?"1px solid red":"")),_.Db(2),_.rc("ngIf",e.saveButtonClicked&&!e.vitalAlert.reason),_.Db(2),_.rc("disabled",!e.existingVitalAlert.enabled),_.Db(1),_.Zc(" ",_.kc(29,31,"VITAL.RESET_TO_DEFAULT"),""),_.Db(2),_.rc("nzLoading",e.loadingSave)("disabled",!(e.validLimits||e.notifyUserChanged)),_.Db(1),_.Zc(" ",_.kc(32,33,"VITAL.SAVE"),"")}},directives:[h.q,Ap,q.a,v.u,v.x,wi.d,on.b,on.a,v.d,v.C,h.r,M.a,A.a,P.a,h.p,H.a,ql.a],pipes:[Qt.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start}nz-input-number[_ngcontent-%COMP%]{width:84px;height:40px;margin-left:15px;padding-top:4px}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:12px;color:#bababa;line-height:1}.max-min-limits-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-content:flex-start;margin-bottom:10px}.min-max-limit[_ngcontent-%COMP%]{display:flex;height:40px;margin-bottom:10px}.min-max-limit[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:block;margin-top:5px;line-height:1;width:60px;padding-top:4px}textarea[_ngcontent-%COMP%]{margin-top:5px}button[_ngcontent-%COMP%]{width:150px;margin:10px}.buttons[_ngcontent-%COMP%]{margin-top:15px;align-self:center}app-vital-tags[_ngcontent-%COMP%]{margin-bottom:20px}app-vital-tags[_ngcontent-%COMP%] nz-tag{width:47px;height:20px;font-size:12px;line-height:16px;padding:2px 7px}.notify-div[_ngcontent-%COMP%]{margin-bottom:10px}.notify-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]     .ant-modal-title{border-left:none;padding-left:0;margin-top:15px}p[_ngcontent-%COMP%]{margin-bottom:0;font-weight:700}h3[_ngcontent-%COMP%]{margin-bottom:25px}"]}),xp);function Lp(t,e){1&t&&_.Sb(0,"app-icons",3)}function Fp(t,e){1&t&&_.Sb(0,"app-icons",4)}function Up(t,e){1&t&&_.Sb(0,"app-icons",3)}function jp(t,e){1&t&&_.Sb(0,"app-icons",4)}function Yp(t,e){1&t&&_.Sb(0,"app-icons",3)}function Bp(t,e){1&t&&_.Sb(0,"app-icons",4)}var Hp,Gp,Zp=function(t){return{"disabled-notify":t}},$p=((Hp=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Hp)},Hp.\u0275cmp=_.Lb({type:Hp,selectors:[["app-notify-users"]],inputs:{notifyPatient:"notifyPatient",notifyCaretaker:"notifyCaretaker",notifyGuardian:"notifyGuardian",enabled:"enabled"},decls:16,vars:18,consts:[[3,"ngClass"],["name","check","size","12px","color","#a7c853","strokeColor","#a7c853","strokeWidth","120px",4,"ngIf"],["name","close","size","12px","color","#888888","strokeColor","#888888","strokeWidth","120px",4,"ngIf"],["name","check","size","12px","color","#a7c853","strokeColor","#a7c853","strokeWidth","120px"],["name","close","size","12px","color","#888888","strokeColor","#888888","strokeWidth","120px"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div"),_.Vc(2,Lp,1,0,"app-icons",1),_.Vc(3,Fp,1,0,"app-icons",2),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Xb(6,"div"),_.Vc(7,Up,1,0,"app-icons",1),_.Vc(8,jp,1,0,"app-icons",2),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"div"),_.Vc(12,Yp,1,0,"app-icons",1),_.Vc(13,Bp,1,0,"app-icons",2),_.Xc(14),_.jc(15,"translate"),_.Wb(),_.Wb()),2&t&&(_.rc("ngClass",_.yc(16,Zp,!1===e.enabled)),_.Db(2),_.rc("ngIf",e.notifyPatient),_.Db(1),_.rc("ngIf",!e.notifyPatient),_.Db(1),_.Zc(" ",_.kc(5,10,"VITAL.NOTIFY_PATIENT")," "),_.Db(3),_.rc("ngIf",e.notifyCaretaker),_.Db(1),_.rc("ngIf",!e.notifyCaretaker),_.Db(1),_.Zc(" ",_.kc(10,12,"VITAL.NOTIFY_CLINICIAN")," "),_.Db(3),_.rc("ngIf",e.notifyGuardian),_.Db(1),_.rc("ngIf",!e.notifyGuardian),_.Db(1),_.Zc(" ",_.kc(15,14,"VITAL.NOTIFY_GUARDIAN")," "))},directives:[h.o,h.q,he.a],pipes:[Qt.a],styles:["[_nghost-%COMP%]{font-size:10px;line-height:14px;display:block;margin-top:5px}app-icons[_ngcontent-%COMP%]{margin-right:3px;pointer-events:none}.disabled-notify[_ngcontent-%COMP%]{pointer-events:none;opacity:.4;color:#888}"]}),Hp),qp=function(t){return{"disabled-card":t}},Kp=((Gp=function(){function t(){b(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Gp)},Gp.\u0275cmp=_.Lb({type:Gp,selectors:[["app-max-min-limit"]],inputs:{unit:"unit",minLimit:"minLimit",maxLimit:"maxLimit",enabled:"enabled"},decls:6,vars:14,consts:[[3,"ngClass"],["nzTitle","Max Limit",3,"nzValue","nzSuffix"],["nzTitle","Min Limit",3,"nzValue","nzSuffix"]],template:function(t,e){1&t&&(_.Xb(0,"nz-card",0),_.Sb(1,"nz-statistic",1),_.jc(2,"lowercase"),_.Wb(),_.Xb(3,"nz-card",0),_.Sb(4,"nz-statistic",2),_.jc(5,"lowercase"),_.Wb()),2&t&&(_.rc("ngClass",_.yc(10,qp,!1===e.enabled)),_.Db(1),_.rc("nzValue",e.maxLimit)("nzSuffix",_.kc(2,6,e.unit)),_.Db(2),_.rc("ngClass",_.yc(12,qp,!1===e.enabled)),_.Db(1),_.rc("nzValue",e.minLimit)("nzSuffix",_.kc(5,8,e.unit)))},directives:[Rn.a,h.o,_a.a],pipes:[h.n],styles:["nz-card[_ngcontent-%COMP%]{height:50px;width:84px;display:inline-block;border-radius:5px;background-color:#fbfbfb;border:1px solid #2f4f4f}.disabled-card[_ngcontent-%COMP%]{pointer-events:none;opacity:.4;border:1px solid var(--grey);color:#888}nz-card[_ngcontent-%COMP%] + nz-card[_ngcontent-%COMP%]{margin-left:5px}[_nghost-%COMP%]     .ant-statistic-title{color:var(--tertiary-color);margin-bottom:0;font-weight:600}[_nghost-%COMP%]     .ant-statistic-content-suffix{font-size:12px;margin-left:0}[_nghost-%COMP%]     .ant-statistic-content-value{font-size:12px;font-weight:600}[_nghost-%COMP%]     .ant-statistic-content{font-size:12px}[_nghost-%COMP%]     .ant-card-body{padding:4px 8px}[_nghost-%COMP%]     .ant-card-head-title{padding:8px 0 0!important}"]}),Gp);function Qp(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"h4"),_.Xc(2),_.Wb(),_.Sb(3,"app-max-min-limit",7),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(2),_.Yc(n.answer),_.Db(1),_.rc("minLimit",null==n.limit?null:n.limit.min)("maxLimit",null==n.limit?null:n.limit.max)("unit",i.vitalAlert.unit)}}function Jp(t,e){if(1&t&&(_.Xb(0,"div",5),_.Vc(1,Qp,4,4,"div",6),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngForOf",n.vitalAlert.defaultVitalAlert.contexts)}}function tf(t,e){if(1&t&&_.Sb(0,"app-max-min-limit",7),2&t){var n=_.ic();_.rc("minLimit",n.vitalAlert.defaultVitalAlert.limit.min)("maxLimit",n.vitalAlert.defaultVitalAlert.limit.max)("unit",null==n.vitalAlert?null:n.vitalAlert.unit)}}var ef,nf=((ef=function(){function t(e,n,i){b(this,t),this._modalRef=e,this.userVitalAlertService=n,this._notificationsService=i}return d(t,[{key:"ngOnInit",value:function(){}},{key:"resetToDefault",value:function(){var t=this;this.userVitalAlertService.deleteVitalBlueprintOfUser(this.vitalAlert.patientId,this.vitalAlert.parameter).subscribe(function(e){t.reset(),t._modalRef.destroy(t.vitalAlert)},function(e){t._notificationsService.error("Operation failed!!!","Vital Could not be reset to default. Please try again later")})}},{key:"reset",value:function(){var t;if(this.vitalAlert.defaultVitalAlert&&(this.vitalAlert.limitType=this.vitalAlert.defaultVitalAlert.limitType,this.vitalAlert.limit=Object.assign({},this.vitalAlert.defaultVitalAlert.limit),this.vitalAlert.notifyPatient=this.vitalAlert.defaultVitalAlert.notifyPatient,this.vitalAlert.notifyCaretaker=this.vitalAlert.defaultVitalAlert.notifyCaretaker,this.vitalAlert.notifyGuardian=this.vitalAlert.defaultVitalAlert.notifyGuardian,this.vitalAlert.tags=Object.assign({},this.vitalAlert.defaultVitalAlert.tags),(null===(t=this.vitalAlert.defaultVitalAlert.contexts)||void 0===t?void 0:t.length)>0)){this.vitalAlert.contexts=new Array;var e,i=n(this.vitalAlert.defaultVitalAlert.contexts);try{for(i.s();!(e=i.n()).done;){var a=e.value,r=new vp.a;r.answer=a.answer,r.title=a.title,r.limitType=a.limitType,r.limit=Object.assign({},a.limit),this.vitalAlert.contexts.push(r)}}catch(o){i.e(o)}finally{i.f()}}this.vitalAlert.enabled=!1}}]),t}()).\u0275fac=function(t){return new(t||ef)(_.Rb(O.e),_.Rb(eb.a),_.Rb(V.b))},ef.\u0275cmp=_.Lb({type:ef,selectors:[["app-vital-defaults-reset"]],inputs:{vitalAlert:"vitalAlert"},decls:12,vars:8,consts:[["class","context-min-max-container",4,"ngIf","ngIfElse"],[3,"vitalTags","enabled"],["enabled","true",3,"notifyPatient","notifyCaretaker","notifyGuardian"],["nz-button","","nzType","primary",3,"click"],["normalVitalLimit",""],[1,"context-min-max-container"],[4,"ngFor","ngForOf"],["enabled","true",3,"minLimit","maxLimit","unit"]],template:function(t,e){if(1&t&&(_.Xb(0,"h3"),_.Xc(1,"Do you wish to turn off the patient level alert for "),_.Xb(2,"strong"),_.Xc(3),_.Wb(),_.Xc(4," values and receive alerts as per the default values?"),_.Wb(),_.Vc(5,Jp,2,1,"div",0),_.Sb(6,"app-vital-tags",1),_.Sb(7,"app-notify-users",2),_.Xb(8,"button",3),_.ec("click",function(){return e.resetToDefault()}),_.Xc(9,"Set to default"),_.Wb(),_.Vc(10,tf,1,3,"ng-template",null,4,_.Wc)),2&t){var n=_.Ic(11);_.Db(3),_.Yc(e.vitalAlert.label),_.Db(2),_.rc("ngIf",(null==e.vitalAlert.defaultVitalAlert.contexts?null:e.vitalAlert.defaultVitalAlert.contexts.length)>0)("ngIfElse",n),_.Db(1),_.rc("vitalTags",null==e.vitalAlert?null:e.vitalAlert.defaultVitalAlert.tags)("enabled",!0),_.Db(1),_.rc("notifyPatient",null==e.vitalAlert||null==e.vitalAlert.defaultVitalAlert?null:e.vitalAlert.defaultVitalAlert.notifyPatient)("notifyCaretaker",null==e.vitalAlert||null==e.vitalAlert.defaultVitalAlert?null:e.vitalAlert.defaultVitalAlert.notifyCaretaker)("notifyGuardian",null==e.vitalAlert||null==e.vitalAlert.defaultVitalAlert?null:e.vitalAlert.defaultVitalAlert.notifyGuardian)}},directives:[h.q,Ap,$p,M.a,A.a,P.a,h.p,Kp],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:center;padding-top:10px}.context-min-max-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:center;margin:10px 3px}app-vital-tags[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}button[_ngcontent-%COMP%]{margin-top:20px;width:201px;height:45px;border-radius:5px;font-size:15px}app-max-min-limit[_ngcontent-%COMP%]{margin-bottom:10px}app-max-min-limit[_ngcontent-%COMP%]     .ant-statistic-content-value{color:var(--primary-color)}app-max-min-limit[_ngcontent-%COMP%]     .ant-statistic-content-suffix{color:#bababa}p[_ngcontent-%COMP%]{margin-bottom:0}.context-min-max-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;margin-right:15px}.context-min-max-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > app-max-min-limit[_ngcontent-%COMP%]{display:block}h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0}"]}),ef),af=o("4xsP"),rf=["appIcon"];function of(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",11),_.ec("click",function(){return _.Lc(n),_.ic(3).editVital()})("mouseover",function(){return _.Lc(n),_.ic(3).mouseover()})("mouseout",function(){return _.Lc(n),_.ic(3).mouseout()}),_.Sb(1,"app-icons",12,13),_.Xc(3),_.jc(4,"translate"),_.Wb()}if(2&t){var i=_.ic(3);_.rc("disabled",i.disabled),_.Db(3),_.Zc("",_.kc(4,2,"VITAL.EDIT")," ")}}var lf=function(t){return{"disabled-card":t}};function sf(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"nz-card",5),_.Xb(2,"nz-space",6),_.Xb(3,"nz-space-item"),_.Sb(4,"app-max-min-limit",7),_.Wb(),_.Xb(5,"nz-space-item"),_.Sb(6,"app-vital-tags",8),_.Sb(7,"app-notify-users",9),_.Wb(),_.Wb(),_.Vc(8,of,5,4,"button",10),_.Wb(),_.Ub()),2&t){var n=_.ic(2),i=_.Ic(2),a=_.Ic(4);_.Db(1),_.rc("nzTitle",i)("nzExtra",a)("ngClass",_.yc(14,lf,!1===n.vitalAlertEnabled)),_.Db(3),_.rc("minLimit",null==n.vitalAlert||null==n.vitalAlert.limit?null:n.vitalAlert.limit.min)("maxLimit",null==n.vitalAlert||null==n.vitalAlert.limit?null:n.vitalAlert.limit.max)("unit",null==n.vitalAlert?null:n.vitalAlert.unit)("enabled",n.vitalAlertEnabled),_.Db(2),_.rc("vitalTags",null==n.vitalAlert?null:n.vitalAlert.tags)("enabled",n.vitalAlertEnabled),_.Db(1),_.rc("notifyPatient",null==n.vitalAlert?null:n.vitalAlert.notifyPatient)("notifyCaretaker",null==n.vitalAlert?null:n.vitalAlert.notifyCaretaker)("notifyGuardian",null==n.vitalAlert?null:n.vitalAlert.notifyGuardian)("enabled",n.vitalAlertEnabled),_.Db(1),_.rc("ngIf",n.vitalAlertEnabled)}}function cf(t,e){if(1&t&&(_.Vb(0),_.Vc(1,sf,9,16,"ng-container",4),_.Ub()),2&t){var n=_.ic(),i=_.Ic(6);_.Db(1),_.rc("ngIf",!(null!=n.vitalAlert&&null!=n.vitalAlert.contexts&&n.vitalAlert.contexts.length)>0)("ngIfElse",i)}}function uf(t,e){if(1&t&&(_.Xb(0,"span",14),_.Xc(1),_.Wb()),2&t){var n=_.ic();_.rc("nzTooltipTitle",null==n.vitalAlert?null:n.vitalAlert.label),_.Db(1),_.Yc(null==n.vitalAlert?null:n.vitalAlert.label)}}function df(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-switch",15),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().vitalAlertEnabled=t})("ngModelChange",function(){return _.Lc(n),_.ic().onToggleVitalAlert()}),_.jc(1,"translate"),_.jc(2,"translate"),_.Wb()}if(2&t){var i=_.ic();_.rc("ngModel",i.vitalAlertEnabled)("nzDisabled",i.disabled)("nzTooltipTitle",i.vitalAlertEnabled?_.kc(1,3,"VITAL.TOGGLE_REMOVE_VITAL_ALERT"):_.kc(2,5,"VITAL.TOGGLE_VITAL_ALERT"))}}var bf=function(t){return{"disabled-label":t}};function pf(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"label",18),_.Xc(2),_.Wb(),_.Sb(3,"app-max-min-limit",7),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(1),_.rc("ngClass",_.yc(6,bf,!1===i.vitalAlertEnabled)),_.Db(1),_.Zc(" ",null==n?null:n.answer," "),_.Db(1),_.rc("minLimit",null==n||null==n.limit?null:n.limit.min)("maxLimit",null==n||null==n.limit?null:n.limit.max)("unit",null==i.vitalAlert?null:i.vitalAlert.unit)("enabled",i.vitalAlertEnabled)}}function ff(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",11),_.ec("click",function(){return _.Lc(n),_.ic(2).editVital()})("mouseover",function(){return _.Lc(n),_.ic(2).mouseover()})("mouseout",function(){return _.Lc(n),_.ic(2).mouseout()}),_.Sb(1,"app-icons",12,13),_.Xc(3),_.jc(4,"translate"),_.Wb()}if(2&t){var i=_.ic(2);_.rc("disabled",i.disabled),_.Db(3),_.Zc("",_.kc(4,2,"VITAL.EDIT")," ")}}var gf=function(t){return{width:t}};function hf(t,e){if(1&t&&(_.Xb(0,"nz-card",16),_.Vc(1,pf,4,8,"div",17),_.Xb(2,"div"),_.Sb(3,"app-vital-tags",8),_.Sb(4,"app-notify-users",9),_.Wb(),_.Vc(5,ff,5,4,"button",10),_.Wb()),2&t){var n=_.ic(),i=_.Ic(2),a=_.Ic(4);_.rc("ngStyle",_.yc(12,gf,"calc(218px + 218px * "+n.optionsColumn+")"))("nzTitle",i)("nzExtra",a)("ngClass",_.yc(14,lf,!1===n.vitalAlertEnabled)),_.Db(1),_.rc("ngForOf",null==n.vitalAlert?null:n.vitalAlert.contexts),_.Db(2),_.rc("vitalTags",null==n.vitalAlert?null:n.vitalAlert.tags)("enabled",n.vitalAlertEnabled),_.Db(1),_.rc("notifyPatient",null==n.vitalAlert?null:n.vitalAlert.notifyPatient)("notifyCaretaker",null==n.vitalAlert?null:n.vitalAlert.notifyCaretaker)("notifyGuardian",null==n.vitalAlert?null:n.vitalAlert.notifyGuardian)("enabled",n.vitalAlertEnabled),_.Db(1),_.rc("ngIf",n.vitalAlertEnabled)}}var vf,mf,Sf,If=((mf=function(){function e(t){b(this,e),this._modalService=t,this.optionsColumn=1}return d(e,[{key:"ngOnInit",value:function(){var t;(null===(t=this.vitalAlert)||void 0===t?void 0:t.contexts)&&(this.optionsColumn=Math.floor(this.vitalAlert.contexts.length/2)),this.vitalAlertEnabled=this.vitalAlert.enabled}},{key:"editVital",value:function(){var e,n=this,i=t((null===(e=this.vitalAlert.contexts)||void 0===e?void 0:e.length)>0?["490px",630]:["420px",400],2),a=i[0],r=i[1];this._modalService.create({nzContent:Vp,nzComponentParams:{vitalAlert:new Dp(this.vitalAlert)},nzBodyStyle:{"min-height":a,padding:"10px \u200b35px"},nzWidth:r,nzZIndex:1e3,nzFooter:null}).afterClose.subscribe(function(t){t?(n.vitalAlert=new Dp(t),n.vitalAlertEnabled=t.enabled):n.vitalAlertEnabled=n.vitalAlert.enabled})}},{key:"onToggleVitalAlert",value:function(){!this.vitalAlertEnabled&&this.vitalAlert.enabled?this.resetToDefault():this.vitalAlertEnabled&&!this.vitalAlert.enabled&&this.editVital()}},{key:"resetToDefault",value:function(){var t,e,n=this,i=(null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0?630:360,a=(null===(e=this.vitalAlert.contexts)||void 0===e?void 0:e.length)>0?380+100*(Math.ceil(this.vitalAlert.contexts.length/3)-1)+"px":"380px";this._modalService.create({nzContent:nf,nzComponentParams:{vitalAlert:new Dp(this.vitalAlert)},nzBodyStyle:{height:a,padding:"10px \u200b30px"},nzWidth:i,nzZIndex:1e3,nzFooter:null}).afterClose.subscribe(function(t){t?(n.vitalAlert=t,n.vitalAlertEnabled=n.vitalAlert.enabled):n.vitalAlertEnabled=!n.vitalAlertEnabled})}},{key:"mouseover",value:function(){this.appIcon.onMouseEnter()}},{key:"mouseout",value:function(){this.appIcon.onMouseLeave()}}]),e}()).\u0275fac=function(t){return new(t||mf)(_.Rb(O.f))},mf.\u0275cmp=_.Lb({type:mf,selectors:[["app-vital-card"]],viewQuery:function(t,e){var n;1&t&&_.ed(rf,1),2&t&&_.Hc(n=_.fc())&&(e.appIcon=n.first)},inputs:{vitalAlert:"vitalAlert",disabled:"disabled"},decls:7,vars:1,consts:[[4,"ngIf"],["title",""],["switchAlert",""],["cardWithContext",""],[4,"ngIf","ngIfElse"],[3,"nzTitle","nzExtra","ngClass"],["nzDirection","vertical","nzSize","middle"],[3,"minLimit","maxLimit","unit","enabled"],[3,"vitalTags","enabled"],[3,"notifyPatient","notifyCaretaker","notifyGuardian","enabled"],["nz-button","","nzType","text",3,"disabled","click","mouseover","mouseout",4,"ngIf"],["nz-button","","nzType","text",3,"disabled","click","mouseover","mouseout"],["name","edit"],["appIcon",""],["nz-tooltip","",3,"nzTooltipTitle"],["nz-tooltip","",3,"ngModel","nzDisabled","nzTooltipTitle","ngModelChange"],[1,"varying-width-card",3,"ngStyle","nzTitle","nzExtra","ngClass"],[4,"ngFor","ngForOf"],["nz-typography","",3,"ngClass"]],template:function(t,e){1&t&&(_.Vc(0,cf,2,2,"ng-container",0),_.Vc(1,uf,2,2,"ng-template",null,1,_.Wc),_.Vc(3,df,3,7,"ng-template",null,2,_.Wc),_.Vc(5,hf,6,16,"ng-template",null,3,_.Wc)),2&t&&_.rc("ngIf",e.vitalAlert)},directives:[h.q,Rn.a,h.o,af.a,af.b,Kp,Ap,$p,M.a,P.a,he.a,wi.d,Gl.a,v.u,v.x,h.r,h.p,H.a],pipes:[Qt.a],styles:["[_nghost-%COMP%]{display:contents}.disabled-card[_ngcontent-%COMP%]{color:#888;border:none}[_nghost-%COMP%]     .ant-card-head{border-bottom:none;font-size:12px;line-height:16px;font-weight:700}[_nghost-%COMP%]     .ant-card-head-title{font-size:12px;font-weight:700}[_nghost-%COMP%]     .ant-card-body{padding:20px 20px 0}button[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;transition-duration:0s;background-color:transparent;color:#8a8a8a}nz-space-item[_ngcontent-%COMP%]:nth-child(2){margin-bottom:5px!important}nz-card[_ngcontent-%COMP%]{width:215px;min-height:250px;margin:5px 0 5px 5px;border:1px solid var(--primary-color)}.varying-width-card[_ngcontent-%COMP%] >   .ant-card-body{padding-top:3px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start}.varying-width-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:10px;line-height:14px}app-max-min-limit[_ngcontent-%COMP%]{margin-bottom:10px}p[_ngcontent-%COMP%]{margin-bottom:0}.varying-width-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;margin-right:20px;margin-bottom:10px}.varying-width-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > app-max-min-limit[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%] > app-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}button[_ngcontent-%COMP%]:hover{color:var(--primary-color)}button[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:hover{background-color:transparent}button[_ngcontent-%COMP%]:hover   app-icons[_ngcontent-%COMP%]{color:var(--primary-color)}.disabled-label[_ngcontent-%COMP%]{opacity:.4}"]}),mf),Df=((vf=function(){function t(e){b(this,t),this._http=e,this.rootUrl="".concat(E.g.url,"/v3/user-alerts/general")}return d(t,[{key:"getPatientLevelGeneralAlertSettings",value:function(t){return this._http.get("".concat(this.rootUrl,"/").concat(t)).pipe(Object(tp.a)())}},{key:"updatePatientLevelGeneralAlertSettings",value:function(t){return this._http.put(this.rootUrl,t).pipe(Object(tp.a)())}}]),t}()).\u0275fac=function(t){return new(t||vf)(_.bc(C.c))},vf.\u0275prov=_.Nb({token:vf,factory:vf.\u0275fac,providedIn:"root"}),vf),yf=function t(){b(this,t)},Cf=((Sf=function(){function t(e,n,i){b(this,t),this._generalVitalAlertService=e,this._notificationsService=n,this._alertModalService=i,this.vitalLimitNotificationEnabled=!1}return d(t,[{key:"ngOnInit",value:function(){this.getGeneralVitalSettingsForUser()}},{key:"getGeneralVitalSettingsForUser",value:function(){var t=this;this._generalVitalAlertService.getPatientLevelGeneralAlertSettings(this.patientId).subscribe(function(e){t.vitalLimitNotificationEnabled=null==e?void 0:e.vitalLimitNotificationEnabled})}},{key:"onVitalLimitNotificationChange",value:function(t){var e=this,n=new yf;n.patientId=this.patientId,n.vitalLimitNotificationEnabled=t,this._generalVitalAlertService.updatePatientLevelGeneralAlertSettings(n).subscribe(function(t){},function(t){e._notificationsService.error("Operation failed!!!","Vital Limit Notification could not be switched. Please try again later")})}},{key:"createAlert",value:function(){this._alertModalService.showAlertRuleCreateModal($b.c.PATIENT_LEVEL,this.patientId).afterClose.subscribe(function(t){})}},{key:"onRefresh",value:function(t){}}]),t}()).\u0275fac=function(t){return new(t||Sf)(_.Rb(Df),_.Rb(V.b),_.Rb(qb.a))},Sf.\u0275cmp=_.Lb({type:Sf,selectors:[["app-notification-actions"]],inputs:{patientId:"patientId",disabled:"disabled"},decls:15,vars:8,consts:[[1,"container"],[1,"action-container"],["nzSize","small",3,"ngModel","nzDisabled","ngModelChange"],[1,"quick-action"],[1,"create-alert-span",3,"click"],[1,"icon-btn"],["color","#a7c853","strokeColor","#a7c853","fill","#a7c853","size","20","name","bell",1,"app-icon",3,"click"],["nz-icon","","nzType","right-circle","nzTheme","fill",1,"right-btn"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"h2"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"div",1),_.Xb(5,"div"),_.Xc(6),_.jc(7,"translate"),_.Xb(8,"nz-switch",2),_.ec("ngModelChange",function(t){return e.vitalLimitNotificationEnabled=t})("ngModelChange",function(t){return e.onVitalLimitNotificationChange(t)}),_.Wb(),_.Wb(),_.Xb(9,"div",3),_.Xb(10,"span",4),_.ec("click",function(){return e.createAlert()}),_.Xb(11,"span",5),_.Xb(12,"app-icons",6),_.ec("click",function(){return e.createAlert()}),_.Wb(),_.Wb(),_.Xc(13," Create an Alert "),_.Sb(14,"span",7),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Yc(_.kc(3,4,"VITAL.ALERTS_ON_PATIENT_APP")),_.Db(4),_.Zc(" ",_.kc(7,6,"VITAL.NOTIFY_WHEN_VALUES_OUT_OF_RANGE")," "),_.Db(2),_.rc("ngModel",e.vitalLimitNotificationEnabled)("nzDisabled",e.disabled))},directives:[Gl.a,v.u,v.x,he.a,P.a,j.a],pipes:[Qt.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:135px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey);margin-top:30px;padding:25px 45px!important}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}nz-switch[_ngcontent-%COMP%]{float:right;margin-left:30px}h2[_ngcontent-%COMP%]{font-weight:700}.quick-action[_ngcontent-%COMP%]{padding:20px;background:var(--neutral-color);width:100%;bottom:10px;cursor:pointer;position:absolute;right:200px}.icon-btn[_ngcontent-%COMP%], .quick-action[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-btn[_ngcontent-%COMP%]{width:50px;height:50px;background:#e9e9e9;border-radius:50%;flex-direction:column;margin:10px}.app-icon[_ngcontent-%COMP%]{margin-top:30%;margin-right:0}.right-btn[_ngcontent-%COMP%]{font-size:12px;margin-left:6px;color:var(--primary-color)}.action-container[_ngcontent-%COMP%]{display:flex}.create-alert-span[_ngcontent-%COMP%]{width:200px;display:flex;align-items:center}"]}),Sf),Ef=function(t){return{"alert-history-expanded-view":t}};function Xf(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",4),_.ec("click",function(){return _.Lc(n),_.ic().toggleAlertHistory()}),_.Xc(1),_.jc(2,"translate"),_.Sb(3,"app-icons",5),_.Wb()}if(2&t){var i=_.ic();_.rc("ngClass",_.yc(4,Ef,!0===i.historyDrawerOpened)),_.Db(1),_.Zc(" ",_.kc(2,2,"VITAL.ALERT_HISTORY")," \xa0 ")}}function Tf(t,e){if(1&t&&_.Sb(0,"app-patient-status-notification",10),2&t){var n=_.ic(2);_.rc("patientInfo",n.patientInfo)}}function zf(t,e){if(1&t&&_.Sb(0,"app-vital-card",13),2&t){var n=e.$implicit,i=_.ic(3);_.rc("vitalAlert",n)("disabled","NOT_ONBOARDED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)||"DISCHARGED"===(null==i.patientInfo?null:i.patientInfo.patientStatus))}}function _f(t,e){if(1&t&&(_.Xb(0,"div",11),_.Vc(1,zf,1,2,"app-vital-card",12),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngForOf",n.vitalAlerts)}}function Of(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",6),_.Vc(1,Tf,1,1,"app-patient-status-notification",7),_.Xb(2,"h4"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"p"),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Vc(8,_f,2,1,"div",8),_.Xb(9,"alert-summary",9),_.ec("refresh",function(t){return _.Lc(n),_.ic().onRefresh(t)}),_.Wb(),_.Wb()}if(2&t){var i=_.ic(),a=_.Ic(4);_.Db(1),_.rc("ngIf","NOT_ONBOARDED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)||"DISCHARGED"===(null==i.patientInfo?null:i.patientInfo.patientStatus)),_.Db(2),_.Yc(_.kc(4,7,"VITAL.PATIENT_LEVEL_ALERTS")),_.Db(3),_.Yc(_.kc(7,9,"VITAL.ALERT_TOGGLE_TOOLTIP")),_.Db(2),_.rc("ngIf",i.vitalAlerts)("ngIfElse",a),_.Db(1),_.rc("level",i.level)("patientId",i.patientId)}}function Mf(t,e){if(1&t&&_.Sb(0,"app-notification-actions",14),2&t){var n=_.ic();_.rc("patientId",n.patientId)("disabled","NOT_ONBOARDED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)||"DISCHARGED"===(null==n.patientInfo?null:n.patientInfo.patientStatus))}}function Af(t,e){1&t&&(_.Xc(0),_.jc(1,"translate")),2&t&&_.Zc(" ",_.kc(1,1,"VITAL.NO_VITALS_AVAILABLE"),"\n")}var Pf,Nf=((Pf=function(){function t(e,n,i,a,r,o,l){b(this,t),this._vitalBlueprintsService=e,this._userVitalAlertService=n,this._activatedRoute=i,this._drawerService=a,this._alertModalService=r,this.alertHistoryDrawerService=o,this.vitalAlertHelperService=l,this.refresh=new _.n,this.level=$b.c.PATIENT_LEVEL,this.patientId=this._activatedRoute.snapshot.params.id}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.getAllVitalBlueprintsOfPatient(),this.alertHistoryDrawerSubscription$=this.alertHistoryDrawerService.getShowAlertHistoryObservable().subscribe(function(e){return e?t.showAlertHistory():t.hideAlertHistory()})}},{key:"toggleAlertHistory",value:function(){this.alertHistoryDrawerService.setShowAlertHistoryObservable(!this.historyDrawerOpened)}},{key:"ngOnDestroy",value:function(){this.alertHistoryDrawerSubscription$.unsubscribe()}},{key:"getAllVitalBlueprintsOfPatient",value:function(){var t=this;this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(function(e){e&&(t.tenantVitalBlueprints=e.filter(function(t){return null==t?void 0:t.active}),t._userVitalAlertService.fetchVitalBlueprintsOfUser(t.patientId).subscribe(function(e){t.userVitalAlerts=e,t.combineVitalAlertsForThePatient()}),t.vitalAndUnitsMap=new Map,t.tenantVitalBlueprints.forEach(function(e){return e.parameters.forEach(function(e){return t.vitalAndUnitsMap.set(e.label,e.unit)})}))})}},{key:"getUserVitalAlertIfPresentForParameterType",value:function(t){var e,n=null,i=null===(e=this.userVitalAlerts)||void 0===e?void 0:e.filter(function(e){return e.parameter===t&&!0===e.enabled});return i&&i.length>0&&(n=i[0]),n}},{key:"combineVitalAlertsForThePatient",value:function(){var t;this.vitalAlerts=new Array;var e,i=n(this.tenantVitalBlueprints);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(a.contexts){var r=this.getUserVitalAlertIfPresentForParameterType(a.parameters[0].type),o=this.vitalAlertHelperService.createVitalAlertForTenantVitalWithContext(a,r);o.patientId=this.patientId,this.vitalAlerts.push(o)}else if(a.parameters){var l,s=n(a.parameters);try{for(s.s();!(l=s.n()).done;){var c=l.value,u=this.getUserVitalAlertIfPresentForParameterType(c.type),d=this.vitalAlertHelperService.createVitalAlertFromTenantVitalParameter(c,u);d.patientId=this.patientId,d.label=c.label||a.label,d.unit=(null===(t=null==c?void 0:c.unit)||void 0===t?void 0:t.toLowerCase())||"",d.vital=a.type,d.tags=this.vitalAlertHelperService.createVitalTagsFromTenantVitalBlueprint(a),u||this.vitalAlertHelperService.populateVitalNotificationsFromTenantVitalBlueprint(d,a),d.defaultVitalAlert.tags=this.vitalAlertHelperService.createVitalTagsFromTenantVitalBlueprint(a),this.vitalAlertHelperService.populateVitalNotificationsFromTenantVitalBlueprint(d.defaultVitalAlert,a),this.vitalAlerts.push(d)}}catch(b){s.e(b)}finally{s.f()}}}}catch(b){i.e(b)}finally{i.f()}this.vitalAlerts.sort(function(t,e){var n,i;return(null===(n=e.contexts)||void 0===n?void 0:n.length)-(null===(i=t.contexts)||void 0===i?void 0:i.length)}),this.loading=!1}},{key:"showAlertHistory",value:function(){var t=this;this.historyDrawerOpened=!0,this.drawer||(this.drawer=this._drawerService.create({nzContent:hp,nzContentParams:{patientId:this.patientId,vitalAndUnits:this.vitalAndUnitsMap},nzWidth:350,nzBodyStyle:{padding:"30px"},nzMask:!0,nzMaskClosable:!1,nzZIndex:1e3}),this.drawer.afterClose.subscribe(function(){t.drawer=null}))}},{key:"hideAlertHistory",value:function(){null!=this.drawer&&(this.historyDrawerOpened=!1,this.drawer.close())}},{key:"createAlert",value:function(){var t=this;this._alertModalService.showAlertRuleCreateModal().afterClose.subscribe(function(e){t.refresh.emit(!0)})}}]),t}()).\u0275fac=function(t){return new(t||Pf)(_.Rb(Zb.a),_.Rb(eb.a),_.Rb(m.a),_.Rb(Ep.d),_.Rb(qb.a),_.Rb(Qb),_.Rb(Cp))},Pf.\u0275cmp=_.Lb({type:Pf,selectors:[["app-alert-notifications"]],inputs:{patientInfo:"patientInfo"},outputs:{refresh:"refresh"},decls:5,vars:3,consts:[["nz-button","","nzType","default",3,"ngClass","click",4,"ngIf"],["class","container",4,"ngIf"],[3,"patientId","disabled",4,"ngIf"],["noData",""],["nz-button","","nzType","default",3,"ngClass","click"],["name","arrowRight","strokeColor","#a7c853","size","12"],[1,"container"],[3,"patientInfo",4,"ngIf"],["class","vital-cards",4,"ngIf","ngIfElse"],[3,"level","patientId","refresh"],[3,"patientInfo"],[1,"vital-cards"],[3,"vitalAlert","disabled",4,"ngFor","ngForOf"],[3,"vitalAlert","disabled"],[3,"patientId","disabled"]],template:function(t,e){1&t&&(_.Vc(0,Xf,4,6,"button",0),_.Vc(1,Of,10,11,"div",1),_.Vc(2,Mf,1,2,"app-notification-actions",2),_.Vc(3,Af,2,3,"ng-template",null,3,_.Wc)),2&t&&(_.rc("ngIf",!e.loading),_.Db(1),_.rc("ngIf",!e.loading),_.Db(1),_.rc("ngIf",!e.loading))},directives:[h.q,M.a,A.a,P.a,h.o,he.a,Xp.a,Kd.a,h.p,If,Cf],pipes:[Qt.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}app-notification-actions[_ngcontent-%COMP%]{display:block;margin-top:150px}app-notification-actions[_ngcontent-%COMP%] .container{position:absolute;bottom:0}button[_ngcontent-%COMP%]{position:absolute;right:0;border-radius:5px 0 0 5px;line-height:1;color:var(--black);border-left-color:var(--primary-color);border-bottom-color:var(--primary-color);border-right:none;border-right-color:var(--primary-color);border-top-color:var(--primary-color)}.alert-history-expanded-view[_ngcontent-%COMP%]{position:absolute;right:350px;z-index:1001}.vital-cards[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start}h4[_ngcontent-%COMP%]{font-weight:700;padding:8px 8px 0}p[_ngcontent-%COMP%]{margin-left:8px}app-icons[_ngcontent-%COMP%]{vertical-align:middle}"]}),Pf),Wf=o("cp0P");function Rf(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"label",11),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Sb(4,"br"),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("ngModel",!0),_.Db(1),_.Yc(_.kc(3,2,n.key))}}function xf(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Rf,5,4,"ng-container",10),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngIf",n.value)}}function kf(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"label",12),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Sb(4,"br"),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.rc("ngModel",!0),_.Db(1),_.Yc(_.kc(3,2,n.key))}}function wf(t,e){if(1&t&&(_.Vb(0),_.Vc(1,kf,5,4,"ng-container",10),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngIf",!n.value)}}var Vf=function(t){return["PATIENT_NAME",t]},Lf=function(t){return[t]};function Ff(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",1),_.Xb(1,"nz-card",2),_.Xb(2,"h2"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Sb(5,"nz-progress",3),_.Xb(6,"p"),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Sb(9,"br"),_.Vc(10,xf,2,1,"ng-container",4),_.jc(11,"keyvalue"),_.Vc(12,wf,2,1,"ng-container",4),_.jc(13,"keyvalue"),_.Xb(14,"p"),_.Xc(15),_.jc(16,"translate"),_.jc(17,"translate"),_.Wb(),_.Sb(18,"br"),_.Xb(19,"div",5),_.Xb(20,"div",6),_.Xb(21,"button",7),_.Xc(22),_.jc(23,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(24,"div",5),_.Xb(25,"div",6),_.Xb(26,"button",8),_.ec("click",function(){return _.Lc(n),_.ic().skip()}),_.Xb(27,"label",9),_.Xc(28),_.jc(29,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(3),_.Yc(_.kc(4,12,"PATIENT.PROFILE_READINESS")),_.Db(2),_.rc("nzFormat",i.percentageFormat)("nzPercent",i.percentComplete)("nzStrokeColor","#a7c853"),_.Db(2),_.Zc(" ",_.lc(8,14,"PROFILE_VALIDATION.DESCRIPTION",_.yc(31,Lf,_.yc(29,Vf,null==i.patient?null:i.patient.fullName)))," "),_.Db(3),_.rc("ngForOf",_.kc(11,17,i.validationsMap)),_.Db(2),_.rc("ngForOf",_.kc(13,19,i.validationsMap)),_.Db(3),_.ad("",_.kc(16,21,"COMMON.ADDITIONALLY"),", ",_.kc(17,23,"PATIENT.CELLULAR_DEVICE_INFO"),""),_.Db(6),_.tc("routerLink","/patient/view/",i.patientId,""),_.Db(1),_.Zc(" ",_.kc(23,25,"PATIENT.VIEW_PROFILE")," "),_.Db(6),_.Yc(_.kc(29,27,"COMMON.SKIP"))}}var Uf,jf,Yf=((Uf=function(){function t(e,n,i){var a=this;b(this,t),this._patientService=e,this._patientViewModalService=n,this._router=i,this.percentageFormat=function(t){return"".concat(t,"% Complete")},this.percentComplete=0,this.router$=this._router.events.subscribe(function(t){"popstate"!==t.navigationTrigger&&"imperative"!==t.navigationTrigger||(a.showPatientProfileReadiness=!1,a._patientViewModalService.showProfileReadiness.next(!1))}),this.showProfileReadiness$=this._patientViewModalService.showProfileReadiness.subscribe(function(t){t&&a.gotoCreateEpisode()})}return d(t,[{key:"ngOnInit",value:function(){this.getProfileReadinessState()}},{key:"ngOnDestroy",value:function(){var t,e;null===(t=this.router$)||void 0===t||t.unsubscribe(),null===(e=this.showProfileReadiness$)||void 0===e||e.unsubscribe()}},{key:"getProfileReadinessState",value:function(){var t=this;this._patientService.validatePatientProfile(this.patientId).subscribe(function(e){t.patient=null==e?void 0:e.patient,t.validationsMap=(null==e?void 0:e.validations)||new Object,t._patientViewModalService.profileReadinessData$.subscribe(function(e){(null==e?void 0:e.dxCodes)&&(null==e?void 0:e.patientId)==t.patientId&&(t.validationsMap.ASSIGNED_ICD_CODES=!1),t.calculateProfileReadinessPercentage()})})}},{key:"calculateProfileReadinessPercentage",value:function(){var t=this,e=Object.keys(this.validationsMap).length,n=0;Object.keys(this.validationsMap).forEach(function(e){t.validationsMap[e]&&n++}),this.percentComplete=100*(e-n)/e}},{key:"skip",value:function(){this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:{tenantId:this.patient.tenantId}})}},{key:"gotoCreateEpisode",value:function(){100>this.percentComplete?this.showPatientProfileReadiness=!0:(this.showPatientProfileReadiness=!0,this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:{tenantId:this.patient.tenantId}}))}}]),t}()).\u0275fac=function(t){return new(t||Uf)(_.Rb(y.a),_.Rb(lc.a),_.Rb(m.g))},Uf.\u0275cmp=_.Lb({type:Uf,selectors:[["app-profile-readiness"]],inputs:{patientId:"patientId"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["id","state-card"],[3,"nzFormat","nzPercent","nzStrokeColor"],[4,"ngFor","ngForOf"],["nz-row",""],["nz-col","","nzSpan","16","nzOffset","4"],["nz-button","","nzType","primary","nzSize","large",3,"routerLink"],["nz-button","","nzType","link",3,"click"],["nz-typography","","nzType","secondary"],[4,"ngIf"],["nzDisabled","","nz-checkbox","",1,"incomplete",3,"ngModel"],["nz-checkbox","",3,"ngModel"]],template:function(t,e){1&t&&_.Vc(0,Ff,30,33,"div",0),2&t&&_.rc("ngIf",e.patient&&e.showPatientProfileReadiness)},directives:[h.q,Rn.a,ga.a,h.p,Z.c,Z.a,M.a,A.a,P.a,m.h,H.a,q.a,v.u,v.x],pipes:[Qt.a,h.j],styles:[".container[_ngcontent-%COMP%]{padding:10px!important}#state-card[_ngcontent-%COMP%]{width:60%;margin:2% 0 0 25%;min-height:400px;padding-left:40px;padding-right:40px;border-radius:6px;box-shadow:0 3px 6px #00000029;background:var(--neutral-color) 0 0 no-repeat padding-box}h2[_ngcontent-%COMP%]{font:normal normal 700 20px/27px Nunito;text-align:center;margin-bottom:20px}[_nghost-%COMP%]     .ant-progress-line{width:90%}[_nghost-%COMP%]     .ant-progress-inner{border:1px solid #a8a8a8}#state-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;font:normal normal normal 13px Nunito}[_nghost-%COMP%]     .ant-checkbox-inner{width:16px;height:16px;border-radius:50%}[_nghost-%COMP%]     .ant-checkbox-checked .ant-checkbox-inner{background-color:var(--primary-color);border:0}[_nghost-%COMP%]     .ant-checkbox-checked .ant-checkbox-inner:after{border-color:var(--neutral-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background-color:var(--neutral-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:#a8a8a8}[_nghost-%COMP%]     .ant-checkbox-disabled+span{color:unset}label[_ngcontent-%COMP%]{margin-bottom:10px;pointer-events:none}.incomplete[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{width:100%}@media screen and (orientation:portrait){#state-card[_ngcontent-%COMP%]{width:100%;margin-left:2%}}"]}),Uf),Bf=o("Lrxu"),Hf=o("Etcd"),Gf=((jf=function(){function t(e){var n=this;b(this,t),this._element=e,this.checkByAssignedCPTCodes=function(t){n.cptCodes.find(function(e){return e.id===t})?n.enableFeature():n.disableFeature()},this.cptCodes=[]}return d(t,[{key:"ngAfterViewInit",value:function(){this.checkState()}},{key:"checkState",value:function(){switch(this.widget){case"VITAL_ADHERENCE":this.checkByAssignedCPTCodes("99454");break;case"TMS_ADHERENCE":this.checkByAssignedCPTCodes("99457");break;case"ADDITIONAL_TMS_ADHERENCE":this.checkByAssignedCPTCodes("99458");break;case"ADDITIONAL_TMS_B_ADHERENCE":this.checkByAssignedCPTCodes("99458B");break;case"CMT_ADHERENCE":this.checkByAssignedCPTCodes("99484");break;case"NON_COMPLEX_TMS":this.checkByAssignedCPTCodes("99490");break;case"NON_COMPLEX_ADDITIONAL_TMS":this.checkByAssignedCPTCodes("99439");break;case"NON_COMPLEX_ADDITIONAL_TMS_B":this.checkByAssignedCPTCodes("99439B")}}},{key:"enableFeature",value:function(){this._element.nativeElement.style.display="revert"}},{key:"disableFeature",value:function(){this._element.nativeElement.style.display="none"}}]),t}()).\u0275fac=function(t){return new(t||jf)(_.Rb(_.l))},jf.\u0275dir=_.Mb({type:jf,selectors:[["","assignedEpisodeWidgetEnabled",""]],inputs:{widget:["assignedEpisodeWidgetEnabled","widget"],cptCodes:["episodeCPTCodes","cptCodes"]}}),jf),Zf=o("Pp+U");function $f(t,e){if(1&t&&(_.Xb(0,"div",10),_.Xb(1,"strong",11),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xc(4),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.Zc("",_.kc(3,2,"CONSENT.CONSENT_OBTAINED")," : "),_.Db(2),_.Zc(" ",n.consentObtained?"Yes":"No"," ")}}function qf(t,e){if(1&t&&(_.Xb(0,"div",10),_.Xb(1,"strong",11),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xc(4),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.Zc("",_.kc(3,2,"DOCTORS_ORDER.OBTAINED")," : "),_.Db(2),_.Zc(" ",n.physicianOrderObtained?"Yes":"No"," ")}}function Kf(t,e){if(1&t&&(_.Xb(0,"div",8),_.Vc(1,$f,5,4,"div",9),_.Vc(2,qf,5,4,"div",9),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",n.consentEnabled),_.Db(1),_.rc("ngIf",n.physicianOrderEnabled)}}function Qf(t,e){if(1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"translate"),_.jc(3,"date"),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.ad(" ",_.kc(2,2,"PATIENT.SECHEDULED_ON"),": ",_.lc(3,4,null==n?null:n.scheduledOn,"mediumDate")," ")}}function Jf(t,e){if(1&t&&(_.Xb(0,"span"),_.Xc(1),_.jc(2,"translate"),_.jc(3,"date"),_.Wb()),2&t){var n=_.ic().$implicit;_.Db(1),_.ad(" ",_.kc(2,2,"TABLEHEADER.COMPLETEDON"),": ",_.lc(3,4,null==n?null:n.completedOn,"mediumDate")," ")}}function tg(t,e){if(1&t&&(_.Xb(0,"div",12),_.Xb(1,"strong"),_.Xc(2),_.Wb(),_.Vc(3,Qf,4,7,"span",5),_.Vc(4,Jf,4,7,"span",5),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.Zc("",null==n?null:n.title,": "),_.Db(1),_.rc("ngIf",!(null!=n&&n.completed)),_.Db(1),_.rc("ngIf",null==n?null:n.completed)}}function eg(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"h4"),_.Xc(2),_.Wb(),_.Xb(3,"div",14),_.Xb(4,"div",15),_.Xb(5,"strong",16),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"p"),_.Xc(9),_.jc(10,"date"),_.Wb(),_.Wb(),_.Xb(11,"div",15),_.Xb(12,"strong",16),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Xb(15,"p"),_.Xc(16),_.jc(17,"date"),_.Wb(),_.Wb(),_.Xb(18,"div",17),_.Xb(19,"div",14),_.Xb(20,"div",18),_.Xb(21,"strong"),_.Xc(22),_.jc(23,"translate"),_.Wb(),_.Wb(),_.Xb(24,"div",19),_.Xb(25,"div",20),_.Xb(26,"p",21),_.Xc(27),_.Wb(),_.Wb(),_.Sb(28,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Xb(29,"div",17),_.Xb(30,"div",14),_.Xb(31,"div",23),_.Xb(32,"strong"),_.Xc(33),_.jc(34,"translate"),_.Wb(),_.Wb(),_.Xb(35,"div",19),_.Xb(36,"div",20),_.Xb(37,"p",21),_.Xc(38),_.Wb(),_.Wb(),_.Sb(39,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Xb(40,"div",17),_.Xb(41,"div",14),_.Xb(42,"div",23),_.Xb(43,"strong"),_.Xc(44),_.jc(45,"translate"),_.Wb(),_.Wb(),_.Xb(46,"div",19),_.Xb(47,"div",20),_.Xb(48,"p",21),_.Xc(49),_.Wb(),_.Wb(),_.Sb(50,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Xb(51,"div",24),_.Xb(52,"div",14),_.Xb(53,"div",23),_.Xb(54,"strong"),_.Xc(55),_.jc(56,"translate"),_.Wb(),_.Wb(),_.Xb(57,"div",19),_.Xb(58,"div",20),_.Xb(59,"p",21),_.Xc(60),_.Wb(),_.Wb(),_.Sb(61,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(2),_.Yc((null==n?null:n.name)||(null==n?null:n.type)),_.Db(4),_.Yc(_.kc(7,41,"COMMON.START_DATE")),_.Db(3),_.Yc(_.lc(10,43,null==n?null:n.startDate,"mediumDate")),_.Db(4),_.Yc(_.kc(14,46,"COMMON.END_DATE")),_.Db(3),_.Yc(_.lc(17,48,null==n?null:n.endDate,"mediumDate")),_.Db(2),_.rc("assignedEpisodeWidgetEnabled","TMS_ADHERENCE")("episodeCPTCodes",null==i.episode?null:i.episode.cptCodeList),_.Db(4),_.Yc(_.kc(23,51,"EPISODE.TMS_REMAINING")),_.Db(4),_.rc("ngClass",100==i.tmsPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",i.patientCommunicationProgressFormat(i.tmsPercent)," "),_.Db(1),_.rc("nzFormat",i.patientCommunicationProgressFormat)("nzPercent",i.tmsPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),_.Db(1),_.rc("assignedEpisodeWidgetEnabled","ADDITIONAL_TMS_ADHERENCE")("episodeCPTCodes",null==i.episode?null:i.episode.cptCodeList),_.Db(4),_.Yc(_.kc(34,53,"EPISODE.ADDITIONAL_TMS_A_REMAINING")),_.Db(4),_.rc("ngClass",100==i.additionalTMSPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",i.patientCommunicationProgressFormat(i.additionalTMSPercent)," "),_.Db(1),_.rc("nzFormat",i.patientCommunicationProgressFormat)("nzPercent",i.additionalTMSPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),_.Db(1),_.rc("assignedEpisodeWidgetEnabled","ADDITIONAL_TMS_B_ADHERENCE")("episodeCPTCodes",null==i.episode?null:i.episode.cptCodeList),_.Db(4),_.Yc(_.kc(45,55,"EPISODE.ADDITIONAL_TMS_B_REMAINING")),_.Db(4),_.rc("ngClass",100==i.additionalTMSBPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",i.patientCommunicationProgressFormat(i.additionalTMSBPercent)," "),_.Db(1),_.rc("nzFormat",i.patientCommunicationProgressFormat)("nzPercent",i.additionalTMSBPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),_.Db(1),_.rc("assignedEpisodeWidgetEnabled","CMT_ADHERENCE")("episodeCPTCodes",null==i.episode?null:i.episode.cptCodeList),_.Db(4),_.Yc(_.kc(56,57,"EPISODE.CMT_REMAINING")),_.Db(4),_.rc("ngClass",100==i.cmtPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",i.patientCommunicationProgressFormat(i.cmtPercent)," "),_.Db(1),_.rc("nzFormat",i.patientCommunicationProgressFormat)("nzPercent",i.cmtPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1)}}function ng(t,e){if(1&t&&(_.Vb(0),_.Vc(1,eg,62,59,"ng-container",13),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngForOf",null==n.episode?null:n.episode.activeCareplans)}}function ig(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"h4"),_.Xb(2,"div",14),_.Sb(3,"div",15),_.Sb(4,"div",15),_.Xb(5,"div",17),_.Xb(6,"div",14),_.Xb(7,"div",18),_.Xb(8,"strong"),_.Xc(9,"Non-complex CMT"),_.Wb(),_.Wb(),_.Xb(10,"div",19),_.Xb(11,"div",20),_.Xb(12,"p",21),_.Xc(13),_.Wb(),_.Wb(),_.Sb(14,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Xb(15,"div",17),_.Xb(16,"div",14),_.Xb(17,"div",23),_.Xb(18,"strong"),_.Xc(19,"Non-complex CMT - A"),_.Wb(),_.Wb(),_.Xb(20,"div",19),_.Xb(21,"div",20),_.Xb(22,"p",21),_.Xc(23),_.Wb(),_.Wb(),_.Sb(24,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Xb(25,"div",17),_.Xb(26,"div",14),_.Xb(27,"div",23),_.Xb(28,"strong"),_.Xc(29,"Non-complex CMT - B"),_.Wb(),_.Wb(),_.Xb(30,"div",19),_.Xb(31,"div",20),_.Xb(32,"p",21),_.Xc(33),_.Wb(),_.Wb(),_.Sb(34,"nz-progress",22),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()),2&t){var n=_.ic();_.Db(5),_.rc("assignedEpisodeWidgetEnabled","NON_COMPLEX_TMS")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),_.Db(7),_.rc("ngClass",100==n.ccmCMTPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",n.patientCommunicationProgressFormat(n.ccmCMTPercent)," "),_.Db(1),_.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.ccmCMTPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),_.Db(1),_.rc("assignedEpisodeWidgetEnabled","NON_COMPLEX_ADDITIONAL_TMS")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),_.Db(7),_.rc("ngClass",100==n.ccmAdditionalCMTPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",n.patientCommunicationProgressFormat(n.ccmAdditionalCMTPercent)," "),_.Db(1),_.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.ccmAdditionalCMTPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),_.Db(1),_.rc("assignedEpisodeWidgetEnabled","NON_COMPLEX_ADDITIONAL_TMS_B")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),_.Db(7),_.rc("ngClass",100==n.ccmAdditionalCMTBPercent?"completed-label-100":"completed-label"),_.Db(1),_.Zc(" ",n.patientCommunicationProgressFormat(n.ccmAdditionalCMTBPercent)," "),_.Db(1),_.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.ccmAdditionalCMTBPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1)}}function ag(t,e){if(1&t&&(_.Xb(0,"label"),_.Xc(1),_.jc(2,"translate"),_.jc(3,"date"),_.Sb(4,"br"),_.Xc(5),_.jc(6,"translate"),_.jc(7,"date"),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.ad(" ",_.kc(2,4,"COMMON.START_DATE"),": ",_.lc(3,6,null==n.episode?null:n.episode.startDate,"mediumDate")," "),_.Db(4),_.ad(" ",_.kc(6,9,"COMMON.END_DATE"),": ",_.lc(7,11,null==n.episode?null:n.episode.endDate,"mediumDate")," ")}}function rg(t,e){1&t&&(_.Vb(0),_.Xc(1,"s"),_.Ub())}function og(t,e){if(1&t&&(_.Xb(0,"h3",25),_.Xb(1,"span",26),_.Xc(2),_.Vc(3,ag,8,14,"ng-template",null,27,_.Wc),_.Wb(),_.Wb(),_.Xb(5,"h5",11),_.Xc(6),_.jc(7,"episodeStatusName"),_.Wb(),_.Xb(8,"h5",11),_.Xc(9),_.jc(10,"translate"),_.Vc(11,rg,2,0,"ng-container",5),_.Wb()),2&t){var n=_.Ic(4),i=_.ic();_.Db(1),_.rc("nzTooltipTitle",n),_.Db(1),_.Zc(" ",(null==i.episode?null:i.episode.name)||(null==i.episode?null:i.episode.type)," "),_.Db(4),_.Zc("Status : ",_.kc(7,6,null==i.episode?null:i.episode.status),""),_.Db(3),_.ad(" ",i.numberOfDays," ",_.kc(10,8,"COMMON.DAY"),""),_.Db(2),_.rc("ngIf",i.numberOfDays>1)}}function lg(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"span",30),_.ec("click",function(){return _.Lc(n),_.ic(2).editEpisode()}),_.Xc(2),_.jc(3,"translate"),_.Sb(4,"app-icons",31),_.Wb(),_.Xc(5," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),_.Ub()}2&t&&(_.Db(2),_.Zc(" ",_.kc(3,1,"EPISODE.EDIT")," \xa0 "))}function sg(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"span",30),_.ec("click",function(){return _.Lc(n),_.ic(2).viewEpisode()}),_.Xc(2," Manage \xa0 "),_.Sb(3,"app-icons",32),_.Wb(),_.Ub()}}var cg=function(){return["VIEW_EPISODE"]};function ug(t,e){1&t&&(_.Xb(0,"h6",28),_.Vc(1,lg,6,3,"ng-container",5),_.Vc(2,sg,4,0,"ng-container",29),_.Wb()),2&t&&(_.Db(1),_.rc("ngIf",!1),_.Db(1),_.rc("isFeaturePermitted",_.xc(2,cg)))}var dg,bg=((dg=function(){function t(e,n){b(this,t),this._router=e,this._patientsEventLogger=n,this.patientCommunicationProgressFormat=function(t){var e=Math.floor(20*t/100),n=20-e;return 20>e?n<10?"0".concat(n,"\n Minutes"):"".concat(n,"\n Minutes"):"Completed"}}return d(t,[{key:"episodeBlueprint",set:function(t){var e=null==t?void 0:t.episodeComponent;this.consentEnabled=null==e?void 0:e.enableConsentForm,this.physicianOrderEnabled=null==e?void 0:e.physicianOrderEnabled}},{key:"activeEpisode",set:function(t){var e,n,i,a;this.episode=t,this.consentObtained=null===(n=null===(e=this.episode)||void 0===e?void 0:e.availableConsents)||void 0===n?void 0:n.some(function(t){return Bf.b.OBTAINED==(null==t?void 0:t.consentStatus)}),this.physicianOrderObtained=null===(a=null===(i=this.episode)||void 0===i?void 0:i.physicianOrders)||void 0===a?void 0:a.some(function(t){return null==t?void 0:t.validTill}),this.numberOfDays=Object(On.a)(new Date(this.episode.endDate),new Date(this.episode.startDate));var r=this.episode.patientCommunications.filter(function(t){return Ye.a.TREATMENT_MANAGEMENT_SERVICE===t.cptCode}).reduce(function(t,e){return t+e.durationInMilliSeconds},0)/6e4,o=r?r-20:0,l=r?r-40:0,s=this.episode.patientCommunications.filter(function(t){return Ye.a.CARE_MANAGEMENT_TIME===t.cptCode}).reduce(function(t,e){return t+e.durationInMilliSeconds},0)/6e4,c=this.episode.patientCommunications.filter(function(t){return Ye.a.NON_COMPLEX_TMS===t.cptCode}).reduce(function(t,e){return t+e.durationInMilliSeconds},0)/6e4,u=s?s-20:0,d=s?s-40:0;this.tmsPercent=r/20*100,this.additionalTMSPercent=o/20*100,this.additionalTMSBPercent=l/20*100,this.cmtPercent=s/20*100,this.ccmCMTPercent=c/20*100,this.ccmAdditionalCMTPercent=u/20*100,this.ccmAdditionalCMTBPercent=d/20*100}},{key:"viewEpisode",value:function(){this._patientsEventLogger.patientDetailsActionEvent(this.episode.patientId,"view_active_episode"),this._router.navigate(["episodes/details/".concat(this.episode.patientId,"/").concat(this.episode.id)],{queryParams:{blueprintId:this.episode.blueprintId}})}},{key:"editEpisode",value:function(){this._patientsEventLogger.patientDetailsActionEvent(this.episode.patientId,"edit_active_episode"),this._router.navigate(["episodes/form/edit/".concat(this.episode.patientId)],{queryParams:{blueprintId:this.episode.blueprintId,episodeId:this.episode.id}})}}]),t}()).\u0275fac=function(t){return new(t||dg)(_.Rb(m.g),_.Rb(X.a))},dg.\u0275cmp=_.Lb({type:dg,selectors:[["app-active-episode"]],inputs:{episodeBlueprint:"episodeBlueprint",activeEpisode:"activeEpisode"},decls:11,vars:6,consts:[[1,"container"],[3,"nzTitle","nzExtra"],["nz-row","","nzGutter","8",4,"ngIf"],["nzAutoPlay",""],["class","dst","nz-carousel-content","",4,"ngFor","ngForOf"],[4,"ngIf"],["title",""],["actions",""],["nz-row","","nzGutter","8"],["nz-col","","nzXs","24","nzSm","12","nzMd","6",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],["nz-typography",""],["nz-carousel-content","",1,"dst"],[4,"ngFor","ngForOf"],["nz-row",""],["nz-col","","nzXs","24","nzSm","12","nzMd","4"],["nz-typography","","nzType","secondary"],["nz-col","","nzXs","24","nzSm","12","nzMd","5",1,"tms-adherence-container",3,"assignedEpisodeWidgetEnabled","episodeCPTCodes"],["nz-col","","nzFlex","70px",1,"patient-communication"],["nz-col","","nzFlex","70px"],["nz-row","","nzJustify","center","nzAlign","center",1,"progress-label-container"],[3,"ngClass"],["nzStrokeWidth","4",3,"nzFormat","nzPercent","nzStrokeColor","nzShowInfo"],["nz-col","","nzFlex","80px",1,"patient-communication"],["nz-col","","nzXs","24","nzSm","12","nzMd","5",3,"assignedEpisodeWidgetEnabled","episodeCPTCodes"],["nz-typography","","nzType","success"],["nz-tooltip","","nzTooltipPlacement","right",3,"nzTooltipTitle"],["episodeDates",""],["nz-typography","","nzType","success","id","actions"],[4,"isFeaturePermitted"],[3,"click"],["name","edit","strokeWidth","1px","strokeColor","#E5E5E5"],["name","arrowRight"]],template:function(t,e){if(1&t&&(_.Xb(0,"div",0),_.Xb(1,"nz-card",1),_.Vc(2,Kf,3,2,"div",2),_.Xb(3,"nz-carousel",3),_.Vc(4,tg,5,3,"div",4),_.Wb(),_.Vc(5,ng,2,1,"ng-container",5),_.Vc(6,ig,35,24,"ng-container",5),_.Wb(),_.Vc(7,og,12,10,"ng-template",null,6,_.Wc),_.Vc(9,ug,3,3,"ng-template",null,7,_.Wc),_.Wb()),2&t){var n=_.Ic(8),i=_.Ic(10);_.Db(1),_.rc("nzTitle",n)("nzExtra",i),_.Db(1),_.rc("ngIf",e.consentEnabled||e.physicianOrderEnabled),_.Db(2),_.rc("ngForOf",null==e.episode?null:e.episode.activeEducationVisits),_.Db(1),_.rc("ngIf",null==e.episode||null==e.episode.activeCareplans?null:e.episode.activeCareplans.length),_.Db(1),_.rc("ngIf",!(null!=e.episode&&null!=e.episode.activeCareplans&&e.episode.activeCareplans.length)&&"CCM"===(null==e.episode?null:e.episode.episodeType))}},directives:[Rn.a,h.q,Hf.a,h.p,Z.c,Z.a,H.a,Hf.b,Gf,h.o,ga.a,wi.d,ln.a,he.a],pipes:[Qt.a,h.e,Zf.a],styles:[".container[_ngcontent-%COMP%]{padding:0!important}.ant-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;box-shadow:0 3px 6px #00000029;border:1px solid #78952f;border-radius:15px;padding:5px 5px 0}[_nghost-%COMP%]     .ant-card-head{border-bottom:0}[_nghost-%COMP%]     .ant-card-body{padding-top:0;padding-bottom:15px}[_nghost-%COMP%]     .ant-card-extra{margin-top:-30px}h3[_ngcontent-%COMP%]{font-weight:400!important;font-size:18px!important}h4[_ngcontent-%COMP%]{font-weight:700!important}h5[_ngcontent-%COMP%]{margin-top:0!important;font:normal normal 600 13px/22px Nunito!important}#actions[_ngcontent-%COMP%]{cursor:pointer;font-size:10px}.dst[_ngcontent-%COMP%]{font-size:12px;text-align:right;line-height:0}nz-progress[_ngcontent-%COMP%]{line-height:1.5}[_nghost-%COMP%]     .ant-progress-outer{display:block;width:50%;padding-right:0!important;margin:auto!important}[_nghost-%COMP%]     .ant-progress-inner{display:block}[_nghost-%COMP%]     .ant-progress-text{text-align:center;margin:-30px auto auto;display:block;width:unset;white-space:pre}.patient-communication[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-progress-line{font-size:11px;cursor:default}[nz-carousel-content][_ngcontent-%COMP%]{height:15px;line-height:10px;overflow:hidden}app-icons[_ngcontent-%COMP%]{vertical-align:middle}.progress-label-container[_ngcontent-%COMP%]{margin-bottom:-8px}.tms-adherence-container[_ngcontent-%COMP%]{display:flex;align-content:center;flex-direction:column}.completed-label[_ngcontent-%COMP%], .completed-label-100[_ngcontent-%COMP%]{margin-bottom:0;text-align:center;font-size:12px}.completed-label-100[_ngcontent-%COMP%]{color:var(--primary-color)}"]}),dg);function pg(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"app-active-episode",2),_.Sb(2,"br"),_.Ub()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(1),_.rc("activeEpisode",n)("episodeBlueprint",null==i.episodeBlueprintMap?null:i.episodeBlueprintMap.get(n.blueprintId))}}function fg(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"h4"),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Vc(4,pg,3,2,"ng-container",1),_.Ub()),2&t){var n=_.ic();_.Db(2),_.Yc(_.kc(3,2,"EPISODE.ACTIVE_DETAILS")),_.Db(2),_.rc("ngForOf",n.episodes)}}var gg,hg=((gg=function t(){b(this,t)}).\u0275fac=function(t){return new(t||gg)},gg.\u0275cmp=_.Lb({type:gg,selectors:[["app-active-episodes"]],inputs:{episodes:"episodes",episodeBlueprintMap:"episodeBlueprintMap"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"activeEpisode","episodeBlueprint"]],template:function(t,e){1&t&&_.Vc(0,fg,5,4,"ng-container",0),2&t&&_.rc("ngIf",null==e.episodes?null:e.episodes.length)},directives:[h.q,h.p,bg],pipes:[Qt.a],styles:["h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700}"]}),gg),vg=o("ighe");function mg(t,e){1&t&&(_.Xb(0,"span",10),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"COMMON.SUSPENDED")," "))}function Sg(t,e){1&t&&(_.Xb(0,"span",11),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"COMMON.COMPLETED")," "))}function Ig(t,e){1&t&&_.Sb(0,"app-icons",12)}function Dg(t,e){1&t&&_.Sb(0,"app-icons",14)}var yg=function(){return["EDIT_EPISODE"]};function Cg(t,e){if(1&t){var n=_.Yb();_.Xb(0,"span",7),_.ec("click",function(){_.Lc(n);var t=_.ic().$implicit;return _.ic(2).reviveEpisode(null==t?null:t.id,null==t?null:t.patientId,null==t?null:t.blueprintId)}),_.Vc(1,Dg,1,0,"app-icons",13),_.Wb()}2&t&&(_.Db(1),_.rc("isFeaturePermitted",_.xc(1,yg)))}var Eg=function(){return["VIEW_EPISODE"]};function Xg(t,e){if(1&t){var n=_.Yb();_.Xb(0,"tr"),_.Xb(1,"td"),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Xb(4,"td"),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Xb(7,"td"),_.Xc(8),_.Wb(),_.Xb(9,"td"),_.Xc(10),_.Wb(),_.Xb(11,"td",4),_.Vc(12,mg,3,3,"span",5),_.Vc(13,Sg,3,3,"span",6),_.Wb(),_.Xb(14,"td"),_.Xb(15,"span",7),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).viewEpisode(null==t?null:t.id,null==t?null:t.patientId,null==t?null:t.blueprintId)}),_.Vc(16,Ig,1,0,"app-icons",8),_.Wb(),_.Xc(17," \xa0 "),_.Vc(18,Cg,2,2,"span",9),_.Wb(),_.Wb()}if(2&t){var i=e.$implicit,a=e.index;_.Db(2),_.Yc(_.lc(3,9,null==i?null:i.startDate,"mediumDate")),_.Db(3),_.Yc(_.lc(6,12,null==i?null:i.endDate,"mediumDate")),_.Db(3),_.Yc(null==i?null:i.duration),_.Db(2),_.Yc(null==i?null:i.name),_.Db(1),_.rc("ngSwitch",null==i?null:i.status),_.Db(1),_.rc("ngSwitchCase","SUSPENDED"),_.Db(1),_.rc("ngSwitchCase","COMPLETED"),_.Db(3),_.rc("isFeaturePermitted",_.xc(15,Eg)),_.Db(2),_.rc("ngIf","SUSPENDED"===(null==i?null:i.status)&&0===a)}}function Tg(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"nz-table",1,2),_.ec("nzPageIndexChange",function(t){return _.Lc(n),_.ic().firePageChanged(t)}),_.Xb(3,"thead"),_.Xb(4,"tr"),_.Xb(5,"th"),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"th"),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"th"),_.Xc(12),_.jc(13,"translate"),_.Wb(),_.Xb(14,"th"),_.Xc(15),_.jc(16,"translate"),_.Wb(),_.Xb(17,"th"),_.Xc(18),_.jc(19,"translate"),_.Wb(),_.Xb(20,"th"),_.Xc(21),_.jc(22,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(23,"tbody"),_.Vc(24,Xg,19,16,"tr",3),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.Ic(2),a=_.ic();_.Db(1),_.rc("nzData",a.episodes)("nzTotal",a.count)("nzPageIndex",a.pageIndex),_.Db(5),_.Yc(_.kc(7,10,"COMMON.STARTDATE")),_.Db(3),_.Yc(_.kc(10,12,"COMMON.ENDDATE")),_.Db(3),_.Yc(_.kc(13,14,"COMMON.DURATION")),_.Db(3),_.Yc(_.kc(16,16,"COMMON.EPISODE_NAME")),_.Db(3),_.Yc(_.kc(19,18,"COMMON.STATUS")),_.Db(3),_.Yc(_.kc(22,20,"TABLEHEADER.ACTIONS")),_.Db(3),_.rc("ngForOf",null==i?null:i.data)}}var zg,_g=((zg=function(){function t(e,n,i,a){b(this,t),this._router=e,this._episodesService=n,this._patientsEventLogger=i,this._notificationsService=a,this.pageIndex=1,this.pageChanged=new _.n}return d(t,[{key:"firePageChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageIndex=t,this.pageChanged.emit(t)}},{key:"viewEpisode",value:function(t,e,n){this._patientsEventLogger.patientDetailsActionEvent(e,"view_episode_from_list"),this._router.navigate(["episodes/details/".concat(e,"/").concat(t)],{queryParams:{blueprintId:n}})}},{key:"reviveEpisode",value:function(t,e,n){var i=this;this._episodesService.reviveEpisode(t).subscribe(function(){i._notificationsService.success("Episode","Episode revived successfully!"),i._router.navigate(["episodes/details/".concat(e,"/").concat(t)],{queryParams:{blueprintId:n}})})}}]),t}()).\u0275fac=function(t){return new(t||zg)(_.Rb(m.g),_.Rb(vg.a),_.Rb(X.a),_.Rb(V.b))},zg.\u0275cmp=_.Lb({type:zg,selectors:[["app-past-episodes"]],inputs:{patientId:"patientId",episodes:"episodes",count:["episodesCount","count"]},outputs:{pageChanged:"pageChanged"},decls:1,vars:1,consts:[[4,"ngIf"],["nzTitle","Previous Episodes","nzFrontPagination","false",3,"nzData","nzTotal","nzPageIndex","nzPageIndexChange"],["episodesTable",""],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["nz-typography","","nzType","secondary",4,"ngSwitchCase"],["nz-typography","",4,"ngSwitchCase"],[3,"click"],["name","view",4,"isFeaturePermitted"],[3,"click",4,"ngIf"],["nz-typography","","nzType","secondary"],["nz-typography",""],["name","view"],["name","reload","size","16","nz-tooltip","","nzTooltipTitle","Revive Episode",4,"isFeaturePermitted"],["name","reload","size","16","nz-tooltip","","nzTooltipTitle","Revive Episode"]],template:function(t,e){1&t&&_.Vc(0,Tg,25,22,"ng-container",0),2&t&&_.rc("ngIf",null==e.episodes?null:e.episodes.length)},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p,h.s,h.t,ln.a,H.a,he.a,wi.d],pipes:[Qt.a,h.e],styles:["tr[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-table-title{padding:8px 8px 0;font-weight:700}[_nghost-%COMP%]     .ant-table-thead>tr>th{background-color:#dcdcdc!important}"]}),zg);function Og(t,e){if(1&t&&_.Sb(0,"app-patient-status-notification",4),2&t){var n=_.ic();_.rc("patientInfo",n.patientInfo)}}function Mg(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"app-active-episodes",5),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("episodes",n.activeEpisodes)("episodeBlueprintMap",n.episodeBlueprintMap)}}function Ag(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"app-past-episodes",6),_.ec("pageChanged",function(t){return _.Lc(n),_.ic().getPastEpisodes(t)}),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(1),_.rc("patientId",i.patientId)("episodes",i.pastEpisodes)("episodesCount",i.pastEpisodesCount)}}function Pg(t,e){1&t&&(_.Xb(0,"p"),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.Db(1),_.Yc(_.kc(2,1,"EPISODE.NO_EPISODE")))}function Ng(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Pg,3,3,"p",2),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",n.activeEpisodesLoaded&&n.pastEpisodesLoaded)}}function Wg(t,e){1&t&&(_.Vb(0),_.Xb(1,"div",7),_.Sb(2,"nz-spin",8),_.Wb(),_.Ub())}var Rg,xg=((Rg=function(){function t(e,n,i){var a=this;b(this,t),this._activatedRoute=e,this._episodesService=n,this._patientViewModelService=i,this.patientId=this._activatedRoute.snapshot.params.id,this.activeEpisodes=[],this._patientViewModelService.showProfileReadiness.subscribe(function(t){return a.showPatientProfileReadiness=t})}return d(t,[{key:"ngOnInit",value:function(){this.getEpisodes(),this.createEpisodeBlueprintMap()}},{key:"createEpisodeBlueprintMap",value:function(){var t;this.episodeBlueprintMap=new Map(null===(t=this.episodeBlueprints)||void 0===t?void 0:t.filter(function(t){return!t.archived}).map(function(t){return[t.id,t]}))}},{key:"getOffset",value:function(t){return 1!==t?10*(t-1):0}},{key:"getEpisodes",value:function(){var t=this,e=this._episodesService.getEpisodes(this.patientId,10,0,null,[Jd.a.SCHEDULED,Jd.a.IN_PROGRESS]),n=this._episodesService.getEpisodes(this.patientId,10,this.getOffset(1));Object(Wf.a)([e,n]).subscribe(function(e){var n;t.getActiveEpisodesData(null===(n=e[0])||void 0===n?void 0:n.result),t.getPastEpisodesData(e[1])})}},{key:"getActiveEpisodes",value:function(){var t=this;this._episodesService.getEpisodes(this.patientId,10,0,null,[Jd.a.SCHEDULED,Jd.a.IN_PROGRESS]).subscribe(function(e){t.getActiveEpisodesData(null==e?void 0:e.result)})}},{key:"getPastEpisodes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._episodesService.getEpisodes(this.patientId,10,this.getOffset(e)).subscribe(function(e){t.getPastEpisodesData(e)})}},{key:"getActiveEpisodesData",value:function(t){var n=this;(null==t?void 0:t.length)>0?Object(Wf.a)(null==t?void 0:t.map(function(t){return n._episodesService.getEpisodeById(t.id)})).subscribe(function(t){var i;(i=n.activeEpisodes).push.apply(i,e(t)),n.activeEpisodesLoaded=!0}):this.activeEpisodesLoaded=!0}},{key:"getPastEpisodesData",value:function(t){var e,n=this;this.pastEpisodesCount=null==t?void 0:t.totalCount,this.pastEpisodes=[],null===(e=null==t?void 0:t.result)||void 0===e||e.forEach(function(t){t.duration="".concat(Object(On.a)(Object(_l.a)(null==t?void 0:t.endDate),Object(_l.a)(null==t?void 0:t.startDate))," days"),Jd.a.SCHEDULED!==t.status&&Jd.a.IN_PROGRESS!==t.status&&n.pastEpisodes.push(t)}),this.pastEpisodesLoaded=!0}}]),t}()).\u0275fac=function(t){return new(t||Rg)(_.Rb(m.a),_.Rb(Nn.a),_.Rb(lc.a))},Rg.\u0275cmp=_.Lb({type:Rg,selectors:[["app-episodes"]],inputs:{patientInfo:"patientInfo",episodeBlueprints:"episodeBlueprints"},decls:7,vars:6,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],[4,"ngIf"],[3,"patientId"],[3,"patientInfo"],[3,"episodes","episodeBlueprintMap"],[3,"patientId","episodes","episodesCount","pageChanged"],["nz-col","","nzSpan","24",2,"text-align","center","margin-top","50px"],["nzSimple","","nzTip","Loading Data..."]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Vc(1,Og,1,1,"app-patient-status-notification",1),_.Vc(2,Mg,2,2,"ng-container",2),_.Vc(3,Ag,2,3,"ng-container",2),_.Vc(4,Ng,2,1,"ng-container",2),_.Vc(5,Wg,3,0,"ng-container",2),_.Sb(6,"app-profile-readiness",3),_.Wb()),2&t&&(_.Db(1),_.rc("ngIf","NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("ngIf",!e.showPatientProfileReadiness),_.Db(1),_.rc("ngIf",!e.showPatientProfileReadiness),_.Db(1),_.rc("ngIf",!(null!=e.activeEpisodes&&e.activeEpisodes.length||null!=e.pastEpisodes&&e.pastEpisodes.length)),_.Db(1),_.rc("ngIf",!(e.activeEpisodesLoaded&&e.pastEpisodesLoaded)),_.Db(1),_.rc("patientId",e.patientId))},directives:[h.q,Yf,Kd.a,hg,_g,Z.a,Wn.a],pipes:[Qt.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}"]}),Rg);function kg(t,e){if(1&t&&_.Sb(0,"app-patient-status-notification",5),2&t){var n=_.ic();_.rc("patientInfo",n.patientInfo)}}function wg(t,e){if(1&t&&(_.Xb(0,"tr",6),_.Xb(1,"td",7),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.jc(5,"titlecase"),_.Wb(),_.Xb(6,"td"),_.Xc(7),_.Wb(),_.Xb(8,"td"),_.Xc(9),_.Wb(),_.Xb(10,"td"),_.Xc(11),_.jc(12,"date"),_.Wb(),_.Xb(13,"td"),_.Xc(14),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.tc("routerLink","/form/evalforms/view/",null==n?null:n._id,""),_.Db(1),_.sc("nzTooltipTitle",null==n||null==n.schema?null:n.schema.description),_.Db(1),_.Zc(" ",null==n||null==n.schema?null:n.schema.title," "),_.Db(2),_.Yc("SCORED_ASSESSMENT"===(null==n||null==n.schema?null:n.schema.type)?"Scored Assessment":_.kc(5,8,null==n||null==n.schema?null:n.schema.type)),_.Db(3),_.Yc("SCORED_ASSESSMENT"===(null==n||null==n.schema?null:n.schema.type)?null==n?null:n.evaluatedScore:"NA"),_.Db(2),_.Yc("SCORED_ASSESSMENT"===(null==n||null==n.schema?null:n.schema.type)?null==n?null:n.identifiedRisk:"NA"),_.Db(2),_.Yc(_.lc(12,10,null==n?null:n.assessedOn,"medium")),_.Db(3),_.Yc((null==n||null==n.careplan?null:n.careplan.name)||"N/A")}}var Vg,Lg=((Vg=function(){function t(e,n){b(this,t),this._activatedRoute=e,this._formsService=n,this.patientId=this._activatedRoute.snapshot.params.id,this.forms=[]}return d(t,[{key:"ngOnInit",value:function(){this.getAssessedFormsForPatients()}},{key:"getAssessedFormsForPatients",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._formsService.getPatientEvalForms(this.patientId,e,10).subscribe(function(e){var n,i,a,r;t.forms=null===(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.answers)||void 0===i?void 0:i.obj,t.count=null===(r=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.answers)||void 0===r?void 0:r.total})}}]),t}()).\u0275fac=function(t){return new(t||Vg)(_.Rb(m.a),_.Rb(Pn.a))},Vg.\u0275cmp=_.Lb({type:Vg,selectors:[["app-assessed-forms"]],inputs:{patientInfo:"patientInfo"},decls:26,vars:22,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],[3,"nzData","nzTotal"],["formsTable",""],[3,"routerLink",4,"ngFor","ngForOf"],[3,"patientInfo"],[3,"routerLink"],["nz-tooltip","",3,"nzTooltipTitle"]],template:function(t,e){if(1&t&&(_.Xb(0,"div",0),_.Vc(1,kg,1,1,"app-patient-status-notification",1),_.Xb(2,"nz-table",2,3),_.Xb(4,"thead"),_.Xb(5,"tr"),_.Xb(6,"th"),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Xb(9,"th"),_.Xc(10),_.jc(11,"translate"),_.Wb(),_.Xb(12,"th"),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Xb(15,"th"),_.Xc(16),_.jc(17,"translate"),_.Wb(),_.Xb(18,"th"),_.Xc(19),_.jc(20,"translate"),_.Wb(),_.Xb(21,"th"),_.Xc(22),_.jc(23,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(24,"tbody"),_.Vc(25,wg,15,13,"tr",4),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(3);_.Db(1),_.rc("ngIf","NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("nzData",e.forms)("nzTotal",e.count),_.Db(5),_.Yc(_.kc(8,10,"COMMON.NAME")),_.Db(3),_.Yc(_.kc(11,12,"PURPOSE")),_.Db(3),_.Yc(_.kc(14,14,"SCORE")),_.Db(3),_.Yc(_.kc(17,16,"RISK_CATEGORY")),_.Db(3),_.Yc(_.kc(20,18,"COMMON.DATE")),_.Db(3),_.Yc(_.kc(23,20,"CARE_PLAN")),_.Db(3),_.rc("ngForOf",null==n?null:n.data)}},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p,Kd.a,m.h,wi.d],pipes:[Qt.a,h.A,h.e],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),Vg);function Fg(t,e){if(1&t&&_.Sb(0,"app-patient-status-notification",5),2&t){var n=_.ic();_.rc("patientInfo",n.patientInfo)}}function Ug(t,e){if(1&t&&(_.Xb(0,"tr",6),_.Xb(1,"td",7),_.Xc(2),_.Wb(),_.Xb(3,"td"),_.Xc(4),_.jc(5,"titlecase"),_.Wb(),_.Xb(6,"td"),_.Xc(7),_.Wb(),_.Xb(8,"td"),_.Xc(9),_.Wb(),_.Xb(10,"td"),_.Xc(11),_.jc(12,"date"),_.Wb(),_.Wb()),2&t){var n=e.$implicit;_.tc("routerLink","/form/directevalforms/view/",null==n?null:n._id,""),_.Db(1),_.sc("nzTooltipTitle",null==n||null==n.schema?null:n.schema.description),_.Db(1),_.Zc(" ",null==n||null==n.schema?null:n.schema.title," "),_.Db(2),_.Yc("SCORED_ASSESSMENT"===(null==n||null==n.schema?null:n.schema.type)?"Scored Assessment":_.kc(5,7,null==n||null==n.schema?null:n.schema.type)),_.Db(3),_.Yc("SCORED_ASSESSMENT"===(null==n||null==n.schema?null:n.schema.type)?null==n?null:n.evaluatedScore:"NA"),_.Db(2),_.Yc("SCORED_ASSESSMENT"===(null==n||null==n.schema?null:n.schema.type)?null==n?null:n.identifiedRisk:"NA"),_.Db(2),_.Yc(_.lc(12,9,null==n?null:n.assessedOn,"medium"))}}var jg,Yg=((jg=function(){function t(e,n){b(this,t),this._activatedRoute=e,this._formsService=n,this.patientId=this._activatedRoute.snapshot.params.id,this.forms=[]}return d(t,[{key:"ngOnInit",value:function(){this.getDirectFormsForPatients()}},{key:"getDirectFormsForPatients",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._formsService.getPatientDirectForms(this.patientId,e,10).subscribe(function(e){var n,i,a,r;t.forms=null===(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.answers)||void 0===i?void 0:i.obj,t.count=null===(r=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.answers)||void 0===r?void 0:r.total})}}]),t}()).\u0275fac=function(t){return new(t||jg)(_.Rb(m.a),_.Rb(Pn.a))},jg.\u0275cmp=_.Lb({type:jg,selectors:[["app-direct-forms"]],inputs:{patientInfo:"patientInfo"},decls:23,vars:19,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],[3,"nzData","nzTotal"],["formsTable",""],[3,"routerLink",4,"ngFor","ngForOf"],[3,"patientInfo"],[3,"routerLink"],["nz-tooltip","",3,"nzTooltipTitle"]],template:function(t,e){if(1&t&&(_.Xb(0,"div",0),_.Vc(1,Fg,1,1,"app-patient-status-notification",1),_.Xb(2,"nz-table",2,3),_.Xb(4,"thead"),_.Xb(5,"tr"),_.Xb(6,"th"),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Xb(9,"th"),_.Xc(10),_.jc(11,"translate"),_.Wb(),_.Xb(12,"th"),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Xb(15,"th"),_.Xc(16),_.jc(17,"translate"),_.Wb(),_.Xb(18,"th"),_.Xc(19),_.jc(20,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(21,"tbody"),_.Vc(22,Ug,13,12,"tr",4),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(3);_.Db(1),_.rc("ngIf","NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),_.Db(1),_.rc("nzData",e.forms)("nzTotal",e.count),_.Db(5),_.Yc(_.kc(8,9,"COMMON.NAME")),_.Db(3),_.Yc(_.kc(11,11,"PURPOSE")),_.Db(3),_.Yc(_.kc(14,13,"SCORE")),_.Db(3),_.Yc(_.kc(17,15,"RISK_CATEGORY")),_.Db(3),_.Yc(_.kc(20,17,"COMMON.DATE")),_.Db(3),_.rc("ngForOf",null==n?null:n.data)}},directives:[h.q,Q.f,Q.n,Q.o,Q.e,Q.l,Q.i,h.p,Kd.a,m.h,wi.d],pipes:[Qt.a,h.A,h.e],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),jg),Bg=o("HStR"),Hg=o("3+Kf");function Gg(t,e){if(1&t){var n=_.Yb();_.Vb(0,7),_.Xb(1,"button",8),_.ec("click",function(){return _.Lc(n),_.ic(3).validateProfileReadiness()}),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Ub()}2&t&&(_.Db(2),_.Zc(" + ",_.kc(3,1,"COMMON.CREATE_EPISODE")," "))}function Zg(t,e){if(1&t){var n=_.Yb();_.Vb(0,7),_.Xb(1,"button",8),_.ec("click",function(){return _.Lc(n),_.ic(3).isPhysicianAssignerVisible=!0}),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Ub()}2&t&&(_.Db(2),_.Zc(" ",_.kc(3,1,"COMMON.CREATE_EPISODE")," "))}function $g(t,e){if(1&t&&(_.Vb(0),_.Vc(1,Gg,4,3,"ng-container",6),_.Vc(2,Zg,4,3,"ng-container",6),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngIf",null==n.patientInfo||null==n.patientInfo.assignedStaff?null:n.patientInfo.assignedStaff.length),_.Db(1),_.rc("ngIf","TENANT_ADMIN"===n.loggedInUserAccountType&&"DISCHARGED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)&&!(null!=n.patientInfo&&null!=n.patientInfo.assignedStaff&&n.patientInfo.assignedStaff.length))}}function qg(t,e){if(1&t&&(_.Vb(0),_.Vc(1,$g,3,2,"ng-container",5),_.Ub()),2&t){var n=_.ic();_.Db(1),_.rc("ngIf",null==n.enabledEpisodeBlueprints?null:n.enabledEpisodeBlueprints.length)}}var Kg=function(){return["."]};function Qg(t,e){1&t&&(_.Xb(0,"a",15),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.rc("routerLink",_.xc(4,Kg)),_.Db(1),_.Zc(" ",_.kc(2,2,"COMMON.INFORMATION")," "))}function Jg(t,e){if(1&t){var n=_.Yb();_.Xb(0,"app-patient-information",16),_.ec("refresh",function(t){return _.Lc(n),_.ic(2).onRefresh(t)}),_.Wb()}if(2&t){var i=_.ic(2);_.rc("patientInfo",i.patientInfo)}}var th=function(){return{tab:"alerts"}};function eh(t,e){1&t&&(_.Xb(0,"a",17),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.rc("routerLink",_.xc(5,Kg))("queryParams",_.xc(6,th)),_.Db(1),_.Zc(" ",_.kc(2,3,"COMMON.ALERTS")," "))}var nh=function(){return{tab:"episodes"}};function ih(t,e){1&t&&(_.Xb(0,"a",17),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.rc("routerLink",_.xc(5,Kg))("queryParams",_.xc(6,nh)),_.Db(1),_.Zc(" ",_.kc(2,3,"COMMON.EPISODES")," "))}function ah(t,e){if(1&t&&(_.Xb(0,"nz-tab"),_.Vc(1,ih,3,7,"a",13),_.Sb(2,"app-episodes",18),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.rc("patientInfo",n.patientInfo)("episodeBlueprints",n.enabledEpisodeBlueprints)}}var rh=function(){return{tab:"forms"}};function oh(t,e){1&t&&(_.Xb(0,"a",17),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.rc("routerLink",_.xc(5,Kg))("queryParams",_.xc(6,rh)),_.Db(1),_.Zc(" ",_.kc(2,3,"COMMON.FORMS")," "))}function lh(t,e){if(1&t&&(_.Xb(0,"nz-tab"),_.Vc(1,oh,3,7,"a",13),_.Sb(2,"app-assessed-forms",14),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.rc("patientInfo",n.patientInfo)}}var sh=function(){return{tab:"direct-forms"}};function ch(t,e){1&t&&(_.Xb(0,"a",17),_.Xc(1),_.jc(2,"translate"),_.Wb()),2&t&&(_.rc("routerLink",_.xc(5,Kg))("queryParams",_.xc(6,sh)),_.Db(1),_.Zc(" ",_.kc(2,3,"COMMON.DIRECT_FORMS")," "))}function uh(t,e){if(1&t&&(_.Xb(0,"nz-tab"),_.Vc(1,ch,3,7,"a",13),_.Sb(2,"app-direct-forms",14),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.rc("patientInfo",n.patientInfo)}}var dh=function(){return{tab:"visits"}};function bh(t,e){1&t&&(_.Xb(0,"a",17),_.Xc(1," Visits "),_.Wb()),2&t&&_.rc("routerLink",_.xc(2,Kg))("queryParams",_.xc(3,dh))}function ph(t,e){if(1&t&&(_.Xb(0,"nz-tab"),_.Vc(1,bh,2,4,"a",13),_.Sb(2,"app-visits",19),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.rc("patientInfo",n.patientInfo)("patientId",null==n.patientInfo?null:n.patientInfo.id)}}var fh=function(){return{tab:"encounters"}};function gh(t,e){1&t&&(_.Xb(0,"a",17),_.Xc(1," Encounters "),_.Wb()),2&t&&_.rc("routerLink",_.xc(2,Kg))("queryParams",_.xc(3,fh))}function hh(t,e){if(1&t&&(_.Xb(0,"nz-tab"),_.Vc(1,gh,2,4,"a",13),_.Sb(2,"app-encounters",19),_.Wb()),2&t){var n=_.ic(2);_.Db(2),_.rc("patientInfo",n.patientInfo)("patientId",null==n.patientInfo?null:n.patientInfo.id)}}function vh(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-tabset",9),_.ec("nzSelectedIndexChange",function(t){return _.Lc(n),_.ic().onTabChange(t)}),_.Xb(1,"nz-tab"),_.Vc(2,Qg,3,5,"a",10),_.Vc(3,Jg,1,1,"app-patient-information",11),_.Wb(),_.Xb(4,"nz-tab",12),_.Vc(5,eh,3,7,"a",13),_.Sb(6,"app-alert-notifications",14),_.Wb(),_.Vc(7,ah,3,2,"nz-tab",5),_.Vc(8,lh,3,1,"nz-tab",5),_.Vc(9,uh,3,1,"nz-tab",5),_.Vc(10,ph,3,2,"nz-tab",5),_.Vc(11,hh,3,2,"nz-tab",5),_.Wb()}if(2&t){var i=_.ic();_.Db(3),_.rc("ngIf",!i.loadComponent),_.Db(1),_.rc("nzDisabled",!i.showNotificationTab),_.Db(2),_.rc("patientInfo",i.patientInfo),_.Db(1),_.rc("ngIf",!(null==i.enabledEpisodeBlueprints||!i.enabledEpisodeBlueprints.length)),_.Db(1),_.rc("ngIf",null==i.tenantConfig||null==i.tenantConfig.featureConfigs?null:i.tenantConfig.featureConfigs.formsEnabled),_.Db(1),_.rc("ngIf",null==i.tenantConfig||null==i.tenantConfig.featureConfigs?null:i.tenantConfig.featureConfigs.formsEnabled),_.Db(1),_.rc("ngIf",!i.loading),_.Db(1),_.rc("ngIf",!i.loading)}}var mh=function(){return{role:"PHYSICIAN"}};function Sh(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"h3",20),_.Xc(2,"Create episode"),_.Wb(),_.Xb(3,"p"),_.Xc(4," Assign "),_.Xb(5,"strong"),_.Xc(6),_.jc(7,"titlecase"),_.Wb(),_.Xc(8," to a physician and a monitoring staff before proceeding to create an episode. "),_.Wb(),_.Xb(9,"div",21),_.Xb(10,"div",22),_.Xb(11,"button",23),_.ec("click",function(){return _.Lc(n),_.ic().isPhysicianAssignerVisible=!1}),_.Xc(12,"Cancel"),_.Wb(),_.Wb(),_.Xb(13,"div",24),_.Xb(14,"button",25),_.ec("click",function(){return _.Lc(n),_.ic().isPhysicianAssignerVisible=!1}),_.Xc(15,"Okay"),_.Wb(),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(6),_.Yc(_.kc(7,3,null==i.patientInfo?null:i.patientInfo.fullName)),_.Db(8),_.tc("routerLink","/patient/assign/physician/",null==i.patientInfo?null:i.patientInfo.id,""),_.rc("queryParams",_.xc(5,mh))}}var Ih,Dh=function(){return["ADD_EPISODE"]},yh=((Ih=function(t){r(n,t);var e=l(n);function n(t,i,a,r,o,l,s,c,u){var d;return b(this,n),(d=e.call(this))._router=t,d._patientsService=i,d._modalService=a,d._dataSharingService=r,d._vitalBlueprintsService=o,d._patientsEventLogger=l,d._patientViewModalService=s,d._activatedRoute=c,d._alertModalService=u,d.showNotificationTab=!0,d.isTenantAdmin=!1,d.tab=new Map([[0,"INFO"],[1,"ALERTS"],[2,"ALERT_RULES"],[3,"EPISODES"],[4,"FORMS"],[5,"DIRECT_FORMS"]]),d.level=$b.c.PATIENT_LEVEL,d.loading=!1,d.onRefresh=function(t){return d.getPatientInformation()},d.showNotificationTab=!0,d.patientId=d._activatedRoute.snapshot.params.id,d.loggedInUserRole=localStorage.getItem("loggedInUserRole"),d.isTenantAdmin=d.loggedInUserRole==w.a.TENANT_ADMIN,d._dataSharingService.tenantSettings.pipe(Object(Ve.a)(d.unsubscribed)).subscribe(function(t){var e,n;d.tenantConfig=t,d.showNotificationTab=null===(e=null==t?void 0:t.vitalConfig)||void 0===e?void 0:e.enabled,d.enabledEpisodeBlueprints=[],null===(n=null==t?void 0:t.episodeBlueprints)||void 0===n||n.forEach(function(t){(null==t?void 0:t.archived)||d.enabledEpisodeBlueprints.push(t)})}),d.getAllVitalBlueprints(),d.loggedInUserAccountType=localStorage.getItem("loggedInUserAccountType"),d}return d(n,[{key:"ngOnInit",value:function(){this.getPatientInformation()}},{key:"onTabChange",value:function(t){this.showAlertRuleCreateButton="ALERT_RULES"==this.tab.get(t)}},{key:"getPatientInformation",value:function(){var t=this;this.loading=!0,this.loadComponent=!0,this._patientsService.fetchPatientById(this.patientId).subscribe(function(e){t.loading=!1,t.patientInfo=e,t.loadComponent=!1,localStorage.setItem(an.a.REQUEST_TENANT_TEMP_IDS,t.patientInfo.tenantId)})}},{key:"getAllVitalBlueprints",value:function(){var t=this;this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(function(e){t.vitalBlueprints=e})}},{key:"redirectToStaffAssigner",value:function(){var t,e,n,i;Array.from(this.patientInfo.physicianStaffs.primaryStaff.values()).length?(this._router.navigate(["/patient/assign-staff/".concat(null===(t=this.patientInfo)||void 0===t?void 0:t.id,"/").concat(null===(e=this.patientInfo)||void 0===e?void 0:e.locationId,"/").concat(null===(n=this.patientInfo)||void 0===n?void 0:n.fullName)]),this._patientsEventLogger.patientActionEvent(null===(i=this.informationComponent)||void 0===i?void 0:i.patientId,"assign_staff_click")):this._modalService.create({nzContent:ru,nzComponentParams:{patientInfo:this.patientInfo},nzFooter:null,nzMaskClosable:!1})}},{key:"showCarePlanTemplates",value:function(){var t,e;this._modalService.create({nzContent:nb.a,nzComponentParams:{patientId:this.patientId,tenantId:null===(e=null===(t=this.informationComponent)||void 0===t?void 0:t.patientInfo)||void 0===e?void 0:e.tenantId},nzFooter:null})}},{key:"validateProfileReadiness",value:function(){this._router.navigate([],{queryParams:{tab:"episodes"},queryParamsHandling:"merge"}),this._patientViewModalService.showProfileReadinessModal()}},{key:"createAlert",value:function(){this._alertModalService.showAlertRuleCreateModal(this.level,this.patientId,"ADD")}}]),n}(D.a)).\u0275fac=function(t){return new(t||Ih)(_.Rb(m.g),_.Rb(y.a),_.Rb(O.f),_.Rb(Be.a),_.Rb(Zb.a),_.Rb(X.a),_.Rb(lc.a),_.Rb(m.a),_.Rb(qb.a))},Ih.\u0275cmp=_.Lb({type:Ih,selectors:[["app-patient-view"]],viewQuery:function(t,e){var n;1&t&&_.ed(Gb,1),2&t&&_.Hc(n=_.fc())&&(e.informationComponent=n.first)},features:[_.Ab],decls:7,vars:14,consts:[["isSecondaryActionEnabled","'TENANT_ADMIN' === loggedInUserAccountType && patientInfo?.patientStatus !== 'DISCHARGED' && patientInfo?.patientStatus !== 'NOT_ONBOARDED'",3,"defaultTitle","isSearchEnabled","isActionEnabled","actionTitle","secondaryActionTitle","action","secondaryAction"],[4,"isFeaturePermitted"],["nzLinkRouter","",3,"nzSelectedIndexChange",4,"ngIf"],["nzWidth","450px",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[4,"ngIf"],["extra","",4,"ngIf"],["extra",""],["nz-button","","nzType","primary",3,"click"],["nzLinkRouter","",3,"nzSelectedIndexChange"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],[3,"patientInfo","refresh",4,"ngIf"],[3,"nzDisabled"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],[3,"patientInfo"],["nz-tab-link","",3,"routerLink"],[3,"patientInfo","refresh"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],[3,"patientInfo","episodeBlueprints"],[3,"patientInfo","patientId"],["nz-typography",""],["nz-row","","nzGutter","32","nzJustify","end"],["nz-col","","nzSpan","8","nzOffset","8"],["nz-button","",1,"assigner",3,"click"],["nz-col","","nzSpan","8"],["nz-button","","nzType","primary",1,"assigner",3,"routerLink","queryParams","click"]],template:function(t,e){1&t&&(_.Xb(0,"app-header",0),_.ec("action",function(){return e.showCarePlanTemplates()})("secondaryAction",function(){return e.redirectToStaffAssigner()}),_.jc(1,"translate"),_.jc(2,"translate"),_.Vc(3,qg,2,1,"ng-container",1),_.Wb(),_.Vc(4,vh,12,8,"nz-tabset",2),_.Xb(5,"nz-modal",3),_.ec("nzVisibleChange",function(t){return e.isPhysicianAssignerVisible=t})("nzOnCancel",function(){return e.isPhysicianAssignerVisible=!1}),_.Vc(6,Sh,16,6,"ng-container",4),_.Wb()),2&t&&(_.sc("defaultTitle",null==e.informationComponent||null==e.informationComponent.patientInfo?null:e.informationComponent.patientInfo.fullName),_.sc("actionTitle",_.kc(1,9,"CAREPLAN.ASSIGN_CAREPLAN")),_.tc("secondaryActionTitle","+ ",_.kc(2,11,"COMMON.ASSIGNADMIN"),""),_.rc("isSearchEnabled",!1)("isActionEnabled",!(null!=e.enabledEpisodeBlueprints&&e.enabledEpisodeBlueprints.length)),_.Db(3),_.rc("isFeaturePermitted",_.xc(13,Dh)),_.Db(1),_.rc("ngIf",e.tenantConfig),_.Db(1),_.rc("nzVisible",e.isPhysicianAssignerVisible)("nzFooter",null))},directives:[L.a,ln.a,h.q,O.a,O.b,M.a,A.a,P.a,K.d,K.a,K.c,Nf,K.b,m.j,Gb,xg,Lg,Yg,Bg.a,Hg.a,H.a,Z.c,Z.a,m.h],pipes:[Qt.a,h.A],styles:["a[_ngcontent-%COMP%]{color:unset}h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b;margin-bottom:15px}.assigner[_ngcontent-%COMP%]{width:100%;margin-top:10px}[_nghost-%COMP%]     .ant-affix{bottom:0!important;width:auto}[_nghost-%COMP%]     .ant-tabs{height:100%}.quick-action[_ngcontent-%COMP%]{padding:20px;height:100px;background:var(--neutral-color);width:100%;bottom:0;cursor:pointer}.icon-btn[_ngcontent-%COMP%], .quick-action[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-btn[_ngcontent-%COMP%]{width:50px;height:50px;background:#e9e9e9;border-radius:50%;flex-direction:column;margin:10px}.app-icon[_ngcontent-%COMP%]{margin-top:30%;margin-right:0}.right-btn[_ngcontent-%COMP%]{font-size:12px;margin-left:6px;color:var(--primary-color)}.create-alert-span[_ngcontent-%COMP%]{width:200px;display:flex;align-items:center}"]}),Ih);function Ch(t,e){1&t&&(_.Vb(0),_.Xc(1,", "),_.Ub())}function Eh(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xc(1),_.jc(2,"titlecase"),_.jc(3,"userLocation"),_.Vc(4,Ch,2,0,"ng-container",5),_.Wb()),2&t){var n=e.$implicit,i=e.index,a=_.ic(3);_.Db(1),_.Zc(" ",_.kc(2,2,_.kc(3,4,null==n?null:n.id)),""),_.Db(3),_.rc("ngIf",i!==(null==a.patient||null==a.patient.locations?null:a.patient.locations.length)-1)}}function Xh(t,e){if(1&t&&(_.Vb(0),_.Xc(1," You can assign the patient to any "),_.Xb(2,"strong"),_.Xc(3,"One"),_.Wb(),_.Xc(4," physician from the "),_.Vc(5,Eh,5,6,"strong",11),_.Xc(6," sites. "),_.Ub()),2&t){var n=_.ic(2);_.Db(5),_.rc("ngForOf",null==n.patient?null:n.patient.locations)}}function Th(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",12),_.ec("click",function(t){return _.Lc(n),_.ic(2).filterPhysicians(t)}),_.Sb(1,"app-icons",13),_.Wb()}2&t&&(_.Db(1),_.rc("originalStyle",!0))}function zh(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-empty",14),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("nzNotFoundContent",n.searchKey?"No physicians available matching your search":"No physicians found")}}function _h(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" 0",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0," ")}}function Oh(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount," ")}}function Mh(t,e){1&t&&(_.Vb(0),_.Xc(1," Active Patient "),_.Ub())}function Ah(t,e){1&t&&(_.Vb(0),_.Xc(1),_.jc(2,"translate"),_.Ub()),2&t&&(_.Db(1),_.Zc(" Active ",_.kc(2,1,"COMMON.PATIENTS")," "))}function Ph(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" 0",(null==n||null==n.assignedStaff?null:n.assignedStaff.length)||0," ")}}function Nh(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=_.ic().$implicit;_.Db(1),_.Zc(" ",null==n||null==n.assignedStaff?null:n.assignedStaff.length," ")}}var Wh=function(t){return{border:t}},Rh=function(t){return[t]};function xh(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",15),_.Xb(2,"div",16),_.Xb(3,"div",17),_.Xb(4,"label",18),_.ec("ngModelChange",function(t){return e.$implicit.selected=t})("ngModelChange",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).deselectAllPhysicians(null==t?null:t.id)}),_.Wb(),_.Wb(),_.Wb(),_.Xb(5,"h5",19),_.Xb(6,"strong",20),_.Xc(7),_.Wb(),_.Wb(),_.Xb(8,"h5",21),_.jc(9,"userLocations"),_.Xc(10),_.jc(11,"userLocations"),_.Wb(),_.Xb(12,"div",22),_.Xb(13,"div",23),_.Xb(14,"span",24),_.Vc(15,_h,2,1,"ng-container",5),_.Vc(16,Oh,2,1,"ng-container",5),_.Wb(),_.Xb(17,"span",25),_.Vc(18,Mh,2,0,"ng-container",5),_.Vc(19,Ah,3,3,"ng-container",5),_.Wb(),_.Wb(),_.Xb(20,"div",23),_.Xb(21,"span",24),_.Vc(22,Ph,2,1,"ng-container",5),_.Vc(23,Nh,2,1,"ng-container",5),_.Wb(),_.Xb(24,"span",25),_.Xc(25," Monitoring Staff "),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit,a=_.ic(2);_.Db(1),_.rc("ngClass",null!=i&&i.assigned?"assigned shadowed":"")("ngStyle",_.yc(25,Wh,null!=i&&i.selected?"2px solid #a7c853":"2px solid #ffffff")),_.Db(3),_.rc("nzDisabled",a.physicianAlreadyAssigned)("ngModel",i.selected)("nzValue",i.id),_.Db(1),_.rc("nzTooltipTitle",(null==i?null:i.fullName)||"N/A"),_.Db(1),_.rc("ngClass",_.yc(27,Rh,null!=i&&i.assigned?"assigned":"")),_.Db(1),_.Zc(" ",null==i?null:i.fullName," "),_.Db(1),_.sc("nzTooltipTitle",_.kc(9,21,null==i?null:i.locations)),_.rc("ngClass",_.yc(29,Rh,null!=i&&i.assigned?"assigned":"")),_.Db(2),_.Zc(" ",_.kc(11,23,null==i?null:i.locations)," "),_.Db(4),_.rc("ngClass",_.yc(31,Rh,null!=i&&i.assigned?"assigned":"")),_.Db(1),_.rc("ngIf",((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)<10),_.Db(1),_.rc("ngIf",((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)>=10),_.Db(1),_.rc("ngClass",_.yc(33,Rh,null!=i&&i.assigned?"assigned":"")),_.Db(1),_.rc("ngIf",1===((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)),_.Db(1),_.rc("ngIf",1!==((null==i||null==i.clinicianState?null:i.clinicianState.assignedPatientCount)||0)),_.Db(2),_.rc("ngClass",_.yc(35,Rh,null!=i&&i.assigned?"assigned":"")),_.Db(1),_.rc("ngIf",((null==i||null==i.assignedStaff?null:i.assignedStaff.length)||0)<10),_.Db(1),_.rc("ngIf",((null==i||null==i.assignedStaff?null:i.assignedStaff.length)||0)>=10),_.Db(1),_.rc("ngClass",_.yc(37,Rh,null!=i&&i.assigned?"assigned":""))}}function kh(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",1),_.Xb(1,"div",2),_.Xb(2,"div",3),_.Xb(3,"h4",4),_.Xc(4),_.jc(5,"titlecase"),_.Wb(),_.Xb(6,"p",4),_.Xc(7),_.jc(8,"titlecase"),_.Sb(9,"br"),_.Sb(10,"br"),_.Vc(11,Xh,7,1,"ng-container",5),_.Wb(),_.Wb(),_.Xb(12,"div",6),_.Xb(13,"nz-input-group",7),_.Xb(14,"input",8),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().searchKey=t})("ngModelChange",function(t){return _.Lc(n),_.ic().filterPhysicians(t)}),_.jc(15,"translate"),_.Wb(),_.Wb(),_.Vc(16,Th,2,1,"ng-template",null,9,_.Wc),_.Wb(),_.Wb(),_.Xb(18,"div",10),_.Vc(19,zh,2,1,"ng-container",5),_.Vc(20,xh,26,39,"ng-container",11),_.Wb(),_.Wb()}if(2&t){var i=_.Ic(17),a=_.ic();_.Db(4),_.Zc("Assign ",_.kc(5,8,null==a.patient?null:a.patient.fullName)," to a physician"),_.Db(3),_.Zc(" Assigining ",_.kc(8,10,null==a.patient?null:a.patient.fullName)," to a physician will help the physician and their monitoring staff create relevant episodes and provide a suitable care program. "),_.Db(4),_.rc("ngIf","PHYSICIAN"!==a.loggedInUserRole),_.Db(2),_.rc("nzAddOnAfter",i),_.Db(1),_.sc("placeholder",_.kc(15,12,"COMMON.SEARCH")),_.rc("ngModel",a.searchKey),_.Db(5),_.rc("ngIf",!(null!=a.filteredPhysicians&&a.filteredPhysicians.length)),_.Db(1),_.rc("ngForOf",a.filteredPhysicians)}}var wh,Vh=((wh=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l){var s;return b(this,i),(s=n.call(this))._router=t,s._staffService=e,s._patientsService=a,s._activatedRoute=r,s._dataSharingService=o,s._notificationsService=l,s.patientId=s._activatedRoute.snapshot.params.id,s.loggedInUser=localStorage.getItem("loggedInUser"),s.loggedInUserRole=localStorage.getItem("loggedInUserRole"),s._routeHelperService.isPrimaryActionTriggered().pipe(Object(bl.filter)(function(t){return!!t}),Object(Rs.takeUntil)(s.unsubscribed)).subscribe(function(){return s.assignPhysicians()}),s}return d(i,[{key:"ngOnInit",value:function(){var t=this;if(w.a.PHYSICIAN===this.loggedInUserRole){var e={};e[this.loggedInUser]=this.patientId,this.assignPhysicianToPatient(e).subscribe(function(){return t.getPatientInformation()})}else this.getPatientInformation();this.getTenantConfig()}},{key:"getTenantConfig",value:function(){var t=this;this._dataSharingService.tenantSettings.pipe(Object(bl.filter)(function(t){return!!t}),Object(Rs.takeUntil)(this.unsubscribed)).subscribe(function(e){return t.tenantConfig=e})}},{key:"getPatientInformation",value:function(){var t=this;this._patientsService.fetchPatientById(this.patientId).subscribe(function(e){var n;t.patient=e,t.assignedPhysicians=null===(n=t.patient)||void 0===n?void 0:n.assignedStaffIds,t.getAssignableStaff()})}},{key:"checkIfStaffAssigned",value:function(){var t,e=this;null===(t=this.assignedPhysicians)||void 0===t||t.forEach(function(t){var n=e.filteredPhysicians.find(function(e){return e.id===t});n&&(n.selected=!0,n.assigned=!0,e.physicianAlreadyAssigned=!0)})}},{key:"getAssignableStaff",value:function(){var t=this;this._staffService.fetchAssignableStaffMembersById(this._activatedRoute.snapshot.params.id,w.a.PHYSICIAN,w.a.MONITORING_STAFF===this.loggedInUserRole?this.loggedInUser:void 0).subscribe(function(e){w.a.PHYSICIAN===t.loggedInUserRole&&(e=null==e?void 0:e.filter(function(e){return e.id===t.loggedInUser})),t.filteredPhysicians=e,t.physicians=JSON.parse(JSON.stringify(e)),t.checkIfStaffAssigned()})}},{key:"deselectAllPhysicians",value:function(t){var e;null===(e=this.filteredPhysicians)||void 0===e||e.forEach(function(e){e.selected=t===(null==e?void 0:e.id)})}},{key:"assignPhysicians",value:function(){var t,e,n=this,i={};this.filteredPhysicians.filter(function(t){return t.selected}).filter(function(t){var e,i;return(null===(e=n.assignedPhysicians)||void 0===e?void 0:e.length)||-1===(null===(i=n.assignedPhysicians)||void 0===i?void 0:i.findIndex(function(e){return e===t.id}))}).forEach(function(t){var e;i[null==t?void 0:t.id]=null===(e=n.patient)||void 0===e?void 0:e.id}),(null===(t=Object.keys(i))||void 0===t?void 0:t.length)?this.assignPhysicianToPatient(i).subscribe(function(t){var e,i,a,r,o,l,s,c;if("EPISODE_AUTO_CREATION"!==n._activatedRoute.snapshot.queryParams.context){var u="/patient/assign-staff/".concat(null===(l=n.patient)||void 0===l?void 0:l.id,"/").concat((null===(s=n.patient)||void 0===s?void 0:s.locationId)||null,"/").concat(null===(c=n.patient)||void 0===c?void 0:c.fullName);n._router.navigate([u])}else{n._notificationsService.success("Assignment",(null==t?void 0:t.message)||"Assigned");var d=localStorage.getItem("loggedInUserRole"),b=null===(i=null===(e=n.tenantConfig)||void 0===e?void 0:e.episodeBlueprints)||void 0===i?void 0:i.find(function(t){return"CCM"===t.type}),p={context:"TENANT_ADMIN"===d?"EPISODE_AUTO_CREATION":"AUTO_CREATION",contextMode:n._activatedRoute.snapshot.queryParams.contextMode};if((null==b?void 0:b.id)&&(p.blueprintId=null==b?void 0:b.id),"TENANT_ADMIN"!==d)n._router.navigate(["episodes/form/add/",n.patientId],{queryParams:p});else{var f="/patient/assign-staff/".concat(null===(a=n.patient)||void 0===a?void 0:a.id,"/").concat((null===(r=n.patient)||void 0===r?void 0:r.locationId)||null,"/").concat(null===(o=n.patient)||void 0===o?void 0:o.fullName);n._router.navigate([f],{queryParams:p})}}}):this._notificationsService.warning("Assign Physician","Assign ".concat(null===(e=this.patient)||void 0===e?void 0:e.fullName," to a physician to proceed"))}},{key:"assignPhysicianToPatient",value:function(t){return this._staffService.assignStaffMembers({assignmentMap:t,assignTo:w.a.PATIENT})}},{key:"filterPhysicians",value:function(t){if(!t)return this.filteredPhysicians=e(this.physicians),void this.checkIfStaffAssigned();this.filteredPhysicians=this.physicians.filter(function(e){var n,i;return null===(i=null===(n=null==e?void 0:e.fullName)||void 0===n?void 0:n.toLowerCase())||void 0===i?void 0:i.includes(null==t?void 0:t.toLowerCase())}),this.checkIfStaffAssigned()}}]),i}(D.a)).\u0275fac=function(t){return new(t||wh)(_.Rb(m.g),_.Rb(T.a),_.Rb(y.a),_.Rb(m.a),_.Rb(Be.a),_.Rb(V.b))},wh.\u0275cmp=_.Lb({type:wh,selectors:[["app-patient-physician-assigner"]],features:[_.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","17"],["nz-typography",""],[4,"ngIf"],["nz-col","","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-radio","",3,"nzDisabled","ngModel","nzValue","ngModelChange"],["nz-typography","","nz-tooltip","",1,"name",3,"nzTooltipTitle"],[3,"ngClass"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"]],template:function(t,e){1&t&&_.Vc(0,kh,21,14,"div",0),2&t&&_.rc("ngIf",e.patient)},directives:[h.q,Z.c,Z.a,H.a,P.a,on.c,on.b,v.d,v.u,v.x,h.p,M.a,A.a,he.a,Bi.b,h.o,h.r,F.b,wi.d],pipes:[h.A,Qt.a,ks.a,Pa.a],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);height:110px;-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-20px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-radio-checked .ant-radio-inner{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-radio-checked .ant-radio-inner:after{border-color:var(--primary-color);background-color:var(--primary-color)}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}[_nghost-%COMP%]     .ant-radio-disabled .ant-radio-inner:after{background-color:#d3d3d3}"]}),wh),Lh={Form:{header:!0,title:"Patient",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[ul.a.ADD_PATIENT,ul.a.EDIT_PATIENT],showTenantToggle:!1},PhysicianAssigner:{header:!0,title:"Patient actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[ul.a.ASSIGN_PHYSICIAN_TO_PATIENT],showTenantToggle:!1},MonitoringStaffAssigner:{header:!0,title:"Patient actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{title:"Skip for now",permissions:[],enabled:!0},multiAction:{},privileges:[ul.a.ASSIGN_MONITORING_STAFF_TO_PATIENT],showTenantToggle:!1},BulkUpload:{header:!0,title:"Bulk Upload",searchEnabled:!1,primaryAction:{title:"Download Template",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[ul.a.ADD_PATIENT_NOTES],showTenantToggle:!0}},Fh=o("DEH1"),Uh=o("a6m8"),jh=o("piIK"),Yh=o("Q+ul"),Bh=o("l6l4"),Hh=o("k1hV"),Gh=o("2POn"),Zh=o("ua0i"),$h=o("x6g7"),qh=o("bDfm"),Kh=o("xYn2"),Qh=o("Ti7L");function Jh(t,e){1&t&&(_.Xb(0,"span"),_.Sb(1,"hr"),_.Wb())}var tv=function(){return[32,6]};function ev(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",15),_.Xb(2,"div",16),_.Sb(3,"app-icons",17),_.Xb(4,"span",18),_.Xb(5,"strong"),_.Xc(6),_.jc(7,"date"),_.Wb(),_.Wb(),_.Wb(),_.Xb(8,"div",16),_.Sb(9,"app-icons",19),_.Xb(10,"span",20),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Wb(),_.Xb(13,"div",16),_.Sb(14,"app-icons",21),_.Xb(15,"span",20),_.Xc(16),_.jc(17,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Xb(18,"div",22),_.Xb(19,"div",23),_.Sb(20,"app-icons",24),_.Xb(21,"span",20),_.Xb(22,"strong",18),_.Xc(23),_.jc(24,"patientCommunication"),_.Wb(),_.Sb(25,"span",25),_.Wb(),_.Vc(26,Jh,2,0,"span",26),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit,i=e.index,a=_.ic(2);_.Db(1),_.rc("nzGutter",_.xc(21,tv)),_.Db(5),_.ad("",_.lc(7,12,null==n?null:n.date,"MMM dd yyyy, hh:mm a")," ",a.standardTimeZone,""),_.Db(5),_.ad(" ",_.kc(12,15,"NOTES.ENTERED_BY"),": ",null==n?null:n.caretakerId," "),_.Db(3),_.rc("originalStyle",!0),_.Db(2),_.ad("",_.kc(17,17,"COMMON.DURATION"),": ",null==n?null:n.durationInMinutes," Minutes"),_.Db(4),_.rc("originalStyle",!0),_.Db(3),_.Zc("",_.kc(24,19,null==n?null:n.context),": "),_.Db(2),_.rc("innerHTML",null==n?null:n.notes,_.Mc),_.Db(1),_.rc("ngIf",i<(null==a.tmsDetails?null:a.tmsDetails.length)-1)}}function nv(t,e){if(1&t&&(_.Xb(0,"div",1),_.Xb(1,"div",12),_.Xb(2,"div",13),_.Xb(3,"h3",4),_.Xc(4),_.jc(5,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Vc(6,ev,27,22,"ng-container",14),_.Wb()),2&t){var n=_.ic();_.Db(4),_.Yc(_.kc(5,2,"COMMON.TMS_NOTES")),_.Db(2),_.rc("ngForOf",n.tmsDetails)}}function iv(t,e){if(1&t&&_.Sb(0,"img",38),2&t){var n=_.ic(4);_.sc("nzTooltipTitle",n.tooltipContent)}}function av(t,e){1&t&&(_.Xb(0,"span"),_.Sb(1,"hr",39),_.Wb())}function rv(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",30),_.Sb(2,"app-icons",31),_.Xb(3,"span",32),_.Xb(4,"strong"),_.Xc(5),_.jc(6,"date"),_.Wb(),_.Wb(),_.Sb(7,"span",33),_.Xb(8,"span",34),_.Xb(9,"strong"),_.Xc(10),_.Wb(),_.Vc(11,iv,1,1,"img",35),_.Wb(),_.Xb(12,"div",36),_.Xb(13,"app-note-timeline-item",37),_.ec("edit",function(){_.Lc(n);var t=e.$implicit;return _.ic(3).editNote(t)}),_.Wb(),_.Wb(),_.Vc(14,av,2,0,"span",26),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit,a=e.index,r=_.ic(3);_.Db(5),_.ad(" ",_.lc(6,6,null==i?null:i.updatedOn,"MMM dd yyyy, hh:mm a")," ",r.standardTimeZone," "),_.Db(5),_.Yc(r.patientName),_.Db(1),_.rc("ngIf","IMPORTANT"==i.priority.level),_.Db(2),_.rc("note",i),_.Db(1),_.rc("ngIf",a<(null==r.allNotes?null:r.allNotes.length)-1)}}function ov(t,e){if(1&t&&(_.Xb(0,"div",29),_.Vc(1,rv,15,9,"ng-container",14),_.Wb()),2&t){var n=_.ic(2);_.Db(1),_.rc("ngForOf",n.allNotes)}}function lv(t,e){1&t&&(_.Xb(0,"div"),_.Xb(1,"p"),_.Xc(2,"There are no important notes added for this patient in the specified date range."),_.Wb(),_.Wb())}function sv(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"p",27),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Vc(4,ov,2,1,"div",28),_.Vc(5,lv,3,0,"div",26),_.Ub()),2&t){var n=_.ic();_.Db(2),_.Yc(_.kc(3,3,"COMMON.NOTES")),_.Db(2),_.rc("ngIf",n.allNotes&&n.allNotes.length>0),_.Db(1),_.rc("ngIf",n.allNotes&&0==n.allNotes.length)}}function cv(t,e){1&t&&(_.Xb(0,"div",40),_.Xb(1,"p"),_.Xc(2,"There are no important notes added for this patient in the specified date range. To view all notes, click on 'View all notes'."),_.Wb(),_.Wb())}function uv(t,e){1&t&&(_.Xb(0,"span"),_.Sb(1,"hr"),_.Wb())}function dv(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",42),_.Sb(2,"app-icons",43),_.Xb(3,"span",44),_.Xc(4),_.jc(5,"date"),_.Wb(),_.Sb(6,"span",33),_.Xb(7,"span",45),_.Xc(8),_.Wb(),_.Sb(9,"img",38),_.Xb(10,"div",46),_.Xb(11,"app-note-timeline-item",37),_.ec("edit",function(){_.Lc(n);var t=e.$implicit;return _.ic(2).editNote(t)}),_.Wb(),_.Wb(),_.Vc(12,uv,2,0,"span",26),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit,a=e.index,r=_.ic(2);_.Db(4),_.ad(" ",_.lc(5,6,null==i?null:i.updatedOn,"MMM dd yyyy, hh:mm a")," ",r.standardTimeZone," "),_.Db(4),_.Zc(" ",r.patientName," "),_.Db(1),_.sc("nzTooltipTitle",r.tooltipContent),_.Db(2),_.rc("note",i),_.Db(1),_.rc("ngIf",a<(null==r.importantNotes?null:r.importantNotes.length)-1)}}function bv(t,e){if(1&t&&(_.Xb(0,"div",41),_.Vc(1,dv,13,9,"ng-container",14),_.Wb()),2&t){var n=_.ic();_.Db(1),_.rc("ngForOf",n.importantNotes)}}var pv,fv=function(){return{height:"530px",width:"800px"}},gv=((pv=function(){function t(e,n){b(this,t),this._modalService=e,this._timezoneService=n,this.refreshNotes=new _.n,this.tooltipContent="This note has been marked as important.",this.totalTMSDuration=0,this.totalAdditionalTMSDuration=0,this.totalAdditionalTMSBDuration=0,this.mode=new Map([["VIDEO_CALL","Video Call"],["CALL","Audio Call"],["HOME_VISIT","Home Visit"],["OTHER","Other"]]),this.isVisible=!1,this.standardTimeZone=this._timezoneService.getTimeZone()}return d(t,[{key:"notes",get:function(){return this.allNotes},set:function(t){t&&(this.allNotes=e(t),this.importantNotes=e(this.allNotes.filter(function(t){var e;return"IMPORTANT"==(null===(e=t.priority)||void 0===e?void 0:e.level)})))}},{key:"ngOnInit",value:function(){this.tmsDetails&&(this.totalTMSDuration=this.tmsDetails.filter(function(t){return"TMS"===t.type}).map(function(t){return t.durationInMilliSeconds}).reduce(function(t,e){return t+e},0)),this.totalAdditionalTMSDuration=this.tmsDetails.filter(function(t){return"ADDITIONAL_TMS"===t.type}).map(function(t){return t.durationInMilliSeconds}).reduce(function(t,e){return t+e},0),this.totalAdditionalTMSBDuration=this.tmsDetails.filter(function(t){return"ADDITIONAL_TMS_B"===t.type}).map(function(t){return t.durationInMilliSeconds}).reduce(function(t,e){return t+e},0),this.totalTMSDuration=this.totalTMSDuration/6e4,this.totalAdditionalTMSDuration=this.totalAdditionalTMSDuration/6e4,this.totalAdditionalTMSBDuration=this.totalAdditionalTMSBDuration/6e4}},{key:"showModal",value:function(){this.isVisible=!0}},{key:"cancel",value:function(){this.isVisible=!1}},{key:"editNote",value:function(t){var e=this;this._modalService.create({nzContent:qh.a,nzComponentParams:{noteObject:t},nzWidth:"50%",nzClosable:!0,nzMaskClosable:!1,nzFooter:null}).afterClose.subscribe(function(t){t&&(e.isVisible=!1,e.refreshNotes.emit())})}}]),t}()).\u0275fac=function(t){return new(t||pv)(_.Rb(O.f),_.Rb(id.a))},pv.\u0275cmp=_.Lb({type:pv,selectors:[["app-tms-vital-history"]],inputs:{tmsDetails:"tmsDetails",tmsType:"tmsType",patientName:"patientName",notes:"notes"},outputs:{refreshNotes:"refreshNotes"},decls:18,vars:13,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzSpan","24"],["nz-col","","nzFlex","1"],[1,"title"],["nz-col","","nzJustify","end","nzFlex","140px"],["nz-row","","nzJustify","end"],["nz-button","","nzType","primary",3,"nzSize","click"],["nzFooter","null","nzWidth","800px",3,"nzVisible","nzBodyStyle","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["nz-col","","nzSpan","24","class","bp-48",4,"ngIf"],["nz-col","","nzSpan","24",4,"ngIf"],["nz-row",""],["nz-col",""],[4,"ngFor","ngForOf"],["nz-row","",1,"p-9","pl-19","fw-600","sub-color",3,"nzGutter"],["nz-col","","nzSpan","7"],["name","clock","color","black","size","16px",1,"user"],[1,"date-size"],["name","user","color","black","size","16px",1,"user"],[1,"fs-14"],["name","duration","color","black","size","16px",1,"user",3,"originalStyle"],["nz-row","","nzGutter","32",1,"pl-19","fs-16","fw-600"],["nz-col","","nzSpan","18"],["name","form","color","black","size","16px",1,"user",3,"originalStyle"],[3,"innerHTML"],[4,"ngIf"],["id","notesTitle"],["style","height: 430px; overflow: auto;",4,"ngIf"],[2,"height","430px","overflow","auto"],[1,"fs-13","fw-600",2,"padding-top","8px"],["size","16px","name","clock","color","black",1,"user","m-0"],[1,"pr-19"],[1,"divider"],[1,"pl-19"],["src","../../../../assets/images/star.png","class","star","nzTooltipPlacement","rightBottom","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[1,"sub-color","note-content"],["hideFooter","",3,"note","edit"],["src","../../../../assets/images/star.png","nzTooltipPlacement","rightBottom","nz-tooltip","",1,"star",3,"nzTooltipTitle"],[1,"horizontal-line"],["nz-col","","nzSpan","24",1,"bp-48"],["nz-col","","nzSpan","24"],[1,"fs-16","fw-600","p-12","pb-0"],["name","clock","size","16px","color","black",1,"user","m-0"],[1,"pr-19","date-size","fs-14"],[1,"pl-19","date-size","fs-14"],[1,"notes","fs-14"]],template:function(t,e){1&t&&(_.Vc(0,nv,7,4,"div",0),_.Sb(1,"br"),_.Xb(2,"div",1),_.Xb(3,"div",2),_.Xb(4,"div",3),_.Xb(5,"h3",4),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Wb(),_.Xb(8,"div",5),_.Xb(9,"div",6),_.Xb(10,"button",7),_.ec("click",function(){return e.showModal()}),_.Xc(11),_.jc(12,"translate"),_.Wb(),_.Wb(),_.Xb(13,"nz-modal",8),_.ec("nzVisibleChange",function(t){return e.isVisible=t})("nzOnCancel",function(){return e.cancel()}),_.Vc(14,sv,6,5,"ng-container",9),_.Wb(),_.Wb(),_.Wb(),_.Xb(15,"div",2),_.Vc(16,cv,3,0,"div",10),_.Vc(17,bv,2,1,"div",11),_.Wb(),_.Wb()),2&t&&(_.rc("ngIf",e.tmsDetails&&e.tmsDetails.length>0),_.Db(6),_.Yc(_.kc(7,8,"COMMON.NOTES")),_.Db(4),_.rc("nzSize","large"),_.Db(1),_.Zc(" ",_.kc(12,10,"VIEW_ALL_NOTES")," "),_.Db(2),_.rc("nzVisible",e.isVisible)("nzBodyStyle",_.xc(12,fv)),_.Db(3),_.rc("ngIf",e.importantNotes&&0==e.importantNotes.length),_.Db(1),_.rc("ngIf",e.importantNotes&&e.importantNotes.length>0))},directives:[h.q,Z.c,Z.a,M.a,A.a,P.a,O.a,O.b,h.p,he.a,Kh.a,wi.d],pipes:[Qt.a,h.e,Qh.a],styles:[".container[_ngcontent-%COMP%]{padding:10px 35px!important}.title[_ngcontent-%COMP%]{color:#0b2240;font-weight:900;font-family:Nunito;font-size:18px;border-left:4px solid var(--primary-color);padding-left:12px}.fs-16[_ngcontent-%COMP%]{font-size:16px}.fs-13[_ngcontent-%COMP%]{font-size:13px}.fs-14[_ngcontent-%COMP%]{font-size:14px}.p-9[_ngcontent-%COMP%]{padding:9px}.p-12[_ngcontent-%COMP%]{padding:12px}.pl-19[_ngcontent-%COMP%]{padding-left:19px}.pr-19[_ngcontent-%COMP%]{padding-right:19px}.fw-600[_ngcontent-%COMP%]{font-weight:600}.sub-color[_ngcontent-%COMP%]{color:#666}.date-size[_ngcontent-%COMP%]{color:#000;font-size:13px}.divider[_ngcontent-%COMP%]{border:1px solid #000}.notes[_ngcontent-%COMP%]{padding-top:4px;padding-left:22px}.user[_ngcontent-%COMP%]{padding-right:4px;position:relative;top:2px}.star[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:10px;margin-bottom:2px}#notesTitle[_ngcontent-%COMP%]{border-left:2px solid var(--primary-color);padding-left:10px;font:normal normal 700 16px/19px Nunito;margin-bottom:17px;margin-top:-3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1 em}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.horizontal-line[_ngcontent-%COMP%]{width:93%;margin-right:49px}.m-0[_ngcontent-%COMP%]{margin:0}.note-content[_ngcontent-%COMP%]{padding-left:23px;padding-top:8px}.bp-48[_ngcontent-%COMP%]{padding-bottom:48px}[_nghost-%COMP%]     .ant-col-18{margin-top:0}"]}),pv),hv=o("KAwd"),vv=o("w0ih"),mv=o("k90p"),Sv=o("sUbP"),Iv=o("WbwM"),Dv=o("+GkE"),yv=o("rdiT"),Cv=o("Sv5b"),Ev=o("G1GC"),Xv=o("1KKy"),Tv=o("jWZy");function zv(t,e){1&t&&_.Sb(0,"app-icons",62)}function _v(t,e){if(1&t&&(_.Xb(0,"strong",63),_.Xc(1),_.Wb()),2&t){var n=_.ic();_.Db(1),_.Zc("Showing alert raised for ",n.vitalLabel," parameter in this vital signs recording")}}function Ov(t,e){if(1&t&&(_.Xb(0,"strong",63),_.Xc(1),_.Wb()),2&t){var n=_.ic();_.Db(1),_.Yc(n.alertMessage)}}function Mv(t,e){if(1&t&&(_.Xb(0,"nz-table",64),_.Xb(1,"tr",65),_.Xb(2,"th",66),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"th",67),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"th",67),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"th",67),_.Xc(12),_.jc(13,"vitalName"),_.Wb(),_.Wb(),_.Xb(14,"tr",68),_.Xb(15,"td",66),_.Xc(16),_.jc(17,"date"),_.Wb(),_.Xb(18,"td",67),_.Xc(19),_.jc(20,"deviceName"),_.Wb(),_.Xb(21,"td",67),_.Xc(22),_.Wb(),_.Xb(23,"td",69),_.Xc(24),_.Wb(),_.Wb(),_.Sb(25,"br"),_.Wb()),2&t){var n=_.ic();_.Db(2),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(4,17,"PARAMETERS.MEASUREDON")," "),_.Db(2),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(7,19,"COMMON.MEASURED_WITH")," "),_.Db(2),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(10,21,"COMMON.PLATFORM")," "),_.Db(2),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(13,23,n.alertParameterName)," "),_.Db(3),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-body-grey":"table-body-white"),_.Db(1),_.ad(" ",_.lc(17,25,(null==n.alertData?null:n.alertData.takenAt)+"Z","MMM dd yyyy, hh:mm a")," ",n.standardTimeZone," "),_.Db(2),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.kc(20,28,null==n.alertData?null:n.alertData.deviceType)," "),_.Db(2),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",null==n.alertData?null:n.alertData.platform," "),_.Db(1),_.rc("ngClass",null!=n.alert&&n.alert.closed?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",n.alertParameterValue," ")}}function Av(t,e){if(1&t&&(_.Xb(0,"tr",68),_.Xb(1,"td",66),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Xb(4,"td",67),_.Xc(5),_.jc(6,"deviceName"),_.Wb(),_.Xb(7,"td",67),_.Xc(8),_.Wb(),_.Xb(9,"td",69),_.Xc(10),_.Wb(),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(1),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.lc(3,8,(null==n||null==n.alertContext?null:n.alertContext.takenOn)+"Z","MMM dd yyyy, hh:mm a")," "),_.Db(2),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.kc(6,11,null==n||null==n.alertContext?null:n.alertContext.deviceType)," "),_.Db(2),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",null==n||null==n.alertContext?null:n.alertContext.platform," "),_.Db(1),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",i.getAlertParamDetail(n,null==n?null:n.alertContext)," ")}}function Pv(t,e){if(1&t&&(_.Xb(0,"nz-table",64),_.Xb(1,"tr",65),_.Xb(2,"th",66),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"th",67),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"th",67),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"th",67),_.Xc(12),_.jc(13,"vitalName"),_.Wb(),_.Wb(),_.Vc(14,Av,11,13,"tr",70),_.Sb(15,"br"),_.Wb()),2&t){var n=_.ic();_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(4,9,"PARAMETERS.MEASUREDON")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(7,11,"COMMON.MEASURED_WITH")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(10,13,"COMMON.PLATFORM")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(13,15,n.alertParameterName)," "),_.Db(2),_.rc("ngForOf",null==n.prioritisedAlert?null:n.prioritisedAlert.linkedAlerts)}}function Nv(t,e){if(1&t&&(_.Xb(0,"tr",68),_.Xb(1,"td",66),_.Xc(2),_.jc(3,"date"),_.Wb(),_.Xb(4,"td",67),_.Xc(5),_.jc(6,"deviceName"),_.Wb(),_.Xb(7,"td",67),_.Xc(8),_.Wb(),_.Xb(9,"td",69),_.Xc(10),_.Wb(),_.Wb()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(1),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.lc(3,8,(null==n||null==n.alertContext?null:n.alertContext.takenOn)+"Z","MMM dd yyyy, hh:mm a")," "),_.Db(2),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.kc(6,11,null==n||null==n.alertContext?null:n.alertContext.deviceType)," "),_.Db(2),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",null==n||null==n.alertContext?null:n.alertContext.platform," "),_.Db(1),_.rc("ngClass","CLOSED"==i.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",i.getAlertParamDetail(n,null==n?null:n.alertContext)," ")}}var Wv=function(){return{top:"65px",left:"200px",position:"absolute"}};function Rv(t,e){if(1&t&&(_.Xb(0,"nz-table",71),_.Xb(1,"tr",65),_.Xb(2,"th",66),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"th",67),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"th",67),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"th",67),_.Xc(12),_.jc(13,"vitalName"),_.Wb(),_.Wb(),_.Vc(14,Nv,11,13,"tr",70),_.Sb(15,"br"),_.Wb()),2&t){var n=_.ic();_.rc("position",_.xc(18,Wv)),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(4,10,"PARAMETERS.MEASUREDON")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(7,12,"COMMON.MEASURED_WITH")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(10,14,"COMMON.PLATFORM")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(13,16,n.alertParameterName)," "),_.Db(2),_.rc("ngForOf",null==n.prioritisedAlert?null:n.prioritisedAlert.linkedAlerts)}}function xv(t,e){if(1&t&&(_.Xb(0,"nz-table",71),_.Xb(1,"tr",65),_.Xb(2,"th",66),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"th",67),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"th",67),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Xb(11,"th",67),_.Xc(12),_.jc(13,"vitalName"),_.Wb(),_.Wb(),_.Xb(14,"tr",68),_.Xb(15,"td",66),_.Xc(16),_.jc(17,"date"),_.Wb(),_.Xb(18,"td",67),_.Xc(19),_.jc(20,"deviceName"),_.Wb(),_.Xb(21,"td",67),_.Xc(22),_.Wb(),_.Xb(23,"td",69),_.Xc(24),_.Wb(),_.Wb(),_.Sb(25,"br"),_.Wb()),2&t){var n=_.ic();_.rc("position",_.xc(30,Wv)),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(4,17,"PARAMETERS.MEASUREDON")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(7,19,"COMMON.MEASURED_WITH")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(10,21,"COMMON.PLATFORM")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(13,23,n.alertParameterName)," "),_.Db(3),_.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.lc(17,25,(null==n.alertData?null:n.alertData.takenOn)+"Z","MMM dd yyyy, hh:mm a")," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.kc(20,28,null==n.alertData?null:n.alertData.deviceType)," "),_.Db(2),_.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",null==n.alertData?null:n.alertData.platform," "),_.Db(1),_.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",n.alertParameterValue," ")}}function kv(t,e){if(1&t&&(_.Xb(0,"div",72),_.Xb(1,"h2",73),_.Xb(2,"strong"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"span",74),_.Xc(6),_.jc(7,"date"),_.jc(8,"date"),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.ic();_.Db(3),_.ad("",n.vitalLabel," ",_.kc(4,4,"COMMON.TREND_REPORT"),""),_.Db(3),_.ad("(",_.lc(7,6,n.dateRange[0],"mediumDate")," - ",_.lc(8,9,n.dateRange[1],"mediumDate"),")")}}function wv(t,e){if(1&t&&(_.Xb(0,"div",72),_.Xb(1,"h2",73),_.Xb(2,"strong"),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Wb(),_.Xb(5,"h4",75),_.Xc(6),_.jc(7,"date"),_.jc(8,"date"),_.Wb(),_.Wb()),2&t){var n=_.ic();_.Db(3),_.ad("",n.vitalLabel," ",_.kc(4,4,"COMMON.TREND_REPORT"),""),_.Db(3),_.ad(" (",_.lc(7,6,n.dateRange[0],"mediumDate")," - ",_.lc(8,9,n.dateRange[1],"mediumDate"),") ")}}function Vv(t,e){1&t&&(_.Xb(0,"div",72),_.Xb(1,"h2",76),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Zc("",_.kc(3,1,"COMMON_SELECT_VITAL_SIGN"),":"))}function Lv(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-option",78),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",null==n?null:n.type)("nzLabel",null==n?null:n.label)}}function Fv(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",72),_.Xb(1,"nz-select",77),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().vitalType=t})("ngModelChange",function(t){return _.Lc(n),_.ic().refresh(t)}),_.Vc(2,Lv,2,2,"ng-container",38),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(1),_.rc("ngModel",i.vitalType),_.Db(1),_.rc("ngForOf",i.vitalBlueprints)}}function Uv(t,e){1&t&&(_.Xb(0,"div",24),_.Xb(1,"h2",76),_.Xc(2,"Context:"),_.Wb(),_.Wb())}function jv(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-option",78),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",n.label)("nzLabel",null==n?null:n.label)}}function Yv(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div",72),_.Xb(1,"nz-select",79),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().selectedContext=t})("ngModelChange",function(t){return _.Lc(n),_.ic().populateGraphWithContextData(null,t)}),_.Vc(2,jv,2,2,"ng-container",38),_.Sb(3,"nz-option",80),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(1),_.rc("ngModel",i.selectedContext),_.Db(1),_.rc("ngForOf",null==i.vitalBlueprint||null==i.vitalBlueprint.contexts[0]?null:i.vitalBlueprint.contexts[0].options)}}function Bv(t,e){1&t&&(_.Xb(0,"span",82),_.Xc(1," ( "),_.Sb(2,"span",83),_.Xc(3," Primary )"),_.Wb())}function Hv(t,e){1&t&&(_.Vb(0),_.Xc(1,",\xa0"),_.Ub())}function Gv(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2),_.Wb(),_.Vc(3,Bv,4,0,"span",81),_.Vc(4,Hv,2,0,"ng-container",49),_.jc(5,"keyvalue"),_.Ub()),2&t){var n,i=e.$implicit,a=e.index,r=_.ic();_.Db(2),_.Zc("",i.key," "),_.Db(1),_.rc("ngIf","PRIMARY"==i.value),_.Db(1),_.rc("ngIf",a!==(null==(n=_.kc(5,3,r.staffNameTypeMap))?null:n.length)-1)}}function Zv(t,e){1&t&&(_.Vb(0),_.Xc(1,"; "),_.Ub())}function $v(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Vc(2,Zv,2,0,"ng-container",49),_.Ub()),2&t){var n=e.$implicit,i=e.index,a=_.ic();_.Db(1),_.Zc(" ",n,""),_.Db(1),_.rc("ngIf",(null==a.icdCodes?null:a.icdCodes.length)-1!==i)}}function qv(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"app-last-measured-vital",88),_.Ub()),2&t){var n=_.ic(2);_.Db(1),_.rc("vitalBlueprint",n.vitalBlueprint)("vital",n.vitals[0])("vitalLabel",n.vitalLabel)}}function Kv(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",84),_.Xb(2,"div",85),_.Vc(3,qv,2,3,"ng-container",49),_.Wb(),_.Xb(4,"div",86),_.Sb(5,"app-global-and-individual-limits",87),_.Wb(),_.Wb(),_.Sb(6,"br"),_.Ub()),2&t){var n=_.ic();_.Db(3),_.rc("ngIf",n.vitals&&n.vitals.length),_.Db(2),_.rc("vitalBlueprint",n.vitalBlueprint)("patientName",n.patientName)("context",n.contextOption)("individualLimits",n.individualLimits)("showGlucose",n.showGlucoseChart)}}function Qv(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",89),_.Xb(2,"div",90),_.Sb(3,"app-bp-stage-reference-range",91),_.Wb(),_.Wb(),_.Xb(4,"div",92),_.Xb(5,"div",93),_.Sb(6,"app-bp-summary",94),_.Wb(),_.Xb(7,"div",93),_.Sb(8,"app-bp-stage-distribution",95),_.Wb(),_.Wb(),_.Sb(9,"br"),_.Ub()),2&t){var n=_.ic();_.Db(3),_.rc("stageReference",null==n.vitalReport||null==n.vitalReport.snapshot?null:n.vitalReport.snapshot.limits),_.Db(3),_.rc("summary",null==n.vitalReport||null==n.vitalReport.snapshot?null:n.vitalReport.snapshot.summary)("limits",null==n.vitalReport||null==n.vitalReport.snapshot?null:n.vitalReport.snapshot.limits),_.Db(2),_.rc("distribution",null==n.vitalReport||null==n.vitalReport.snapshot?null:n.vitalReport.snapshot.distribution)}}function Jv(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",96),_.Xb(2,"div",97),_.Sb(3,"app-bg-reference-chart",98),_.Wb(),_.Xb(4,"div",40),_.Sb(5,"app-bg-trend",99),_.Wb(),_.Wb(),_.Xb(6,"div",100),_.Xb(7,"div",90),_.Sb(8,"app-bg-summary-chart",101),_.Wb(),_.Wb(),_.Xb(9,"div",92),_.Xb(10,"div",90),_.Sb(11,"app-bg-modal-day",99),_.Wb(),_.Wb(),_.Sb(12,"br"),_.Ub()),2&t){var n=_.ic();_.Db(3),_.rc("snapshotData",null==n.vitalReport?null:n.vitalReport.snapshot)("patientName",n.patientName),_.Db(2),_.rc("snapshot",null==n.vitalReport?null:n.vitalReport.snapshot),_.Db(3),_.rc("reportData",n.vitalReport),_.Db(3),_.rc("snapshot",null==n.vitalReport?null:n.vitalReport.snapshot)}}function tm(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",102),_.Xb(2,"div",103),_.Xb(3,"p",104),_.Xc(4),_.Wb(),_.Xb(5,"div",105),_.Xb(6,"div",106),_.Xb(7,"p",107),_.Xc(8,"Highest value"),_.Wb(),_.Xb(9,"p"),_.Xc(10,"Lowest value"),_.Wb(),_.Xb(11,"p"),_.Xc(12,"Average"),_.Wb(),_.Xb(13,"p"),_.Xc(14,"Out of Range"),_.Wb(),_.Wb(),_.Xb(15,"div",106),_.Xb(16,"p",107),_.Xc(17),_.jc(18,"number"),_.Wb(),_.Xb(19,"p"),_.Xc(20),_.jc(21,"number"),_.Wb(),_.Xb(22,"p"),_.Xc(23),_.jc(24,"number"),_.Wb(),_.Xb(25,"p"),_.Xc(26),_.jc(27,"number"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(28,"div",93),_.Wb(),_.Sb(29,"br"),_.Sb(30,"br"),_.Ub()),2&t){var n=_.ic();_.Db(4),_.Zc("Summary (",null==n.summary?null:n.summary.totalReadings," readings)"),_.Db(13),_.Yc(_.lc(18,5,null==n.summary?null:n.summary.highestValue,"1.1-2")),_.Db(3),_.Yc(_.lc(21,8,null==n.summary?null:n.summary.lowestValue,"1.1-2")),_.Db(3),_.Yc(_.lc(24,11,null==n.summary?null:n.summary.average,"1.1-2")),_.Db(3),_.Yc(_.lc(27,14,null==n.summary?null:n.summary.outOfRange,"1.1-2"))}}var em=function(){return[16,16]};function nm(t,e){1&t&&(_.Xb(0,"div",116),_.Xb(1,"div",117),_.Xb(2,"span",118),_.Xc(3,"Systolic"),_.Wb(),_.Sb(4,"span",119),_.Xb(5,"span",120),_.Xc(6,"Reference Range 90-160mm Hg"),_.Wb(),_.Wb(),_.Xb(7,"div",117),_.Xb(8,"span",118),_.Xc(9,"Diastolic"),_.Wb(),_.Sb(10,"br"),_.Sb(11,"span",121),_.Xb(12,"span",122),_.Xc(13,"Reference Range 60-90mm Hg"),_.Wb(),_.Wb(),_.Xb(14,"div",117),_.Xb(15,"span",118),_.Xc(16,"Heart Rate"),_.Wb(),_.Sb(17,"br"),_.Sb(18,"span",123),_.Xb(19,"span",122),_.Xc(20,"Reference Range 55-100bpm"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,em))}function im(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",102),_.Xb(2,"div",108),_.Vc(3,nm,21,2,"div",109),_.Xb(4,"google-chart",110),_.ec("select",function(t){return _.Lc(n),_.ic().onSelect(t)}),_.Wb(),_.Xb(5,"p",111),_.Xc(6),_.jc(7,"date"),_.jc(8,"date"),_.Wb(),_.Wb(),_.Wb(),_.Xb(9,"div",112,113),_.Xb(11,"h2",114),_.Xb(12,"strong"),_.Xc(13),_.jc(14,"translate"),_.Wb(),_.Wb(),_.Xb(15,"div",90),_.Sb(16,"app-vitals-table",115),_.Wb(),_.Wb(),_.Sb(17,"br"),_.Ub()}if(2&t){var i=_.ic();_.Db(3),_.rc("ngIf",i.showBPChart),_.Db(1),_.rc("data",i.chartData)("columns",i.columnNames)("options",i.options)("dynamicResize",!0),_.Db(2),_.ad(" ",_.lc(7,13,i.dateRange[0],"MMM dd yyyy")," - ",_.lc(8,16,i.dateRange[1],"MMM dd yyyy")," "),_.Db(7),_.Yc(_.kc(14,19,"COMMON.VITAL_VALUES")),_.Db(3),_.rc("vitalBlueprint",i.vitalBlueprint)("vitals",i.vitals)("careplanId",i.careplanId)("patientId",i.patientId)("linkedVitals",i.linkedVitals)}}function am(t,e){1&t&&(_.Xb(0,"button",124),_.Sb(1,"app-icons",125),_.Wb())}function rm(t,e){if(1&t&&(_.Xb(0,"div",126),_.Xb(1,"div",127),_.Xc(2),_.jc(3,"titlecase"),_.Wb(),_.Wb()),2&t){var n=_.ic();_.Db(2),_.Zc(" Based on ",_.kc(3,1,n.patientName),"'s current episodes, the time spent on reviewing this alert can be logged towards. ")}}function om(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",128),_.ec("click",function(){return _.Lc(n),_.ic().closeAlert()}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"MARKED_AS_CLOSED")," "))}function lm(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",59),_.ec("click",function(){return _.Lc(n),_.ic().onTMSClick()}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"TMS.ADD")," "))}var sm,cm,um=function(t,e){return{disabled:t,"secondary-btn":e}},dm=function(){return[32,6]},bm=function(){return[32,8]},pm=function(t){return{left:t}},fm=((sm=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l,s,c,u,d,p,f,g,h,v,m,S,I,D,y,C,E){var X;return b(this,i),(X=n.call(this))._activatedRoute=t,X._patientsService=e,X._staffService=a,X._vitalBlueprintsService=r,X._datePipe=o,X._vitalsEventLogger=l,X._userVitalAlertService=s,X._notificationsService=c,X._location=u,X._alertService=d,X.translationService=p,X._episodesService=f,X._patientComunicationModalService=g,X._analyticsService=h,X._router=v,X._shareReportModalService=m,X.scroller=S,X.alertService=I,X._patientsModalsService=D,X._patientsEventLogger=y,X._dataSharingService=C,X._timezoneService=E,X.vitals=[],X.vitalsOriginal=[],X.selectedContext="",X.isChartLoading=!0,X.dateRange=[Object(Mn.a)(Date.now()),Object(jh.a)(new Date)],X.tmsDetails=[],X.columnNames=[],X.options={hAxis:{textStyle:{fontSize:12},direction:-1},curveType:"function",pointSize:5,height:200,legend:{position:"none"},selectionMode:"multiple",animation:{startup:!0,duration:1e3},colors:["rgb(158, 205, 61)","rgb(252, 232, 0)","rgb(200, 28, 28)"],is3D:!0},X.vitalLabel="",X.showGlucoseChart=!1,X.showBPChart=!1,X.subjectType="Vital Trend Report",X.subject="Vital Trend Report",X.note="",X.includeVitals=!0,X.includeTMS=!0,X.includeNotes=!0,X.vitalType="BLOOD_PRESSURE",X.alertMessage="",X.notes=[],X.noVitals=!0,X.strings=["PATIENT_NOT_RECORDED_ANY_VITALS","TMS","TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED","TMS.TWENTY_MINS_RECORDED_ADD_ADDITIONAL_TMS","TMS.TMS_TIME_INCOMPLETE","MENU.PATIENTS","NOTE_ADDED_SUCCESSFULLY","COMMON.ALERT","ALERT.ALERT_CLOSED_SUCCESSFULLY"],X.isPrioritisedAlert=!1,X.linkedVitals=new Set,X.prioritisedAlertStatus=null,X.loading=!0,X.disabledDates=function(t){return Object(On.a)(new Date,t)<0},X.standardTimeZone=X._timezoneService.getTimeZone(),X}return d(i,[{key:"ngOnInit",value:function(){var t=this;if(this.patientName=this._activatedRoute.snapshot.queryParams.patientName,this.dob=this._activatedRoute.snapshot.queryParams.dob,this.patientId=this._activatedRoute.snapshot.queryParams.patientId,this.episodeId=this._activatedRoute.snapshot.queryParams.episodeId,this.careplanId=this._activatedRoute.snapshot.queryParams.careplanId,this.carePlanStartDate=this._activatedRoute.snapshot.queryParams.carePlanstartDate,this._activatedRoute.snapshot.queryParams.latestVital&&(this.latestVital=JSON.parse(this._activatedRoute.snapshot.queryParams.latestVital),this.vitalType=this.latestVital.vitalType),this.alertId=this._activatedRoute.snapshot.queryParams.alertId,this.isPrioritisedAlert=/true/i.test(this._activatedRoute.snapshot.queryParams.isPrioritisedAlert),this.prioritisedAlertId=this._activatedRoute.snapshot.queryParams.prioritisedAlertId,this.prioritisedAlertStatus=this._activatedRoute.snapshot.queryParams.prioritisedAlertStatus,this.alertId){this.loading=!0;var e=this.updateAlert(this.alertId).subscribe(function(n){if(t.loading=!1,t.alert=n,t.tenantId=n.tenantId,t.isPrioritisedAlert){var i=JSON.parse(t._activatedRoute.snapshot.queryParams.linkedVitals);for(var a in i)t.linkedVitals.add(i[a]);t.updateAlert(t.prioritisedAlertId).subscribe(function(e){t.prioritisedAlert=e})}switch(t.status=t.isPrioritisedAlert?t.prioritisedAlertStatus:t.alert.status,null!=t.alert.context||null!=t.alert.context?t.vitalType=t.alert.context:null==t.alert.alertMessageParameters.VITAL_TYPE&&null==t.alert.alertMessageParameters.VITAL_TYPE||(t.vitalType=t.alert.alertMessageParameters.VITAL_TYPE),t.getIndividualLimitForSelectedVital(),t.getVitalDetails(),t.loadTenantBlueprintAndUserVitalAlerts(),t.getVitalReport(),t.vitalType){case"BLOOD_GLUCOSE":t.showGlucoseChart=!0,t.showBPChart=!1;break;case"BLOOD_PRESSURE":t.showBPChart=!0,t.showGlucoseChart=!1;break;default:t.showBPChart=!1,t.showGlucoseChart=!1}e.unsubscribe()})}else switch(this.loading=!1,this.loadTenantBlueprintAndUserVitalAlerts(),this.getVitalReport(),this.vitalType){case"BLOOD_GLUCOSE":this.showGlucoseChart=!0,this.showBPChart=!1;break;case"BLOOD_PRESSURE":this.showBPChart=!0,this.showGlucoseChart=!1;break;default:this.showBPChart=!1,this.showGlucoseChart=!1}this._activatedRoute.snapshot.queryParams.phoneNumbers&&(this.phoneNumbers=JSON.parse(this._activatedRoute.snapshot.queryParams.phoneNumbers)),this.getEpisodesData(),this.getDiagonsis(),this.getStaffResponse(),this.initTranslation(),this.getNotes()}},{key:"initTranslation",value:function(){var t,n=this;(t=this.translationService).getMultiple.apply(t,e(this.strings)).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){n.translatedStrings=t})}},{key:"updateAlert",value:function(t){return this._alertService.getAlertDetail(t)}},{key:"getDiagonsis",value:function(){var t=this;this._patientsService.fetchPatientDetails(this.patientId,"EPISODE_DETAILS",this.episodeId).subscribe(function(e){e&&(t.episodeType=e.episodeType,t.patientStatus=null==e?void 0:e.patientStatus)})}},{key:"getStaffResponse",value:function(){var t=this,e=new Map;this._staffService.fetchStaffMemberById(this.patientId).subscribe(function(n){var i,a,r,o;n&&(t.physicians=null==n?void 0:n.assignedUsers[w.a.PHYSICIAN].map(function(t){return t.fullName}).join(", "),t.monitoringStaffs=null==n?void 0:n.assignedUsers[w.a.MONITORING_STAFF].map(function(t){return[t.id,t.fullName]}),t.icdCodes=null===(a=null===(i=null==n?void 0:n.user)||void 0===i?void 0:i.healthInfo)||void 0===a?void 0:a.dxCodes.map(function(t){return(null==t?void 0:t.code)+", "+(null==t?void 0:t.description)}),t.monitoringStaffType=null===(r=null==n?void 0:n.user)||void 0===r?void 0:r.assignedStaffs.filter(function(t){return"MONITORING_STAFF"==t.roleType}).map(function(t){return[t.staffId,t.assignedStaffType]})),null===(o=t.monitoringStaffType)||void 0===o||o.forEach(function(t){e.set(t[0],t[1])}),t.staffNameTypeMap=new Map,t.monitoringStaffs.forEach(function(n){t.staffNameTypeMap.set(n[1],e.get(n[0]))})})}},{key:"scrollTo",value:function(t){"vitalTable"==t&&this.scroller.scrollToAnchor("vitalTable"),"tmsNotes"==t&&this.scroller.scrollToAnchor("tms-notes")}},{key:"getVitalDetails",value:function(){var t,e=this;t=null!=this.alert.context||null!=this.alert.contextId?this.alert.contextId:this.alert.alertMessageParameters.ENTITY_ID,this.alertService.getVitalData(t).subscribe(function(t){var n,i,a,r,o,l;if(t){for(var s in e.alertData=t,e.vitalKeys=Object.keys(null===(n=e.alertData)||void 0===n?void 0:n.parametersMap),e.vitalValues=[],e.alertParameterValue=e.getAlertParamDetail(e.alert,e.alertData),e.alertParameterName=e.getAlertParamDetail(e.alert,e.alertData,"NAME"),"OPEN"==(null===(i=e.alert)||void 0===i?void 0:i.status)?e.alertMessage=e.alertParameterName:"CLOSED"==(null===(a=e.alert)||void 0===a?void 0:a.status)&&(e.alertMessage="This alert has been closed"),e.threshold_level=parseInt(null===(l=null===(o=null===(r=e.alertData)||void 0===r?void 0:r.vitalstate)||void 0===o?void 0:o.parameterStates[0])||void 0===l?void 0:l.limitValue)||0,e.alertData.parametersMap)e.vitalValues.push(Number(e.alertData.parametersMap[s]));return e.vitalValues}})}},{key:"getAlertParamDetail",value:function(t,e){var n,i,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"VALUE",o=null==e?void 0:e.parametersMap;if(null!=e&&null!=t&&null!=this.vitalKeys){if(null!=t.alertMessageParameters&&null!=t.alertMessageParameters.RAISED_FOR&&null!=t.alertMessageParameters.RAISED_FOR){var l=null===(n=null==e?void 0:e.vitalstate)||void 0===n?void 0:n.parameterStates.find(function(e){return e.parameter==t.alertMessageParameters.RAISED_FOR}),s=this.vitalKeys.filter(function(t){return t==l.parameter});this.alertParameterName=s[0],this.alertParameterValue=o[l.parameter]}else{var c=null===(a=null===(i=e.vitalstate)||void 0===i?void 0:i.parameterStates[0])||void 0===a?void 0:a.parameter,u=this.vitalKeys.filter(function(t){return t==c});this.alertParameterName=u[0],this.alertParameterValue=o[c]}return"VALUE"==r?this.alertParameterValue:this.alertParameterName}}},{key:"getVitalReport",value:function(){var t=this;this._analyticsService.fetchVitalSnapshot(this.patientId,Fh.a[this.vitalType],this.getShortISODate(this.dateRange[0]),this.getShortISODate(this.dateRange[1])).subscribe(function(e){var n,i,a,r,o,l,s,c;t.vitalReport=e,t.tmsDetails=(null===(n=t.vitalReport)||void 0===n?void 0:n.patientCommunications)||[],t.summary=null===(a=null===(i=t.vitalReport)||void 0===i?void 0:i.snapshot)||void 0===a?void 0:a.summary[t.vitalType],t.vitalBlueprint=null===(r=t.vitalBlueprints.filter(function(e){return e.type==t.vitalType}))||void 0===r?void 0:r[0],t.updateVitalsHistory((null===(l=null===(o=t.vitalReport)||void 0===o?void 0:o.snapshot)||void 0===l?void 0:l.vitals)||(null===(c=null===(s=t.vitalReport)||void 0===s?void 0:s.snapshot)||void 0===c?void 0:c.vitalsForSelectedDays)||[])})}},{key:"refresh",value:function(t){var e=this;switch(this.vitalType=t,this.vitalBlueprints.length>0&&this.vitalBlueprints.forEach(function(n){n.type==t&&(e.vitalLabel=n.label)}),t){case"BLOOD_GLUCOSE":this.showGlucoseChart=!0,this.showBPChart=!1,this.options.legend.position="bottom";break;case"BLOOD_PRESSURE":this.showBPChart=!0,this.showGlucoseChart=!1,this.options.legend.position="none";break;default:this.showBPChart=!1,this.showGlucoseChart=!1,this.options.legend.position="bottom"}this.isChartLoading=!0,this.vitalBlueprint=null,this.getIndividualLimitForSelectedVital(),this.getVitalReport()}},{key:"loadTenantBlueprintAndUserVitalAlerts",value:function(){var t=this,e=this._vitalBlueprintsService.fetchVitalBlueprintsForTenant(this.tenantId),n=this._userVitalAlertService.fetchVitalBlueprintsOfUser(this.patientId);Object(Wf.a)([e,n]).subscribe(function(e){var n,i,a;t.vitalBlueprints=null===(n=e[0])||void 0===n?void 0:n.filter(function(t){return t.active}),t.vitalType&&t.vitalBlueprints.forEach(function(e){e.type==t.vitalType&&(t.vitalLabel=e.label)}),t.userVitalAlerts=e[1],(null===(i=t.vitalBlueprints)||void 0===i?void 0:i.length)&&(t.vitalType||(t.vitalType=t.vitalBlueprints.some(function(t){return"BLOOD_PRESSURE"===(null==t?void 0:t.type)})?Fh.a.BLOOD_PRESSURE:t.vitalBlueprints[0].type),(null===(a=t.userVitalAlerts)||void 0===a?void 0:a.length)>0&&t.getIndividualLimitForSelectedVital())})}},{key:"getVitalsHistory",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.isChartLoading=!0,this.noVitals=!0,this._vitalsEventLogger.vitalHistoryEvent(this.patientId,this.vitalType,"",t,e),this._patientsService.getVitalHistory(this.patientId,this.vitalType,t,e,i).subscribe(function(t){n.vitalBlueprint=t.vitalBlueprint,n.updateVitalsHistory(t.vitals)})}},{key:"updateVitalsHistory",value:function(t){var n;if(this.vitals=e(t),this.noVitals=!this.vitals.length,this.vitalsOriginal=JSON.parse(JSON.stringify(this.vitals)),this.vitalBlueprint.contexts&&this.vitalBlueprint.contexts.length){if(this.selectedContext=this.vitalBlueprint.contexts[0].options[0].label,null===(n=this.vitals)||void 0===n?void 0:n.length){var i=JSON.parse(this.vitals[0].context)||"";this.selectedContext=i[Object.keys(i)[0]],this.vitalWarning=""}this.populateGraphWithContextData(this.vitalBlueprint.contexts[0].label,this.selectedContext)}else{if(!this.vitals.length)return this.vitalWarning=this.translatedStrings.get("PATIENT_NOT_RECORDED_ANY_VITALS").replace("{PATIENT_NAME}",this.patientName),void(this.isChartLoading=!0);this.vitalWarning="",this.populateChart()}}},{key:"getIndividualLimitForSelectedVital",value:function(t){var e,n,i=this;this.individualLimits=new Array,t?(this.contextOption=t,null===(e=this.userVitalAlerts)||void 0===e||e.filter(function(t){return t.vital===i.vitalType&&t.enabled}).map(function(e){return e.contexts.filter(function(e){return e.answer===t}).map(function(t){var e=new Yh.a;e.label=t.answer,e.min=t.limit.min,e.max=t.limit.max,i.individualLimits.push(e)})})):this.vitalType&&(this.contextOption=null,null===(n=this.userVitalAlerts)||void 0===n||n.filter(function(t){return t.vital===i.vitalType&&t.enabled}).map(function(t){var e=new Yh.a;e.label=t.parameter,e.min=t.limit.min,e.max=t.limit.max,i.individualLimits.push(e)}))}},{key:"populateGraphWithContextData",value:function(t,e){var n=this;if(t||(t=this.vitalBlueprint.contexts[0].label),this.vitals=[],this.getIndividualLimitForSelectedVital(e),this.vitalsOriginal.forEach(function(i){if(e||i.context){if(i.context)try{var a=JSON.parse(i.context);e===a[t]&&n.vitals.push(i)}catch(r){}}else n.vitals.push(i)}),!this.vitals.length)return this.vitalWarning=this.translatedStrings.get("PATIENT_NOT_RECORDED_ANY_VITALS").replace("{PATIENT_NAME}",this.patientName),void(this.isChartLoading=!0);this.vitalWarning="",this.populateChart()}},{key:"populateChart",value:function(){this.chartData=this.plotDataPointsForChart(),this.isChartLoading=!1}},{key:"plotDataPointsForChart",value:function(){var t=this;this.columnNames=["Dates"];var e=[],n=[],i=new Map;return this.vitalBlueprint.parameters.forEach(function(e){n.push(e.type.toLowerCase()),i.set(e.type.toLowerCase(),e.label),t.columnNames.push(e.label)}),this.vitals.forEach(function(a,r){try{var o=JSON.parse(a.parameters),l=[],s=0;l.push(t.getFullDate(a.takenAt+"Z")),n.forEach(function(t){var e=i.get(t)||"",n=Object.keys(o).find(function(n){return n.toLowerCase()===t.toLowerCase()||n.toLowerCase()===e.toLowerCase()||t.toLowerCase()==="HEARTRATE".toLowerCase()&&n.toLowerCase()==="HEART_RATE".toLowerCase()});s=parseFloat(o[n])||0,l.push(s)}),e.push(l)}catch(c){}}),e}},{key:"getFullDate",value:function(t){var e=new Date(t);return this._datePipe.transform(e,"MMM d, h:mm a")}},{key:"goBack",value:function(){this._location.back()}},{key:"logAction",value:function(t,e){this._patientsEventLogger.patientActionEvent(e,t)}},{key:"onDateChange",value:function(){this.dateRange[0].setHours(0,0,0,0),this.dateRange[1].setHours(23,59,59,999),this.getVitalReport(),this.getNotes()}},{key:"getEpisodesData",value:function(){var t=this;this._episodesService.getActiveEpisode(this.patientId,"RPM").subscribe(function(e){var n;(null==e?void 0:e.length)&&(t.episode=e[0],t.episodeId=null===(n=t.episode)||void 0===n?void 0:n.id,t.tenantId=t.episode.tenantId,t.isActiveRPMCareplan=e.some(function(t){return t.episodeType===Zh.a.RPM&&"IN_PROGRESS"===t.status}),t.loadTenantBlueprintAndUserVitalAlerts())})}},{key:"getNotes",value:function(){var t=this;this._patientsService.getNotes(this.patientId).subscribe(function(n){t.notes=[],n&&n.length>0&&(t.notes=e(n.filter(function(e){return e.updatedOn>=t.dateRange[0].getTime()&&e.updatedOn<=t.dateRange[1].getTime()})))})}},{key:"onTMSClick",value:function(){var t,e,n=this;e=Ye.a.TREATMENT_MANAGEMENT_SERVICE,this.tmsPercent<100?(t="TMS",e=Ye.a.TREATMENT_MANAGEMENT_SERVICE):this.additionalTMSPercent<100?(t="ADDITIONAL_TMS",e=Ye.a.ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE):(t="ADDITIONAL_TMS_B",e=Ye.a.ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B);var i=new Date(this.carePlanStartDate);this.isActiveRPMCareplan?this._patientsService.getSpecificUser(this.patientId).subscribe(function(a){n._patientComunicationModalService.createTMSModal(a,n.episodeId,t,e,i).afterClose.pipe(Object(Ve.a)(n.unsubscribed)).subscribe(function(t){n.tmsAdded=t,t&&n.getVitalReport()})}):this._notificationsService.error(this.translatedStrings.get("TMS"),this.translatedStrings.get("TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED"))}},{key:"downloadStaff",value:function(){this.includeVitals=!0,this.includeTMS=!0,this.includeNotes=!0,this.getReport("download","staff")}},{key:"downloadPatient",value:function(){this.includeVitals=!0,this.includeTMS=!1,this.includeNotes=!1,this.getReport("download","patient")}},{key:"getShortISODate",value:function(t){return this._datePipe.transform(t,"yyyy-MM-dd")}},{key:"getBaseURLForVitalReportEmail",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preview";return this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/vital-snapshots/printable/".concat(t,"/")+this.patientId],{queryParams:{startDate:this.getShortISODate(this.dateRange[0]),endDate:this.getShortISODate(this.dateRange[1]),action:n,email:null===(e=this.emailIds)||void 0===e?void 0:e.join(","),subject:this.subject,note:this.note,includeVitals:this.includeVitals,includeTMS:this.includeTMS,includeNotes:this.includeNotes,patientName:this.patientName,noteStartDate:this.dateRange[0].getTime(),noteEndDate:this.dateRange[1].getTime(),vitalLabel:this.vitalLabel,individualLimits:JSON.stringify(this.individualLimits)}}))}},{key:"getBaseURLForVitalReportSMS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preview",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/patient-summary/"+this.patientId],{queryParams:{communicationMode:e,phoneNumber:n,startDate:this.getShortISODate(this.dateRange[0]),endDate:this.getShortISODate(this.dateRange[1]),action:t,subject:this.subject,note:this.note}}))}},{key:"getReport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preview",e=arguments.length>1?arguments[1]:void 0,n=this.vitalType.toLowerCase().replace(/_/g,"-"),i="patient"===e?this.getBaseURLForVitalReportSMS(t,"SMS"):this.getBaseURLForVitalReportEmail(n,t);window.open(i,"_blank"),"preview"!==t&&(this.emailIds=[])}},{key:"createGenerateVitalHistoryReportRequest",value:function(t,e,n,i,a,r,o){return{patientId:t,vitalType:e,startDate:this._datePipe.transform(n,"yyyy-MM-dd"),endDate:this._datePipe.transform(i,"yyyy-MM-dd"),emailIds:a,subject:r,note:o}}},{key:"shareReport",value:function(){this._shareReportModalService.createModal(this.patientName,this.patientId,this.phoneNumbers,this.episodeId,this.vitalType,this.dateRange[0],this.dateRange[1],JSON.stringify(this.individualLimits),JSON.stringify(this.vitalBlueprint),"shareVital","","",this.vitalLabel).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(){})}},{key:"addNotes",value:function(){var t=this;this._patientsModalsService.notes(this.patientId,this.patientName,this.tenantId).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(n){null!=n&&(t.notes=[].concat(e(t.notes),[n]),t._notificationsService.success(t.translatedStrings.get("MENU.PATIENTS"),t.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY")))})}},{key:"closeAlert",value:function(){var t=this;this.alert.status="CLOSED",this.alert.closed=!0,this.alert.closedOn=(new Date).getTime(),this._alertService.closeAlert(this.isPrioritisedAlert?this.prioritisedAlertId:this.alert.id).subscribe(function(){t._patientsEventLogger.patientAlertEvent(t.patientId,"alert_mark_as_closed"),t._notificationsService.success(t.translatedStrings.get("COMMON.ALERT"),t.translatedStrings.get("ALERT.ALERT_CLOSED_SUCCESSFULLY")),t.alertMessage="This alert has been closed",t._dataSharingService.triggerAlertRefresh(),t.goBack()})}},{key:"pushToEMR",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.vitalType.toLowerCase().replace(/_/g,"-"),n=this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/vital-snapshots/printable/".concat(e,"/")+this.patientId],{queryParams:{communicationMode:"EMR",phoneNumber:void 0,startDate:this.getShortISODate(this.dateRange[0]),endDate:this.getShortISODate(this.dateRange[1]),action:"pushToEMR",includeVitals:this.includeVitals,includeTMS:this.includeTMS,includeNotes:this.includeNotes,patientName:this.patientName,noteStartDate:this.dateRange[0].getTime(),noteEndDate:this.dateRange[1].getTime(),individualLimits:this.individualLimits,vitalBlueprint:this.vitalBlueprint,vitalLabel:this.vitalLabel,isUrgent:t}}));window.open(n,"_blank")}}]),i}(D.a)).\u0275fac=function(t){return new(t||sm)(_.Rb(m.a),_.Rb(y.a),_.Rb(T.a),_.Rb(Zb.a),_.Rb(h.e),_.Rb(Uh.a),_.Rb(eb.a),_.Rb(V.b),_.Rb(h.l),_.Rb($h.a),_.Rb(Ze.a),_.Rb(Nn.a),_.Rb(je.a),_.Rb(Bh.a),_.Rb(m.g),_.Rb(Hh.a),_.Rb(h.D),_.Rb(Gh.a),_.Rb(Ue.a),_.Rb(X.a),_.Rb(Be.a),_.Rb(id.a))},sm.\u0275cmp=_.Lb({type:sm,selectors:[["app-vital-trend-report"]],features:[_.Cb([h.e]),_.Ab],decls:190,vars:128,consts:[[2,"background-color","#393939",3,"nzBackIcon","nzBack"],[1,"header-title"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzSize","nzDropdownMenu","disabled"],["size","13px","name","download",1,"share-icon",3,"originalStyle","color"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"download-staff"],[1,"line"],["nz-button","","nzType","primary",3,"nzSize","disabled","click"],["size","13px","name","share",1,"share-icon",3,"originalStyle","color"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzSize","nzDropdownMenu","disabled","ngClass"],["emrMenu","nzDropdownMenu"],["backIcon",""],[1,"container"],[3,"nzSpinning"],["class","alert-message",4,"ngIf"],["class","overlay-off",4,"ngIf"],["class","cdk-overlay-container alert-table","featureHighlight","","featureKey","alerts_spotlight","hideElement","",3,"position",4,"ngIf"],["nz-row","","nzSpan","24","nzGutter","24"],["nz-col","",4,"ngIf"],["nz-col","","nzFlex","1"],["nz-row","","nzJustify","end"],["nz-col","","style","padding-left:12px",4,"ngIf"],["nz-col","",2,"padding-left","12px"],["nzSize","large",3,"ngModel","nzDisabledDate","ngModelChange"],["nz-col","","nzSpan","15"],["nz-col","","nzSpan","9"],["nz-typography","","nzType","danger",3,"ngClass"],[1,"divider"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","",1,"midnight-green-label"],["nz-col","","nzSpan","1"],["nz-row","",1,"fs-Nunito",3,"nzGutter"],[1,"audio-call",3,"userId","phoneNumbers","renderVital","click"],[1,"fs-Nunito"],["nz-col","","nzSpan","17"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","16"],["nz-col","","nzSpan","32"],["nz-typography",""],["nz-row","","row","","nzGutter","24","nzJustify","start","nzAlign","middle",1,"pad-20"],["nz-col","",1,"vital-divider"],[1,"vital-trend"],["nz-col","",1,"vital-divider","text-center"],[1,"vital-title",3,"click"],["nz-col","",1,"text-center"],[4,"ngIf"],["id","tms-notes",3,"tmsDetails","notes","patientName","refreshNotes"],["tmsNotes",""],[3,"nzTemplate"],["backUp",""],[1,"bottom-spacer-div"],[1,"container","input-section-div",3,"ngStyle"],["nz-row","","nzAlign","middle","nzJustify","end",4,"ngIf"],["nz-row","","nzJustify","start","nzAlign","bottom"],["nz-col","","nzFlex","120px"],["nz-button","","nzType","primary",1,"footer-btn",3,"click"],["nz-button","","nzType","danger","class","footer-btn button-large","style","border:1px solid red;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","footer-btn",3,"click",4,"ngIf"],["name","back","altColor","#ffffff","color","#ffffff"],[1,"alert-message"],[1,"overlay-off"],["nz-row","",1,"table-height"],["nz-col","","nzSpan","6",1,"vital-parameter",2,"padding-top","9px",3,"ngClass"],["nz-col","","nzSpan","6",2,"padding-top","9px",3,"ngClass"],["nz-row","",1,"table-height","table-space"],["nz-col","","nzSpan","6",1,"vital-warn",2,"padding-top","9px",3,"ngClass"],["nz-row","","class","table-height table-space",4,"ngFor","ngForOf"],["featureHighlight","","featureKey","alerts_spotlight","hideElement","",1,"cdk-overlay-container","alert-table",3,"position"],["nz-col",""],[1,"main-title"],[1,"date-title"],[1,"date-bg-title"],["nz-typography","",1,"minor-headings"],["nzSize","large",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel"],["nzSize","large","id","context-selector",3,"ngModel","ngModelChange"],["nzValue","","nzLabel","No Context"],["style","width: 30%; text-align: right; color: var(--primary-color);",4,"ngIf"],[2,"width","30%","text-align","right","color","var(--primary-color)"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"],["nz-row","","nzGutter","16"],["nz-col","","nzFlex","10"],["nz-col","","nzFlex","14"],[3,"vitalBlueprint","patientName","context","individualLimits","showGlucose"],[3,"vitalBlueprint","vital","vitalLabel"],["nz-row","","row","","nzGutter","24",1,"pad-20"],["nz-col","","nzSpan","24"],["id","reference",3,"stageReference"],["nz-row","","nzGutter","24",1,"pad-20"],["nz-col","","nzSpan","12"],[3,"summary","limits"],[3,"distribution"],["nz-row","",1,"pad-20"],["nz-col","","nzSpan","8"],[3,"snapshotData","patientName"],[3,"snapshot"],["nz-row","","nzGutter","24",1,"pad-20",2,"padding-top","0px"],[3,"reportData"],["nz-row","","nzSpan","24",1,"pad-20"],["nz-col","","nzSpan","12",1,"summary-shade"],[1,"summary-title"],["nz-row","","nzSpan","24",1,"summary-details"],["nz-col","","nzSpan","12",1,"summary-value"],[1,"p-top"],["nz-col","","nzFlex","1",1,"graph-container"],["nz-row","","class","header",3,"nzGutter",4,"ngIf"],["type","LineChart",1,"w-100",3,"data","columns","options","dynamicResize","select"],[1,"chart-axis"],["id","vitalTable","nz-row","","nzGutter","24",1,"pad-20",2,"padding-top","0px"],["vitalTable",""],[1,"vitalLabel"],[3,"vitalBlueprint","vitals","careplanId","patientId","linkedVitals"],["nz-row","",1,"header",3,"nzGutter"],["nz-col","","nzSpan","6",1,"legend-item"],[1,"legend-name"],[1,"legend-circle",2,"background-color","#9ecd3d"],[1,"reference-name"],[1,"legend-circle","round",2,"background-color","#fce800"],[1,"sub-name"],[1,"legend-circle","round",2,"background-color","#c81c1c"],["nz-button","","nzType","primary","nzShape","circle",1,"scrollup"],["name","up","color","#ffffff","size","20",2,"margin","0px"],["nz-row","","nzAlign","middle","nzJustify","end"],["nz-col","",1,"bottom-note"],["nz-button","","nzType","danger",1,"footer-btn","button-large",2,"border","1px solid red",3,"click"]],template:function(t,e){if(1&t&&(_.Xb(0,"nz-page-header",0),_.ec("nzBack",function(){return e.goBack()}),_.Xb(1,"nz-page-header-title",1),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"nz-page-header-extra"),_.Xb(5,"button",2),_.Xb(6,"span"),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Xc(9," \xa0 "),_.Sb(10,"app-icons",3),_.Wb(),_.Xb(11,"nz-dropdown-menu",null,4),_.Xb(13,"ul",5),_.Xb(14,"li",6),_.ec("click",function(){return e.downloadStaff()}),_.Xb(15,"span",7),_.Xc(16),_.jc(17,"translate"),_.jc(18,"translate"),_.Wb(),_.Wb(),_.Sb(19,"p",8),_.Xb(20,"li",6),_.ec("click",function(){return e.downloadPatient()}),_.Xb(21,"span"),_.Xc(22),_.jc(23,"translate"),_.jc(24,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(25,"button",9),_.ec("click",function(){return e.shareReport()}),_.Xb(26,"span"),_.Xc(27),_.jc(28,"translate"),_.Wb(),_.Xc(29," \xa0 "),_.Sb(30,"app-icons",10),_.Wb(),_.Xb(31,"button",11),_.Xc(32,"Push To EMR"),_.Wb(),_.Xb(33,"nz-dropdown-menu",null,12),_.Xb(35,"ul",5),_.Xb(36,"li",6),_.ec("click",function(){return e.pushToEMR(!1)}),_.Xc(37,"Not-Urgent"),_.Wb(),_.Sb(38,"p",8),_.Xb(39,"li",6),_.ec("click",function(){return e.pushToEMR(!0)}),_.Xc(40,"Urgent"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Vc(41,zv,1,0,"ng-template",null,13,_.Wc),_.Wb(),_.Sb(43,"br"),_.Xb(44,"div",14),_.Xb(45,"nz-spin",15),_.Xb(46,"h3"),_.Vc(47,_v,2,1,"strong",16),_.Wb(),_.Xb(48,"h3"),_.Vc(49,Ov,2,1,"strong",16),_.Wb(),_.Vc(50,Mv,26,30,"nz-table",17),_.Vc(51,Pv,16,17,"nz-table",17),_.Vc(52,Rv,16,19,"nz-table",18),_.Vc(53,xv,26,31,"nz-table",18),_.Wb(),_.Xb(54,"div",19),_.Vc(55,kv,9,12,"div",20),_.Vc(56,wv,9,12,"div",20),_.Xb(57,"div",21),_.Xb(58,"div",22),_.Vc(59,Vv,4,3,"div",20),_.Vc(60,Fv,3,2,"div",20),_.Vc(61,Uv,3,0,"div",23),_.Vc(62,Yv,4,2,"div",20),_.Xb(63,"div",24),_.Xb(64,"nz-range-picker",25),_.ec("ngModelChange",function(t){return e.dateRange=t})("ngModelChange",function(){return e.onDateChange()}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(65,"div",19),_.Sb(66,"div",26),_.Xb(67,"div",27),_.Xb(68,"p",28),_.Xc(69),_.Wb(),_.Wb(),_.Wb(),_.Sb(70,"nz-divider",29),_.Xb(71,"div",30),_.Xb(72,"div",31),_.Xb(73,"label",32),_.Xc(74),_.jc(75,"translate"),_.Wb(),_.Wb(),_.Xb(76,"div",31),_.Xb(77,"label",32),_.Xc(78,"Gender"),_.Wb(),_.Wb(),_.Xb(79,"div",31),_.Xb(80,"label",32),_.Xc(81),_.jc(82,"translate"),_.Wb(),_.Wb(),_.Sb(83,"div",33),_.Wb(),_.Xb(84,"div",34),_.Xb(85,"div",31),_.Xb(86,"strong"),_.Xc(87),_.jc(88,"titlecase"),_.Wb(),_.Vb(89),_.Xb(90,"app-audio-call-widget",35),_.ec("click",function(){return e.logAction("audio_call",e.patientId)}),_.Wb(),_.Ub(),_.Wb(),_.Xb(91,"div",31),_.Xb(92,"strong"),_.Xc(93),_.jc(94,"titlecase"),_.Wb(),_.Wb(),_.Xb(95,"div",31),_.Xb(96,"strong"),_.Xc(97),_.jc(98,"date"),_.Wb(),_.Wb(),_.Sb(99,"div",33),_.Wb(),_.Sb(100,"br"),_.Xb(101,"div",36),_.Xb(102,"div",30),_.Xb(103,"div",31),_.Xb(104,"label",32),_.Xc(105),_.jc(106,"translate"),_.Wb(),_.Wb(),_.Xb(107,"div",37),_.Xb(108,"label",32),_.Xc(109),_.jc(110,"translate"),_.Wb(),_.Wb(),_.Sb(111,"div",33),_.Wb(),_.Xb(112,"div",30),_.Xb(113,"div",31),_.Xb(114,"strong"),_.Xc(115),_.Wb(),_.Wb(),_.Xb(116,"div",37),_.Xb(117,"p"),_.Vc(118,Gv,6,5,"ng-container",38),_.jc(119,"keyvalue"),_.Wb(),_.Wb(),_.Sb(120,"div",33),_.Wb(),_.Sb(121,"br"),_.Xb(122,"div",39),_.Xb(123,"div",31),_.Xb(124,"label",32),_.Xc(125),_.jc(126,"translate"),_.Wb(),_.Wb(),_.Xb(127,"div",40),_.Xb(128,"label",32),_.Xc(129),_.jc(130,"translate"),_.Wb(),_.Wb(),_.Sb(131,"div",33),_.Wb(),_.Xb(132,"div",39),_.Xb(133,"div",31),_.Xb(134,"strong"),_.Xc(135),_.Wb(),_.Wb(),_.Xb(136,"div",41),_.Xb(137,"strong",42),_.Vc(138,$v,3,2,"ng-container",38),_.Wb(),_.Wb(),_.Sb(139,"div",33),_.Wb(),_.Sb(140,"br"),_.Xb(141,"div",39),_.Xb(142,"div",40),_.Xb(143,"label",32),_.Xc(144,"Patient Notes"),_.Wb(),_.Wb(),_.Sb(145,"div",33),_.Wb(),_.Xb(146,"div",39),_.Xb(147,"div",41),_.Xb(148,"strong"),_.Xc(149),_.Wb(),_.Wb(),_.Sb(150,"div",33),_.Wb(),_.Wb(),_.Sb(151,"nz-divider"),_.Xb(152,"div",43),_.Xb(153,"div",44),_.Xb(154,"span",45),_.Xc(155),_.jc(156,"translate"),_.Wb(),_.Wb(),_.Xb(157,"div",46),_.Xb(158,"span",47),_.ec("click",function(){return e.scrollTo("vitalTable")}),_.Xc(159),_.jc(160,"translate"),_.Wb(),_.Wb(),_.Xb(161,"div",48),_.Xb(162,"span",47),_.ec("click",function(){return e.scrollTo("tmsNotes")}),_.Xc(163),_.jc(164,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Vc(165,Kv,7,6,"ng-container",49),_.Vc(166,Qv,10,4,"ng-container",49),_.Vc(167,Jv,13,5,"ng-container",49),_.Vc(168,tm,31,17,"ng-container",49),_.Vc(169,im,18,21,"ng-container",49),_.Wb(),_.Vb(170),_.Xb(171,"app-tms-vital-history",50,51),_.ec("refreshNotes",function(){return e.getNotes()}),_.Wb(),_.Ub(),_.Vb(173),_.Xb(174,"nz-back-top",52),_.Vc(175,am,2,0,"ng-template",null,53,_.Wc),_.Wb(),_.Ub(),_.Sb(177,"div",54),_.Xb(178,"div",55),_.Vc(179,rm,4,3,"div",56),_.Xb(180,"div",57),_.Xb(181,"div",58),_.Xb(182,"button",59),_.ec("click",function(){return e.addNotes()}),_.Xc(183),_.jc(184,"translate"),_.Wb(),_.Wb(),_.Xb(185,"div",21),_.Vc(186,om,3,3,"button",60),_.Wb(),_.Xb(187,"div",58),_.Xb(188,"div",22),_.Vc(189,lm,3,3,"button",61),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(12),i=_.Ic(34),a=_.Ic(42),r=_.Ic(176);_.rc("nzBackIcon",a),_.Db(2),_.Zc(" ",_.kc(3,76,"COMMON.VITAL_TREND_REPORT")," "),_.Db(3),_.rc("nzSize","middle")("nzDropdownMenu",n)("disabled",e.noVitals),_.Db(2),_.Zc(" ",_.kc(8,78,"PATIENTS.REPORTDOWNLOAD"),""),_.Db(3),_.rc("originalStyle",!0)("color",e.noVitals?"grey":"#ffffff"),_.Db(6),_.ad("",_.kc(17,80,"COMMON.FOR")," ",_.kc(18,82,"PATIENT.MONITORING_STAFF")," "),_.Db(6),_.ad("",_.kc(23,84,"COMMON.FOR")," ",_.kc(24,86,"PATIENT"),""),_.Db(3),_.rc("nzSize","middle")("disabled",e.noVitals),_.Db(2),_.Yc(_.kc(28,88,"PATIENTS.REPORTSHARE")),_.Db(3),_.rc("originalStyle",!0)("color",e.noVitals?"grey":"#ffffff"),_.Db(1),_.rc("nzSize","middle")("nzDropdownMenu",i)("disabled",e.noVitals)("ngClass",_.zc(119,um,e.noVitals,!e.noVitals)),_.Db(14),_.rc("nzSpinning",e.loading),_.Db(2),_.rc("ngIf",e.alertId&&"OPEN"==e.status),_.Db(2),_.rc("ngIf",e.alertId&&"CLOSED"==e.status),_.Db(1),_.rc("ngIf",e.alertId&&"OPEN"==e.status&&!e.isPrioritisedAlert),_.Db(1),_.rc("ngIf",e.alertId&&"OPEN"==e.status&&e.isPrioritisedAlert),_.Db(1),_.rc("ngIf",e.alertId&&"OPEN"==e.status&&e.isPrioritisedAlert),_.Db(1),_.rc("ngIf",e.alert&&"OPEN"==e.status&&!e.isPrioritisedAlert),_.Db(2),_.rc("ngIf","Blood Glucose"!=e.vitalLabel),_.Db(1),_.rc("ngIf","Blood Glucose"==e.vitalLabel),_.Db(3),_.rc("ngIf",!e.alert),_.Db(1),_.rc("ngIf",!e.alert),_.Db(1),_.rc("ngIf",null==e.vitalBlueprint||null==e.vitalBlueprint.contexts?null:e.vitalBlueprint.contexts.length),_.Db(1),_.rc("ngIf",null==e.vitalBlueprint||null==e.vitalBlueprint.contexts?null:e.vitalBlueprint.contexts.length),_.Db(2),_.rc("ngModel",e.dateRange)("nzDisabledDate",e.disabledDates),_.Db(4),_.rc("ngClass","Blood Glucose"==e.vitalLabel?"bg-warn":null),_.Db(1),_.Zc(" ",e.vitalWarning," "),_.Db(2),_.rc("nzGutter",_.xc(122,dm)),_.Db(3),_.Yc(_.kc(75,90,"PATIENT.NAME")),_.Db(7),_.Yc(_.kc(82,92,"COMMON.DOB")),_.Db(3),_.rc("nzGutter",_.xc(123,dm)),_.Db(3),_.Yc(_.kc(88,94,e.patientName)),_.Db(3),_.rc("userId",e.patientId)("phoneNumbers",e.phoneNumbers)("renderVital",!0),_.Db(3),_.Yc(_.kc(94,96,null==e.vitalReport||null==e.vitalReport.metaData?null:e.vitalReport.metaData.gender)),_.Db(4),_.Zc(" ",_.lc(98,98,e.dob,"mediumDate")," "),_.Db(5),_.rc("nzGutter",_.xc(124,bm)),_.Db(3),_.Yc(_.kc(106,101,"COMMON.PHYSICIAN")),_.Db(4),_.Yc(_.kc(110,103,"COMMON.MONITORED_BY")),_.Db(3),_.rc("nzGutter",_.xc(125,bm)),_.Db(3),_.Zc(" ",e.physicians,""),_.Db(3),_.rc("ngForOf",_.kc(119,105,e.staffNameTypeMap)),_.Db(7),_.Yc(_.kc(126,107,"PATIENT_ID")),_.Db(4),_.Yc(_.kc(130,109,"COMMON.DIAGNOSIS")),_.Db(6),_.Yc((null==e.vitalReport||null==e.vitalReport.metaData?null:e.vitalReport.metaData.patientInternalId)||"N/A"),_.Db(3),_.rc("ngForOf",e.icdCodes),_.Db(11),_.Yc((null==e.vitalReport||null==e.vitalReport.metaData||null==e.vitalReport.metaData.quickNote?null:e.vitalReport.metaData.quickNote.content)||"N/A"),_.Db(6),_.Yc(_.kc(156,111,"COMMON.VITAL_TRENDS")),_.Db(4),_.Yc(_.kc(160,113,"COMMON.VITAL_VALUES")),_.Db(4),_.Yc(_.kc(164,115,"COMMON.TMS_NOTES")),_.Db(2),_.rc("ngIf",!e.isChartLoading),_.Db(1),_.rc("ngIf",e.showBPChart&&!e.isChartLoading),_.Db(1),_.rc("ngIf",e.showGlucoseChart&&!e.isChartLoading),_.Db(1),_.rc("ngIf",!e.showGlucoseChart&&!e.showBPChart&&!e.isChartLoading),_.Db(1),_.rc("ngIf",!e.isChartLoading),_.Db(2),_.rc("tmsDetails",e.tmsDetails)("notes",e.notes)("patientName",e.patientName),_.Db(3),_.rc("nzTemplate",r),_.Db(4),_.rc("ngStyle",_.yc(126,pm,e.headerLeft)),_.Db(1),_.rc("ngIf",e.alert&&"OPEN"==e.status),_.Db(4),_.Zc(" ",_.kc(184,117,"COMMON.ADD_NOTES")," "),_.Db(3),_.rc("ngIf",e.alert&&"OPEN"==e.status),_.Db(3),_.rc("ngIf",e.isActiveRPMCareplan&&e.patientStatus&&"ACTIVE"==e.patientStatus&&(!e.alert||"OPEN"==e.status))}},directives:[Xi.b,Xi.g,Xi.d,M.a,A.a,P.a,sn.d,sn.b,he.a,sn.e,cn.c,cn.e,h.o,Wn.a,h.q,Z.c,Z.a,ge.a,ge.c,v.u,v.x,H.a,G.a,Ui.a,h.p,gv,hv.a,h.r,Q.f,Q.o,Q.e,Q.l,Pi,Y.d,Y.a,j.a,vv.a,mv.a,Sv.a,Iv.a,Dv.a,yv.a,Cv.a,Ev.a,Xv.a,p.a,Tv.a],pipes:[Qt.a,h.A,h.e,h.j,xa.a,ad.a,h.f],styles:['.container[_ngcontent-%COMP%]{padding:10px 35px!important}.fs-Nunito[_ngcontent-%COMP%]{font-style:"Nunito";font-size:14px}.header-title[_ngcontent-%COMP%]{color:#fff}.btn[_ngcontent-%COMP%]{position:relative;bottom:2px}nz-range-picker[_ngcontent-%COMP%]{width:260px;height:38px}.minor-headings[_ngcontent-%COMP%]{font-size:14px;color:#0f2015;padding-top:12px;padding-right:12px}.call[_ngcontent-%COMP%]{position:relative;top:3px;left:10px;padding-right:5px;color:var(--primary-color)}.call-patient[_ngcontent-%COMP%]{color:var(--primary-color)!important;font-size:14px;font-weight:700}.chart-table[_ngcontent-%COMP%]{padding-left:44px}[_nghost-%COMP%]     .ant-back-top{bottom:120px;right:32px}.scrollup[_ngcontent-%COMP%]{height:43px;width:43px;font-size:16px}.vitalLabel[_ngcontent-%COMP%]{padding-left:15px;border-left:4px solid var(--primary-color);color:#0b2240;font-size:18px;position:relative;left:22px}.vital-title[_ngcontent-%COMP%]{color:var(--primary-color);margin-left:16px}.vital-title[_ngcontent-%COMP%], .vital-trend[_ngcontent-%COMP%]{font-weight:700;font-size:14px;cursor:pointer;margin-right:16px}.vital-trend[_ngcontent-%COMP%]{color:#000}.main-title[_ngcontent-%COMP%]{color:#0b2240;font-size:20px}.date-title[_ngcontent-%COMP%]{padding-left:10px;font-size:18px}.date-bg-title[_ngcontent-%COMP%]{font-size:15px;color:#0b2240;margin-top:-10px}footer[_ngcontent-%COMP%]{background-color:#fff;height:9vh}.btn-right[_ngcontent-%COMP%]{margin-left:264px}.btn-left[_ngcontent-%COMP%], .btn-right[_ngcontent-%COMP%]{font-size:16px;margin-top:20px}.btn-left[_ngcontent-%COMP%]{margin-left:40px}.footer-Text[_ngcontent-%COMP%]{font-size:16px}.glucose-Report[_ngcontent-%COMP%], .glucose-summary[_ngcontent-%COMP%]{padding-left:20px}[_nghost-%COMP%]     .ant-page-header{padding:5px 24px}.reference-header[_ngcontent-%COMP%]{text-align:center}.glucose-header[_ngcontent-%COMP%]{color:#0b2240;border-left:4px solid #99c445;font-size:22px;font-weight:700;padding-left:12px}.pad-20[_ngcontent-%COMP%]{padding:10px 20px 15px 0}[_nghost-%COMP%]     .ant-col-18{display:block;flex:0 0 75%;max-width:75%;margin-top:-20px}.graph-container[_ngcontent-%COMP%]{border-radius:7px;overflow:hidden}.graphLabel[_ngcontent-%COMP%]{padding-left:15px;border-left:4px solid var(--primary-color);color:#0b2240;font-size:18px;margin:0}.input-section-div[_ngcontent-%COMP%]{background-color:#f8f8f8;position:fixed;bottom:1px;left:0;right:0;height:85px;padding:0}.footer-btn[_ngcontent-%COMP%]{padding:0;font-size:12px;width:110px;height:33px}[_nghost-%COMP%]     .ant-table-tbody>tr.ant-table-placeholder{text-align:center;display:none}.table-header-grey[_ngcontent-%COMP%]{background:#999!important}.table-header-green[_ngcontent-%COMP%]{background:var(--primary-color)!important}.table-body-grey[_ngcontent-%COMP%]{background:#e5e5e5!important}.table-body-white[_ngcontent-%COMP%]{background:#fff!important}.audio-call[_ngcontent-%COMP%]{position:relative;top:3px}.line[_ngcontent-%COMP%]{opacity:.2;border:1px solid #707070;width:85%;margin-left:15px;position:relative;top:8px}.download-staff[_ngcontent-%COMP%]{position:relative;top:3px}.divider[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]     .ant-select-single.ant-select-lg:not(.ant-select-customize-input) .ant-select-selector{height:37px;width:162px}.vital-divider[_ngcontent-%COMP%]{content:""}.vital-divider[_ngcontent-%COMP%]:before{border-right:2px solid #000;height:60%;position:absolute;right:0;bottom:4px;top:4px;content:""}.cdk-overlay-container[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:10px}.alert-table[_ngcontent-%COMP%]{height:100%;width:100%;padding-left:0;padding-right:0;padding-top:32px}.overlay-off[_ngcontent-%COMP%]{background-color:none;z-index:0}.chart-axis[_ngcontent-%COMP%]{font-weight:700;display:flex;margin-top:26px}.chart-axis[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{justify-content:center}.legend-item[_ngcontent-%COMP%]{display:inline-grid;align-items:center}.legend-name[_ngcontent-%COMP%]{font-size:14px;padding-left:20px;font-weight:800;color:#0b2240}.legend-circle[_ngcontent-%COMP%]{height:15px;width:15px;min-width:15px;border-radius:50%}.reference-name[_ngcontent-%COMP%]{padding-left:22px;margin-top:-26px}.round[_ngcontent-%COMP%]{position:relative;top:-9px;right:2px}.sub-name[_ngcontent-%COMP%]{padding-left:20px;margin-top:-32px;font-size:14px}.table-height[_ngcontent-%COMP%]{height:38px}.table-space[_ngcontent-%COMP%]{margin-top:10px}.vital-parameter[_ngcontent-%COMP%]{padding-left:38px}.vital-warn[_ngcontent-%COMP%]{color:#c71b1b}.text-black[_ngcontent-%COMP%]{color:#000}.share-icon[_ngcontent-%COMP%]{position:relative;top:2px}.alert-message[_ngcontent-%COMP%]{color:#0b2240}.bottom-note[_ngcontent-%COMP%]{margin-bottom:8px}.button-large[_ngcontent-%COMP%]{width:160px}.text-center[_ngcontent-%COMP%]{text-align:center}.bottom-spacer-div[_ngcontent-%COMP%]{height:85px;margin:16px}.midnight-green-label[_ngcontent-%COMP%]{color:var(--tertiary-color)!important}.w-100[_ngcontent-%COMP%]{width:100%}.summary-title[_ngcontent-%COMP%]{background:var(--primary-color);padding:10px;border-radius:5px;margin-bottom:0;font-weight:700;color:#000;font-size:15px}.summary-details[_ngcontent-%COMP%]{background:var(--neutral-color);border-radius:5px}.summary-value[_ngcontent-%COMP%]{padding-left:15px;color:#0b2240;font-weight:600}.p-top[_ngcontent-%COMP%]{padding-top:23px}.summary-shade[_ngcontent-%COMP%]{box-shadow:0 4px 8px 0 rgba(0,0,0,.2)}.bg-warn[_ngcontent-%COMP%]{padding-left:14px;margin-top:-20px}nz-select[_ngcontent-%COMP%]{font:normal normal normal 15px Nunito!important}.secondary-btn[_ngcontent-%COMP%]{background:#262626;border-width:1px;color:var(--primary-color)}.disabled[_ngcontent-%COMP%]{pointer-events:none}']}),sm),gm=o("Xep9"),hm=o("XNiG"),vm=o("Osby"),mm=o("Km6r"),Sm=o("WrBa"),Im=((cm=function(){function t(e){b(this,t),this._modalRef=e}return d(t,[{key:"ngOnInit",value:function(){this.successText=this.isVital?"SHARE_REPORT.SUCCESS_TEXT":"SHARE_REPORT.ASSESSMENT.SUCCESS_TEXT"}},{key:"close",value:function(){this._modalRef.close()}}]),t}()).\u0275fac=function(t){return new(t||cm)(_.Rb(O.e))},cm.\u0275cmp=_.Lb({type:cm,selectors:[["app-share-trend-report-success"]],inputs:{emailIds:"emailIds",isVital:"isVital"},decls:11,vars:7,consts:[[1,"success-text"],[1,"emails"],["nz-row","","nzAlign","middle","nzJustify","center",1,"buttons"],["nz-col",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(_.Xb(0,"div"),_.Xb(1,"div",0),_.Xc(2),_.jc(3,"translate"),_.Xb(4,"span",1),_.Xc(5),_.Wb(),_.Wb(),_.Xb(6,"div",2),_.Xb(7,"div",3),_.Xb(8,"button",4),_.ec("click",function(){return e.close()}),_.Xc(9),_.jc(10,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.Zc(" ",_.kc(3,3,e.successText),""),_.Db(3),_.Yc(e.emailIds.join(", ")),_.Db(4),_.Yc(_.kc(10,5,"COMMON.BTN_OK")))},directives:[Z.c,Z.a,M.a,A.a,P.a],pipes:[Qt.a],styles:[".success-text[_ngcontent-%COMP%]{text-align:center;font:normal normal 700 15px/23px Nunito}.emails[_ngcontent-%COMP%]{color:var(--primary-color)}.buttons[_ngcontent-%COMP%]{margin-top:16px!important}"]}),cm);function Dm(t,e){1&t&&_.Sb(0,"nz-option",25)}function ym(t,e){1&t&&_.Sb(0,"nz-option",26)}var Cm=function(){return[16,16]};function Em(t,e){1&t&&(_.Xb(0,"div",2),_.Xb(1,"div",12),_.Xb(2,"label",27),_.Xc(3,"Required"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Cm))}var Xm=function(t){return{abnormal:t}};function Tm(t,e){if(1&t&&(_.Xb(0,"span",28),_.Xc(1),_.Wb()),2&t){var n=e.$implicit,i=_.ic();_.rc("ngClass",_.yc(2,Xm,i.validateEmail(n.nzLabel))),_.Db(1),_.Zc(" ",n.nzLabel," ")}}function zm(t,e){1&t&&(_.Xb(0,"div",2),_.Xb(1,"div",12),_.Xb(2,"label",27),_.Xc(3,"Required"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Cm))}function _m(t,e){1&t&&(_.Xb(0,"div",2),_.Xb(1,"div",12),_.Xb(2,"label",27),_.Xc(3,"A valid email address looks like example@email.com"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Cm))}function Om(t,e){1&t&&(_.Xb(0,"div",2),_.Xb(1,"div",12),_.Xb(2,"label",27),_.Xc(3,"Required"),_.Wb(),_.Wb(),_.Wb()),2&t&&_.rc("nzGutter",_.xc(1,Cm))}var Mm,Am,Pm=function(t){return{error:t}},Nm=((Am=function(){function t(e,n,i,a,r,o){b(this,t),this._translationService=e,this._analyticsService=n,this._notificationsService=i,this._modalRef=a,this._datePipe=r,this._modalService=o,this.errors=[],this.note="",this.loading=!1,this.isVital=!1,this.validateEmail=function(t){return!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}}return d(t,[{key:"ngOnInit",value:function(){this.initType(),this.initialiseNoteString()}},{key:"initType",value:function(){switch(null==this.type&&(this.type="vital"),this.type){case"vital":this.subjectType=this.subject="Vital Trend Report",this.reportType=Sm.a.VITAL_SNAPSHOT,this.typeTitle="Vital",this.header="BULK_ACTION.GENERATE_VITAL_REPORT",this.vitalType=this.context.toLowerCase().replace(/[\s+_]/g,"-"),this.isVital=!0;break;case"assessment":this.subjectType=this.subject="Assessment Trend Report",this.reportType=Sm.a.ASSESSMENT_SNAPSHOT,this.typeTitle="Assessment",this.header="BULK_ACTION.GENERATE_ASSESSMENT_REPORT",this.formBlueprintId=this.context,this.isVital=!1}this.fromDate=this.getShortDate(this.dateRange[0]),this.toDate=this.getShortDate(this.dateRange[1]),this.fromDateInMillis=this.dateRange[0].getTime(),this.toDateInMillis=this.dateRange[1].getTime()}},{key:"initialiseNoteString",value:function(){var t=localStorage.getItem("loggedInUserName");this.note="Hi,\n\n".concat(this.typeTitle," trend reports for ").concat(this.contextName," recordings between ").concat(this.getMediumDateRange(),", have been shared with you by ").concat(t.trim()," from ").concat(this.tenantName,".\n\nThe reports can be downloaded from this {link}.\n\nThank you,\n").concat(this.tenantName)}},{key:"getMediumDateRange",value:function(){return"".concat(this.getMediumDate(this.dateRange[0])," - ").concat(this.getMediumDate(this.dateRange[1]))}},{key:"getMediumDate",value:function(t){return this._datePipe.transform(t,"mediumDate")}},{key:"validate",value:function(){var t,e,n,i,a,r=this;this.errors=[];var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return(null===(t=this.emailIds)||void 0===t?void 0:t.length)||this.errors.push("INVALID_EMAIL"),null===(e=this.emailIds)||void 0===e||e.forEach(function(t){var e;o.test(t)||-1!==(null===(e=r.errors)||void 0===e?void 0:e.findIndex(function(t){return"INVALID_EMAIL_FORMAT"===t}))||r.errors.push("INVALID_EMAIL_FORMAT")}),(null===(n=this.subject)||void 0===n?void 0:n.length)||this.errors.push("INVALID_SUBJECT"),(null===(i=this.note)||void 0===i?void 0:i.length)||this.errors.push("INVALID_NOTE"),!(null===(a=this.errors)||void 0===a?void 0:a.length)}},{key:"sendMail",value:function(){var t=this;if(this.validate()){var e=this.generateShareObject();this.loading=!0,this._analyticsService.bulkExportReport(e).subscribe(function(){t.loading=!1,t.showSuccess(),t._modalRef.destroy(!0)},function(e){t.loading=!1,t._notificationsService.error("Vital Trend Report","Error encountered while sharing report!")})}}},{key:"showSuccess",value:function(){return this._modalService.create({nzContent:Im,nzComponentParams:{emailIds:this.emailIds,isVital:this.isVital},nzWidth:"800px",nzBodyStyle:{padding:"30px",borderRadius:"15px",backgroundColor:"#f2f2f2"},nzFooter:null})}},{key:"getShortDate",value:function(t){return this._datePipe.transform(t,"yyyy-MM-dd")}},{key:"generateShareObject",value:function(){return{receiverEmailIds:this.emailIds,patientIds:this.patientIds,reportType:this.reportType,references:{startDate:this.fromDate,endDate:this.toDate,subject:this.subject,note:this.note,vitalType:this.vitalType,formBlueprintId:this.formBlueprintId,includeTMS:!0,includeVitals:!0,includeCMT:!0,includeNotes:!0,noteStartDate:this.fromDateInMillis,noteEndDate:this.toDateInMillis,cmtStart:this.fromDateInMillis,cmtEnd:this.toDateInMillis}}}}]),t}()).\u0275fac=function(t){return new(t||Am)(_.Rb(Ze.a),_.Rb(Bh.a),_.Rb(V.b),_.Rb(O.e),_.Rb(h.e),_.Rb(O.f))},Am.\u0275cmp=_.Lb({type:Am,selectors:[["app-share-trend-report"]],inputs:{dateRange:"dateRange",type:"type",tenantName:"tenantName",context:"context",contextName:"contextName",patientIds:"patientIds"},features:[_.Cb([h.e])],decls:42,vars:41,consts:[[1,"modal-title"],[1,"info"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24",1,"custom-dropdown"],["nzPlaceHolder","Subject",3,"ngModel","ngModelChange"],["nzValue","Vital Trend Report","nzLabel","Vital Trend Report",4,"ngIf"],["nzValue","Assessment Trend Report","nzLabel","Assessment Trend Report",4,"ngIf"],["nzValue","Notification from Cooey Health","nzLabel","Notification from Cooey Health"],["nzValue","Escalation from Cooey Health","nzLabel","Escalation from Cooey Health"],["nzValue","CUSTOM","nzLabel","Custom"],[1,"mail"],["nz-row","",3,"nzGutter","hidden"],["nz-col","","nzSpan","24"],["required","","nz-input","","placeholder","Subject","id","subjectModel","name","subjectModel",3,"ngModel","ngClass","ngModelChange"],["subjectModel","ngModel"],["nz-row","",3,"nzGutter",4,"ngIf"],["id","emailModel","name","emailModel","nzMode","tags","nzPlaceHolder","Email IDs",3,"ngModel","nzCustomTemplate","ngModelChange"],["emailModel","ngModel"],["defaultTemplate",""],[1,"preview-area"],["required","","rows","6","nz-input","","id","noteModel","name","noteModel",3,"placeholder","ngModel","ngClass","ngModelChange"],["noteModel","ngModel"],["nz-row","","nzAlign","middle","nzJustify","end",1,"button-area",3,"nzGutter"],["nz-col",""],["nz-button","","nzType","primary",3,"nzLoading","click"],["nzValue","Vital Trend Report","nzLabel","Vital Trend Report"],["nzValue","Assessment Trend Report","nzLabel","Assessment Trend Report"],["nz-typography","","nzType","danger"],[3,"ngClass"]],template:function(t,e){if(1&t&&(_.Xb(0,"div"),_.Xb(1,"strong",0),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"div",1),_.Xb(5,"p"),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Wb(),_.Xb(8,"div",2),_.Xb(9,"div",3),_.Xb(10,"nz-select",4),_.ec("ngModelChange",function(t){return e.subjectType=t})("ngModelChange",function(t){return e.subject=t}),_.Vc(11,Dm,1,0,"nz-option",5),_.Vc(12,ym,1,0,"nz-option",6),_.Sb(13,"nz-option",7),_.Sb(14,"nz-option",8),_.Sb(15,"nz-option",9),_.Wb(),_.Wb(),_.Wb(),_.Xb(16,"div",10),_.Xb(17,"div",11),_.Xb(18,"div",12),_.Xb(19,"input",13,14),_.ec("ngModelChange",function(t){return e.subject=t}),_.Wb(),_.Wb(),_.Wb(),_.Vc(21,Em,4,2,"div",15),_.Xb(22,"div",2),_.Xb(23,"div",12),_.Xb(24,"nz-select",16,17),_.ec("ngModelChange",function(t){return e.emailIds=t})("ngModelChange",function(){return e.validate()}),_.Wb(),_.Vc(26,Tm,2,4,"ng-template",null,18,_.Wc),_.Wb(),_.Wb(),_.Vc(28,zm,4,2,"div",15),_.Vc(29,_m,4,2,"div",15),_.Wb(),_.Xb(30,"div",19),_.Xb(31,"div",2),_.Xb(32,"div",12),_.Xb(33,"textarea",20,21),_.ec("ngModelChange",function(t){return e.note=t}),_.jc(35,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Vc(36,Om,4,2,"div",15),_.Xb(37,"div",22),_.Xb(38,"div",23),_.Xb(39,"button",24),_.ec("click",function(){return e.sendMail()}),_.Xc(40),_.jc(41,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(20),i=_.Ic(27),a=_.Ic(34);_.Db(2),_.Yc(_.kc(3,24,e.header)),_.Db(4),_.Yc(_.kc(7,26,"SHARE_REPORT.GENERATE_INFO")),_.Db(2),_.rc("nzGutter",_.xc(32,Cm)),_.Db(2),_.rc("ngModel",e.subjectType),_.Db(1),_.rc("ngIf","vital"==e.type),_.Db(1),_.rc("ngIf","assessment"==e.type),_.Db(5),_.rc("nzGutter",_.xc(33,Cm))("hidden","CUSTOM"!==e.subjectType),_.Db(2),_.rc("ngModel",e.subject)("ngClass",_.yc(34,Pm,((null==n?null:n.dirty)||(null==n?null:n.touched))&&(null==n?null:n.invalid)&&!(null==n||!n.errors.required))),_.Db(2),_.rc("ngIf",(null==n?null:n.invalid)&&((null==n?null:n.dirty)||(null==n?null:n.touched))&&(null==n?null:n.errors.required)),_.Db(1),_.rc("nzGutter",_.xc(36,Cm)),_.Db(2),_.rc("ngModel",e.emailIds)("nzCustomTemplate",i),_.Db(4),_.rc("ngIf",!!e.errors.includes("INVALID_EMAIL")),_.Db(1),_.rc("ngIf",!!e.errors.includes("INVALID_EMAIL_FORMAT")),_.Db(2),_.rc("nzGutter",_.xc(37,Cm)),_.Db(2),_.sc("placeholder",_.kc(35,28,"ASSESSMENT.TYPE_MSG")),_.rc("ngModel",e.note)("ngClass",_.yc(38,Pm,((null==a?null:a.dirty)||(null==a?null:a.touched))&&(null==a?null:a.invalid)&&!(null==a||!a.errors.required))),_.Db(3),_.rc("ngIf",(null==a?null:a.invalid)&&((null==a?null:a.dirty)||(null==a?null:a.touched))&&(null==a?null:a.errors.required)),_.Db(1),_.rc("nzGutter",_.xc(40,Cm)),_.Db(2),_.rc("nzLoading",e.loading),_.Db(1),_.Yc(_.kc(41,30,"PATIENTS.GENERATEREPORTSTART"))}},directives:[Z.c,Z.a,Y.d,v.u,v.x,h.q,Y.a,on.b,v.d,v.C,h.o,M.a,A.a,P.a,H.a],pipes:[Qt.a],styles:[".modal-title[_ngcontent-%COMP%]{padding-left:8px;font:normal normal 700 14px/19px Nunito;border-left:2px solid var(--primary-color)}.info[_ngcontent-%COMP%]{margin-top:8px}.button-area[_ngcontent-%COMP%]{margin-top:16px!important}"]}),Am),Wm=((Mm=function(){function t(e){b(this,t),this._modalService=e}return d(t,[{key:"createModal",value:function(t,e,n,i,a,r){return this._modalService.create({nzContent:Nm,nzComponentParams:{dateRange:t,type:e,context:n,contextName:i,tenantName:a,patientIds:r},nzWidth:"800px",nzBodyStyle:{padding:"30px",borderRadius:"15px",backgroundColor:"#f2f2f2"},nzFooter:null})}}]),t}()).\u0275fac=function(t){return new(t||Mm)(_.bc(O.f))},Mm.\u0275prov=_.Nb({token:Mm,factory:Mm.\u0275fac,providedIn:"root"}),Mm),Rm=o("zgU5");function xm(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-option",16),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",n)("nzLabel",null==n?null:n.label)}}function km(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",12),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"div",13),_.Xb(5,"nz-select",14),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().vitalFilter=t})("ngModelChange",function(){return _.Lc(n),_.ic().contextTypeChanged()}),_.jc(6,"translate"),_.Vc(7,xm,2,2,"ng-container",15),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(2),_.Zc(" ",_.kc(3,5,"PARAMETERS.TITLE")," "),_.Db(3),_.tc("nzPlaceHolder"," ",_.kc(6,7,"VITAL.SELECT_VITAL")," "),_.rc("nzLoading",i.loadingVitals)("ngModel",i.vitalFilter),_.Db(2),_.rc("ngForOf",i.vitalBlueprints)}}function wm(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-option",16),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",n)("nzLabel",null==n?null:n.title)}}function Vm(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Xb(1,"div",17),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"div",13),_.Xb(5,"nz-select",14),_.ec("ngModelChange",function(t){return _.Lc(n),_.ic().formId=t})("ngModelChange",function(){return _.Lc(n),_.ic().contextTypeChanged()}),_.jc(6,"translate"),_.Vc(7,wm,2,2,"ng-container",15),_.Wb(),_.Wb(),_.Ub()}if(2&t){var i=_.ic();_.Db(2),_.Zc(" ",_.kc(3,5,"ASSESSMENT.TITLE")," "),_.Db(3),_.tc("nzPlaceHolder"," ",_.kc(6,7,"Select Assessment Type")," "),_.rc("nzLoading",i.loadingForms)("ngModel",i.formId),_.Db(2),_.rc("ngForOf",i.formblueprints)}}var Lm,Fm=((Lm=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l,s,c,u){var d;return b(this,i),(d=n.call(this))._activatedRoute=t,d._translationService=e,d._vitalBlueprintsService=a,d._patientUrlService=r,d._formsService=o,d._dataSharingService=l,d._shareTrendReportModalService=s,d._datePipe=c,d._subTenatToggleHelper=u,d.dateRange=[],d.today=new Date,d.dateFormat="dd MMM yyyy",d.listOfAllPatients=[],d.patientRequests$=new hm.a,d.checked=!1,d.indeterminate=!1,d.listOfCurrentPageData=[],d.listOfData=[],d.setOfCheckedId=new Set,d.disableButton=!0,d.disabledDate=function(t){return Object(On.a)(t,d.today)>0},d.onPrimaryAction=function(t){return d.generateReport()},d.setupReportType(),d}return d(i,[{key:"setupReportType",value:function(){var t=this;this._activatedRoute.params.forEach(function(e){t.type=e.type})}},{key:"ngOnInit",value:function(){var t=Object(gm.a)(new Date,7),e=Object(gm.a)(new Date,14),n=Object(gm.a)(new Date,20),i=Object(gm.a)(new Date,30);this.ranges={"Last 7 days":[t,new Date],"Last 14 days":[e,new Date],"Last 20 days":[n,new Date],"Last 30 days":[i,new Date]},this.dateRange=[Object(gm.a)(new Date,30),new Date],this._subTenatToggleHelper.setRequestTenantId(),this.getTranslatedStrings(),this.subscribeToActivatedRoute(),this.updateContextData(),this.onSubTenantChange()}},{key:"onSubTenantChange",value:function(){var t=this;this._dataSharingService.onSubTenantChange().pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){t.updateContextData()})}},{key:"subscribeToActivatedRoute",value:function(){var t=this;this.activatedRoute.queryParams.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){var n,i,a,r=t._patientUrlService.getParameterValue("d1"),o=t._patientUrlService.getParameterValue("d2");r&&o&&(t.dateRange=[r,o]),t.filter=t._patientUrlService.getParameterValue("filter"),t.vitalType=t._patientUrlService.getParameterValue("vitalFilter"),t.assessmentId=t._patientUrlService.getParameterValue("assessmentFilter"),t.vitalFilter=null===(n=t.vitalBlueprints)||void 0===n?void 0:n.find(function(e){return e.type===t.vitalType}),t.formId=null===(i=t.formblueprints)||void 0===i?void 0:i.find(function(e){return e.id===t.assessmentId}),t.vitalType||t.assessmentId?t.getPatientsList():null===(a=t._bulkListComponent)||void 0===a||a.clearAll()})}},{key:"getTranslatedStrings",value:function(){var t,n=this;this.LAST_DAYS_LABEL="",this._translationService.get("REPORT.META_BASE_REPORTS.SELECT_LAST_DAYS").subscribe(function(t){return n.LAST_DAYS_LABEL=t}),(t=this._translationService).getMultiple.apply(t,e($e.STRINGS)).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){n.translatedStrings=t})}},{key:"updateContextData",value:function(){var t=this;switch(this.type){case"vital":this.title="BULK_ACTION.GENERATE_VITAL_REPORT",this.actionHint="BULK_ACTION.VITAL_ACTION_HINT",this.defaultHint="BULK_ACTION.VITAL_DEFAULT_TEXT",this.loadTenantBlueprint();break;case"assessment":this.title="BULK_ACTION.GENERATE_ASSESSMENT_REPORT",this.actionHint="BULK_ACTION.ASSESSMENT_ACTION_HINT",this.defaultHint="BULK_ACTION.ASSESSMENT_DEFAULT_TEXT",this.loadFormBlueprint()}this._dataSharingService.tenantSettings.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(e){t.tenantName=null==e?void 0:e.tenantName})}},{key:"loadTenantBlueprint",value:function(){var t=this;this.loadingVitals=!0,this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(function(e){var n;t.vitalBlueprints=e.filter(function(t){return t.active}),t.vitalBlueprints.sort(function(t,e){return t.label.localeCompare(e.label)}),t.loadingVitals=!1,t.vitalFilter=null===(n=t.vitalBlueprints)||void 0===n?void 0:n.find(function(e){return e.type===t.vitalType}),t.getPatientsList()})}},{key:"loadFormBlueprint",value:function(){var t=this;this.loadingForms=!0,this._formsService.getForms(0,100,"").subscribe(function(e){var n;t.formblueprints=[],e.data.forms.obj.forEach(function(e){e.type===vm.e.SCORED_ASSESSMENT&&t.formblueprints.push({id:e._id,title:e.title})}),t.loadingForms=!1,t.formId=null===(n=t.formblueprints)||void 0===n?void 0:n.find(function(e){return e.id===t.assessmentId}),t.getPatientsList()},function(){t.loadingForms=!1})}},{key:"getLastDays",value:function(t){return this.LAST_DAYS_LABEL.replace("{DAYS_COUNT}","".concat(t))}},{key:"dateChanged",value:function(t){this._bulkListComponent.clearAll(),this.startDateStr=this._datePipe.transform(t[0],"yyyy-MM-dd"),this.endDateStr=this._datePipe.transform(t[1],"yyyy-MM-dd"),this.getPatientsList()}},{key:"refreshCheckedStatus",value:function(){var t,e;this.checked=this.setOfCheckedId.size>0&&this.listOfAllPatients.length==this.setOfCheckedId.size,this.indeterminate=!this.checked&&this.setOfCheckedId.size>0,this.disableButton=!(((null===(t=this.vitalFilter)||void 0===t?void 0:t.type)||(null===(e=this.formId)||void 0===e?void 0:e.id))&&this.setOfCheckedId.size>0)}},{key:"contextTypeChanged",value:function(){var t,e;switch(this.type){case"vital":this.filter=Oa.a.VITALS_ACTIVITY,this._patientUrlService.setParameter({filter:this.filter,vitalFilter:null===(t=this.vitalFilter)||void 0===t?void 0:t.type},!1,!0);break;case"assessment":this.filter=Oa.a.ASSESSMENT_ACTIVITY,this._patientUrlService.setParameter({filter:this.filter,assessmentFilter:null===(e=this.formId)||void 0===e?void 0:e.id},!1,!0)}}},{key:"getPatientsList",value:function(){var t,e,n;null==this.vitalFilter&&null==this.formId||0==(null===(t=this.dateRange)||void 0===t?void 0:t.length)||this._bulkListComponent.getPatientsList({dateRange:this.dateRange,filter:this.filter,vitalFilter:null===(e=this.vitalFilter)||void 0===e?void 0:e.type,assessmentFilter:null===(n=this.formId)||void 0===n?void 0:n.id})}},{key:"generateReport",value:function(){var t,e,n,i,a=this,r=(null===(t=this.vitalFilter)||void 0===t?void 0:t.type)||(null===(e=this.formId)||void 0===e?void 0:e.id),o=(null===(n=this.vitalFilter)||void 0===n?void 0:n.label)||(null===(i=this.formId)||void 0===i?void 0:i.title);this._shareTrendReportModalService.createModal(this.dateRange,this.type,r,o,this.tenantName,Array.from(this.setOfCheckedId)).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){t&&(a.vitalFilter=null,a.formId=null,a._bulkListComponent.clearAll(),a._patientUrlService.setParameter({filter:null,vitalFilter:null,assessmentFilter:null},!0,!0))})}},{key:"updateSelectedPatients",value:function(t){this.setOfCheckedId=t,this.refreshCheckedStatus()}},{key:"updatePatientList",value:function(t){this.listOfAllPatients=t}},{key:"onSecondaryAction",value:function(t){null!=this._bulkListComponent&&this._bulkListComponent.clearPatientSelection(),this.setOfCheckedId.clear()}}]),i}(D.a)).\u0275fac=function(t){return new(t||Lm)(_.Rb(m.a),_.Rb(Ze.a),_.Rb(Zb.a),_.Rb(Ke.a),_.Rb(Pn.a),_.Rb(Be.a),_.Rb(Wm),_.Rb(h.e),_.Rb(Rm.a))},Lm.\u0275cmp=_.Lb({type:Lm,selectors:[["app-patient-bulk-trend-report"]],viewQuery:function(t,e){var n;1&t&&_.ed(mm.a,1),2&t&&_.Hc(n=_.fc())&&(e._bulkListComponent=n.first)},features:[_.Cb([h.e,xa.a]),_.Ab],decls:17,vars:22,consts:[["title","dashboard",3,"defaultTitle","isSearchEnabled","isActionEnabled"],[1,"container"],["nz-row","",1,"top-row"],["nz-col","","nzFlex","1"],["nz-row","","nzAlign","middle"],["nz-col","","nzFlex","35px"],["nz-col","","nzFlex","280px"],[3,"ngModel","nzDisabledDate","nzFormat","nzRanges","ngModelChange"],[4,"ngIf"],["nz-row","",1,"top-row",3,"nzGutter"],["nz-col","",3,"nzSpan"],["secondaryActionText","Clear Selection",3,"hideActionItems","tableActionHint","defaultHint","primaryActionText","onUserSelectionChange","onPatientListUpdated","onPrimaryAction","onSecondaryAction"],["nz-col","","nzFlex","75px"],["nz-col","","nzFlex","250px"],["id","blueprint-selector",3,"nzLoading","ngModel","nzPlaceHolder","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-col","","nzFlex","80px"]],template:function(t,e){1&t&&(_.Sb(0,"app-header",0),_.jc(1,"translate"),_.Xb(2,"div",1),_.Xb(3,"div",2),_.Xb(4,"div",3),_.Xb(5,"div",4),_.Xb(6,"div",5),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Xb(9,"div",6),_.Xb(10,"nz-range-picker",7),_.ec("ngModelChange",function(t){return e.dateRange=t})("ngModelChange",function(t){return e.dateChanged(t)}),_.Wb(),_.Wb(),_.Vc(11,km,8,9,"ng-container",8),_.Vc(12,Vm,8,9,"ng-container",8),_.Wb(),_.Wb(),_.Wb(),_.Xb(13,"div",9),_.Xb(14,"div",10),_.Xb(15,"app-bulk-patient-list",11),_.ec("onUserSelectionChange",function(t){return e.updateSelectedPatients(t)})("onPatientListUpdated",function(t){return e.updatePatientList(t)})("onPrimaryAction",function(t){return e.onPrimaryAction(t)})("onSecondaryAction",function(t){return e.onSecondaryAction(t)}),_.jc(16,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t&&(_.sc("defaultTitle",_.kc(1,16,e.title)),_.rc("isSearchEnabled",!1)("isActionEnabled",!1),_.Db(7),_.Zc(" ",_.kc(8,18,"COMMON.DATE")," "),_.Db(3),_.rc("ngModel",e.dateRange)("nzDisabledDate",e.disabledDate)("nzFormat",e.dateFormat)("nzRanges",e.ranges),_.Db(1),_.rc("ngIf","vital"==e.type),_.Db(1),_.rc("ngIf","assessment"==e.type),_.Db(1),_.rc("nzGutter",64),_.Db(1),_.rc("nzSpan",24),_.Db(1),_.sc("primaryActionText",_.kc(16,20,"PATIENTS.GENERATEREPORTSTART")),_.rc("hideActionItems",!0)("tableActionHint",e.actionHint)("defaultHint",e.defaultHint))},directives:[L.a,Z.c,Z.a,ge.a,ge.c,v.u,v.x,h.q,mm.a,Y.d,h.p,Y.a],pipes:[Qt.a],styles:["[_nghost-%COMP%]{width:90%}h3[_ngcontent-%COMP%]{margin-bottom:10px}nz-select[_ngcontent-%COMP%]{display:block;width:250px}p[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:10px}nz-range-picker[_ngcontent-%COMP%]{width:250px}.input-label[_ngcontent-%COMP%]{display:block;color:var(--tertiary-color);line-height:2.5}app-patient-searcher[_ngcontent-%COMP%]{margin-bottom:20px}[_nghost-%COMP%]     app-patient-searcher nz-select{display:block;width:420px}.date-range-select[_ngcontent-%COMP%]{max-width:250px;display:flex;flex-direction:row;align-items:baseline;justify-content:space-between}[_nghost-%COMP%]     .ant-checkbox-wrapper{padding-left:16px;padding-right:8px;border-spacing:0!important}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}.selected-info[_ngcontent-%COMP%]{padding-left:16px}.top-row[_ngcontent-%COMP%]{margin-top:10px}"]}),Lm),Um=o("GMnC"),jm=o("M34a"),Ym=o("/j2M"),Bm=o("tahh"),Hm=o("OEtX"),Gm=["chart"];function Zm(t,e){1&t&&_.Sb(0,"app-icons",67)}function $m(t,e){1&t&&(_.Xb(0,"strong",68),_.Xc(1,"Showing alert raised for Assessment score"),_.Wb())}function qm(t,e){1&t&&(_.Xb(0,"strong",68),_.Xc(1,"This alert has been closed"),_.Wb())}function Km(t,e){if(1&t&&(_.Xb(0,"nz-table",69),_.Xb(1,"tr",70),_.Xb(2,"th",71),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"th",72),_.Xc(6," Assessment "),_.Wb(),_.Xb(7,"th",72),_.Xc(8," Score "),_.Wb(),_.Xb(9,"th",72),_.Xc(10," Risk "),_.Wb(),_.Wb(),_.Xb(11,"tr",73),_.Xb(12,"td",71),_.Xc(13),_.jc(14,"date"),_.Wb(),_.Xb(15,"td",72),_.Xc(16),_.Wb(),_.Xb(17,"td",74),_.Xc(18),_.Wb(),_.Xb(19,"td",72),_.Xc(20),_.Wb(),_.Wb(),_.Sb(21,"br"),_.Wb()),2&t){var n=_.ic();_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(4,13,"PARAMETERS.MEASUREDON")," "),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(3),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.lc(14,15,null==n.alertData?null:n.alertData.createdOn,"MMM dd yyyy, hh:mm a")," "),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",null==n.alertData?null:n.alertData.alertMessageParameters.FORM_NAME," "),_.Db(1),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",n.score," "),_.Db(1),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",n.risk," ")}}var Qm=function(){return{top:"270px",left:"200px",position:"absolute"}};function Jm(t,e){if(1&t&&(_.Xb(0,"nz-table",75),_.Xb(1,"tr",70),_.Xb(2,"th",71),_.Xc(3),_.jc(4,"translate"),_.Wb(),_.Xb(5,"th",72),_.Xc(6," Assessment "),_.Wb(),_.Xb(7,"th",72),_.Xc(8," Score "),_.Wb(),_.Xb(9,"th",72),_.Xc(10," Risk "),_.Wb(),_.Wb(),_.Xb(11,"tr",73),_.Xb(12,"td",71),_.Xc(13),_.jc(14,"date"),_.Wb(),_.Xb(15,"td",72),_.Xc(16),_.Wb(),_.Xb(17,"td",74),_.Xc(18),_.Wb(),_.Xb(19,"td",72),_.Xc(20),_.Wb(),_.Wb(),_.Sb(21,"br"),_.Wb()),2&t){var n=_.ic();_.rc("position",_.xc(19,Qm)),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(1),_.Zc(" ",_.kc(4,14,"PARAMETERS.MEASUREDON")," "),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-header-grey":"table-header-green"),_.Db(3),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",_.lc(14,16,null==n.alertData?null:n.alertData.createdOn,"MMM dd yyyy, hh:mm a")," "),_.Db(2),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",null==n.alertData?null:n.alertData.alertMessageParameters.FORM_NAME," "),_.Db(1),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",n.score," "),_.Db(1),_.rc("ngClass","CLOSED"==(null==n.alertData?null:n.alertData.status)?"table-body-grey":"table-body-white"),_.Db(1),_.Zc(" ",n.risk," ")}}function tS(t,e){if(1&t&&(_.Vb(0),_.Sb(1,"nz-option",76),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.rc("nzValue",null==n?null:n.formId)("nzLabel",null==n?null:n.formName)}}function eS(t,e){1&t&&(_.Xb(0,"span",78),_.Xc(1," ( "),_.Sb(2,"span",79),_.Xc(3," Primary )"),_.Wb())}function nS(t,e){1&t&&(_.Vb(0),_.Xc(1,",\xa0"),_.Ub())}function iS(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"strong"),_.Xc(2),_.Wb(),_.Vc(3,eS,4,0,"span",77),_.Vc(4,nS,2,0,"ng-container",45),_.jc(5,"keyvalue"),_.Ub()),2&t){var n,i=e.$implicit,a=e.index,r=_.ic();_.Db(2),_.Zc("",i.key," "),_.Db(1),_.rc("ngIf","PRIMARY"==i.value),_.Db(1),_.rc("ngIf",a!==(null==(n=_.kc(5,3,r.staffNameTypeMap))?null:n.length)-1)}}function aS(t,e){if(1&t&&(_.Vb(0),_.Xc(1),_.Ub()),2&t){var n=e.$implicit;_.Db(1),_.Zc(" ",n,"; ")}}function rS(t,e){if(1&t&&_.Sb(0,"nz-step",97),2&t){var n=e.index;_.ic();var i=_.Ic(3),a=_.Ic(5),r=_.ic(2);_.rc("nzDescription",n==r.riskIndex?i:null)("nzTitle",n==r.riskIndex?a:"")}}function oS(t,e){1&t&&_.Sb(0,"app-icons",98)}function lS(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xc(1),_.Wb(),_.Xc(2)),2&t){var n=_.ic(3);_.Db(1),_.Yc(null==n.assessmentTrend||null==n.assessmentTrend.snapshot||null==n.assessmentTrend.snapshot.forms[0]?null:n.assessmentTrend.snapshot.forms[0].score),_.Db(1),_.Zc(": ",n.lastMeasuredRisk,"")}}function sS(t,e){if(1&t){var n=_.Yb();_.Xb(0,"nz-steps",86),_.ec("nzIndexChange",function(t){return _.Lc(n),_.ic(2).onIndexChange(t)}),_.Vc(1,rS,1,2,"nz-step",94),_.Vc(2,oS,1,0,"ng-template",null,95,_.Wc),_.Vc(4,lS,3,2,"ng-template",null,96,_.Wc),_.Wb()}if(2&t){var i=_.ic(2);_.rc("nzCurrent",i.index)("nzType",i.default),_.Db(1),_.rc("ngForOf",i.range)}}function cS(t,e){if(1&t&&_.Sb(0,"nz-step",99),2&t){var n=e.$implicit;_.uc("nzTitle","",null==n?null:n.startRange," - ",null==n?null:n.endRange,"")}}function uS(t,e){if(1&t&&(_.Xb(0,"div",91),_.Xb(1,"strong"),_.Xc(2),_.Wb(),_.Xc(3),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.ad("",n.startRange,"-",n.endRange," "),_.Db(1),_.Zc(" : ",n.identification," ")}}function dS(t,e){if(1&t&&(_.Xb(0,"div",21),_.Vc(1,uS,4,3,"div",100),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngForOf",n)}}function bS(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div"),_.Xb(1,"div",80),_.Xb(2,"div",81),_.Xb(3,"label",82),_.Xb(4,"strong"),_.Xc(5),_.Wb(),_.Wb(),_.Xb(6,"p",83),_.Xc(7),_.jc(8,"date"),_.Wb(),_.Xb(9,"div",84),_.Vc(10,sS,6,3,"nz-steps",85),_.Xb(11,"nz-steps",86),_.ec("nzIndexChange",function(t){return _.Lc(n),_.ic().onIndexChange(t)}),_.Vc(12,cS,1,2,"nz-step",87),_.Wb(),_.Wb(),_.Wb(),_.Sb(13,"div",88),_.Xb(14,"div",89),_.Xb(15,"h5",90),_.Xc(16,"Reference Range"),_.Wb(),_.Xb(17,"h4"),_.Xc(18),_.Xb(19,"span",91),_.Xc(20,"Score between"),_.Wb(),_.Wb(),_.Xb(21,"div",92),_.Vc(22,dS,2,1,"div",93),_.Wb(),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(5),_.Zc("Last Assessed ",null==i.assessmentTrend||null==i.assessmentTrend.snapshot?null:i.assessmentTrend.snapshot.assessment," score "),_.Db(2),_.Yc(_.lc(8,8,null==i.assessmentTrend||null==i.assessmentTrend.snapshot||null==i.assessmentTrend.snapshot.forms[0]?null:i.assessmentTrend.snapshot.forms[0].assessedOn,"MMMM d y")),_.Db(3),_.rc("ngIf",null!=(null==i.assessmentTrend||null==i.assessmentTrend.snapshot||null==i.assessmentTrend.snapshot.forms[0]?null:i.assessmentTrend.snapshot.forms[0].score)),_.Db(1),_.rc("nzCurrent",i.index)("nzType",i.default),_.Db(1),_.rc("ngForOf",i.range),_.Db(6),_.Zc("",null==i.assessmentTrend||null==i.assessmentTrend.snapshot?null:i.assessmentTrend.snapshot.assessment," "),_.Db(4),_.rc("ngForOf",i.refRange)}}function pS(t,e){if(1&t&&_.Sb(0,"nz-step",97),2&t){var n=e.index;_.ic();var i=_.Ic(12),a=_.Ic(14),r=_.ic();_.rc("nzDescription",n==r.riskIndex?i:null)("nzTitle",n==r.riskIndex?a:"")}}function fS(t,e){1&t&&_.Sb(0,"app-icons",98)}function gS(t,e){if(1&t&&(_.Xb(0,"strong"),_.Xc(1),_.Wb(),_.Xc(2)),2&t){var n=_.ic(2);_.Db(1),_.Yc(null==n.assessmentTrend||null==n.assessmentTrend.snapshot||null==n.assessmentTrend.snapshot.forms[0]?null:n.assessmentTrend.snapshot.forms[0].score),_.Db(1),_.Zc(": ",n.lastMeasuredRisk,"")}}function hS(t,e){if(1&t&&_.Sb(0,"nz-step",99),2&t){var n=e.$implicit;_.uc("nzTitle","",null==n?null:n.startRange," - ",null==n?null:n.endRange,"")}}function vS(t,e){if(1&t&&(_.Xb(0,"div",91),_.Xb(1,"strong"),_.Xc(2),_.Wb(),_.Xc(3),_.Wb()),2&t){var n=e.$implicit;_.Db(2),_.ad("",n.startRange,"-",n.endRange," "),_.Db(1),_.Zc(" : ",n.identification," ")}}function mS(t,e){if(1&t&&(_.Xb(0,"div",21),_.Vc(1,vS,4,3,"div",100),_.Wb()),2&t){var n=e.$implicit;_.Db(1),_.rc("ngForOf",n)}}function SS(t,e){if(1&t){var n=_.Yb();_.Xb(0,"div"),_.Xb(1,"div",80),_.Xb(2,"div",101),_.Xb(3,"label",82),_.Xb(4,"strong"),_.Xc(5),_.Wb(),_.Wb(),_.Xb(6,"p",83),_.Xc(7),_.jc(8,"date"),_.Wb(),_.Xb(9,"nz-steps",86),_.ec("nzIndexChange",function(t){return _.Lc(n),_.ic().onIndexChange(t)}),_.Vc(10,pS,1,2,"nz-step",94),_.Vc(11,fS,1,0,"ng-template",null,95,_.Wc),_.Vc(13,gS,3,2,"ng-template",null,96,_.Wc),_.Wb(),_.Xb(15,"nz-steps",86),_.ec("nzIndexChange",function(t){return _.Lc(n),_.ic().onIndexChange(t)}),_.Vc(16,hS,1,2,"nz-step",87),_.Wb(),_.Wb(),_.Wb(),_.Xb(17,"div",80),_.Xb(18,"div",102),_.Xb(19,"h5",90),_.Xc(20,"Reference Range"),_.Wb(),_.Xb(21,"h4"),_.Xc(22),_.Xb(23,"span",91),_.Xc(24,"Score between"),_.Wb(),_.Wb(),_.Xb(25,"div",92),_.Vc(26,mS,2,1,"div",93),_.Wb(),_.Wb(),_.Wb(),_.Wb()}if(2&t){var i=_.ic();_.Db(5),_.Zc("Last Assessed ",null==i.assessmentTrend||null==i.assessmentTrend.snapshot?null:i.assessmentTrend.snapshot.assessment," score "),_.Db(2),_.Yc(_.lc(8,10,null==i.assessmentTrend||null==i.assessmentTrend.snapshot||null==i.assessmentTrend.snapshot.forms[0]?null:i.assessmentTrend.snapshot.forms[0].assessedOn,"MMMM d y")),_.Db(2),_.rc("nzCurrent",i.index)("nzType",i.default),_.Db(1),_.rc("ngForOf",i.range),_.Db(5),_.rc("nzCurrent",i.index)("nzType",i.default),_.Db(1),_.rc("ngForOf",i.range),_.Db(6),_.Zc("",null==i.assessmentTrend||null==i.assessmentTrend.snapshot?null:i.assessmentTrend.snapshot.assessment," "),_.Db(4),_.rc("ngForOf",i.refRange)}}function IS(t,e){if(1&t&&(_.Xb(0,"h3",44),_.Xc(1),_.Wb()),2&t){var n=_.ic();_.Db(1),_.Yc(n.graphTitle)}}function DS(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",21),_.Xb(2,"div",106),_.Xb(3,"div",107),_.Xb(4,"div",21),_.Xb(5,"span",108),_.Xc(6),_.jc(7,"translate"),_.Wb(),_.Xb(8,"p",109),_.Xc(9),_.jc(10,"date"),_.Wb(),_.Wb(),_.Xb(11,"div",110),_.Xb(12,"span",111),_.Xc(13),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit;_.Db(6),_.Zc("",_.kc(7,3,"FORMS_TREND.TOTAL_ASSESSMENT_SCORE")," On"),_.Db(3),_.Yc(_.lc(10,5,n.accessedOn,"d MMMM, y")),_.Db(4),_.Yc(n.score)}}function yS(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",21),_.Xb(2,"div",112),_.Xb(3,"div",113),_.Xc(4,"Answer"),_.Wb(),_.Xb(5,"div",114),_.Xc(6,"Score"),_.Wb(),_.Wb(),_.Wb(),_.Ub()),2&t){var n=_.ic(2);_.Db(5),_.rc("nzFlex",1/n.overallAnswer.length+" 0 75px")}}function CS(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",21),_.Xb(2,"div",117),_.Xb(3,"div",113),_.Xc(4),_.Wb(),_.Xb(5,"div",118),_.Xc(6),_.Wb(),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit,i=_.ic().index,a=_.ic(2);_.Db(4),_.Yc(n[i].answer),_.Db(1),_.rc("nzFlex",1/a.overallAnswer.length+" 0 75px"),_.Db(1),_.Zc(" ",n[i].score," ")}}function ES(t,e){if(1&t&&(_.Vb(0),_.Xb(1,"div",43),_.Xb(2,"div",103),_.Xb(3,"div",115),_.Xb(4,"p"),_.Xc(5),_.Wb(),_.Wb(),_.Wb(),_.Xb(6,"div",21),_.Xb(7,"div",116),_.Vc(8,CS,7,3,"ng-container",25),_.Wb(),_.Wb(),_.Wb(),_.Ub()),2&t){var n=e.$implicit,i=_.ic(2);_.Db(5),_.Yc(n),_.Db(3),_.rc("ngForOf",i.overallAnswer)}}function XS(t,e){if(1&t&&(_.Xb(0,"div",13),_.Xb(1,"div"),_.Xb(2,"div",43),_.Xb(3,"div",103),_.Sb(4,"br"),_.Xb(5,"div",43),_.Xb(6,"h3",44),_.Xc(7),_.jc(8,"translate"),_.jc(9,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Sb(10,"div",104),_.Xb(11,"div",21),_.Xb(12,"div",43),_.Vc(13,DS,14,8,"ng-container",25),_.Wb(),_.Wb(),_.Wb(),_.Xb(14,"div",43),_.Xb(15,"div",105),_.Xc(16," Assessment Question "),_.Wb(),_.Xb(17,"div",21),_.Xb(18,"div",43),_.Vc(19,yS,7,1,"ng-container",25),_.Wb(),_.Wb(),_.Wb(),_.Vc(20,ES,9,2,"ng-container",25),_.Wb(),_.Sb(21,"br"),_.Wb()),2&t){var n=_.ic();_.Db(7),_.ad(" ",_.kc(8,5,"FORMS_TREND.ASSESSMENT_QUESTION")," and ",_.kc(9,7,"FORMS_TREND.SCORE")," "),_.Db(6),_.rc("ngForOf",n.totalAllScore),_.Db(6),_.rc("ngForOf",n.overallAnswer),_.Db(1),_.rc("ngForOf",n.onlyQuestions)}}function TS(t,e){1&t&&(_.Xb(0,"button",119),_.Sb(1,"app-icons",120),_.Wb())}function zS(t,e){if(1&t){var n=_.Yb();_.Xb(0,"button",121),_.ec("click",function(){return _.Lc(n),_.ic().closeAlert()}),_.Xc(1),_.jc(2,"translate"),_.Wb()}2&t&&(_.Db(1),_.Zc(" ",_.kc(2,1,"MARKED_AS_CLOSED")," "))}function _S(t,e){if(1&t&&(_.Xb(0,"button",122),_.Xc(1," Add CMT"),_.Sb(2,"i",123),_.Wb()),2&t){_.ic();var n=_.Ic(189);_.rc("nzDropdownMenu",n)("nzSize","large")}}function OS(t,e){1&t&&_.Tb(0)}function MS(t,e){1&t&&(_.Vb(0),_.Xc(1,"TMS"),_.Ub())}function AS(t,e){1&t&&(_.Vb(0),_.Xc(1,"BHI-CMT"),_.Ub())}function PS(t,e){1&t&&(_.Vb(0),_.Xc(1,"BHI-CMT"),_.Ub())}function NS(t,e){1&t&&(_.Vb(0),_.Xc(1,"CCM-CMT"),_.Ub())}function WS(t,e){if(1&t){var n=_.Yb();_.Vb(0),_.Vc(1,OS,1,0,"ng-container",45),_.Xb(2,"li",124),_.ec("click",function(){_.Lc(n);var t=e.$implicit;return _.ic().onCMTClick(t)}),_.Vc(3,MS,2,0,"ng-container",125),_.Vc(4,AS,2,0,"ng-container",125),_.Vc(5,PS,2,0,"ng-container",125),_.Vc(6,NS,2,0,"ng-container",125),_.Wb(),_.Ub()}if(2&t){var i=e.$implicit;_.Db(1),_.rc("ngIf",!(null!=i&&i.archived)),_.Db(1),_.rc("ngSwitch",null==i?null:i.type),_.Db(1),_.rc("ngSwitchCase","RPM"),_.Db(1),_.rc("ngSwitchCase","GENERAL"),_.Db(1),_.rc("ngSwitchCase","BHI"),_.Db(1),_.rc("ngSwitchCase","CCM")}}var RS,xS,kS,wS,VS=function(){return[32,6]},LS=function(){return[32,8]},FS=function(t){return{left:t}},US=((RS=function(t){r(i,t);var n=l(i);function i(t,e,a,r,o,l,s,c,u,d,p,f,g,h,v,m,S,I,D){var y;return b(this,i),(y=n.call(this))._datePipe=t,y._formTrendService=e,y._activatedRoute=a,y._notificationsService=r,y._episodesService=o,y._episodeService=l,y._formNamePipe=s,y._formNewService=c,y.translationService=u,y._patientsEventLogger=d,y._patientCommunicationModalService=p,y._patientsService=f,y._staffService=g,y._patientsModalsService=h,y._location=v,y._router=m,y._shareReportModalService=S,y._alertService=I,y._dataSharingServce=D,y.dateRange=[Object(Mn.a)(Date.now()),new Date],y.cmtDetails=[],y.isChartLoading=!0,y.columnNames=[],y.options={hAxis:{title:"Dates - Measured On",textStyle:{fontSize:12},direction:-1},curveType:"function",pointSize:5,width:(window.innerWidth-.25*window.innerWidth).toString(),height:450,legend:{position:"bottom"},selectionMode:"multiple",animation:{startup:!0,duration:1e3}},y.loadingAllForms=!1,y.listOfForms=[],y.strings=["FORMS_TREND.ASSESSED_ON","FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE","FORMS_TREND.ERROR_FETCHING_REPORT","MENU.PATIENTS","NOTE_ADDED_SUCCESSFULLY","COMMON.ALERT","ALERT.ALERT_CLOSED_SUCCESSFULLY"],y.notes=[],y.formName="GAD-7",y.onlyQuestions=[],y.overallQuestionanaire=[],y.answerScore=[],y.overallAnswer=[],y.finalAnswer=[],y.totalAllScore=[],y.questinarieDate=[],y.noData=!0,y.disabledDates=function(t){return Object(On.a)(new Date,t)<0},y.enableDateRangePicker=!1,y.includeCMT=!0,y._dataSharingServce.tenantSettings.subscribe(function(t){return y.tenantConfig=t}),y}return d(i,[{key:"ngOnInit",value:function(){this.patientId=this._activatedRoute.snapshot.queryParams.patientId,this.formBlueprintId=this._activatedRoute.snapshot.queryParams.blueprintId,this.formId=this._activatedRoute.snapshot.queryParams.formId,this.isGeneral=this._activatedRoute.snapshot.queryParams.fromGeneral,this._activatedRoute.snapshot.queryParams.episodeId?this.episodeId=this._activatedRoute.snapshot.queryParams.episodeId:this.getEpisodesData(),this._activatedRoute.snapshot.queryParams.alert?(this.alertId=this._activatedRoute.snapshot.queryParams.alert,this.updateAlert()):this.loadAllForms(),this.initTranslationStrings(),this.getPatientData(),this.getNotes(),this.getStaffResponse()}},{key:"initTranslationStrings",value:function(){var t,n=this;(t=this.translationService).getMultiple.apply(t,e(this.strings)).pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){n.translatedStrings=t})}},{key:"updateAlert",value:function(){var t=this;this._alertService.getAlertDetail(this.alertId).subscribe(function(e){if(t.alertData=e,t.alertFormId=null!=t.alertData.context||null!=t.alertData.contextId?t.alertData.contextId:t.alertData.alertMessageParameters.ENTITY_ID,t.alertFormId)t._formNewService.getSingleEvalForm(t.alertFormId).subscribe(function(e){var n=e.data;t.risk=n.identifiedRisk,t.score=n.evaluatedScore.toString(),t.formBlueprintId=n.parentFormId,t.loadAllForms()});else{var n=t.getAssessmentDetailsFromMessage(e.message);t.score=n.score,t.risk=n.risk,t.alertFormName=n.formName,t.loadAllForms()}},function(e){t._notificationsService.error("Error","Unable to load alert"),t.loadAllForms()})}},{key:"getAssessmentDetailsFromMessage",value:function(t){var e=t.match(/(.*)\sassessment score for (.*) is (.*) and risk is (.*)/);return e?{formName:e[1],score:e[3],risk:e[4]}:null}},{key:"getPatientData",value:function(){var t=this;this._patientsService.fetchPatientById(this.patientId).subscribe(function(e){t.patient=e,t.tenantId=e.tenantId,t.patientStatus=null==e?void 0:e.patientStatus})}},{key:"getFormAssessmentTrend",value:function(){var t=this;if(this.formBlueprintId){this.loading=!0,this.noData=!0,this.graphTitle=null,this.graphData=null,this.selection=null,this.riskIndex=0;var e=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),n=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._formTrendService.getAssessmentReport(this.patientId,this.formBlueprintId,e,n).subscribe(function(e){var n,i,a,r,o,l,s,c,u,d,b,p,f,g;if(t.assessmentTrend=e,t.range=null===(i=null===(n=t.assessmentTrend)||void 0===n?void 0:n.snapshot)||void 0===i?void 0:i.referenceRange,t.range.sort(function(t,e){return t.startRange-e.startRange}),null===(a=t.range)||void 0===a||a.forEach(function(e,n){var i,a,r,o=null===(r=null===(a=null===(i=t.assessmentTrend)||void 0===i?void 0:i.snapshot)||void 0===a?void 0:a.forms)||void 0===r?void 0:r[0];(null==o?void 0:o.score)>=e.startRange&&(null==o?void 0:o.score)<=e.endRange&&(t.riskIndex=n,t.lastMeasuredRisk=e.identification)}),t.rangeLength=t.range.length,t.refRange=t.range.map(function(e,n){return n%4==0?t.range.slice(n,n+4):null}).filter(function(t){return t}),t.adjustRange(),t.updateCMT(),(null===(r=null==e?void 0:e.snapshot)||void 0===r?void 0:r.forms.length)&&(t.reportWarning=""),0==(null===(o=null==e?void 0:e.snapshot)||void 0===o?void 0:o.forms.length))return t.reportWarning="".concat(null===(s=null===(l=t.assessmentTrend)||void 0===l?void 0:l.metaData)||void 0===s?void 0:s.patient," has not completed any assessment between these dates. Please select a different date range to view the details."),void(t.loading=!1);t.formId=null===(b=null===(d=null===(u=null===(c=t.assessmentTrend)||void 0===c?void 0:c.snapshot)||void 0===u?void 0:u.forms)||void 0===d?void 0:d[0])||void 0===b?void 0:b.id,t.populateGraphData(),t.noData=!(null===(g=null===(f=null===(p=t.assessmentTrend)||void 0===p?void 0:p.snapshot)||void 0===f?void 0:f.forms)||void 0===g?void 0:g.length),t.loading=!1},function(e){t.loading=!1,t._notificationsService.error("Form Trend Report",t.translatedStrings.get("FORMS_TREND.ERROR_FETCHING_REPORT"))})}}},{key:"adjustRange",value:function(){if(this.range.length>10){var t=Math.max(0,this.riskIndex-5),e=Math.min(this.range.length,this.riskIndex+5);e-t<10&&(0==t?e=t+10:t=e-10),this.range=this.range.slice(t,e),this.riskIndex=this.riskIndex-t}}},{key:"updateCMT",value:function(){var t;this.cmtDetails=(null===(t=this.assessmentTrend)||void 0===t?void 0:t.patientCommunications)||[]}},{key:"getEpisodesData",value:function(){var t=this;this._episodesService.getActiveEpisode(this.patientId,"GENERAL").subscribe(function(e){var n;(null==e?void 0:e.length)&&(t.episodeId=null===(n=e[0])||void 0===n?void 0:n.id)})}},{key:"getStaffResponse",value:function(){var t=this,e=new Map;this._staffService.fetchStaffMemberById(this.patientId).subscribe(function(n){var i,a,r,o;n&&(t.physicians=null==n?void 0:n.assignedUsers[w.a.PHYSICIAN].map(function(t){return t.fullName}).join(", "),t.monitoringStaffs=null==n?void 0:n.assignedUsers[w.a.MONITORING_STAFF].map(function(t){return[t.id,t.fullName]}),t.icdCodes=null===(a=null===(i=null==n?void 0:n.user)||void 0===i?void 0:i.healthInfo)||void 0===a?void 0:a.dxCodes.map(function(t){return(null==t?void 0:t.code)+", "+(null==t?void 0:t.description)}),t.monitoringStaffType=null===(r=null==n?void 0:n.user)||void 0===r?void 0:r.assignedStaffs.filter(function(t){return"MONITORING_STAFF"==t.roleType}).map(function(t){return[t.staffId,t.assignedStaffType]})),null===(o=t.monitoringStaffType)||void 0===o||o.forEach(function(t){e.set(t[0],t[1])}),t.staffNameTypeMap=new Map,t.monitoringStaffs.forEach(function(n){t.staffNameTypeMap.set(n[1],e.get(n[0]))})})}},{key:"onDateChange",value:function(){this.dateRange[0].setHours(0,0,0,0),this.dateRange[1].setHours(23,59,59,999),this.getFormAssessmentTrend(),this.getNotes()}},{key:"populateGraphData",value:function(){var t,e,n,i,a,r,o,l,s,c=this,u=null===(n=null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.snapshot)||void 0===e?void 0:e.forms)||void 0===n?void 0:n.map(function(t){return[c._datePipe.transform(t.assessedOn,"MMM d"),t.score]});this.columnNames=["Assessed On","Assessment Score"],this.graphOptions={titlePosition:"none",hAxis:{titleTextStyle:{bold:!0,italic:!1},direction:-1},vAxis:{title:this._formNamePipe.transform(null===(a=null===(i=this.assessmentTrend)||void 0===i?void 0:i.snapshot)||void 0===a?void 0:a.assessment),titleTextStyle:{bold:!0,italic:!1},gridlines:{count:u.size}},legend:{position:"none"},pointSize:10,interpolateNulls:!0,colors:["#666666"],selectionMode:"multiple"},this.graphData=u,this.graphTitle=this._datePipe.transform(null===(o=null===(r=this.assessmentTrend)||void 0===r?void 0:r.metaData)||void 0===o?void 0:o.startDate,"mediumDate")+" - "+this._datePipe.transform(null===(s=null===(l=this.assessmentTrend)||void 0===l?void 0:l.metaData)||void 0===s?void 0:s.endDate,"mediumDate")}},{key:"loadAllForms",value:function(){var t=this;this.loadingAllForms=!0,this._formNewService.getForms(0,100,"").subscribe(function(e){var n,i=[];e.data.forms.obj.forEach(function(t){"SMS_ASSESSMENT"!=t.type&&i.push({formId:t._id,formName:t.title})}),t.listOfForms=i.sort(function(t,e){return t.formName.localeCompare(e.formName)}),t.isGeneral||t.formBlueprintId||(t.formBlueprintId=null===(n=t.listOfForms)||void 0===n?void 0:n[0].formId),t.loadingAllForms=!1,t.refresh()},function(e){t.loadingAllForms=!1})}},{key:"refresh",value:function(){this.formId=null,this.getFormAssessmentTrend()}},{key:"goBack",value:function(){this._location.back()}},{key:"onCMTClick",value:function(t){var e,n,i,a=this;switch(this._patientsEventLogger.patientActionEvent(this.patientId,"add_cmt"),null==t?void 0:t.type){case Um.a.GENERAL:case Um.a.BHI:i=this.showBHICMT();break;case Um.a.CCM:this.showCCMCMT(null==t?void 0:t.id);break;case Um.a.RPM:this.showRPMCMT()}null===(n=null===(e=null==i?void 0:i.afterClose)||void 0===e?void 0:e.pipe(Object(Ve.a)(this.unsubscribed)))||void 0===n||n.subscribe(function(t){t&&a.refresh()})}},{key:"showBHICMT",value:function(){var t,e,n,i;return this._patientCommunicationModalService.createCMTModal(null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData)||void 0===e?void 0:e.patient,this.patientId,this.episodeId,Ye.a.CARE_MANAGEMENT_TIME,null,null,new Date(null===(i=null===(n=this.assessmentTrend)||void 0===n?void 0:n.metaData)||void 0===i?void 0:i.endDate).getTime())}},{key:"showCCMCMT",value:function(t){var e=this;this._episodeService.fetchActiveEpisodes(this.patientId,1,0,t,[Jd.a.IN_PROGRESS]).subscribe(function(n){var i,a;(null===(i=null==n?void 0:n.result)||void 0===i?void 0:i.length)?e._episodeService.fetchEpisodeDetails(null===(a=null==n?void 0:n.result[0])||void 0===a?void 0:a.id).subscribe(function(i){var a,r,o={id:e.patientId,name:null===(a=e.patient)||void 0===a?void 0:a.fullName,episode:{id:null===(r=null==n?void 0:n.result[0])||void 0===r?void 0:r.id,startDate:i.startDate,endDate:i.endDate,blueprintId:i.blueprintId,totalNonComplexTMSCompleted:i.patientComplianceCount[99490],totalNonComplexAdditionalTMSCompleted:i.patientComplianceCount[99439],totalNonComplexTMSPhysicianCompleted:i.patientComplianceCount[99491],totalComplexTMSCompleted:i.patientComplianceCount[99487],totalComplexAdditionalTMSCompleted:i.patientComplianceCount[99489]}};return e._patientCommunicationModalService.createCCMTMS(o,t,Ye.a.NON_COMPLEX_TMS)}):e._notificationsService.error("CCM Minutes","No active CCM episode found for this patient!")})}},{key:"showRPMCMT",value:function(){return this._patientCommunicationModalService.createTMSModal(this.patient,"","TMS",Ye.a.TREATMENT_MANAGEMENT_SERVICE,new Date)}},{key:"getNotes",value:function(){var t=this;this._patientsService.getNotes(this.patientId).subscribe(function(n){n&&n.length>0&&(t.notes=e(n.filter(function(e){return t.checkDateRange(e.updatedOn)||t.checkDateRange(e.createdOn)})))})}},{key:"checkDateRange",value:function(t){return t>=Object(jm.a)(this.dateRange[0]).getTime()&&t<=Object(jh.a)(this.dateRange[1]).getTime()}},{key:"onGraphReady",value:function(t){var e;(null===(e=this.graphData)||void 0===e?void 0:e.length)>0&&(null!=this.selection&&0!=this.selection.length||(this.selection=[{row:0,column:1}]),this.updateChartSelection())}},{key:"onGraphPointSelect",value:function(t){var e;this.selection=null===(e=null==t?void 0:t.selection)||void 0===e?void 0:e.slice(-3),this.updateChartSelection()}},{key:"updateChartSelection",value:function(){var t,e,n=this;this.onlyQuestions=[],this.overallQuestionanaire=[],this.overallAnswer=[],this.totalAllScore=[],null===(t=this.selection)||void 0===t||t.forEach(function(t){var e,i,a,r,o,l,s,c,u,d=t.row;n.currentAssessedOn=null===(a=null===(i=null===(e=n.assessmentTrend)||void 0===e?void 0:e.snapshot)||void 0===i?void 0:i.forms[d])||void 0===a?void 0:a.assessedOn,n.questionnaireData=null===(l=null===(o=null===(r=n.assessmentTrend)||void 0===r?void 0:r.snapshot)||void 0===o?void 0:o.forms[d])||void 0===l?void 0:l.questions;var b=null===(u=null===(c=null===(s=n.assessmentTrend)||void 0===s?void 0:s.snapshot)||void 0===c?void 0:c.forms[d])||void 0===u?void 0:u.score;n.overallAnswer.push(n.questionnaireData),n.totalAllScore.push({score:b,accessedOn:n.currentAssessedOn})}),null===(e=this.questionnaireData)||void 0===e||e.forEach(function(t){n.onlyQuestions.push(t.question)}),this.finalAnswer=this.overallAnswer.slice(0,1),this.chart.chart.setSelection(this.selection)}},{key:"addNotes",value:function(){var t,n,i=this;this._patientsModalsService.notes(this.patientId,null===(n=null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData)||void 0===n?void 0:n.patient,this.tenantId).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(t){null!=t&&(i.notes=[].concat(e(i.notes),[t]),i._notificationsService.success(i.translatedStrings.get("MENU.PATIENTS"),i.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY")))})}},{key:"getDateForReport",value:function(t){return this._datePipe.transform(t,"yyyy-MM-dd")}},{key:"getReport",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preview",n=this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/printable/bhi-snapshot/"+this.patientId],{queryParams:{startDate:this.getDateForReport(this.dateRange[0]),endDate:this.getDateForReport(this.dateRange[1]),action:e,email:null===(t=this.emailIds)||void 0===t?void 0:t.join(","),includeCMT:this.includeCMT,formId:this.formId,formBlueprintId:this.formBlueprintId,episodeId:this.episodeId,cmtStart:this.dateRange[0].getTime(),cmtEnd:this.dateRange[1].getTime(),selection:JSON.stringify(this.selection)}}));window.open(n,"_blank"),"preview"!==e&&(this.emailIds=[])}},{key:"downloadStaff",value:function(){this.includeCMT=!0,this.includeNotes=!0,this.getReport("download")}},{key:"downloadPatient",value:function(){this.includeCMT=!1,this.includeNotes=!1,this.getReport("download")}},{key:"shareReport",value:function(){var t,e;this._shareReportModalService.createModal(null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData.patient,this.patientId,null===(e=this.patientData)||void 0===e?void 0:e.phoneNumbers,this.episodeId,"",this.dateRange[0],this.dateRange[1],"","","shareAssessment",this.formId,this.formBlueprintId,"",this.selection).afterClose.pipe(Object(Ve.a)(this.unsubscribed)).subscribe(function(){})}},{key:"closeAlert",value:function(){var t=this;this.alertData.status="CLOSED",this.alertData.closed=!0,this.alertData.closedOn=(new Date).getTime(),this._alertService.closeAlert(this.alertData.id).subscribe(function(){t._patientsEventLogger.patientAlertEvent(t.patientId,"alert_mark_as_closed"),t._notificationsService.success(t.translatedStrings.get("COMMON.ALERT"),t.translatedStrings.get("ALERT.ALERT_CLOSED_SUCCESSFULLY")),t._dataSharingServce.triggerAlertRefresh(),t.goBack()})}},{key:"logAction",value:function(t,e){this._patientsEventLogger.patientActionEvent(e,t)}}]),i}(D.a)).\u0275fac=function(t){return new(t||RS)(_.Rb(h.e),_.Rb(Tn.a),_.Rb(m.a),_.Rb(V.b),_.Rb(Nn.a),_.Rb(vg.a),_.Rb(An.a),_.Rb(Pn.a),_.Rb(Ze.a),_.Rb(X.a),_.Rb(je.a),_.Rb(y.a),_.Rb(T.a),_.Rb(Ue.a),_.Rb(h.l),_.Rb(m.g),_.Rb(Hh.a),_.Rb($h.a),_.Rb(Be.a))},RS.\u0275cmp=_.Lb({type:RS,selectors:[["app-assessment-trend-report"]],viewQuery:function(t,e){var n;1&t&&_.ed(Gm,1),2&t&&_.Hc(n=_.fc())&&(e.chart=n.first)},features:[_.Cb([h.e,An.a]),_.Ab],decls:192,vars:125,consts:[[2,"background-color","#393939",3,"nzBackIcon","nzBack"],[1,"header-title"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzSize","nzDropdownMenu","disabled"],[1,"btn"],["size","15px","name","download",1,"button-icon",3,"originalStyle","color"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"download-staff"],[1,"line"],["nz-button","","nzType","primary",3,"nzSize","disabled","click"],["size","15px","name","share",1,"button-icon",3,"originalStyle","color"],["backIcon",""],[1,"container"],["class","alert-message",4,"ngIf"],["class","overlay-off",4,"ngIf"],["class","cdk-overlay-container alert-table","featureHighlight","","featureKey","alerts_spotlight","hideElement","",3,"position",4,"ngIf"],["nz-row","","nzSpan","24","nzGutter","24"],["nz-col",""],[1,"main-title"],[1,"date-title"],["nz-col","","nzFlex","1"],["nz-row","","nzSpan","24","nzGutter","24","nzJustify","end"],["nz-typography","",1,"minor-headings"],["id","blueprint-selector","nzSize","large",3,"ngModel","nzLoading","ngModelChange"],[4,"ngFor","ngForOf"],[1,"date-picker"],["nzSize","large",3,"ngModel","nzDisabledDate","ngModelChange"],["nz-col","","nzSpan","18"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","danger"],[1,"divider"],["nz-row","",3,"nzGutter"],["nz-typography","",1,"midnight-green-label"],["nz-col","","nzSpan","1"],["nz-row","",1,"fs-14",3,"nzGutter"],[1,"audio-call",3,"userId","phoneNumbers","renderVital","click"],["nz-col","","nzSpan","17"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","16"],["nz-row","","nzGutter","32",1,"fs-14"],["nz-typography",""],["nz-col","","nzSpan","32"],["nz-row",""],[1,"title"],[4,"ngIf"],["class","title",4,"ngIf"],["nz-row","","nzSpan","24",3,"ngClass"],[1,"graph-container"],["type","LineChart","dynamicResize","true",2,"width","100%",3,"data","options","columns","select","ready"],["chart",""],["class","container",4,"ngIf"],[1,"notes"],["id","cmtlog-notes",3,"cmtDetails","patientName"],[1,"notes","notes-section"],["id","notes",3,"notes","patientName","refreshNotes"],[3,"nzTemplate"],["backUp",""],[1,"container","input-section-div",3,"ngStyle"],["nz-row","","nzJustify","start","nzAlign","bottom"],["nz-col","","nzFlex","120px"],["nz-button","","nzType","primary",1,"footer-btn",3,"nzSize","click"],["nz-button","","nzType","danger","class","footer-btn button-large","style","border:1px solid red;",3,"click",4,"ngIf"],["nz-row","","nzJustify","end"],["nz-button","","nz-dropdown","","nzType","primary","class","footer-btn right-btn",3,"nzDropdownMenu","nzSize",4,"ngIf"],["blueprintMenu","nzDropdownMenu"],["nz-menu",""],["name","back","altColor","#ffffff","color","#ffffff"],[1,"alert-message"],[1,"overlay-off"],["nz-row","",1,"table-height"],["nz-col","","nzSpan","6",1,"assessment-parameter","pt-9",3,"ngClass"],["nz-col","","nzSpan","6",1,"pt-9",3,"ngClass"],["nz-row","",1,"table-height","table-space"],["nz-col","","nzSpan","6",1,"pt-9","text-danger",3,"ngClass"],["featureHighlight","","featureKey","alerts_spotlight","hideElement","",1,"cdk-overlay-container","alert-table",3,"position"],[3,"nzValue","nzLabel"],["style","width: 30%; text-align: right; color: var(--primary-color);",4,"ngIf"],[2,"width","30%","text-align","right","color","var(--primary-color)"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"],["nz-row","","nzSpan","24","nzGutter","32",1,"pad-20"],["nz-col","","nzFlex","10",1,"lastAssessed"],[1,"fs-16"],[1,"assessedDate"],[1,"reference-chart"],["nzProgressDot","",3,"nzCurrent","nzType","nzIndexChange",4,"ngIf"],["nzProgressDot","",3,"nzCurrent","nzType","nzIndexChange"],[3,"nzTitle",4,"ngFor","ngForOf"],["nz-col","","nzFlex","20px",1,"p-0"],["nz-col","","nzFlex","6",1,"refRange"],["nz-typography","",1,"fw-700"],[1,"fs-14"],["nz-row","","nzSpan","24","nzGutter","32"],["nz-col","","nzFlex","1",4,"ngFor","ngForOf"],["class","step-label",3,"nzDescription","nzTitle",4,"ngFor","ngForOf"],["iconTemplate",""],["titleTemplate",""],[1,"step-label",3,"nzDescription","nzTitle"],["name","down","originalStyle","true",2,"margin-right","0px"],[3,"nzTitle"],["class","fs-14",4,"ngFor","ngForOf"],["nz-col","","nzSpan","24",1,"lastAssessed"],["nz-col","","nzSpan","24",1,"refRange"],["nz-col","","nzSpan","7"],["nz-col","","nzFlex","10px"],["nz-col","","nzSpan","7",1,"question-header"],[1,"samplequestion-header-data"],["nz-row","",1,"question-headers"],[1,"assessment-header"],[1,"assessment-date"],["nz-col","","nzFlex","40px"],[1,"assessment-totalscore"],["nz-row","",1,"question-header"],["nz-col","","nzFlex","1 0 150px"],["nz-col","",3,"nzFlex"],[1,"question-body"],["nz-row","",1,"full-height"],["nz-row","",1,"answers-body","full-height"],["nz-col","",1,"answer-score",3,"nzFlex"],["nz-button","","nzType","primary","nzShape","circle",1,"scrollup"],["name","up","color","#ffffff","size","20",2,"margin","0px"],["nz-button","","nzType","danger",1,"footer-btn","button-large",2,"border","1px solid red",3,"click"],["nz-button","","nz-dropdown","","nzType","primary",1,"footer-btn","right-btn",3,"nzDropdownMenu","nzSize"],["nz-icon","","nzType","down"],["nz-menu-item","","actionable","",3,"ngSwitch","click"],[4,"ngSwitchCase"]],template:function(t,e){if(1&t&&(_.Xb(0,"nz-page-header",0),_.ec("nzBack",function(){return e.goBack()}),_.Xb(1,"nz-page-header-title",1),_.Xc(2),_.jc(3,"translate"),_.Wb(),_.Xb(4,"nz-page-header-extra"),_.Xb(5,"button",2),_.Xb(6,"span",3),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Xc(9," \xa0 "),_.Sb(10,"app-icons",4),_.Wb(),_.Xb(11,"nz-dropdown-menu",null,5),_.Xb(13,"ul",6),_.Xb(14,"li",7),_.ec("click",function(){return e.downloadStaff()}),_.Xb(15,"span",8),_.Xc(16),_.jc(17,"translate"),_.jc(18,"translate"),_.Wb(),_.Wb(),_.Sb(19,"p",9),_.Xb(20,"li",7),_.ec("click",function(){return e.downloadPatient()}),_.Xb(21,"span"),_.Xc(22),_.jc(23,"translate"),_.jc(24,"translate"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(25,"button",10),_.ec("click",function(){return e.shareReport()}),_.Xb(26,"span",3),_.Xc(27),_.jc(28,"translate"),_.Wb(),_.Xc(29," \xa0 "),_.Sb(30,"app-icons",11),_.Wb(),_.Wb(),_.Vc(31,Zm,1,0,"ng-template",null,12,_.Wc),_.Wb(),_.Sb(33,"br"),_.Xb(34,"div",13),_.Xb(35,"h3"),_.Vc(36,$m,2,0,"strong",14),_.Vc(37,qm,2,0,"strong",14),_.Wb(),_.Vc(38,Km,22,18,"nz-table",15),_.Vc(39,Jm,22,20,"nz-table",16),_.Xb(40,"div",17),_.Xb(41,"div",18),_.Xb(42,"h2",19),_.Xb(43,"strong"),_.Xc(44),_.jc(45,"translate"),_.Wb(),_.Xb(46,"span",20),_.Xc(47),_.jc(48,"date"),_.jc(49,"date"),_.Wb(),_.Wb(),_.Wb(),_.Xb(50,"div",21),_.Xb(51,"div",22),_.Xb(52,"div"),_.Xb(53,"h2",23),_.Xc(54),_.jc(55,"translate"),_.Wb(),_.Wb(),_.Xb(56,"div"),_.Xb(57,"nz-select",24),_.ec("ngModelChange",function(t){return e.formBlueprintId=t})("ngModelChange",function(){return e.refresh()}),_.Vc(58,tS,2,2,"ng-container",25),_.Wb(),_.Wb(),_.Xb(59,"div",26),_.Xb(60,"nz-range-picker",27),_.ec("ngModelChange",function(t){return e.dateRange=t})("ngModelChange",function(){return e.onDateChange()}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(61,"div",17),_.Sb(62,"div",28),_.Xb(63,"div",29),_.Xb(64,"p",30),_.Xc(65),_.Wb(),_.Wb(),_.Wb(),_.Sb(66,"nz-divider",31),_.Xb(67,"div",32),_.Xb(68,"div",29),_.Xb(69,"label",33),_.Xc(70),_.jc(71,"translate"),_.Wb(),_.Wb(),_.Xb(72,"div",29),_.Xb(73,"label",33),_.Xc(74,"Gender"),_.Wb(),_.Wb(),_.Xb(75,"div",29),_.Xb(76,"label",33),_.Xc(77),_.jc(78,"translate"),_.Wb(),_.Wb(),_.Sb(79,"div",34),_.Wb(),_.Xb(80,"div",35),_.Xb(81,"div",29),_.Xb(82,"strong"),_.Xc(83),_.jc(84,"titlecase"),_.Wb(),_.Vb(85),_.Xb(86,"app-audio-call-widget",36),_.ec("click",function(){return e.logAction("audio_call",null==e.patient?null:e.patient.id)}),_.Wb(),_.Ub(),_.Wb(),_.Xb(87,"div",29),_.Xb(88,"strong"),_.Xc(89),_.jc(90,"titlecase"),_.Wb(),_.Wb(),_.Xb(91,"div",29),_.Xb(92,"strong"),_.Xc(93),_.jc(94,"date"),_.Wb(),_.Wb(),_.Sb(95,"div",34),_.Wb(),_.Sb(96,"br"),_.Xb(97,"div"),_.Xb(98,"div",32),_.Xb(99,"div",29),_.Xb(100,"label",33),_.Xc(101),_.jc(102,"translate"),_.Wb(),_.Wb(),_.Xb(103,"div",37),_.Xb(104,"label",33),_.Xc(105),_.jc(106,"translate"),_.Wb(),_.Wb(),_.Sb(107,"div",34),_.Wb(),_.Xb(108,"div",35),_.Xb(109,"div",29),_.Xb(110,"strong"),_.Xc(111),_.Wb(),_.Wb(),_.Xb(112,"div",37),_.Xb(113,"p"),_.Vc(114,iS,6,5,"ng-container",25),_.jc(115,"keyvalue"),_.Wb(),_.Wb(),_.Sb(116,"div",34),_.Wb(),_.Sb(117,"br"),_.Xb(118,"div",38),_.Xb(119,"div",29),_.Xb(120,"label",33),_.Xc(121),_.jc(122,"translate"),_.Wb(),_.Wb(),_.Xb(123,"div",39),_.Xb(124,"label",33),_.Xc(125),_.jc(126,"translate"),_.Wb(),_.Wb(),_.Sb(127,"div",34),_.Wb(),_.Xb(128,"div",40),_.Xb(129,"div",29),_.Xb(130,"strong"),_.Xc(131),_.Wb(),_.Wb(),_.Xb(132,"div",39),_.Xb(133,"strong",41),_.Vc(134,aS,2,1,"ng-container",25),_.Wb(),_.Wb(),_.Sb(135,"div",34),_.Wb(),_.Sb(136,"br"),_.Xb(137,"div",38),_.Xb(138,"div",39),_.Xb(139,"label",33),_.Xc(140,"Patient Notes"),_.Wb(),_.Wb(),_.Sb(141,"div",34),_.Wb(),_.Xb(142,"div",38),_.Xb(143,"div",42),_.Xb(144,"strong"),_.Xc(145),_.Wb(),_.Wb(),_.Sb(146,"div",34),_.Wb(),_.Wb(),_.Wb(),_.Sb(147,"br"),_.Xb(148,"div",13),_.Xb(149,"div",43),_.Xb(150,"h3",44),_.Xb(151,"strong"),_.Xc(152),_.Wb(),_.Wb(),_.Wb(),_.Vc(153,bS,23,11,"div",45),_.Vc(154,SS,27,13,"div",45),_.Wb(),_.Xb(155,"div",13),_.Xb(156,"div",43),_.Vc(157,IS,2,1,"h3",46),_.Wb(),_.Xb(158,"div",47),_.Xb(159,"div",48),_.Xb(160,"google-chart",49,50),_.ec("select",function(t){return e.onGraphPointSelect(t)})("ready",function(t){return e.onGraphReady(t)}),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Sb(162,"br"),_.Vc(163,XS,22,9,"div",51),_.Xb(164,"div",52),_.Sb(165,"app-common-cmt-logs",53),_.Wb(),_.Xb(166,"div",54),_.Xb(167,"app-common-notes",55),_.ec("refreshNotes",function(){return e.getNotes()}),_.Wb(),_.Wb(),_.Sb(168,"br"),_.Sb(169,"br"),_.Sb(170,"br"),_.Sb(171,"br"),_.Vb(172),_.Xb(173,"nz-back-top",56),_.Vc(174,TS,2,0,"ng-template",null,57,_.Wc),_.Wb(),_.Ub(),_.Xb(176,"div",58),_.Xb(177,"div",59),_.Xb(178,"div",60),_.Xb(179,"button",61),_.ec("click",function(){return e.addNotes()}),_.Xc(180),_.jc(181,"translate"),_.Wb(),_.Wb(),_.Xb(182,"div",21),_.Vc(183,zS,3,3,"button",62),_.Wb(),_.Xb(184,"div",21),_.Xb(185,"div",63),_.Xb(186,"div",18),_.Vc(187,_S,3,2,"button",64),_.Xb(188,"nz-dropdown-menu",null,65),_.Xb(190,"ul",66),_.Vc(191,WS,7,6,"ng-container",25),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){var n=_.Ic(12),i=_.Ic(32),a=_.Ic(175);_.rc("nzBackIcon",i),_.Db(2),_.Zc(" ",_.kc(3,72,"COMMON.ASSESSMENT_TREND_REPORT")," "),_.Db(3),_.rc("nzSize","middle")("nzDropdownMenu",n)("disabled",e.noData),_.Db(2),_.Zc(" ",_.kc(8,74,"PATIENTS.REPORTDOWNLOAD"),""),_.Db(3),_.rc("originalStyle",!0)("color",e.noData?"grey":"#ffffff"),_.Db(6),_.ad("",_.kc(17,76,"COMMON.FOR")," ",_.kc(18,78,"PATIENT.MONITORING_STAFF")," "),_.Db(6),_.ad("",_.kc(23,80,"COMMON.FOR")," ",_.kc(24,82,"PATIENT"),""),_.Db(3),_.rc("nzSize","middle")("disabled",e.noData),_.Db(2),_.Yc(_.kc(28,84,"PATIENTS.REPORTSHARE")),_.Db(3),_.rc("originalStyle",!0)("color",e.noData?"grey":"#ffffff"),_.Db(6),_.rc("ngIf",e.alertData&&"CLOSED"!=(null==e.alertData?null:e.alertData.status)),_.Db(1),_.rc("ngIf",e.alertData&&"CLOSED"==(null==e.alertData?null:e.alertData.status)),_.Db(1),_.rc("ngIf",e.alertData),_.Db(1),_.rc("ngIf",e.alertData),_.Db(5),_.Zc(" ",_.kc(45,86,"COMMON.ASSESSMENT_TREND_REPORT"),""),_.Db(3),_.ad("(",_.lc(48,88,e.dateRange[0],"mediumDate")," - ",_.lc(49,91,e.dateRange[1],"mediumDate"),")"),_.Db(7),_.Zc("",_.kc(55,94,"FORMS.SCORED_ASSESSMENT"),":"),_.Db(3),_.rc("ngModel",e.formBlueprintId)("nzLoading",e.loadingAllForms),_.Db(1),_.rc("ngForOf",e.listOfForms),_.Db(2),_.rc("ngModel",e.dateRange)("nzDisabledDate",e.disabledDates),_.Db(5),_.Yc(e.reportWarning),_.Db(2),_.rc("nzGutter",_.xc(119,VS)),_.Db(3),_.Yc(_.kc(71,96,"PATIENT.NAME")),_.Db(7),_.Yc(_.kc(78,98,"COMMON.DOB")),_.Db(3),_.rc("nzGutter",_.xc(120,VS)),_.Db(3),_.Yc(_.kc(84,100,null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient)),_.Db(3),_.rc("userId",null==e.patient?null:e.patient.id)("phoneNumbers",null==e.patient?null:e.patient.phoneNumbers)("renderVital",!0),_.Db(3),_.Yc(_.kc(90,102,null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.gender)),_.Db(4),_.Zc(" ",_.lc(94,104,null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.dateOfBirth,"mediumDate")," "),_.Db(5),_.rc("nzGutter",_.xc(121,LS)),_.Db(3),_.Yc(_.kc(102,107,"COMMON.PHYSICIAN")),_.Db(4),_.Yc(_.kc(106,109,"COMMON.MONITORED_BY")),_.Db(3),_.rc("nzGutter",_.xc(122,LS)),_.Db(3),_.Zc(" ",e.physicians,""),_.Db(3),_.rc("ngForOf",_.kc(115,111,e.staffNameTypeMap)),_.Db(7),_.Yc(_.kc(122,113,"PATIENT_ID")),_.Db(4),_.Yc(_.kc(126,115,"COMMON.DIAGNOSIS")),_.Db(6),_.Yc((null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patientInternalId)||"N/A"),_.Db(3),_.rc("ngForOf",e.icdCodes),_.Db(11),_.Yc((null==e.assessmentTrend||null==e.assessmentTrend.metaData||null==e.assessmentTrend.metaData.quickNote?null:e.assessmentTrend.metaData.quickNote.content)||"N/A"),_.Db(7),_.Yc(null==e.assessmentTrend||null==e.assessmentTrend.snapshot?null:e.assessmentTrend.snapshot.assessment),_.Db(1),_.rc("ngIf",e.rangeLength<=8),_.Db(1),_.rc("ngIf",e.rangeLength>8),_.Db(3),_.rc("ngIf",e.graphTitle),_.Db(1),_.rc("ngClass",e.graphData?null:"hidden"),_.Db(2),_.rc("data",e.graphData)("options",e.graphOptions)("columns",e.columnNames),_.Db(3),_.rc("ngIf",e.totalAllScore&&e.totalAllScore.length>0),_.Db(2),_.rc("cmtDetails",e.cmtDetails)("patientName",null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient),_.Db(2),_.rc("notes",e.notes)("patientName",null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient),_.Db(6),_.rc("nzTemplate",a),_.Db(3),_.rc("ngStyle",_.yc(123,FS,e.headerLeft)),_.Db(3),_.rc("nzSize","large"),_.Db(1),_.Zc(" ",_.kc(181,117,"COMMON.ADD_NOTES")," "),_.Db(3),_.rc("ngIf",e.alertData&&"OPEN"==e.alertData.status),_.Db(4),_.rc("ngIf",e.patientStatus&&"ACTIVE"==e.patientStatus&&(!e.alertData||"OPEN"==e.alertData.status)),_.Db(4),_.rc("ngForOf",null==e.tenantConfig?null:e.tenantConfig.episodeBlueprints)}},directives:[Xi.b,Xi.g,Xi.d,M.a,A.a,P.a,sn.d,sn.b,he.a,sn.e,cn.c,cn.e,h.q,Z.c,Z.a,H.a,Y.d,v.u,v.x,h.p,ge.a,ge.c,G.a,Ui.a,h.o,p.a,Ym.a,Bm.a,hv.a,h.r,Q.f,Q.o,Q.e,Q.l,Y.a,j.a,Hm.b,Hm.a,Vi.a,h.s,h.t],pipes:[Qt.a,h.e,h.A,h.j],styles:[".container[_ngcontent-%COMP%]{padding:10px 35px!important}.date-picker[_ngcontent-%COMP%]{padding-left:12px}.minor-headings[_ngcontent-%COMP%]{float:right}.fs-14[_ngcontent-%COMP%]{font-size:14px}.fw-700[_ngcontent-%COMP%]{font-weight:700}.graph-title[_ngcontent-%COMP%]{padding-bottom:0}.header-title[_ngcontent-%COMP%]{color:#fff}.btn[_ngcontent-%COMP%]{bottom:2px}.btn[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]{position:relative}.line[_ngcontent-%COMP%]{opacity:.2;border:1px solid #707070;width:85%;margin-left:15px;top:8px}[_nghost-%COMP%]     .ant-page-header{padding:5px 24px}.main-title[_ngcontent-%COMP%]{color:#0b2240;font-size:22px}.date-title[_ngcontent-%COMP%]{padding-left:10px;font-size:15px}.minor-headings[_ngcontent-%COMP%]{font-size:14px;color:#0f2015;padding-top:12px;padding-right:12px}.footer-btn[_ngcontent-%COMP%]{margin:8px;font-size:12px;width:140px;height:33px}.right-btn[_ngcontent-%COMP%]{margin-right:21px}.input-section-div[_ngcontent-%COMP%]{background-color:#f8f8f8;position:fixed;bottom:-1px;right:0;left:0;padding:0}.divider[_ngcontent-%COMP%]{margin-top:0}.fs-16[_ngcontent-%COMP%]{font-size:16px}.midnight-green-label[_ngcontent-%COMP%]{color:var(--tertiary-color)!important}.pad-20[_ngcontent-%COMP%]{padding:20px}.title[_ngcontent-%COMP%]{color:#0b2240;font-weight:700;font-family:Nunito;font-size:18px;border-left:4px solid var(--primary-color);padding-left:12px}.question-header[_ngcontent-%COMP%]{background:var(--primary-color);font-size:15px;font-weight:800;color:#0b2340;margin-bottom:0;padding:11px 20px}.question-header[_ngcontent-%COMP%]:first-child{border-radius:3px 0 0 0}.question-header[_ngcontent-%COMP%]:last-child{border-radius:0 1px 0 0}.question-headers[_ngcontent-%COMP%]{display:flex}.samplequestion-headers[_ngcontent-%COMP%]{border-radius:3px 3px 0 0;margin-bottom:0}.samplequestion-header-data[_ngcontent-%COMP%], .samplequestion-headers[_ngcontent-%COMP%]{background:var(--neutral-color);font-weight:800;color:#000;padding:11px;font-size:15px;height:75px}.samplequestion-header-data[_ngcontent-%COMP%]{border-radius:3px;margin-bottom:16px}.question-body[_ngcontent-%COMP%]{background:var(--neutral-color);color:#0b2240;padding:5px 20px;line-height:30px;font-weight:600;border-right:1px solid #d3d3d3}.question-body[_ngcontent-%COMP%]:last-child{border-radius:0 0 3px 3px}.answers-body[_ngcontent-%COMP%]{background:var(--neutral-color);color:#0b2340;padding:5px 20px;line-height:30px;font-weight:600;border-right:1px solid #d3d3d3}.answers-body[_ngcontent-%COMP%]:last-child{border-radius:0 0 3px 3px}.assessment-totalscore[_ngcontent-%COMP%]{font-size:30px;font-weight:bolder}.assessment-date[_ngcontent-%COMP%]{font-size:15px;color:#666;font-weight:400}.allScore[_ngcontent-%COMP%]{margin-left:33px!important}.answer-score[_ngcontent-%COMP%]{padding-left:15px!important}.ml-14[_ngcontent-%COMP%]{margin-left:14px}.ml-32[_ngcontent-%COMP%]{margin-left:32px!important}.ml-16[_ngcontent-%COMP%]{margin-left:16px!important}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.p-20[_ngcontent-%COMP%]{padding-left:20px!important;padding-right:30px!important}.refRange[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;padding:16px 36px!important}.p-0[_ngcontent-%COMP%]{padding:0!important}.lastAssessed[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;padding:16px 36px!important}.reference-chart[_ngcontent-%COMP%]{flex:1;width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-end}.graph-container[_ngcontent-%COMP%]{overflow:hidden!important;border-radius:5px;width:100%}.arrow-down[_ngcontent-%COMP%]{font-weight:700;padding-left:225px}.ml-24[_ngcontent-%COMP%]{margin-left:24px!important}#blueprint-selector[_ngcontent-%COMP%]{height:37px;width:200px}.alert-message[_ngcontent-%COMP%]{color:#0b2240}.table-height[_ngcontent-%COMP%]{height:38px}.table-space[_ngcontent-%COMP%]{margin-top:10px}.table-header-green[_ngcontent-%COMP%]{background:var(--primary-color)!important}.table-body-white[_ngcontent-%COMP%]{background:#fff!important}.assessment-parameter[_ngcontent-%COMP%]{padding-left:38px}.pt-9[_ngcontent-%COMP%]{padding-top:9px}.text-danger[_ngcontent-%COMP%]{color:#c71b1b}.table-header-grey[_ngcontent-%COMP%]{background:#999!important}.table-body-grey[_ngcontent-%COMP%]{background:#e5e5e5!important}.cdk-overlay-container[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:10px}.alert-table[_ngcontent-%COMP%]{height:100%;width:100%;padding-left:170px;padding-right:20px;padding-top:162px}.overlay-off[_ngcontent-%COMP%]{background-color:none;z-index:0}.step-label[_ngcontent-%COMP%]{background-color:transparent!important}.step-label[_ngcontent-%COMP%]     .ant-steps-item-container .ant-steps-item-tail:after{height:0!important}.step-label[_ngcontent-%COMP%]     .ant-steps-item-container .ant-steps-item-icon{height:0!important;width:0!important}.step-label[_ngcontent-%COMP%]     .ant-steps-item-container .ant-steps-item-title{font-size:14px!important;color:#000!important}[_nghost-%COMP%]     .ant-steps-item-title{font-size:12px}[_nghost-%COMP%]     .ant-steps-icon-dot{background:#666!important}.assessedDate[_ngcontent-%COMP%]{margin-bottom:0!important}.hidden-question[_ngcontent-%COMP%]{color:blue;position:absolute}.answer-container[_ngcontent-%COMP%]{position:relative}.full-height[_ngcontent-%COMP%]{height:100%}.hidden[_ngcontent-%COMP%]{display:none!important}.button-icon[_ngcontent-%COMP%]{position:relative;top:2px}.notes-section[_ngcontent-%COMP%]{padding-bottom:60px}[_nghost-%COMP%]     .ant-back-top{bottom:100px;right:32px}.scrollup[_ngcontent-%COMP%]{height:43px;width:43px;font-size:16px}.notes[_ngcontent-%COMP%]{padding:10px 35px 10px 20px!important}"]}),RS),jS=o("pLZG"),YS=[{path:"",component:cl,pathMatch:"full",data:{retainState:!0,privileges:[ul.a.VIEW_PATIENT],tags:["PATIENT","RPM","BHI","GENERAL"]},canActivate:[we.a,ke.a]},{path:"bulk-trend-report/:type",component:Fm,data:{showTenantToggle:!0,subTenantToggleMode:"SINGLE"},canActivate:[we.a,ke.a]},{path:"healthscore/:id",component:xe,data:{privileges:[ul.a.VIEW_PATIENT]},canActivate:[we.a,ke.a]},{path:"bulk-add",component:pe,data:{privileges:[ul.a.ADD_PATIENT],showTenantToggle:!1},canActivate:[we.a,ke.a]},{path:"bulk-add-notes",component:(xS=function(t){r(n,t);var e=l(n);function n(t,i,a,r){var o;return b(this,n),(o=e.call(this))._router=t,o._http=i,o._episodesService=a,o._notificationsService=r,o.handleUpload=function(t){var e=new C.g({bypass:"yes"});o._http.post(o.uploadURL,t.file,{headers:e,observe:"response",responseType:"text"}).subscribe(function(t){200==t.status?o._episodesService.bulkUploadPatientCommunicationNotes(t.body).subscribe(function(){o._notificationsService.success("Patient Communication Notes","Notes uploaded successfully!"),o._router.navigate(["patient"])}):o._notificationsService.error("Bulk Upload","Something went wrong, please try again!")})},o.uploadURL=E.g.url+"/v2/media/upload/"+Math.random().toString(10).substring(7)+".xlsx",o._routeHelperService.isPrimaryActionTriggered().pipe(Object(jS.a)(function(t){return!!t}),Object(Ve.a)(o.unsubscribed)).subscribe(function(){return o.downloadTemplate()}),o}return d(n,[{key:"downloadTemplate",value:function(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=patient-communication-bulk-upload-template.xlsx","_blank")}}]),n}(D.a),xS.\u0275fac=function(t){return new(t||xS)(_.Rb(m.g),_.Rb(C.c),_.Rb(vg.a),_.Rb(V.b))},xS.\u0275cmp=_.Lb({type:xS,selectors:[["app-bulk-add-patient-communications"]],features:[_.Ab],decls:10,vars:6,consts:[[1,"container"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList"],["nz-button","","nzType","primary","nzSize","large"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"nz-card"),_.Xb(2,"nz-upload",1),_.Xb(3,"button",2),_.Xc(4," BROWSE / DRAG "),_.Wb(),_.Xb(5,"p"),_.Sb(6,"br"),_.Xc(7),_.jc(8,"translate"),_.Wb(),_.Wb(),_.Sb(9,"br"),_.Wb(),_.Wb()),2&t&&(_.Db(2),_.rc("nzCustomRequest",e.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1),_.Db(5),_.Zc(" ",_.kc(8,4,"COMMON.DRAG_AND_UPLOAD")," "))},directives:[Rn.a,U.a,M.a,A.a,P.a],pipes:[Qt.a],styles:[""]}),xS),data:Lh.BulkUpload},{path:"view/:id",component:yh,data:{privileges:[ul.a.VIEW_PATIENT],showTenantToggle:!1},canActivate:[we.a,ke.a]},{path:"vital-trend/:id",component:fm,data:{privileges:[ul.a.VIEW_PATIENT]},canActivate:[we.a,ke.a]},{path:"assessment-trend/:id",component:US,data:{privileges:[ul.a.VIEW_PATIENT]},canActivate:[we.a,ke.a]},{path:":mode",component:Ws,data:Lh.Form,canActivate:[we.a,ke.a]},{path:":mode/:id",component:Ws,data:Lh.Form,canActivate:[we.a,ke.a]},{path:"assign-staff/:id/:location/:patientName",component:oc,data:Lh.MonitoringStaffAssigner,canActivate:[we.a,ke.a]},{path:"assign/physician/:id",component:Vh,data:Lh.PhysicianAssigner,canActivate:[we.a,ke.a]}],BS=((kS=function t(){b(this,t)}).\u0275mod=_.Pb({type:kS}),kS.\u0275inj=_.Ob({factory:function(t){return new(t||kS)},imports:[[m.k.forChild(YS)],m.k]}),kS),HS=o("0wl5"),GS=o("dh1a"),ZS=o("MN0s"),$S=o("ttvE"),qS=((wS=function t(e,n){b(this,t),this.translationService=e,this.featureHighlightService=n,e.setLanguage(),n.setFeatureConfigs()}).\u0275mod=_.Pb({type:wS}),wS.\u0275inj=_.Ob({factory:function(t){return new(t||wS)(_.bc(Ze.a),_.bc(Ai.a))},imports:[[BS,m.k,h.c,v.o,v.B,S.a.forRoot(),I.a,g.a,f.a,p.b,HS.a,u.a,c.a,GS.a.forRoot(),s.SupportModule,rn.a.forChild(),ZS.AnalyticsModule,$S.EpisodesModule]]}),wS)},HStR:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n("pJ0c"),a=n("fXoL"),r=n("ofXK"),o=n("rMZv"),l=n("OrU2"),s=n("fhRi");function c(t,e){if(1&t&&a.Sb(0,"app-patient-status-notification",5),2&t){var n=a.ic();a.rc("patientInfo",n.patientInfo)}}function u(t,e){if(1&t&&(a.Xb(0,"tr"),a.Xb(1,"td"),a.Xc(2),a.jc(3,"utcToLocalTime"),a.Wb(),a.Xb(4,"td"),a.Xc(5),a.jc(6,"utcToLocalTime"),a.Wb(),a.Xb(7,"td"),a.Xc(8),a.Wb(),a.Xb(9,"td"),a.Xc(10),a.Wb(),a.Xb(11,"td"),a.Xc(12),a.Wb(),a.Wb()),2&t){var n=e.$implicit;a.Db(2),a.Yc(a.kc(3,5,null==n?null:n.startDateTime)),a.Db(3),a.Yc(a.kc(6,7,null==n?null:n.endDateTime)),a.Db(3),a.Yc(null==n?null:n.patientClass),a.Db(2),a.Yc(null==n||null==n.location?null:n.location.facility),a.Db(2),a.Yc(null==n?null:n.reason)}}var p=function(){var t=function(){function t(e){b(this,t),this._visitsEncountersService=e}return d(t,[{key:"ngOnInit",value:function(){this.getVisits()}},{key:"getVisits",value:function(){var t=this;this._visitsEncountersService.fetchVisitsByUserId(this.patientId).subscribe(function(e){t.visits=e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Rb(i.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-visits"]],inputs:{patientInfo:"patientInfo",patientId:"patientId"},decls:18,vars:4,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],["nzFrontPagination","true",3,"nzData","nzTotal"],["visitsTable",""],[4,"ngFor","ngForOf"],[3,"patientInfo"]],template:function(t,e){if(1&t&&(a.Xb(0,"div",0),a.Vc(1,c,1,1,"app-patient-status-notification",1),a.Xb(2,"nz-table",2,3),a.Xb(4,"thead"),a.Xb(5,"tr"),a.Xb(6,"th"),a.Xc(7,"Start Time"),a.Wb(),a.Xb(8,"th"),a.Xc(9,"End Time"),a.Wb(),a.Xb(10,"th"),a.Xc(11,"Type"),a.Wb(),a.Xb(12,"th"),a.Xc(13,"Location"),a.Wb(),a.Xb(14,"th"),a.Xc(15,"Reason"),a.Wb(),a.Wb(),a.Wb(),a.Xb(16,"tbody"),a.Vc(17,u,13,9,"tr",4),a.Wb(),a.Wb(),a.Wb()),2&t){var n=a.Ic(3);a.Db(1),a.rc("ngIf",e.patientInfo&&("FLAGGED_FOR_DISQUALIFICATION"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"SUSPENDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus))),a.Db(1),a.rc("nzData",e.visits)("nzTotal",null==e.visits?null:e.visits.length),a.Db(15),a.rc("ngForOf",null==n?null:n.data)}},directives:[r.q,o.f,o.n,o.o,o.e,o.l,o.i,r.p,l.a],pipes:[s.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),t}()},Ljqs:function(t,e,n){"use strict";var i=n("Q1FS"),a=n("mbIT"),r=n("q3Kh"),o=n("GMZp"),l=n("gTqA");function s(t,e){return new i.Observable(function(n){var i=t.length;if(0!==i)for(var a=new Array(i),r=0,o=0,s=function(s){var c=l.from(t[s]),u=!1;n.add(c.subscribe({next:function(t){u||(u=!0,o++),a[s]=t},error:function(t){return n.error(t)},complete:function(){++r!==i&&u||(o===i&&n.next(e?e.reduce(function(t,e,n){return t[e]=a[n],t},{}):a),n.complete())}}))},c=0;c<i;c++)s(c);else n.complete()})}e.forkJoin=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(a.isArray(n))return s(n,null);if(o.isObject(n)&&Object.getPrototypeOf(n)===Object.prototype){var i=Object.keys(n);return s(i.map(function(t){return n[t]}),i)}}if("function"==typeof t[t.length-1]){var l=t.pop();return s(t=1===t.length&&a.isArray(t[0])?t[0]:t,null).pipe(r.map(function(t){return l.apply(void 0,t)}))}return s(t,null)}},OCRN:function(t,e,n){},OrU2:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var i=n("ofXK"),a=n("cp0P"),r=n("IzEk"),o=n("WoUL"),l=n("igu/"),s=n("MXg9"),c=n("geco"),u=n("fXoL"),p=n("JA5x");function f(t,e){if(1&t&&(u.Xb(0,"nz-card",1),u.Sb(1,"p",2),u.Wb()),2&t){var n=u.ic();u.Db(1),u.sc("innerHTML",n.message,u.Mc)}}var g=function(){var t=function(){function t(e,n,i){b(this,t),this._patientsService=e,this.translationService=n,this._dataSharingService=i,this.changedByStaffName="N/A",this.tenantConfig=null}return d(t,[{key:"ngOnInit",value:function(){var t,e,n,i,o=this;switch(this._dataSharingService.tenantSettings.pipe(Object(r.a)(1)).subscribe(function(t){o.tenantConfig=t}),null===(t=this.patientInfo)||void 0===t?void 0:t.patientStatus){case"NOT_ONBOARDED":e=this.getRecentDischargeReason(s.a.NOT_ONBOARDED),n=this._patientsService.getSpecificUser(e.changedBy),i=this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.NOT_ONBOARDED"),Object(a.a)([n,i]).subscribe(function(t){var n;o.message=t[1].replace("{PATIENT}",null===(n=o.patientInfo)||void 0===n?void 0:n.fullName).replace("{MONITORING_STAFF}",t[0].fullName||"N/A").replace("{NOT_ONBOARDED_DATE}",o.getDischargeDate(e.timestamp)).replace("{REASONS}",e.reason)});break;case"DISCHARGED":e=this.getRecentDischargeReason(s.a.DISCHARGED),n=this._patientsService.getSpecificUser(e.changedBy),i=this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.DISCHARGED"),Object(a.a)([n,i]).subscribe(function(t){var n;o.message=t[1].replace("{PATIENT}",null===(n=o.patientInfo)||void 0===n?void 0:n.fullName).replace("{MONITORING_STAFF}",t[0].fullName||"N/A").replace("{DISCHARGE_DATE}",o.getDischargeDate(e.timestamp)).replace("{REASONS}",e.reason)});break;case"SUSPENDED":e=this.getRecentDischargeReason(s.a.SUSPENDED),n=this._patientsService.getSpecificUser(e.changedBy),i=this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.SUSPENDED"),Object(a.a)([n,i]).subscribe(function(t){var n;o.message=t[1].replace("{PATIENT}",null===(n=o.patientInfo)||void 0===n?void 0:n.fullName).replace("{MONITORING_STAFF}",t[0].fullName||"N/A").replace("{SUSPENDED_DATE}",o.getDischargeDate(e.timestamp)).replace("{REASONS}",e.reason)});break;case"FLAGGED_FOR_DISQUALIFICATION":e=this.getRecentDischargeReason(s.a.FLAGGED_FOR_DISQUALIFICATION),this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.FLAGGED_FOR_DISQUALIFICATION").subscribe(function(t){return o.message=t})}}},{key:"getRecentDischargeReason",value:function(t){return this.patientInfo.patientStatusChangeHistory.filter(function(e){return e.changedToState===t}).reduce(function(t,e){return t.timestamp>e.timestamp?t:e})}},{key:"getDischargeDate",value:function(t){var e,n,i,a=(t instanceof Date?t:new Date(t+"Z")).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",timeZone:this.tenantConfig.timeZone,timeZoneName:"short"});return"".concat(null===(e=a.split(","))||void 0===e?void 0:e[0]," (").concat(null===(i=null===(n=a.split(","))||void 0===n?void 0:n[1])||void 0===i?void 0:i.trim(),")")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Rb(c.a),u.Rb(o.a),u.Rb(l.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["app-patient-status-notification"]],inputs:{patientInfo:"patientInfo"},features:[u.Cb([i.e])],decls:1,vars:1,consts:[["nzSize","small",4,"ngIf"],["nzSize","small"],[3,"innerHTML"]],template:function(t,e){1&t&&u.Vc(0,f,2,1,"nz-card",0),2&t&&u.rc("ngIf",e.message)},directives:[i.q,p.a],styles:["nz-card[_ngcontent-%COMP%]{background-color:#78909c;color:var(--neutral-color);font-weight:700;border-radius:5px}"]}),t}()},Osby:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return c}),n.d(e,"k",function(){return u}),n.d(e,"f",function(){return p}),n.d(e,"h",function(){return f}),n.d(e,"g",function(){return h}),n.d(e,"j",function(){return m}),n.d(e,"b",function(){return S}),n.d(e,"i",function(){return D});var i=function t(){b(this,t),this.form=new s,this.scoreProperties=new m},a=function(t){return t.ASSESSMENT="ASSESSMENT",t.QUESTIONNAIRE="QUESTIONNAIRE",t.AGREEMENT="AGREEMENT",t.SCORED_ASSESSMENT="SCORED_ASSESSMENT",t.SMS_ASSESSMENT="SMS_ASSESSMENT",t}({}),r=function(t){return t.SECTION="SECTION",t.FOOTER="FOOTER",t}({}),o=function(t){return t.RADIO="RADIO",t.CHECKBOX="CHECKBOX",t.INPUT="INPUT",t.SIGNATURE="SIGNATURE",t.DATE="DATE",t.TIME="TIME",t.UPLOAD="UPLOAD",t.PRE_FILLED="PRE_FILLED",t.ARITHMETIC="ARITHMETIC",t.INPUT_AREA="INPUT_AREA",t}({}),l=function(t){return t.NONE="NONE",t.PHQ_9="PHQ-9",t.GAD_7="GAD-7",t.IHRS="IHRS",t.MARS="MARS",t.COVID="COVID",t}({}),s=function t(){b(this,t),this.language="en",this.type=a.ASSESSMENT,this.bannerImage="",this.tags=[],this.elements=[],this.showResultTo=[],this.formCategory=6,this.formStandard=l.NONE,this.isTitleValid=!0,this.isDescValid=!0,this.isTagsValid=!0},c=function t(){b(this,t),this.description="",this.type=r.SECTION,this.helpText="",this.imageUrl="",this.displaySequence=1,this.elements=[new u],this.valid=!0},u=function t(){b(this,t),this.required=!1,this.options=[new h],this.type=o.RADIO,this.helpText="",this.imageUrl="",this.displaySequence=1,this.answer=[],this.resultConditions=[new D],this.valid=!0},d=function(t){return t.FIRSTNAME="FIRSTNAME",t.LASTNAME="LASTNAME",t.DATE_OF_BIRTH="DATE_OF_BIRTH",t.MOBILE="MOBILE",t.GENDER="GENDER",t.WEIGHT="WEIGHT",t.HEIGHT="HEIGHT",t}({}),p=function(t){return t.RADIO="RADIO",t.CHECKBOX="CHECKBOX",t.INPUT="INPUT",t.DATE="DATE",t.RADIO_TEXT="RADIO_TEXT",t.COMBO_TEXT="COMBO_TEXT",t}({}),f=function t(){b(this,t),this.dataType=g.STRING,this.min="1",this.max="500",this.errorMessage=""},g=function(t){return t.STRING="STRING",t.NUMBER="NUMBER",t.DATE="DATE",t}({}),h=function t(){b(this,t),this.type=p.RADIO,this.validation=new f,this.prefilledFieldType=d.DATE_OF_BIRTH,this.arithmeticFieldType=new v,this.imageUrl="",this.helpText="",this.displaySequence=1,this.redirectToSection=1},v=function t(){b(this,t),this.unit=I.NONE},m=function t(){b(this,t),this.title="",this.type="",this.criterias=[]},S=function t(){b(this,t),this.notify=["CARETAKER"],this.isStartRangeValid=!0,this.isEndRangeValid=!0,this.isIdentificationValid=!0,this.isDescriptionValid=!0},I=function(t){return t.KILOGRAM="KILOGRAM",t.POUND="POUND",t.INCH="INCH",t.CENTIMETER="CENTIMETER",t.FEET="FEET",t.NONE="NONE",t}({}),D=function t(){b(this,t),this.operation=y.BETWEEN},y=function(t){return t.LESS_THAN="LESS_THAN",t.LESS_THAN_EQUAL_TO="LESS_THAN_EQUAL_TO",t.BETWEEN="BETWEEN",t.GREATER_THAN="GREATER_THAN",t.GREATER_THAN_EQUAL_TO="GREATER_THAN_EQUAL_TO",t.EQUAL_TO="EQUAL_TO",t.NOT_EQUAL_TO="NOT_EQUAL_TO",t}({})},"Pd5/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,r.default)(2,arguments);var n=(0,i.default)(e);return(0,a.default)(t,-n)};var i=o(n("LP0B")),a=o(n("qZya")),r=o(n("YGjY"));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},eJ3O:function(t,e,n){"use strict";var i=n("Q1FS"),a=n("1pIY"),r=n("p0+S"),o=n("nzqU");function l(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}e.timer=function(t,e,n){void 0===t&&(t=0);var s=-1;return r.isNumeric(e)?s=Number(e)<1?1:Number(e):o.isScheduler(e)&&(n=e),o.isScheduler(n)||(n=a.async),new i.Observable(function(e){var i=r.isNumeric(t)?t:+t-n.now();return n.schedule(l,i,{index:0,period:s,subscriber:e})})}},iCh7:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("OCRN");var i=n("tk/3"),a=n("AytR"),r=n("fXoL"),o=function(){var t=function(){function t(e){b(this,t),this._http=e,this.rootURL=a.g.url}return d(t,[{key:"fetchAllInsurancePayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r="".concat(this.rootURL,"/v3/insurance/payers"),o={pageNumber:t,limit:e,searchKey:n,type:a},l=new i.h;return Object.keys(o).forEach(function(t){return o[t]&&(l=l.append(t,o[t]))}),this._http.get(r,{params:l})}},{key:"fetchAllInsurancePlans",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2?arguments[2]:void 0,a="".concat(this.rootURL,"/v3/insurance/plans"),r={pageNumber:t,limit:e,searchKey:n},o=new i.h;return Object.keys(r).forEach(function(t){return r[t]&&(o=o.append(t,r[t]))}),this._http.get(a,{params:o})}},{key:"fetchInsurancePlansForPayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3?arguments[3]:void 0,r="".concat(this.rootURL,"/v3/insurance/payers/").concat(t,"/plans"),o={pageNumber:e,limit:n,searchKey:a},l=new i.h;return Object.keys(o).forEach(function(t){return o[t]&&(l=l.append(t,o[t]))}),this._http.get(r,{params:l})}},{key:"bulkUploadInsurancePayers",value:function(t){return this._http.post("".concat(this.rootURL,"/v3/insurance/payers/bulk-upload/json"),t)}},{key:"fetchInsurancePayerById",value:function(t){return this._http.get("".concat(this.rootURL,"/v3/insurance/payers/").concat(t))}},{key:"updateInsurancePayer",value:function(t){return this._http.put("".concat(this.rootURL,"/v3/insurance/payers"),t)}},{key:"updateInsurancePayerTypeInBulk",value:function(t){return this._http.put("".concat(this.rootURL,"/v3/insurance/payers/bulk"),t)}},{key:"deleteInsurancePayer",value:function(t){return this._http.delete("".concat(this.rootURL,"/v3/insurance/payers/").concat(t))}},{key:"deleteInsurancePlan",value:function(t){return this._http.delete("".concat(this.rootURL,"/v3/insurance/plans/").concat(t))}},{key:"fetchInsuranceTierRules",value:function(){return this._http.get("".concat(this.rootURL,"/v3/insurance/tier-rules"))}},{key:"saveInsuranceTierRules",value:function(t){return this._http.post("".concat(this.rootURL,"/v3/insurance/tier-rules"),t)}},{key:"applyInsuranceTierRules",value:function(){return this._http.put("".concat(this.rootURL,"/v3/insurance/tier-rules/apply"),{})}},{key:"applyInsuranceTierRulesToLead",value:function(t){return this._http.put("".concat(this.rootURL,"/v3/insurance/tier-rules/apply/lead/").concat(t),{})}},{key:"applyInsuranceTierRulesToPatient",value:function(t){return this._http.put("".concat(this.rootURL,"/v3/insurance/tier-rules/apply/patient/").concat(t),{})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.bc(i.c))},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},pJ0c:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("AytR"),a=n("fXoL"),r=n("tk/3"),o=function(){var t=function(){function t(e){b(this,t),this._http=e,this.rootUrl=i.g.url}return d(t,[{key:"fetchVisitsByUserId",value:function(t){return this._http.get("".concat(this.rootUrl,"/v1/visits/user/").concat(t))}},{key:"fetchEncountersByUserId",value:function(t){return this._http.get("".concat(this.rootUrl,"/v1/encounters/user/").concat(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.bc(r.c))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();