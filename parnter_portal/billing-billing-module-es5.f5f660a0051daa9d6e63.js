!function(){function n(t,e){return(n=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(t,e)}function t(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var a,l=i(n);if(t){var c=i(this).constructor;a=Reflect.construct(l,arguments,c)}else a=l.apply(this,arguments);return e(this,a)}}function e(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function i(n){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function a(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function l(n,t,e){return t&&a(n.prototype,t),e&&a(n,e),n}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"4AsR":function(n,t,e){"use strict";e.d(t,"a",function(){return b});var i=e("KZX/"),a=e("UFn0"),l=e("3Pt+"),o=e("ofXK"),r=e("WoUL"),s=e("SHZf"),u=e("fXoL"),b=function(){var n=function n(t){c(this,n),this.translationService=t,t.setLanguage()};return n.\u0275mod=u.Pb({type:n}),n.\u0275inj=u.Ob({factory:function(t){return new(t||n)(u.bc(r.a))},imports:[[o.c,l.o,l.B,a.a,i.a,s.a.forRoot()]]}),n}()},"7QHW":function(n,t,e){"use strict";e.d(t,"a",function(){return r});var i=e("AytR"),a=e("fXoL"),o=e("tk/3"),r=function(){var n=function(){function n(t){c(this,n),this._http=t,this.rootURL=i.g.url}return l(n,[{key:"fetchBillablePatients",value:function(n){return this._http.post("".concat(this.rootURL,"/v3/billing/billable-patients"),JSON.stringify(n))}},{key:"signOffPatient",value:function(n){return this._http.post("".concat(this.rootURL,"/v3/billing/sign-off"),JSON.stringify(n))}},{key:"bulkSignOffPatients",value:function(n){return this._http.post("".concat(this.rootURL,"/v3/billing/bulk-sign-off"),JSON.stringify(n))}},{key:"revokeSignOff",value:function(n){return this._http.delete("".concat(this.rootURL,"/v3/billing/revoke-sign-off/").concat(n),{})}},{key:"transmitDFTMessage",value:function(n){return this._http.post("".concat(this.rootURL,"/v1/redox/post/financial/transaction/").concat(n),{})}},{key:"transmitMDM",value:function(n){return this._http.post("".concat(this.rootURL,"/v1/redox/post/media/transaction/").concat(n),{})}},{key:"transmitFlowSheet",value:function(n,t){return this._http.post("".concat(this.rootURL,"/v1/redox/post/flowsheet/transaction/").concat(n),t)}},{key:"verifyFlowSheetAndMDM",value:function(n,t){return this._http.post("".concat(this.rootURL,"/v1/redox/post/flowsheet/verification/").concat(n),t)}},{key:"bulkTransmitDFTMessage",value:function(n,t){return this._http.post("".concat(this.rootURL,"/v1/redox/bulk-post/financial/transaction/").concat(n,"/").concat(t),{})}},{key:"bulkTransmitMDM",value:function(n,t){return this._http.post("".concat(this.rootURL,"/v1/redox/bulk-post/media/transaction/").concat(n,"/").concat(t),{})}},{key:"fetchInvoiceData",value:function(n,t){return this._http.get("".concat(this.rootURL,"/v3/billing/invoice-report-data/").concat(n,"/").concat(t),{})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(a.bc(o.c))},n.\u0275prov=a.Nb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},p6Zg:function(e,i,a){"use strict";a.r(i),a.d(i,"BillingModule",function(){return Ln});var o,r=a("ofXK"),s=a("3Pt+"),u=a("tyNb"),b=a("KZX/"),f=a("SHZf"),d=a("4AsR"),g=a("UFn0"),h=a("rbUg"),v=a("WoUL"),p=a("gXqy"),m=a("qQcL"),y=a("7QHW"),S=a("ua0i"),k=a("c/Vb"),O=a("pLZG"),z=a("1G5W"),P=a("r0o6"),C=a("igu/"),M=a("+Tzo"),T=a("fXoL"),X=a("dEAy"),_=a("bNXi"),D=a("qAZ0"),I=a("oyxB"),N=a("rMZv"),W=a("0zwC"),E=a("eHCX"),L=a("nJia"),w=a("Nqz0"),A=a("Q8cG"),R=a("ZyQt"),V=a("OzZK"),x=a("RwU8"),F=a("C2AL"),B=a("glKu"),j=a("B+r4"),U=a("zAKX"),q=a("0lU3"),Y=((o=function(){function n(){c(this,n)}return l(n,[{key:"transform",value:function(n){var t="";n.forEach(function(n,e){t+=n+", "});var e=null==t?void 0:t.lastIndexOf(", ");return null==t?void 0:t.substring(0,e)}}]),n}()).\u0275fac=function(n){return new(n||o)},o.\u0275pipe=T.Qb({name:"listToString",type:o,pure:!0}),o),$=function(){return["."]},J=function(){return{tab:"non-complex"}};function Z(n,t){1&n&&(T.Xb(0,"a",9),T.Xc(1,"CCM - Non-Complex"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,$))("queryParams",T.xc(3,J))}var G=function(){return{tab:"complex"}};function H(n,t){1&n&&(T.Xb(0,"a",9),T.Xc(1,"CCM - Complex"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,$))("queryParams",T.xc(3,G))}var K=function(){return{tab:"rpm-dst"}};function Q(n,t){1&n&&(T.Xb(0,"a",9),T.Xc(1,"RPM - Device Education"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,$))("queryParams",T.xc(3,K))}var nn=function(){return{tab:"rpm-vitals"}};function tn(n,t){1&n&&(T.Xb(0,"a",9),T.Xc(1,"RPM - Vitals Compliance"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,$))("queryParams",T.xc(3,nn))}var en=function(){return{tab:"rpm-tms"}};function an(n,t){1&n&&(T.Xb(0,"a",9),T.Xc(1,"RPM - TMS"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,$))("queryParams",T.xc(3,en))}function ln(n,t){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var e=T.ic().$implicit;T.Db(1),T.ad(" ",null==e?null:e.addOnCount," x ",e.addOnCodes," ")}}function cn(n,t){1&n&&(T.Vb(0),T.Xc(1," N/A "),T.Ub())}function on(n,t){if(1&n&&(T.Vb(0),T.Xb(1,"td"),T.Xc(2),T.Wb(),T.Ub()),2&n){var e=T.ic().$implicit;T.Db(2),T.Yc(e.totalTimeSpent)}}function rn(n,t){1&n&&(T.Xb(0,"td"),T.Xc(1,"N/A"),T.Wb())}function sn(n,t){1&n&&(T.Vb(0),T.Xb(1,"nz-tag"),T.Xc(2,"Notes Sent"),T.Wb(),T.Ub())}function un(n,t){1&n&&(T.Vb(0),T.Xb(1,"nz-tag"),T.Xc(2,"PoC Sent"),T.Wb(),T.Ub())}function bn(n,t){1&n&&(T.Vb(0),T.Xb(1,"nz-tag"),T.Xc(2,"DFT Sent"),T.Wb(),T.Ub())}function fn(n,t){1&n&&(T.Vb(0),T.Xb(1,"nz-tag"),T.Xc(2,"Transmitted"),T.Wb(),T.Ub())}function dn(n,t){1&n&&(T.Vb(0),T.Xb(1,"nz-tag"),T.Xc(2,"Signed-Off"),T.Wb(),T.Ub())}function gn(n,t){if(1&n&&(T.Vb(0),T.Vc(1,sn,3,0,"ng-container",12),T.jc(2,"keyvalue"),T.Vc(3,un,3,0,"ng-container",12),T.jc(4,"keyvalue"),T.Vc(5,bn,3,0,"ng-container",12),T.jc(6,"keyvalue"),T.Vc(7,fn,3,0,"ng-container",12),T.jc(8,"keyvalue"),T.Vc(9,dn,3,0,"ng-container",12),T.jc(10,"keyvalue"),T.Ub()),2&n){var e,i,a,l,c=T.ic().$implicit,o=null;T.Db(1),T.rc("ngIf",3>(null==(e=T.kc(2,5,null==c?null:c.transmissionState))?null:e.length)&&(null==c||null==c.transmissionState?null:c.transmissionState.MDM_PATIENT_NOTES)),T.Db(2),T.rc("ngIf",3>(null==(i=T.kc(4,7,null==c?null:c.transmissionState))?null:i.length)&&(null==c||null==c.transmissionState?null:c.transmissionState.MDM_PLAN_OF_CARE_NOTES)),T.Db(2),T.rc("ngIf",3>(null==(a=T.kc(6,9,null==c?null:c.transmissionState))?null:a.length)&&(null==c||null==c.transmissionState?null:c.transmissionState.DFT)),T.Db(2),T.rc("ngIf",3===(null==(l=T.kc(8,11,null==c?null:c.transmissionState))?null:l.length)),T.Db(2),T.rc("ngIf",!(null!=c&&c.transmissionState)||0===(null==(o=T.kc(10,13,null==c?null:c.transmissionState))?null:o.length))}}function hn(n,t){if(1&n){var e=T.Yb();T.Vb(0),T.Xb(1,"button",21),T.ec("click",function(){T.Lc(e);var n=T.ic().$implicit;return T.ic().signOffPatient(n)}),T.Xc(2," Sign-Off "),T.Wb(),T.Ub()}if(2&n){var i=T.ic().$implicit;T.Db(1),T.rc("disabled",null==i?null:i.signedOff)}}function vn(n,t){if(1&n&&(T.Xb(0,"a",22),T.Sb(1,"app-icons",23),T.Wb()),2&n){T.ic();var e=T.Ic(31);T.rc("nzDropdownMenu",e)}}function pn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"li",24),T.ec("click",function(){T.Lc(e);var n=T.ic().$implicit;return T.ic().revokePatientSignOf(null==n?null:n.signOffId)}),T.Xc(1," Revoke Sign-off "),T.Wb()}}function mn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"li",25),T.ec("click",function(){T.Lc(e);var n=T.ic().$implicit;return T.ic().transmitDFT(null==n?null:n.signOffId)}),T.Xc(1," Transmit DFT "),T.Wb()}}function yn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"li",25),T.ec("click",function(){T.Lc(e);var n=T.ic(2).$implicit;return T.ic().transmitMDM(null==n?null:n.signOffId)}),T.Xc(1," Transmit MDM "),T.Wb()}}function Sn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"li",25),T.ec("click",function(){T.Lc(e);var n=T.ic(2).$implicit;return T.ic().viewPDF(null==n||null==n.fileNames?null:n.fileNames.PATIENT_NOTES)}),T.Xc(1," View Patient Notes PDF "),T.Wb()}}function kn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"li",25),T.ec("click",function(){T.Lc(e);var n=T.ic(2).$implicit;return T.ic().viewPDF(null==n||null==n.fileNames?null:n.fileNames.PLAN_OF_CARE_NOTES)}),T.Xc(1," View Patient PoC PDF "),T.Wb()}}function On(n,t){if(1&n&&(T.Vb(0),T.Vc(1,yn,2,0,"li",20),T.Vc(2,Sn,2,0,"li",20),T.Vc(3,kn,2,0,"li",20),T.Ub()),2&n){var e=T.ic().$implicit;T.Db(1),T.rc("ngIf",null==e?null:e.signedOff),T.Db(1),T.rc("ngIf",null==e||null==e.fileNames?null:e.fileNames.PATIENT_NOTES),T.Db(1),T.rc("ngIf",null==e||null==e.fileNames?null:e.fileNames.PLAN_OF_CARE_NOTES)}}function zn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"tr"),T.Xb(1,"td",10),T.ec("nzCheckedChange",function(n){T.Lc(e);var i=t.$implicit;return T.ic().onItemChecked(i.id,n)}),T.Wb(),T.Xb(2,"td"),T.Xc(3),T.Wb(),T.Xb(4,"td"),T.Sb(5,"app-patient-status-tag",11),T.Wb(),T.Xb(6,"td"),T.Xc(7),T.jc(8,"date"),T.Wb(),T.Xb(9,"td"),T.Xc(10),T.Wb(),T.Xb(11,"td"),T.Xc(12),T.Wb(),T.Xb(13,"td"),T.Vc(14,ln,2,2,"ng-container",12),T.Vc(15,cn,2,0,"ng-container",12),T.Wb(),T.Xb(16,"td"),T.Xb(17,"strong",13),T.jc(18,"listToString"),T.Xc(19),T.jc(20,"listToString"),T.Wb(),T.Wb(),T.Vb(21),T.Vc(22,on,3,1,"ng-container",14),T.Vc(23,rn,2,0,"ng-template",null,15,T.Wc),T.Ub(),T.Xb(25,"td"),T.Vc(26,gn,11,15,"ng-container",12),T.Vc(27,hn,3,1,"ng-container",12),T.Wb(),T.Xb(28,"td"),T.Vc(29,vn,2,1,"a",16),T.Xb(30,"nz-dropdown-menu",null,17),T.Xb(32,"ul",18),T.Vc(33,pn,2,0,"li",19),T.Vc(34,mn,2,0,"li",20),T.Vc(35,On,4,3,"ng-container",14),T.Wb(),T.Wb(),T.Wb(),T.Wb()}if(2&n){var i=t.$implicit,a=T.Ic(24),l=T.ic();T.Db(1),T.rc("nzChecked",l.setOfCheckedId.has(i.id))("nzDisabled",null==i?null:i.signedOff),T.Db(2),T.Yc(i.name),T.Db(2),T.rc("patientStatus",null==i?null:i.status)("isToolTipEnabled",!0),T.Db(2),T.Yc(T.lc(8,21,i.dateOfBirth,"mediumDate")),T.Db(3),T.Yc(i.patientIdentifier||"N/A"),T.Db(2),T.Yc(i.cptCodes),T.Db(2),T.rc("ngIf",0<(null==i?null:i.addOnCount)),T.Db(1),T.rc("ngIf",0===(null==i?null:i.addOnCount)),T.Db(2),T.rc("nzTooltipTitle",T.kc(18,24,null==i?null:i.diagnosisCodes)),T.Db(2),T.Zc(" ",T.kc(20,26,null==i?null:i.diagnosisCodes)," "),T.Db(3),T.rc("ngIf","99453"!==(null==i?null:i.cptCodes[0])&&"99454"!==(null==i?null:i.cptCodes[0]))("ngIfElse",a),T.Db(4),T.rc("ngIf",null==i?null:i.signedOff),T.Db(1),T.rc("ngIf",!(null!=i&&i.signedOff)),T.Db(2),T.rc("ngIf",null==i?null:i.signedOff),T.Db(4),T.rc("ngIf",null==i?null:i.signedOff),T.Db(1),T.rc("ngIf",null==i?null:i.signedOff),T.Db(1),T.rc("ngIf","99453"!==(null==i?null:i.cptCodes[0])&&"99454"!==(null==i?null:i.cptCodes[0]))("ngIfElse",a)}}function Pn(n,t){if(1&n){var e=T.Yb();T.Xb(0,"div",26),T.Xb(1,"div",27),T.Xb(2,"nz-select",28),T.ec("ngModelChange",function(n){return T.Lc(e),T.ic().type=n})("ngModelChange",function(n){return T.Lc(e),T.ic().filter(n)}),T.Sb(3,"nz-option",29),T.Sb(4,"nz-option",30),T.Sb(5,"nz-option",31),T.Sb(6,"nz-option",32),T.Sb(7,"nz-option",33),T.Wb(),T.Xb(8,"nz-date-picker",34),T.ec("ngModelChange",function(n){return T.Lc(e),T.ic().yearMonth=n})("ngModelChange",function(){return T.Lc(e),T.ic().getBillablePatients()}),T.Wb(),T.Wb(),T.Wb()}if(2&n){var i=T.ic();T.Db(2),T.rc("ngModel",i.type),T.Db(1),T.rc("nzValue","ALL"),T.Db(1),T.rc("nzValue","NEW"),T.Db(1),T.rc("nzValue","SIGNED_OFF"),T.Db(1),T.rc("nzValue","DFT"),T.Db(1),T.rc("nzValue","MDM"),T.Db(1),T.rc("nzDisabledDate",i.disabledDate)("ngModel",i.yearMonth)("nzAllowClear",!1)}}var Cn,Mn,Tn,Xn=function(){return[50,100,200,500]},_n=function(){return["3%","15%","2%","10%","5%","5%","10%","27%","5%","5%","10%","3%"]},Dn=((Cn=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(a,e);var i=t(a);function a(n,t,e,l,o,r,s){var u;return c(this,a),(u=i.call(this))._router=n,u._datePipe=t,u._modalService=e,u._billingService=l,u._activatedRoute=o,u._dataSharingService=r,u._notificationsService=s,u.disabledDate=function(n){return Object(p.a)(n,new Date)>0},u.type="ALL",u.checked=!1,u.indeterminate=!1,u.setOfCheckedId=new Set,u.yearMonth=new Date((new Date).setMonth((new Date).getMonth()-1)),u._routeHelperService.isPrimaryActionTriggered().pipe(Object(O.a)(function(n){return!!n}),Object(z.a)(u.unsubscribed)).subscribe(function(){return u.bulkSignOff()}),u._routeHelperService.getMultiActionTriggered().pipe(Object(O.a)(function(n){return!!n}),Object(z.a)(u.unsubscribed)).subscribe(function(n){return u.bulkTransmit(n)}),u}return l(a,[{key:"onItemChecked",value:function(n,t){this.updateCheckedSet(n,t),this.refreshCheckedStatus()}},{key:"onAllChecked",value:function(n){var t=this;this.billablePatients.filter(function(n){return!n.signedOff}).forEach(function(e){var i=e.id;return t.updateCheckedSet(i,n)}),this.refreshCheckedStatus()}},{key:"refreshCheckedStatus",value:function(){var n=this;this.checked=this.billablePatients.every(function(t){var e=t.id;return n.setOfCheckedId.has(e)}),this.indeterminate=this.billablePatients.some(function(t){var e=t.id;return n.setOfCheckedId.has(e)})&&!this.checked}},{key:"updateCheckedSet",value:function(n,t){t?this.setOfCheckedId.add(n):this.setOfCheckedId.delete(n)}},{key:"ngOnInit",value:function(){var n=this;this._dataSharingService.assignedTenantSettings.pipe(Object(z.a)(this.unsubscribed)).subscribe(function(t){t&&(null==t?void 0:t.size)&&(t.forEach(function(t,e){var i,a,l,c,o,r;(null===(l=null===(a=null===(i=null==t?void 0:t.redoxConfig)||void 0===i?void 0:i.configs[M.b.FINANCIAL])||void 0===a?void 0:a.sourceId)||void 0===l?void 0:l.length)&&(n.dftEnabled=!!(null===(r=null===(o=null===(c=null==t?void 0:t.redoxConfig)||void 0===c?void 0:c.configs[M.b.FINANCIAL])||void 0===o?void 0:o.sourceId)||void 0===r?void 0:r.length))}),n.dftEnabled||n._modalService.confirm({nzTitle:"Charge Push",nzContent:"The ability to push charges is not enabled currently, please contact your admin",nzCancelText:null,nzClosable:!1,nzMaskClosable:!1,nzOnOk:function(){return n._router.navigate(["/dashboard"])}}),n.getBillablePatients(),n._dataSharingService.onSubTenantChange().pipe(Object(z.a)(n.unsubscribed)).subscribe(function(t){return n.getBillablePatients()}))})}},{key:"getBillablePatients",value:function(){var n,t,e=this;switch(this.loading=!0,this._activatedRoute.snapshot.queryParams.tab){case"non-complex":n=k.a.NON_COMPLEX_TMS,t=S.a.CCM;break;case"complex":n=k.a.COMPLEX_TMS,t=S.a.CCM;break;case"rpm-dst":n=k.a.PATIENT_EDUCATION_APPOINTMENT,t=S.a.RPM;break;case"rpm-vitals":n=k.a.CARE_PLAN_MONITORING,t=S.a.RPM;break;case"rpm-tms":n=k.a.TREATMENT_MANAGEMENT_SERVICE,t=S.a.RPM}var i={yearMonth:this._datePipe.transform(this.yearMonth,"yyyy-MM"),episodeType:t,baseCode:n};this._billingService.fetchBillablePatients(i).subscribe(function(n){e.loading=!1,e.originalBillablePatients=JSON.parse(JSON.stringify(n)),e.billablePatients=n},function(){return e.loading=!1})}},{key:"filter",value:function(n){var t,e,i,a;switch(this.billablePatients=JSON.parse(JSON.stringify(this.originalBillablePatients)),n){case"ALL":this.billablePatients=JSON.parse(JSON.stringify(this.originalBillablePatients));break;case"NEW":this.billablePatients=null===(t=this.billablePatients)||void 0===t?void 0:t.filter(function(n){var t;return!((null==n?void 0:n.signedOff)||(null==n?void 0:n.transmissionState)&&(null===(t=Object.keys(null==n?void 0:n.transmissionState))||void 0===t?void 0:t.length))});break;case"SIGNED_OFF":this.billablePatients=null===(e=this.billablePatients)||void 0===e?void 0:e.filter(function(n){var t;return(null==n?void 0:n.signedOff)&&(!(null==n?void 0:n.transmissionState)||!(null===(t=Object.keys(null==n?void 0:n.transmissionState))||void 0===t?void 0:t.length))});break;case"DFT":this.billablePatients=null===(i=this.billablePatients)||void 0===i?void 0:i.filter(function(n){return!!(null==n?void 0:n.transmissionState)&&-1!==Object.keys(null==n?void 0:n.transmissionState).findIndex(function(n){return"DFT"===n})});break;case"MDM":this.billablePatients=null===(a=this.billablePatients)||void 0===a?void 0:a.filter(function(n){return!!(null==n?void 0:n.transmissionState)&&(-1!==Object.keys(null==n?void 0:n.transmissionState).findIndex(function(n){return"MDM_PATIENT_NOTES"===n})||-1!==Object.keys(null==n?void 0:n.transmissionState).findIndex(function(n){return"MDM_PLAN_OF_CARE_NOTES"===n}))})}}},{key:"signOffPatient",value:function(n){var t=this;this.loading=!0;var e={patientId:null==n?void 0:n.id,baseCode:null==n?void 0:n.cptCodes[0],addOnCode:null==n?void 0:n.addOnCodes[0],addOnCodeCount:null==n?void 0:n.addOnCount,yearMonth:this._datePipe.transform(this.yearMonth,"yyyy-MM")};this._billingService.signOffPatient(e).subscribe(function(){t.loading=!1,t._notificationsService.success("Billing","Sign-off successful"),n.signedOff=!0,t.getBillablePatients()},function(n){var e;t.loading=!1,t._notificationsService.error("Billing",null===(e=null==n?void 0:n.error)||void 0===e?void 0:e.message)})}},{key:"bulkSignOff",value:function(){var n=this;this.loading=!0;var t=[];if(this.billablePatients.forEach(function(e){if(n.setOfCheckedId.has(null==e?void 0:e.id)){var i={patientId:null==e?void 0:e.id,baseCode:null==e?void 0:e.cptCodes[0],addOnCode:null==e?void 0:e.addOnCodes[0],addOnCodeCount:null==e?void 0:e.addOnCount,yearMonth:n._datePipe.transform(n.yearMonth,"yyyy-MM")};t.push(i)}}),!(null==t?void 0:t.length))return this._notificationsService.error("Billing","No patients are selected!"),void(this.loading=!1);this._billingService.bulkSignOffPatients(t).subscribe(function(){n.setOfCheckedId=new Set,n._notificationsService.success("Billing","Bulk Sign-Off successful"),n.getBillablePatients()},function(t){var e;n.loading=!1,n._notificationsService.error("Billing",null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)})}},{key:"revokePatientSignOf",value:function(n){var t=this;this._billingService.revokeSignOff(n).subscribe(function(){t._notificationsService.success("Billing","Sign-off revoked successfully!"),t.getBillablePatients()})}},{key:"viewPDF",value:function(n){window.open("https://api.cooeyhealth.com/v1/assets/view/?filename=".concat(n,"&asset-type=REPORTS"),"_blank")}},{key:"transmitDFT",value:function(n){var t=this;this._billingService.transmitDFTMessage(n).subscribe(function(){t._notificationsService.success("Billing","DFT message is being sent, please wait a few moments!"),t.getBillablePatients()})}},{key:"transmitMDM",value:function(n){var t=this;["rpm-dst","rpm-vitals"].includes(this._activatedRoute.snapshot.queryParams.tab)?this._notificationsService.error("Media","Media message is not applicable for this service code"):this._billingService.transmitMDM(n).subscribe(function(){t._notificationsService.success("Billing","MDM message is being sent, please wait a few moments!"),t.getBillablePatients()})}},{key:"bulkTransmit",value:function(n){var t=this;if("DFT"!==n&&["rpm-dst","rpm-vitals"].includes(this._activatedRoute.snapshot.queryParams.tab))this._notificationsService.error("Media","Media message is not applicable for this service code");else{var e;switch(this._activatedRoute.snapshot.queryParams.tab){case"non-complex":e=k.a.NON_COMPLEX_TMS;break;case"complex":e=k.a.COMPLEX_TMS;break;case"rpm-dst":e=k.a.PATIENT_EDUCATION_APPOINTMENT;break;case"rpm-vitals":e=k.a.CARE_PLAN_MONITORING;break;case"rpm-tms":e=k.a.TREATMENT_MANAGEMENT_SERVICE}var i=this._datePipe.transform(this.yearMonth,"yyyy-MM"),a=this._billingService.bulkTransmitDFTMessage(e,i),l=this._billingService.bulkTransmitMDM(e,i);Object(P.a)(function(){return"DFT"===n},a,l).subscribe(function(){t._notificationsService.success("Billing","".concat(n," messages for already signed-off patients are being sent!")),t.getBillablePatients()})}}}]),a}(m.a)).\u0275fac=function(n){return new(n||Cn)(T.Rb(u.g),T.Rb(r.e),T.Rb(X.f),T.Rb(y.a),T.Rb(u.a),T.Rb(C.a),T.Rb(_.b))},Cn.\u0275cmp=T.Lb({type:Cn,selectors:[["app-billable-users"]],features:[T.Cb([r.e]),T.Ab],decls:40,vars:14,consts:[[3,"nzSpinning"],["nzLinkRouter","",3,"nzTabBarExtraContent","nzSelectedIndexChange"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],[1,"container"],[3,"nzData","nzPageSize","nzPageSizeOptions","nzTotal","nzFrontPagination","nzShowSizeChanger","nzWidthConfig"],["billingTable",""],[3,"nzChecked","nzIndeterminate","nzCheckedChange"],[4,"ngFor","ngForOf"],["actions",""],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],[3,"nzChecked","nzDisabled","nzCheckedChange"],[3,"patientStatus","isToolTipEnabled"],[4,"ngIf"],["nz-typography","","nzEllipsis","","nzEllipsisRows","2","nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf","ngIfElse"],["minutes_not_applicable",""],["nz-dropdown","",3,"nzDropdownMenu",4,"ngIf"],["actionsSubMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-typography","","nzType","danger","nz-menu-item","",3,"click",4,"ngIf"],["nz-typography","","nz-menu-item","",3,"click",4,"ngIf"],["nz-button","","nzType","primary","nzSize","small",3,"disabled","click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","26px"],["nz-typography","","nzType","danger","nz-menu-item","",3,"click"],["nz-typography","","nz-menu-item","",3,"click"],["nz-row",""],["nz-col","","nzSpan","24"],[3,"ngModel","ngModelChange"],["nzLabel","All",3,"nzValue"],["nzLabel","To be signed off",3,"nzValue"],["nzLabel","Signed Off",3,"nzValue"],["nzLabel","DFT Sent",3,"nzValue"],["nzLabel","MDM Sent",3,"nzValue"],["nzMode","month",3,"nzDisabledDate","ngModel","nzAllowClear","ngModelChange"]],template:function(n,t){if(1&n&&(T.Xb(0,"nz-spin",0),T.Xb(1,"nz-tabset",1),T.ec("nzSelectedIndexChange",function(){return t.getBillablePatients()}),T.Xb(2,"nz-tab"),T.Vc(3,Z,2,4,"a",2),T.Wb(),T.Xb(4,"nz-tab"),T.Vc(5,H,2,4,"a",2),T.Wb(),T.Xb(6,"nz-tab"),T.Vc(7,Q,2,4,"a",2),T.Wb(),T.Xb(8,"nz-tab"),T.Vc(9,tn,2,4,"a",2),T.Wb(),T.Xb(10,"nz-tab"),T.Vc(11,an,2,4,"a",2),T.Wb(),T.Wb(),T.Xb(12,"div",3),T.Xb(13,"nz-table",4,5),T.Xb(15,"thead"),T.Xb(16,"tr"),T.Xb(17,"th",6),T.ec("nzCheckedChange",function(n){return t.onAllChecked(n)}),T.Wb(),T.Xb(18,"th"),T.Xc(19,"Patient"),T.Wb(),T.Sb(20,"th"),T.Xb(21,"th"),T.Xc(22,"DoB"),T.Wb(),T.Xb(23,"th"),T.Xc(24,"MRN"),T.Wb(),T.Xb(25,"th"),T.Xc(26,"CPT"),T.Wb(),T.Xb(27,"th"),T.Xc(28,"Addon"),T.Wb(),T.Xb(29,"th"),T.Xc(30,"Diagnosis"),T.Wb(),T.Xb(31,"th"),T.Xc(32,"Minutes"),T.Wb(),T.Xb(33,"th"),T.Xc(34,"Action"),T.Wb(),T.Sb(35,"th"),T.Wb(),T.Wb(),T.Xb(36,"tbody"),T.Vc(37,zn,36,28,"tr",7),T.Wb(),T.Wb(),T.Wb(),T.Vc(38,Pn,9,9,"ng-template",null,8,T.Wc),T.Wb()),2&n){var e=T.Ic(14),i=T.Ic(39);T.rc("nzSpinning",t.loading),T.Db(1),T.rc("nzTabBarExtraContent",i),T.Db(12),T.rc("nzData",t.billablePatients)("nzPageSize",50)("nzPageSizeOptions",T.xc(12,Xn))("nzTotal",null==t.billablePatients?null:t.billablePatients.length)("nzFrontPagination",!0)("nzShowSizeChanger",!0)("nzWidthConfig",T.xc(13,_n)),T.Db(4),T.rc("nzChecked",t.checked)("nzIndeterminate",t.indeterminate),T.Db(20),T.rc("ngForOf",e.data)}},directives:[D.a,I.d,I.a,I.c,N.f,N.n,N.o,N.e,N.l,N.m,N.i,r.p,I.b,u.j,N.j,W.a,r.q,E.a,L.d,w.e,A.c,R.a,V.a,x.a,F.a,w.a,w.b,B.a,A.e,j.c,j.a,U.d,s.u,s.x,U.a,q.a],pipes:[r.e,Y,r.j],styles:["[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select{width:150px;margin-right:10px}[_nghost-%COMP%]     .ant-tag{display:block;text-align:center;margin-bottom:5px}"]}),Cn),In=a("T5gh"),Nn=a("bA1+"),Wn=[{path:"",pathMatch:"full",data:{header:!0,title:"Billable Patients",searchEnabled:!1,primaryAction:{title:"Bulk Sign-Off",permissions:[],enabled:!0},secondaryAction:{},multiAction:{title:"Bulk Transmit",actions:[{title:"Financial",value:"DFT"},{title:"Media",value:"MDM"}],enabled:!0},privileges:[],showTenantToggle:!0,subTenantToggleMode:"SINGLE"},component:Dn,canActivate:[In.a,Nn.a]}],En=((Tn=function n(){c(this,n)}).\u0275mod=T.Pb({type:Tn}),Tn.\u0275inj=T.Ob({factory:function(n){return new(n||Tn)},imports:[[u.k.forChild(Wn)],u.k]}),Tn),Ln=((Mn=function n(t){c(this,n),this.translationService=t,t.setLanguage()}).\u0275mod=T.Pb({type:Mn}),Mn.\u0275inj=T.Ob({factory:function(n){return new(n||Mn)(T.bc(v.a))},imports:[[r.c,g.a,s.o,u.k,f.a.forRoot(),b.a,h.a,En,d.a]]}),Mn)}}])}();