!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&l(e,n)}function l(e,n){return(l=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function r(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,i=s(e);if(n){var a=s(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return c(this,t)}}function c(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{D4zX:function(t,i,l){"use strict";l.r(i),l.d(i,"LeadsModule",function(){return Hr});var c=l("bKRa"),s=l("ofXK"),u=l("3Pt+"),b=l("tyNb"),p=l("T5gh"),f=l("qQcL"),h=l("VGjC"),g=l("IVUT"),m=function e(){d(this,e),this.personInfo=new v,this.patientInfo=new v},v=function e(){d(this,e)},C=l("AytR"),z=l("WoUL"),y=l("yob6"),S=l("fXoL"),I=l("bNXi"),X=l("ocnv"),D=l("S5rh"),k=l("B+r4"),W=l("PTRe"),T=l("EGpF"),E=l("dRHE");function w(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",25),S.Xb(1,"strong",4),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"div",5),S.Xb(5,"nz-form-item",6),S.Xb(6,"nz-form-control"),S.Xb(7,"input",26),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().lead.patientInfo.firstName=e}),S.jc(8,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(9,"nz-form-item",6),S.Xb(10,"nz-form-control"),S.Xb(11,"input",27),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().lead.patientInfo.middleName=e}),S.jc(12,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(13,"nz-form-item",6),S.Xb(14,"nz-form-control"),S.Xb(15,"input",28),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().lead.patientInfo.lastName=e}),S.jc(16,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(17,"div",5),S.Xb(18,"nz-form-item",10),S.Xb(19,"nz-form-control"),S.Xb(20,"input",29),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().lead.patientInfo.email=e}),S.jc(21,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(22,"nz-form-item",10),S.Xb(23,"nz-form-control"),S.Xb(24,"input",30),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().lead.patientInfo.phoneNumber=e}),S.jc(25,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.ic();S.Db(2),S.Zc("* ",S.kc(3,11,"COMMON.PATIENTINFO"),":"),S.Db(5),S.sc("placeholder",S.kc(8,13,"COMMON.FIRSTNAME")),S.rc("ngModel",i.lead.patientInfo.firstName),S.Db(4),S.sc("placeholder",S.kc(12,15,"COMMON.MIDDLENAME")),S.rc("ngModel",i.lead.patientInfo.middleName),S.Db(4),S.sc("placeholder",S.kc(16,17,"COMMON.LASTNAME")),S.rc("ngModel",i.lead.patientInfo.lastName),S.Db(5),S.sc("placeholder",S.kc(21,19,"COMMON.EMAIL")),S.rc("ngModel",i.lead.patientInfo.email),S.Db(4),S.sc("placeholder",S.kc(25,21,"PORTAL.CONTACT")),S.rc("ngModel",i.lead.patientInfo.phoneNumber)}}var L,M=((L=function(e){o(t,e);var n=r(t);function t(e,i,a,o,l,r,c,s){var u;return d(this,t),(u=n.call(this))._leadsService=e,u._notificationsService=i,u._router=a,u.translationService=o,u._location=l,u._userService=r,u._leadsEventLogger=c,u._activatedRoute=s,u.languages=[],u.baseUrl=C.g.url,u.userSearch="",u.leadSameAsPatient=!0,u.lead=new m,u.mode="ADD",u.userId=localStorage.getItem("loggedInUser"),u}return a(t,[{key:"ngOnInit",value:function(){var e=this;this._leadsEventLogger.pageViewEvent(this.constructor.name,this._activatedRoute.snapshot._routerState.url),this.translationService.getMultiple("LEAD.LEAD_SUCCESS","TITLE.LEADS","LEAD.LEAD_ERROR","LEAD.LEAD_UPDATE").subscribe(function(n){return e.translatedStrings=n}),this._activatedRoute.params.forEach(function(n){e.leadId=n.id}),this.leadId&&(this.mode="EDIT",this._leadsService.getSpecificLeadForUser(this.leadId).subscribe(function(n){e.lead=n,e.getAdminNameFromAPI(e.lead.assignedTo)}))}},{key:"createLead",value:function(e){e&&("ADD"===this.mode?this.createNewLead():this.updateLead())}},{key:"createNewLead",value:function(){var e=this;this.lead.leadSameAsPatient=this.leadSameAsPatient,this._leadsService.addNewLead(this.lead).subscribe(function(){e._notificationsService.success(e.translatedStrings.get("TITLE.LEADS"),e.translatedStrings.get("LEAD.LEAD_SUCCESS")),e._router.navigate(["leads"])},function(n){n.error?n.error.forEach(function(n){return e._notificationsService.error(e.translatedStrings.get("TITLE.LEADS"),n)}):e._notificationsService.error(e.translatedStrings.get("TITLE.LEADS"),e.translatedStrings.get("LEAD.LEAD_ERROR"))})}},{key:"updateLead",value:function(){var e=this;this.goingBack||this._leadsService.updateLead(this.lead,this.leadId).subscribe(function(){e._notificationsService.success(e.translatedStrings.get("TITLE.LEADS"),e.translatedStrings.get("LEAD.LEAD_UPDATE")),e._router.navigate(["leads"])},function(){e._notificationsService.error(e.translatedStrings.get("TITLE.LEADS"),e.translatedStrings.get("LEAD.LEAD_ERROR"))})}},{key:"goBack",value:function(){this.goingBack=!0,this._location.back()}},{key:"getAdminNameFromAPI",value:function(e){var n=this;this._userService.getUser(e).subscribe(function(e){n.adminName=e.firstName+" "+e.lastName})}}]),t}(f.a)).\u0275fac=function(e){return new(e||L)(S.Rb(g.a),S.Rb(I.b),S.Rb(b.g),S.Rb(z.a),S.Rb(s.l),S.Rb(h.a),S.Rb(y.a),S.Rb(b.a))},L.\u0275cmp=S.Lb({type:L,selectors:[["app-create"]],features:[S.Ab],decls:84,vars:69,consts:[["nz-form","",3,"ngSubmit"],["leadForm","ngForm"],["title","lead",3,"defaultTitle","isSearchEnabled","actionTitle"],[1,"lead-form-container","lead-form-border-top"],[1,"input-heading"],[1,"row"],[1,"col-33"],["required","","nz-input","","formControlName","firstName",3,"placeholder","ngModel","ngModelChange"],["nz-input","","formControlName","middleName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","lastName",3,"placeholder","ngModel","ngModelChange"],[1,"col-50"],["required","","nz-input","","formControlName","email","email","",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","phoneNumber","pattern","^[0-9]{8,15}$",3,"placeholder","ngModel","ngModelChange"],["formControlName","leadSameAsPatient",1,"toggle",3,"ngModel","ngModelChange"],["class","lead-form-container lead-form-border-middle","id","leadPatientInfo",4,"ngIf"],[1,"lead-form-container","lead-form-border-middle"],["required","","nz-input","","formControlName","source",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","domain",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","lead.insuranceCarrier",3,"placeholder","ngModel","ngModelChange"],[1,"col-100"],["nz-input","","formControlName","query",3,"placeholder","ngModel","ngModelChange"],[1,"lead-form-container","lead-form-border-bottom"],["required","","nz-input","","formControlName","referredBy",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","referredTo",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","referralReason",3,"placeholder","ngModel","ngModelChange"],["id","leadPatientInfo",1,"lead-form-container","lead-form-border-middle"],["required","","nz-input","","formControlName","patientFirstName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientMiddleName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientLastName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientEmail","email","",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientPhoneNumber","pattern","^[0-9]{8,15}$",3,"placeholder","ngModel","ngModelChange"]],template:function(e,n){if(1&e){var t=S.Yb();S.Xb(0,"form",0,1),S.ec("ngSubmit",function(){S.Lc(t);var e=S.Ic(1);return n.createLead(e.valid)}),S.Sb(2,"app-header",2),S.jc(3,"translate"),S.jc(4,"translate"),S.Sb(5,"br"),S.Sb(6,"br"),S.Sb(7,"br"),S.Xb(8,"div"),S.Xb(9,"div",3),S.Xb(10,"strong",4),S.Xc(11),S.jc(12,"translate"),S.Wb(),S.Xb(13,"div",5),S.Xb(14,"nz-form-item",6),S.Xb(15,"nz-form-control"),S.Xb(16,"input",7),S.ec("ngModelChange",function(e){return n.lead.personInfo.firstName=e}),S.jc(17,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(18,"nz-form-item",6),S.Xb(19,"nz-form-control"),S.Xb(20,"input",8),S.ec("ngModelChange",function(e){return n.lead.personInfo.middleName=e}),S.jc(21,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(22,"nz-form-item",6),S.Xb(23,"nz-form-control"),S.Xb(24,"input",9),S.ec("ngModelChange",function(e){return n.lead.personInfo.lastName=e}),S.jc(25,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(26,"div",5),S.Xb(27,"nz-form-item",10),S.Xb(28,"nz-form-control"),S.Xb(29,"input",11),S.ec("ngModelChange",function(e){return n.lead.personInfo.email=e}),S.jc(30,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(31,"nz-form-item",10),S.Xb(32,"nz-form-control"),S.Xb(33,"input",12),S.ec("ngModelChange",function(e){return n.lead.personInfo.phoneNumber=e}),S.jc(34,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(35,"div",5),S.Xb(36,"nz-form-item"),S.Xb(37,"nz-form-control"),S.Xb(38,"nz-switch",13),S.ec("ngModelChange",function(e){return n.leadSameAsPatient=e}),S.Wb(),S.Xc(39),S.jc(40,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Sb(41,"br"),S.Sb(42,"br"),S.Wb(),S.Vc(43,w,26,23,"div",14),S.Xb(44,"div",15),S.Xb(45,"strong",4),S.Xc(46),S.jc(47,"translate"),S.Wb(),S.Xb(48,"div",5),S.Xb(49,"nz-form-item",10),S.Xb(50,"nz-form-control"),S.Xb(51,"input",16),S.ec("ngModelChange",function(e){return n.lead.source=e}),S.jc(52,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(53,"div",5),S.Xb(54,"nz-form-item",10),S.Xb(55,"nz-form-control"),S.Xb(56,"input",17),S.ec("ngModelChange",function(e){return n.lead.domain=e}),S.jc(57,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(58,"nz-form-item",10),S.Xb(59,"nz-form-control"),S.Xb(60,"input",18),S.ec("ngModelChange",function(e){return n.lead.insuranceCarrier=e}),S.jc(61,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(62,"div",5),S.Xb(63,"nz-form-item",19),S.Xb(64,"nz-form-control"),S.Xb(65,"textarea",20),S.ec("ngModelChange",function(e){return n.lead.query=e}),S.jc(66,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(67,"div",21),S.Xb(68,"strong",4),S.Xc(69),S.jc(70,"translate"),S.Wb(),S.Xb(71,"div",5),S.Xb(72,"nz-form-item",6),S.Xb(73,"nz-form-control"),S.Xb(74,"input",22),S.ec("ngModelChange",function(e){return n.lead.referredBy=e}),S.jc(75,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(76,"nz-form-item",6),S.Xb(77,"nz-form-control"),S.Xb(78,"input",23),S.ec("ngModelChange",function(e){return n.lead.referredTo=e}),S.jc(79,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(80,"nz-form-item",6),S.Xb(81,"nz-form-control"),S.Xb(82,"input",24),S.ec("ngModelChange",function(e){return n.lead.referralReason=e}),S.jc(83,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb()}2&e&&(S.Db(2),S.sc("defaultTitle",S.kc(3,33,"LEADS.CREATE")),S.sc("actionTitle",S.kc(4,35,"LEADS.SAVE")),S.rc("isSearchEnabled",!1),S.Db(9),S.Zc("* ",S.kc(12,37,"COMMON.PERSONALINFO"),":"),S.Db(5),S.sc("placeholder",S.kc(17,39,"COMMON.FIRSTNAME")),S.rc("ngModel",n.lead.personInfo.firstName),S.Db(4),S.sc("placeholder",S.kc(21,41,"COMMON.MIDDLENAME")),S.rc("ngModel",n.lead.personInfo.middleName),S.Db(4),S.sc("placeholder",S.kc(25,43,"COMMON.LASTNAME")),S.rc("ngModel",n.lead.personInfo.lastName),S.Db(5),S.sc("placeholder",S.kc(30,45,"COMMON.EMAIL")),S.rc("ngModel",n.lead.personInfo.email),S.Db(4),S.sc("placeholder",S.kc(34,47,"PORTAL.CONTACT")),S.rc("ngModel",n.lead.personInfo.phoneNumber),S.Db(5),S.rc("ngModel",n.leadSameAsPatient),S.Db(1),S.Zc(" ",S.kc(40,49,"LEADS.LEADSAME")," "),S.Db(4),S.rc("ngIf",!n.leadSameAsPatient),S.Db(3),S.Zc("* ",S.kc(47,51,"COMMON.GENERALINFO"),":"),S.Db(5),S.sc("placeholder",S.kc(52,53,"LEADS.SOURCE")),S.rc("ngModel",n.lead.source),S.Db(5),S.sc("placeholder",S.kc(57,55,"LEADS.DOMAIN")),S.rc("ngModel",n.lead.domain),S.Db(4),S.sc("placeholder",S.kc(61,57,"LEADS.INSURANCE")),S.rc("ngModel",n.lead.insuranceCarrier),S.Db(5),S.sc("placeholder",S.kc(66,59,"LEADS.QUERY")),S.rc("ngModel",n.lead.query),S.Db(4),S.Zc("* ",S.kc(70,61,"COMMON.MEDICALINFO"),":"),S.Db(5),S.sc("placeholder",S.kc(75,63,"LEADS.REFERRER")),S.rc("ngModel",n.lead.referredBy),S.Db(4),S.sc("placeholder",S.kc(79,65,"LEADS.REFERRED")),S.rc("ngModel",n.lead.referredTo),S.Db(4),S.sc("placeholder",S.kc(83,67,"LEADS.REFREASON")),S.rc("ngModel",n.lead.referralReason))},directives:[u.F,u.v,u.w,X.b,D.a,k.c,X.c,k.a,X.a,W.b,u.d,u.C,u.u,u.k,u.e,u.A,T.a,s.q],pipes:[E.a],styles:[".top-bar[_ngcontent-%COMP%]{margin-bottom:2%}.lead-form-container[_ngcontent-%COMP%]{width:80%;background-color:var(--neutral-color);margin:auto auto 5%;justify-content:center;border:2px solid #d3d3d3;padding:2%;font-family:Nunito!important}.lead-form-border-top[_ngcontent-%COMP%]{border-bottom:0}.lead-form-border-middle[_ngcontent-%COMP%]{border-top:0;border-bottom:0}.lead-form-border-bottom[_ngcontent-%COMP%]{border-top:0}.row[_ngcontent-%COMP%]{flex:1 1 auto;margin:auto}.col-33[_ngcontent-%COMP%]{width:29%;padding:2%}.col-50[_ngcontent-%COMP%]{width:45%;padding:2%}.col-100[_ngcontent-%COMP%]{width:95%;padding:2%}.input-heading[_ngcontent-%COMP%]{color:var(--primary-color);font-size:12px;margin-left:2%;margin-top:5%;font-family:Nunito!important}.toggle[_ngcontent-%COMP%]{margin-right:2%;float:right}"]}),L),O=function e(){d(this,e)},_=function e(){d(this,e)},N=l("dEAy"),x=l("eHCX"),A=l("0lU3"),P=l("OzZK"),R=l("RwU8"),U=l("C2AL"),V=l("FwiY"),F=l("nJia");function B(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",14),S.Xb(1,"nz-form-item"),S.Xb(2,"nz-form-control",15),S.Sb(3,"input",16),S.jc(4,"translate"),S.Wb(),S.Xb(5,"nz-form-control",17),S.Xb(6,"button",18),S.ec("click",function(e){S.Lc(t);var i=n.$implicit;return S.ic().removeField(i,e)}),S.Sb(7,"i",19),S.jc(8,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=n.$implicit,a=S.ic();S.rc("nzSpan",24),S.Db(2),S.rc("nzXs",21)("nzSm",21)("nzErrorTip",(null==a.listOfControl?null:a.listOfControl.length)>=0?"Please input a task or delete this field.":"Please input atleast 1 task"),S.Db(1),S.tc("placeholder","",S.kc(4,10,"COMMON.WRITETASK"),"..."),S.rc("formControlName",i.controlInstance),S.Eb("id",i.id),S.Db(2),S.rc("nzXs",3)("nzSm",3),S.Db(2),S.sc("nzTooltipTitle",S.kc(8,12,"COMMON.REMOVETASK"))}}var j,q=function(){return{span:24,offset:0}},G=function(){return{span:24}},H=((j=function(){function e(n,t,i,a,o){d(this,e),this.formBuilder=n,this._leadsService=t,this._location=i,this._modalRef=a,this.messageService=o,this.languages=[],this.tasks=new Array,this.newFollowUp=new O,this.listOfControl=[],this.saveBtnLoading=!1}return a(e,[{key:"addField",value:function(e){e&&e.preventDefault();var n=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,t=this.listOfControl.push({id:n,controlInstance:"task".concat(n)});this.validateForm.addControl(this.listOfControl[t-1].controlInstance,new u.i(null,u.D.required))}},{key:"removeField",value:function(e,n){if(n.preventDefault(),this.listOfControl.length>1){var t=this.listOfControl.indexOf(e);this.listOfControl.splice(t,1),this.validateForm.removeControl(e.controlInstance)}}},{key:"submitForm",value:function(){var e=this;for(var n in this.saveBtnLoading=!0,this.validateForm.controls)if("INVALID"==this.validateForm.controls[n].status)return;for(var t=0;t<this.listOfControl.length;t++){var i=new _;i.completed=!1,i.description=this.validateForm.value["task".concat(t)],this.tasks.push(i)}var a=new O;a.leadId=this.leadId,a.tasks=this.tasks,a.scheduledOn=this.validateForm.value.scheduledOn.getTime(),this._leadsService.addNewFollowUp(a).subscribe(function(){e.messageService.success("Success","New Follow-Up Added Successfully."),e.saveBtnLoading=!1,e._modalRef.close(!0)},function(){e.messageService.error("Error","Something Went Wrong, Please Try Again!"),e.saveBtnLoading=!1,e._modalRef.close(!1)})}},{key:"ngOnInit",value:function(){this.validateForm=this.formBuilder.group({scheduledOn:[new Date,[u.D.required]]}),this.addField()}},{key:"goBack",value:function(){this._location.back()}}]),e}()).\u0275fac=function(e){return new(e||j)(S.Rb(u.h),S.Rb(g.a),S.Rb(s.l),S.Rb(N.e),S.Rb(I.b))},j.\u0275cmp=S.Lb({type:j,selectors:[["app-add-followup"]],decls:34,vars:17,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nz-row",""],["nz-col","","nzSpan","24"],["nz-typography",""],["nz-typography","","nzType","secondary"],["nzErrorTip","Please choose a valid date."],["formControlName","scheduledOn"],["nz-row","",3,"nzGutter"],["nz-col","","style","margin-top: 5px; margin-bottom: 5px;",3,"nzSpan",4,"ngFor","ngForOf"],["nz-col","",2,"text-align","center","margin-top","20px",3,"nzSpan"],[3,"nzXs","nzSm"],["nz-button","","nzType","dashed",1,"add-button",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",3,"nzLoading"],["nz-col","",2,"margin-top","5px","margin-bottom","5px",3,"nzSpan"],[3,"nzXs","nzSm","nzErrorTip"],["nz-input","",1,"passenger-input",3,"placeholder","formControlName"],[1,"task-action-btn",3,"nzXs","nzSm"],["nz-button","","nzType","primary","nzSize","small","nzShape","circle","nzDanger","",1,"add-button",3,"click"],["nz-icon","","nzType","minus","nz-tooltip","",3,"nzTooltipTitle"]],template:function(e,n){1&e&&(S.Xb(0,"form",0),S.ec("ngSubmit",function(){return n.submitForm()}),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"strong",3),S.Xc(4,"Add a Follow-up"),S.Wb(),S.Wb(),S.Wb(),S.Xb(5,"div",1),S.Xb(6,"div",2),S.Xb(7,"p",4),S.Xc(8," Date "),S.Wb(),S.Wb(),S.Wb(),S.Xb(9,"div",1),S.Xb(10,"div",2),S.Xb(11,"nz-form-item"),S.Xb(12,"nz-form-control",5),S.Sb(13,"nz-date-picker",6),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(14,"div",1),S.Xb(15,"div",2),S.Xb(16,"p",4),S.Xc(17," Add a task "),S.Wb(),S.Wb(),S.Wb(),S.Xb(18,"div",7),S.Vc(19,B,9,14,"div",8),S.Wb(),S.Xb(20,"div",1),S.Xb(21,"div",9),S.Xb(22,"nz-form-item"),S.Xb(23,"nz-form-control",10),S.Xb(24,"button",11),S.ec("click",function(e){return n.addField(e)}),S.Sb(25,"i",12),S.Xc(26),S.jc(27,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(28,"div",1),S.Xb(29,"div",9),S.Xb(30,"nz-form-item"),S.Xb(31,"nz-form-control",10),S.Xb(32,"button",13),S.Xc(33,"Save"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.rc("formGroup",n.validateForm),S.Db(18),S.rc("nzGutter",24),S.Db(1),S.rc("ngForOf",n.listOfControl),S.Db(2),S.rc("nzSpan",24),S.Db(2),S.rc("nzXs",S.xc(13,q))("nzSm",S.xc(14,G)),S.Db(3),S.Zc(" ",S.kc(27,11,"COMMON.ADDTASK")," "),S.Db(3),S.rc("nzSpan",24),S.Db(2),S.rc("nzXs",S.xc(15,q))("nzSm",S.xc(16,q)),S.Db(1),S.rc("nzLoading",n.saveBtnLoading))},directives:[u.F,u.v,X.b,u.m,k.c,k.a,x.a,X.c,X.a,A.a,u.u,u.k,s.p,P.a,R.a,U.a,V.a,W.b,u.d,F.d],pipes:[E.a],styles:[".save-followUp[_ngcontent-%COMP%]{padding:10px;color:var(--neutral-color);border:0;border-radius:25px;font-size:12px;width:120px;height:35px;background-color:var(--primary-color);cursor:pointer}.followUp-container[_ngcontent-%COMP%]{width:80%;margin:100px auto 5%;justify-content:center;padding:2%}.row[_ngcontent-%COMP%]{flex:1 1 auto;margin:auto}.followUp[_ngcontent-%COMP%]{padding:auto}.input-heading[_ngcontent-%COMP%]{color:var(--primary-color);font-size:12px;margin-left:2%;margin-top:5%}.add-task[_ngcontent-%COMP%]{margin:5px}.remove-task[_ngcontent-%COMP%]{border-radius:50%;padding:5px;color:var(--primary-color);border:1px solid var(--neutral-color-dark);font-size:16px;font-weight:600;width:30px;height:30px;background-color:var(--neutral-color) smoke;cursor:pointer;margin-left:2%}  .vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}  .ant-typography.ant-typography-secondary{margin-top:15px;margin-bottom:5px}  .ant-form-item{margin-bottom:0!important}.task-action-btn[_ngcontent-%COMP%]{text-align:right}.task-row[_ngcontent-%COMP%]{margin-top:5px}.ant-btn-dangerous.ant-btn-primary[_ngcontent-%COMP%]:focus,   .ant-btn-dangerous.ant-btn-primary:hover{border:1px solid;background-color:#fff1f0!important;border-color:#ffa39e!important;color:red!important}  .ant-btn-dangerous.ant-btn-primary{border:1px solid!important}"]}),j),Z=l("qAZ0");function Y(e,n){1&e&&(S.Xb(0,"div",3),S.Xb(1,"strong"),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.Yc(S.kc(3,1,"COMMON.NOFOLLOWUPS")))}function $(e,n){if(1&e&&(S.Xb(0,"div"),S.Xb(1,"strong"),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"p"),S.Xc(5),S.Wb(),S.Wb()),2&e){var t=n.$implicit,i=n.index;S.Db(2),S.ad("",S.kc(3,3,"COMMON.TASK"),": ",i+1,""),S.Db(3),S.Yc(t.description)}}function K(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div"),S.Xb(1,"div",4),S.Xb(2,"h3"),S.Xc(3),S.jc(4,"translate"),S.Wb(),S.Vc(5,$,6,5,"div",2),S.Xb(6,"button",5),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().gotoLead(e.leadId)}),S.jc(7,"translate"),S.Xc(8),S.jc(9,"translate"),S.Wb(),S.Sb(10,"br"),S.Sb(11,"br"),S.Xb(12,"div",6),S.Xb(13,"span",7),S.Xc(14),S.jc(15,"translate"),S.jc(16,"date"),S.Wb(),S.Xb(17,"span",8),S.Xc(18),S.jc(19,"translate"),S.jc(20,"date"),S.Wb(),S.Wb(),S.Sb(21,"br"),S.Wb(),S.Wb()}if(2&e){var i=n.$implicit,a=n.index;S.Db(3),S.ad("",S.kc(4,9,"COMMON.FOLLOWUP"),": #",a+1,""),S.Db(2),S.rc("ngForOf",i.tasks),S.Db(1),S.sc("nzTooltipTitle",S.kc(7,11,"LEADS.VIEW")),S.Db(2),S.Zc(" ",S.kc(9,13,"LEADS.VIEW")," "),S.Db(6),S.ad("",S.kc(15,15,"COMMON.CREATEDON"),": ",S.lc(16,17,i.createdOn,"mediumDate"),""),S.Db(4),S.ad("",S.kc(19,20,"TABLEHEADER.SCHEDULEDON"),": ",S.lc(20,22,i.scheduledOn,"mediumDate"),"")}}var Q,J=((Q=function(){function e(n,t,i){d(this,e),this._leadsService=n,this.router=t,this.translate=i,this.languages=[],this.loading=!0}return a(e,[{key:"ngOnInit",value:function(){this.getFollowUpsForUser()}},{key:"getFollowUpsForUser",value:function(){var e=this;this._leadsService.getAllFollowUpsForUser().subscribe(function(n){e.followUps=n,e.loading=!1})}},{key:"gotoLead",value:function(e){this.router.navigate(["leads/details",e])}},{key:"gotoLeads",value:function(){this.router.navigate(["leads"])}}]),e}()).\u0275fac=function(e){return new(e||Q)(S.Rb(g.a),S.Rb(b.g),S.Rb(z.a))},Q.\u0275cmp=S.Lb({type:Q,selectors:[["app-followups"]],decls:3,vars:3,consts:[[2,"min-height","80vh",3,"nzSpinning"],["id","nofollowup",4,"ngIf"],[4,"ngFor","ngForOf"],["id","nofollowup"],[1,"followup-container","nz-typography"],["nz-tooltip","",1,"goto-lead",3,"nzTooltipTitle","click"],[1,"schedule"],[1,"completed"],[1,"created"]],template:function(e,n){1&e&&(S.Xb(0,"nz-spin",0),S.Vc(1,Y,4,3,"div",1),S.Vc(2,K,22,25,"div",2),S.Wb()),2&e&&(S.rc("nzSpinning",n.loading),S.Db(1),S.rc("ngIf",!n.loading&&(null==n.followUps||0==n.followUps.length)),S.Db(1),S.rc("ngForOf",n.followUps))},directives:[Z.a,s.q,s.p,F.d],pipes:[E.a,s.e],styles:[".followup-container[_ngcontent-%COMP%]{margin:2% auto 5%;width:85%;padding:3%;border-radius:5px;background-color:var(--neutral-color)}#nofollowup[_ngcontent-%COMP%]{margin-top:2%;text-align:center}.completed[_ngcontent-%COMP%]{float:left}.completed[_ngcontent-%COMP%], .created[_ngcontent-%COMP%]{color:var(--primary-color);font-size:12px;font-weight:600}.created[_ngcontent-%COMP%]{float:right}.schedule[_ngcontent-%COMP%]{border-top:1px solid #ededed;margin:2% auto auto;padding-top:2%}.goto-lead[_ngcontent-%COMP%]{float:right;padding:10px;color:var(--neutral-color);border:0;border-radius:25px;font-size:12px;width:120px;height:35px;background-color:var(--primary-color);cursor:pointer}.tabs[_ngcontent-%COMP%]{width:90%;margin:auto}.my-leads[_ngcontent-%COMP%]{padding:10px;color:#a9a9a9;border:none;border-bottom:1px solid grey;font-size:12px;font-weight:600;width:110px;height:35px;background:transparent;cursor:pointer}"]}),Q),ee=l("c36b"),ne=l("Z93s"),te=l("+gyu"),ie=l("mUB+"),ae=l("mUTz");function oe(e,n){1&e&&(S.Xb(0,"label",11),S.Xc(1,"Required"),S.Wb())}var le,re=((le=function(){function e(n,t,i,a,o,l){d(this,e),this._modalRef=n,this._notificationsService=t,this._leadsService=i,this._leadsEventLogger=a,this._translationService=o,this._noteTemplatesService=l,this.noteObject=new ne.a,this.isLoadingSaveNote=!1,this.isInputEmpty=!1,this.config=ee.b}return a(e,[{key:"ngOnInit",value:function(){this.initTranslation()}},{key:"initTranslation",value:function(){var e,n=this,t=new Array("LEADS.LEAD_CONVERTED_SUCCESS","NOTE_ADDED_SUCCESSFULLY","COMMON.SOMETHING_WENT_WRONG","MENU.LEADS");(e=this._translationService).getMultiple.apply(e,t).subscribe(function(e){return n.translatedStrings=e})}},{key:"addNewNote",value:function(){var e=this;if(""!==this.noteObject.content){this.isInputEmpty=!1,this.isLoadingSaveNote=!0;var n={createdOn:Math.round((new Date).getTime()/1e3+900+19800).toString(),updatedOn:Math.round((new Date).getTime()/1e3+900+19800).toString(),archived:!1,leadId:this.leadId,tenantId:this.tenantId,content:this.noteObject.content};n&&""!=n.content&&this._leadsService.addNewNoteForLead(n).subscribe(function(){e._leadsEventLogger.leadsActionEvent(e.leadId,"add_note"),e.noteObject.content="",e._notificationsService.success(e.translatedStrings.get("MENU.LEADS"),e.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY")),e.isLoadingSaveNote=!1,e._modalRef.close(!0)},function(n){e._notificationsService.error(e.translatedStrings.get("MENU.LEADS"),JSON.parse(n._body).message),e.isLoadingSaveNote=!1})}else this.isInputEmpty=!0}},{key:"closeDialog",value:function(){this._modalRef.close(!1)}},{key:"onNoteChanged",value:function(e){this.isInputEmpty=0===(null==e?void 0:e.length)}},{key:"setTemplate",value:function(e){this.noteObject.content=e}},{key:"getNoteTemplates",value:function(){this.noteTemplates$=this._noteTemplatesService.fetchNoteTemplates(0,100,null,this.tenantId)}}]),e}()).\u0275fac=function(e){return new(e||le)(S.Rb(N.e),S.Rb(I.b),S.Rb(g.a),S.Rb(y.a),S.Rb(z.a),S.Rb(te.a))},le.\u0275cmp=S.Lb({type:le,selectors:[["app-add-leads-note"]],inputs:{leadId:"leadId",tenantId:"tenantId"},decls:19,vars:17,consts:[["id","patient"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"ngModel","placeholder","config","ngModelChange"],["note",""],["style","color:red",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","8"],[3,"note","onTemplateSelected"],["nz-col","","nzSpan","8","nzOffset","16",2,"text-align","right"],["nz-button","","nzType","primary",3,"nzLoading","click"],[2,"color","red"]],template:function(e,n){1&e&&(S.Xb(0,"strong"),S.Xb(1,"p",0),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Wb(),S.Xb(4,"div",1),S.Xb(5,"div",2),S.Xb(6,"angular-editor",3,4),S.ec("ngModelChange",function(e){return n.noteObject.content=e})("ngModelChange",function(e){return n.onNoteChanged(e)}),S.jc(8,"translate"),S.Wb(),S.Vc(9,oe,2,0,"label",5),S.Wb(),S.Wb(),S.Sb(10,"br"),S.Xb(11,"div",6),S.Xb(12,"div",7),S.Xb(13,"app-note-template-picker",8),S.ec("onTemplateSelected",function(e){return n.setTemplate(e)}),S.Wb(),S.Wb(),S.Wb(),S.Xb(14,"div",1),S.Xb(15,"div",9),S.Xb(16,"button",10),S.ec("click",function(){return n.addNewNote()}),S.Xc(17),S.jc(18,"translate"),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.Yc(S.kc(3,11,"COMMON.ADD_NOTES")),S.Db(2),S.rc("nzGutter",16),S.Db(1),S.rc("nzSpan",24),S.Db(1),S.sc("placeholder",S.kc(8,13,"COMMON.ENTER_NOTES")),S.rc("ngModel",n.noteObject.content)("config",n.config),S.Db(3),S.rc("ngIf",n.isInputEmpty),S.Db(4),S.rc("note",n.noteObject.content),S.Db(1),S.rc("nzGutter",16),S.Db(2),S.rc("nzLoading",n.isLoadingSaveNote),S.Db(1),S.Zc(" ",S.kc(18,15,"COMMON.SAVE")," "))},directives:[k.c,k.a,ie.a,u.u,u.x,s.q,ae.a,P.a,R.a,U.a],pipes:[E.a],styles:[""]}),le),ce=l("1G5W"),se=l("IzEk"),de=l("CLv8"),ue=l("rqHP"),be=l("igu/"),pe=l("6i1W"),fe=l("1jOk"),he=function e(){d(this,e),this.unit="CMS"},ge=function e(){d(this,e),this.unit="CMS"},me=function e(){d(this,e),this.unit="CMS"},ve=function e(){d(this,e),this.unit="KGS"},Ce=l("gXqy"),ze=l("bE2y");function ye(e,n){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"COMMON.REQUIRED")," "))}function Se(e,n){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function Ie(e,n){if(1&e&&(S.Vc(0,ye,3,3,"ng-container",29),S.Vc(1,Se,3,3,"ng-container",29)),2&e){var t=n.$implicit;S.rc("ngIf",t.hasError("required")),S.Db(1),S.rc("ngIf",t.hasError("email"))}}function Xe(e,n){if(1&e&&(S.Xb(0,"label",30),S.Xc(1),S.Wb()),2&e){var t=n.$implicit;S.rc("nzValue",null==t?null:t.key),S.Db(1),S.Zc(" ",null==t?null:t.value," ")}}function De(e,n){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"COMMON.REQUIRED")," "))}function ke(e,n){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function We(e,n){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function Te(e,n){if(1&e&&(S.Vc(0,De,3,3,"ng-container",29),S.Vc(1,ke,3,3,"ng-container",29),S.Vc(2,We,3,3,"ng-container",29)),2&e){var t=n.$implicit;S.rc("ngIf",t.hasError("required")),S.Db(1),S.rc("ngIf",t.hasError("minlength")),S.Db(1),S.rc("ngIf",t.hasError("pattern"))}}var Ee,we,Le=function(){return[16,16]},Me=((Ee=function(){function e(n,t,i,a,o){var l,r=this;d(this,e),this._modalRef=n,this._leadsService=t,this._notificationsService=i,this.translationService=a,this._dataSharingService=o,this.genders=Object(fe.b)(),this.disabledDates=function(e){return Object(Ce.a)(new Date,e)<0},null===(l=this._dataSharingService.tenantSettings)||void 0===l||l.pipe(Object(se.a)(1)).subscribe(function(e){var n;e&&(r.tenantConfig=e,r.countryCode=null===(n=r.tenantConfig)||void 0===n?void 0:n.countryCode)}),this.translationService.getMultiple("LEAD.LEAD_SUCCESS","TITLE.LEADS","LEAD.LEAD_ERROR","LEAD.LEAD_UPDATE").subscribe(function(e){return r.translatedStrings=e})}return a(e,[{key:"ngOnInit",value:function(){var e,n,t,i,a,o,l,r,c,s,d,b,p,f,h,g,m,v,C,z,y,S,I,X,D,k,W,T,E,w,L,M,O=this;this.leadForm=new u.l({firstName:new u.i(null===(e=this.lead.patientInfo)||void 0===e?void 0:e.firstName,u.D.required),lastName:new u.i(null===(n=this.lead.patientInfo)||void 0===n?void 0:n.lastName,u.D.required),email:new u.i(null===(t=this.lead.patientInfo)||void 0===t?void 0:t.email,u.D.email),dateOfBirth:new u.i(null===(i=this.lead.patientInfo)||void 0===i?void 0:i.dateOfBirth),gender:new u.i(null===(a=this.lead.patientInfo)||void 0===a?void 0:a.gender),primaryNumber:new u.i(null,[u.D.required,u.D.minLength(6),u.D.pattern(/^[0-9 -]\d*$/)]),secondaryNumber:new u.i(null,[u.D.minLength(6),u.D.pattern(/^[0-9 -]\d*$/)]),primaryInsurance:new u.i(null===(c=null===(r=null===(l=null===(o=this.lead)||void 0===o?void 0:o.patientInfo)||void 0===l?void 0:l.insuranceInformation)||void 0===r?void 0:r.primaryInsuranceDetails)||void 0===c?void 0:c.carrierName),insuranceId:new u.i(null===(p=null===(b=null===(d=null===(s=this.lead)||void 0===s?void 0:s.patientInfo)||void 0===d?void 0:d.insuranceInformation)||void 0===b?void 0:b.primaryInsuranceDetails)||void 0===p?void 0:p.insuranceId),secondaryInsured:new u.i(!1),secondaryInsurance:new u.i({value:null===(m=null===(g=null===(h=null===(f=this.lead)||void 0===f?void 0:f.patientInfo)||void 0===h?void 0:h.insuranceInformation)||void 0===g?void 0:g.secondaryInsuranceDetails)||void 0===m?void 0:m.carrierName,disabled:!0}),secondaryInsuranceId:new u.i({value:null===(y=null===(z=null===(C=null===(v=this.lead)||void 0===v?void 0:v.patientInfo)||void 0===C?void 0:C.insuranceInformation)||void 0===z?void 0:z.secondaryInsuranceDetails)||void 0===y?void 0:y.insuranceId,disabled:!0})}),(null===(S=this.lead.patientInfo.phoneNumbers)||void 0===S?void 0:S[0])&&(this.leadForm.controls.primaryNumber.setValue(null===(D=null===(X=null===(I=this.lead.patientInfo)||void 0===I?void 0:I.phoneNumbers)||void 0===X?void 0:X[0])||void 0===D?void 0:D.number),(null===(k=this.lead.patientInfo.phoneNumbers)||void 0===k?void 0:k[1])&&this.leadForm.controls.secondaryNumber.setValue(null===(E=null===(T=null===(W=this.lead.patientInfo)||void 0===W?void 0:W.phoneNumbers)||void 0===T?void 0:T[1])||void 0===E?void 0:E.number)),this.leadForm.get("secondaryInsured").valueChanges.subscribe(function(e){e?(O.leadForm.get("secondaryInsurance").enable(),O.leadForm.get("secondaryInsuranceId").enable()):(O.leadForm.get("secondaryInsurance").disable(),O.leadForm.get("secondaryInsuranceId").disable())}),this.leadForm.get("secondaryInsured").setValue(null===(M=null===(L=null===(w=this.lead)||void 0===w?void 0:w.patientInfo)||void 0===L?void 0:L.insuranceInformation)||void 0===M?void 0:M.secondaryInsured)}},{key:"updateLead",value:function(){var e=this;if(this.leadForm.valid){var n=JSON.parse(JSON.stringify(this.lead)),t=n.patientInfo,i=n.personInfo,a=(null==t?void 0:t.firstName)==(null==i?void 0:i.firstName)&&(null==t?void 0:t.lastName)==(null==i?void 0:i.lastName);if(t){t.firstName=this.leadForm.get("firstName").value,t.lastName=this.leadForm.get("lastName").value,t.email=this.leadForm.get("email").value,t.dateOfBirth=this.leadForm.get("dateOfBirth").value,t.gender=this.leadForm.get("gender").value;var o=t.phoneNumbers||[],l=o[0]||this.newPhoneNumber(),r=o[1]||this.newPhoneNumber();l.number=this.leadForm.controls.primaryNumber.value,r.number=this.leadForm.controls.secondaryNumber.value,t.phoneNumbers=[l,r];var c=t.insuranceInformation||new ue.a,s=c.primaryInsuranceDetails||new de.a,d=c.secondaryInsuranceDetails||new de.a;s.carrierName=this.leadForm.get("primaryInsurance").value,s.insuranceId=this.leadForm.get("insuranceId").value,c.secondaryInsured=this.leadForm.get("secondaryInsured").value,c.secondaryInsured?(d.carrierName=this.leadForm.get("secondaryInsurance").value,d.insuranceId=this.leadForm.get("secondaryInsuranceId").value,c.secondaryInsuranceDetails=d):c.secondaryInsuranceDetails=null,t.insuranceInformation=c}this.updateUnits(t),n.patientInfo=t,a&&(n.personInfo=t),this._leadsService.updateLead(n,n.leadId).subscribe(function(){e._notificationsService.success(e.translatedStrings.get("TITLE.LEADS"),e.translatedStrings.get("LEAD.LEAD_UPDATE")),e._modalRef.close(!0)},function(){e._notificationsService.error(e.translatedStrings.get("TITLE.LEADS"),e.translatedStrings.get("LEAD.LEAD_ERROR")),e.closeDialog()})}}},{key:"newPhoneNumber",value:function(){return{number:"",extension:0,countryCode:this.countryCode,preferred:!1,label:"",type:pe.c.MOBILE,notificationConfig:new Map}}},{key:"updateUnits",value:function(e){var n=e.healthInfo;n&&(null==n.weight.value&&(n.weight=new ve),null==n.height.value&&(n.height=new he),null==n.hipSize.value&&(n.hipSize=new ge),null==n.waistSize.value&&(n.waistSize=new me))}},{key:"closeDialog",value:function(){this._modalRef.close(!1)}}]),e}()).\u0275fac=function(e){return new(e||Ee)(S.Rb(N.e),S.Rb(g.a),S.Rb(I.b),S.Rb(z.a),S.Rb(be.a))},Ee.\u0275cmp=S.Lb({type:Ee,selectors:[["app-edit-lead"]],inputs:{lead:"lead"},decls:122,vars:78,consts:[[1,"container"],["nz-row",""],["nz-form","",3,"formGroup","ngSubmit"],["leadFormName","ngForm"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],[3,"nzErrorTip"],["nz-input","","formControlName","firstName",3,"placeholder"],["nz-input","","formControlName","lastName",3,"placeholder"],["nz-input","","formControlName","email","email","",3,"placeholder"],["emailErrors",""],["formControlName","dateOfBirth","nzPlaceHolder","YYYY-MM-DD",3,"nzFormat","nzDisabledDate"],["nz-col","","nzSpan","16"],["formControlName","gender",1,"gender-radio"],["nz-radio","","class","radio-label",3,"nzValue",4,"ngFor","ngForOf"],["nz-col",""],[3,"nzAddOnBefore"],["formControlName","primaryNumber","nz-input",""],["formControlName","secondaryNumber","nz-input",""],["nz-input","","formControlName","primaryInsurance"],["nz-input","","formControlName","insuranceId"],["nz-row","","nzAlign","middle",2,"margin-top","16px"],["nz-col","","nzFlex","1"],["nzSize","small","formControlName","secondaryInsured"],["nz-input","","formControlName","secondaryInsurance"],["nz-input","","formControlName","secondaryInsuranceId"],["nz-row","","nzJustify","center",3,"nzGutter"],["nz-button","","nzType","primary","type","submit",2,"margin-top","16px"],["mobileErrors",""],[4,"ngIf"],["nz-radio","",1,"radio-label",3,"nzValue"]],template:function(e,n){if(1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"h3"),S.Xc(3),S.jc(4,"translate"),S.Wb(),S.Wb(),S.Sb(5,"br"),S.Xb(6,"form",2,3),S.ec("ngSubmit",function(){return n.updateLead()}),S.Xb(8,"div",4),S.Xb(9,"div",5),S.Xb(10,"nz-form-item"),S.Xb(11,"nz-form-control",6),S.jc(12,"translate"),S.Xb(13,"label"),S.Xc(14),S.jc(15,"translate"),S.Wb(),S.Sb(16,"input",7),S.jc(17,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(18,"div",5),S.Xb(19,"nz-form-item"),S.Xb(20,"nz-form-control",6),S.jc(21,"translate"),S.Xb(22,"label"),S.Xc(23),S.jc(24,"translate"),S.Wb(),S.Sb(25,"input",8),S.jc(26,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(27,"div",5),S.Xb(28,"nz-form-item"),S.Xb(29,"nz-form-control",6),S.Xb(30,"label"),S.Xc(31),S.jc(32,"translate"),S.Wb(),S.Sb(33,"input",9),S.jc(34,"translate"),S.Wb(),S.Vc(35,Ie,2,2,"ng-template",null,10,S.Wc),S.Wb(),S.Wb(),S.Wb(),S.Xb(37,"div",4),S.Xb(38,"div",5),S.Xb(39,"nz-form-item"),S.Xb(40,"nz-form-control",6),S.jc(41,"translate"),S.Xb(42,"label"),S.Xc(43),S.jc(44,"translate"),S.Wb(),S.Sb(45,"nz-date-picker",11),S.Wb(),S.Wb(),S.Wb(),S.Xb(46,"div",12),S.Xb(47,"nz-form-item"),S.Xb(48,"nz-form-control",6),S.jc(49,"translate"),S.Xb(50,"label"),S.Xc(51),S.jc(52,"translate"),S.Wb(),S.Xb(53,"nz-radio-group",13),S.Vc(54,Xe,2,2,"label",14),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(55,"div",4),S.Xb(56,"div",5),S.Xb(57,"div",1),S.Xb(58,"div",15),S.Xb(59,"label"),S.Xc(60,"Primary Contact Number*"),S.Wb(),S.Wb(),S.Wb(),S.Xb(61,"div",1),S.Xb(62,"nz-form-item"),S.Xb(63,"nz-form-control",6),S.Xb(64,"nz-input-group",16),S.Sb(65,"input",17),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(66,"div",5),S.Xb(67,"div",1),S.Xb(68,"div",15),S.Xb(69,"label"),S.Xc(70,"Secondary Contact Number*"),S.Wb(),S.Wb(),S.Wb(),S.Xb(71,"div",1),S.Xb(72,"nz-form-item"),S.Xb(73,"nz-form-control",6),S.Xb(74,"nz-input-group",16),S.Sb(75,"input",18),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(76,"div",4),S.Xb(77,"div",5),S.Xb(78,"nz-form-item"),S.Xb(79,"nz-form-control"),S.Xb(80,"label"),S.Xc(81),S.jc(82,"translate"),S.Wb(),S.Sb(83,"input",19),S.Wb(),S.Wb(),S.Wb(),S.Xb(84,"div",5),S.Xb(85,"nz-form-item"),S.Xb(86,"nz-form-control"),S.Xb(87,"label"),S.Xc(88),S.jc(89,"translate"),S.Wb(),S.Sb(90,"input",20),S.Wb(),S.Wb(),S.Wb(),S.Xb(91,"div",5),S.Xb(92,"nz-form-item"),S.Xb(93,"nz-form-control"),S.Xb(94,"div",21),S.Xb(95,"div",22),S.Xb(96,"label"),S.Xc(97),S.jc(98,"translate"),S.Wb(),S.Wb(),S.Xb(99,"div",15),S.Sb(100,"nz-switch",23),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(101,"div",4),S.Xb(102,"div",5),S.Xb(103,"nz-form-item"),S.Xb(104,"nz-form-control"),S.Xb(105,"label"),S.Xc(106),S.jc(107,"translate"),S.Wb(),S.Sb(108,"input",24),S.Wb(),S.Wb(),S.Wb(),S.Xb(109,"div",5),S.Xb(110,"nz-form-item"),S.Xb(111,"nz-form-control"),S.Xb(112,"label"),S.Xc(113),S.jc(114,"translate"),S.Wb(),S.Sb(115,"input",25),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(116,"div",26),S.Xb(117,"button",27),S.Xc(118),S.jc(119,"translate"),S.Wb(),S.Wb(),S.Vc(120,Te,3,3,"ng-template",null,28,S.Wc),S.Wb(),S.Wb()),2&e){var t=S.Ic(36),i=S.Ic(121);S.Db(3),S.Zc("Edit ",S.kc(4,34,"LEADS.LEAD_DETAILS"),""),S.Db(3),S.rc("formGroup",n.leadForm),S.Db(2),S.rc("nzGutter",S.xc(72,Le)),S.Db(3),S.sc("nzErrorTip",S.kc(12,36,"COMMON.REQUIRED")),S.Db(3),S.Zc("",S.kc(15,38,"COMMON.FIRSTNAME"),"*"),S.Db(2),S.sc("placeholder",S.kc(17,40,"COMMON.FIRSTNAME")),S.Db(4),S.sc("nzErrorTip",S.kc(21,42,"COMMON.REQUIRED")),S.Db(3),S.Zc("",S.kc(24,44,"COMMON.LASTNAME"),"*"),S.Db(2),S.sc("placeholder",S.kc(26,46,"COMMON.LASTNAME")),S.Db(4),S.rc("nzErrorTip",t),S.Db(2),S.Yc(S.kc(32,48,"COMMON.EMAIL")),S.Db(2),S.sc("placeholder",S.kc(34,50,"COMMON.EMAIL")),S.Db(4),S.rc("nzGutter",S.xc(73,Le)),S.Db(3),S.sc("nzErrorTip",S.kc(41,52,"COMMON.REQUIRED")),S.Db(3),S.Zc("",S.kc(44,54,"COMMON.DOB"),"*"),S.Db(2),S.rc("nzFormat","yyyy-MM-dd")("nzDisabledDate",n.disabledDates),S.Db(3),S.sc("nzErrorTip",S.kc(49,56,"COMMON.REQUIRED")),S.Db(3),S.Zc("",S.kc(52,58,"PATIENT.GENDER"),"*"),S.Db(3),S.rc("ngForOf",n.genders),S.Db(1),S.rc("nzGutter",S.xc(74,Le)),S.Db(8),S.rc("nzErrorTip",i),S.Db(1),S.tc("nzAddOnBefore","[",n.countryCode,"]"),S.Db(9),S.rc("nzErrorTip",i),S.Db(1),S.tc("nzAddOnBefore","[",n.countryCode,"]"),S.Db(2),S.rc("nzGutter",S.xc(75,Le)),S.Db(5),S.Yc(S.kc(82,60,"INSURANCE.PRIMARY_INSURANCE_CARRIER_NAME")),S.Db(7),S.Yc(S.kc(89,62,"INSURANCE.INSURER_MEMBER_ID")),S.Db(9),S.Yc(S.kc(98,64,"PATIENT.DOES_PATIENT_HAVE_SECONDARY_INSURANCE")),S.Db(4),S.rc("nzGutter",S.xc(76,Le)),S.Db(5),S.Yc(S.kc(107,66,"INSURANCE.SECONDARY_INSURANCE_CARRIER_NAME")),S.Db(7),S.Yc(S.kc(114,68,"INSURANCE.INSURER_MEMBER_ID")),S.Db(3),S.rc("nzGutter",S.xc(77,Le)),S.Db(2),S.Zc(" ",S.kc(119,70,"COMMON.SAVE"),"")}},directives:[k.c,u.F,u.v,X.b,u.m,k.a,X.c,X.a,W.b,u.d,u.u,u.k,u.e,A.a,ze.c,s.p,U.a,W.c,T.a,P.a,R.a,s.q,ze.b],pipes:[E.a],styles:[".gender-radio[_ngcontent-%COMP%]{width:100%;margin-top:8px}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:#262626}"]}),Ee),Oe=l("cnAw"),_e=l("w7IE"),Ne=l("IOC6"),xe=l("q5r7"),Ae=l("tbdY"),Pe=l("tk/3"),Re=((we=function(){function e(n){d(this,e),this._http=n,this.rootUrl=C.g.url}return a(e,[{key:"createFollowUp",value:function(e,n){return this._http.post(this.rootUrl+"/v3/leads/follow-ups/create/"+e,n)}},{key:"createBulkFollowUp",value:function(e){return this._http.post(this.rootUrl+"/v3/leads/follow-ups/bulk/create/",e)}}]),e}()).\u0275fac=function(e){return new(e||we)(S.bc(Pe.c))},we.\u0275prov=S.Nb({token:we,factory:we.\u0275fac,providedIn:"root"}),we),Ue=function e(){d(this,e),this.followUpResponseStatus=Ae.a.CALL_SCHEDULED},Ve=function e(){d(this,e)},Fe=l("glKu"),Be=l("yffR"),je=l("rmZX"),qe=l("JA5x"),Ge=l("Ff2k"),He=l("ZyQt");function Ze(e,n){if(1&e){var t=S.Yb();S.Xb(0,"li",19),S.Xb(1,"nz-list-item-meta",20),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().selectTemplate(e)}),S.Xb(2,"nz-list-item-meta-title"),S.Xb(3,"nz-tag",21),S.Xc(4),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=n.$implicit;S.Db(1),S.rc("nzDescription",i.letterType),S.Db(3),S.Zc(" ",i.language," ")}}function Ye(e,n){if(1&e){var t=S.Yb();S.Xb(0,"span",22),S.ec("click",function(){return S.Lc(t),S.ic().preview()}),S.Sb(1,"span",23),S.Wb()}}function $e(e,n){if(1&e&&S.Sb(0,"span",24),2&e){var t=S.ic();S.rc("innerHtml",t.previewHtml,S.Mc)}}function Ke(e,n){1&e&&(S.Xb(0,"p",25),S.Xc(1,"No Template Selected"),S.Wb())}var Qe,Je=((Qe=function(){function e(n,t,i,a){d(this,e),this._modalRef=n,this._notificaionService=t,this._templateHtmlHelperService=i,this.letterService=a,this.selectedLeads=new Set,this.onLetterSelected=new S.n,this.limit=20}return a(e,[{key:"ngOnInit",value:function(){this.getAllLetterTemplate()}},{key:"getAllLetterTemplate",value:function(){var e=this;this.letterTemplatesLoading=!0,this.letterService.fetchAllLetterTemplates().subscribe(function(n){e.letterTemplates=n,e.letterTemplates.forEach(function(e){return e.letterType=e.templateName.replace(" Template","")})},function(){},function(){return e.letterTemplatesLoading=!1})}},{key:"selectTemplate",value:function(e){this.selectedTemplateId=e.id,this.selectedTemplateLanguage=e.language,this.selectedTemplate=e.html,this.previewHtml=this._templateHtmlHelperService.formatHtml(this.selectedTemplate)}},{key:"preview",value:function(){var e=this._templateHtmlHelperService.formatHtml(this.selectedTemplate),n=window.open();n.document.write(e),n.document.close()}},{key:"sentOutLetter",value:function(){this.selectedTemplateId||this.selectedTemplateLanguage?(this._modalRef.close({selectedTemplateId:this.selectedTemplateId,language:this.selectedTemplateLanguage,templateId:this.selectedTemplateId}),this.onLetterSelected.emit({selectedTemplateId:this.selectedTemplateId,language:this.selectedTemplateLanguage,templateId:this.selectedTemplateId})):this._notificaionService.warning("Enrollment letter","Please choose a letter template.")}},{key:"showLetterPreview",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Qe)(S.Rb(N.e),S.Rb(I.b),S.Rb(je.a),S.Rb(Be.a))},Qe.\u0275cmp=S.Lb({type:Qe,selectors:[["add-letter-follow-up"]],inputs:{selectedLeads:"selectedLeads"},outputs:{onLetterSelected:"onLetterSelected"},decls:26,vars:10,consts:[["nz-row","","nzGutter","24",1,"follow-up-container"],["nz-col","","nzSpan","24",2,"padding-right","10px","padding-left","10px"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","9"],["nz-typography","",1,"header"],["nz-row","","nzGutter","10",1,"list-container"],["nz-col","","nzSpan","24"],["nz-list","","nzSize","large",3,"nzDataSource","nzBordered","nzLoading"],["nz-list-item","","nzNoFlex","",4,"ngFor","ngForOf"],["nz-col","","nzSpan","15",2,"padding-right","10px","padding-left","20px"],["nz-row","","nzGutter","10",1,"preview-container"],["nz-col","","nzSpan","24",2,"display","flex","flex-direction","column","align-items","center"],["class","preview-btn",3,"click",4,"ngIf"],["class","preview",3,"innerHtml",4,"ngIf","ngIfElse"],["nz-row","","nzGutter","24",2,"margin-top","12px","text-align","right"],["nz-col","","nzSpan","19"],["nz-col","","nzSpan","5"],["nz-button","","nzType","primary",3,"click"],["noTemplateSelected",""],["nz-list-item","","nzNoFlex",""],[3,"nzDescription","click"],["nzColor","default",2,"cursor","pointer"],[1,"preview-btn",3,"click"],["nz-icon","","nzType","fullscreen","nzTheme","outline",2,"color","#fff","font-size","20px"],[1,"preview",3,"innerHtml"],["nz-typography","","nzType","secondary",2,"position","absolute","top","48%"]],template:function(e,n){if(1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"nz-card"),S.Xb(3,"div",2),S.Xb(4,"div",3),S.Xb(5,"p",4),S.Xc(6),S.jc(7,"translate"),S.Wb(),S.Xb(8,"div",5),S.Xb(9,"div",6),S.Xb(10,"ul",7),S.Vc(11,Ze,5,2,"li",8),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(12,"div",9),S.Xb(13,"p",4),S.Xc(14," Preview "),S.Wb(),S.Xb(15,"div",10),S.Xb(16,"div",11),S.Vc(17,Ye,2,0,"span",12),S.Vc(18,$e,1,1,"span",13),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(19,"div",14),S.Sb(20,"div",15),S.Xb(21,"div",16),S.Xb(22,"button",17),S.ec("click",function(){return n.sentOutLetter()}),S.Xc(23,"Send Letter"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Vc(24,Ke,2,0,"ng-template",null,18,S.Wc)),2&e){var t=S.Ic(25);S.Db(6),S.Zc(" ",S.kc(7,8,"SMS.CHOOSE_FROM_TEMPLATE")," "),S.Db(4),S.rc("nzDataSource",n.letterTemplates)("nzBordered",!1)("nzLoading",n.letterTemplatesLoading),S.Db(1),S.rc("ngForOf",n.letterTemplates),S.Db(6),S.rc("ngIf",n.selectedTemplate&&null!=n.selectedTemplate),S.Db(1),S.rc("ngIf",n.selectedTemplate&&null!=n.selectedTemplate)("ngIfElse",t)}},directives:[k.c,k.a,qe.a,x.a,Ge.a,s.p,s.q,P.a,R.a,U.a,Ge.e,Ge.f,Ge.g,He.a,V.a],pipes:[E.a],styles:["nz-list[_ngcontent-%COMP%]{padding:14px 20px;height:460px}[_nghost-%COMP%]     .ant-list-items{height:460px;overflow:auto;padding:5px}[_nghost-%COMP%]     .ant-list-item{padding:7px 0}[_nghost-%COMP%]     .ant-list-item-meta-title{margin-bottom:0;margin-top:4px}.header[_ngcontent-%COMP%]{color:var(--primary-color);font:normal normal normal 12px/21px Nunito}.follow-up-container[_ngcontent-%COMP%]{margin-top:17px;height:575}nz-card[_ngcontent-%COMP%]{height:570px}.list-container[_ngcontent-%COMP%], .preview-container[_ngcontent-%COMP%]{margin-left:-5px;margin-right:-5px;height:450px;border:1px solid #f0f0f0;border-radius:5px}.preview-container[_ngcontent-%COMP%]{overflow:auto;padding:7px}.preview-btn[_ngcontent-%COMP%]{background-color:#0000009e;height:30px;width:30px;position:absolute;right:0;border-radius:5px;padding:5px;cursor:pointer}[_nghost-%COMP%]     .page img{width:100%;height:auto}"]}),Qe),en=l("rP/m");function nn(e,n){1&e&&S.Sb(0,"div",12)}function tn(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",8),S.Xb(1,"button",9),S.ec("click",function(){return S.Lc(t),S.ic(2).onSelectFollowUpType("LETTER")}),S.Sb(2,"span",10),S.Xc(3," Letter "),S.Wb(),S.Vc(4,nn,1,0,"div",11),S.Wb()}if(2&e){var i=S.ic(2);S.rc("nzSpan",8),S.Db(1),S.rc("nzLoading",i.saveBtnLoading),S.Db(3),S.rc("ngIf","LETTER"==i.selectedFollowUpType)}}function an(e,n){1&e&&S.Sb(0,"div",12)}function on(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",8),S.Xb(1,"button",13),S.ec("click",function(){return S.Lc(t),S.ic(2).onSelectFollowUpType("SMS")}),S.Sb(2,"app-icons",14),S.Xc(3," SMS "),S.Wb(),S.Vc(4,an,1,0,"div",11),S.Wb()}if(2&e){var i=S.ic(2);S.rc("nzSpan",8),S.Db(1),S.rc("nzLoading",i.saveBtnLoading),S.Db(3),S.rc("ngIf","SMS"==i.selectedFollowUpType)}}function ln(e,n){1&e&&S.Sb(0,"div",12)}function rn(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",8),S.Xb(1,"button",13),S.ec("click",function(){return S.Lc(t),S.ic(2).onSelectFollowUpType("AUDIO_CALL")}),S.Sb(2,"app-icons",15),S.Xc(3," Audio Call "),S.Wb(),S.Vc(4,ln,1,0,"div",11),S.Wb()}if(2&e){var i=S.ic(2);S.rc("nzSpan",8),S.Db(1),S.rc("nzLoading",i.saveBtnLoading),S.Db(1),S.rc("color","#ffffff"),S.Db(2),S.rc("ngIf","AUDIO_CALL"==i.selectedFollowUpType)}}function cn(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"div",1),S.Vc(2,tn,5,3,"div",7),S.Vc(3,on,5,3,"div",7),S.Vc(4,rn,5,4,"div",7),S.Wb(),S.Ub()),2&e){var t=S.ic();S.Db(2),S.rc("ngIf",!1),S.Db(1),S.rc("ngIf",!1),S.Db(1),S.rc("ngIf",t.showAudioCallFollowUp)}}function sn(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"add-letter-follow-up",16),S.ec("onLetterSelected",function(e){return S.Lc(t),S.ic().createFollowUp(e)}),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(1),S.rc("selectedLeads",i.selectedLeads)}}function dn(e,n){if(1&e){var t=S.Yb();S.Xb(0,"li",27),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic(2).selectTemplate(e)}),S.Xc(1),S.Wb()}if(2&e){var i=n.$implicit;S.Db(1),S.Zc(" ",i.title," ")}}function un(e,n){1&e&&(S.Xb(0,"div"),S.Xb(1,"div",28),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.Zc("*",S.kc(3,1,"COMMON.REQUIRED"),""))}var bn=function(e){return{border:e}};function pn(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",17),S.Xb(2,"div",18),S.Xb(3,"nz-card"),S.Xb(4,"div",19),S.Xb(5,"div",20),S.Xb(6,"strong",21),S.Xc(7),S.jc(8,"translate"),S.Wb(),S.Xb(9,"ul",22),S.Xc(10),S.Vc(11,dn,2,1,"li",23),S.Wb(),S.Wb(),S.Xb(12,"div",20),S.Xb(13,"strong",21),S.Xc(14," Message Preview "),S.Wb(),S.Xb(15,"textarea",24),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().message=e})("ngModelChange",function(){return S.Lc(t),S.ic().onChange()}),S.Wb(),S.Vc(16,un,4,3,"div",6),S.Xb(17,"label",25),S.Xb(18,"em"),S.Xc(19),S.jc(20,"translate"),S.Wb(),S.Wb(),S.Xb(21,"div",26),S.Xb(22,"button",9),S.ec("click",function(){return S.Lc(t),S.ic().createFollowUp()}),S.Sb(23,"app-icons",14),S.Xc(24," Log SMS "),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(7),S.Zc(" ",S.kc(8,10,"SMS.CHOOSE_FROM_TEMPLATE")," "),S.Db(2),S.rc("nzDataSource",i.templates),S.Db(1),S.Zc(" ",i.data," "),S.Db(1),S.rc("ngForOf",i.templates),S.Db(4),S.rc("ngStyle",S.yc(14,bn,i.isValidMessage||0!==(null==i.message?null:i.message.length)?"":"1px solid red"))("ngModel",i.message),S.Db(1),S.rc("ngIf",!i.isValidMessage&&0==(null==i.message?null:i.message.length)),S.Db(3),S.ad("",i.message.length," ",S.kc(20,12,"SMS.CHARACTERS"),""),S.Db(3),S.rc("nzLoading",i.saveBtnLoading)}}function fn(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",17),S.Xb(2,"div",18),S.Xb(3,"nz-card"),S.Xb(4,"div",19),S.Xb(5,"div",18),S.Xb(6,"div",29),S.Xb(7,"strong",30),S.Xc(8),S.jc(9,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(10,"div",18),S.Xb(11,"div",29),S.Xb(12,"app-appointment-datetimepicker",31),S.ec("appointmentScheduleChange",function(e){return S.Lc(t),S.ic().onAppointmentScheduleChange(e)}),S.Wb(),S.Wb(),S.Wb(),S.Sb(13,"div",32),S.Xb(14,"div",33),S.Xb(15,"button",34),S.ec("click",function(){return S.Lc(t),S.ic().createFollowUp()}),S.Sb(16,"app-icons",14),S.Xc(17," Log Audiocall "),S.Wb(),S.Wb(),S.Sb(18,"div",32),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(6),S.rc("nzSpan",8),S.Db(2),S.Yc(S.kc(9,4,"COMMON.DATE_TIME")),S.Db(3),S.rc("nzSpan",24),S.Db(4),S.rc("nzLoading",i.saveBtnLoading)}}var hn,gn,mn,vn=((gn=function(){function e(n,t,i,a,o){d(this,e),this.smsTemplateService=n,this._datePipe=t,this._followUpService=i,this._modalRef=a,this.letterService=o,this.selectedFollowUpType=Ae.c.LETTER,this.showAllFollowUpTypes=!0,this.selectedLeads=new Array,this.limit=20,this.tags="ENROLMENT",this.message="",this.isValidMessage=!0,this.sendMessageBtnLoading=!1,this.appointment=new Ve,this.isLoggedInUserCaretaker=!1,this.showLetterFollowUp=!0,this.showSMSFollowUp=!0,this.showAudioCallFollowUp=!1}return a(e,[{key:"isBulkOperation",set:function(e){e||(this.showAudioCallFollowUp=!0),this.bulkFollowUps=e}},{key:"ngOnInit",value:function(){this.getAllTemplates(),this.getAllLetterTemplate(),this.appointment.schedule=new _e.a,"CARE_TAKER"===localStorage.getItem("loggedInUserAccountType")&&(this.isLoggedInUserCaretaker=!0),this.isLoggedInUserCaretaker&&(this.appointment.ownerType=Oe.a.CARE_TAKER)}},{key:"getAllTemplates",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.smsTemplatesLoading=!0,this.smsTemplateService.getSMSTemplates(this.limit,n-1,this.tags).subscribe(function(n){e.templates=null==n?void 0:n.result,e.smsTemplatesLoading=!1})}},{key:"getAllLetterTemplate",value:function(){var e=this;this.letterTemplatesLoading=!0,this.letterService.fetchDefaultLetterTemplates().subscribe(function(n){e.letterTemplates=n},function(){},function(){return e.letterTemplatesLoading=!1})}},{key:"onSelectFollowUpType",value:function(e){this.selectedFollowUpType=e}},{key:"selectTemplate",value:function(e){this.sendMessageBtnLoading=!1,this.message=e.template}},{key:"onAppointmentScheduleChange",value:function(e){var n,t;e.valid?(this.appointment.schedule.startsOn=null==e?void 0:e.startTime,this.appointment.schedule.startDate=null===(n=null==e?void 0:e.startTime)||void 0===n?void 0:n.getTime(),this.appointment.schedule.endDate=null===(t=null==e?void 0:e.endTime)||void 0===t?void 0:t.getTime(),this.appointment.dateParam=this._datePipe.transform(e.startTime,"yyyy-MM-dd")):(this.appointment.schedule.startsOn=void 0,this.appointment.schedule.startDate=void 0,this.appointment.schedule.endDate=void 0)}},{key:"createFollowUp",value:function(e){var n=this,t=new Ue;switch(this.selectedFollowUpType){case Ae.c.AUDIO_CALL:t.leadCallAppointment=this.appointment,t.followUpResponseStatus=Ae.a.CALL_SCHEDULED;break;case Ae.c.SMS:t.smsTemplate=this.message,t.followUpResponseStatus=Ae.a.SMS_SEND;break;case Ae.c.LETTER:this.bulkFollowUps&&(t.leadIds=Array.from(this.selectedLeads)),t.templateId=e.selectedTemplateId,t.templateLanguage=e.language,t.followUpResponseStatus=Ae.a.LETTER_SEND}t.type=this.selectedFollowUpType,this.bulkFollowUps?this._followUpService.createBulkFollowUp({type:this.selectedFollowUpType,leadIds:this.selectedLeads,templateId:null}).subscribe(function(e){n._modalRef.close(t)},function(){},function(){return n._modalRef.close(t)}):this._followUpService.createFollowUp(this.lead.leadId,t).subscribe(function(e){n._modalRef.close(t)})}},{key:"onClose",value:function(){this._modalRef.close(!1)}}]),e}()).\u0275fac=function(e){return new(e||gn)(S.Rb(Ne.a),S.Rb(s.e),S.Rb(Re),S.Rb(N.e),S.Rb(xe.a))},gn.\u0275cmp=S.Lb({type:gn,selectors:[["app-add-follow-up"]],inputs:{title:"title",lead:"lead",selectedFollowUpType:"selectedFollowUpType",showAllFollowUpTypes:"showAllFollowUpTypes",selectedLeads:"selectedLeads",isBulkOperation:"isBulkOperation"},decls:11,vars:8,consts:[[1,"container"],["nz-row","","nzGutter","24"],["nz-col","",1,"title",3,"nzSpan"],["nz-col","",2,"text-align","left",3,"nzSpan"],["nz-col","",2,"text-align","right",3,"nzSpan"],["nz-icon","","nzType","close","nzTheme","outline",1,"close-btn",3,"click"],[4,"ngIf"],["nz-col","","style","text-align: center; display: flex; flex-direction: column;",3,"nzSpan",4,"ngIf"],["nz-col","",2,"text-align","center","display","flex","flex-direction","column",3,"nzSpan"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","mail","nzTheme","outline"],["class","triangle-up",4,"ngIf"],[1,"triangle-up"],["nz-button","","nzType","primary",2,"display","flex","text-align","center",3,"nzLoading","click"],["name","sms","size","16px"],["name","audioCall","size","16px",1,"button-icon",3,"color"],[3,"selectedLeads","onLetterSelected"],["nz-row","","nzGutter","64",1,"follow-up-container"],["nz-col","","nzSpan","24"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","12"],[1,"header"],["nz-list","","nzBordered","","nzSize","large",3,"nzDataSource"],["nz-list-item","","nzNoFlex","","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["disabled","","rows","2","nz-input","","placeholder","Type here...","required","",1,"message-textarea",3,"ngStyle","ngModel","ngModelChange"],[1,"message-count"],[2,"position","absolute","bottom","10%","left","30%"],["nz-list-item","","nzNoFlex","",2,"cursor","pointer",3,"click"],[1,"required-text"],["nz-col","",3,"nzSpan"],[1,"header",2,"padding-left","5px"],[3,"appointmentScheduleChange"],["nz-col","","nzSpan","9",2,"margin-top","30px","text-align","center"],["nz-col","","nzSpan","6",2,"margin-top","30px","padding","0px","text-align","center"],["nz-button","","nzType","primary",2,"display","flex",3,"nzLoading","click"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xc(3),S.Wb(),S.Sb(4,"div",3),S.Xb(5,"div",4),S.Xb(6,"span",5),S.ec("click",function(){return n.onClose()}),S.Wb(),S.Wb(),S.Wb(),S.Vc(7,cn,5,3,"ng-container",6),S.Vc(8,sn,2,1,"ng-container",6),S.Vc(9,pn,25,16,"ng-container",6),S.Vc(10,fn,19,6,"ng-container",6),S.Wb()),2&e&&(S.Db(2),S.rc("nzSpan",8),S.Db(1),S.Zc(" ",n.title," "),S.Db(1),S.rc("nzSpan",14),S.Db(1),S.rc("nzSpan",2),S.Db(2),S.rc("ngIf",n.showAllFollowUpTypes),S.Db(1),S.rc("ngIf",n.showLetterFollowUp&&"LETTER"==n.selectedFollowUpType),S.Db(1),S.rc("ngIf",n.showSMSFollowUp&&"SMS"==n.selectedFollowUpType),S.Db(1),S.rc("ngIf",n.showAudioCallFollowUp&&"AUDIO_CALL"==n.selectedFollowUpType))},directives:[k.c,k.a,U.a,V.a,s.q,P.a,R.a,Fe.a,Je,qe.a,Ge.a,s.p,W.b,u.d,u.C,s.r,u.u,u.x,Ge.e,en.a],pipes:[E.a],styles:["[_nghost-%COMP%]     .ant-modal-content{background-color:#eff2f0 0 0 no-repeat padding-box}#title[_ngcontent-%COMP%]{padding-left:1%;font-size:14px;font-weight:600;border-left:3px solid var(--primary-color);cursor:move}.centerize[_ngcontent-%COMP%]{text-align:center}.filter-card[_ngcontent-%COMP%]{margin:15px;border-radius:10px;vertical-align:bottom}.required-text[_ngcontent-%COMP%]{color:#ff2e2e;float:left;position:absolute}.ant-tag[_ngcontent-%COMP%]{font-size:10px}.filter-tag-div[_ngcontent-%COMP%], .forms-tag-div[_ngcontent-%COMP%]{margin-top:10px}.filter-header[_ngcontent-%COMP%]{font:normal normal normal 12px/21px Nunito;letter-spacing:0;color:var(--primary-color);opacity:1;vertical-align:top}.message-textarea[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey);border-radius:5px;opacity:1;width:100%;min-height:150px;max-height:150px;resize:none}.demo-infinite-container[_ngcontent-%COMP%]{height:300px;border:1px solid var(--grey);border-radius:4px}nz-list[_ngcontent-%COMP%]{padding:14px 20px}[_nghost-%COMP%]     .ant-list{min-height:280px}.template[_ngcontent-%COMP%]{text-align:justify;font:normal normal normal 11px/15px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}.message-count[_ngcontent-%COMP%]{float:right;margin-top:4px}.header[_ngcontent-%COMP%]{color:var(--primary-color);font:normal normal normal 12px/21px Nunito}.follow-up-container[_ngcontent-%COMP%]{margin-top:17px;height:575}nz-card[_ngcontent-%COMP%]{height:570px}.triangle-up[_ngcontent-%COMP%]{position:absolute;bottom:-27px;display:block;width:20px;height:20px;overflow:hidden;background:#fff;pointer-events:none;left:47%;border:1px solid #f0f0f0;border-right:none;border-bottom:none;rotate:45deg;z-index:1}  .vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}.title[_ngcontent-%COMP%]{text-align:left;margin-top:20px;border-left:3px solid var(--primary-color)}.close-btn[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}.close-btn[_ngcontent-%COMP%]{margin-top:25px;color:var(--error-color);cursor:pointer}"]}),gn),Cn=((hn=function(){function e(n){d(this,e),this._modalService=n}return a(e,[{key:"initEnrolment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Array,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this._modalService.create({nzContent:vn,nzComponentParams:{lead:i,selectedLeads:e,isBulkOperation:n,selectedFollowUpType:t,title:i&&i.status==Ae.e.ELIGIBLE?"Start followup with":"Create next follow-up",showAllFollowUpTypes:a},nzWrapClassName:"vertical-center-modal",nzTitle:null,nzClosable:!1,nzMaskClosable:!1,nzMask:!0,nzOkText:null,nzCancelText:null,nzFooter:null,nzWidth:70*window.innerWidth/100,nzBodyStyle:{paddingTop:"0px",height:80*window.innerHeight/100+" px"}})}},{key:"showConfirm",value:function(){var e=this;this._modalService.confirm({nzTitle:"Do you Want to close the tab?",nzContent:"When clicked the OK button, this dialog will be closed after 1 second",nzOnOk:function(){return e.close()}})}},{key:"close",value:function(){window.close()}}]),e}()).\u0275fac=function(e){return new(e||hn)(S.bc(N.f))},hn.\u0275prov=S.Nb({token:hn,factory:hn.\u0275fac,providedIn:"root"}),hn),zn=function(){var e=function e(){d(this,e),this.timer=new Xn};return e.getStep=function(e,n){return n.find(function(n){return n.order==e})},e}(),yn=function(e){return e.COMPLETE="COMPLETE",e.DRAFT="DRAFT",e.INVALIDATED="INVALIDATED",e}({}),Sn=function(e){return e.GLOBAL="GLOBAL",e.GLOBAL_TO_SUB_TENANTS="GLOBAL_TO_SUB_TENANTS",e.TENANT_SPECIFIC="TENANT_SPECIFIC",e.USER_SPECIFIC="USER_SPECIFIC",e}({}),In=function e(){d(this,e)},Xn=function e(){d(this,e),this.timeLog=new Array},Dn=function(e){o(t,e);var n=r(t);function t(){return d(this,t),n.apply(this,arguments)}return t}(function(){return function e(){d(this,e)}}()),kn=l("2lmJ"),Wn=l("fhRi"),Tn=function(e){return e.SEND_SMS="SEND_SMS",e.UPDATE_AVAILABLE_TIME="UPDATE_AVAILABLE_TIME",e.UPDATE_TIMEZONE="UPDATE_TIMEZONE",e.ADD_NEW_NUMBER="ADD_NEW_NUMBER",e.UPDATE_NAME_PREFERENCE="UPDATE_NAME_PREFERENCE",e.SCHEDULE_APPOINTMENT="SCHEDULE_APPOINTMENT",e}({}),En=l("nLCl"),wn=((mn=function(){function e(n){d(this,e),this._http=n,this.rootUrl=C.g.url}return a(e,[{key:"initEnrolment",value:function(e,n){return this._http.post(this.rootUrl+"/v2/leads/init-enrolment",{userIds:e,templateId:n,userKind:"LEAD",templateKind:"LETTER"})}},{key:"initBulkEnrolment",value:function(e,n){return this._http.post(this.rootUrl+"/v3/direct-mail/new-mail/bulk",{leadIds:e,templateId:n}).pipe()}},{key:"updateContact",value:function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LEAD";return"LEAD"==i&&(t=this.rootUrl+"/v2/leads/"+e+"/update-new-contact?type="+i),this._http.put(t,n)}},{key:"updateAvailableHours",value:function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LEAD";return"LEAD"==i&&(t=this.rootUrl+"/v2/leads/"+e+"/update-available-hours?type="+i),this._http.put(t,n)}},{key:"updatePreferredName",value:function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LEAD";return"LEAD"==i&&(t=this.rootUrl+"/v2/leads/"+e+"/update-preferred-name?type="+i),this._http.put(t,n)}},{key:"updateTimezone",value:function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LEAD";return"LEAD"==i&&(t=this.rootUrl+"/v2/leads/"+e+"/update-timezone?type="+i),this._http.put(t,{timezone:n})}},{key:"createLeadAppointmentRequest",value:function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LEAD";return"LEAD"==i&&(t=this.rootUrl+"/v2/leads/appointment-requests/"+e+"?type="+i),this._http.post(t,n)}},{key:"updateLeadAppointmentRequest",value:function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LEAD";return"LEAD"==i&&(t=this.rootUrl+"/v2/leads/appointment-requests/"+e+"?type="+i),this._http.put(t,n)}},{key:"markNotEligible",value:function(e,n,t){return this._http.put("".concat(this.rootUrl,"/v2/leads/").concat(e,"/mark-not-eligible"),{type:n,reason:t})}}]),e}()).\u0275fac=function(e){return new(e||mn)(S.bc(Pe.c))},mn.\u0275prov=S.Nb({token:mn,factory:mn.\u0275fac,providedIn:"root"}),mn),Ln=l("zAKX"),Mn=l("m3lz");function On(e,n){if(1&e&&(S.Sb(0,"nz-option",10),S.jc(1,"userLocations")),2&e){var t=n.$implicit;S.vc("nzLabel","",null==t||null==t.user?null:t.user.firstName," ",null==t||null==t.user?null:t.user.lastName," - ",S.kc(1,4,null==t||null==t.user?null:t.user.locations),""),S.rc("nzValue",t.user)}}function _n(e,n){if(1&e&&(S.Vb(0),S.Vc(1,On,2,6,"nz-option",9),S.Ub()),2&e){var t=n.ngIf;S.Db(1),S.rc("ngForOf",t.result)}}function Nn(e,n){1&e&&(S.Xb(0,"nz-option",11),S.Sb(1,"app-icons",12),S.Xc(2," Loading Data... "),S.Wb())}var xn,An=((xn=function(){function e(n,t,i,a){d(this,e),this._datePipe=n,this.staffService=t,this._enrolmentService=i,this._modalRef=a,this.appointment=new Oe.b}return a(e,[{key:"ngOnInit",value:function(){this.value?this.appointment=this.value:(this.appointment=new Oe.b,this.appointment.schedule=new _e.a,this.appointment.serviceIds=new Array,this.appointment.type=Oe.c.AUDIO_CALL)}},{key:"searchCaretakers",value:function(e){this.caretakers$=this.staffService.fetchStaffMembers(En.a.MONITORING_STAFF,0,100,e)}},{key:"onAppointmentScheduleChange",value:function(e){var n,t;this.caretakers$=void 0,e.valid?(this.appointment.schedule.startsOn=null==e?void 0:e.startTime,this.appointment.schedule.startDate=null===(n=null==e?void 0:e.startTime)||void 0===n?void 0:n.getTime(),this.appointment.schedule.endDate=null===(t=null==e?void 0:e.endTime)||void 0===t?void 0:t.getTime(),this.appointment.dateParam=this._datePipe.transform(e.startTime,"yyyy-MM-dd")):(this.appointment.schedule.startsOn=void 0,this.appointment.schedule.startDate=void 0,this.appointment.schedule.endDate=void 0),this.appointment.title="First nurse call"}},{key:"save",value:function(){this.appointment.attenderId=this.selectedCaretaker.id,this.appointment.attendeeId=this.userId,this.appointment.tenantId=localStorage.getItem("loggedInTenant"),this._modalRef.close({response:this.appointment,noSubscriber:!0})}}]),e}()).\u0275fac=function(e){return new(e||xn)(S.Rb(s.e),S.Rb(kn.a),S.Rb(wn),S.Rb(N.e))},xn.\u0275cmp=S.Lb({type:xn,selectors:[["app-appointment"]],inputs:{userId:"userId",value:"value",lead:"lead",customComponentsValuesMap:"customComponentsValuesMap"},features:[S.Cb([s.e])],decls:28,vars:28,consts:[[1,"appointments-card"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"appointmentScheduleChange"],["nzSize","large",1,"full-width",3,"nzShowSearch","nzDisabled","ngModel","nzServerSearch","nzPlaceHolder","ngModelChange","nzOnSearch"],[4,"ngIf","ngIfElse"],["staffLoading",""],["nz-col","","nzOffset","16",1,"align-right",3,"nzSpan"],["nzSize","large","nz-button","","nzType","primary",3,"click"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nzDisabled","","nzCustomContent",""],["name","loading","size","12px"]],template:function(e,n){if(1&e&&(S.Xb(0,"nz-card",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"app-appointment-datetimepicker",3),S.ec("appointmentScheduleChange",function(e){return n.onAppointmentScheduleChange(e)}),S.Wb(),S.Wb(),S.Wb(),S.Sb(4,"br"),S.Sb(5,"br"),S.Sb(6,"br"),S.Xb(7,"div",1),S.Xb(8,"div",2),S.Xb(9,"strong"),S.Xc(10),S.jc(11,"translate"),S.jc(12,"translate"),S.jc(13,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(14,"div",1),S.Xb(15,"div",2),S.Xb(16,"nz-select",4),S.ec("ngModelChange",function(e){return n.selectedCaretaker=e})("nzOnSearch",function(e){return n.searchCaretakers(e)}),S.jc(17,"translate"),S.Vc(18,_n,2,1,"ng-container",5),S.jc(19,"async"),S.Vc(20,Nn,3,0,"ng-template",null,6,S.Wc),S.Wb(),S.Wb(),S.Wb(),S.Sb(22,"br"),S.Sb(23,"br"),S.Xb(24,"div",1),S.Xb(25,"div",7),S.Xb(26,"button",8),S.ec("click",function(){return n.save()}),S.Xc(27," Schedule appointment "),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e){var t=S.Ic(21);S.Db(1),S.rc("nzGutter",24),S.Db(1),S.rc("nzSpan",24),S.Db(5),S.rc("nzGutter",24),S.Db(1),S.rc("nzSpan",8),S.Db(2),S.bd("",S.kc(11,18,"COMMON.PHYSICIAN"),"\\",S.kc(12,20,"PATIENT.MONITORING_STAFF")," - ",S.kc(13,22,"SITE"),""),S.Db(4),S.rc("nzGutter",24),S.Db(1),S.rc("nzSpan",24),S.Db(1),S.tc("nzPlaceHolder"," ",S.kc(17,24,"COMMON.AVAILABLE_CLINICIANS")," "),S.rc("nzShowSearch",!0)("nzDisabled",!(null!=n.appointment&&null!=n.appointment.schedule&&n.appointment.schedule.startDate))("ngModel",n.selectedCaretaker)("nzServerSearch",!0),S.Db(2),S.rc("ngIf",S.kc(19,26,n.caretakers$))("ngIfElse",t),S.Db(6),S.rc("nzGutter",24),S.Db(1),S.rc("nzSpan",4)}},directives:[qe.a,k.c,k.a,en.a,Ln.d,u.u,u.x,s.q,P.a,R.a,U.a,s.p,Ln.a,Fe.a],pipes:[E.a,s.b,Mn.a],styles:[""]}),xn);function Pn(e,n){if(1&e&&(S.Xb(0,"label",5),S.Xc(1),S.Wb()),2&e){var t=n.$implicit;S.rc("nzValue",t.number),S.Db(1),S.bd(" (",t.countryCode,") ",t.number," (",t.type,")")}}function Rn(e,n){1&e&&(S.Xb(0,"label",22),S.Xc(1," Required "),S.Wb())}function Un(e,n){1&e&&(S.Xb(0,"label",22),S.Xc(1," Phone number must be at least 6 characters long. "),S.Wb())}function Vn(e,n){1&e&&(S.Xb(0,"label",22),S.Xc(1," Phone number must be less than 16 characters. "),S.Wb())}function Fn(e,n){1&e&&(S.Xb(0,"label",22),S.Xc(1," Required "),S.Wb())}var Bn=function(e){return{border:e}};function jn(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",6),S.Xb(1,"div",7),S.Xb(2,"form",8,9),S.ec("ngSubmit",function(){return S.Lc(t),S.ic().save()}),S.Xb(4,"div",10),S.Xb(5,"div",11),S.Xb(6,"h4"),S.Xc(7,"Phone number*"),S.Wb(),S.Xb(8,"nz-input-group",12),S.Xb(9,"input",13,14),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().contact.number=e}),S.Wb(),S.Wb(),S.Vc(11,Rn,2,0,"label",15),S.Vc(12,Un,2,0,"label",15),S.Vc(13,Vn,2,0,"label",15),S.Wb(),S.Xb(14,"div",11),S.Xb(15,"h4"),S.Xc(16,"Contact Type*"),S.Wb(),S.Xb(17,"nz-select",16,17),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().contact.type=e}),S.Sb(19,"nz-option",18),S.Sb(20,"nz-option",19),S.Sb(21,"nz-option",20),S.Wb(),S.Wb(),S.Vc(22,Fn,2,0,"label",15),S.Wb(),S.Sb(23,"br"),S.Xb(24,"button",21),S.Xc(25,"Save"),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.Ic(3),a=S.Ic(10),o=S.Ic(18),l=S.ic();S.Db(8),S.tc("nzAddOnBefore","[",l.countryCode,"]"),S.Db(1),S.rc("ngModel",l.contact.number),S.Db(2),S.rc("ngIf",(a.dirty||a.touched)&&(null==a.errors?null:a.errors.required)),S.Db(1),S.rc("ngIf",((null==a?null:a.dirty)||(null==a?null:a.touched))&&(null==a||null==a.errors?null:a.errors.minlength)),S.Db(1),S.rc("ngIf",((null==a?null:a.dirty)||(null==a?null:a.touched))&&(null==a||null==a.errors?null:a.errors.maxlength)),S.Db(4),S.rc("ngModel",l.contact.type)("ngStyle",S.yc(9,Bn,(o.dirty||o.touched)&&o.errors?"1px solid red":"")),S.Db(5),S.rc("ngIf",(o.dirty||o.touched)&&o.errors),S.Db(2),S.rc("disabled",i.invalid)}}function qn(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",6),S.Xb(1,"button",23),S.ec("click",function(){return S.Lc(t),S.ic().submit()}),S.Xc(2,"Submit"),S.Wb(),S.Wb()}}var Gn,Hn=((Gn=function(){function e(n,t,i){var a=this;d(this,e),this._modalRef=n,this._enrolmentService=t,this._dataSharingService=i,this._dataSharingService.tenantSettings.subscribe(function(e){e&&(a.countryCode=null==e?void 0:e.countryCode,a.initPhoneNumberObject())})}return a(e,[{key:"ngOnInit",value:function(){this.phoneNumbers=this.lead.patientInfo.phoneNumbers,this.getselectedNumber(this.value.number)}},{key:"getselectedNumber",value:function(e){if(e&&null!=e){var t,i=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){c=!0,l=e},f:function(){try{r||null==i.return||i.return()}finally{if(c)throw l}}}}(this.phoneNumbers);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.number==e)return this.selectedNumber=a.number,this.contact=a,!0}}catch(o){i.e(o)}finally{i.f()}}}},{key:"initPhoneNumberObject",value:function(){this.contact={number:"",extension:0,countryCode:this.countryCode,preferred:!1,label:"",type:pe.c.MOBILE,notificationConfig:new Map}}},{key:"validate",value:function(){return this.contact.number&&this.contact.countryCode&&this.contact.type}},{key:"save",value:function(){this.validate()&&this.createNewContact()}},{key:"submit",value:function(){this.getselectedNumber(this.selectedNumber),this._modalRef.close({response:this.contact,noSubscriber:!0})}},{key:"createNewContact",value:function(){this.contact.countryCode=this.countryCode;var e=this._enrolmentService.updateContact(this.userId,this.contact,"LEAD");this._modalRef.close({response:this.contact,requestSubscription:e})}}]),e}()).\u0275fac=function(e){return new(e||Gn)(S.Rb(N.e),S.Rb(wn),S.Rb(be.a))},Gn.\u0275cmp=S.Lb({type:Gn,selectors:[["app-update-contact"]],inputs:{lead:"lead",userId:"userId",type:"type",value:"value",customComponentsValuesMap:"customComponentsValuesMap"},decls:8,vars:4,consts:[[1,"container"],[3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["nz-radio","","nzValue","NEW_NUMBER"],["nz-row","","nzGutter","64",4,"ngIf"],["nz-radio","",3,"nzValue"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[3,"ngSubmit"],["f","ngForm"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],[3,"nzAddOnBefore"],["oninput","this.value=this.value.replace(/[^\\d]/,'')","nz-input","","readonly","","required","","minlength","6","maxlength","15","onfocus","this.removeAttribute('readonly')","name","number",3,"ngModel","ngModelChange"],["number","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],["name","type","required","",3,"ngModel","ngStyle","ngModelChange"],["type","ngModel"],["nzValue","MOBILE","nzLabel","Mobile Number"],["nzValue","LANDLINE","nzLabel","Home Number"],["nzValue","OTHER","nzLabel","Other Number"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"],["nz-button","","nzType","primary","nzSize","large",3,"click"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div"),S.Xb(2,"nz-radio-group",1),S.ec("ngModelChange",function(e){return n.selectedNumber=e}),S.Vc(3,Pn,2,4,"label",2),S.Xb(4,"label",3),S.Xc(5," Add new number... "),S.Vc(6,jn,26,11,"div",4),S.Wb(),S.Wb(),S.Vc(7,qn,3,0,"div",4),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.rc("ngModel",n.selectedNumber),S.Db(1),S.rc("ngForOf",n.phoneNumbers),S.Db(3),S.rc("ngIf","NEW_NUMBER"===n.selectedNumber),S.Db(1),S.rc("ngIf",n.selectedNumber&&null!=n.selectedNumber&&"NEW_NUMBER"!=n.selectedNumber))},directives:[ze.c,u.u,u.x,s.p,ze.b,s.q,k.c,k.a,u.F,u.v,u.w,U.a,W.c,W.b,u.d,u.C,u.q,u.p,Ln.d,s.r,Ln.a,P.a,R.a,x.a],styles:["h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}h4[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-btn{width:75%;display:block;margin:auto}input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     .ant-typography-danger{margin-top:5px;float:right}[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}[_nghost-%COMP%]     .ant-radio-group{width:100%}"]}),Gn),Zn=l("TaO5"),Yn=l("ix5O");function $n(e,n){if(1&e&&S.Sb(0,"nz-option",20),2&e){var t=n.$implicit;S.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}var Kn,Qn=((Kn=function(){function e(n,t,i){d(this,e),this._modalRef=n,this.datePipe=t,this._enrolmentService=i,this.timezones=Object(fe.e)(),this.fromTime=null,this.toTime=null,this.allChecked=!1,this.indeterminate=!0,this.checkOptionsOne=[{label:"Mondays",value:"Mondays",checked:!1},{label:"Tuesdays",value:"Tuesdays",checked:!1},{label:"Wednesdays",value:"Wednesdays",checked:!1},{label:"Thursdays",value:"Thursdays",checked:!1},{label:"Fridays",value:"Fridays",checked:!1}]}return a(e,[{key:"ngOnInit",value:function(){if(this.value){var e=new Set;this.value.availableHours.days.forEach(function(n){return e.add(n)}),this.checkOptionsOne.forEach(function(n){n.checked=e.has(n.value)}),this.selectedTimezone=this.value.availableHours.timezone,this.fromTime=this.value.availableHours.fromTime,this.toTime=this.value.availableHours.toTime}else this.selectedTimezone=this.customComponentsValuesMap.get("TENANT_TIMEZONE")}},{key:"updateAllChecked",value:function(){this.indeterminate=!1,this.checkOptionsOne=this.checkOptionsOne.map(this.allChecked?function(e){return Object.assign(Object.assign({},e),{checked:!0})}:function(e){return Object.assign(Object.assign({},e),{checked:!1})})}},{key:"updateSingleChecked",value:function(){this.checkOptionsOne.every(function(e){return!e.checked})?(this.allChecked=!1,this.indeterminate=!1):this.checkOptionsOne.every(function(e){return e.checked})?(this.allChecked=!0,this.indeterminate=!1):this.indeterminate=!0}},{key:"onTimeChange",value:function(e,n){}},{key:"onSubmit",value:function(){var e={availableHours:{days:this.checkOptionsOne.filter(function(e){return e.checked}).map(function(e){return e.value}),fromTime:this.fromTime,toTime:this.toTime},timezone:this.selectedTimezone},n=this._enrolmentService.updateAvailableHours(this.userId,e);this._modalRef.close({response:e,requestSubscription:n})}}]),e}()).\u0275fac=function(e){return new(e||Kn)(S.Rb(N.e),S.Rb(s.e),S.Rb(wn))},Kn.\u0275cmp=S.Lb({type:Kn,selectors:[["app-update-available-time"]],inputs:{userId:"userId",value:"value",customComponentsValuesMap:"customComponentsValuesMap"},features:[S.Cb([s.e])],decls:30,vars:9,consts:[[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[2,"border-bottom","1px solid rgb(233, 233, 233)","padding-bottom","10px"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelChange"],["nz-col","","nzSpan","24",2,"margin-top","20px","padding-left","0px !important"],[3,"ngModel","ngModelChange"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%","margin-left","32px"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%"],["nz-col","","nzSpan","11",2,"width","100%","margin-left","32px"],["nzFormat","h:mm a",3,"ngModel","nzUse12Hours","ngModelChange"],["nz-col","","nzSpan","11",2,"width","100%"],["nz-col","","nzSpan","12",2,"margin-left","32px","margin-top","20px","width","100%"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","12",2,"margin-left","32px","width","100%"],["nzShowSearch","","nzAllowClear","",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-col","","nzSpan","18"],["nz-col","","nzSpan","4",2,"margin-top","32px"],["nz-button","","nzType","primary",3,"click"],[3,"nzValue","nzLabel"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"div",3),S.Xb(4,"label",4),S.ec("ngModelChange",function(e){return n.allChecked=e})("ngModelChange",function(){return n.updateAllChecked()}),S.Xc(5," Check all "),S.Wb(),S.Wb(),S.Xb(6,"div",5),S.Xb(7,"nz-checkbox-group",6),S.ec("ngModelChange",function(e){return n.checkOptionsOne=e})("ngModelChange",function(){return n.updateSingleChecked()}),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(8,"div",1),S.Xb(9,"div",7),S.Xc(10," Available from: "),S.Wb(),S.Xb(11,"div",8),S.Xc(12," Available till: "),S.Wb(),S.Wb(),S.Xb(13,"div",1),S.Xb(14,"div",9),S.Xb(15,"nz-time-picker",10),S.ec("ngModelChange",function(e){return n.fromTime=e})("ngModelChange",function(e){return n.onTimeChange(e,"FROM")}),S.Wb(),S.Wb(),S.Xb(16,"div",11),S.Xb(17,"nz-time-picker",10),S.ec("ngModelChange",function(e){return n.toTime=e})("ngModelChange",function(e){return n.onTimeChange(e,"TO")}),S.Wb(),S.Wb(),S.Wb(),S.Xb(18,"div",1),S.Xb(19,"div",12),S.Xb(20,"p",13),S.Xc(21," Timezone "),S.Wb(),S.Wb(),S.Xb(22,"div",14),S.Xb(23,"nz-select",15),S.ec("ngModelChange",function(e){return n.selectedTimezone=e}),S.Vc(24,$n,1,2,"nz-option",16),S.Wb(),S.Wb(),S.Wb(),S.Xb(25,"div",1),S.Sb(26,"div",17),S.Xb(27,"div",18),S.Xb(28,"button",19),S.ec("click",function(){return n.onSubmit()}),S.Xc(29,"Submit"),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.Db(4),S.rc("ngModel",n.allChecked)("nzIndeterminate",n.indeterminate),S.Db(3),S.rc("ngModel",n.checkOptionsOne),S.Db(8),S.rc("ngModel",n.fromTime)("nzUse12Hours",!0),S.Db(2),S.rc("ngModel",n.toTime)("nzUse12Hours",!0),S.Db(6),S.rc("ngModel",n.selectedTimezone),S.Db(1),S.rc("ngForOf",n.timezones))},directives:[k.c,k.a,Zn.a,u.u,u.x,Zn.b,x.a,Yn.a,Ln.d,s.p,P.a,R.a,U.a,Ln.a],styles:[""]}),Kn);function Jn(e,n){if(1&e){var t=S.Yb();S.Xb(0,"input",13),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().customName=e}),S.Wb()}if(2&e){var i=S.ic();S.rc("ngModel",i.customName)}}var et,nt,tt,it=((tt=function(){function e(n,t){d(this,e),this._modalRef=n,this._enrolmentService=t}return a(e,[{key:"ngOnInit",value:function(){if(this.firstName=this.lead.patientInfo.firstName,this.lastName=this.lead.patientInfo.lastName,this.value){switch(this.value.preferredName){case this.firstName+" "+this.lastName:this.radioValue="FN_LN";break;case this.lastName+" "+this.firstName:this.radioValue="LN_FN";break;case this.firstName:this.radioValue="FN";break;case this.lastName:this.radioValue="LN";break;default:this.radioValue="CUSTOM",this.customName=this.value.preferredName}this.preferredName=this.value.preferredName}}},{key:"onPreferredNameChange",value:function(e){switch(e){case"FN_LN":this.preferredName=this.firstName+" "+this.lastName;break;case"LN_FN":this.preferredName=this.lastName+" "+this.firstName;break;case"FN":this.preferredName=this.firstName;break;case"LN":this.preferredName=this.lastName;break;case"CUSTOM":this.preferredName=this.customName;break;default:this.preferredName=this.firstName+" "+this.lastName}}},{key:"submit",value:function(){"CUSTOM"==this.radioValue&&(this.preferredName=this.customName);var e={preferredName:this.preferredName},n=this._enrolmentService.updatePreferredName(this.userId,e);this._modalRef.close({response:e,requestSubscription:n})}}]),e}()).\u0275fac=function(e){return new(e||tt)(S.Rb(N.e),S.Rb(wn))},tt.\u0275cmp=S.Lb({type:tt,selectors:[["app-update-preferred-name"]],inputs:{userId:"userId",lead:"lead",value:"value",customComponentsValuesMap:"customComponentsValuesMap"},decls:20,vars:8,consts:[[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","FN_LN"],["nz-radio","","nzValue","LN_FN"],["nz-radio","","nzValue","FN"],["nz-radio","","nzValue","LN"],["nz-radio","","nzValue","CUSTOM"],["type","text","nz-input","",3,"ngModel","ngModelChange",4,"ngIf"],["nz-col","","nzSpan","18"],["nz-col","","nzSpan","4",2,"margin-top","32px"],["nz-button","","nzType","primary",3,"click"],["type","text","nz-input","",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"nz-radio-group",3),S.ec("ngModelChange",function(e){return n.radioValue=e})("ngModelChange",function(e){return n.onPreferredNameChange(e)}),S.Xb(4,"label",4),S.Xc(5),S.Wb(),S.Xb(6,"label",5),S.Xc(7),S.Wb(),S.Xb(8,"label",6),S.Xc(9),S.Wb(),S.Xb(10,"label",7),S.Xc(11),S.Wb(),S.Xb(12,"label",8),S.Xc(13," Custom... "),S.Vc(14,Jn,1,1,"input",9),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(15,"div",1),S.Sb(16,"div",10),S.Xb(17,"div",11),S.Xb(18,"button",12),S.ec("click",function(){return n.submit()}),S.Xc(19,"Submit"),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.Db(3),S.rc("ngModel",n.radioValue),S.Db(2),S.ad("",n.firstName," ",n.lastName,""),S.Db(2),S.ad("",n.lastName," ",n.firstName,""),S.Db(2),S.Yc(n.firstName),S.Db(2),S.Yc(n.lastName),S.Db(3),S.rc("ngIf","CUSTOM"===n.radioValue))},directives:[k.c,k.a,ze.c,u.u,u.x,ze.b,s.q,P.a,R.a,U.a,W.b,u.d],styles:["[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}input[_ngcontent-%COMP%]{width:350px;margin-left:10px}"]}),tt),at=((nt=function(){function e(){d(this,e)}return a(e,[{key:"transform",value:function(e,n){return n.forEach(function(n,t){-1!=e.search(t)&&(e=e.replace(t,n))}),e}}]),e}()).\u0275fac=function(e){return new(e||nt)},nt.\u0275pipe=S.Qb({name:"keyValueReplace",type:nt,pure:!0}),nt),ot=((et=function(){function e(){d(this,e)}return a(e,[{key:"transform",value:function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"IS_VALID",a=!0;return null!=t&&0!=t.length&&t.findIndex(function(e){return"REQUIRED"==e.type})>-1&&(null==e||null==e||0==e.length||""==e)?(a=!1,"IS_VALID"==i?a:"Required"):a}}]),e}()).\u0275fac=function(e){return new(e||et)},et.\u0275pipe=S.Qb({name:"isValid",type:et,pure:!0}),et);function lt(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"date"),S.Ub()),2&e){var t=S.ic(3);S.Db(1),S.Zc(" ",S.lc(2,1,null==t.component||null==t.component.time?null:t.component.time.value,"dd MMM yyyy hh:mm a")," ")}}function rt(e,n){if(1&e&&(S.Xb(0,"div",11),S.Xc(1),S.Wb()),2&e){var t=S.ic(3);S.Db(1),S.Zc(" ",t.component.radioButton.label," ")}}function ct(e,n){1&e&&S.Sb(0,"div",8)}function st(e,n){if(1&e&&(S.Xb(0,"label",14),S.Xc(1),S.jc(2,"keyValueReplace"),S.Wb()),2&e){var t=n.$implicit,i=S.ic(3);S.rc("nzValue",t.value),S.Db(1),S.Zc(" ",S.lc(2,2,t.label,i.variablesMap)," ")}}function dt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",7),S.Xb(2,"div",8),S.Vc(3,lt,3,4,"ng-container",0),S.Wb(),S.Vc(4,rt,2,1,"div",9),S.Vc(5,ct,1,0,"div",10),S.Xb(6,"div",11),S.Xb(7,"nz-radio-group",12),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(2).component.radioButton.value=e})("ngModelChange",function(e){S.Lc(t);var n=S.ic(2);return n.onRadioButtonChange(e,n.component)}),S.Vc(8,st,3,5,"label",13),S.Wb(),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic(2);S.Db(3),S.rc("ngIf",(null==i.component||null==i.component.time?null:i.component.time.show)&&(null==i.component||null==i.component.time?null:i.component.time.value)),S.Db(1),S.rc("ngIf",i.component.radioButton.showLabel&&null!=i.component.radioButton.label&&null!=i.component.radioButton.label),S.Db(1),S.rc("ngIf",i.component.radioButton.showLabel&&null!=i.component.radioButton.label&&null!=i.component.radioButton.label),S.Db(2),S.rc("ngModel",i.component.radioButton.value)("nzDisabled",i.preview||!i.preview&&!i.component.enabled),S.Db(1),S.rc("ngForOf",null==i.component||null==i.component.radioButton?null:i.component.radioButton.options)}}function ut(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"date"),S.Ub()),2&e){var t=S.ic(3);S.Db(1),S.Zc(" ",S.lc(2,1,null==t.component||null==t.component.time?null:t.component.time.value,"dd MMM yyyy hh:mm a")," ")}}function bt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"nz-switch",17),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.checkbox.value=e})("ngModelChange",function(e){S.Lc(t);var n=S.ic(3);return n.onCheck(e,n.component)}),S.Wb(),S.Xc(2),S.jc(3,"keyValueReplace"),S.Ub()}if(2&e){var i=S.ic(3),a=S.Ic(2),o=S.Ic(4);S.Db(1),S.rc("ngModel",i.component.checkbox.value)("nzCheckedChildren",a)("nzUnCheckedChildren",o)("nzDisabled",i.preview||!i.preview&&!i.component.enabled),S.Db(1),S.Zc(" ",S.lc(3,5,null==i.component||null==i.component.checkbox?null:i.component.checkbox.label,i.variablesMap)," ")}}function pt(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"div",15),S.Xb(2,"div",8),S.Vc(3,ut,3,4,"ng-container",0),S.Wb(),S.Xb(4,"div",16),S.Vc(5,bt,4,8,"ng-container",0),S.Wb(),S.Wb(),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.rc("ngClass",t.isSubChecklist?"sublist-component-spacer":"component-spacer"),S.Db(2),S.rc("ngIf",(null==t.component||null==t.component.time?null:t.component.time.show)&&(null==t.component||null==t.component.time?null:t.component.time.value)),S.Db(2),S.rc("ngIf",null==t.component||null==t.component.checkbox?null:t.component.checkbox.show)}}function ft(e,n){if(1&e&&(S.Xb(0,"p"),S.Xc(1," Available On : "),S.Xb(2,"strong"),S.Xc(3),S.Wb(),S.Xc(4," From: "),S.Xb(5,"strong"),S.Xc(6),S.jc(7,"date"),S.Wb(),S.Xc(8," To: "),S.Xb(9,"strong"),S.Xc(10),S.jc(11,"date"),S.Wb(),S.Xc(12," At: "),S.Xb(13,"strong"),S.Xc(14),S.Wb(),S.Xc(15," Timezone. "),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",t.component.actionableComponent.value.availableHours.days," "),S.Db(3),S.Zc(" ",S.lc(7,4,t.component.actionableComponent.value.availableHours.fromTime,"hh:mm a")," "),S.Db(4),S.Zc(" ",S.lc(11,7,t.component.actionableComponent.value.availableHours.toTime,"hh:mm a")," "),S.Db(4),S.Zc(" ",t.component.actionableComponent.value.timezone," ")}}function ht(e,n){if(1&e&&(S.Xb(0,"p"),S.Xc(1," Preferred Name : "),S.Xb(2,"strong"),S.Xc(3),S.Wb(),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",t.component.actionableComponent.value.preferredName," ")}}function gt(e,n){if(1&e&&(S.Xb(0,"p"),S.Xc(1," Preferred Number : "),S.Xb(2,"strong"),S.Xc(3),S.Wb(),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.bd(" (",t.component.actionableComponent.value.countryCode,") ",t.component.actionableComponent.value.number," - ",t.component.actionableComponent.value.type," ")}}function mt(e,n){if(1&e&&(S.Xb(0,"span"),S.Xb(1,"p"),S.Xc(2," Title : "),S.Xb(3,"strong"),S.Xc(4),S.Wb(),S.Wb(),S.Xb(5,"p"),S.Xc(6," Date : "),S.Xb(7,"strong"),S.Xc(8),S.jc(9,"date"),S.Wb(),S.Wb(),S.Xb(10,"p"),S.Xc(11," Time : "),S.Xb(12,"strong"),S.Xc(13),S.jc(14,"date"),S.Wb(),S.Wb(),S.Wb()),2&e){var t=S.ic(4);S.Db(4),S.Zc(" ",t.component.actionableComponent.value.title," "),S.Db(4),S.Zc("",S.lc(9,3,t.component.actionableComponent.value.schedule.startsOn,"dd-MM-yyyy")," "),S.Db(5),S.Zc("",S.lc(14,6,t.component.actionableComponent.value.schedule.startsOn,"hh:mm a")," ")}}function vt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"nz-card",18),S.Xb(2,"span",19),S.ec("click",function(){S.Lc(t);var e=S.ic(3);return e.checklistActions(e.component)}),S.Sb(3,"span",20),S.Wb(),S.Vc(4,ft,16,10,"p",0),S.Vc(5,ht,4,1,"p",0),S.Vc(6,gt,4,3,"p",0),S.Vc(7,mt,15,9,"span",0),S.Wb(),S.Ub()}if(2&e){var i=S.ic(3);S.Db(4),S.rc("ngIf","UPDATE_AVAILABLE_TIME"==i.component.actionableComponent.action),S.Db(1),S.rc("ngIf","UPDATE_NAME_PREFERENCE"==i.component.actionableComponent.action),S.Db(1),S.rc("ngIf","ADD_NEW_NUMBER"==i.component.actionableComponent.action),S.Db(1),S.rc("ngIf","SCHEDULE_APPOINTMENT"==i.component.actionableComponent.action)}}function Ct(e,n){if(1&e&&(S.Vb(0),S.Vc(1,vt,8,4,"ng-container",0),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.rc("ngIf",t.component.actionableComponent.value&&null!=t.component.actionableComponent.value)}}function zt(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",6),S.Xc(1," Change/Discrepancy reported "),S.Xb(2,"nz-switch",21),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic(2);return n.onNewDescrepancyReport(e,n.component)})("ngModelChange",function(e){return S.Lc(t),S.ic(2).component.reportDiscrepancy.reported=e}),S.Wb(),S.Wb()}if(2&e){var i=S.ic(2);S.Db(2),S.rc("ngModel",i.component.reportDiscrepancy.reported)("nzDisabled",i.preview||!i.preview&&!i.component.enabled)}}function yt(e,n){if(1&e&&(S.Xb(0,"p",24),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3),S.jc(4,"isValid"),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",S.nc(4,1,t.component.input.value,"TEXT",t.component.input.validators,"MESSAGE")," ")}}function St(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"input",22),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.input.value=e}),S.jc(2,"isValid"),S.Wb(),S.Vc(3,yt,5,6,"p",23),S.jc(4,"isValid"),S.Ub()}if(2&e){var i=S.ic(3);S.Db(1),S.rc("ngModel",i.component.input.value)("disabled",i.preview||!i.preview&&!i.component.enabled)("ngClass",!S.mc(2,4,i.component.input.value,"TEXT",i.component.input.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)?"error":"ok"),S.Db(2),S.rc("ngIf",!S.mc(4,8,i.component.input.value,"TEXT",i.component.input.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value))}}function It(e,n){if(1&e&&(S.Xb(0,"p",24),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3),S.jc(4,"isValid"),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",S.nc(4,1,t.component.textArea.value,"TEXT",t.component.textArea.validators,"MESSAGE")," ")}}function Xt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"textarea",25),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.textArea.value=e}),S.jc(2,"isValid"),S.Wb(),S.Vc(3,It,5,6,"p",23),S.jc(4,"isValid"),S.Ub()}if(2&e){var i=S.ic(3);S.Db(1),S.rc("ngModel",i.component.textArea.value)("disabled",i.preview||!i.preview&&!i.component.enabled)("ngClass",!S.mc(2,4,i.component.textArea.value,"TEXT",i.component.textArea.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)?"error":"ok"),S.Db(2),S.rc("ngIf",!S.mc(4,8,i.component.textArea.value,"TEXT",i.component.textArea.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value))}}function Dt(e,n){if(1&e&&(S.Xb(0,"p",24),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3),S.jc(4,"isValid"),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",S.nc(4,1,t.component.datePicker.value,"TEXT",t.component.datePicker.validators,"MESSAGE")," ")}}function kt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"nz-date-picker",26),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.datePicker.value=e})("ngModelChange",function(e){S.Lc(t);var n=S.ic(3);return n.onDateChange(e,n.component)}),S.jc(2,"isValid"),S.Wb(),S.Vc(3,Dt,5,6,"p",23),S.jc(4,"isValid"),S.Ub()}if(2&e){var i=S.ic(3);S.Db(1),S.rc("ngModel",i.component.datePicker.value)("nzDisabled",i.preview||!i.preview&&!i.component.enabled)("ngClass",!S.mc(2,4,i.component.datePicker.value,"TEXT",i.component.datePicker.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)?"error":"ok"),S.Db(2),S.rc("ngIf",!S.mc(4,8,i.component.datePicker.value,"TEXT",i.component.datePicker.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value))}}function Wt(e,n){if(1&e&&(S.Xb(0,"p",24),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3),S.jc(4,"isValid"),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",S.nc(4,1,t.component.range.left,"TEXT",t.component.range.validators,"MESSAGE")," ")}}function Tt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",3),S.Xb(2,"div",27),S.Xb(3,"nz-time-picker",28),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.range.left=e}),S.jc(4,"translate"),S.jc(5,"isValid"),S.Wb(),S.Wb(),S.Xb(6,"div",29),S.Xc(7," To "),S.Wb(),S.Xb(8,"div",27),S.Xb(9,"nz-time-picker",28),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.range.right=e}),S.jc(10,"translate"),S.jc(11,"isValid"),S.Wb(),S.Wb(),S.Wb(),S.Vc(12,Wt,5,6,"p",23),S.jc(13,"isValid"),S.jc(14,"isValid"),S.Ub()}if(2&e){var i=S.ic(3);S.Db(3),S.sc("nzPlaceHolder",S.kc(4,13,"TABLEHEADER.STARTTIME")),S.rc("ngModel",i.component.range.left)("nzDisabled",i.preview||!i.preview&&!i.component.enabled)("nzUse12Hours",i.use12Hours)("nzDefaultOpenValue",i.defaultOpenValue)("ngClass",!S.mc(5,15,i.component.range.value,"TEXT",i.component.range.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)?"error":"ok"),S.Db(6),S.sc("nzPlaceHolder",S.kc(10,19,"TABLEHEADER.STARTTIME")),S.rc("ngModel",i.component.range.right)("nzDisabled",i.preview||!i.preview&&!i.component.enabled)("nzUse12Hours",i.use12Hours)("nzDefaultOpenValue",i.defaultOpenValue)("ngClass",!S.mc(11,21,i.component.range.value,"TEXT",i.component.range.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)?"error":"ok"),S.Db(3),S.rc("ngIf",!S.mc(13,25,i.component.range.left,"TEXT",i.component.range.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)||!S.mc(14,29,i.component.range.right,"TEXT",i.component.range.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value))}}function Et(e,n){if(1&e&&S.Sb(0,"nz-option",32),2&e){var t=n.$implicit;S.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function wt(e,n){if(1&e&&(S.Xb(0,"p",24),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3),S.jc(4,"isValid"),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",S.nc(4,1,t.component.selectBox.value,"TEXT",t.component.selectBox.validators,"MESSAGE")," ")}}function Lt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"nz-select",30),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.selectBox.value=e})("ngModelChange",function(e){S.Lc(t);var n=S.ic(3);return n.onDateChange(e,n.component)}),S.jc(2,"isValid"),S.Vc(3,Et,1,2,"nz-option",31),S.Wb(),S.Vc(4,wt,5,6,"p",23),S.jc(5,"isValid"),S.Ub()}if(2&e){var i=S.ic(3);S.Db(1),S.rc("nzDisabled",i.preview||!i.preview&&!i.component.enabled)("ngModel",i.component.selectBox.value)("ngClass",!S.mc(2,5,i.component.selectBox.value,"TEXT",i.component.selectBox.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value)?"error":"ok"),S.Db(2),S.rc("ngForOf",i.timezones),S.Db(1),S.rc("ngIf",!S.mc(5,9,i.component.selectBox.value,"TEXT",null==i.component||null==i.component.selectBox?null:i.component.selectBox.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value))}}function Mt(e,n){if(1&e&&(S.Xb(0,"label",35),S.Xc(1),S.Wb()),2&e){var t=n.$implicit;S.rc("nzValue",t),S.Db(1),S.Yc(t)}}function Ot(e,n){if(1&e&&(S.Vb(0),S.Vc(1,Mt,2,2,"label",34),S.Ub()),2&e){var t=S.ic(4);S.Db(1),S.rc("ngForOf",t.customComponentsValuesMap.get(null==t.component||null==t.component.radioGroup||null==t.component.radioGroup.customComponent?null:t.component.radioGroup.customComponent.customComponentType))}}function _t(e,n){if(1&e&&(S.Xb(0,"p",24),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3),S.jc(4,"isValid"),S.Wb()),2&e){var t=S.ic(4);S.Db(3),S.Zc(" ",S.nc(4,1,t.component.radioGroup.value,"TEXT",t.component.radioGroup.validators,"MESSAGE")," ")}}function Nt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"nz-radio-group",33),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).component.radioGroup.value=e})("ngModelChange",function(e){S.Lc(t);var n=S.ic(3);return n.onRadioOptionChange(e,n.component)}),S.Vc(2,Ot,2,1,"ng-container",0),S.Wb(),S.Vc(3,_t,5,6,"p",23),S.jc(4,"isValid"),S.Ub()}if(2&e){var i=S.ic(3);S.Db(1),S.rc("ngModel",i.component.radioGroup.value)("nzDisabled",i.preview||!i.preview&&!i.component.enabled),S.Db(1),S.rc("ngIf",(null==i.component||null==i.component.radioGroup?null:i.component.radioGroup.customComponent)&&null!=(null==i.component||null==i.component.radioGroup?null:i.component.radioGroup.customComponent)&&(null==i.component||null==i.component.radioGroup||null==i.component.radioGroup.customComponent?null:i.component.radioGroup.customComponent.custom)),S.Db(1),S.rc("ngIf",!S.mc(4,4,i.component.radioGroup.value,"TEXT",null==i.component||null==i.component.radioGroup?null:i.component.radioGroup.validators)&&("CHECKBOX"==i.component.type&&null!=i.component.checkbox&&i.component.checkbox.value||"RADIO_BUTTON"==i.component.type&&i.component.radioButton&&i.component.radioButton.value))}}function xt(e,n){if(1&e&&(S.Vb(0),S.Vc(1,St,5,12,"ng-container",0),S.Vc(2,Xt,5,12,"ng-container",0),S.Vc(3,kt,5,12,"ng-container",0),S.Vc(4,Tt,15,33,"ng-container",0),S.Vc(5,Lt,6,13,"ng-container",0),S.Vc(6,Nt,5,8,"ng-container",0),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.rc("ngIf",null==t.component||null==t.component.input?null:t.component.input.show),S.Db(1),S.rc("ngIf",null==t.component||null==t.component.textArea?null:t.component.textArea.show),S.Db(1),S.rc("ngIf",(null==t.component?null:t.component.datePicker)&&(null==t.component||null==t.component.datePicker?null:t.component.datePicker.show)),S.Db(1),S.rc("ngIf",null!=(null==t.component?null:t.component.range)&&(null==t.component||null==t.component.range?null:t.component.range.show)),S.Db(1),S.rc("ngIf",null!=(null==t.component?null:t.component.selectBox)&&(null==t.component||null==t.component.selectBox?null:t.component.selectBox.show)),S.Db(1),S.rc("ngIf",null!=(null==t.component?null:t.component.radioGroup)&&(null==t.component||null==t.component.radioGroup?null:t.component.radioGroup.show))}}function At(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"wizard-content",37),S.Ub()),2&e){var t=n.$implicit,i=S.ic(3);S.Db(1),S.rc("component",t)("variablesMap",i.variablesMap)("isSubChecklist",!0)("preview",i.preview||!i.preview&&!i.component.enabled)("lead",i.lead)}}function Pt(e,n){if(1&e&&(S.Vb(0),S.Vc(1,At,2,5,"ng-container",36),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.rc("ngForOf",t.component.subChecklists)}}function Rt(e,n){if(1&e&&(S.Vb(0),S.Vc(1,dt,9,6,"ng-container",0),S.Vc(2,pt,6,3,"ng-container",0),S.Vb(3),S.Xb(4,"div",3),S.Sb(5,"div",4),S.Vc(6,Ct,2,1,"ng-container",0),S.Vc(7,zt,3,2,"div",5),S.Xb(8,"div",6),S.Vc(9,xt,7,6,"ng-container",0),S.Wb(),S.Wb(),S.Vc(10,Pt,2,1,"ng-container",0),S.Ub(),S.Ub()),2&e){var t=S.ic();S.Db(1),S.rc("ngIf","RADIO_BUTTON"===(null==t.component?null:t.component.type)&&t.component.radioButton),S.Db(1),S.rc("ngIf","CHECKBOX"==(null==t.component?null:t.component.type)&&t.component.checkbox),S.Db(4),S.rc("ngIf",(null!=t.component.radioButton&&t.component.radioButton.value||null!=t.component.checkbox&&t.component.checkbox.value)&&null!=t.component.actionableComponent&&t.component.actionableComponent&&t.component.actionableComponent.actionable),S.Db(1),S.rc("ngIf",(null!=t.component.radioButton&&t.component.radioButton.value||null!=t.component.checkbox&&t.component.checkbox.value)&&(null!=t.component.checkbox&&t.component.checkbox.showDiscrepancyButton||null!=t.component.radioButton&&t.component.radioButton.showDiscrepancyButton)),S.Db(2),S.rc("ngIf",null!=t.component.radioButton&&t.component.radioButton.value||null!=t.component.checkbox&&t.component.checkbox.value),S.Db(1),S.rc("ngIf",t.component.subChecklists&&t.component.subChecklists.length>0&&(null!=t.component.radioButton&&t.component.radioButton.value||null!=t.component.checkbox&&t.component.checkbox.value))}}function Ut(e,n){1&e&&S.Sb(0,"span",38)}function Vt(e,n){1&e&&S.Sb(0,"span",39)}var Ft,Bt=((Ft=function(){function e(n){d(this,e),this._modalService=n,this.use12Hours=!0,this.isHidden=!0,this.preview=!1,this.haveUnSavedChanges=!1,this.onChecklistUpdate=new S.n,this.positiveNegativeFlow=new S.n,this.onFirstNurseCallAppointmentUpdate=new S.n,this.enableNext=!1,this.defaultOpenValue=new Date(0,0,0,0,0,0)}return a(e,[{key:"ngOnInit",value:function(){this.leadId=this.lead.leadId}},{key:"onCheck",value:function(e,n){n.checkbox.value=e,n.time.value=e?new Date:"",this.haveUnSavedChanges=!0,e&&null!=n.actionableComponent&&n.actionableComponent&&n.actionableComponent.actionable?this.checklistActions(n):this.onChecklistUpdate.emit(!0),this.checkPositiveValue(e,n)}},{key:"checkPositiveValue",value:function(e,n){null!=n.checkbox&&null!=n.checkbox?null==n.checkbox.positiveValues||null==n.checkbox.positiveValues||0==n.checkbox.positiveValues.length||n.checkbox.positiveValues.find(function(n){return n==e})?this.positiveNegativeFlow.emit({flow:"POSITIVE"}):this.positiveNegativeFlow.emit({flow:"NEGATIVE",index:n.order}):null!=n.radioButton&&null!=n.radioButton&&(null==n.radioButton.positiveValues||null==n.radioButton.positiveValues||0==n.radioButton.positiveValues.length||n.radioButton.positiveValues.find(function(n){return n==e})?this.positiveNegativeFlow.emit({flow:"POSITIVE"}):this.positiveNegativeFlow.emit({flow:"NEGATIVE",index:n.order}))}},{key:"checklistActions",value:function(e){switch(e.actionableComponent.action){case Tn.UPDATE_AVAILABLE_TIME:this.showActionableComponentModals(Qn,"Available Time",e.actionableComponent.action,this.lead,e.actionableComponent.value);break;case Tn.UPDATE_NAME_PREFERENCE:this.showActionableComponentModals(it,"Preferred Name",e.actionableComponent.action,this.lead,e.actionableComponent.value);break;case Tn.ADD_NEW_NUMBER:this.showActionableComponentModals(Hn,"Update preferred contact",e.actionableComponent.action,this.lead,e.actionableComponent.value);break;case Tn.SCHEDULE_APPOINTMENT:this.showActionableComponentModals(An,"Schedule first nurse call",e.actionableComponent.action,this.lead,e.actionableComponent.value)}}},{key:"onRadioButtonChange",value:function(e,n){this.haveUnSavedChanges=!0,n.time.value=e?new Date:"",this.onChecklistUpdate.emit(!0),this.checkPositiveValue(e,n)}},{key:"onDateChange",value:function(e,n){n.datePicker.value=e,this.onChecklistUpdate.emit(!0)}},{key:"onRadioOptionChange",value:function(e,n){this.haveUnSavedChanges=!0,n.radioGroup.value=e,this.onChecklistUpdate.emit(!0)}},{key:"onNewDescrepancyReport",value:function(e,n){n.reportDiscrepancy=new In,n.reportDiscrepancy.reported=e,this.onChecklistUpdate.emit(!0)}},{key:"showActionableComponentModals",value:function(e,n,t,i,a){var o=this;this._modalService.create({nzContent:e,nzComponentParams:{userId:this.leadId,lead:i,type:"LEAD",value:a,customComponentsValuesMap:this.customComponentsValuesMap},nzTitle:n,nzWidth:700,nzFooter:null,nzClosable:!0,nzMaskClosable:!0,nzBodyStyle:{paddingTop:"0px"}}).afterClose.subscribe(function(e){e&&(o.component.actionableComponent.value=e.response,t==Tn.SCHEDULE_APPOINTMENT&&o.onFirstNurseCallAppointmentUpdate.emit(e.response),null==e.requestSubscription&&null!=e.noSubscriber&&e.noSubscriber?o.onChecklistUpdate.emit(!0):e.requestSubscription.subscribe(function(e){o.onChecklistUpdate.emit(!0)}))})}}]),e}()).\u0275fac=function(e){return new(e||Ft)(S.Rb(N.f))},Ft.\u0275cmp=S.Lb({type:Ft,selectors:[["wizard-content"]],inputs:{component:"component",variablesMap:"variablesMap",isSubChecklist:"isSubChecklist",timezones:"timezones",use12Hours:"use12Hours",isHidden:"isHidden",customComponentsValuesMap:"customComponentsValuesMap",lead:"lead",preview:"preview",haveUnSavedChanges:"haveUnSavedChanges"},outputs:{onChecklistUpdate:"onChecklistUpdate",positiveNegativeFlow:"positiveNegativeFlow",onFirstNurseCallAppointmentUpdate:"onFirstNurseCallAppointmentUpdate"},decls:5,vars:1,consts:[[4,"ngIf"],["checkedTemplate",""],["unCheckedTemplate",""],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","2",1,"list-components"],["nz-col","","nzSpan","8","class","list-components",4,"ngIf"],["nz-col","","nzSpan","8",1,"list-components"],["nz-row","","nzGutter","64",1,"component-spacer","radio-component-container"],["nz-col","","nzSpan","3",1,"list-components"],["nz-col","","nzSpan","21","class","component-spacer radio-btn-padding",4,"ngIf"],["nz-col","","nzSpan","3","class","list-components",4,"ngIf"],["nz-col","","nzSpan","21",1,"component-spacer","radio-btn-padding"],["nzButtonStyle","solid",3,"ngModel","nzDisabled","ngModelChange"],["nz-radio-button","",3,"nzValue",4,"ngFor","ngForOf"],["nz-radio-button","",3,"nzValue"],["nz-row","","nzGutter","64",1,"component-spacer",3,"ngClass"],["nz-col","","nzSpan","21",1,"list-components","list-components-label"],[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","nzDisabled","ngModelChange"],[1,"actionable-component-value-card"],[2,"position","absolute","top","10px","right","10px","cursor","pointer",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline",2,"color","black"],["nzCheckedChildren","Yes","nzUnCheckedChildren","No",3,"ngModel","nzDisabled","ngModelChange"],["nz-input","",3,"ngModel","disabled","ngClass","ngModelChange"],["nz-typography","","nzType","danger","class","required-text",4,"ngIf"],["nz-typography","","nzType","danger",1,"required-text"],["rows","4","nz-input","",3,"ngModel","disabled","ngClass","ngModelChange"],[3,"ngModel","nzDisabled","ngClass","ngModelChange"],["nz-col","","nzSpan","10"],["nzSize","large","nzFormat","h:mm a","nzAllowEmpty","false",3,"ngModel","nzDisabled","nzUse12Hours","nzDefaultOpenValue","nzPlaceHolder","ngClass","ngModelChange"],["nz-col","","nzSpan","1",2,"display","flex","align-items","center"],["nzShowSearch","","nzAllowClear","",3,"nzDisabled","ngModel","ngClass","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"ngModel","nzDisabled","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["nz-radio","",3,"nzValue"],[4,"ngFor","ngForOf"],[3,"component","variablesMap","isSubChecklist","preview","lead"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"]],template:function(e,n){1&e&&(S.Vc(0,Rt,11,6,"ng-container",0),S.Vc(1,Ut,1,0,"ng-template",null,1,S.Wc),S.Vc(3,Vt,1,0,"ng-template",null,2,S.Wc)),2&e&&S.rc("ngIf",n.preview||n.component.enabled||1==n.component.order||!n.isHidden)},directives:[s.q,k.c,k.a,ze.c,u.u,u.x,s.p,ze.b,ze.a,s.o,T.a,qe.a,U.a,V.a,W.b,u.d,x.a,A.a,Yn.a,Ln.d,Ln.a,Ft],pipes:[s.e,at,ot,E.a],styles:[".list-components[_ngcontent-%COMP%]{text-align:center;padding-left:5px!important;padding-right:5px!important}.list-components-label[_ngcontent-%COMP%]{text-align:left}.component-spacer[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.radio-component-container[_ngcontent-%COMP%]{display:flex;align-items:center}.radio-btn-padding[_ngcontent-%COMP%]{padding-left:0!important}.wizard-checkbox[_ngcontent-%COMP%]{width:5%}.sublist-component-spacer[_ngcontent-%COMP%]{padding-left:35px!important}.required-text[_ngcontent-%COMP%]{text-align:right}.error[_ngcontent-%COMP%]{border:1px solid var(--error-color)}.actionable-component-value-card[_ngcontent-%COMP%]{padding:5px;margin-left:30px;background:#11111142}[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}"]}),Ft);function jt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",3),S.Xb(2,"button",4),S.ec("click",function(){return S.Lc(t),S.ic().onSaveChecklist()}),S.Xc(3,"Save Checklist"),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(2),S.rc("disabled",i.disabled)("nzLoading",i.loading)}}function qt(e,n){1&e&&(S.Xb(0,"button",12),S.Xc(1,"Send SMS Enrollment"),S.Wb())}function Gt(e,n){if(1&e&&S.Sb(0,"nz-option",13),2&e){var t=n.$implicit;S.rc("nzLabel",t.value)("nzValue",t.key)}}function Ht(e,n){if(1&e&&(S.Xb(0,"p",19),S.Xc(1),S.Wb()),2&e){var t=S.ic(4);S.Db(1),S.Zc(" ",t.notEligibleReasonMap.get(t.notEligibleBecause)," ")}}function Zt(e,n){1&e&&(S.Xb(0,"p",20),S.Xb(1,"sup"),S.Xc(2,"*"),S.Wb(),S.Xc(3," Please enter a valid reason. "),S.Wb())}function Yt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Vc(1,Ht,2,1,"p",16),S.Xb(2,"textarea",17),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(3).comment=e}),S.Wb(),S.Vc(3,Zt,4,0,"p",18),S.Ub()}if(2&e){var i=S.ic(3);S.Db(1),S.rc("ngIf","NOT_ELIGIBLE"==i.event),S.Db(1),S.rc("ngModel",i.comment)("nzBorderless",!1),S.Db(1),S.rc("ngIf",i.showOtherInputError&&"OTHER"==i.notEligibleBecause)}}function $t(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"nz-modal",14),S.ec("nzOnCancel",function(){return S.Lc(t),S.ic(2).handleCancel()})("nzOnOk",function(){return S.Lc(t),S.ic(2).handleOk()}),S.Vc(2,Yt,4,4,"ng-container",15),S.Wb(),S.Ub()}if(2&e){var i=S.ic(2);S.Db(1),S.rc("nzVisible",i.commentModalVisible)("nzTitle",i.commentModalTitle)}}function Kt(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",3),S.Xb(2,"button",5),S.ec("click",function(){return S.Lc(t),S.ic().checklistSubmit()}),S.Xc(3,"Convert to patient"),S.Wb(),S.Wb(),S.Xb(4,"div",6),S.Vc(5,qt,2,0,"button",7),S.Xb(6,"nz-select",8),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().notEligibleBecause=e})("ngModelChange",function(e){return S.Lc(t),S.ic().callActions("NOT_ELIGIBLE",e)}),S.Vc(7,Gt,1,2,"nz-option",9),S.jc(8,"keyvalue"),S.Wb(),S.Vc(9,$t,3,2,"ng-container",2),S.Xb(10,"button",10),S.ec("click",function(){return S.Lc(t),S.ic().callActions("REMIND_TO_CALL_LATER")}),S.Xc(11,"Remind me to call later"),S.Wb(),S.Xb(12,"button",11),S.ec("click",function(){return S.Lc(t),S.ic().callActions("CALL_TERMINATED")}),S.Xc(13,"Call Terminated"),S.Wb(),S.Xb(14,"button",11),S.ec("click",function(){return S.Lc(t),S.ic().callActions("CALL_DECLINED_HARD_NO")}),S.Xc(15," Call Declined - Do not call Again "),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(5),S.rc("ngIf",i.isSMSEnabled),S.Db(1),S.rc("ngModel",i.notEligibleBecause),S.Db(1),S.rc("ngForOf",S.kc(8,4,i.notEligibleReasonMap)),S.Db(2),S.rc("ngIf",i.commentModalVisible)}}var Qt,Jt=((Qt=function(){function e(){d(this,e),this.haveUnSavedChanges=!0,this.saveChecklist=new S.n,this.submitChecklist=new S.n,this.sendSMSEnrolment=new S.n,this.onCallActionUpdate=new S.n,this.showOtherInputError=!1,this.notEligibleReasonMap=new Map([["PATIENT_IN_HOSPICE","The patient is in hospice"],["NO_LONGER_SEEING_PROVIDER","The patient is no longer seeing provider"],["ALREADY_IN_OTHER_PROGRAM","Patient is already participating in other program"],["OTHER","Other reasons"]])}return a(e,[{key:"ngOnInit",value:function(){}},{key:"callActions",value:function(e,n){this.event=e;var t=!1;switch(e){case"REMIND_TO_CALL_LATER":case"CALL_TERMINATED":this.notEligibleBecause=null,t=!0,this.onCallActionUpdate.emit({event:e,value:n,showAddFollowupPopup:t,notEligibleBecause:this.notEligibleBecause});break;case"CALL_DECLINED_HARD_NO":this.notEligibleBecause=null,this.commentModalTitle="Call declined because...",this.commentModalVisible=!0;break;case"NOT_ELIGIBLE":this.commentModalTitle="Not eligible because...",this.commentModalVisible=!0}}},{key:"onSaveChecklist",value:function(){this.saveChecklist.emit()}},{key:"checklistSubmit",value:function(){this.submitChecklist.emit()}},{key:"handleCancel",value:function(){this.notEligibleBecause=null,this.commentModalVisible=!1}},{key:"handleOk",value:function(){("NOT_ELIGIBLE"!=this.event||"OTHER"!=this.notEligibleBecause||null!=this.comment&&null!=this.comment)&&("CALL_DECLINED_HARD_NO"!=this.event||null!=this.comment&&null!=this.comment)?(this.commentModalVisible=!1,this.submitChecklist.emit({notEligible:"NOT_ELIGIBLE"==this.event,callDeclined:"CALL_DECLINED_HARD_NO"==this.event,notEligibleType:this.notEligibleBecause,notEligibileBecause:this.notEligibleReasonMap.get(this.notEligibleBecause),extraNotes:this.comment})):this.showOtherInputError=!0}}]),e}()).\u0275fac=function(e){return new(e||Qt)},Qt.\u0275cmp=S.Lb({type:Qt,selectors:[["wizard-footer-action-bar"]],inputs:{loading:"loading",isSMSEnabled:"isSMSEnabled",haveUnSavedChanges:"haveUnSavedChanges",disabled:"disabled"},outputs:{saveChecklist:"saveChecklist",submitChecklist:"submitChecklist",sendSMSEnrolment:"sendSMSEnrolment",onCallActionUpdate:"onCallActionUpdate"},decls:4,vars:2,consts:[[1,"container"],["nz-row","","nzGutter","64"],[4,"ngIf"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzSpan","20"],["class","remove-col-padding action-btn","nz-button","","nzType","default",4,"ngIf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Not Eligible(Select Reason)",1,"remove-col-padding",2,"width","fit-content",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","secondary",1,"remove-col-padding","action-btn",3,"click"],["nz-button","","nzType","default",1,"remove-col-padding","action-btn",3,"click"],["nz-button","","nzType","default",1,"remove-col-padding","action-btn"],[3,"nzLabel","nzValue"],[3,"nzVisible","nzTitle","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-typography","","nzType","primary",4,"ngIf"],["rows","8","nz-input","","placeholder","Additional comments...",1,"remove-col-padding",3,"ngModel","nzBorderless","ngModelChange"],["style","margin: 10px; ","nz-typography","","nzType","danger",4,"ngIf"],["nz-typography","","nzType","primary"],["nz-typography","","nzType","danger",2,"margin","10px"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Vc(2,jt,4,2,"ng-container",2),S.Vc(3,Kt,16,6,"ng-container",2),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.rc("ngIf",n.haveUnSavedChanges),S.Db(1),S.rc("ngIf",!n.haveUnSavedChanges))},directives:[k.c,s.q,k.a,P.a,R.a,U.a,Ln.d,u.u,u.x,s.p,Ln.a,N.a,N.b,W.b,u.d,x.a],pipes:[s.j],styles:[".remove-col-padding[_ngcontent-%COMP%]{margin-right:5px!important;margin-left:5px!important}.action-btn[_ngcontent-%COMP%]{font-weight:300;border:none}"]}),Qt),ei=l("iUtR");function ni(e,n){if(1&e&&(S.Xb(0,"div",8),S.Xb(1,"span",9),S.Xc(2," Enrollment Wizard "),S.Wb(),S.Xb(3,"span",10),S.Xb(4,"strong",11),S.Xc(5),S.jc(6,"timer"),S.Wb(),S.Wb(),S.Wb()),2&e){var t=S.ic(2);S.Db(5),S.Zc(" ",S.mc(6,1,t.timerValue,t.timerStart,t.isDiffValue)," ")}}function ti(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"wizard-content",16),S.ec("onChecklistUpdate",function(){return S.Lc(t),S.ic(4).onCheckListChange()})("positiveNegativeFlow",function(e){return S.Lc(t),S.ic(4).positiveNegativeFlow(e)})("onFirstNurseCallAppointmentUpdate",function(e){return S.Lc(t),S.ic(4).onFirstNurseCallAppointmentUpdate(e)}),S.Wb(),S.Ub()}if(2&e){var i=n.$implicit,a=S.ic(4);S.Db(1),S.rc("component",i)("variablesMap",a.variablesMap)("timezones",a.timezones)("isHidden",a.isHidden)("lead",a.lead)("preview",a.preview)("customComponentsValuesMap",a.customComponentsValuesMap)("haveUnSavedChanges",a.haveUnSavedChanges)}}function ii(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",17),S.Xb(1,"div",18),S.Xb(2,"div",19),S.Xb(3,"div",20),S.Xb(4,"div",21),S.Xb(5,"angular-editor",22,23),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic(4).enrolmentChecklist.additionalNotes=e}),S.Wb(),S.Wb(),S.Wb(),S.Sb(7,"br"),S.Xb(8,"div",20),S.Xb(9,"div",24),S.Xb(10,"app-note-template-picker",25),S.ec("onTemplateSelected",function(e){return S.Lc(t),S.ic(4).setTemplate(e)}),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.ic(4);S.Sc("height",i.height),S.Db(5),S.rc("ngModel",i.enrolmentChecklist.additionalNotes)("config",i.config),S.Db(5),S.rc("note",i.enrolmentChecklist.additionalNotes)}}function ai(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"div",12),S.Xb(2,"div",13),S.Vc(3,ti,2,8,"ng-container",14),S.Wb(),S.Wb(),S.Vc(4,ii,11,5,"div",15),S.Ub()),2&e){var t=S.ic(3);S.Db(1),S.Sc("height",t.height),S.Db(2),S.rc("ngForOf",null==t.enrolmentChecklist?null:t.enrolmentChecklist.checklistData),S.Db(1),S.rc("ngIf",!t.preview)}}function oi(e,n){if(1&e&&(S.Vb(0),S.Vc(1,ai,5,4,"ng-container",1),S.Ub()),2&e){var t=S.ic(2),i=S.Ic(5);S.Db(1),S.rc("ngIf",t.enrolmentChecklist)("ngIfElse",i)}}function li(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"div",6),S.Vc(2,ni,7,5,"div",7),S.Vc(3,oi,2,2,"ng-container",2),S.Wb(),S.Ub()),2&e){var t=S.ic();S.Db(2),S.rc("ngIf",!t.preview),S.Db(1),S.rc("ngIf",!t.showChecklistLoader)}}function ri(e,n){if(1&e&&(S.Xb(0,"div",27),S.Xb(1,"div",28),S.Xb(2,"div",29),S.Xb(3,"p",30),S.Xc(4," Additional Notes "),S.Wb(),S.Sb(5,"p",31),S.Wb(),S.Wb(),S.Wb()),2&e){var t=S.ic(2);S.Db(5),S.rc("innerHTML",null==t.enrolmentChecklist?null:t.enrolmentChecklist.additionalNotes,S.Mc)}}function ci(e,n){if(1&e&&(S.Vb(0),S.Vc(1,ri,6,1,"div",26),S.Ub()),2&e){var t=S.ic();S.Db(1),S.rc("ngIf",t.preview)}}function si(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",6),S.Xb(1,"div",32),S.Xb(2,"div",33),S.Xb(3,"wizard-footer-action-bar",34),S.ec("submitChecklist",function(e){return S.Lc(t),S.ic().onChecklistSubmit(e)})("onCallActionUpdate",function(e){return S.Lc(t),S.ic().onCallActionUpdate(e)})("sendSMSEnrolment",function(e){return S.Lc(t),S.ic().sendSms(e)})("saveChecklist",function(){return S.Lc(t),S.ic().onChecklistUpdate()}),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.ic();S.Db(3),S.rc("isSMSEnabled",!1)("loading",i.loading)("disabled",i.disabled)("haveUnSavedChanges",i.haveUnSavedChanges)}}function di(e,n){if(1&e&&(S.Xb(0,"div",35),S.Sb(1,"nz-spin",36),S.Wb()),2&e){var t=S.ic();S.Sc("height",t.height)}}function ui(e,n){if(1&e&&(S.Xb(0,"div",37),S.Xc(1," No Checklist for Patient "),S.Wb()),2&e){var t=S.ic();S.Sc("height",t.height)}}var bi,pi=((bi=function(e){o(t,e);var n=r(t);function t(e,i,a,o,l,r,c){var s;return d(this,t),(s=n.call(this)).router=e,s._staffService=i,s._leadsService=a,s._datePipe=o,s._dataSharingService=l,s._followUpModalService=r,s._notificationService=c,s.toNumber=null,s.preview=!1,s.haveUnSavedChanges=!0,s.timezones=Object(fe.e)(),s.isHidden=!0,s.variablesMap=new Map,s.leadPhoneNumbers=new Set,s.customComponentsValuesMap=new Map,s.shouldAddNewTimeLog=!0,s.timerLogRequest=new Dn,s.autosaveInterval=15e3,s.config=ee.a,s}return a(t,[{key:"previewList",set:function(e){this.preview=e,this.config.editable=!e}},{key:"ngOnInit",value:function(){var e=this;this.loadFromDraft=!1,this.disabled=!0,this._dataSharingService.assignedTenantSettings.subscribe(function(n){e.tenantConfigMap=n,console.log("Lead Tenant Id : ",e.lead.tenantId),e.tenantConfig=e.tenantConfigMap.get(e.lead.tenantId),console.log("TenantConfig : ",e.tenantConfig),e.customComponentsValuesMap.set("TENANT_TIMEZONE",e.tenantConfig.timeZone)}),this.getLeadPhysician(),this.checklistLoading=!0,this.preview?this.height="auto":(this.height=this.wizardHeight-100-40+"px !important",this.config.height=this.wizardHeight-100-40-120+"px !important"),this.lead.patientInfo.phoneNumbers.forEach(function(n){e.leadPhoneNumbers.add("".concat(n.number))}),this.customComponentsValuesMap.set("PATIENT_CONTACT_LIST",this.leadPhoneNumbers),this.initVariableMap()}},{key:"ngOnDestroy",value:function(){this._routeHelperService.setSidebarCollapsed(!1)}},{key:"getLeadPhysician",value:function(){var e=this;this._staffService.getStaffByUserId(this.lead.physicianId).subscribe(function(n){if(n){var t=n,i=t.locations.filter(function(e){return e.defaultLocation});e.siteId=i&&0==i.length?null:t.locations.filter(function(e){return e.defaultLocation})[0].id,e.variablesMap.set("{{PROVIDER_NAME}}",t.fullName),e.preview?e.getChecklistForPreview():e.getCheckList()}})}},{key:"renewAutoSaveSubscription",value:function(){this.onChecklistUpdate()}},{key:"startTimer",value:function(){var e=this;this.timerEnd=void 0,null==this.enrolmentChecklist.timer||0==this.enrolmentChecklist.timer.totalDuration?(this.timerStart=new Date,this.timerValue=new Date,this.timerLogRequest.startTime=this.timerStart,this.timerIntervalId=setInterval(function(){return e.timerValue=new Date},1e3)):(this.timerStart=void 0,this.timerValue=this.enrolmentChecklist.timer.totalDuration,this.isDiffValue=!0,this.timerLogRequest.startTime=new Date,this.timerIntervalId=setInterval(function(){return e.timerValue+=1e3},1e3))}},{key:"endTimer",value:function(){this.timerEnd=new Date,this.timerLogRequest.endTime=this.timerEnd,clearInterval(this.timerIntervalId),this.timerIntervalId=void 0}},{key:"clearTimer",value:function(){this.timerValue=void 0,this.timerStart=void 0,this.timerEnd=void 0,this.timerIntervalId=void 0}},{key:"initVariableMap",value:function(){var e=this.getPreferredPhoneNumber();this.variablesMap.set("{{LEAD_PHONE_NUMBER}}",this.toNumber&&null!=this.toNumber?this.toNumber:"("+e.countryCode+")"+e.number),this.variablesMap.set("{{LEAD_PHONE_NUMBER_TYPE}}",e.label),this.variablesMap.set("{{CLINICIAN_NAME}}",this.tenantConfig.tenantName)}},{key:"getPreferredPhoneNumber",value:function(){var e=this.lead.patientInfo.phoneNumbers.filter(function(e){return e.preferred});return e&&e.length>0?e[0]:this.lead.patientInfo.phoneNumbers[0]}},{key:"hideShowChecklist",value:function(){var e=zn.getStep(1,this.enrolmentChecklist.checklistData);null!=e.radioButton&&null!=e.radioButton.value&&(this.isHidden=!1)}},{key:"getCheckList",value:function(){var e=this;this.enrolmentChecklist?(this.enrolmentChecklist.checklistData=this.enrolmentChecklist.checklistData.sort(function(e,n){return e.order>=n.order?1:-1}),this.hideShowChecklist(),this.startTimer(),this.noChecklist=!1,this.disabled=!1,this.loadFromDraft=!0):this._leadsService.getChecklist(this.lead.leadId,"ENROLMENT","DRAFT",this.loadFromDraft).subscribe(function(n){e.enrolmentChecklist=n,e.enrolmentChecklist.checklistData=e.enrolmentChecklist.checklistData.sort(function(e,n){return e.order>=n.order?1:-1}),e.hideShowChecklist(),e.startTimer(),e.noChecklist=!1,e.disabled=!1,e.loadFromDraft=!0},function(e){},function(){return e.checklistLoading=!1})}},{key:"getChecklistForPreview",value:function(){var e=this;this._leadsService.getChecklistForPreview(this.lead.leadId).subscribe(function(n){e.enrolmentChecklist=n,e.enrolmentChecklist.checklistData=e.enrolmentChecklist.checklistData.sort(function(e,n){return e.order>=n.order?1:-1})},function(n){e.noChecklist=!0},function(){return e.checklistLoading=!1})}},{key:"onCheckListChange",value:function(){this.haveUnSavedChanges=!0}},{key:"onChecklistUpdate",value:function(){var e=this;this.loading=!0,this.hideShowChecklist(),this.enrolmentChecklist.boundary!=Sn.USER_SPECIFIC&&(this.enrolmentChecklist.id=null,this.enrolmentChecklist.boundary=Sn.USER_SPECIFIC,this.enrolmentChecklist.status=yn.DRAFT,this.enrolmentChecklist.name=this.enrolmentChecklist.name+" - "+this.lead.patientInfo.firstName+" "+this.lead.patientInfo.lastName,this.enrolmentChecklist.userId=this.lead.leadId),this.enrolmentChecklist.checklistTimeLog=this.timerLogRequest,this.enrolmentChecklist.checklistTimeLog.shouldAddNewTimeLog=this.shouldAddNewTimeLog,this.enrolmentChecklist.checklistTimeLog.endTime=new Date,this.enrolmentChecklist.totalDiscrepancyReported=this.enrolmentChecklist.checklistData.filter(function(e){return null!=e.reportDiscrepancy&&e.reportDiscrepancy.reported}).length,this._leadsService.updateChecklist(this.enrolmentChecklist).pipe(Object(ce.a)(this.unsubscribed)).subscribe(function(n){e.enrolmentChecklist.id=n.id,e.shouldAddNewTimeLog=!1,e.haveUnSavedChanges=!1,e.loading=!1})}},{key:"onChecklistSubmit",value:function(e){var n;if(n=e&&e.notEligible?{comments:e.extraNotes,reason:e.notEligibileBecause,submitType:"NOT_ELIGIBLE",reasonType:e.notEligibleType}:e&&e.callDeclined?{comments:e.extraNotes,reason:e.notEligibileBecause,submitType:"DECLINED"}:{submitType:"OKAY"},this.enrolmentChecklist.totalDiscrepancyReported>2)return this._notificationService.warning("Descrepancy Found","".concat(this.enrolmentChecklist.totalDiscrepancyReported," Descrepancy Found.")),this.enrolmentChecklist.additionalNotes=this.enrolmentChecklist.additionalNotes+"<br> <br> <hr> <br> "+"".concat(this.enrolmentChecklist.totalDiscrepancyReported," Descrepancy Found. HIPAA verification failure."),void this.submitChecklist(n);"OKAY"==n.submitType&&this.validateChecklist()?this._notificationService.warning("Checklist","Please check all questions in the list are marked as done."):this.submitChecklist(n)}},{key:"enableDisableConvertButton",value:function(){this.enableCompleteButton=this.enrolmentChecklist.checklistData.filter(function(e){return e.isRequired&&(null!=e.checkbox&&null!=e.checkbox.value&&1==e.checkbox.value||null!=e.radioButton&&null!=e.radioButton.value&&null!=e.radioButton.value)}).length<=0}},{key:"validateChecklist",value:function(){return this.enrolmentChecklist.checklistData.filter(function(e){return e.checkbox&&null!=e.checkbox&&e.checkbox.value&&null!=e.checkbox.value||e.radioButton&&null!=e.radioButton&&e.radioButton.value&&null!=e.radioButton.value}).length<=0}},{key:"submitChecklist",value:function(e){var n=this;this._leadsService.submitChecklist(this.enrolmentChecklist.id,e).pipe(Object(ce.a)(this.unsubscribed)).subscribe(function(e){n._leadsService.createChecklistNote(n.enrolmentChecklist).subscribe(),"SUCCESS"==e.response?n.convertLead():n.router.navigate(["leads/"],{queryParams:{tab:"ACTIVE",status:"ACTIVE"}}),n.endTimer()})}},{key:"convertLead",value:function(){var e,n,t,i;this.router.navigate(["patient/lead/",this.lead.leadId],{queryParams:{patientName:"".concat(null===(n=null===(e=this.lead)||void 0===e?void 0:e.patientInfo)||void 0===n?void 0:n.firstName," ").concat(null===(i=null===(t=this.lead)||void 0===t?void 0:t.patientInfo)||void 0===i?void 0:i.lastName),physicianId:this.lead.physicianId,siteId:this.siteId}})}},{key:"onCallActionUpdate",value:function(e){var n=this;switch(this._leadsService.createChecklistNote(this.enrolmentChecklist).subscribe(),e.event){case"REMIND_TO_CALL_LATER":case"CALL_TERMINATED":this._followUpModalService.initEnrolment(void 0,!1,Ae.c.AUDIO_CALL,this.lead,!0).afterClose.subscribe(function(e){n.hideShowChecklist(),n.isReferredFromGenesys&&window.close()});break;case"CALL_DECLINED_HARD_NO":case"NOT_ELIGIBLE":this.isReferredFromGenesys&&window.close()}}},{key:"sendSms",value:function(e){this._followUpModalService.initEnrolment(void 0,!1,Ae.c.SMS,this.lead).afterClose.subscribe(function(e){})}},{key:"positiveNegativeFlow",value:function(e){this.showChecklistLoader=!0;var n=new Array;this.enrolmentChecklist.checklistData.forEach(function(t){"POSITIVE"!==e.flow&&e.index&&t.order>e.index?t.enabled=!1:"POSITIVE"===e.flow&&(t.enabled=!0),n.push(t)}),this.enrolmentChecklist.checklistData=[].concat(n),this.showChecklistLoader=!1}},{key:"onFirstNurseCallAppointmentUpdate",value:function(e){var n=this;this.showChecklistLoader=!0;var t=new Array;this.enrolmentChecklist.checklistData.forEach(function(i){"PATIENT_SMS_SENT"==i.checklistComponentName&&i.textArea&&null!=i.textArea&&(i.textArea.value="You have scheduled an appointment with your care management nurse on "+n._datePipe.transform(e.schedule.startsOn,"dd MMM yyyy hh:mm a")+". Just a remainder, the number that they will be calling you from is {{Nurse_Line}}. Have a great day."),t.push(i)}),this.enrolmentChecklist.checklistData=[].concat(t),this.showChecklistLoader=!1}},{key:"setTemplate",value:function(e){this.enrolmentChecklist.additionalNotes=e}}]),t}(f.a)).\u0275fac=function(e){return new(e||bi)(S.Rb(b.g),S.Rb(kn.a),S.Rb(g.a),S.Rb(s.e),S.Rb(be.a),S.Rb(Cn),S.Rb(I.b))},bi.\u0275cmp=S.Lb({type:bi,selectors:[["basic-enrolment-wizard"]],inputs:{lead:"lead",wizardHeight:"wizardHeight",toNumber:"toNumber",previewList:"previewList",isReferredFromGenesys:"isReferredFromGenesys",enrolmentChecklist:"enrolmentChecklist"},features:[S.Cb([s.e,Wn.a]),S.Ab],decls:8,vars:4,consts:[[1,"container","extra"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["nz-row","","nzGutter","64",4,"ngIf"],["loadingAnimation",""],["noChecklistTemplate",""],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24","class","header",4,"ngIf"],["nz-col","","nzSpan","24",1,"header"],[2,"width","50%"],[2,"width","50%","text-align","end"],["nz-typography","","nzType","success",1,"timer"],["nz-col","","nzFlex","1000","id","checklist-container"],[1,"container"],[4,"ngFor","ngForOf"],["nz-col","","nzFlex","1 0 400px","class","additional-note-container",3,"height",4,"ngIf"],[3,"component","variablesMap","timezones","isHidden","lead","preview","customComponentsValuesMap","haveUnSavedChanges","onChecklistUpdate","positiveNegativeFlow","onFirstNurseCallAppointmentUpdate"],["nz-col","","nzFlex","1 0 400px",1,"additional-note-container"],["nz-row",""],["nz-col",""],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","24",1,"additional-note"],["placeholder","Add additional notes..",3,"ngModel","config","ngModelChange"],["note",""],["nz-col","","nzSpan","24"],[3,"note","onTemplateSelected"],["nz-row","","nzGutter","64","style","padding-right: 86px; padding-left: 64px;",4,"ngIf"],["nz-row","","nzGutter","64",2,"padding-right","86px","padding-left","64px"],["nz-col","","nzSpan","24",1,"additional-note-container"],[1,"additional-note"],["nz-typography","","nzType","secondary"],[3,"innerHTML"],[1,"footer-container"],["nz-col","","nzSpan","24",2,"margin","12px"],[3,"isSMSEnabled","loading","disabled","haveUnSavedChanges","submitChecklist","onCallActionUpdate","sendSMSEnrolment","saveChecklist"],["nz-col","","nzSpan","24",1,"checklist-loader"],["nzTip","Loading..."],["nz-col","","nzSpan","24",1,"checklist-loader",2,"text-align","center"]],template:function(e,n){if(1&e&&(S.Xb(0,"div",0),S.Vc(1,li,4,2,"ng-container",1),S.Vc(2,ci,2,1,"ng-container",2),S.Vc(3,si,4,4,"div",3),S.Wb(),S.Vc(4,di,2,2,"ng-template",null,4,S.Wc),S.Vc(6,ui,2,2,"ng-template",null,5,S.Wc)),2&e){var t=S.Ic(7);S.Db(1),S.rc("ngIf",!n.noChecklist)("ngIfElse",t),S.Db(1),S.rc("ngIf",!n.showChecklistLoader),S.Db(1),S.rc("ngIf",!n.preview)}},directives:[s.q,k.c,k.a,x.a,s.p,Bt,ie.a,u.u,u.x,ae.a,Jt,Z.a],pipes:[ei.a],styles:[".extra[_ngcontent-%COMP%]{padding:0!important;margin:0!important;background:#fff;min-height:200px}#checklist-container[_ngcontent-%COMP%]{margin-right:0!important;margin-left:0!important;margin-top:20px;overflow-y:scroll;scroll-behavior:smooth}.header[_ngcontent-%COMP%]{display:flex;position:absolute;top:0;border-bottom:1px solid #f0f0f0;width:100%;margin-bottom:16px px;height:30px}.additional-note-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:16px!important;width:100%;margin-top:16px}[_nghost-%COMP%]     .angular-editor{width:100%}.checklist-loader[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;top:49%}[_nghost-%COMP%]     body::-webkit-scrollbar{display:none}.footer-container[_ngcontent-%COMP%]{background:#00000099;color:#fff;bottom:0;height:90px;position:absolute;width:100%;left:0}"]}),bi),fi=l("0zwC"),hi=l("5vDB"),gi=l("9xQM");function mi(e,n){1&e&&(S.Xb(0,"strong"),S.Xc(1," N/A "),S.Wb())}function vi(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1),S.jc(2,"translate"),S.Wb()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"TABLEHEADER.GENDER")," "))}function Ci(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1," Primary Contact Number "),S.Wb())}function zi(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1," Secondary Contact Number "),S.Wb())}function yi(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1," Primary Insurance Name "),S.Wb())}function Si(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1," Primary Insurance Member Id "),S.Wb())}function Ii(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1," Secondary Insurance Name "),S.Wb())}function Xi(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1),S.jc(2,"translate"),S.Wb()),2&e&&(S.Db(1),S.Zc(" Secondary ",S.kc(2,1,"INSURANCE.INSURER_MEMBER_ID")," "))}function Di(e,n){1&e&&(S.Xb(0,"span",16),S.Xc(1," Address "),S.Wb())}var ki,Wi=((ki=function(){function e(){d(this,e)}return a(e,[{key:"ngOnInit",value:function(){this.avatarName=this.lead.patientInfo.firstName.charAt(0)+this.lead.patientInfo.lastName.charAt(0)}}]),e}()).\u0275fac=function(e){return new(e||ki)},ki.\u0275cmp=S.Lb({type:ki,selectors:[["app-follow-up-confirmation"]],inputs:{lead:"lead"},decls:57,vars:19,consts:[[1,"outer-container"],["nz-row","",1,"container",3,"nzGutter"],["nz-col","","nzSpan","24"],[2,"width","100%","height","100%"],[2,"text-align","center","display","flex","flex-direction","column"],[1,"avatar-container"],[1,"avatar-name"],[2,"text-align","center"],["nz-typography","","nzType","primary"],[2,"margin","10px"],["isToolTipEnabled","true",3,"isFullName","leadStatus"],[2,"text-align","center","margin","10px"],["nzColor","var(--primary-color)"],["nz-typography","","nz-type","secondary",2,"margin-bottom","10px","margin-top","10px"],[2,"display","flex","flex-direction","row","margin-bottom","10px"],[2,"display","flex","flex-direction","column","width","48%"],["nz-typography","","nzType","secondary"],["nzType","vertical",2,"height","50px"],[2,"display","flex","flex-direction","column","width","100%","margin-top","10px"],["nz-typography",""],["emptyContact",""],["gender",""],["primaryContact",""],["secondaryContact",""],["primaryInsuranceName",""],["primaryInsuranceMemberId",""],["secondaryInsuranceName",""],["secondaryInsuranceMemberId",""],["address1n2",""]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"nz-card",3),S.Xb(4,"div",4),S.Xb(5,"span",5),S.Xb(6,"span",6),S.Xc(7),S.Wb(),S.Wb(),S.Xb(8,"span",7),S.Xb(9,"h4",8),S.Xc(10),S.Wb(),S.Xb(11,"span",9),S.Sb(12,"app-patient-status-tag",10),S.Wb(),S.Wb(),S.Xb(13,"span",11),S.Xb(14,"nz-tag",12),S.Xc(15,"Tier 1"),S.Wb(),S.Wb(),S.Xb(16,"span",13),S.Xc(17),S.Wb(),S.Xb(18,"span",14),S.Xb(19,"span",15),S.Xb(20,"span",16),S.Xc(21," MR Number "),S.Wb(),S.Xb(22,"span",8),S.Xc(23),S.jc(24,"externalSources"),S.Wb(),S.Wb(),S.Sb(25,"nz-divider",17),S.Xb(26,"span",15),S.Xb(27,"span",16),S.Xc(28),S.jc(29,"translate"),S.Wb(),S.Xb(30,"span",8),S.Xc(31),S.jc(32,"date"),S.Wb(),S.Wb(),S.Wb(),S.Xb(33,"span",18),S.Xb(34,"span",16),S.Xc(35," Address "),S.Wb(),S.Xb(36,"span",13),S.Xb(37,"strong",19),S.Xc(38),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Vc(39,mi,2,0,"ng-template",null,20,S.Wc),S.Vc(41,vi,3,3,"ng-template",null,21,S.Wc),S.Vc(43,Ci,2,0,"ng-template",null,22,S.Wc),S.Vc(45,zi,2,0,"ng-template",null,23,S.Wc),S.Vc(47,yi,2,0,"ng-template",null,24,S.Wc),S.Vc(49,Si,2,0,"ng-template",null,25,S.Wc),S.Vc(51,Ii,2,0,"ng-template",null,26,S.Wc),S.Vc(53,Xi,3,3,"ng-template",null,27,S.Wc),S.Vc(55,Di,2,0,"ng-template",null,28,S.Wc),S.Wb()),2&e&&(S.Db(1),S.rc("nzGutter",10),S.Db(6),S.Zc(" ",n.avatarName," "),S.Db(3),S.ad(" ",null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.firstName," \xa0 ",null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.lastName," "),S.Db(2),S.rc("isFullName",!0)("leadStatus",null==n.lead?null:n.lead.status),S.Db(5),S.Zc(" ",(null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.email)||"N/A"," "),S.Db(6),S.Zc(" ",S.lc(24,11,null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")," "),S.Db(5),S.Zc(" ",S.kc(29,14,"TABLEHEADER.DOB")," "),S.Db(3),S.Zc("",S.lc(32,16,(null==n.lead?null:n.lead.patientInfo.dateOfBirth)||"N/A","mediumDate")," "),S.Db(7),S.Zc(" ",(null==n.lead||null==n.lead.patientInfo||null==n.lead.patientInfo.address?null:n.lead.patientInfo.address.location)||""," "))},directives:[k.c,k.a,qe.a,x.a,fi.a,He.a,hi.a],pipes:[gi.a,E.a,s.e],styles:[".lead-details-row[_ngcontent-%COMP%]{margin-top:24px!important}.avatar-container[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:50%;background:#eff1f7;text-align:center;display:flex;align-self:center;flex-direction:column;margin-bottom:10px}.avatar-name[_ngcontent-%COMP%]{height:revert;width:100%;display:flex;align-items:center;flex-flow:column;position:inherit;padding:28%;font-size:25px}[_nghost-%COMP%]     .ant-descriptions-item-label:after{content:none;margin:0}[_nghost-%COMP%]     .ant-descriptions-item-label{font-size:.9em}"]}),ki),Ti=l("50vb"),Ei=l("H/XM"),wi=l("Gi1d"),Li=l("IvDN");function Mi(e,n){if(1&e&&(S.Xc(0," Last updated On: "),S.Xb(1,"strong"),S.Xc(2),S.jc(3,"date"),S.Wb()),2&e){var t=S.ic().$implicit;S.Db(2),S.Yc(S.lc(3,1,t.updatedOn,"dd MMM yyyy hh:mm a"))}}function Oi(e,n){if(1&e&&(S.Xc(0," Updated By: "),S.Xb(1,"strong"),S.Xc(2),S.Wb()),2&e){var t=S.ic().$implicit;S.Db(2),S.Yc(t.changedByName)}}function _i(e,n){if(1&e&&(S.Xb(0,"nz-collapse-panel",1),S.Xb(1,"p",2),S.Sb(2,"basic-enrolment-wizard",3),S.Wb(),S.Vc(3,Mi,4,4,"ng-template",null,4,S.Wc),S.Vc(5,Oi,3,1,"ng-template",null,5,S.Wc),S.Wb()),2&e){var t=n.$implicit,i=S.Ic(4),a=S.Ic(6),o=S.ic();S.rc("nzHeader",i)("nzExtra",a)("nzShowArrow",!0),S.Db(2),S.rc("lead",o.lead)("previewList",!0)("checklist",t)}}var Ni,xi=((Ni=function(){function e(n){d(this,e),this._leadsService=n,this.checklists=new Array}return a(e,[{key:"ngOnInit",value:function(){var e=this;this._leadsService.getChecklistHistory(this.lead.leadId,!0).subscribe(function(n){e.checklists=n})}}]),e}()).\u0275fac=function(e){return new(e||Ni)(S.Rb(g.a))},Ni.\u0275cmp=S.Lb({type:Ni,selectors:[["app-checklist-history"]],inputs:{lead:"lead"},decls:2,vars:1,consts:[[3,"nzHeader","nzExtra","nzShowArrow",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzShowArrow"],[2,"margin","0"],[3,"lead","previewList","checklist"],["header",""],["extraTpl",""]],template:function(e,n){1&e&&(S.Xb(0,"nz-collapse"),S.Vc(1,_i,7,6,"nz-collapse-panel",0),S.Wb()),2&e&&(S.Db(1),S.rc("ngForOf",n.checklists))},directives:[Li.a,s.p,Li.c,pi],pipes:[s.e],styles:[""]}),Ni),Ai=l("4RGM");function Pi(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"label",4),S.Xc(2),S.Wb(),S.Ub()),2&e){var t=S.ic().$implicit;S.Db(1),S.rc("nzValue",t.key),S.Db(1),S.Yc(t.key)}}function Ri(e,n){if(1&e&&(S.Vb(0),S.Vc(1,Pi,3,2,"ng-container",3),S.Ub()),2&e){var t=n.$implicit,i=S.ic();S.Db(1),S.rc("ngIf","LOST"!=i.programStatusMap.get(t.key))}}function Ui(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"div",5),S.Xb(2,"div",6),S.Xb(3,"p",7),S.Xc(4,"Notes"),S.Wb(),S.Wb(),S.Xb(5,"div",8),S.Xb(6,"textarea",9),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().note=e}),S.Wb(),S.Wb(),S.Xb(7,"div",10),S.Xb(8,"button",11),S.ec("click",function(){S.Lc(t);var e=S.ic();return e.markAsLost(e.selectedProgram)}),S.Xc(9," Mark as Lost "),S.Wb(),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(6),S.rc("ngModel",i.note),S.Db(2),S.rc("nzLoading",i.loading)}}var Vi,Fi,Bi,ji=((Vi=function(){function e(n,t){d(this,e),this.nzModalRef=n,this._leadsService=t,this.programStatusMap=new Map}return a(e,[{key:"ngOnInit",value:function(){for(var e in this.programEligibility)this.selectedProgram=e,this.programStatusMap.set(e,this.programEligibility[e].status);console.log("this.programStatusMap : ",this.programStatusMap)}},{key:"onProgramSelect",value:function(e){this.selectedProgram=e,this.note=""}},{key:"markAsLost",value:function(e){var n=this;this.loading=!0,this._leadsService.markAsLost(this.lead.leadId,e,this.note).subscribe(function(t){n.programStatusMap.set(e,"LOST"),console.log("this.programStatusMap : ",n.programStatusMap),console.log("Note : ",n.note),n.loading=!1,n.note="",n.nzModalRef.close()})}}]),e}()).\u0275fac=function(e){return new(e||Vi)(S.Rb(N.e),S.Rb(g.a))},Vi.\u0275cmp=S.Lb({type:Vi,selectors:[["app-mark-as-lost"]],inputs:{lead:"lead",programEligibility:"programEligibility"},decls:6,vars:5,consts:[[1,"container"],["nzButtonStyle","solid",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-radio-button","",3,"nzValue"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","24",1,"timeline-div"],["required","","rows","4","nz-input","",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","24",1,"timeline-div",2,"text-align","center","margin-top","10px"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"nz-radio-group",1),S.ec("ngModelChange",function(e){return n.selectedProgram=e})("ngModelChange",function(){return n.onProgramSelect(n.selectedProgram)}),S.Vc(2,Ri,2,1,"ng-container",2),S.jc(3,"keyvalue"),S.Wb(),S.Sb(4,"nz-divider"),S.Vc(5,Ui,10,2,"ng-container",3),S.Wb()),2&e&&(S.Db(1),S.rc("ngModel",n.selectedProgram),S.Db(1),S.rc("ngForOf",S.kc(3,3,n.programEligibility)),S.Db(3),S.rc("ngIf",n.selectedProgram))},directives:[ze.c,u.u,u.x,s.p,hi.a,s.q,ze.b,ze.a,k.c,k.a,x.a,W.b,u.d,u.C,P.a,R.a,U.a],pipes:[s.j],styles:[""]}),Vi),qi=l("oyxB"),Gi=l("xB20"),Hi=l("ncdi"),Zi=((Fi=function(){function e(n){d(this,e),this.modalService=n}return a(e,[{key:"ngOnInit",value:function(){}},{key:"showMessagePreview",value:function(){this.modalService.create({nzTitle:"Message Preview",nzFooter:null,nzMaskClosable:!0,nzKeyboard:!0,nzContent:this.followUp.followUpEntity.message})}}]),e}()).\u0275fac=function(e){return new(e||Fi)(S.Rb(N.f))},Fi.\u0275cmp=S.Lb({type:Fi,selectors:[["sms-follow-up-card"]],inputs:{followUp:"followUp"},decls:20,vars:8,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","16"],[1,"header"],["nz-col","","nzSpan","8",2,"text-align","right"],[1,"view-message-btn",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline",2,"color","var(--primary-color)"],["nz-col","","nzSpan","12",2,"text-align","left","margin-top","20px"],["nz-typography","",2,"color","var(--primary-color)"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","12",1,"follow-up-response"],["nzColor","var(--primary-color)"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Sb(2,"span",2),S.Xb(3,"strong"),S.Xc(4," SMS Follow-up "),S.Wb(),S.Wb(),S.Xb(5,"div",3),S.Xb(6,"span",4),S.ec("click",function(){return n.showMessagePreview()}),S.Sb(7,"i",5),S.Wb(),S.Wb(),S.Xb(8,"div",6),S.Xb(9,"strong"),S.Xb(10,"span",7),S.Xc(11),S.jc(12,"utcToLocalTime"),S.Wb(),S.Wb(),S.Sb(13,"br"),S.Xb(14,"span",8),S.Xc(15),S.jc(16,"utcToLocalTime"),S.Wb(),S.Wb(),S.Xb(17,"div",9),S.Xb(18,"nz-tag",10),S.Xc(19," Complete "),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.Db(11),S.Zc("",S.lc(12,2,n.followUp.createdAt,"hh:mm a")," "),S.Db(4),S.Yc(S.lc(16,5,n.followUp.createdAt,"mediumDate")))},directives:[k.c,k.a,U.a,V.a,x.a,He.a],pipes:[Wn.a],styles:[".view-message-btn[_ngcontent-%COMP%]{color:var(--primary-color)}.follow-up-response[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-self:end}nz-tag[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]{border-radius:5px 5px 5px 5px;border:1px solid var(--primary-color);margin-right:4px}"]}),Fi),Yi=l("2Vo4"),$i=((Bi=function(){function e(n){d(this,e),this._genesysService=n}return a(e,[{key:"transform",value:function(e){return"ININ-OUTBOUND-NUMBER-UNCALLABLE-SKIPPED"==e?new Yi.a({name:"Call Skipped"}).asObservable():this._genesysService.getWrapUpCodeDetail(e)}}]),e}()).\u0275fac=function(e){return new(e||Bi)(S.Rb(Ti.a))},Bi.\u0275pipe=S.Qb({name:"wrapUpCode",type:Bi,pure:!0}),Bi);function Ki(e,n){if(1&e){var t=S.Yb();S.Xb(0,"span",16),S.ec("click",function(){return S.Lc(t),S.ic().showMessagePreview()}),S.Sb(1,"i",17),S.Wb()}}function Qi(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"async"),S.jc(3,"wrapUpCode"),S.Ub()),2&e){var t,i=S.ic(2);S.Db(1),S.Zc(" ",null==(t=S.kc(2,1,S.kc(3,3,null==i.followUp||null==i.followUp.callRecord||null==i.followUp.callRecord.cellPhone?null:i.followUp.callRecord.cellPhone.lastResult)))?null:t.name," ")}}function Ji(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"async"),S.jc(3,"wrapUpCode"),S.Ub()),2&e){var t,i=S.ic(2);S.Db(1),S.Zc(" ",null==(t=S.kc(2,1,S.kc(3,3,null==i.followUp||null==i.followUp.callRecord||null==i.followUp.callRecord.primaryPhone?null:i.followUp.callRecord.primaryPhone.lastResult)))?null:t.name," ")}}function ea(e,n){if(1&e&&(S.Xb(0,"span",8),S.Xb(1,"p",6),S.Xc(2," Call Response "),S.Wb(),S.Vc(3,Qi,4,5,"ng-container",18),S.Vc(4,Ji,4,5,"ng-container",18),S.Wb()),2&e){var t=S.ic();S.Db(3),S.rc("ngIf",null!=t.followUp.callRecord.cellPhone),S.Db(1),S.rc("ngIf",null!=t.followUp.callRecord.primaryPhone)}}function na(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"utcToLocalTime"),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.Zc(" ",S.lc(2,1,null==t.followUp||null==t.followUp.callRecord||null==t.followUp.callRecord.cellPhone?null:t.followUp.callRecord.cellPhone.lastAttempt,"dd MMM yyyy hh:mm a")," ")}}function ta(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"utcToLocalTime"),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.Zc(" ",S.lc(2,1,null==t.followUp||null==t.followUp.callRecord||null==t.followUp.callRecord.primaryPhone?null:t.followUp.callRecord.primaryPhone.lastAttempt,"dd MMM yyyy hh:mm a")," ")}}function ia(e,n){if(1&e&&(S.Xb(0,"span",8),S.Xb(1,"p",6),S.Xc(2," Call Time "),S.Wb(),S.Vc(3,na,3,4,"ng-container",18),S.Vc(4,ta,3,4,"ng-container",18),S.Wb()),2&e){var t=S.ic();S.Db(3),S.rc("ngIf",null!=t.followUp.callRecord.cellPhone),S.Db(1),S.rc("ngIf",null!=t.followUp.callRecord.primaryPhone)}}function aa(e,n){1&e&&(S.Xb(0,"nz-tag",19),S.Xc(1," Complete "),S.Wb())}function oa(e,n){1&e&&(S.Xb(0,"nz-tag",20),S.Xc(1," Pending "),S.Wb())}var la,ra,ca=((ra=function(){function e(){d(this,e)}return a(e,[{key:"ngOnInit",value:function(){}},{key:"onCallInitiated",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||ra)},ra.\u0275cmp=S.Lb({type:ra,selectors:[["audio-call-follow-up"]],inputs:{followUp:"followUp",phoneNumbers:"phoneNumbers",leadId:"leadId"},decls:30,vars:17,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","16"],[1,"header"],["nz-col","","nzSpan","8",2,"text-align","right"],["class","view-message-btn",3,"click",4,"ngIf"],["nz-col","","nzSpan","24",1,"follow-up-body",2,"text-align","left","margin-top","20px"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","24",1,"follow-up-body",2,"text-align","left","margin-bottom","8px"],["nz-typography","","nzType","primary"],["nz-col","","nzSpan","12",1,"follow-up-body"],["nz-typography","","nzType","primary",4,"ngIf"],["nz-col","","nzSpan","12",2,"text-align","left","margin-top","20px"],["nz-typography","",2,"color","var(--primary-color)"],["nz-col","","nzSpan","12",1,"follow-up-response"],["nzColor","var(--primary-color)",4,"ngIf"],["nzColor","var(--warning-color)",4,"ngIf"],[1,"view-message-btn",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline",2,"color","var(--primary-color)"],[4,"ngIf"],["nzColor","var(--primary-color)"],["nzColor","var(--warning-color)"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Sb(2,"span",2),S.Xb(3,"strong"),S.Xc(4," Audio call Follow-up "),S.Wb(),S.Wb(),S.Xb(5,"div",3),S.Vc(6,Ki,2,0,"span",4),S.Wb(),S.Xb(7,"div",5),S.Xb(8,"p",6),S.Xc(9," Call scheduled Date "),S.Wb(),S.Wb(),S.Xb(10,"div",7),S.Xb(11,"p",8),S.Xc(12),S.jc(13,"utcToLocalTime"),S.Wb(),S.Wb(),S.Xb(14,"div",9),S.Vc(15,ea,5,2,"span",10),S.Wb(),S.Xb(16,"div",9),S.Vc(17,ia,5,2,"span",10),S.Wb(),S.Xb(18,"div",11),S.Xb(19,"strong"),S.Xb(20,"span",12),S.Xc(21),S.jc(22,"utcToLocalTime"),S.Wb(),S.Wb(),S.Sb(23,"br"),S.Xb(24,"span",6),S.Xc(25),S.jc(26,"utcToLocalTime"),S.Wb(),S.Wb(),S.Xb(27,"div",13),S.Vc(28,aa,2,0,"nz-tag",14),S.Vc(29,oa,2,0,"nz-tag",15),S.Wb(),S.Wb()),2&e&&(S.Db(6),S.rc("ngIf",!1),S.Db(6),S.Zc(" ",S.lc(13,8,n.followUp.linkedAppointment.schedule.startsOn,"mediumDate")," "),S.Db(3),S.rc("ngIf",null!=n.followUp.callRecord),S.Db(2),S.rc("ngIf",null!=n.followUp.callRecord),S.Db(4),S.Zc("",S.lc(22,11,n.followUp.createdAt,"hh:mm a")," "),S.Db(4),S.Yc(S.lc(26,14,n.followUp.createdAt,"mediumDate")),S.Db(3),S.rc("ngIf","COMPLETED"==(null==n.followUp?null:n.followUp.status)),S.Db(1),S.rc("ngIf","PENDING"==(null==n.followUp?null:n.followUp.status)))},directives:[k.c,k.a,s.q,x.a,U.a,V.a,He.a],pipes:[Wn.a,s.b,$i],styles:[".view-message-btn[_ngcontent-%COMP%]{color:var(--primary-color)}.follow-up-response[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-self:end;padding-right:0!important}nz-tag[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]{border-radius:5px 5px 5px 5px;border:1px solid var(--primary-color);margin-right:4px}.follow-up-body[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;align-items:center}p[_ngcontent-%COMP%]{margin-bottom:3px}"]}),ra),sa=((la=function(){function e(){d(this,e)}return a(e,[{key:"ngOnInit",value:function(){}},{key:"showLetterPreview",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||la)},la.\u0275cmp=S.Lb({type:la,selectors:[["letter-follow-up"]],inputs:{followUp:"followUp"},decls:20,vars:8,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","16"],[1,"header"],["nz-col","","hidden","","nzSpan","8",2,"text-align","right"],[1,"view-message-btn",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline",2,"color","var(--primary-color)"],["nz-col","","nzSpan","12",2,"text-align","left","margin-top","20px"],["nz-typography","",2,"color","var(--primary-color)"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","12",1,"follow-up-response"],["nzColor","var(--primary-color)"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Sb(2,"span",2),S.Xb(3,"strong"),S.Xc(4," Enrollment letter sent "),S.Wb(),S.Wb(),S.Xb(5,"div",3),S.Xb(6,"span",4),S.ec("click",function(){return n.showLetterPreview()}),S.Sb(7,"i",5),S.Wb(),S.Wb(),S.Xb(8,"div",6),S.Xb(9,"strong"),S.Xb(10,"span",7),S.Xc(11),S.jc(12,"utcToLocalTime"),S.Wb(),S.Wb(),S.Sb(13,"br"),S.Xb(14,"span",8),S.Xc(15),S.jc(16,"utcToLocalTime"),S.Wb(),S.Wb(),S.Xb(17,"div",9),S.Xb(18,"nz-tag",10),S.Xc(19," Complete "),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.Db(11),S.Zc("",S.lc(12,2,n.followUp.createdAt,"hh:mm a")," "),S.Db(4),S.Yc(S.lc(16,5,n.followUp.createdAt,"mediumDate")))},directives:[k.c,k.a,U.a,V.a,x.a,He.a],pipes:[Wn.a],styles:[".view-message-btn[_ngcontent-%COMP%]{color:var(--primary-color)}.follow-up-response[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-self:end}nz-tag[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]{border-radius:5px 5px 5px 5px;border:1px solid var(--primary-color);margin-right:4px}"]}),la);function da(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"nz-card",11),S.Sb(2,"sms-follow-up-card",12),S.Wb(),S.Ub()),2&e){var t=S.ic(2).$implicit;S.Db(1),S.rc("nzHoverable",!0),S.Db(1),S.rc("followUp",t)}}function ua(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"nz-card",13),S.Sb(2,"audio-call-follow-up",14),S.Wb(),S.Ub()),2&e){var t=S.ic(2).$implicit,i=S.ic(2);S.Db(1),S.rc("nzHoverable",!0),S.Db(1),S.rc("followUp",t)("phoneNumbers",i.phoneNumbers)("leadId",i.leadId)}}function ba(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"nz-card",11),S.Sb(2,"letter-follow-up",12),S.Wb(),S.Ub()),2&e){var t=S.ic(2).$implicit;S.Db(1),S.rc("nzHoverable",!0),S.Db(1),S.rc("followUp",t)}}function pa(e,n){if(1&e&&(S.Xb(0,"nz-timeline-item",9),S.Vc(1,da,3,2,"ng-container",10),S.Vc(2,ua,3,4,"ng-container",10),S.Vc(3,ba,3,2,"ng-container",10),S.Wb()),2&e){var t=S.ic().$implicit;S.ic();var i=S.Ic(7),a=S.Ic(5);S.rc("nzDot","COMPLETED"==t.status?i:a),S.Db(1),S.rc("ngIf","SMS"==t.type),S.Db(1),S.rc("ngIf","AUDIO_CALL"==t.type),S.Db(1),S.rc("ngIf","LETTER"==t.type)}}function fa(e,n){if(1&e&&(S.Vb(0),S.Vc(1,pa,4,4,"nz-timeline-item",8),S.Ub()),2&e){var t=n.$implicit;S.Db(1),S.rc("ngIf",!t.hidden)}}function ha(e,n){1&e&&S.Sb(0,"i",15)}function ga(e,n){1&e&&S.Sb(0,"i",16)}function ma(e,n){if(1&e&&(S.Xb(0,"div",3),S.Xb(1,"div",4),S.Xb(2,"nz-timeline"),S.Vc(3,fa,2,1,"ng-container",5),S.Wb(),S.Vc(4,ha,1,0,"ng-template",null,6,S.Wc),S.Vc(6,ga,1,0,"ng-template",null,7,S.Wc),S.Wb(),S.Wb()),2&e){var t=S.ic();S.Db(3),S.rc("ngForOf",t.followUps)}}var va,Ca=((va=function(){function e(n,t){d(this,e),this._genesysService=n,this._leadsService=t,this.followUps=new Array,this.loadFullLead=!1}return a(e,[{key:"ngOnInit",value:function(){var e;this.loadFullLead?this.getLead():this.followUps=null===(e=this.followUps)||void 0===e?void 0:e.sort(function(e,n){return e.step>=n.step?-1:1})}},{key:"getLead",value:function(){var e=this;this.loadingFollowUp=!0,this._genesysService.updateLeadContact(this.leadId).subscribe(function(n){e.getSpecificLead()},function(n){e.getSpecificLead()})}},{key:"getSpecificLead",value:function(){var e=this;this._leadsService.getSpecificLeadForUser(this.leadId).subscribe(function(n){e.lead=n,e.followUps=null!=e.lead.followUps&&null!=e.lead.followUps?e.lead.followUps.reverse():[],e.loadingFollowUp=!1})}}]),e}()).\u0275fac=function(e){return new(e||va)(S.Rb(Ti.a),S.Rb(g.a))},va.\u0275cmp=S.Lb({type:va,selectors:[["follow-up-timeline"]],inputs:{followUps:"followUps",phoneNumbers:"phoneNumbers",leadId:"leadId",loadFullLead:"loadFullLead"},decls:3,vars:2,consts:[[1,"container"],["nzSimple","",2,"display","flex","flex-direction","column","align-items","center",3,"nzSpinning"],["nz-row","","nzGutter","64",4,"ngIf"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24",1,"timeline-div"],[4,"ngFor","ngForOf"],["pendingTemplate",""],["completedTemplate",""],["nzColor","var(--primary-color)",3,"nzDot",4,"ngIf"],["nzColor","var(--primary-color)",3,"nzDot"],[4,"ngIf"],[1,"followup-card",3,"nzHoverable"],[3,"followUp"],["cclass","followup-card",3,"nzHoverable"],[3,"followUp","phoneNumbers","leadId"],["nz-icon","","nzType","clock-circle","nzTheme","fill",2,"font-size","16px","color","var(--warning-color)"],["nz-icon","","nzType","check-circle","nzTheme","fill",2,"font-size","16px","color","var(--success-color)"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Sb(1,"nz-spin",1),S.Vc(2,ma,8,1,"div",2),S.Wb()),2&e&&(S.Db(1),S.rc("nzSpinning",n.loadingFollowUp),S.Db(1),S.rc("ngIf",!n.loadingFollowUp))},directives:[Z.a,s.q,k.c,k.a,Hi.a,s.p,Hi.b,qe.a,Zi,ca,sa,U.a,V.a],styles:[".followup-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;margin-bottom:3px}[_nghost-%COMP%]     .ant-card-hoverable{cursor:default!important}[_nghost-%COMP%]     .ant-card-hoverable:hover{box-shadow:3px 5px 5px #00000036;background:#f1f1f1 0 0 no-repeat padding-box}.followup-card[_ngcontent-%COMP%] >   .ant-card-body{padding:10px 10px 10px 18px}.timeline-div[_ngcontent-%COMP%]{padding-left:24px!important;padding-right:24px!important}"]}),va),za=l("HStR"),ya=l("3+Kf"),Sa=l("Wfee"),Ia=l("ZKr6"),Xa=["enrolmentWizard"];function Da(e,n){if(1&e&&S.Sb(0,"nz-alert",77),2&e){var t=S.ic(2);S.tc("nzMessage","The lead was marked as Lost with reason: ",null==t.lead||null==t.lead.leadStatusInfo||null==t.lead.leadStatusInfo.latestStatusHistory?null:t.lead.leadStatusInfo.latestStatusHistory.comments,"")}}function ka(e,n){if(1&e&&(S.Xb(0,"div",78),S.Xb(1,"div",21),S.Xb(2,"nz-card",79),S.Xc(3),S.Wb(),S.Wb(),S.Wb()),2&e){var t=S.ic(2);S.rc("nzGutter",10),S.Db(3),S.cd(" ",null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.firstName," ",null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.lastName," was moved to Not Eligible on ",t.notEligibleDate," with this note : ",t.message," ")}}function Wa(e,n){if(1&e&&(S.Xb(0,"span",80),S.Xb(1,"strong",81),S.Xc(2),S.Wb(),S.Wb()),2&e){var t=S.ic(2),i=S.Ic(22);S.rc("nzTitle",i),S.Db(2),S.Zc(" ",null==t.lead?null:t.lead.physician," ")}}function Ta(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"strong",51),S.Xc(2),S.Wb(),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.uc("nzCopyText","[",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[0]?null:t.lead.patientInfo.phoneNumbers[0].countryCode,"]",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[0]?null:t.lead.patientInfo.phoneNumbers[0].number,""),S.Db(1),S.ad(" [",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[0]?null:t.lead.patientInfo.phoneNumbers[0].countryCode,"] ",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[0]?null:t.lead.patientInfo.phoneNumbers[0].number," ")}}function Ea(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"strong",51),S.Xc(2),S.Wb(),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.uc("nzCopyText","[",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[1]?null:t.lead.patientInfo.phoneNumbers[1].countryCode,"]",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[1]?null:t.lead.patientInfo.phoneNumbers[1].number,""),S.Db(1),S.ad(" [",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[1]?null:t.lead.patientInfo.phoneNumbers[1].countryCode,"] ",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.phoneNumbers[1]?null:t.lead.patientInfo.phoneNumbers[1].number," ")}}function wa(e,n){if(1&e&&(S.Xb(0,"nz-descriptions-item",48),S.Xb(1,"strong",81),S.Xc(2),S.jc(3,"userLocations"),S.Wb(),S.Wb()),2&e){var t=S.ic(2),i=S.Ic(24);S.rc("nzTitle",i),S.Db(2),S.Zc(" ",S.kc(3,2,null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.locations)," ")}}function La(e,n){if(1&e&&(S.Xb(0,"strong",81),S.Xb(1,"span"),S.Xc(2),S.Wb(),S.Sb(3,"br"),S.Xc(4),S.jc(5,"date"),S.jc(6,"date"),S.Wb()),2&e){var t=S.ic(2);S.Db(2),S.Zc(" ",(null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.availableHours?null:t.lead.patientInfo.availableHours.days)||""," "),S.Db(2),S.ad(" From: ",S.lc(5,3,null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.availableHours?null:t.lead.patientInfo.availableHours.fromTime,"hh:mm a")||"-"," To: ",S.lc(6,6,null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.availableHours?null:t.lead.patientInfo.availableHours.toTime,"hh:mm a")||"-"," ")}}function Ma(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"span",82),S.Xc(2),S.Wb(),S.Ub()),2&e){var t=n.$implicit;S.Db(2),S.ad("",null==t?null:t.code," ",null==t?null:t.description," ")}}function Oa(e,n){if(1&e&&(S.Xb(0,"nz-descriptions-item",48),S.Xb(1,"strong",81),S.Vc(2,Ma,3,2,"ng-container",58),S.Wb(),S.Wb()),2&e){var t=S.ic(2),i=S.Ic(26);S.rc("nzTitle",i),S.Db(2),S.rc("ngForOf",null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.healthInfo?null:t.lead.patientInfo.healthInfo.dxCodes)}}function _a(e,n){1&e&&S.Sb(0,"nz-divider",86)}function Na(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"div"),S.Xb(2,"div",83),S.Sb(3,"label",84),S.Wb(),S.Xb(4,"label",39),S.Xc(5),S.jc(6,"date"),S.Wb(),S.Wb(),S.Vc(7,_a,1,0,"nz-divider",85),S.Ub()),2&e){var t=n.$implicit,i=n.last,a=S.ic(2);S.Db(3),S.rc("innerHTML",null==t?null:t.content,S.Mc),S.Db(2),S.ad(" Added by ",a.getAddedBy(null==t?null:t.caretakerName)," on ",S.lc(6,4,null==t?null:t.createdOn,"MMM dd yyyy, hh:mm a")," "),S.Db(2),S.rc("ngIf",!i)}}function xa(e,n){if(1&e){var t=S.Yb();S.Xb(0,"a",94),S.ec("click",function(){S.Lc(t);var e=S.ic().$implicit,n=S.ic(3);return n.resolve(e,n.element)}),S.Xc(1," Resolve "),S.Wb()}}var Aa=function(){return["RESOLVE_WORK_LIST_ITEM"]};function Pa(e,n){if(1&e&&(S.Xb(0,"li",90),S.Xb(1,"ul",91),S.Xb(2,"nz-list-item-action"),S.Vc(3,xa,2,0,"a",92),S.Wb(),S.Wb(),S.Xb(4,"label",93),S.Xc(5),S.Wb(),S.Wb()),2&e){var t=n.$implicit,i=S.ic(3);S.Db(3),S.rc("isFeaturePermitted",S.xc(2,Aa)),S.Db(2),S.Zc(" ",null==i.issueReasonMap?null:i.issueReasonMap.get(null==t?null:t.type)," ")}}function Ra(e,n){if(1&e&&(S.Xb(0,"div",87),S.Xb(1,"div",62),S.Xb(2,"div",21),S.Xb(3,"span"),S.Xb(4,"label",64),S.Xc(5,"Qualification Issues"),S.Wb(),S.Xb(6,"p"),S.Xb(7,"strong"),S.Xc(8,"Total: "),S.Wb(),S.Xc(9),S.Wb(),S.Wb(),S.Wb(),S.Xb(10,"div",21),S.Xb(11,"ul",88),S.Vc(12,Pa,6,3,"li",89),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e){var t=S.ic(2);S.Db(9),S.Zc(" ",null==t.workLists?null:t.workLists.totalElements," "),S.Db(2),S.rc("nzDataSource",null==t.workLists?null:t.workLists.content),S.Db(1),S.rc("ngForOf",null==t.workLists?null:t.workLists.content)}}function Ua(e,n){if(1&e){var t=S.Yb();S.Xb(0,"button",95),S.ec("click",function(){return S.Lc(t),S.ic(2).addFollowUp()}),S.Sb(1,"i",96),S.Wb()}if(2&e){var i=S.ic(2);S.rc("disabled",i.pendingFollowUpPresent)}}function Va(e,n){}function Fa(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",102),S.ec("click",function(){return S.Lc(t),S.ic(3).editLead()}),S.Xb(1,"div",103),S.Sb(2,"app-icons",107),S.Wb(),S.Xc(3," \xa0 "),S.Xb(4,"strong"),S.Xc(5),S.jc(6,"translate"),S.Wb(),S.Xc(7," \xa0 "),S.Sb(8,"app-icons",106),S.Wb()}2&e&&(S.Db(2),S.rc("originalStyle",!0),S.Db(3),S.Yc(S.kc(6,2,"LEADS.EDIT_LEAD")))}function Ba(e,n){1&e&&S.Tb(0)}function ja(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",102),S.ec("click",function(){return S.Lc(t),S.ic(4).markAsLost()}),S.Xb(1,"div",103),S.Sb(2,"app-icons",107),S.Wb(),S.Xc(3," \xa0 "),S.Xb(4,"strong"),S.Xc(5,"Mark as Lost"),S.Wb(),S.Xc(6," \xa0 "),S.Sb(7,"app-icons",106),S.Wb()}2&e&&(S.Db(2),S.rc("originalStyle",!0))}function qa(e,n){if(1&e&&(S.Vb(0),S.Vc(1,ja,8,1,"div",99),S.Ub()),2&e){var t=S.ic(3);S.Db(1),S.rc("ngIf",!(null!=t.tenantConfig&&null!=t.tenantConfig.redoxConfig&&t.tenantConfig.redoxConfig.enabled))}}function Ga(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",102),S.ec("click",function(){return S.Lc(t),S.ic(3).showPreview()}),S.Xb(1,"div",103),S.Sb(2,"span",108),S.Wb(),S.Xc(3," \xa0 "),S.Xb(4,"strong",109),S.Xb(5,"label",34),S.Xc(6,"Preview Checklist"),S.Wb(),S.Wb(),S.Xc(7," \xa0 "),S.Sb(8,"app-icons",106),S.Wb()}}var Ha=function(){return[32,32]},Za=function(){return["MARK_LEAD_AS_LOST"]};function Ya(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",97),S.Xb(1,"div",54),S.Xb(2,"div",98),S.Xb(3,"strong"),S.Xc(4),S.jc(5,"translate"),S.Wb(),S.Wb(),S.Sb(6,"br"),S.Xb(7,"div",27),S.Vc(8,Fa,9,4,"div",99),S.Vc(9,Ba,1,0,"ng-container",100),S.Vc(10,qa,2,1,"ng-container",101),S.Vc(11,Ga,9,0,"div",99),S.Xb(12,"div",102),S.ec("click",function(){return S.Lc(t),S.ic(2).deleteLead()}),S.Xb(13,"div",103),S.Sb(14,"app-icons",104),S.Wb(),S.Xc(15," \xa0 "),S.Xb(16,"strong",105),S.Xb(17,"label",93),S.Xc(18),S.jc(19,"translate"),S.Wb(),S.Wb(),S.Xc(20," \xa0 "),S.Sb(21,"app-icons",106),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.ic(2);S.Db(4),S.Yc(S.kc(5,8,"PATIENT.OTHER_ACCOUNT_ACTIONS")),S.Db(3),S.rc("nzGutter",S.xc(12,Ha)),S.Db(1),S.rc("ngIf",!(null!=i.tenantConfig&&null!=i.tenantConfig.redoxConfig&&i.tenantConfig.redoxConfig.enabled)),S.Db(1),S.rc("isFeaturePermitted",S.xc(13,Za)),S.Db(1),S.rc("ngIf","LOST"!=(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)),S.Db(1),S.rc("ngIf","ACTIVE"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)||"NOT_ELIGIBLE"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)||"CONVERTED"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)),S.Db(3),S.rc("originalStyle",!0),S.Db(4),S.Yc(S.kc(19,10,"LEADS.DELETE_LEAD"))}}var $a=function(e){return{left:e}};function Ka(e,n){if(1&e){var t=S.Yb();S.Xb(0,"div",15),S.Xb(1,"app-header",16),S.ec("action",function(){return S.Lc(t),S.ic().startEnrolmentWizard()})("secondaryAction",function(){return S.Lc(t),S.ic().updateContact()}),S.Wb(),S.Xb(2,"nz-tabset",17),S.ec("nzSelectedIndexChange",function(e){return S.Lc(t),S.ic().selectedTabIndex=e}),S.Xb(3,"nz-tab",18),S.Xb(4,"div",19),S.Xb(5,"div",20),S.Xb(6,"div",21),S.Vc(7,Da,1,1,"nz-alert",22),S.Wb(),S.Wb(),S.Xb(8,"div",23),S.Xb(9,"div",21),S.Vc(10,ka,4,5,"div",24),S.Xb(11,"div",25),S.Xb(12,"div",26),S.Xb(13,"div",27),S.Xb(14,"div",28),S.Xb(15,"nz-card",29),S.Xb(16,"div",30),S.Xb(17,"span",31),S.Xb(18,"span",32),S.Xc(19),S.Wb(),S.Wb(),S.Xb(20,"span",33),S.Xb(21,"strong",34),S.Xc(22),S.Wb(),S.Xb(23,"span",35),S.Sb(24,"app-patient-status-tag",36),S.Wb(),S.Xb(25,"p"),S.Xc(26),S.Wb(),S.Wb(),S.Xb(27,"span",37),S.Xb(28,"nz-tag",38),S.Xc(29),S.Wb(),S.Wb(),S.Xb(30,"span"),S.Xb(31,"span",39),S.Xc(32),S.jc(33,"translate"),S.Wb(),S.Xb(34,"span",40),S.Xc(35),S.Wb(),S.Wb(),S.Xb(36,"span",41),S.Xb(37,"span",42),S.Xb(38,"span",39),S.Xc(39," MR Number "),S.Wb(),S.Xb(40,"span",43),S.jc(41,"externalSources"),S.Xc(42),S.jc(43,"externalSources"),S.Wb(),S.Wb(),S.Sb(44,"nz-divider",44),S.Xb(45,"span",42),S.Xb(46,"span",39),S.Xc(47),S.jc(48,"translate"),S.Wb(),S.Xb(49,"span",43),S.jc(50,"date"),S.Xc(51),S.jc(52,"date"),S.Wb(),S.Wb(),S.Wb(),S.Xb(53,"span",42),S.Xb(54,"span",39),S.Xc(55," Physician "),S.Wb(),S.Vc(56,Wa,3,2,"span",45),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(57,"div",46),S.Xb(58,"nz-card",29),S.Xb(59,"nz-descriptions",47),S.Xb(60,"nz-descriptions-item",48),S.Xb(61,"strong"),S.Xc(62),S.jc(63,"titlecase"),S.Wb(),S.Wb(),S.Xb(64,"nz-descriptions-item",48),S.Vc(65,Ta,3,4,"ng-container",49),S.Wb(),S.Xb(66,"nz-descriptions-item",48),S.Vc(67,Ea,3,4,"ng-container",49),S.Wb(),S.Vc(68,wa,4,4,"nz-descriptions-item",50),S.Xb(69,"nz-descriptions-item",48),S.Xb(70,"strong",51),S.Xc(71),S.Wb(),S.Wb(),S.Xb(72,"nz-descriptions-item",48),S.Xb(73,"strong",51),S.Xc(74),S.Wb(),S.Wb(),S.Xb(75,"nz-descriptions-item",48),S.Xb(76,"strong",51),S.Xc(77),S.Wb(),S.Wb(),S.Vb(78),S.Xb(79,"nz-descriptions-item",48),S.Xb(80,"strong",51),S.Xc(81),S.Wb(),S.Wb(),S.Xb(82,"nz-descriptions-item",48),S.Xb(83,"strong",51),S.Xc(84),S.Wb(),S.Wb(),S.Ub(),S.Wb(),S.Xb(85,"nz-descriptions",47),S.Xb(86,"nz-descriptions-item",48),S.Vc(87,La,7,9,"strong",52),S.Wb(),S.Wb(),S.Xb(88,"nz-descriptions",47),S.Vc(89,Oa,3,2,"nz-descriptions-item",50),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Sb(90,"nz-divider"),S.Xb(91,"div",27),S.Xb(92,"div",21),S.Xb(93,"div",53),S.Xb(94,"div",54),S.Xb(95,"h3"),S.Xc(96),S.jc(97,"translate"),S.Wb(),S.Wb(),S.Xb(98,"div",55),S.Xb(99,"div",56),S.Xb(100,"button",57),S.ec("click",function(){return S.Lc(t),S.ic().addNewNote()}),S.Xc(101),S.jc(102,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Vc(103,Na,8,7,"ng-container",58),S.Wb(),S.Wb(),S.Wb(),S.Xb(104,"div",59),S.Vc(105,Ra,13,3,"div",60),S.Xb(106,"div",61),S.Xb(107,"div",62),S.Xb(108,"div",63),S.Xb(109,"span"),S.Xb(110,"label",64),S.Xc(111," Follow-up History "),S.Wb(),S.Xb(112,"p"),S.Xb(113,"strong"),S.Xc(114),S.jc(115,"translate"),S.Wb(),S.Xc(116),S.Wb(),S.Wb(),S.Wb(),S.Xb(117,"div",63),S.Xb(118,"span",65),S.jc(119,"translate"),S.Vc(120,Ua,2,1,"button",66),S.Wb(),S.Wb(),S.Wb(),S.Xb(121,"div",67),S.Sb(122,"follow-up-timeline",68),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(123,"div",69),S.Xb(124,"div",70),S.Vc(125,Va,0,0,"ng-template",null,71,S.Wc),S.Wb(),S.Wb(),S.Vc(127,Ya,22,14,"div",72),S.Wb(),S.Wb(),S.Xb(128,"nz-tab",73),S.Xb(129,"div",74),S.Sb(130,"app-visits",75),S.Wb(),S.Wb(),S.Xb(131,"nz-tab",76),S.Xb(132,"div",74),S.Sb(133,"app-encounters",75),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.ic(),a=S.Ic(4),o=S.Ic(6),l=S.Ic(2),r=S.Ic(8),c=S.Ic(10),s=S.Ic(12),d=S.Ic(18),u=S.Ic(14),b=S.Ic(16),p=S.Ic(20),f=S.Ic(28);S.Db(1),S.sc("title",(null==i.lead?null:i.lead.patientInfo.firstName)+" "+(null==i.lead?null:i.lead.patientInfo.lastName)),S.sc("defaultTitle",(null==i.lead?null:i.lead.patientInfo.firstName)+" "+(null==i.lead?null:i.lead.patientInfo.lastName)),S.rc("isSearchEnabled",!1)("actionTitle",i.actionTitle)("isSecondaryActionEnabled",!0)("isActionEnabled","ACTIVE"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)),S.Db(1),S.rc("nzSelectedIndex",i.selectedTabIndex),S.Db(2),S.Sc("height",i.height)("min-height",i.height)("overflow-x","hidden"),S.Db(3),S.rc("ngIf","LOST"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)),S.Db(1),S.rc("nzGutter",10),S.Db(2),S.rc("ngIf",i.message),S.Db(1),S.rc("nzGutter",10),S.Db(2),S.rc("nzGutter",10),S.Db(6),S.Zc(" ",i.avatarName," "),S.Db(3),S.ad(" ",null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.firstName," \xa0 ",null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.lastName," "),S.Db(2),S.rc("leadStatus",null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus),S.Db(2),S.Yc(i.preferredName),S.Db(3),S.Zc(" Tier ",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation?null:i.lead.patientInfo.insuranceInformation.tier)||"0"," "),S.Db(3),S.Zc(" ",S.kc(33,86,"TABLEHEADER.EMAIL")," "),S.Db(3),S.Zc(" ",(null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.email)||"N/A"," "),S.Db(5),S.rc("nzCopyText",S.lc(41,88,null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")),S.Db(2),S.Zc(" ",S.lc(43,91,null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")," "),S.Db(5),S.Zc(" ",S.kc(48,94,"TABLEHEADER.DOB")," "),S.Db(2),S.rc("nzCopyText",S.lc(50,96,(null==i.lead?null:i.lead.patientInfo.dateOfBirth)||"N/A","mediumDate")),S.Db(2),S.Zc("",S.lc(52,99,(null==i.lead?null:i.lead.patientInfo.dateOfBirth)||"N/A","mediumDate")," "),S.Db(5),S.rc("ngIf",!(null==i.lead||!i.lead.physician)),S.Db(4),S.rc("nzTitle",a),S.Db(2),S.Yc(S.kc(63,102,(null==i.lead?null:i.lead.patientInfo.gender)||"N/A")),S.Db(2),S.rc("nzTitle",o),S.Db(1),S.rc("ngIf",null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.phoneNumbers[0]?null:i.lead.patientInfo.phoneNumbers[0].number)("ngIfElse",l),S.Db(1),S.rc("nzTitle",r),S.Db(1),S.rc("ngIf",null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.phoneNumbers[1]?null:i.lead.patientInfo.phoneNumbers[1].number)("ngIfElse",l),S.Db(1),S.rc("ngIf",!(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.locations||!i.lead.patientInfo.locations.length)),S.Db(1),S.rc("nzTitle",c),S.Db(1),S.rc("nzCopyText",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName)||"N/A"),S.Db(1),S.Zc(" ",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName)||"N/A"," "),S.Db(1),S.rc("nzTitle",s),S.Db(1),S.rc("nzCopyText",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId)||"N/A"),S.Db(1),S.Zc(" ",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId)||"N/A"," "),S.Db(1),S.rc("nzTitle",d),S.Db(1),S.sc("nzCopyText",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.address?null:i.lead.patientInfo.address.location)||""),S.Db(1),S.Zc(" ",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.address?null:i.lead.patientInfo.address.location)||""," "),S.Db(2),S.rc("nzTitle",u),S.Db(1),S.rc("nzCopyText",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName)||"N/A"),S.Db(1),S.Zc(" ",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName)||"N/A"," "),S.Db(1),S.rc("nzTitle",b),S.Db(1),S.rc("nzCopyText",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId)||"N/A"),S.Db(1),S.Zc(" ",(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.insuranceInformation||null==i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:i.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId)||"N/A"," "),S.Db(2),S.rc("nzTitle",p),S.Db(1),S.rc("ngIf",null!=(null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.availableHours)&&null!=(null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.availableHours))("ngIfElse",f),S.Db(2),S.rc("ngIf",!(null==i.lead||null==i.lead.patientInfo||null==i.lead.patientInfo.healthInfo||null==i.lead.patientInfo.healthInfo.dxCodes||!i.lead.patientInfo.healthInfo.dxCodes.length)),S.Db(2),S.rc("nzGutter",10),S.Db(5),S.Yc(S.kc(97,104,"COMMON.NOTES")),S.Db(5),S.Zc(" ",S.kc(102,106,"LEADS.ADDNOTE"),""),S.Db(2),S.rc("ngForOf",i.notes),S.Db(1),S.Sc("height",i.height)("min-height",i.height),S.Db(1),S.rc("ngIf","NOT_ELIGIBLE"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)&&!(null==i.workLists||!i.workLists.totalElements)),S.Db(9),S.Zc("",S.kc(115,108,"LEADS.TOTALFOLLOWUPS"),":"),S.Db(2),S.Zc(" ",null==i.followUps?null:i.followUps.length," "),S.Db(2),S.rc("nzTooltipTitle",i.pendingFollowUpPresent?"Complete pending follow-ups to create new follow-up":S.kc(119,110,"LEADS.ADDFOLLOWUP")),S.Db(2),S.rc("ngIf","ACTIVE"==(null==i.lead||null==i.lead.leadStatusInfo?null:i.lead.leadStatusInfo.overAllStatus)),S.Db(2),S.rc("followUps",i.followUps)("phoneNumbers",null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.phoneNumbers)("leadId",null==i.lead?null:i.lead.leadId),S.Db(1),S.Sc("height",i.wizardHeight)("min-height",i.wizardHeight),S.rc("hidden",!i.showEnrolmentChecklist)("nzGutter",S.xc(112,Ha))("ngStyle",S.yc(113,$a,i.headerLeft)),S.Db(4),S.rc("ngIf",!i.hideFooter),S.Db(3),S.rc("patientId",i.leadId),S.Db(3),S.rc("patientId",i.leadId)}}function Qa(e,n){1&e&&(S.Xb(0,"strong"),S.Xc(1," N/A "),S.Wb())}function Ja(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1),S.jc(2,"translate"),S.Wb()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"TABLEHEADER.GENDER")," "))}function eo(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Primary Contact Number "),S.Wb())}function no(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Secondary Contact Number "),S.Wb())}function to(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Primary Insurance Name "),S.Wb())}function io(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Primary Insurance Member Id "),S.Wb())}function ao(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Secondary Insurance Name "),S.Wb())}function oo(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Secondary Insurance Member Id "),S.Wb())}function lo(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Address "),S.Wb())}function ro(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Patient Available on "),S.Wb())}function co(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Physician "),S.Wb())}function so(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Site "),S.Wb())}function uo(e,n){1&e&&(S.Xb(0,"span",39),S.Xc(1," Diagnosis Codes "),S.Wb())}function bo(e,n){1&e&&(S.Xb(0,"strong",110),S.Xc(1," - "),S.Wb())}var po,fo,ho=((po=function(e){o(t,e);var n=r(t);function t(e,i,a,o,l,r,c,s,u,b,p,f,h){var g;return d(this,t),(g=n.call(this)).router=e,g._location=i,g._leadsService=a,g._modalService=o,g._activatedRoute=l,g._genesysService=r,g._leadsEventLogger=c,g.translationService=s,g._staffWorklistService=u,g._dataSharingService=b,g.followUpModalService=p,g._notificationsService=f,g._componentFactoryResolver=h,g.languages=[],g.loadingNotes=!1,g.loadingFollowups=!1,g.hideFooter=!1,g.pendingFollowUpPresent=!0,g.preferredName="",g.selectedTabIndex=0,g.actionTitle="Start Enrollment Wizard",g.checkPendingFollowUps=function(){return null!=g.followUps&&g.followUps.findIndex(function(e){return e.status==Ae.b.PENDING})>-1},g.issueReasonMap=new Map([[wi.a.DOB_ISSUE,"Age is less than 18 years"],[wi.a.DX_CODE_ISSUE,"Two chronic codes are not available"],[wi.a.INSURANCE_ISSUE,"Compatible insurance information is not available"],[wi.a.LANGUAGE_ISSUE,"Language is not supported"],[wi.a.NO_PHYSICIAN_ISSUE,"Physician profile is not assigned"],[wi.a.NO_PARTICIPATING_PHYSICIAN_ISSUE,"Assigned physician does not participate in the program"],[wi.a.NO_VISIT_ENCOUNTER_ISSUE,"No visits or encounters within the last 12 months"],[wi.a.INSURANCE_TIER_ISSUE,"Insurance tier changed"]]),g}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.height=window.innerHeight-244+"px",this.timelineHeight=window.innerHeight-244-124+"px",this.initTranslation(),this._activatedRoute.params.forEach(function(n){e.checkLeadIdAndRedirectToken(n.id)}),this.getLead(this.leadId),this.$callTriggerSubscription=this._dataSharingService.getVoiceCallInitiated().subscribe(function(n){n&&e.startEnrolmentWizard(n.toNumber)}),this._dataSharingService.tenantSettings.subscribe(function(n){return e.tenantConfig=n})}},{key:"checkLeadIdAndRedirectToken",value:function(e){if(e.length>24){var n=this.parseJwt(e);localStorage.getItem("loggedInTenant")==n.tenantId?(this.leadId=n.leadId,this.isReferredFromGenesys=!0,this.referrer="GENESYS"):(this._notificationsService.warning("User","Please check if you have logged into the correct tenant."),this.router.navigate(["/authorization/logout"],{queryParams:{returnUrl:"/leads/details/"+e,referrer:"GENESYS"}}))}else this.leadId=e}},{key:"parseJwt",value:function(e){var n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(window.atob(n).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)}},{key:"ngOnDestroy",value:function(){this.$callTriggerSubscription.unsubscribe()}},{key:"showHIPPAConsentPopUp",value:function(){var e=this;this._modalService.create({nzTitle:"Please confirm if the below lead information is correct, before beginning the enrollment process.",nzContent:Wi,nzOkText:"I Confirm",nzOkType:"primary",nzOnOk:function(){return e.startEnrolmentWizard()},nzCancelText:"Cancel",nzComponentParams:{lead:this.lead},nzClosable:!1,nzMaskClosable:!1,nzWidth:500,nzOnCancel:function(){return e.close()},nzBodyStyle:{paddingTop:"0px"}})}},{key:"markAsLost",value:function(){var e=this;this._modalService.create({nzTitle:"Choose the program for which the lead to be marked as Lost.",nzContent:ji,nzComponentParams:{lead:this.lead,programEligibility:this.programEligibility},nzBodyStyle:{paddingTop:"0px"},nzClosable:!0,nzMaskClosable:!0,nzWidth:500,nzOkText:null,nzFooter:null}).afterClose.subscribe(function(){e.getLead(e.leadId)})}},{key:"updateContact",value:function(){this._genesysService.updateLeadContact(this.leadId).subscribe(function(e){})}},{key:"initTranslation",value:function(){var e,n=this,t=new Array("MENU.LEADS","LEADS.DELETE_LEAD_TITLE","LEADS.DELETE_LEAD_DESC","COMMON.SOMETHING_WENT_WRONG");(e=this.translationService).getMultiple.apply(e,t).subscribe(function(e){return n.translatedStrings=e})}},{key:"getLead",value:function(e){this.getSpecificLead(e),this.getWorklistItems()}},{key:"getSpecificLead",value:function(e){var n=this;this._leadsService.getSpecificLeadForUser(e).subscribe(function(e){var t,i,a,o,l;n.lead=e,localStorage.setItem(Ai.a.REQUEST_TENANT_TEMP_IDS,n.lead.tenantId),n.lead.patientInfo.preferredName&&null!=n.lead.patientInfo.preferredName&&(n.preferredName="(".concat(n.lead.patientInfo.preferredName,")")),n.avatarName=n.lead.patientInfo.firstName.charAt(0)+n.lead.patientInfo.lastName.charAt(0),n.followUps=null!=n.lead.followUps&&null!=n.lead.followUps?n.lead.followUps.reverse():[],n.pendingFollowUpPresent=n.checkPendingFollowUps(),n.getNotesForLead(),"GENESYS"==n.referrer&&(n.isReferredFromGenesys=!0,n.referrer=null,n.showHIPPAConsentPopUp()),"NOT_ELIGIBLE"==(null===(i=null===(t=n.lead)||void 0===t?void 0:t.leadStatusInfo)||void 0===i?void 0:i.overAllStatus)&&"MANUAL"==(null===(a=n.lead.leadStatusInfo.statusHistory[n.lead.leadStatusInfo.statusHistory.length-1])||void 0===a?void 0:a.changeType)&&(n.message=null===(o=n.lead.leadStatusInfo.statusHistory[n.lead.leadStatusInfo.statusHistory.length-1])||void 0===o?void 0:o.comments,n.notEligibleDate=n.getDischargeDate(null===(l=n.lead.leadStatusInfo.statusHistory[n.lead.leadStatusInfo.statusHistory.length-1])||void 0===l?void 0:l.dateTime)),console.log("Lead : ",e.leadStatusInfo.programEligibility),n.programEligibility=e.leadStatusInfo.programEligibility})}},{key:"getDischargeDate",value:function(e){var n,t,i,a=(e instanceof Date?e:new Date(e+"Z")).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",timeZone:this.tenantConfig.timeZone,timeZoneName:"short"});return"".concat(null===(n=a.split(","))||void 0===n?void 0:n[0]," (").concat(null===(i=null===(t=a.split(","))||void 0===t?void 0:t[1])||void 0===i?void 0:i.trim(),")")}},{key:"getNotesForLead",value:function(){var e=this;this.loadingNotes=!0,this._leadsService.getAllNotesForLead(this.lead.leadId).subscribe(function(n){e.notes=n,e.loadingNotes=!1})}},{key:"addNewNote",value:function(){var e=this;this._modalService.create({nzContent:re,nzComponentParams:{leadId:this.lead.leadId,tenantId:this.lead.tenantId},nzStyle:{width:"800px"},nzClosable:!0,nzFooter:null}).afterClose.pipe(Object(ce.a)(this.unsubscribed)).subscribe(function(n){n&&e.getNotesForLead()})}},{key:"addFollowUp",value:function(){var e=this;this.gotoCreateFollowUp(Ae.c.AUDIO_CALL).afterClose.subscribe(function(n){e.getLead(e.leadId,!1)})}},{key:"gotoCreateFollowUp",value:function(e){return this._leadsEventLogger.leadsActionEvent(this.lead.leadId,"create_followUp"),this.followUpModalService.initEnrolment(null,!1,!e&&null!=this.followUps&&this.followUps.length>1?Ae.c.AUDIO_CALL:e,this.lead,!0)}},{key:"initStartEnrolmentWizardComponent",value:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._componentFactoryResolver.resolveComponentFactory(pi);null===(n=this.viewContainerRef)||void 0===n||n.clear(),this.enrolmentWizardComponentRef=this.viewContainerRef.createComponent(i),this.enrolmentWizardComponentRef.instance.lead=this.lead,this.enrolmentWizardComponentRef.instance.wizardHeight=e,this.enrolmentWizardComponentRef.instance.toNumber=t,this.enrolmentWizardComponentRef.instance.previewList=!1,this.enrolmentWizardComponentRef.instance.isReferredFromGenesys=this.isReferredFromGenesys}},{key:"startEnrolmentWizard",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.selectedTabIndex=0,null!=this.followUps&&0!=this.followUps.length&&this.followUps.findIndex(function(e){return e.type==Ae.c.AUDIO_CALL&&e.status==Ae.b.PENDING})>-1?(this.getLead(this.leadId,!1),this.showEnrolmentWizard(n)):this.gotoCreateFollowUp(Ae.c.AUDIO_CALL).afterClose.subscribe(function(t){e.getLead(e.leadId,!1),t&&e.showEnrolmentWizard(n)})}},{key:"showEnrolmentWizard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.showEnrolmentChecklist=!this.showEnrolmentChecklist,this.hideFooter=this.showEnrolmentChecklist,this.showEnrolmentChecklist){this.actionTitle="Close Enrollment Wizard";var n=.4*window.innerHeight+75;this.wizardHeight=n+"px !important",this.height=window.innerHeight-150-n-20+"px !important",this.outerContainerOverflow="scroll",this._routeHelperService.setSidebarCollapsed(this.showEnrolmentChecklist),this.initStartEnrolmentWizardComponent(n,e)}else this._routeHelperService.setSidebarCollapsed(this.showEnrolmentChecklist),this.height=window.innerHeight-240+"px",this.outerContainerOverflow="hidden",this.actionTitle="Start Enrollment Wizard",this.viewContainerRef.clear()}},{key:"editLead",value:function(){var e=this;this._modalService.create({nzContent:Me,nzComponentParams:{lead:this.lead},nzStyle:{width:"800px"},nzClosable:!0,nzFooter:null}).afterClose.pipe(Object(ce.a)(this.unsubscribed)).subscribe(function(n){n&&e.getLead(e.leadId)})}},{key:"deleteLead",value:function(){var e=this;this._modalService.create({nzTitle:this.translatedStrings.get("LEADS.DELETE_LEAD_TITLE"),nzContent:this.translatedStrings.get("LEADS.DELETE_LEAD_DESC"),nzClosable:!0,nzOnCancel:function(){},nzOnOk:function(){e._leadsService.deleteSpecificLead(e.leadId).subscribe(function(n){e._leadsEventLogger.leadsActionEvent(e.leadId,"delete"),200===n.status?e.goBack():e._notificationsService.error(e.translatedStrings.get("MENU.LEADS"),e.translatedStrings.get("COMMON.SOMETHING_WENT_WRONG"))})}})}},{key:"getWorklistItems",value:function(){var e=this;this._staffWorklistService.fetchWorklistItemsForUser(this.leadId,0,9999999,wi.c.ACTIVE,wi.b.LEAD_QUALIFICATION_ISSUE,void 0).subscribe(function(n){e.workLists=n})}},{key:"resolve",value:function(e){var n,t,i=this;this.workLists.content=null===(t=null===(n=this.workLists)||void 0===n?void 0:n.content)||void 0===t?void 0:t.filter(function(n){return(null==n?void 0:n.id)!==(null==e?void 0:e.id)}),this.workLists.totalElements-=1,this._staffWorklistService.markAsResolved(null==e?void 0:e.id).subscribe(function(){i._notificationsService.success("Work List","Item marked as resolved successfully!")})}},{key:"getAddedBy",value:function(e){return null!=e&&e.trim().length>0?e:"N/A"}},{key:"goBack",value:function(){this.isReferredFromGenesys?this.close():this._location.back()}},{key:"close",value:function(){window.close()}},{key:"showPreview",value:function(){this._modalService.create({nzContent:xi,nzComponentParams:{lead:this.lead},nzFooter:null,nzClosable:!0,nzMaskClosable:!0,nzWidth:900,nzTitle:"Enrollment Checklist History",nzBodyStyle:{paddingTop:"0px"}})}}]),t}(f.a)).\u0275fac=function(e){return new(e||po)(S.Rb(b.g),S.Rb(s.l),S.Rb(g.a),S.Rb(N.f),S.Rb(b.a),S.Rb(Ti.a),S.Rb(y.a),S.Rb(z.a),S.Rb(Ei.a),S.Rb(be.a),S.Rb(Cn),S.Rb(I.b),S.Rb(S.j))},po.\u0275cmp=S.Lb({type:po,selectors:[["app-details"]],viewQuery:function(e,n){var t;1&e&&S.ed(Xa,1,S.R),2&e&&S.Hc(t=S.fc())&&(n.viewContainerRef=t.first)},features:[S.Ab],decls:29,vars:1,consts:[["class","details-container",4,"ngIf"],["emptyContact",""],["gender",""],["primaryContact",""],["secondaryContact",""],["primaryInsuranceName",""],["primaryInsuranceMemberId",""],["secondaryInsuranceName",""],["secondaryInsuranceMemberId",""],["address1n2",""],["patientAvailability",""],["pcp",""],["site",""],["diagnosis",""],["na",""],[1,"details-container"],["secondaryActionTitle","Update Lead",3,"title","defaultTitle","isSearchEnabled","actionTitle","isSecondaryActionEnabled","isActionEnabled","action","secondaryAction"],[3,"nzSelectedIndex","nzSelectedIndexChange"],["nzTitle","Details"],[1,"outer-container"],["nz-row","",1,"container"],["nz-col","","nzSpan","24"],["nzType","error",3,"nzMessage",4,"ngIf"],["nz-row","",1,"container",3,"nzGutter"],["nz-row","","style","margin-bottom: 20px;",3,"nzGutter",4,"ngIf"],["nz-row","",1,"note-container",3,"nzGutter"],["nz-col","","nzSpan","17"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],[2,"width","100%","height","100%"],[2,"text-align","center","display","flex","flex-direction","column"],[1,"avatar-container"],[1,"avatar-name"],[2,"text-align","center"],["nz-typography","","nzType","primary"],[2,"margin","10px"],["isToolTipEnabled","true",3,"leadStatus"],[2,"text-align","center","margin","10px"],["nzColor","var(--primary-color)"],["nz-typography","","nzType","secondary"],["nz-typography","","nz-type","secondary",2,"margin-bottom","10px","margin-top","10px"],[2,"display","flex","flex-direction","row"],[2,"display","flex","flex-direction","column","width","48%"],["nz-typography","","nzType","primary","nzCopyable","",3,"nzCopyText"],["nzType","vertical",2,"height","50px"],["nz-typography","","nzType","primary",3,"nzTitle",4,"ngIf"],["nz-col","","nzSpan","16"],["nzLayout","vertical"],[3,"nzTitle"],[4,"ngIf","ngIfElse"],[3,"nzTitle",4,"ngIf"],["nz-typography","","nzCopyable","",3,"nzCopyText"],["nz-typography","",4,"ngIf","ngIfElse"],["nz-row","",1,"notes-container"],["nz-col","","nzFlex","1"],["nz-col","","nzFlex","100px"],["nz-row","","nzJustify","end"],["nz-button","","nzType","primary",1,"converter","note-adder",3,"click"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","7"],["class","followup-container qualification-container",4,"ngIf"],[1,"followup-container"],["nz-row","","nzJustify","space-between",2,"padding-left","15px"],["nz-col",""],[1,"follow-up-heading"],["nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","circle",3,"disabled","click",4,"ngIf"],[1,"follow-up-body"],[3,"followUps","phoneNumbers","leadId"],["nz-row","",1,"other-action","checklist",3,"hidden","nzGutter","ngStyle"],["nz-col","","nzFlex","1",2,"padding-bottom","0px !important","padding-right","0px !important","padding-top","0px  !important"],["enrolmentWizard",""],["style","padding:10px 20px !important; border: 1px solid #E8E8E8;  font-size: 12px;","class","container other-action",4,"ngIf"],["nzTitle","Visits"],[1,"container"],[3,"patientId"],["nzTitle","Encounters"],["nzType","error",3,"nzMessage"],["nz-row","",2,"margin-bottom","20px",3,"nzGutter"],["nzSize","small",1,"not-eligible-reason-card"],["nz-typography","","nzType","primary",3,"nzTitle"],["nz-typography",""],[2,"margin-right","5px"],[2,"display","block","margin-bottom","4px"],["nz-typography","",3,"innerHTML"],["class","notes-divider",4,"ngIf"],[1,"notes-divider"],[1,"followup-container","qualification-container"],["nz-list","",3,"nzDataSource"],["nz-list-item","",4,"ngFor","ngForOf"],["nz-list-item",""],["nz-list-item-actions",""],[3,"click",4,"isFeaturePermitted"],["nz-typography","","nzType","danger"],[3,"click"],["nz-button","","nzType","primary","nzShape","circle",3,"disabled","click"],["nz-icon","","nzType","plus",2,"font-size","20px"],[1,"container","other-action",2,"padding","10px 20px !important","border","1px solid #E8E8E8","font-size","12px"],[2,"padding","8px 8px 0 8px","margin-bottom","15px"],["class","action-item","nz-col","","nzXs","24","nzSm","12","nzMd","6",3,"click",4,"ngIf"],[4,"isFeaturePermitted"],[4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","6",1,"action-item",3,"click"],[1,"profile-icon"],["name","profileDelete","size","32px",3,"originalStyle"],["nzTypography","","nzType","danger"],["name","arrowRight"],["name","profileEdit","size","32px",3,"originalStyle"],["nz-icon","","nzType","eye","nzTheme","outline",2,"font-size","32px"],["nzTypography","","nzType","primary"],["nz-typography","",2,"text-align","center"]],template:function(e,n){1&e&&(S.Vc(0,Ka,134,115,"div",0),S.Vc(1,Qa,2,0,"ng-template",null,1,S.Wc),S.Vc(3,Ja,3,3,"ng-template",null,2,S.Wc),S.Vc(5,eo,2,0,"ng-template",null,3,S.Wc),S.Vc(7,no,2,0,"ng-template",null,4,S.Wc),S.Vc(9,to,2,0,"ng-template",null,5,S.Wc),S.Vc(11,io,2,0,"ng-template",null,6,S.Wc),S.Vc(13,ao,2,0,"ng-template",null,7,S.Wc),S.Vc(15,oo,2,0,"ng-template",null,8,S.Wc),S.Vc(17,lo,2,0,"ng-template",null,9,S.Wc),S.Vc(19,ro,2,0,"ng-template",null,10,S.Wc),S.Vc(21,co,2,0,"ng-template",null,11,S.Wc),S.Vc(23,so,2,0,"ng-template",null,12,S.Wc),S.Vc(25,uo,2,0,"ng-template",null,13,S.Wc),S.Vc(27,bo,2,0,"ng-template",null,14,S.Wc)),2&e&&S.rc("ngIf",n.lead)},directives:[s.q,D.a,qi.d,qi.a,k.c,k.a,qe.a,x.a,fi.a,He.a,hi.a,Gi.a,Gi.b,P.a,R.a,U.a,s.p,F.d,Ca,s.r,za.a,ya.a,Sa.a,Ge.a,Ge.e,Ge.d,Ge.c,Ia.a,V.a,Fe.a],pipes:[E.a,gi.a,s.e,s.A,Mn.a],styles:["body[_ngcontent-%COMP%]{font-family:Nunito!important}.outer-container[_ngcontent-%COMP%]{min-height:calc(100vh - 240px);overflow:scroll}.note-container[_ngcontent-%COMP%]{margin-bottom:70px}.details-container[_ngcontent-%COMP%]{font-family:Nunito!important;overflow:scroll}.body-container[_ngcontent-%COMP%]{margin:8px}.lead-details-row[_ngcontent-%COMP%]{margin-top:24px!important}.followup-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;height:100%;padding:16px!important}.qualification-container[_ngcontent-%COMP%]{min-height:-webkit-fit-content!important;min-height:-moz-fit-content!important;min-height:fit-content!important;margin-bottom:10px}.leads-container[_ngcontent-%COMP%]{padding:16px 0!important}.notes-container[_ngcontent-%COMP%]{margin-bottom:24px}.notes-divider[_ngcontent-%COMP%]{margin:12px 0!important}.other-action[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:0!important;padding:16px 0 0 16px!important;position:absolute;width:100%;bottom:0}.profile-icon[_ngcontent-%COMP%]{padding:8px;background-color:#e9e9e9;border-radius:50%;height:50px;width:50px;text-align:center;display:inline-block}.action-item[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.action-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{line-height:40px}.action-item[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%], .action-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{vertical-align:text-bottom;display:inline-block;height:70%}.action-item[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{line-height:50px}.profile-icon[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:unset}.grid-container[_ngcontent-%COMP%]{display:flex;width:100%}.grid-item[_ngcontent-%COMP%]{text-align:center;margin:32px;width:50%;border:1px solid #ededed;padding:25px;font-family:Nunito!important;height:100%;overflow:scroll}.margin-right-0[_ngcontent-%COMP%]{margin-right:0}@media screen and (max-width:480px){.grid-container[_ngcontent-%COMP%]{display:block;width:100%}.grid-item[_ngcontent-%COMP%]{text-align:center;margin:2% auto;width:80%;border:1px solid #ededed;padding:25px}.details[_ngcontent-%COMP%], .grid-item[_ngcontent-%COMP%]{font-family:Nunito!important}.details[_ngcontent-%COMP%]{float:none!important}}.lead-profile[_ngcontent-%COMP%]{margin:auto auto 5%;border-radius:50%;text-transform:uppercase}.lead[_ngcontent-%COMP%]{color:#f56a00;background-color:#fde3cf;height:50px;width:50px;line-height:4}.lead-managers[_ngcontent-%COMP%]{width:85%;margin:auto;padding-left:3%}.details[_ngcontent-%COMP%]{text-align:left;font-weight:400;color:#7e87a0;font-family:Nunito!important}.detail-holder[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #ededed;margin-top:3%;margin-bottom:3%}.detail-label[_ngcontent-%COMP%]{width:25%}.detail[_ngcontent-%COMP%], .detail-label[_ngcontent-%COMP%]{padding-bottom:10px;font-size:13px;font-family:Nunito!important}.detail[_ngcontent-%COMP%]{color:#000;width:70%;padding-left:5px}.notes[_ngcontent-%COMP%]{word-spacing:3px;text-align:left;font-family:Nunito!important}.note-adder[_ngcontent-%COMP%]{margin-left:20px}.follow-up-body[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.follow-up-header[_ngcontent-%COMP%]{width:100%;text-align:left;padding:5px 5px 15px;font-family:Nunito!important}.follow-up-body[_ngcontent-%COMP%]{padding-top:15px;overflow-y:scroll;overflow-x:hidden;height:86%}.habit-tag[_ngcontent-%COMP%]{padding:5px;margin-bottom:6px}i[_ngcontent-%COMP%]{color:var(--neutral-color)}.follow-up[_ngcontent-%COMP%]{margin-top:15px;margin-right:15px}.task-li[_ngcontent-%COMP%]{list-style-type:disc}li[_ngcontent-%COMP%]{color:#8bc34a}.follow-up-heading[_ngcontent-%COMP%]{text-align:left;font:normal normal 700 20px/27px Nunito;letter-spacing:0;color:var(--primary-color);opacity:1}.header-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.note-container[_ngcontent-%COMP%]{border:none;padding:0}.grid-item-left[_ngcontent-%COMP%]{width:65%}.grid-item-right[_ngcontent-%COMP%]{width:35%}.extra[_ngcontent-%COMP%]{padding:0!important}.checklist[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:999;right:36px;left:0;width:auto!important}.avatar-container[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:50%;background:#eff1f7;text-align:center;display:flex;align-self:center;flex-direction:column;margin-bottom:10px}.avatar-name[_ngcontent-%COMP%]{height:revert;width:100%;display:flex;align-items:center;flex-flow:column;position:inherit;padding:28%;font-size:25px}[_nghost-%COMP%]     .ant-descriptions-item-label:after{content:none;margin:0}[_nghost-%COMP%]     .ant-descriptions-item-label{font-size:.9em}[_nghost-%COMP%]     .ant-modal-confirm-content{margin-left:0!important}.top[_ngcontent-%COMP%]{position:absolute;top:0;left:49%}.not-eligible-reason-card[_ngcontent-%COMP%]{background-color:#78909c;color:var(--neutral-color);font-weight:700;border-radius:5px}[_nghost-%COMP%]     .ant-alert-error{background-color:#78909c;border:1px solid #78909c}[_nghost-%COMP%]     .ant-alert-message{color:#fff;font-weight:700}"]}),po),go=l("0W7X"),mo=l("bA1+"),vo={Listing:{header:!0,title:"TITLE.LEADS",searchEnabled:!0,primaryAction:{title:"Bulk Upload",permissions:[go.a.VIEW_LEAD,go.a.ADD_LEAD],enabled:!0},secondaryAction:{title:"Run Qualification",permissions:[go.a.VIEW_LEAD],enabled:!0},multiAction:{},privileges:[go.a.VIEW_LEAD],showTenantToggle:!0,subTenantToggleMode:"SINGLE"},FollowUp:{header:!0,title:"COMMON.FOLLOWUPS",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[go.a.VIEW_LEAD_FOLLOW_UPS],showTenantToggle:!0},BulkUpload:{header:!0,title:"Bulk Upload",searchEnabled:!1,primaryAction:{title:"Upload",permissions:[],enabled:!0},secondaryAction:{title:"Download Template",permissions:[],enabled:!0},multiAction:{},privileges:[go.a.ADD_LEAD],showTenantToggle:!1}},Co=l("Ifg2"),zo=((fo=function(){function e(){d(this,e),this.headersMap=new Map([["First Name","firstName"],["Last Name","lastName"],["DOB (yyyy-MM-dd)","dateOfBirth"],["Gender","gender"],["Email (optional)","email"],["Address Line 1 (optional)","addressLine1"],["City (optional)","city"],["State","state"],["Country","country"],["Pin Code","pinCode"],["MR# / Patient ID (optional)","patientId"],["Primary Insurance","primaryInsurance"],["Primary Insurance ID","primaryInsuranceId"],["Secondary Insurance (optional)","secondaryInsurance"],["Secondary Insurance ID (optional)","secondaryInsuranceId"],["Diagnosis Codes (Delimiter /)","icdCodes"],["Primary Label","primaryContactLabel"],["Primary Contact Number*","primaryContactNumber"],["Primary Type","primaryContactType"],["Secondary Label","secondaryLabel"],["Secondary Contact Number","secondaryContactNumber"],["Secondary Type","secondaryContactType"],["Last PCP Visit Date","lastPCPVisitDateTime"],["Language","language"]])}return a(e,[{key:"validateHeaders",value:function(e){var n=this;return e.forEach(function(e,t){Object.keys(e).forEach(function(t){Object.defineProperty(e,n.headersMap.get(t),Object.getOwnPropertyDescriptor(e,t)),delete e[t]}),e.rowId=t}),e}}]),e}()).\u0275fac=function(e){return new(e||fo)},fo.\u0275prov=S.Nb({token:fo,factory:fo.\u0275fac}),fo),yo=l("pLZG"),So=l("MZxW"),Io=l("D9mS"),Xo=l("rMZv"),Do=l("KupA");function ko(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"nz-option",12),S.Ub()),2&e){var t=n.$implicit;S.Db(1),S.rc("nzValue",null==t||null==t.user?null:t.user.id)("nzLabel",null==t||null==t.user?null:t.user.fullName)}}function Wo(e,n){if(1&e){var t=S.Yb();S.Xb(0,"nz-card"),S.Xb(1,"div",2),S.Xb(2,"div",3),S.Xb(3,"sub-tenant-select",4),S.ec("onSubTenantSelected",function(e){return S.Lc(t),S.ic().onSubTenantChange(e)}),S.Wb(),S.Wb(),S.Wb(),S.Xb(4,"nz-spin",5),S.Xb(5,"h3"),S.Xc(6," You can upload lead profiles in bulk by using the bulk upload sheet provided below: "),S.Wb(),S.Xb(7,"h4"),S.Xc(8," Once you choose any one physician from the below list, all leads in the bulk upload sheet will be assigned to the selected physician "),S.Wb(),S.Xb(9,"div",6),S.Xb(10,"div",7),S.Xb(11,"strong"),S.Xc(12,"Physician"),S.Wb(),S.Xb(13,"nz-select",8),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().physician=e}),S.Vc(14,ko,2,2,"ng-container",9),S.Wb(),S.Wb(),S.Wb(),S.Sb(15,"br"),S.Xb(16,"nz-upload",10),S.Xb(17,"button",11),S.Xc(18," BROWSE / DRAG "),S.Wb(),S.Xb(19,"p"),S.Sb(20,"br"),S.Xc(21),S.jc(22,"translate"),S.Wb(),S.Wb(),S.Sb(23,"br"),S.Wb(),S.Wb()}if(2&e){var i=S.ic();S.Db(3),S.rc("persist",!1),S.Db(1),S.rc("nzSpinning",!(null!=i.physicians&&i.physicians.length)),S.Db(9),S.rc("ngModel",i.physician),S.Db(1),S.rc("ngForOf",i.physicians),S.Db(2),S.rc("nzCustomRequest",i.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1),S.Db(5),S.Zc(" ",S.kc(22,8,"COMMON.DRAG_AND_UPLOAD")," ")}}function To(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"td",22),S.ec("nzExpandChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).onExpandChange(n.rowId,e)}),S.Wb(),S.Xb(2,"td",23),S.Xc(3),S.Wb(),S.Xb(4,"td",23),S.Xc(5),S.Wb(),S.Xb(6,"td",23),S.Xc(7),S.jc(8,"date"),S.Wb(),S.Xb(9,"td",23),S.Xc(10),S.Wb(),S.Xb(11,"td",23),S.Xc(12),S.Wb(),S.Xb(13,"td",23),S.Xc(14),S.Wb(),S.Xb(15,"td",23),S.Xc(16),S.Wb(),S.Xb(17,"td",23),S.Xc(18),S.Wb(),S.Xb(19,"td",23),S.Xc(20),S.Wb(),S.Xb(21,"td",23),S.Xc(22),S.Wb(),S.Xb(23,"td",23),S.Xc(24),S.Wb(),S.Xb(25,"td",23),S.Xc(26),S.Wb(),S.Xb(27,"td",23),S.Xc(28),S.Wb(),S.Xb(29,"td",23),S.Xc(30),S.Wb(),S.Xb(31,"td",23),S.Xc(32),S.Wb(),S.Xb(33,"td",23),S.Xc(34),S.Wb(),S.Xb(35,"td",23),S.Xc(36),S.Wb(),S.Xb(37,"td",23),S.Xc(38),S.Wb(),S.Xb(39,"td",23),S.Xc(40),S.Wb(),S.Xb(41,"td",23),S.Xc(42),S.Wb(),S.Xb(43,"td",23),S.Xc(44),S.Wb(),S.Xb(45,"td",23),S.Xc(46),S.Wb(),S.Xb(47,"td",23),S.jc(48,"date"),S.Xc(49),S.jc(50,"date"),S.Wb(),S.Xb(51,"td",23),S.Xc(52),S.Wb(),S.Xb(53,"td",16),S.Xb(54,"a",24),S.ec("click",function(){S.Lc(t);var e=S.ic().$implicit;return S.ic(2).startEdit(e.rowId)}),S.Sb(55,"app-icons",25),S.Wb(),S.Xc(56," \xa0\xa0 "),S.Xb(57,"a",26),S.ec("nzOnConfirm",function(){S.Lc(t);var e=S.ic().$implicit;return S.ic(2).deleteRow(e.rowId)}),S.Sb(58,"app-icons",27),S.Wb(),S.Wb(),S.Ub()}if(2&e){var i=S.ic().$implicit,a=S.ic(2);S.Db(1),S.rc("nzShowExpand",a.errors.hasOwnProperty(null==i?null:i.rowId))("nzExpand",a.expandSet.has(i.rowId)),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.firstName),S.Db(1),S.Zc(" ",null==i?null:i.firstName," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.lastName),S.Db(1),S.Zc(" ",null==i?null:i.lastName," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.dateOfBirth),S.Db(1),S.Zc(" ",S.lc(8,50,null==i?null:i.dateOfBirth,"mediumDate")," "),S.Db(2),S.rc("nzTooltipTitle",null==i?null:i.gender),S.Db(1),S.Zc(" ",null==i?null:i.gender," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.email),S.Db(1),S.Zc(" ",null==i?null:i.email," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.addressLine1),S.Db(1),S.Zc(" ",null==i?null:i.addressLine1," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.city),S.Db(1),S.Zc(" ",null==i?null:i.city," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.state),S.Db(1),S.Zc(" ",null==i?null:i.state," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.country),S.Db(1),S.Zc(" ",null==i?null:i.country," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.pinCode),S.Db(1),S.Zc(" ",null==i?null:i.pinCode," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.patientId),S.Db(1),S.Zc(" ",null==i?null:i.patientId," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.primaryInsurance),S.Db(1),S.Zc(" ",null==i?null:i.primaryInsurance," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.primaryInsuranceId),S.Db(1),S.Zc(" ",null==i?null:i.primaryInsuranceId," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.secondaryInsurance),S.Db(1),S.Zc(" ",null==i?null:i.secondaryInsurance," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.secondaryInsuranceId),S.Db(1),S.Zc(" ",null==i?null:i.secondaryInsuranceId," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.icdCodes),S.Db(1),S.Zc(" ",null==i?null:i.icdCodes," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.primaryContactLabel),S.Db(1),S.Zc(" ",null==i?null:i.primaryContactLabel," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.primaryContactNumber),S.Db(1),S.Zc(" ",null==i?null:i.primaryContactNumber," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.primaryContactType),S.Db(1),S.Zc(" ",null==i?null:i.primaryContactType," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.secondaryContactLabel),S.Db(1),S.Zc(" ",null==i?null:i.secondaryContactLabel," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.secondaryContactNumber),S.Db(1),S.Zc(" ",null==i?null:i.secondaryContactNumber," "),S.Db(1),S.rc("nzTooltipTitle",null==i?null:i.secondaryContactType),S.Db(1),S.Zc(" ",null==i?null:i.secondaryContactType," "),S.Db(1),S.rc("nzTooltipTitle",S.lc(48,53,null==i?null:i.lastPCPVisitDateTime,"medium")),S.Db(2),S.Zc(" ",S.lc(50,56,null==i?null:i.lastPCPVisitDateTime,"medium")," "),S.Db(2),S.rc("nzTooltipTitle",null==i?null:i.language),S.Db(1),S.Zc(" ",null==i?null:i.language," ")}}function Eo(e,n){if(1&e){var t=S.Yb();S.Xb(0,"td",22),S.ec("nzExpandChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).onExpandChange(n.rowId,e)}),S.Wb(),S.Xb(1,"td"),S.Xb(2,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.firstName=e}),S.Wb(),S.Wb(),S.Xb(3,"td"),S.Xb(4,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.lastName=e}),S.Wb(),S.Wb(),S.Xb(5,"td"),S.Xb(6,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.dateOfBirth=e}),S.Wb(),S.Wb(),S.Xb(7,"td"),S.Xb(8,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.gender=e}),S.Wb(),S.Wb(),S.Xb(9,"td"),S.Xb(10,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.email=e}),S.Wb(),S.Wb(),S.Xb(11,"td"),S.Xb(12,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.addressLine1=e}),S.Wb(),S.Wb(),S.Xb(13,"td"),S.Xb(14,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.city=e}),S.Wb(),S.Wb(),S.Xb(15,"td"),S.Xb(16,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.state=e}),S.Wb(),S.Wb(),S.Xb(17,"td"),S.Xb(18,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.country=e}),S.Wb(),S.Wb(),S.Xb(19,"td"),S.Xb(20,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.pinCode=e}),S.Wb(),S.Wb(),S.Xb(21,"td"),S.Xb(22,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.patientId=e}),S.Wb(),S.Wb(),S.Xb(23,"td"),S.Xb(24,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.primaryInsurance=e}),S.Wb(),S.Wb(),S.Xb(25,"td"),S.Xb(26,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.primaryInsuranceId=e}),S.Wb(),S.Wb(),S.Xb(27,"td"),S.Xb(28,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.secondaryInsurace=e}),S.Wb(),S.Wb(),S.Xb(29,"td"),S.Xb(30,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.secondaryInsuraceId=e}),S.Wb(),S.Wb(),S.Xb(31,"td"),S.Xb(32,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.icdCodes=e}),S.Wb(),S.Wb(),S.Xb(33,"td"),S.Xb(34,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.primaryContactLabel=e}),S.Wb(),S.Wb(),S.Xb(35,"td"),S.Xb(36,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.primaryContactNumber=e}),S.Wb(),S.Wb(),S.Xb(37,"td"),S.Xb(38,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.primaryContactType=e}),S.Wb(),S.Wb(),S.Xb(39,"td"),S.Xb(40,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.secondaryContactLabel=e}),S.Wb(),S.Wb(),S.Xb(41,"td"),S.Xb(42,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.secondaryContactNumber=e}),S.Wb(),S.Wb(),S.Xb(43,"td"),S.Xb(44,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.secondaryContactType=e}),S.Wb(),S.Wb(),S.Xb(45,"td"),S.Xb(46,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.lastPCPVisitDateTime=e}),S.Wb(),S.Wb(),S.Xb(47,"td"),S.Xb(48,"input",28),S.ec("ngModelChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic(2).editCache[n.rowId].element.language=e}),S.Wb(),S.Wb(),S.Xb(49,"td",16),S.Xb(50,"a",29),S.ec("click",function(){S.Lc(t);var e=S.ic().$implicit;return S.ic(2).saveEdit(e.rowId)}),S.Xc(51,"Save"),S.Wb(),S.Wb()}if(2&e){var i=S.ic().$implicit,a=S.ic(2);S.rc("nzShowExpand",a.errors.hasOwnProperty(null==i?null:i.rowId))("nzExpand",a.expandSet.has(i.rowId)),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.firstName),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.lastName),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.dateOfBirth),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.gender),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.email),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.addressLine1),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.city),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.state),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.country),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.pinCode),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.patientId),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.primaryInsurance),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.primaryInsuranceId),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.secondaryInsurace),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.secondaryInsuraceId),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.icdCodes),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.primaryContactLabel),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.primaryContactNumber),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.primaryContactType),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.secondaryContactLabel),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.secondaryContactNumber),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.secondaryContactType),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.lastPCPVisitDateTime),S.Db(2),S.rc("ngModel",a.editCache[i.rowId].element.language)}}function wo(e,n){if(1&e&&(S.Xb(0,"p",30),S.Xc(1),S.Wb()),2&e){var t=n.$implicit;S.Db(1),S.Zc(" ",t," ")}}var Lo=function(e){return{danger:e}};function Mo(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"tr",17),S.Vc(2,To,59,59,"ng-container",18),S.Vc(3,Eo,52,26,"ng-template",null,19,S.Wc),S.Wb(),S.Xb(5,"tr",20),S.Vc(6,wo,2,1,"p",21),S.Wb(),S.Ub()),2&e){var t=n.$implicit,i=S.Ic(4),a=S.ic(2);S.Db(1),S.rc("ngClass",S.yc(5,Lo,a.errors.hasOwnProperty(null==t?null:t.rowId))),S.Db(1),S.rc("ngIf",!a.editCache[t.rowId].edit)("ngIfElse",i),S.Db(3),S.rc("nzExpand",a.expandSet.has(t.rowId)),S.Db(1),S.rc("ngForOf",a.errors[null==t?null:t.rowId])}}var Oo=function(){return{x:"3096px"}};function _o(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"nz-table",13,14),S.Xb(3,"thead"),S.Xb(4,"tr"),S.Sb(5,"th",15),S.Xb(6,"th"),S.Xc(7,"First Name"),S.Wb(),S.Xb(8,"th"),S.Xc(9,"Last Name"),S.Wb(),S.Xb(10,"th"),S.Xc(11,"Date of Birth (yyyy-MM-dd)"),S.Wb(),S.Xb(12,"th"),S.Xc(13,"Gender"),S.Wb(),S.Xb(14,"th"),S.Xc(15,"E-mail"),S.Wb(),S.Xb(16,"th"),S.Xc(17,"Address"),S.Wb(),S.Xb(18,"th"),S.Xc(19,"City"),S.Wb(),S.Xb(20,"th"),S.Xc(21,"State"),S.Wb(),S.Xb(22,"th"),S.Xc(23,"Country"),S.Wb(),S.Xb(24,"th"),S.Xc(25,"Pin Code"),S.Wb(),S.Xb(26,"th"),S.Xc(27,"MR# / Patient Id"),S.Wb(),S.Xb(28,"th"),S.Xc(29,"Primary Insurance"),S.Wb(),S.Xb(30,"th"),S.Xc(31,"Primary Insurance ID"),S.Wb(),S.Xb(32,"th"),S.Xc(33,"Secondary Insurance"),S.Wb(),S.Xb(34,"th"),S.Xc(35,"Secondary Insurance ID"),S.Wb(),S.Xb(36,"th"),S.Xc(37,"Diagnosis Codes"),S.Wb(),S.Xb(38,"th"),S.Xc(39,"Primary Contact Label"),S.Wb(),S.Xb(40,"th"),S.Xc(41,"Primary Contact Number"),S.Wb(),S.Xb(42,"th"),S.Xc(43,"Primary Contact Type"),S.Wb(),S.Xb(44,"th"),S.Xc(45,"Secondary Contact Label"),S.Wb(),S.Xb(46,"th"),S.Xc(47,"Secondary Contact Number"),S.Wb(),S.Xb(48,"th"),S.Xc(49,"Secondary Contact Type"),S.Wb(),S.Xb(50,"th"),S.Xc(51,"Last Visit Date Time"),S.Wb(),S.Xb(52,"th"),S.Xc(53,"Language"),S.Wb(),S.Xb(54,"th",16),S.Xc(55,"Action"),S.Wb(),S.Wb(),S.Wb(),S.Xb(56,"tbody"),S.Vc(57,Mo,7,7,"ng-container",9),S.Wb(),S.Wb(),S.Ub()),2&e){var t=S.Ic(2),i=S.ic();S.Db(1),S.rc("nzData",i.data)("nzScroll",S.xc(4,Oo))("nzPageSize",99999),S.Db(56),S.rc("ngForOf",t.data)}}var No,xo,Ao=((No=function(e){o(t,e);var n=r(t);function t(e,i,a,o,l,r,c){var s;return d(this,t),(s=n.call(this))._xlsxParserService=e,s._leadXlsxValidator=i,s._datePipe=a,s._leadsService=o,s._router=l,s._staffService=r,s._notificationsService=c,s.expandSet=new Set,s.editCache={},s.handleUpload=function(e){var n=new FileReader;n.onload=function(){var e,t=s._xlsxParserService.parse(n);try{s.data=s._leadXlsxValidator.validateHeaders(t[Object.keys(t)[0]]),null===(e=s.data)||void 0===e||e.forEach(function(e){var n;(null===(n=null==e?void 0:e.dateOfBirth)||void 0===n?void 0:n.length)&&(e.dateOfBirth=s._datePipe.transform(null==e?void 0:e.dateOfBirth,"yyyy-MM-dd"))})}catch(i){return void s._notificationsService.error("Bulk Upload","Error while reading file headers!")}s.updateEditCache(),s.bulkUploadVisible=!1},n.readAsBinaryString(e.file)},s.errors=new Map,s}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.bulkUploadVisible=!0,this._routeHelperService.isPrimaryActionTriggered().pipe(Object(yo.a)(function(e){return!!e}),Object(ce.a)(this.unsubscribed)).subscribe(function(){return e.validateAndSave()}),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(yo.a)(function(e){return!!e}),Object(ce.a)(this.unsubscribed)).subscribe(function(){return e.downloadTemplate()}),this.requestTenantId=localStorage.getItem(Ai.a.REQUEST_TENANT_IDS).split(",")[0],this.initialiseStaff()}},{key:"onSubTenantChange",value:function(e){"object"==typeof e&&""!=e&&null!=e&&null!=e&&(this.initialiseStaff(),this.requestTenantId=e)}},{key:"onExpandChange",value:function(e,n){n?this.expandSet.add(e):this.expandSet.delete(e)}},{key:"startEdit",value:function(e){this.editCache[e].edit=!0}},{key:"initialiseStaff",value:function(){var e=this;this._staffService.fetchStaffMembers(En.a.PHYSICIAN,0,-1,void 0).subscribe(function(n){e.physicians=null==n?void 0:n.result})}},{key:"saveEdit",value:function(e){var n=this.data.findIndex(function(n){return n.rowId===e});Object.assign(this.data[n],this.editCache[e].element),this.editCache[e].edit=!1}},{key:"deleteRow",value:function(e){this.data=this.data.filter(function(n){return n.rowId!==e})}},{key:"updateEditCache",value:function(){var e=this;this.data.forEach(function(n){e.editCache[n.rowId]={edit:!1,element:Object.assign({},n)}})}},{key:"validateAndSave",value:function(){var e=this,n={bulkLeadRequest:this.data,tenantId:this.requestTenantId};this._leadsService.validateBulkLeads(n).subscribe(function(t){var i;e.errors=t,Object.keys(e.errors).length||(null===(i=e.data)||void 0===i||i.forEach(function(n){n.physician=e.physician,Object.keys(n).forEach(function(e){var t=n[e];try{n[e]=null==t?void 0:t.trim()}catch(i){console.log(n[e])}})}),n.bulkLeadRequest=e.data,e._leadsService.bulkUploadLeads(n).subscribe(function(){e._notificationsService.success("Bulk Upload","Leads uploaded successfully!"),e._router.navigate(["leads"],{queryParams:{tab:"NEW"}})}))},function(n){var t=n.error;t.ERROR&&e._notificationsService.error("Bulk Upload",t.ERROR[0])})}},{key:"downloadTemplate",value:function(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=leads-bulk-upload-template.xlsx","_blank")}}]),t}(f.a)).\u0275fac=function(e){return new(e||No)(S.Rb(Co.a),S.Rb(zo),S.Rb(s.e),S.Rb(g.a),S.Rb(b.g),S.Rb(kn.a),S.Rb(I.b))},No.\u0275cmp=S.Lb({type:No,selectors:[["app-bulk-upload"]],features:[S.Cb([Co.a,zo,s.e]),S.Ab],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","6","nzOffset","18"],["mode","SINGLE",3,"persist","onSubTenantSelected"],["nzTip","Loading...",3,"nzSpinning"],["nz-row",""],["nz-col","","nzSpan","6"],["nzPlaceHolder","Select a physician",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList"],["nz-button","","nzType","primary","nzSize","large"],[3,"nzValue","nzLabel"],["nzBordered","","nzShowPagination","false",3,"nzData","nzScroll","nzPageSize"],["editRowTable",""],["nzWidth","60px"],["nzRight",""],[3,"ngClass"],[4,"ngIf","ngIfElse"],["editTemplate",""],[3,"nzExpand"],["nz-typography","","nzType","danger",4,"ngFor","ngForOf"],[3,"nzShowExpand","nzExpand","nzExpandChange"],["nzEllipsis","","nz-tooltip","",3,"nzTooltipTitle"],[3,"click"],["strokeWidth","4px","name","edit"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure?",3,"nzOnConfirm"],["name","delete"],["type","text","nz-input","",3,"ngModel","ngModelChange"],[1,"save",3,"click"],["nz-typography","","nzType","danger"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Vc(1,Wo,24,10,"nz-card",1),S.Vc(2,_o,58,5,"ng-container",1),S.Wb()),2&e&&(S.Db(1),S.rc("ngIf",n.bulkUploadVisible),S.Db(1),S.rc("ngIf",!n.bulkUploadVisible))},directives:[s.q,qe.a,k.c,k.a,So.a,Z.a,Ln.d,u.u,u.x,s.p,Io.a,P.a,R.a,U.a,Ln.a,Xo.f,Xo.n,Xo.o,Xo.e,Xo.l,Xo.d,Xo.i,s.o,Xo.p,Xo.g,Xo.j,Xo.c,F.d,Fe.a,Do.a,W.b,u.d,x.a],pipes:[E.a,s.e],styles:["[_nghost-%COMP%]     .ant-table-tbody>tr>td:last-child, [_nghost-%COMP%]     .ant-table-thead>tr>th:last-child{background-color:var(--neutral-color)}.danger[_ngcontent-%COMP%]{outline:thin solid #c81c1c}p[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]     .ant-spin-nested-loading>div>.ant-spin{height:70vh;max-height:98vh}nz-card[_ngcontent-%COMP%]{min-height:80vh}"]}),No),Po=l("jG/O"),Ro=l("4+6U"),Uo=((xo=function(){function e(n,t){var i=this;d(this,e),this._router=n,this._activatedRoute=t,this.queryParams=this._activatedRoute.snapshot.queryParams,this._activatedRoute.queryParams.subscribe(function(e){i.queryParams=e})}return a(e,[{key:"setParameter",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0;this._router.navigate([],{queryParams:e,queryParamsHandling:n?"":"merge",relativeTo:this._activatedRoute,replaceUrl:t})}},{key:"getParameterValue",value:function(e){return this.queryParams[e]}}]),e}()).\u0275fac=function(e){return new(e||xo)(S.bc(b.g),S.bc(b.a))},xo.\u0275prov=S.Nb({token:xo,factory:xo.\u0275fac,providedIn:"root"}),xo),Vo=l("geco"),Fo=function e(){d(this,e),this.d1=null,this.d2=null,this.startTime=null,this.endTime=null,this.status=null,this.tier=-1,this.query=null,this.physicianId=null,this.site=null,this.language=null,this.allSelected=!1,this.limit=20,this.offset=0,this.order="ASC"},Bo=l("t6gT"),jo=l("iCh7"),qo=l("0rTH");function Go(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"br"),S.Xc(2),S.Ub()),2&e){var t=S.ic(3);S.Db(2),S.Zc("",t.statusValue," ")}}function Ho(e,n){if(1&e&&(S.Xb(0,"div",29),S.Xb(1,"strong"),S.Xc(2," Lead Status "),S.Wb(),S.Vc(3,Go,3,1,"ng-container",30),S.Wb()),2&e){var t=S.ic(2);S.Db(3),S.rc("ngIf",t.statusValue)}}function Zo(e,n){if(1&e){var t=S.Yb();S.Xb(0,"nz-tab",4),S.Xb(1,"div",5),S.Xb(2,"label",27),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().allStatusChecked=e})("ngModelChange",function(){return S.Lc(t),S.ic().updateStatusAllChecked()}),S.Xc(3," Check all "),S.Wb(),S.Wb(),S.Sb(4,"br"),S.Xb(5,"nz-checkbox-group",7),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().statusCheckOptions=e})("ngModelChange",function(){return S.Lc(t),S.ic().updateSingleStatusChecked()}),S.Wb(),S.Vc(6,Ho,4,1,"ng-template",null,28,S.Wc),S.Wb()}if(2&e){var i=S.Ic(7),a=S.ic();S.rc("nzTitle",i),S.Db(2),S.rc("ngModel",a.allStatusChecked)("nzIndeterminate",a.statusIndeterminate)("disabled",a.isAllStatusCheckDisabled),S.Db(3),S.rc("ngModel",a.statusCheckOptions)}}function Yo(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"br"),S.Xc(2),S.Ub()),2&e){var t=S.ic(2);S.Db(2),S.Zc("",t.languageValue," ")}}function $o(e,n){if(1&e&&(S.Xb(0,"div",29),S.Xb(1,"strong",31),S.Xc(2," Lead Language "),S.Wb(),S.Vc(3,Yo,3,1,"ng-container",30),S.Wb()),2&e){var t=S.ic();S.Db(3),S.rc("ngIf",t.languageValue)}}function Ko(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"br"),S.Xc(2),S.jc(3,"date"),S.jc(4,"date"),S.Ub()),2&e){var t=S.ic(3);S.Db(2),S.ad("",S.lc(3,2,t.dateRange[0],"mediumDate")," - ",S.lc(4,5,t.dateRange[1],"mediumDate")," ")}}function Qo(e,n){if(1&e&&(S.Xb(0,"strong",31),S.Xc(1," Date Range "),S.Wb(),S.Vc(2,Ko,5,8,"ng-container",30)),2&e){var t=S.ic(2);S.Db(2),S.rc("ngIf",null==t.dateRange?null:t.dateRange.length)}}var Jo=function(){return{"background-color":"#fff"}};function el(e,n){if(1&e){var t=S.Yb();S.Xb(0,"nz-tab",4),S.Xb(1,"nz-range-picker",32),S.ec("ngModelChange",function(e){return S.Lc(t),S.ic().dateRange=e}),S.Wb(),S.Vc(2,Qo,3,1,"ng-template",null,33,S.Wc),S.Wb()}if(2&e){var i=S.Ic(3),a=S.ic();S.rc("nzTitle",i),S.Db(1),S.rc("ngStyle",S.xc(5,Jo))("nzDisabledDate",a.disabledDate)("nzAllowClear",!0)("ngModel",a.dateRange)}}function nl(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"br"),S.Xc(2),S.Ub()),2&e){var t=S.ic(2);S.Db(2),S.Zc("Tier ",t.selectedTier," ")}}function tl(e,n){if(1&e&&(S.Xb(0,"strong",31),S.Xc(1," Insurance Tier "),S.Wb(),S.Vc(2,nl,3,1,"ng-container",30)),2&e){var t=S.ic();S.Db(2),S.rc("ngIf",t.selectedTier)}}function il(e,n){if(1&e&&(S.Xb(0,"label",34),S.Xc(1),S.Wb()),2&e){var t=n.$implicit;S.rc("nzValue",null==t?null:t.id),S.Db(1),S.Zc(" ",null==t?null:t.name," ")}}function al(e,n){if(1&e&&(S.Xc(0),S.jc(1,"translate"),S.Xb(2,"label",35),S.Xc(3),S.Wb()),2&e){var t=S.ic();S.Zc(" ",S.kc(1,2,"SITE")," "),S.Db(3),S.Yc(t.selectedSiteName)}}function ol(e,n){if(1&e&&(S.Vb(0),S.Sb(1,"nz-option",36),S.Ub()),2&e){var t=n.$implicit;S.Db(1),S.rc("nzLabel",t.value)("nzValue",null==t?null:t.key)}}function ll(e,n){1&e&&(S.Xb(0,"nz-option",37),S.Xb(1,"div",38),S.Sb(2,"em",39),S.Xc(3," Loading... "),S.Wb(),S.Wb())}function rl(e,n){1&e&&(S.Xb(0,"strong",31),S.Xc(1," Physicians "),S.Wb())}function cl(e,n){1&e&&(S.Xb(0,"span"),S.Xc(1," No assigned physician "),S.Wb())}var sl,dl,ul=((dl=function(){function e(n,t,i,a,o){d(this,e),this._modalRef=n,this._urlService=t,this._leadService=i,this._languagePipe=a,this._staffService=o,this.listOfAllPhysicians=new Map,this.filterRequest=new Fo,this.indeterminate=!1,this.statusIndeterminate=!1,this.dateRange=[],this.allStatusChecked=!1,this.allLanguagesChecked=!1,this.selectedIndex=0,this.filteredSites=new Array,this.statusCheckOptions=[{label:"New",value:Ae.e.NEW,checked:!1,disabled:!1},{label:"Lost",value:Ae.e.LOST,checked:!1,disabled:!1},{label:"Active",value:Ae.e.ACTIVE,checked:!1,disabled:!1},{label:"Eligible",value:Ae.e.ELIGIBLE,checked:!1,disabled:!1},{label:"Converted",value:Ae.e.CONVERTED,checked:!1,disabled:!1},{label:"Not Eligible",value:Ae.e.NOT_ELIGIBLE,checked:!1,disabled:!1},{label:"Flagged",value:Ae.e.FLAGGED_FOR_ELIGIBILITY_RECHECK,checked:!1,disabled:!1}],this.languageCheckOptions=new Array,this.disabledDate=function(e){return Object(Ce.a)(new Date((new Date).setHours(23,59,59,99)),e)<0},this.sites=JSON.parse(sessionStorage.getItem("sites"))}return a(e,[{key:"status",set:function(e){this.isAllStatusCheckDisabled=!("ALL"==e.tab),this.tab=e.tab;var n=new Set(e.statuses.split(","));this.statusCheckOptions.forEach(function(e){n.has(e.value)&&(e.checked=!0)}),this.createStatusValue(),this.filterRequest.allSelected=this.allStatusChecked,this.filterRequest.status=e.statuses}},{key:"ngOnInit",value:function(){this.fetchAllLanguages(),this.fetchPhysicians(),this.getAllSites()}},{key:"fetchAllLanguages",value:function(){var e=this;this._leadService.getAllLanguagesForLeads().subscribe(function(n){if(e.languages=n,e.languages.forEach(function(n){e.languageCheckOptions.push({label:e._languagePipe.transform(n),value:n,checked:!1,disabled:!1})}),e.filterRequest.language){var t=new Set(e.filterRequest.language.split(","));e.languageCheckOptions.forEach(function(e){t.has(e.value)&&(e.checked=!0)})}e.createLanguageValue()})}},{key:"fetchPhysicians",value:function(){var e=this;this.loadingPhysician=!0,this._staffService.fetchStaffMembersWithoutPagination(En.a.PHYSICIAN,null,this.selectedSiteId).subscribe(function(n){e.loadingPhysician=!1,null==n||0===n.totalCount?e.noPhysiciansAvailable=!0:n.result.forEach(function(n){e.listOfAllPhysicians.set(n.user.id,n.user.fullName)}),e.listOfAllPhysicians.set("NOT_ASSIGNED","Not Assigned")},function(n){e.loadingPhysician=!1,e.noPhysiciansAvailable=!0})}},{key:"updateLanguagesAllChecked",value:function(){this.indeterminate=!1,this.checkUncheckAllLanguages(this.allLanguagesChecked),this.createLanguageValue(this.allLanguagesChecked)}},{key:"updateSingleLanguageChecked",value:function(){this.languageCheckOptions.every(function(e){return!e.checked})?(this.allLanguagesChecked=!1,this.indeterminate=!1):this.languageCheckOptions.every(function(e){return e.checked})?(this.allLanguagesChecked=!0,this.indeterminate=!1):(this.allLanguagesChecked=!1,this.indeterminate=!0),this.createLanguageValue()}},{key:"createLanguageValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||0==this.languageCheckOptions.filter(function(e){return!e.checked}).length)return this.languageValue="All",void this.checkUncheckAllLanguages(!0);this.languageValue=this.languageCheckOptions.filter(function(e){return e.checked}).map(function(e){return e.label}).join(", ")}},{key:"updateStatusAllChecked",value:function(){this.statusIndeterminate=!1,this.checkUncheckAll(this.allStatusChecked),this.createStatusValue(this.allStatusChecked)}},{key:"updateSingleStatusChecked",value:function(){this.statusCheckOptions.every(function(e){return!e.checked})?(this.allStatusChecked=!1,this.statusIndeterminate=!1):this.statusCheckOptions.every(function(e){return e.checked})?(this.allStatusChecked=!0,this.statusIndeterminate=!1):(this.allStatusChecked=!1,this.statusIndeterminate=!0),this.createStatusValue()}},{key:"createStatusValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||0==this.statusCheckOptions.filter(function(e){return!e.checked}).length)return this.allStatusChecked=!0,this.statusValue="All",void this.checkUncheckAll(!0);this.statusValue=this.statusCheckOptions.filter(function(e){return e.checked}).map(function(e){return e.label}).join(", ")}},{key:"applyFilter",value:function(){var e;this.filterRequest=new Fo,this.filterRequest.d1=this.dateRange?this.dateRange[0]:null,this.filterRequest.d2=this.dateRange?this.dateRange[1]:null,this.filterRequest.tier=this.selectedTier;var n=this.dateRange?this.dateRange[0]:new Date((new Date).setDate((new Date).getDate()-1));this.filterRequest.startTime=n&&null!=n?new Date(n).toISOString().split("T")[0]:null;var t=this.dateRange?this.dateRange[1]:new Date;this.filterRequest.endTime=t&&null!=t?new Date(t).toISOString().split("T")[0]:null,this.selectedPhysicianId&&null!=this.selectedPhysicianId&&(this.filterRequest.physicianId=this.selectedPhysicianId),(null===(e=this.selectedSite)||void 0===e?void 0:e.length)&&(this.filterRequest.site=this.selectedSite),this.selectedSiteId&&null!=this.selectedSiteId&&(this.filterRequest.siteId=this.selectedSiteId),this.filterRequest.status=this.statusCheckOptions.filter(function(e){return e.checked}).map(function(e){return e.value}).join(","),this.filterRequest.language=this.languageCheckOptions.some(function(e){return e.checked})?this.languageCheckOptions.filter(function(e){return e.checked}).map(function(e){return e.value}).join(","):null,this._urlService.setParameter(this.filterRequest),this._modalRef.close(this.filterRequest)}},{key:"clearAll",value:function(){this.dateRange=[],this.selectedTier=null,this.selectedPhysicianId=null,this.selectedSite=null,this.selectedSiteName=null,this.allLanguagesChecked=!1,this.allStatusChecked=!0,this.updateLanguagesAllChecked(),this.updateStatusAllChecked()}},{key:"checkUncheckAll",value:function(e){this.statusCheckOptions=this.statusCheckOptions.map(function(n){return Object.assign(Object.assign({},n),{checked:e})})}},{key:"filterSites",value:function(e){if(this.filteredSites=JSON.parse(JSON.stringify(this.sites)),e=null==e?void 0:e.trim()){var n=new RegExp(e,"gi");this.filteredSites=this.filteredSites.filter(function(e){var t;return null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.match(n)})}}},{key:"getAllSites",value:function(){var e=this;this.loadingSites=!0,this.sites=new Array,this.filteredSites=new Array,this._staffService.fetchSitesForStaff().subscribe(function(n){e.sites=n,e.filteredSites=JSON.parse(JSON.stringify(e.sites)),e.loadingSites=!1})}},{key:"checkUncheckAllLanguages",value:function(e){this.languageCheckOptions=this.languageCheckOptions.map(function(n){return Object.assign(Object.assign({},n),{checked:e})})}},{key:"onFilterTabChange",value:function(){}},{key:"onPhysicianChange",value:function(e){}},{key:"selectSite",value:function(e){if(e){var n=this.sites.find(function(n){return n.id===e});this.selectedSiteName="".concat(n.name),this.selectedSite=e}}}]),e}()).\u0275fac=function(e){return new(e||dl)(S.Rb(N.e),S.Rb(Uo),S.Rb(g.a),S.Rb(qo.a),S.Rb(kn.a))},dl.\u0275cmp=S.Lb({type:dl,selectors:[["app-lead-filter"]],inputs:{status:"status"},features:[S.Cb([qo.a])],decls:45,vars:26,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","24"],["nzTabBarGutter","10px",3,"nzSelectedIndex","nzTabPosition","nzSelectedIndexChange"],[3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[2,"border-bottom","1px solid rgb(233, 233, 233)"],["nz-checkbox","",2,"margin-top","10px","margin-bottom","10px",3,"ngModel","nzIndeterminate","ngModelChange"],[2,"display","flex","flex-direction","column",3,"ngModel","ngModelChange"],["leadLanguageTitle",""],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select Insurance Tier",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","Tier 1"],["nzValue","2","nzLabel","Tier 2"],["nzValue","3","nzLabel","Tier 3"],["insuranceTitle",""],[3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["sitesTitle",""],[1,"staff-slect-box"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a Physician",3,"ngModel","nzNotFoundContent","ngModelChange"],[4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["physicianTitle",""],["noPhysicianData",""],["nz-row","","nzGutter","8",2,"flex-direction","row-reverse","margin-top","10px"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","",2,"margin-top","10px","margin-bottom","10px",3,"ngModel","nzIndeterminate","disabled","ngModelChange"],["leadStatusTitle",""],[2,"height","auto"],[4,"ngIf"],[1,"tab-title"],["nzFormat","MMM d, y",3,"ngStyle","nzDisabledDate","nzAllowClear","ngModel","ngModelChange"],["dateRangeTitle",""],["nz-radio","",3,"nzValue"],[1,"filterTitle"],[3,"nzLabel","nzValue"],["nzDisabled","","nzCustomContent",""],[1,"loading-option"],["nz-icon","","nzType","loading",2,"font-size","20px","color","#8BC34A"]],template:function(e,n){if(1&e&&(S.Vb(0),S.Xb(1,"div",0),S.Xb(2,"div",1),S.Xb(3,"nz-tabset",2),S.ec("nzSelectedIndexChange",function(e){return n.selectedTabIndex=e})("nzSelectedIndexChange",function(){return n.onFilterTabChange()}),S.Vc(4,Zo,8,5,"nz-tab",3),S.Xb(5,"nz-tab",4),S.Xb(6,"div",5),S.Xb(7,"label",6),S.ec("ngModelChange",function(e){return n.allLanguagesChecked=e})("ngModelChange",function(){return n.updateLanguagesAllChecked()}),S.Xc(8," Check all "),S.Wb(),S.Wb(),S.Sb(9,"br"),S.Xb(10,"nz-checkbox-group",7),S.ec("ngModelChange",function(e){return n.languageCheckOptions=e})("ngModelChange",function(){return n.updateSingleLanguageChecked()}),S.Wb(),S.Vc(11,$o,4,1,"ng-template",null,8,S.Wc),S.Wb(),S.Vc(13,el,4,6,"nz-tab",3),S.Xb(14,"nz-tab",4),S.Xb(15,"nz-select",9),S.ec("ngModelChange",function(e){return n.selectedTier=e}),S.Sb(16,"nz-option",10),S.Sb(17,"nz-option",11),S.Sb(18,"nz-option",12),S.Wb(),S.Vc(19,tl,3,1,"ng-template",null,13,S.Wc),S.Wb(),S.Xb(21,"nz-tab",4),S.Xb(22,"nz-radio-group",14),S.ec("ngModelChange",function(e){return n.selectedSite=e})("ngModelChange",function(e){return n.selectSite(e)}),S.Vc(23,il,2,2,"label",15),S.Wb(),S.Vc(24,al,4,4,"ng-template",null,16,S.Wc),S.Wb(),S.Xb(26,"nz-tab",4),S.Xb(27,"div",17),S.Xb(28,"nz-select",18),S.ec("ngModelChange",function(e){return n.selectedPhysicianId=e})("ngModelChange",function(e){return n.onPhysicianChange(e)}),S.Vc(29,ol,2,2,"ng-container",19),S.jc(30,"keyvalue"),S.Vc(31,ll,4,0,"nz-option",20),S.Wb(),S.Wb(),S.Vc(32,rl,2,0,"ng-template",null,21,S.Wc),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Vc(34,cl,2,0,"ng-template",null,22,S.Wc),S.Xb(36,"div",23),S.Xb(37,"div",24),S.Xb(38,"button",25),S.ec("click",function(){return n.applyFilter()}),S.Xc(39),S.jc(40,"translate"),S.Wb(),S.Wb(),S.Xb(41,"div",24),S.Xb(42,"button",26),S.ec("click",function(){return n.clearAll()}),S.Xc(43),S.jc(44,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Ub()),2&e){var t=S.Ic(12),i=S.Ic(20),a=S.Ic(25),o=S.Ic(33),l=S.Ic(35);S.Db(3),S.rc("nzSelectedIndex",n.selectedTabIndex)("nzTabPosition","left"),S.Db(1),S.rc("ngIf","ALL"==n.tab),S.Db(1),S.rc("nzTitle",t),S.Db(2),S.rc("ngModel",n.allLanguagesChecked)("nzIndeterminate",n.indeterminate),S.Db(3),S.rc("ngModel",n.languageCheckOptions),S.Db(3),S.rc("ngIf",!1),S.Db(1),S.rc("nzTitle",i),S.Db(1),S.rc("ngModel",n.selectedTier),S.Db(6),S.rc("nzTitle",a),S.Db(1),S.rc("ngModel",n.selectedSite),S.Db(1),S.rc("ngForOf",n.sites),S.Db(3),S.rc("nzTitle",o),S.Db(2),S.rc("ngModel",n.selectedPhysicianId)("nzNotFoundContent",l),S.Db(1),S.rc("ngForOf",S.kc(30,20,n.listOfAllPhysicians)),S.Db(2),S.rc("ngIf",n.loadingPhysician),S.Db(8),S.Zc(" ",S.kc(40,22,"FILTERS.APPLY")," "),S.Db(4),S.Zc(" ",S.kc(44,24,"FILTERS.CLEAR_ALL")," ")}},directives:[k.c,k.a,qi.d,s.q,qi.a,Zn.a,u.u,u.x,Zn.b,Ln.d,Ln.a,ze.c,s.p,P.a,R.a,U.a,A.a,A.c,s.r,ze.b,V.a],pipes:[s.j,E.a,s.e],styles:["[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}[_nghost-%COMP%]     .ant-tabs-tab{width:200px;text-align:left!important;height:50px}[_nghost-%COMP%]     .ant-tabs{height:300px}[_nghost-%COMP%]     .ant-tabs-tab{color:var(--neutral-color)}#sub-header[_ngcontent-%COMP%]{background:transparent;padding:0 20px}.container[_ngcontent-%COMP%]{padding:0 20px!important}.strong[_ngcontent-%COMP%]{font-weight:bolder}[_nghost-%COMP%]     .ant-tabs-nav{background:#f6f6f6 0 0 no-repeat padding-box;border-radius:10px;width:262px;padding:35px 0 0 20px;font:normal normal 700 14px/19px Nunito;height:300px}[_nghost-%COMP%]     .ant-tabs-content-holder:first{height:350px;overflow-y:scroll;padding-left:10px}[_nghost-%COMP%]     .ant-tabs-content-holder{overflow:auto}[_nghost-%COMP%]     .ant-picker-range, [_nghost-%COMP%]     .ant-select-show-search.ant-select:not(.ant-select-customize-input) .ant-select-selector, [_nghost-%COMP%]     .ant-select:not(.ant-select-customize-input) .ant-select-selector{height:50px;border:1px solid #ebebeb;border-radius:10px;width:100%}[_nghost-%COMP%]     .ant-select-selector input, [_nghost-%COMP%]     .ant-select-show-search.ant-select:not(.ant-select-customize-input) .ant-select-selector input{height:50px}[_nghost-%COMP%]     .ant-select-single.ant-select-show-arrow .ant-select-selection-item, [_nghost-%COMP%]     .ant-select-single.ant-select-show-arrow .ant-select-selection-placeholder{line-height:50px}[_nghost-%COMP%]     .ant-tabs-tab{height:auto;white-space:normal}[_nghost-%COMP%]     .ant-tabs-left>.ant-tabs-nav .ant-tabs-tab:last-of-type{padding:0}[_nghost-%COMP%]     .ant-tabs-tab-btn{text-align:left;color:var(--light-black)!important}[_nghost-%COMP%]     .ant-tabs-tab-active{border-bottom:none!important;border-left:2px solid var(--primary-color)!important}[_nghost-%COMP%]     .ant-tabs-ink-bar{height:0!important}.filterTitle[_ngcontent-%COMP%]{color:var(--light-black);font-weight:600;font-size:11px;display:block;margin:0;line-height:12px}[_nghost-%COMP%]     span.ant-radio+*{font-weight:400}[_nghost-%COMP%]     .ant-btn-link{text-align:right;color:var(--dark-grey)}  .vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}[_nghost-%COMP%]     .ant-checkbox-group-item{margin-top:5px}[_nghost-%COMP%]     .ant-checkbox-wrapper{padding-left:16px;padding-right:8px;border-spacing:0!important}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}input[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid #ebebeb;border-radius:10px!important;outline:none;height:50px}.tab-title[_ngcontent-%COMP%]{font-size:13px;font-weight:100;color:#000}"]}),dl),bl=((sl=function(){function e(){d(this,e)}return a(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||sl)},sl.\u0275cmp=S.Lb({type:sl,selectors:[["app-lead-status-description"]],decls:31,vars:0,consts:[[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","4",2,"text-align","center","padding-left","5px","padding-right","5px","height","35px"],["leadStatus","NEW","isToolTipEnabled","true"],["nz-col","","nzSpan","20"],["leadStatus","ELIGIBLE","isToolTipEnabled","true"],["leadStatus","ACTIVE","isToolTipEnabled","true"],["leadStatus","NOT_ELIGIBLE","isToolTipEnabled","true"],["leadStatus","CONVERTED","isToolTipEnabled","true"],["leadStatus","LOST","isToolTipEnabled","true"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Sb(3,"app-patient-status-tag",3),S.Wb(),S.Xb(4,"div",4),S.Xc(5," Every Lead added to the system have NEW status "),S.Wb(),S.Wb(),S.Xb(6,"div",1),S.Xb(7,"div",2),S.Sb(8,"app-patient-status-tag",5),S.Wb(),S.Xb(9,"div",4),S.Xc(10," Patients whose eligibility check is completed and is eligible for the program "),S.Wb(),S.Wb(),S.Xb(11,"div",1),S.Xb(12,"div",2),S.Sb(13,"app-patient-status-tag",6),S.Wb(),S.Xb(14,"div",4),S.Xc(15," Once we start the enrollment process "),S.Wb(),S.Wb(),S.Xb(16,"div",1),S.Xb(17,"div",2),S.Sb(18,"app-patient-status-tag",7),S.Wb(),S.Xb(19,"div",4),S.Xc(20," If the lead is not eligible for the program "),S.Wb(),S.Wb(),S.Xb(21,"div",1),S.Xb(22,"div",2),S.Sb(23,"app-patient-status-tag",8),S.Wb(),S.Xb(24,"div",4),S.Xc(25," Once the enrollment process is completed and lead is converted as patient "),S.Wb(),S.Wb(),S.Xb(26,"div",1),S.Xb(27,"div",2),S.Sb(28,"app-patient-status-tag",9),S.Wb(),S.Xb(29,"div",4),S.Xc(30," If the patient denies to enroll the program "),S.Wb(),S.Wb(),S.Wb())},directives:[k.c,k.a,fi.a],styles:[""]}),sl);function pl(e,n){1&e&&(S.Vb(0),S.Xb(1,"div",0),S.Xb(2,"div",7),S.Sb(3,"app-icons",8),S.Wb(),S.Wb(),S.Xb(4,"div",0),S.Xb(5,"div",7),S.Xc(6),S.jc(7,"translate"),S.Wb(),S.Wb(),S.Ub()),2&e&&(S.Db(1),S.rc("nzGutter",64),S.Db(1),S.rc("nzSpan",24),S.Db(2),S.rc("nzGutter",64),S.Db(1),S.rc("nzSpan",24),S.Db(1),S.Zc(" ",S.kc(7,5,"PATIENTS.GENERATINGREPORT")," "))}function fl(e,n){1&e&&(S.Vb(0),S.Xb(1,"div",9),S.Sb(2,"nz-alert",10),S.jc(3,"translate"),S.jc(4,"translate"),S.Wb(),S.Ub()),2&e&&(S.Db(1),S.rc("nzSpan",24),S.Db(1),S.sc("nzMessage",S.kc(3,3,"LEADS.PATIENT_INTAKE_REPORT")),S.sc("nzDescription",S.kc(4,5,"LEADS.REPORT.NO_RECORD")))}var hl,gl,ml,vl,Cl=((hl=function(){function e(n){var t=this;d(this,e),this._leadsService=n,this.isReportLoading=!1,this.dateFormat="MMM, dd yyyy",this.today=new Date,this.noRecords=!1,this.disabledDate=function(e){return Object(Ce.a)(e,t.today)>0}}return a(e,[{key:"ngOnInit",value:function(){}},{key:"generateReport",value:function(){var e=this;this.isReportLoading=!0,this._leadsService.generateLeadReport(this.startDate,this.endDate).subscribe(function(n){null!=n?(e.noRecords=!1,window.open("https://api.cooeyhealth.com/v2/media/"+n.fileName,"_blank")):e.noRecords=!0,e.isReportLoading=!1})}},{key:"onChange",value:function(e){this.startDate=e[0].toISOString().split("T")[0],this.endDate=e[1].toISOString().split("T")[0]}}]),e}()).\u0275fac=function(e){return new(e||hl)(S.Rb(g.a))},hl.\u0275cmp=S.Lb({type:hl,selectors:[["app-patient-intake-report-dialog"]],decls:16,vars:18,consts:[["nz-row","",3,"nzGutter"],["nz-col","",1,"spacing",3,"nzSpan"],["id","title"],["nzMode","date","ngModel","",2,"width","100%",3,"nzFormat","nzDisabledDate","ngModelChange"],[4,"ngIf"],[2,"text-align","right"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],["nz-col","",1,"center",3,"nzSpan"],["name","loading"],["nz-col","",3,"nzSpan"],["nzType","warning","nzShowIcon","",3,"nzMessage","nzDescription"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"h3",2),S.Xc(3),S.jc(4,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(5,"div",0),S.Xb(6,"div",1),S.Xb(7,"nz-range-picker",3),S.ec("ngModelChange",function(e){return n.onChange(e)}),S.Wb(),S.Wb(),S.Wb(),S.Vc(8,pl,8,7,"ng-container",4),S.Vc(9,fl,5,7,"ng-container",4),S.Xb(10,"div",0),S.Xb(11,"div",1),S.Xb(12,"div",5),S.Xb(13,"button",6),S.ec("click",function(){return n.generateReport()}),S.Xc(14),S.jc(15,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.rc("nzGutter",64),S.Db(1),S.rc("nzSpan",24),S.Db(2),S.Zc(" ",S.kc(4,14,"LEADS.PATIENT_INTAKE_REPORT_RANGE")," "),S.Db(2),S.rc("nzGutter",64),S.Db(1),S.rc("nzSpan",24),S.Db(1),S.rc("nzFormat",n.dateFormat)("nzDisabledDate",n.disabledDate),S.Db(1),S.rc("ngIf",n.isReportLoading),S.Db(1),S.rc("ngIf",n.noRecords&&!n.isReportLoading),S.Db(1),S.rc("nzGutter",64),S.Db(1),S.rc("nzSpan",24),S.Db(2),S.rc("disabled",!n.startDate||!n.endDate)("nzLoading",n.isReportLoading),S.Db(1),S.Zc(" ",S.kc(15,16,"PATIENTS.GENERATEREPORTSTART")," "))},directives:[k.c,k.a,A.a,A.c,u.u,u.x,s.q,P.a,R.a,U.a,Fe.a,Sa.a],pipes:[E.a],styles:["#title[_ngcontent-%COMP%]{padding-left:1%;font-size:14px;font-weight:600;border-left:3px solid var(--primary-color)}.spacing[_ngcontent-%COMP%]{padding:10px 10px 10px 0}.center[_ngcontent-%COMP%]{text-align:center;padding:10px}"]}),hl),zl=function(){function e(n,t){d(this,e),this._document=t;var i=this._textarea=this._document.createElement("textarea"),a=i.style;a.position="fixed",a.top=a.opacity="0",a.left="-999em",i.setAttribute("aria-hidden","true"),i.value=n,this._document.body.appendChild(i)}return a(e,[{key:"copy",value:function(){var e=this._textarea,n=!1;try{if(e){var t=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),n=this._document.execCommand("copy"),t&&t.focus()}}catch(i){}return n}},{key:"destroy",value:function(){var e=this._textarea;e&&(e.parentNode&&e.parentNode.removeChild(e),this._textarea=void 0)}}]),e}(),yl=((ml=function(){function e(n){d(this,e),this._document=n}return a(e,[{key:"copy",value:function(e){var n=this.beginCopy(e),t=n.copy();return n.destroy(),t}},{key:"beginCopy",value:function(e){return new zl(e,this._document)}}]),e}()).\u0275fac=function(e){return new(e||ml)(S.bc(s.d))},ml.\u0275prov=Object(S.Nb)({factory:function(){return new ml(Object(S.bc)(s.d))},token:ml,providedIn:"root"}),ml),Sl=((gl=function e(){d(this,e)}).\u0275mod=S.Pb({type:gl}),gl.\u0275inj=S.Ob({factory:function(e){return new(e||gl)}}),gl),Il=l("PScX"),Xl=l("F6ss"),Dl=l("Szod"),kl=l("SKKP"),Wl=l("Ujc4"),Tl=l("Nqz0"),El=l("Q8cG"),wl=l("ZO2R"),Ll=l("t2pg"),Ml=((vl=function(){function e(){d(this,e)}return a(e,[{key:"transform",value:function(e){var n,t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TYPE",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae.b.COMPLETED,l=0;switch(o){case Ae.b.COMPLETED:i=Ae.d.getLatestCompletedLeadFollowUp(e);break;default:i=Ae.d.getLatestLeadFollowUp(e)}if(null==i)return"";switch(n=i.type,l=i.step,t=i.status,a){case"TYPE":switch(n){case Ae.c.SMS:return"SMS Sent";case Ae.c.LETTER:return"Letter Sent";case Ae.c.AUDIO_CALL:return"Call Completed"}case"STEP":return l;case"STATUS":return t;case"LAST_FOLLOW_UP_ON":return(new Date).getTime();case"COLOR":switch(i.status){case Ae.b.COMPLETED:return this.getColor("--success-color");case Ae.b.PENDING:case Ae.b.CANCELLED:case Ae.b.RESCHEDULED:return this.getColor("--warning-color")}case"ICON":switch(i.status){case Ae.b.COMPLETED:return"check-circle";case Ae.b.PENDING:case Ae.b.CANCELLED:case Ae.b.RESCHEDULED:return"clock-circle"}}}},{key:"getColor",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--primary-color",t=null===(e=null===document||void 0===document?void 0:document.documentElement)||void 0===e?void 0:e.style;return null==t?void 0:t.getPropertyValue(n)}}]),e}()).\u0275fac=function(e){return new(e||vl)},vl.\u0275pipe=S.Qb({name:"latestFollowUp",type:vl,pure:!0}),vl);function Ol(e,n){if(1&e&&(S.Xb(0,"div",19),S.Xb(1,"div",20),S.Sb(2,"nz-alert",21),S.Wb(),S.Wb()),2&e){S.ic();var t=S.Ic(2);S.Db(2),S.rc("nzMessage",t)}}function _l(e,n){1&e&&(S.Xb(0,"strong"),S.Xc(1," Qualification engine is running, please wait for it to complete before continuing... "),S.Wb())}function Nl(e,n){if(1&e&&(S.Xb(0,"strong"),S.Xc(1),S.Wb()),2&e){var t=S.ic(2);S.Db(1),S.Zc(" Qualification engine is running for ",null==t.qualificationState?null:t.qualificationState.numberOfUsers," lead(s), please wait for it to complete before continuing... ")}}function xl(e,n){if(1&e){var t=S.Yb();S.Vc(0,_l,2,0,"strong",13),S.Vc(1,Nl,2,1,"strong",13),S.Xc(2," \xa0\xa0 "),S.Xb(3,"app-icons",22),S.ec("click",function(){return S.Lc(t),S.ic().refresh.emit()}),S.Wb()}if(2&e){var i=S.ic();S.rc("ngIf",0===(null==i.qualificationState?null:i.qualificationState.numberOfUsers)),S.Db(1),S.rc("ngIf",0!==(null==i.qualificationState?null:i.qualificationState.numberOfUsers))}}function Al(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"th",23),S.ec("nzCheckedChange",function(e){return S.Lc(t),S.ic().onAllChecked(e)}),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(1),S.rc("nzShowCheckbox",i.totalCount>0)("nzChecked",i.checked)("nzIndeterminate",i.indeterminate)}}function Pl(e,n){1&e&&(S.Xb(0,"th"),S.Xc(1," Sub Tenant "),S.Wb())}function Rl(e,n){1&e&&(S.Xb(0,"th"),S.Xc(1,"Last Activity"),S.Wb())}function Ul(e,n){1&e&&(S.Xb(0,"th"),S.Xc(1,"Last Activity On"),S.Wb())}function Vl(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"td",36),S.ec("nzCheckedChange",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic().onItemChecked(n.leadId,e,!0)}),S.Wb(),S.Ub()}if(2&e){var i=S.ic().$implicit,a=S.ic();S.Db(1),S.rc("nzChecked",a.setOfCheckedId.has(i.leadId))}}function Fl(e,n){1&e&&(S.Xb(0,"span",37),S.Sb(1,"em",38),S.Wb())}function Bl(e,n){if(1&e&&(S.Xb(0,"td"),S.Xc(1),S.jc(2,"tenantName"),S.Wb()),2&e){var t=S.ic().$implicit;S.Db(1),S.Zc(" ",S.kc(2,1,t.tenantId)," ")}}function jl(e,n){if(1&e&&(S.Xb(0,"nz-tag",40),S.jc(1,"latestFollowUp"),S.Sb(2,"i",41),S.jc(3,"latestFollowUp"),S.Xc(4),S.jc(5,"latestFollowUp"),S.jc(6,"latestFollowUp"),S.Wb()),2&e){var t=S.ic(2).$implicit;S.rc("nzColor",S.lc(1,4,t,"COLOR")),S.Db(2),S.rc("nzType",S.lc(3,7,t,"ICON")),S.Db(2),S.ad(" Step - ",S.lc(5,10,t,"STEP")," | ",S.lc(6,13,t,"TYPE")," ")}}function ql(e,n){if(1&e){var t=S.Yb();S.Xb(0,"td",24),S.ec("click",function(){S.Lc(t);var e=S.ic().$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(1,"span",24),S.ec("click",function(e){S.Lc(t);var n=S.ic().$implicit;return S.ic().showTimeline(e,n)}),S.Vc(2,jl,7,16,"nz-tag",39),S.Wb(),S.Wb()}if(2&e){var i=S.ic().$implicit;S.ic();var a=S.Ic(37);S.Db(2),S.rc("ngIf",(null==i?null:i.followUps)&&(null==i||null==i.followUps?null:i.followUps.length)>0)("ngIfElse",a)}}function Gl(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"date"),S.jc(3,"latestFollowUp"),S.Ub()),2&e){var t=S.ic(2).$implicit;S.Db(1),S.Zc(" ",S.lc(2,1,S.lc(3,4,t,"LAST_FOLLOW_UP_ON"),"mediumDate")," ")}}function Hl(e,n){if(1&e){var t=S.Yb();S.Xb(0,"td",24),S.ec("click",function(){S.Lc(t);var e=S.ic().$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(1,"span"),S.Vc(2,Gl,4,7,"ng-container",42),S.Wb(),S.Wb()}if(2&e){var i=S.ic().$implicit;S.ic();var a=S.Ic(39);S.Db(2),S.rc("ngIf",(null==i?null:i.followUps)&&(null==i||null==i.followUps?null:i.followUps.length)>0)("ngIfElse",a)}}function Zl(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"app-icons",43),S.ec("click",function(){S.Lc(t);var e=S.ic().$implicit;return S.ic().gotoEditLead(null==e?null:e.leadId)}),S.Wb(),S.Ub()}}var Yl=function(){return["START_LEAD_ENROLMENT_FLOW"]};function $l(e,n){if(1&e){var t=S.Yb();S.Xb(0,"tr"),S.Vc(1,Vl,2,1,"ng-container",9),S.Xb(2,"td",24),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(3,"span"),S.Xc(4),S.Wb(),S.Xb(5,"span"),S.Xc(6),S.Wb(),S.Wb(),S.Xb(7,"td",24),S.ec("click",function(e){return S.Lc(t),S.ic().showStatusDescription(e)}),S.Xb(8,"nz-badge",25),S.Sb(9,"app-patient-status-tag",26),S.Wb(),S.Wb(),S.Xb(10,"td"),S.Vc(11,Fl,2,0,"span",27),S.Wb(),S.Xb(12,"td"),S.Sb(13,"app-audio-call-widget",28),S.Wb(),S.Xb(14,"td",24),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(15,"span"),S.Xc(16),S.jc(17,"externalSources"),S.Wb(),S.Wb(),S.Xb(18,"td",24),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(19,"span"),S.Xc(20),S.jc(21,"date"),S.Wb(),S.Wb(),S.Xb(22,"td",24),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(23,"span"),S.Xc(24),S.jc(25,"language"),S.Wb(),S.Wb(),S.Vc(26,Bl,3,3,"td",11),S.Xb(27,"td",24),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().showDetails(null==e?null:e.leadId)}),S.Xb(28,"span"),S.Xc(29),S.jc(30,"date"),S.Wb(),S.Wb(),S.Vc(31,ql,3,2,"td",29),S.Vc(32,Hl,3,2,"td",29),S.Xb(33,"td"),S.Vc(34,Zl,2,0,"ng-container",13),S.Xb(35,"app-icons",30),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().deleteLead(null==e?null:e.leadId)}),S.Wb(),S.Xb(36,"a",31),S.Sb(37,"app-icons",32),S.Wb(),S.Xb(38,"nz-dropdown-menu",null,33),S.Xb(40,"ul",34),S.Xb(41,"li",35),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().runInsuranceTiering(null==e?null:e.leadId)}),S.Xc(42," Run insurance tiering "),S.Wb(),S.Xb(43,"li",35),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().queryCCDA(null==e?null:e.leadId,"PatientQuery")}),S.Xc(44," Pull Lead Summary "),S.Wb(),S.Xb(45,"li",35),S.ec("click",function(){S.Lc(t);var e=n.$implicit;return S.ic().queryCCDA(null==e?null:e.leadId,"VisitQuery")}),S.Xc(46," Pull Visit Summary "),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=n.$implicit,a=S.Ic(39),o=S.ic();S.Db(1),S.rc("isFeaturePermitted",S.xc(28,Yl)),S.Db(3),S.Zc("",null==i||null==i.patientInfo?null:i.patientInfo.firstName,"\xa0"),S.Db(2),S.Yc(null==i||null==i.patientInfo?null:i.patientInfo.lastName),S.Db(2),S.rc("nzCount",o.iconTemplate),S.Db(1),S.rc("leadStatus",null==i||null==i.leadStatusInfo?null:i.leadStatusInfo.overAllStatus),S.Db(2),S.rc("ngIf",i.leadContactPushedToGenesys),S.Db(2),S.rc("leadId",null==i?null:i.leadId)("context",o.context)("phoneNumbers",null==i||null==i.patientInfo?null:i.patientInfo.phoneNumbers),S.Db(3),S.Yc(S.lc(17,17,null==i||null==i.patientInfo?null:i.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")),S.Db(4),S.Yc(S.lc(21,20,null==i||null==i.patientInfo?null:i.patientInfo.dateOfBirth,"mediumDate")),S.Db(4),S.Yc(S.kc(25,23,null==i||null==i.patientInfo||null==i.patientInfo.language?null:i.patientInfo.language.locale)),S.Db(5),S.Yc(S.lc(30,25,null==i?null:i.createdOn,"mediumDate")),S.Db(2),S.rc("ngIf","ACTIVE"==o.selectedType),S.Db(1),S.rc("ngIf","ACTIVE"==o.selectedType),S.Db(2),S.rc("ngIf",!1),S.Db(2),S.rc("nzDropdownMenu",a)}}function Kl(e,n){1&e&&(S.Xb(0,"nz-tag",40),S.Xc(1," No Follow-ups "),S.Wb()),2&e&&S.rc("nzColor","magenta")}function Ql(e,n){1&e&&(S.Xb(0,"span"),S.Xc(1," - "),S.Wb())}function Jl(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"selected-patient-action",44),S.ec("onPrimaryActionButtonClicked",function(e){return S.Lc(t),S.ic(2).primaryButtonClick(e)})("onSecondaryActionButtonClicked",function(e){return S.Lc(t),S.ic(2).reset(e)}),S.Wb(),S.Ub()}if(2&e){var i=S.ic(2);S.Db(1),S.rc("primaryActionText",i.primaryActionText)("primaryButtonLoading",i.primaryButttonloading)("secondaryActionText",i.secondaryActionText)("totalPatientsSelected",i.totalLeadsSelected)("totalCount",i.totalCount)}}var er=function(){return["PUSH_CONTACT_TO_CAMPAIGN_MANUAL"]};function nr(e,n){1&e&&(S.Vb(0),S.Vc(1,Jl,2,5,"ng-container",9),S.Ub()),2&e&&(S.Db(1),S.rc("isFeaturePermitted",S.xc(1,er)))}function tr(e,n){if(1&e){var t=S.Yb();S.Vb(0),S.Xb(1,"selected-patient-action",44),S.ec("onPrimaryActionButtonClicked",function(e){return S.Lc(t),S.ic().primaryButtonClick(e)})("onSecondaryActionButtonClicked",function(e){return S.Lc(t),S.ic().reset(e)}),S.Wb(),S.Ub()}if(2&e){var i=S.ic();S.Db(1),S.rc("primaryActionText",i.primaryActionText)("primaryButtonLoading",i.primaryButttonloading)("secondaryActionText",i.secondaryActionText)("totalPatientsSelected",i.totalLeadsSelected)("totalCount",i.totalCount)}}function ir(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.Yc(t.pageIndex*t.pageSize)}}function ar(e,n){if(1&e&&(S.Vb(0),S.Xc(1),S.Ub()),2&e){var t=S.ic(2);S.Db(1),S.Yc(t.totalCount)}}function or(e,n){if(1&e&&(S.Xb(0,"h5",45),S.Xc(1),S.jc(2,"translate"),S.jc(3,"translate"),S.Vc(4,ir,2,1,"ng-container",13),S.Vc(5,ar,2,1,"ng-container",13),S.Xc(6),S.Wb()),2&e){var t=S.ic();S.Db(1),S.bd(" ",S.kc(2,6,"COMMON.SHOWING")," ",(t.pageIndex-1)*t.pageSize+1," ",S.kc(3,8,"TABLEHEADER.TO")," "),S.Db(3),S.rc("ngIf",t.pageIndex*t.pageSize<t.totalCount),S.Db(1),S.rc("ngIf",t.pageIndex*t.pageSize>=t.totalCount),S.Db(1),S.Zc(" of ",t.totalCount," ")}}function lr(e,n){1&e&&(S.Xb(0,"div",46),S.Xb(1,"div",47),S.Xb(2,"div",48),S.Xb(3,"div"),S.Sb(4,"app-icons",49),S.Wb(),S.Xb(5,"div",50),S.Xb(6,"span"),S.Xc(7," There are no leads who match the filter criteria "),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb())}var rr,cr=function(){return[10,20,30,50,100,200]},sr=((rr=function(n){o(i,n);var t=r(i);function i(e,n,a,o,l,r,c,s,u,b,p,f,h,g,m,v,C,z,y){var I;return d(this,i),(I=t.call(this)).router=e,I._location=n,I.clipboard=a,I._urlService=o,I.message=l,I._leadsService=r,I._modalService=c,I._drawerService=s,I._campaignService=u,I._followUpService=b,I._patientsService=p,I._leadsEventLogger=f,I._insuranceService=h,I._enrolmentService=g,I.translationService=m,I._dataSharingService=v,I.followUpModalService=C,I._notificationsService=z,I._letterService=y,I.searchKey="",I.checked=!1,I.order="ASC",I.leads=[],I.pageIndex=1,I.dataSourceLength=0,I.indeterminate=!1,I.loading=!0,I.languages=[],I.isReportEnabled=!1,I.pageSize=50,I.secondaryActionText="Reset",I.primaryActionText="Start Enrollment",I.context=Bo.a.LEAD,I.firstLoad=!0,I.refresh=new S.n,I._routeHelperService.getSearch().pipe(Object(yo.a)(function(e){return!I.firstLoad&&null!==e}),Object(ce.a)(I.unsubscribed)).subscribe(function(e){return I.applyFilter(e)}),I._routeHelperService.isPrimaryActionTriggered().pipe(Object(yo.a)(function(e){return!!e}),Object(ce.a)(I.unsubscribed)).subscribe(function(){return I.router.navigate(["leads/bulk-upload"])}),I._routeHelperService.isSecondaryActionTriggered().pipe(Object(yo.a)(function(e){return!!e}),Object(ce.a)(I.unsubscribed)).subscribe(function(){return I.runQualification()}),I._routeHelperService.setSidebarCollapsed(!1),I.activatedRoute.params.subscribe(function(){I.searchKey=void 0}),I}return a(i,[{key:"type",set:function(e){this.selectedType=e,this.initStatus(e)}},{key:"ngOnInit",value:function(){var e=this;this.initData(),this.initConfig(),this.initTranslation(),this._dataSharingService.onSubTenantChange().pipe(Object(ce.a)(this.unsubscribed)).subscribe(function(n){e.onSubTenantChange(n)})}},{key:"initData",value:function(){this.leads=e(new Array),this.setOfCheckedId=new Set,this.totalCount=0,this.totalLeadsSelected=0,this.showDefaultText=!0,this.refreshCheckedStatus()}},{key:"initStatus",value:function(e){e&&(this.selectedType=e,this.statuses="ALL"==e?Ae.e.NOT_ELIGIBLE+","+Ae.e.NEW+","+Ae.e.LOST+","+Ae.e.FLAGGED_FOR_ELIGIBILITY_RECHECK+","+Ae.e.CONVERTED+","+Ae.e.ACTIVE+","+Ae.e.ELIGIBLE:Ae.e[e],"ELIGIBLE"==e?this.primaryActionText="Start Enrollment":"ACTIVE"==e&&(this.primaryActionText="Add to campaign"),this.tab=e,this.filterRequest=new Fo,this.filterRequest.status=this.statuses,this._urlService.setParameter(this.filterRequest))}},{key:"initConfig",value:function(){var e=this;this._dataSharingService.tenantSettings.subscribe(function(n){n&&(e.tenantConfig=n,e.isReportEnabled=n.reportConfig.leadsReportEnabled)})}},{key:"initTranslation",value:function(){var e,n=this,t=new Array("LEADS.CLIPBOARD_MESSAGE","LEADS.DELETE_LEAD_TITLE","LEADS.DELETE_LEAD_DESC","COMMON.SOMETHING_WENT_WRONG","MENU.LEADS","LEADS.NO_ACTIVE_LEADS","LEADS.NO_LEADS");(e=this.translationService).getMultiple.apply(e,t).subscribe(function(e){return n.translatedStrings=e})}},{key:"copyToClipboard",value:function(){var e=localStorage.getItem("loggedInTenant"),n=localStorage.getItem("loggedInUser"),t=C.g.webFormRootURL+"register/"+btoa(e)+"?referredBy="+btoa(n);this.clipboard.copy(t),this._leadsEventLogger.leadsLinkFetchEvent(t),this.message.create("success",this.translatedStrings.get("LEADS.CLIPBOARD_MESSAGE"))}},{key:"getOffset",value:function(e){return 1!==e?(e-1)*this.pageSize:0}},{key:"applyFilter",value:function(e){this.searchKey=e,this.getData()}},{key:"onSubTenantChange",value:function(e){this.requestTenantIds=e,this.getData(1)}},{key:"showStatusDescription",value:function(e){e.stopPropagation(),this._modalService.create({nzContent:bl,nzWidth:500,nzTitle:"Lead Status Description",nzFooter:null,nzKeyboard:!0})}},{key:"getLeads",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this._leadsService.getLeads("0","0",["NEW","ACTIVE"],this.getOffset(n)).subscribe(function(n){n?(e.leads=n.result,e.dataSourceLength=n.totalCount):(e.leads=[],e.dataSourceLength=0,e._notificationsService.info(e.translatedStrings.get("MENU.LEADS"),e.translatedStrings.get("LEADS.NO_ACTIVE_LEADS"))),e.loading=!1},function(){return e.loading=!1})}},{key:"showDetails",value:function(e){this._leadsEventLogger.leadsActionEvent(e,"view"),this.router.navigate(["leads/details",e])}},{key:"gotoCreateLead",value:function(){this._leadsEventLogger.leadsActionEvent("","create"),this.router.navigate(["leads/create"])}},{key:"gotoEditLead",value:function(e){this._leadsEventLogger.leadsActionEvent(e,"edit"),this.router.navigate(["leads/edit/",e])}},{key:"gotoFollowUps",value:function(){this.router.navigate(["followups"])}},{key:"goBack",value:function(){this._location.back()}},{key:"deleteLead",value:function(e){var n=this;this._modalService.create({nzTitle:this.translatedStrings.get("LEADS.DELETE_LEAD_TITLE"),nzContent:this.translatedStrings.get("LEADS.DELETE_LEAD_DESC"),nzClosable:!0,nzOnCancel:function(){},nzOnOk:function(){n._leadsService.deleteSpecificLead(e).subscribe(function(t){n._leadsEventLogger.leadsActionEvent(e,"delete"),200===t.status?n.getData():n._notificationsService.error(n.translatedStrings.get("MENU.LEADS"),n.translatedStrings.get("COMMON.SOMETHING_WENT_WRONG"))})}})}},{key:"refreshPage",value:function(){this.ngOnInit()}},{key:"initCall",value:function(e){var n=this;this._leadsEventLogger.leadsActionEvent(e,"audioCall"),this._leadsService.getSpecificLeadForUser(e).subscribe(function(t){n._dataSharingService.setVoiceCallInitiated({patient:{id:e,mobile:t.personInfo.phoneNumber,countryCode:t.personInfo.countryCode,firstName:t.personInfo.firstName,lastName:t.personInfo.lastName},enableRecording:!1,context:Bo.a.LEAD})})}},{key:"downloadReports",value:function(){this._modalService.create({nzContent:Cl,nzClosable:!0,nzMaskClosable:!0,nzMask:!0,nzOkText:null,nzCancelText:null,nzFooter:null})}},{key:"getNextFollowupDate",value:function(e){return e?e.map(function(e){return e.scheduledOn}).sort().reverse().shift():"-"}},{key:"initEnrolment",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.c.LETTER,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.followUpModalService.initEnrolment(Array.from(this.setOfCheckedId),n,t,i,a).afterClose.subscribe(function(n){n&&e.initBulkEnrolment(n.templateId)})}},{key:"updateCheckedSet",value:function(e,n){n?this.setOfCheckedId.add(e):this.setOfCheckedId.delete(e),this.totalLeadsSelected=this.setOfCheckedId.size}},{key:"refreshCheckedStatus",value:function(){this.checked=this.setOfCheckedId.size>0&&this.leads.length==this.setOfCheckedId.size,this.indeterminate=!this.checked&&this.setOfCheckedId.size>0}},{key:"onItemChecked",value:function(e,n){this.updateCheckedSet(e,n),this.refreshCheckedStatus()}},{key:"onAllChecked",value:function(e){var n=this;this.leads.forEach(function(t){var i=t.leadId;return n.updateCheckedSet(i,e)}),this.refreshCheckedStatus()}},{key:"reset",value:function(e){this.onAllChecked(!1)}},{key:"primaryButtonClick",value:function(e){switch(this.tab){case"ELIGIBLE":this.startBulkEnrolment(e);break;case"ACTIVE":this.pushLeadToCampaign(e)}}},{key:"pushLeadToCampaign",value:function(e){var n=this;this.primaryButttonloading=!0;var t={userIds:Array.from(this.setOfCheckedId),forceUpdate:!0};this._campaignService.addLeadToCampaign(t).subscribe(function(e){n.primaryButttonloading=!1})}},{key:"startBulkEnrolment",value:function(e){var n=this;this._letterService.fetchAnnouncementLetterTemplate("en").subscribe(function(e){var t,i;if(0!=(null==e?void 0:e.length)){var a={type:Ae.c.LETTER,leadIds:Array.from(n.setOfCheckedId),templateId:null===(t=e[0])||void 0===t?void 0:t.id};n.initBulkEnrolment(null===(i=e[0])||void 0===i?void 0:i.id),n._followUpService.createBulkFollowUp(a).subscribe(function(e){n.refreshPage(),n.getData(),n._notificationsService.success("Enrollment","We will be sending Announcement letters shortly.")})}else n._notificationsService.error("Letter Template","No announcement letter template was found")})}},{key:"showTimeline",value:function(e,n){e.stopPropagation(),this._drawerService.create({nzContent:Ca,nzContentParams:{leadId:n.leadId,loadFullLead:!0},nzWidth:500,nzTitle:"Follow-Up History | "+n.patientInfo.firstName+" "+n.patientInfo.lastName})}},{key:"onQueryParamsChange",value:function(e){var n=e.pageIndex,t=e.pageSize;this.pageSize=t,this.getData(n,t)}},{key:"setSortKey",value:function(e){this.order="ascend"===e?"ASC":"DESC",this.getData()}},{key:"getData",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize;this.loading=!0,this.filterRequest||(this.filterRequest=new Fo),this.pageIndex=n,this.filterRequest.offset=(n-1)*t,this.filterRequest.limit=t,this.filterRequest.order=this.order,this.filterRequest.query=this.searchKey,this.filterRequest.requestTenantIds=this.requestTenantIds,this._leadsService.searchLeads(this.filterRequest).subscribe(function(n){n?(e.leads=n.result,e.loading=!1,e.showDefaultText=!1,e.setOfCheckedId=new Set,e.totalLeadsSelected=0,e.totalCount=n.totalCount,e.refreshCheckedStatus()):(e.leads=[],e.totalCount=0,e._notificationsService.info(e.translatedStrings.get("MENU.LEADS"),e.translatedStrings.get("LEADS.NO_ACTIVE_LEADS"))),e.loading=!1,e.firstLoad=!1},function(){return e.loading=!1})}},{key:"showFiltersModal",value:function(){var e=this,n=this._urlService.getParameterValue("status");this._modalService.create({nzContent:ul,nzClosable:!0,nzMaskClosable:!0,nzFooter:null,nzWidth:700,nzTitle:"Leads Filter",nzBodyStyle:{paddingTop:"0px"},nzComponentParams:{status:{statuses:n,tab:this.tab},filterRequest:this.filterRequest},nzWrapClassName:"vertical-center-modal"}).afterClose.subscribe(function(n){n&&(e.filterRequest=n,e.selectedType=n.allSelected?"ALL":"CUSTOM",e.getData())})}},{key:"initBulkEnrolment",value:function(e){var n=this;this._enrolmentService.initBulkEnrolment(Array.from(this.setOfCheckedId),e).subscribe(function(e){n.getData()})}},{key:"runInsuranceTiering",value:function(e){var n=this;this._insuranceService.applyInsuranceTierRulesToLead(e).subscribe(function(){n._notificationsService.success("Leads","Insurance tiering completed")})}},{key:"runQualification",value:function(){var e,n=this,t={userIds:Array.from(this.setOfCheckedId)};this.qualificationState||(this.qualificationState={}),this.qualificationState.running=!0,this.qualificationState.numberOfUsers=null===(e=null==t?void 0:t.userIds)||void 0===e?void 0:e.length,this._leadsService.qualifyLeads(t).subscribe(function(){return n.refresh.emit()}),this._notificationsService.success("Leads","Qualification initiated, please wait for a few minutes...")}},{key:"queryCCDA",value:function(e,n){var t=this;this._patientsService.queryCCDA(e,n).subscribe(function(){t._notificationsService.success("Clinical Summary","Information queried successfully")},function(e){var n;t._notificationsService.error("Clinical Summary",(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message)||"Error querying information, please try again later")})}}]),i}(f.a)).\u0275fac=function(e){return new(e||rr)(S.Rb(b.g),S.Rb(s.l),S.Rb(yl),S.Rb(Uo),S.Rb(Il.e),S.Rb(g.a),S.Rb(N.f),S.Rb(Xl.d),S.Rb(Ti.a),S.Rb(Re),S.Rb(Vo.a),S.Rb(y.a),S.Rb(jo.a),S.Rb(wn),S.Rb(z.a),S.Rb(be.a),S.Rb(Cn),S.Rb(I.b),S.Rb(xe.a))},rr.\u0275cmp=S.Lb({type:rr,selectors:[["app-leads"]],inputs:{type:"type",qualificationState:"qualificationState"},outputs:{refresh:"refresh"},features:[S.Ab],decls:46,vars:27,consts:[["nz-row","","class","container",4,"ngIf"],["qualificationMessage",""],[1,"lead-filter-container"],[1,"filter-component"],["nz-button","","nzType","primary",3,"click"],["size","12px","color","#ffffff","altColor","#ffffff","name","filter"],[1,"container"],[3,"nzLoading","nzData","nzFrontPagination","nzPageIndex","nzTotal","nzPageSizeOptions","nzShowSizeChanger","nzPageSize","nzShowPagination","nzShowTotal","nzNoResult","nzQueryParams"],["leadsTable",""],[4,"isFeaturePermitted"],["nzWidth","60px"],[4,"isAccessAcrossTenantEnabled"],[3,"nzSortFn","nzSortOrderChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],["noFollowUps",""],["noFollowUpDate",""],["totalPatientsCount",""],["noResultTemplate",""],["nz-row","",1,"container"],["nz-col","","nzOffset","6","nzSpan","18"],["nzType","warning",3,"nzMessage"],["name","reload","size","14px",3,"click"],["nzWidth","30px",3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],[3,"click"],[2,"margin","10px",3,"nzCount"],["isToolTipEnabled","true",3,"leadStatus"],["class","push-to-genesys","nz-tooltip","","nzTooltipTitle","Contact pushed to Genesys",4,"ngIf"],[3,"leadId","context","phoneNumbers"],[3,"click",4,"ngIf"],["name","delete",3,"click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","26px"],["actionsSubMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[3,"nzChecked","nzCheckedChange"],["nz-tooltip","","nzTooltipTitle","Contact pushed to Genesys",1,"push-to-genesys"],["nz-icon","","nzType","cloud-upload"],[3,"nzColor",4,"ngIf","ngIfElse"],[3,"nzColor"],["nz-icon","",3,"nzType"],[4,"ngIf","ngIfElse"],["name","edit",3,"click"],["userType","LEAD",3,"primaryActionText","primaryButtonLoading","secondaryActionText","totalPatientsSelected","totalCount","onPrimaryActionButtonClicked","onSecondaryActionButtonClicked"],["nz-typography","",1,"totalCount"],["nz-row","","nzJustify","center","nzAlign","middle",1,"no-result"],["nz-col",""],["nz-col","","nzJustify","center","nzAlign","middle"],["name","icBlank","size","80"],[1,"no-results-text"]],template:function(e,n){if(1&e&&(S.Vc(0,Ol,3,1,"div",0),S.Vc(1,xl,4,2,"ng-template",null,1,S.Wc),S.Xb(3,"div",2),S.Xb(4,"span",3),S.Xb(5,"button",4),S.ec("click",function(){return n.showFiltersModal()}),S.Sb(6,"app-icons",5),S.Xc(7," Filters "),S.Wb(),S.Wb(),S.Wb(),S.Xb(8,"div",6),S.Xb(9,"nz-table",7,8),S.ec("nzQueryParams",function(e){return n.onQueryParamsChange(e)}),S.Xb(11,"thead"),S.Xb(12,"tr"),S.Vc(13,Al,2,3,"ng-container",9),S.Xb(14,"th"),S.Xc(15),S.jc(16,"translate"),S.Wb(),S.Sb(17,"th",10),S.Sb(18,"th",10),S.Sb(19,"th",10),S.Xb(20,"th"),S.Xc(21,"MR Number"),S.Wb(),S.Xb(22,"th"),S.Xc(23,"Date of Birth"),S.Wb(),S.Xb(24,"th"),S.Xc(25,"Language"),S.Wb(),S.Vc(26,Pl,2,0,"th",11),S.Xb(27,"th",12),S.ec("nzSortOrderChange",function(e){return n.setSortKey(e)}),S.Xc(28,"Added On"),S.Wb(),S.Vc(29,Rl,2,0,"th",13),S.Vc(30,Ul,2,0,"th",13),S.Xb(31,"th"),S.Xc(32),S.jc(33,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(34,"tbody"),S.Vc(35,$l,47,29,"tr",14),S.Wb(),S.Wb(),S.Wb(),S.Vc(36,Kl,2,1,"ng-template",null,15,S.Wc),S.Vc(38,Ql,2,0,"ng-template",null,16,S.Wc),S.Vc(40,nr,2,2,"ng-container",13),S.Vc(41,tr,2,5,"ng-container",13),S.Vc(42,or,7,10,"ng-template",null,17,S.Wc),S.Vc(44,lr,8,0,"ng-template",null,18,S.Wc)),2&e){var t=S.Ic(10),i=S.Ic(43),a=S.Ic(45);S.rc("ngIf",null==n.qualificationState?null:n.qualificationState.running),S.Db(9),S.rc("nzLoading",n.loading)("nzData",n.leads)("nzFrontPagination",!1)("nzPageIndex",n.pageIndex)("nzTotal",n.totalCount)("nzPageSizeOptions",S.xc(25,cr))("nzShowSizeChanger",!0)("nzPageSize",n.pageSize)("nzShowPagination",!0)("nzShowTotal",i)("nzNoResult",a),S.Db(4),S.rc("isFeaturePermitted",S.xc(26,Yl)),S.Db(2),S.Yc(S.kc(16,21,"COMMON.NAME")),S.Db(12),S.rc("nzSortFn",!0),S.Db(2),S.rc("ngIf","ACTIVE"==n.selectedType),S.Db(1),S.rc("ngIf","ACTIVE"==n.selectedType),S.Db(2),S.Yc(S.kc(33,23,"TABLEHEADER.ACTIONS")),S.Db(3),S.rc("ngForOf",null==t?null:t.data),S.Db(5),S.rc("ngIf",n.totalLeadsSelected>0&&"ACTIVE"===n.selectedType),S.Db(1),S.rc("ngIf",n.totalLeadsSelected>0&&"ELIGIBLE"===n.selectedType)}},directives:[s.q,P.a,R.a,U.a,Fe.a,Xo.f,Xo.n,Xo.o,Ia.a,Xo.e,Xo.l,Dl.a,Xo.k,Xo.i,s.p,k.c,k.a,Sa.a,Xo.m,kl.a,fi.a,Wl.a,Tl.a,Tl.b,Tl.e,El.c,El.e,Xo.j,F.d,V.a,He.a,wl.a,x.a],pipes:[E.a,gi.a,s.e,qo.a,Ll.a,Ml],styles:["nz-alert[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.space-filler[_ngcontent-%COMP%]{flex:1 1 auto}input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px!important}input[_ngcontent-%COMP%]:-moz-placeholder, input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px!important}input[_ngcontent-%COMP%]:-ms-input-placeholder{font-size:14px!important}#menu-button[_ngcontent-%COMP%]{background:transparent;border:none}table[_ngcontent-%COMP%]{width:100%;margin:auto}td[_ngcontent-%COMP%]{color:grey}.lead-data[_ngcontent-%COMP%]{padding:20px 10px;font-size:12px}.lead[_ngcontent-%COMP%]{border-radius:50%;border:2px outset;font-size:10px;width:40px;text-align:center;line-height:4;height:40px;font-weight:800;text-transform:uppercase;background-color:#f0f8ff}.lead-headers[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;color:#7e87a0;font-size:12px;font-weight:bolder}.lead-name[_ngcontent-%COMP%]{color:#000;font-weight:700;text-transform:lowercase;text-transform:capitalize}.lead-email[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-color);text-transform:lowercase}.paginator[_ngcontent-%COMP%]{width:100%;margin:0 auto 2%}.reg-requests[_ngcontent-%COMP%]{margin:0 20px}[_nghost-%COMP%]     .ant-input-affix-wrapper .ant-input-suffix{right:0!important}[_nghost-%COMP%]     .ant-pagination{float:right;margin-bottom:20px}span[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]     .ant-checkbox-wrapper{padding-left:16px;padding-right:8px;border-spacing:0!important}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}.lead-filter-container[_ngcontent-%COMP%]{position:absolute;top:100px;right:0;display:flex;flex-direction:row;margin:10px 15px 15px;align-items:flex-end}.filter-component[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}app-icons[_ngcontent-%COMP%]{vertical-align:middle!important;margin-right:10px}.push-to-genesys[_ngcontent-%COMP%]{font-size:20px;color:var(--primary-color)}.totalCount[_ngcontent-%COMP%]{margin-top:5px}"]}),rr),dr=function(){return["."]},ur=function(){return{tab:"ALL"}};function br(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," All Leads "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,ur))}function pr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",10),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var fr=function(){return{tab:"NEW"}};function hr(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," New "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,fr))}function gr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",11),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var mr=function(){return{tab:"ELIGIBLE"}};function vr(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," Eligible "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,mr))}function Cr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",12),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var zr=function(){return{tab:"ACTIVE"}};function yr(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," Active "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,zr))}function Sr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",13),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var Ir=function(){return{tab:"CONVERTED"}};function Xr(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," Converted "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,Ir))}function Dr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",14),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var kr=function(){return{tab:"NOT_ELIGIBLE"}};function Wr(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," Not Eligible "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,kr))}function Tr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",15),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var Er=function(){return{tab:"LOST"}};function wr(e,n){1&e&&(S.Xb(0,"a",9),S.Xc(1," Lost "),S.Wb()),2&e&&S.rc("routerLink",S.xc(2,dr))("queryParams",S.xc(3,Er))}function Lr(e,n){if(1&e){var t=S.Yb();S.Xb(0,"app-leads",16),S.ec("refresh",function(){return S.Lc(t),S.ic().getStaffDetails()}),S.Wb()}if(2&e){var i=S.ic();S.rc("qualificationState",i.qualificationState)}}var Mr,Or,_r,Nr=((Mr=function(e){o(t,e);var n=r(t);function t(e,i,a){var o;return d(this,t),(o=n.call(this))._activatedRoute=e,o._staffService=i,o._router=a,o}return a(t,[{key:"ngOnInit",value:function(){var e=this;this._activatedRoute.queryParams.pipe(Object(ce.a)(this.unsubscribed)).subscribe(function(n){e.tab=n.tab||"ACTIVE"}),this.getStaffDetails()}},{key:"getStaffDetails",value:function(){var e=this,n=localStorage.getItem("loggedInUser");this._staffService.getStaffByUserId(n).subscribe(function(n){var t,i,a,o,l,r;(null===(t=e.qualificationState)||void 0===t?void 0:t.running)&&!(null===(a=null===(i=null==n?void 0:n.clinicianState)||void 0===i?void 0:i.qualificationState)||void 0===a?void 0:a.running)&&e._router.navigate(["leads"],{queryParams:{tab:"ELIGIBLE"}}),e.qualificationState=null===(o=null==n?void 0:n.clinicianState)||void 0===o?void 0:o.qualificationState,(null===(l=e.qualificationState)||void 0===l?void 0:l.dateTime)&&30<=Object(Po.a)(Object(Ro.a)((null===(r=e.qualificationState)||void 0===r?void 0:r.dateTime)+"Z"),new Date)&&(e.qualificationState.running=!1)})}},{key:"clear",value:function(){this._routeHelperService.resetSearch(!0),this._routeHelperService.setSearch(null)}}]),t}(f.a)).\u0275fac=function(e){return new(e||Mr)(S.Rb(b.a),S.Rb(kn.a),S.Rb(b.g))},Mr.\u0275cmp=S.Lb({type:Mr,selectors:[["app-lead-tab"]],features:[S.Ab],decls:22,vars:7,consts:[["nzLinkRouter","",3,"nzSelectedIndexChange"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],["type","ALL",3,"qualificationState","refresh",4,"ngIf"],["type","NEW",3,"qualificationState","refresh",4,"ngIf"],["type","ELIGIBLE",3,"qualificationState","refresh",4,"ngIf"],["type","ACTIVE",3,"qualificationState","refresh",4,"ngIf"],["type","CONVERTED",3,"qualificationState","refresh",4,"ngIf"],["type","NOT_ELIGIBLE",3,"qualificationState","refresh",4,"ngIf"],["type","LOST",3,"qualificationState","refresh",4,"ngIf"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],["type","ALL",3,"qualificationState","refresh"],["type","NEW",3,"qualificationState","refresh"],["type","ELIGIBLE",3,"qualificationState","refresh"],["type","ACTIVE",3,"qualificationState","refresh"],["type","CONVERTED",3,"qualificationState","refresh"],["type","NOT_ELIGIBLE",3,"qualificationState","refresh"],["type","LOST",3,"qualificationState","refresh"]],template:function(e,n){1&e&&(S.Xb(0,"nz-tabset",0),S.ec("nzSelectedIndexChange",function(){return n.clear()}),S.Xb(1,"nz-tab"),S.Vc(2,br,2,4,"a",1),S.Vc(3,pr,1,1,"app-leads",2),S.Wb(),S.Xb(4,"nz-tab"),S.Vc(5,hr,2,4,"a",1),S.Vc(6,gr,1,1,"app-leads",3),S.Wb(),S.Xb(7,"nz-tab"),S.Vc(8,vr,2,4,"a",1),S.Vc(9,Cr,1,1,"app-leads",4),S.Wb(),S.Xb(10,"nz-tab"),S.Vc(11,yr,2,4,"a",1),S.Vc(12,Sr,1,1,"app-leads",5),S.Wb(),S.Xb(13,"nz-tab"),S.Vc(14,Xr,2,4,"a",1),S.Vc(15,Dr,1,1,"app-leads",6),S.Wb(),S.Xb(16,"nz-tab"),S.Vc(17,Wr,2,4,"a",1),S.Vc(18,Tr,1,1,"app-leads",7),S.Wb(),S.Xb(19,"nz-tab"),S.Vc(20,wr,2,4,"a",1),S.Vc(21,Lr,1,1,"app-leads",8),S.Wb(),S.Wb()),2&e&&(S.Db(3),S.rc("ngIf","ALL"===n.tab),S.Db(3),S.rc("ngIf","NEW"===n.tab),S.Db(3),S.rc("ngIf","ELIGIBLE"===n.tab),S.Db(3),S.rc("ngIf","ACTIVE"===n.tab),S.Db(3),S.rc("ngIf","CONVERTED"===n.tab),S.Db(3),S.rc("ngIf","NOT_ELIGIBLE"===n.tab),S.Db(3),S.rc("ngIf","LOST"===n.tab))},directives:[qi.d,qi.a,qi.c,s.q,qi.b,b.j,sr],styles:["a[_ngcontent-%COMP%]{color:var(--black)}"]}),Mr),xr=function e(){d(this,e),this.createLetterFollowUp=!0,this.createDummyAudioCallFollowUp=!0,this.hideAudioCallFollowUps=!0},Ar=[{path:"",component:Nr,pathMatch:"full",data:vo.Listing,canActivate:[p.a,mo.a]},{path:"details/:id",component:ho,data:{privileges:[go.a.VIEW_LEAD],showTenantToggle:!1},canActivate:[p.a,mo.a]},{path:"create",component:M,data:{privileges:[go.a.ADD_LEAD]},canActivate:[p.a,mo.a]},{path:"bulk-upload",component:Ao,data:vo.BulkUpload,canActivate:[p.a,mo.a]},{path:"lead-contact-bulk-upload",component:(Or=function(e){o(t,e);var n=r(t);function t(e,i,a){var o;return d(this,t),(o=n.call(this))._http=e,o._genesysService=i,o._notificationsService=a,o.createLetterFollowUp=!0,o.createDummyAudioCallFollowUp=!0,o.request=new xr,o.handleUpload=function(e){var n=new Pe.g({bypass:"yes"});o._http.post(o.uploadURL,e.file,{headers:n,observe:"response",responseType:"text"}).subscribe(function(e){if(200==e.status){var n=e.body;o.request.mrnColumn=o.mrnColumn,o.request.attemptCountColumn=o.attemptCountColumn,o.request.totalColumns=o.totalColumns,o.request.genesysContactIdColumn=o.genesysContactIdColumn,o.request.tenantId=o.requestTenantId,o._genesysService.bulkUploadGenesysContact(n,o.request).subscribe(function(){o._notificationsService.success("Lead Contacts","Contactlist mapping is in progress...")})}else o._notificationsService.error("Bulk Upload","Something went wrong, please try again!")})},o.uploadURL=C.g.url+"/v2/media/upload/"+Math.random().toString(10).substring(7)+".xlsx",o._routeHelperService.isPrimaryActionTriggered().pipe(Object(yo.a)(function(e){return!!e}),Object(ce.a)(o.unsubscribed)).subscribe(function(){return o.downloadTemplate()}),o}return a(t,[{key:"onSubTenantChange",value:function(e){"object"==typeof e&&""!=e&&null!=e&&null!=e&&(this.requestTenantId=e)}},{key:"downloadTemplate",value:function(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=bulk-upload-appointments-template.xlsx","_blank")}}]),t}(f.a),Or.\u0275fac=function(e){return new(e||Or)(S.Rb(Pe.c),S.Rb(Ti.a),S.Rb(I.b))},Or.\u0275cmp=S.Lb({type:Or,selectors:[["app-bulk-upload"]],features:[S.Ab],decls:16,vars:9,consts:[[1,"container"],["title","Genesys Contactlist Migration","defaultTitle","Genesys Contactlist Migration",3,"isSearchEnabled","isSecondaryActionEnabled","isActionEnabled"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","6","nzOffset","18"],["mode","SINGLE",3,"onSubTenantSelected"],["nz-row","","nzGutter","16",2,"margin-top","20px"],["nz-col","","nzSpan","24"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList"],["nz-button","","nzType","primary","nzSize","large"]],template:function(e,n){1&e&&(S.Xb(0,"div",0),S.Sb(1,"app-header",1),S.Xb(2,"nz-card"),S.Xb(3,"div",2),S.Xb(4,"div",3),S.Xb(5,"sub-tenant-select",4),S.ec("onSubTenantSelected",function(e){return n.onSubTenantChange(e)}),S.Wb(),S.Wb(),S.Wb(),S.Xb(6,"div",5),S.Xb(7,"div",6),S.Xb(8,"nz-upload",7),S.Xb(9,"button",8),S.Xc(10," BROWSE / DRAG "),S.Wb(),S.Xb(11,"p"),S.Sb(12,"br"),S.Xc(13),S.jc(14,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Sb(15,"br"),S.Wb(),S.Wb()),2&e&&(S.Db(1),S.rc("isSearchEnabled",!1)("isSecondaryActionEnabled",!1)("isActionEnabled",!1),S.Db(7),S.rc("nzCustomRequest",n.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1),S.Db(5),S.Zc(" ",S.kc(14,7,"COMMON.DRAG_AND_UPLOAD")," "))},directives:[D.a,qe.a,k.c,k.a,So.a,Io.a,P.a,R.a,U.a],pipes:[E.a],styles:[""]}),Or),canActivate:[p.a,mo.a]},{path:"edit/:id",component:M,data:{privileges:[go.a.VIEW_LEAD,go.a.EDIT_LEAD],showTenantToggle:!1},canActivate:[p.a,mo.a]},{path:"add-followup/:id",component:H,data:{privileges:[go.a.ADD_LEAD_FOLLOW_UPS,go.a.VIEW_LEAD_FOLLOW_UPS,go.a.CONVERT_LEAD]},canActivate:[p.a,mo.a]},{path:"followups",component:J,data:vo.FollowUp,canActivate:[p.a,mo.a]}],Pr=((_r=function e(){d(this,e)}).\u0275mod=S.Pb({type:_r}),_r.\u0275inj=S.Ob({factory:function(e){return new(e||_r)},imports:[[b.k.forChild(Ar)],b.k]}),_r),Rr=l("SHZf"),Ur=l("UFn0"),Vr=l("KZX/");l("mrSG"),l("/KA4"),l("XNiG"),l("JMSK");var Fr,Br,jr=((Fr=function e(){d(this,e)}).\u0275mod=S.Pb({type:Fr}),Fr.\u0275inj=S.Ob({factory:function(e){return new(e||Fr)},imports:[[s.c]]}),Fr),qr=l("rbUg"),Gr=l("AMsP"),Hr=((Br=function e(n){d(this,e),this.translationService=n,n.setLanguage()}).\u0275mod=S.Pb({type:Br}),Br.\u0275inj=S.Ob({factory:function(e){return new(e||Br)(S.bc(z.a))},providers:[],imports:[[Vr.a,Ur.a,s.c,Pr,u.o,u.B,Rr.a.forRoot(),Sl,c.a,ie.b,jr,qr.a,Gr.PatientModule]]}),Br)}}])}();