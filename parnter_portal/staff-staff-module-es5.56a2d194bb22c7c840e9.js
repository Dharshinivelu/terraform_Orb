!function(){function n(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var t=[],i=!0,a=!1,o=void 0;try{for(var l,r=n[Symbol.iterator]();!(i=(l=r.next()).done)&&(t.push(l.value),!e||t.length!==e);i=!0);}catch(s){a=!0,o=s}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return t}(n,e)||t(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n){return function(n){if(Array.isArray(n))return i(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,e){if(n){if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(n,e):void 0}}function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function a(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function l(n,e,t){return e&&o(n.prototype,e),t&&o(n,t),n}function r(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&s(n,e)}function s(n,e){return(s=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function c(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}();return function(){var t,i=f(n);if(e){var a=f(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return u(this,t)}}function u(n,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{faT0:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,e){(0,o.default)(2,arguments);var t=(0,i.default)(e);return(0,a.default)(n,-t)};var i=l(t("LP0B")),a=l(t("AVZL")),o=l(t("YGjY"));function l(n){return n&&n.__esModule?n:{default:n}}n.exports=e.default},h8ax:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,e){(0,l.default)(2,arguments);var t=(0,i.default)(n),r=(0,i.default)(e),s=(0,o.default)(t,r),c=Math.abs((0,a.default)(t,r));t.setFullYear("1584"),r.setFullYear("1584");var u=(0,o.default)(t,r)===-s,f=s*(c-u);return 0===f?0:f};var i=r(t("2Oix")),a=r(t("MruM")),o=r(t("zmLq")),l=r(t("YGjY"));function r(n){return n&&n.__esModule?n:{default:n}}n.exports=e.default},kanD:function(t,i,o){"use strict";o.r(i),o.d(i,"StaffModule",function(){return Ls});var s=o("7pIB"),u=o("rbUg"),f=o("ofXK"),d=o("WoUL"),b=o("KZX/"),p=o("UFn0"),g=o("3Pt+"),v=o("SHZf"),m=o("geco"),h=o("igu/"),S=o("9ig3"),z=o("jKzE"),y=o("Jlwr"),X=o("qQcL"),I=o("x6g7"),T=o("fXoL"),D=o("tyNb"),W=o("Wfee"),P=o("jPNr"),C=o("0lU3"),A=o("xB20"),_=o("rMZv"),O=o("eHCX"),M=o("ncdi"),N=o("B+r4"),R=o("wjar"),E=o("5vDB"),k=o("fhRi");function w(n,e){1&n&&(T.Vb(0),T.Sb(1,"nz-alert",2),T.Ub())}function x(n,e){1&n&&(T.Vb(0),T.Xc(1," The portal was being "),T.Xb(2,"strong",17),T.Xc(3,"actively"),T.Wb(),T.Xc(4," used. "),T.Ub())}function V(n,e){1&n&&(T.Vb(0),T.Xc(1," The portal was either in background or closed and "),T.Xb(2,"strong",18),T.Xc(3,"not being actively"),T.Wb(),T.Xc(4," used. "),T.Ub())}function L(n,e){if(1&n){var t=T.Yb();T.Xb(0,"label",25),T.ec("click",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic(3).getAlertInfo(null==n||null==n.context?null:n.context.value)}),T.Xc(1," View Alert Details "),T.Wb()}}function F(n,e){if(1&n&&(T.Xb(0,"div",26),T.Xb(1,"div",27),T.Xc(2),T.Wb(),T.Wb()),2&n){var t=T.ic(3).$implicit;T.Db(2),T.Zc(" ",null==t||null==t.context||null==t.context.value||null==t.context.value.alert?null:t.context.value.alert.message," ")}}function U(n,e){if(1&n&&(T.Xc(0," An alert was closed by the staff. "),T.Sb(1,"br"),T.Xc(2," Remark: "),T.Xb(3,"strong"),T.Xc(4),T.Wb(),T.Sb(5,"br"),T.Sb(6,"br"),T.Vc(7,L,2,0,"label",23),T.Vc(8,F,3,1,"div",24)),2&n){var t=T.ic(2).$implicit;T.Db(4),T.Yc((null==t||null==t.context||null==t.context.value?null:t.context.value.remark)||"N/A"),T.Db(3),T.rc("ngIf",!(null!=t&&null!=t.context&&null!=t.context.value&&t.context.value.alert)),T.Db(1),T.rc("ngIf",null==t||null==t.context||null==t.context.value?null:t.context.value.alert)}}function j(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"br"),T.Sb(2,"br"),T.Xb(3,"div",19),T.Xb(4,"div",20),T.Sb(5,"nz-alert",21),T.Wb(),T.Wb(),T.Vc(6,U,9,3,"ng-template",null,22,T.Wc),T.Ub()),2&n){var t=T.Ic(7);T.Db(5),T.rc("nzMessage",t)}}function G(n,e){1&n&&T.Xc(0," Alerts were closed in bulk by the staff. ")}function Y(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"br"),T.Sb(2,"br"),T.Xb(3,"div",19),T.Xb(4,"div",20),T.Sb(5,"nz-alert",28),T.Wb(),T.Wb(),T.Vc(6,G,1,0,"ng-template",null,22,T.Wc),T.Ub()),2&n){var t=T.Ic(7);T.Db(5),T.rc("nzMessage",t)}}function H(n,e){if(1&n){var t=T.Yb();T.Xb(0,"label",25),T.ec("click",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic(3).getPatientProfileInfo(null==n||null==n.context?null:n.context.value)}),T.Xc(1," View Patient Details "),T.Wb()}}function B(n,e){if(1&n&&(T.Xb(0,"div",26),T.Xb(1,"div",31),T.Xb(2,"strong"),T.Xc(3,"Patient Name: "),T.Wb(),T.Xc(4),T.jc(5,"titlecase"),T.Wb(),T.Xb(6,"div",31),T.Xb(7,"strong"),T.Xc(8,"Date Of Birth: "),T.Wb(),T.Xc(9),T.jc(10,"date"),T.Wb(),T.Wb()),2&n){var t=T.ic(3).$implicit;T.Db(4),T.Zc(" ",T.kc(5,2,null==t||null==t.context||null==t.context.value||null==t.context.value.patient?null:t.context.value.patient.fullName)," "),T.Db(5),T.Zc(" ",T.lc(10,4,null==t||null==t.context||null==t.context.value||null==t.context.value.patient?null:t.context.value.patient.dateOfBirth,"mediumDate")," ")}}function q(n,e){if(1&n&&(T.Xb(0,"strong"),T.Xc(1,"The global timer was started"),T.Wb(),T.Sb(2,"br"),T.Sb(3,"br"),T.Vc(4,H,2,0,"label",23),T.Vc(5,B,11,7,"div",24)),2&n){var t=T.ic(2).$implicit;T.Db(4),T.rc("ngIf",!(null!=t&&null!=t.context&&null!=t.context.value&&t.context.value.patient)),T.Db(1),T.rc("ngIf",null==t||null==t.context||null==t.context.value?null:t.context.value.patient)}}function Z(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"br"),T.Sb(2,"br"),T.Xb(3,"div",19),T.Xb(4,"div",20),T.Sb(5,"nz-alert",29),T.Wb(),T.Wb(),T.Vc(6,q,6,2,"ng-template",null,30,T.Wc),T.Ub()),2&n){var t=T.Ic(7);T.Db(5),T.rc("nzMessage",t)}}function $(n,e){1&n&&(T.Xb(0,"strong"),T.Xc(1,"Global timer stopped"),T.Wb())}function Q(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"br"),T.Sb(2,"br"),T.Xb(3,"div",19),T.Xb(4,"div",20),T.Sb(5,"nz-alert",29),T.Wb(),T.Wb(),T.Vc(6,$,2,0,"ng-template",null,32,T.Wc),T.Ub()),2&n){var t=T.Ic(7);T.Db(5),T.rc("nzMessage",t)}}function K(n,e){1&n&&(T.Xb(0,"strong"),T.Xc(1,"Global timer was ended abruptly"),T.Wb())}function J(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"br"),T.Sb(2,"br"),T.Xb(3,"div",19),T.Xb(4,"div",20),T.Sb(5,"nz-alert",29),T.Wb(),T.Wb(),T.Vc(6,K,2,0,"ng-template",null,33,T.Wc),T.Ub()),2&n){var t=T.Ic(7);T.Db(5),T.rc("nzMessage",t)}}function nn(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"strong"),T.Xc(2),T.Wb(),T.Xb(3,"strong",17),T.Xc(4,"billable"),T.Wb(),T.Xc(5," minutes "),T.Ub()),2&n){var t=T.ic(3).$implicit,i=T.ic(3);T.Db(2),T.Zc(" ",null==i.serviceCodeMap?null:i.serviceCodeMap.get(null==t||null==t.context||null==t.context.value?null:t.context.value.serviceCode),",\xa0 ")}}function en(n,e){1&n&&(T.Vb(0),T.Xb(1,"strong",36),T.Xc(2,"non-billable"),T.Wb(),T.Xc(3," minutes of Care Management Time "),T.Ub())}function tn(n,e){if(1&n){var t=T.Yb();T.Xb(0,"label",25),T.ec("click",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic(3).getPatientProfileInfo(null==n||null==n.context?null:n.context.value)}),T.Xc(1," View Patient Details "),T.Wb()}}function an(n,e){if(1&n&&(T.Xb(0,"div",26),T.Xb(1,"div",31),T.Xb(2,"strong"),T.Xc(3,"Patient Name: "),T.Wb(),T.Xc(4),T.jc(5,"titlecase"),T.Wb(),T.Xb(6,"div",31),T.Xb(7,"strong"),T.Xc(8,"Date Of Birth: "),T.Wb(),T.Xc(9),T.jc(10,"date"),T.Wb(),T.Wb()),2&n){var t=T.ic(3).$implicit;T.Db(4),T.Zc(" ",T.kc(5,2,null==t||null==t.context||null==t.context.value||null==t.context.value.patient?null:t.context.value.patient.fullName)," "),T.Db(5),T.Zc(" ",T.lc(10,4,null==t||null==t.context||null==t.context.value||null==t.context.value.patient?null:t.context.value.patient.dateOfBirth,"mediumDate")," ")}}function on(n,e){if(1&n&&(T.Xb(0,"strong"),T.Xc(1),T.Wb(),T.Vc(2,nn,6,1,"ng-container",1),T.Vc(3,en,4,0,"ng-container",1),T.Xc(4," were added for "),T.Xb(5,"strong"),T.Xc(6),T.Wb(),T.Xc(7," from "),T.Xb(8,"strong"),T.Xc(9),T.jc(10,"date"),T.Wb(),T.Xc(11," till "),T.Xb(12,"strong"),T.Xc(13),T.jc(14,"date"),T.Wb(),T.Xc(15," through "),T.Xb(16,"strong"),T.Xc(17),T.jc(18,"titlecase"),T.Wb(),T.Xc(19," mode. "),T.Sb(20,"br"),T.Sb(21,"br"),T.Vc(22,tn,2,0,"label",23),T.Vc(23,an,11,7,"div",24),T.Sb(24,"nz-divider"),T.Sb(25,"p",35)),2&n){var t=T.ic(2).$implicit;T.Db(1),T.Zc(" ",((null==t||null==t.context||null==t.context.value?null:t.context.value.endTime)-(null==t||null==t.context||null==t.context.value?null:t.context.value.startTime))/6e4," "),T.Db(1),T.rc("ngIf",null==(null==t||null==t.context?null:t.context.value.billable)||!0===(null==t||null==t.context?null:t.context.value.billable)),T.Db(1),T.rc("ngIf",!1===(null==t||null==t.context?null:t.context.value.billable)),T.Db(3),T.Zc("",null==t||null==t.context||null==t.context.value?null:t.context.value.activity,",\xa0"),T.Db(3),T.Zc(" ",T.lc(10,10,null==t||null==t.context||null==t.context.value?null:t.context.value.startTime,"mediumTime"),",\xa0 "),T.Db(4),T.Yc(T.lc(14,13,null==t||null==t.context||null==t.context.value?null:t.context.value.endTime,"mediumTime")),T.Db(4),T.Yc(T.kc(18,16,null==t||null==t.context||null==t.context.value?null:t.context.value.mode)),T.Db(5),T.rc("ngIf",!(null!=t&&null!=t.context&&null!=t.context.value&&t.context.value.patient)),T.Db(1),T.rc("ngIf",null==t||null==t.context||null==t.context.value?null:t.context.value.patient),T.Db(2),T.rc("innerHTML",null==t||null==t.context||null==t.context.value?null:t.context.value.notes,T.Mc)}}function ln(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"br"),T.Sb(2,"br"),T.Xb(3,"div",19),T.Xb(4,"div",20),T.Sb(5,"nz-alert",29),T.Wb(),T.Wb(),T.Vc(6,on,26,18,"ng-template",null,34,T.Wc),T.Ub()),2&n){var t=T.Ic(7);T.Db(5),T.rc("nzMessage",t)}}function rn(n,e){if(1&n&&(T.Xb(0,"nz-timeline-item"),T.Xc(1," Started at "),T.Xb(2,"strong"),T.Xc(3),T.jc(4,"utcToLocalTime"),T.Wb(),T.Xc(5,", till "),T.Xb(6,"strong"),T.Xc(7),T.jc(8,"utcToLocalTime"),T.Wb(),T.Sb(9,"br"),T.Sb(10,"br"),T.Xc(11," Previous State: "),T.Xb(12,"strong"),T.Xc(13),T.jc(14,"titlecase"),T.Wb(),T.Xc(15," \xa0 Changed State: "),T.Xb(16,"strong"),T.Xc(17),T.jc(18,"titlecase"),T.Wb(),T.Sb(19,"br"),T.Vc(20,x,5,0,"ng-container",1),T.Vc(21,V,5,0,"ng-container",1),T.Vc(22,j,8,1,"ng-container",1),T.Vc(23,Y,8,1,"ng-container",1),T.Vc(24,Z,8,1,"ng-container",1),T.Vc(25,Q,8,1,"ng-container",1),T.Vc(26,J,8,1,"ng-container",1),T.Vc(27,ln,8,1,"ng-container",1),T.Wb()),2&n){var t=e.$implicit;T.Db(3),T.Yc(T.lc(4,12,null==t?null:t.startTime,"mediumTime")),T.Db(4),T.Yc(T.lc(8,15,null==t?null:t.endTime,"mediumTime")),T.Db(6),T.Yc(T.kc(14,18,null==t?null:t.previousState)),T.Db(4),T.Yc(T.kc(18,20,null==t?null:t.changedState)),T.Db(3),T.rc("ngIf","ACTIVE"===(null==t?null:t.navigationState)),T.Db(1),T.rc("ngIf","INACTIVE"===(null==t?null:t.navigationState)),T.Db(1),T.rc("ngIf","ALERT_CLOSED"===(null==t||null==t.context?null:t.context.type)),T.Db(1),T.rc("ngIf","BULK_ALERT_CLOSED"===(null==t||null==t.context?null:t.context.type)),T.Db(1),T.rc("ngIf","TIMER_STARTED"===(null==t||null==t.context?null:t.context.type)),T.Db(1),T.rc("ngIf","TIMER_ENDED"===(null==t||null==t.context?null:t.context.type)),T.Db(1),T.rc("ngIf","TIMER_ABORTED"===(null==t||null==t.context?null:t.context.type)),T.Db(1),T.rc("ngIf","PATIENT_COMMUNICATION_ADDED"===(null==t||null==t.context?null:t.context.type))}}function sn(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"tr"),T.Xb(2,"td",14),T.ec("nzExpandChange",function(n){T.Lc(t);var i=e.$implicit;return T.ic(2).onExpandChange(null==i?null:i.id,n)}),T.Wb(),T.Xb(3,"td"),T.Xc(4),T.jc(5,"utcToLocalTime"),T.Wb(),T.Xb(6,"td"),T.Xc(7),T.jc(8,"utcToLocalTime"),T.Wb(),T.Xb(9,"td"),T.Xc(10),T.Wb(),T.Xb(11,"td"),T.Xc(12),T.Wb(),T.Xb(13,"td"),T.Xc(14),T.Wb(),T.Xb(15,"td"),T.Xc(16),T.Wb(),T.Xb(17,"td",15),T.Xb(18,"strong"),T.Xc(19),T.Wb(),T.Wb(),T.Wb(),T.Xb(20,"tr",16),T.Xb(21,"nz-timeline"),T.Vc(22,rn,28,22,"nz-timeline-item",13),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=e.$implicit,a=T.ic(2);T.Db(2),T.rc("nzExpand",a.expandSet.has(null==i?null:i.id)),T.Db(2),T.Yc(T.lc(5,11,i.startTime,"MMM dd, yyyy HH:mm")),T.Db(3),T.Yc(T.lc(8,14,i.endTime,"MMM dd, yyyy HH:mm")),T.Db(3),T.Zc("",i.totalActiveMinutes," minutes"),T.Db(2),T.Zc("",i.totalInActiveMinutes," minutes"),T.Db(2),T.Yc(i.totalPatientCommunicationMinutesAdded),T.Db(2),T.Yc(i.totalAlertsClosed),T.Db(1),T.rc("nzType",i.bulkAlertsClosed?"danger":"default"),T.Db(2),T.Yc(i.bulkAlertsClosed?"Yes":"No"),T.Db(1),T.rc("nzExpand",a.expandSet.has(null==i?null:i.id)),T.Db(2),T.rc("ngForOf",null==i?null:i.timeline)}}function cn(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"nz-page-header",3),T.Xb(2,"nz-page-header-title"),T.Xc(3,"Staff Audit"),T.Wb(),T.Xb(4,"nz-page-header-subtitle"),T.Xc(5,"Session Tracking Timeline"),T.Wb(),T.Xb(6,"nz-page-header-extra"),T.Xb(7,"nz-range-picker",4),T.ec("ngModelChange",function(n){return T.Lc(t),T.ic().dateRange=n})("ngModelChange",function(n){return T.Lc(t),T.ic().getStaffSessionsAnalysis(n)}),T.Wb(),T.Wb(),T.Xb(8,"nz-page-header-content"),T.Xb(9,"nz-descriptions",5),T.Xb(10,"nz-descriptions-item",6),T.Xb(11,"strong"),T.Xc(12),T.jc(13,"utcToLocalTime"),T.Wb(),T.Wb(),T.Xb(14,"nz-descriptions-item",7),T.Xb(15,"strong"),T.Xc(16),T.jc(17,"utcToLocalTime"),T.Wb(),T.Wb(),T.Xb(18,"nz-descriptions-item",8),T.Xb(19,"strong"),T.Xc(20),T.Wb(),T.Wb(),T.Xb(21,"nz-descriptions-item",9),T.Xb(22,"strong"),T.Xc(23),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(24,"br"),T.Xb(25,"nz-table",10,11),T.Xb(27,"thead"),T.Xb(28,"tr"),T.Sb(29,"th",12),T.Xb(30,"th"),T.Xc(31,"Start Time"),T.Wb(),T.Xb(32,"th"),T.Xc(33,"End Time"),T.Wb(),T.Xb(34,"th"),T.Xc(35,"Active Time"),T.Wb(),T.Xb(36,"th"),T.Xc(37,"Inactive Time"),T.Wb(),T.Xb(38,"th"),T.Xc(39,"CMT Mins Added"),T.Wb(),T.Xb(40,"th"),T.Xc(41,"Alerts Closed"),T.Wb(),T.Xb(42,"th"),T.Xc(43,"Bulk Alerts Closure"),T.Wb(),T.Wb(),T.Wb(),T.Xb(44,"tbody"),T.Vc(45,sn,23,17,"ng-container",13),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=T.Ic(26),a=T.ic();T.Db(1),T.rc("nzGhost",!1),T.Db(6),T.rc("nzAllowClear",!1)("ngModel",a.dateRange),T.Db(2),T.rc("nzColumn",2),T.Db(1),T.rc("nzSpan",1),T.Db(2),T.Yc(T.lc(13,14,null==a.staffSessionResponse||null==a.staffSessionResponse.metadata?null:a.staffSessionResponse.metadata.startDate,"MMM dd, yyyy")),T.Db(2),T.rc("nzSpan",1),T.Db(2),T.Yc(T.lc(17,17,null==a.staffSessionResponse||null==a.staffSessionResponse.metadata?null:a.staffSessionResponse.metadata.endDate,"MMM dd, yyyy")),T.Db(2),T.rc("nzSpan",1),T.Db(2),T.Yc(null==a.staffSessionResponse||null==a.staffSessionResponse.metadata?null:a.staffSessionResponse.metadata.totalSessions),T.Db(1),T.rc("nzSpan",1),T.Db(2),T.Zc("",null==a.staffSessionResponse||null==a.staffSessionResponse.metadata?null:a.staffSessionResponse.metadata.totalPingTimeClockedIn," minutes"),T.Db(2),T.rc("nzData",null==a.staffSessionResponse?null:a.staffSessionResponse.staffSessions),T.Db(20),T.rc("ngForOf",null==i?null:i.data)}}var un,fn,dn=((un=function(n){r(t,n);var e=c(t);function t(n,i,o,l,r,s){var c;a(this,t),(c=e.call(this))._activatedRoute=n,c._staffSessionService=i,c._patientService=o,c._alertService=l,c._datePipe=r,c._dataSharingService=s,c.expandSet=new Set,c.dateRange=[Object(S.a)(Date.now()),Object(z.a)(Date.now())],c.staffId=c._activatedRoute.snapshot.params.id;var u=c._activatedRoute.snapshot.queryParamMap.get("staffName")||"Details";return c._routeHelperService.setTitleForRoute(u),c.serviceCodeMap=new Map([["NON_COMPLEX_TMS","Non-complex"],["NON_COMPLEX_TMS_PHYSICIAN","Non-complex Physician"],["NON_COMPLEX_ADDITIONAL_TMS","Non-complex additional - A"],["NON_COMPLEX_ADDITIONAL_TMS_B","Non-complex additional - B"],["COMPLEX_TMS","Complex"],["COMPLEX_ADDITIONAL_TMS","Complex"],["TREATMENT_MANAGEMENT_SERVICE","Treatment Management Service"],["ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE","Additional Treatment Management Service"],["ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B","Additional Treatment Management Service - B"],["CARE_MANAGEMENT_TIME","Care Management Time"]]),c}return l(t,[{key:"onExpandChange",value:function(n,e){e?this.expandSet.add(n):this.expandSet.delete(n)}},{key:"ngOnInit",value:function(){var n=this;this._dataSharingService.tenantSettings.subscribe(function(e){var t;n.isAuditEnabled=null===(t=null==e?void 0:e.staffSessionConfig)||void 0===t?void 0:t.auditEnabled,n.isAuditEnabled&&n.getStaffSessionsAnalysis()})}},{key:"getStaffSessionsAnalysis",value:function(){var n=this,e=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),t=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._staffSessionService.fetchStaffSession(this.staffId,e,t).subscribe(function(e){n.staffSessionResponse=e})}},{key:"getPatientProfileInfo",value:function(n){this._patientService.getSpecificUser((null==n?void 0:n.patientId)||(null==n?void 0:n.attendeeId)).subscribe(function(e){return n.patient=e})}},{key:"getAlertInfo",value:function(n){this._alertService.getAlertDetail(null==n?void 0:n.alertId).subscribe(function(e){return n.alert=e})}}]),t}(X.a)).\u0275fac=function(n){return new(n||un)(T.Rb(D.a),T.Rb(y.a),T.Rb(m.a),T.Rb(I.a),T.Rb(f.e),T.Rb(h.a))},un.\u0275cmp=T.Lb({type:un,selectors:[["app-staff-audit"]],features:[T.Cb([f.e]),T.Ab],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["nzType","warning","nzMessage","This feature is not enabled, please contact the portal admin!","nzShowIcon",""],[3,"nzGhost"],[3,"nzAllowClear","ngModel","ngModelChange"],["nzSize","small",3,"nzColumn"],["nzTitle","Start Time",3,"nzSpan"],["nzTitle","End Time",3,"nzSpan"],["nzTitle","Total Sessions",3,"nzSpan"],["nzTitle","Total Clocked In Minutes",3,"nzSpan"],["nzTableLayout","fixed",3,"nzData"],["sessionTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],["nz-typography","",3,"nzType"],[3,"nzExpand"],["nz-typography","","nzType","success"],["nz-typography","","nzType","danger"],["nz-row",""],["nz-col","","nzSpan","14"],["nzType","warning","nzShowIcon","",3,"nzMessage"],["alert",""],["nz-typography","","nzType","success","actionable","",3,"click",4,"ngIf"],["nz-row","","nzGutter","16",4,"ngIf"],["nz-typography","","nzType","success","actionable","",3,"click"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","24"],["nzType","error","nzShowIcon","",3,"nzMessage"],["nzType","info","nzShowIcon","",3,"nzMessage"],["timerStart",""],["nz-col","","nzSpan","12"],["timerEnd",""],["timerAborted",""],["cmt",""],[3,"innerHTML"],["nz-typography","","nzType","secondary"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Vc(1,w,2,0,"ng-container",1),T.Vc(2,cn,46,20,"ng-container",1),T.Wb()),2&n&&(T.Db(1),T.rc("ngIf",!e.isAuditEnabled),T.Db(1),T.rc("ngIf",e.isAuditEnabled))},directives:[f.q,W.a,P.b,P.g,P.f,P.d,C.a,C.c,g.u,g.x,P.c,A.a,A.b,_.f,_.n,_.o,_.e,_.l,_.i,f.p,_.j,O.a,_.p,_.g,M.a,M.b,N.c,N.a,R.a,E.a],pipes:[k.a,f.A,f.e],styles:[".container[_ngcontent-%COMP%]{padding-top:20px!important}nz-page-header[_ngcontent-%COMP%]{background:transparent linear-gradient(106deg,#fff 40%,#bed4ff) 0 0 no-repeat padding-box;border-radius:5px}nz-page-header-title[_ngcontent-%COMP%]{font:normal normal 600 17px/14px Nunito;letter-spacing:-.6px;color:var(--secondary-color)}nz-page-header-subtitle[_ngcontent-%COMP%]{font:normal normal 600 14px/14px Nunito;letter-spacing:-.6px}"]}),un),bn=o("D+TJ"),pn=o("2lmJ"),gn=o("5P38"),vn=((fn=function(){function n(e,t){a(this,n),this._widgetsService=e,this._element=t}return l(n,[{key:"ngAfterViewInit",value:function(){this._widgetsService.isWidgetEnabledForStaff(this.widget,this.userPermissions)?this.enableWidget():this.disableWidget()}},{key:"enableWidget",value:function(){this._element.nativeElement.style.display="block"}},{key:"disableWidget",value:function(){this._element.nativeElement.style.display="none"}}]),n}()).\u0275fac=function(n){return new(n||fn)(T.Rb(gn.a),T.Rb(T.l))},fn.\u0275dir=T.Mb({type:fn,selectors:[["","staffDashboardWidget",""]],inputs:{widget:["staffDashboardWidget","widget"],userPermissions:["permissions","userPermissions"]}}),fn),mn=o("JA5x"),hn=o("nJia"),Sn=o("glKu"),zn=o("dRHE");function yn(n,e){if(1&n&&(T.Xb(0,"span"),T.Xc(1),T.Sb(2,"br"),T.Wb()),2&n){var t=e.$implicit;T.Db(1),T.Zc("",t," ")}}function Xn(n,e){if(1&n&&(T.Xc(0),T.Vc(1,yn,3,1,"span",7)),2&n){var t=T.ic();T.Zc(" To view this widget, ",null==t.staff||null==t.staff.user?null:t.staff.user.fullName," requires these permissions "),T.Db(1),T.rc("ngForOf",t.permissions)}}var In,Tn,Dn=function(n){return{"disabled-background":n}},Wn=function(n){return{disabled:n}},Pn=((Tn=function n(){a(this,n)}).\u0275fac=function(n){return new(n||Tn)},Tn.\u0275cmp=T.Lb({type:Tn,selectors:[["app-widget-panel"]],inputs:{staff:"staff",name:"name",permissions:"permissions",disabled:"disabled"},decls:11,vars:13,consts:[["nz-tooltip","","nzTooltipPlacement","bottom",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","3"],["name","form","size","20px"],["nz-col","","nzSpan","21"],["nz-typography","","nzEllipsis","",3,"ngClass","nzContent"],["permissionContent",""],[4,"ngFor","ngForOf"]],template:function(n,e){if(1&n&&(T.Xb(0,"nz-card",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Sb(3,"app-icons",3),T.Wb(),T.Xb(4,"div",4),T.Xb(5,"strong",5),T.jc(6,"translate"),T.Xc(7),T.jc(8,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Vc(9,Xn,2,2,"ng-template",null,6,T.Wc)),2&n){var t=T.Ic(10);T.rc("ngClass",T.yc(9,Dn,e.disabled))("nzTooltipTitle",t),T.Db(5),T.sc("nzContent",T.kc(6,5,e.name)),T.rc("ngClass",T.yc(11,Wn,e.disabled)),T.Db(2),T.Zc(" ",T.kc(8,7,e.name)," ")}},directives:[mn.a,hn.d,f.o,N.c,N.a,Sn.a,O.a,f.p],pipes:[zn.a],styles:["nz-card[_ngcontent-%COMP%]{border-radius:5px}[_nghost-%COMP%]     .ant-card-body{padding:20px 20px 15px}strong[_ngcontent-%COMP%]{display:block}.disabled-background[_ngcontent-%COMP%]{background:#dbdbdb}.disabled[_ngcontent-%COMP%]{color:#8a8a8a}app-icons[_ngcontent-%COMP%]{pointer-events:none}"]}),Tn),Cn=((In=function(){function n(e,t){a(this,n),this._widgetsService=e,this._element=t}return l(n,[{key:"ngAfterViewInit",value:function(){this._widgetsService.isWidgetEnabledForStaff(this.widget,this.userPermissions)?this.disableWidget():this.enableWidget()}},{key:"enableWidget",value:function(){this._element.nativeElement.style.display="block"}},{key:"disableWidget",value:function(){this._element.nativeElement.style.display="none"}}]),n}()).\u0275fac=function(n){return new(n||In)(T.Rb(gn.a),T.Rb(T.l))},In.\u0275dir=T.Mb({type:In,selectors:[["","disabledStaffDashboardWidget",""]],inputs:{widget:["disabledStaffDashboardWidget","widget"],userPermissions:["permissions","userPermissions"]}}),In);function An(n,e){if(1&n&&(T.Xb(0,"div",5),T.Sb(1,"app-widget-panel",6),T.Wb()),2&n){var t=e.$implicit,i=T.ic(2);T.rc("staffDashboardWidget",null==t?null:t.key)("permissions",null==i.staff||null==i.staff.user?null:i.staff.user.privileges),T.Db(1),T.rc("staff",i.staff)("name",t.key)("permissions",t.value)}}function _n(n,e){if(1&n&&(T.Xb(0,"div",1),T.Sb(1,"br"),T.Xb(2,"h4",2),T.Xc(3),T.Wb(),T.Sb(4,"br"),T.Xb(5,"div",3),T.Vc(6,An,2,5,"div",4),T.jc(7,"keyvalue"),T.Wb(),T.Wb()),2&n){var t=T.ic();T.Db(3),T.Zc("Widgets ",null==t.staff||null==t.staff.user?null:t.staff.user.fullName," can view"),T.Db(3),T.rc("ngForOf",T.kc(7,2,t.widgets))}}function On(n,e){if(1&n&&(T.Xb(0,"div",8),T.Sb(1,"app-widget-panel",9),T.Wb()),2&n){var t=e.$implicit,i=T.ic(2);T.rc("disabledStaffDashboardWidget",null==t?null:t.key)("permissions",null==i.staff||null==i.staff.user?null:i.staff.user.privileges),T.Db(1),T.rc("staff",i.staff)("name",t.key)("permissions",t.value)("disabled",!0)}}function Mn(n,e){if(1&n&&(T.Xb(0,"div",1),T.Xb(1,"h4",2),T.Xc(2),T.Wb(),T.Sb(3,"br"),T.Xb(4,"div",3),T.Vc(5,On,2,6,"div",7),T.jc(6,"keyvalue"),T.Wb(),T.Wb()),2&n){var t=T.ic();T.Db(2),T.Zc("Widgets ",null==t.staff||null==t.staff.user?null:t.staff.user.fullName," cannot view"),T.Db(3),T.rc("ngForOf",T.kc(6,2,t.widgets))}}var Nn,Rn=((Nn=function(n){r(t,n);var e=c(t);function t(n,i,o,l){var r;return a(this,t),(r=e.call(this))._activatedRoute=n,r._staffService=i,r._dashboardService=o,r._widgetsService=l,r.widgetToExclude=["LOGGED_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE","LOGGED_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B","MONITORING","ON_BOARDING","OVERVIEW","PATIENTS_LIKELY_TO_BE_COMPLIANT","PATIENTS_WITH_CLOSE_MONITORING","PATIENTS_WITH_NO_VITALS","PATIENTS_WITH_PENDING_ASSESSMENT","PENDING_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE","PENDING_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B","PENDING_MEASUREMENT","QUICK_PROGRESS","QUICK_VIEW","BHI_PENDING_CONSENT","BHI_PENDING_PHYSICIAN_ORDER"],r}return l(t,[{key:"ngOnInit",value:function(){this.getStaffDetails()}},{key:"getStaffDetails",value:function(){var n=this,e=this._activatedRoute.snapshot.params.id;this._staffService.fetchStaffMemberById(e,e).subscribe(function(e){n.staff=e,n.getWidgetPermissions()})}},{key:"getWidgetPermissions",value:function(){var n=this;this._dashboardService.fetchWidgetPermissions().subscribe(function(e){n._widgetsService.setWidgetPermissions(e),n.widgets=e,Object.keys(e).forEach(function(e){-1!==n.widgetToExclude.indexOf(e)&&delete n.widgets[e]}),n.loaded=!0})}}]),t}(X.a)).\u0275fac=function(n){return new(n||Nn)(T.Rb(D.a),T.Rb(pn.a),T.Rb(bn.a),T.Rb(gn.a))},Nn.\u0275cmp=T.Lb({type:Nn,selectors:[["app-dashboard-widgets"]],features:[T.Ab],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-typography",""],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","5",3,"staffDashboardWidget","permissions",4,"ngFor","ngForOf"],["nz-col","","nzSpan","5",3,"staffDashboardWidget","permissions"],[3,"staff","name","permissions"],["nz-col","","nzSpan","5",3,"disabledStaffDashboardWidget","permissions",4,"ngFor","ngForOf"],["nz-col","","nzSpan","5",3,"disabledStaffDashboardWidget","permissions"],[3,"staff","name","permissions","disabled"]],template:function(n,e){1&n&&(T.Vc(0,_n,8,4,"div",0),T.Vc(1,Mn,7,4,"div",0)),2&n&&(T.rc("ngIf",e.loaded),T.Db(1),T.rc("ngIf",e.loaded))},directives:[f.q,O.a,N.c,f.p,N.a,vn,Pn,Cn],pipes:[f.j],styles:["[_nghost-%COMP%]     .ant-col-5{margin-bottom:15px}"]}),Nn),En=o("nLCl"),kn=o("4ik+"),wn=o("IW2O"),xn=o("bNXi"),Vn=o("C2AL"),Ln=o("PTRe"),Fn=o("OzZK"),Un=o("RwU8"),jn=o("QlLE"),Gn=o("TaO5"),Yn=o("UpsY"),Hn=o("m3lz");function Bn(n,e){1&n&&(T.Vb(0),T.Xc(1,", "),T.Ub())}function qn(n,e){if(1&n&&(T.Xb(0,"strong"),T.Xc(1),T.jc(2,"titlecase"),T.jc(3,"userLocation"),T.Vc(4,Bn,2,0,"ng-container",11),T.Wb()),2&n){var t=e.$implicit,i=e.index,a=T.ic(2);T.Db(1),T.Zc(" ",T.kc(2,2,T.kc(3,4,null==t?null:t.id)),""),T.Db(3),T.rc("ngIf",i!==(null==a.staff||null==a.staff.locations?null:a.staff.locations.length)-1)}}function Zn(n,e){if(1&n){var t=T.Yb();T.Xb(0,"button",12),T.ec("click",function(n){return T.Lc(t),T.ic(2).filterPhysicians(n)}),T.Sb(1,"app-icons",13),T.Wb()}2&n&&(T.Db(1),T.rc("originalStyle",!0))}function $n(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-empty",14),T.Ub()),2&n){var t=T.ic(2);T.Db(1),T.rc("nzNotFoundContent",t.searchKey?"No physicians available matching your search":"No physicians found")}}function Qn(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" 0",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0," ")}}function Kn(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" ",null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount," ")}}function Jn(n,e){1&n&&(T.Vb(0),T.Xc(1," Active Patient "),T.Ub())}function ne(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" Active ",T.kc(2,1,"COMMON.PATIENTS")," "))}function ee(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" 0",(null==t||null==t.assignedStaff?null:t.assignedStaff.length)||0," ")}}function te(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" ",null==t||null==t.assignedStaff?null:t.assignedStaff.length," ")}}var ie=function(n){return{border:n}},ae=function(n){return[n]};function oe(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"div",15),T.Xb(2,"div",16),T.Xb(3,"div",17),T.Xb(4,"label",18),T.ec("ngModelChange",function(n){return e.$implicit.selected=n}),T.Wb(),T.Wb(),T.Wb(),T.Xb(5,"h5",19),T.Xb(6,"strong",20),T.Xc(7),T.Wb(),T.Wb(),T.Xb(8,"h5",21),T.jc(9,"userLocations"),T.Xc(10),T.jc(11,"userLocations"),T.Wb(),T.Xb(12,"div",22),T.Xb(13,"div",23),T.Xb(14,"span",24),T.Vc(15,Qn,2,1,"ng-container",11),T.Vc(16,Kn,2,1,"ng-container",11),T.Wb(),T.Xb(17,"span",25),T.Vc(18,Jn,2,0,"ng-container",11),T.Vc(19,ne,3,3,"ng-container",11),T.Wb(),T.Wb(),T.Xb(20,"div",23),T.Xb(21,"span",24),T.Vc(22,ee,2,1,"ng-container",11),T.Vc(23,te,2,1,"ng-container",11),T.Wb(),T.Xb(24,"span",25),T.Xc(25," Monitoring Staff "),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("ngClass",null!=t&&t.assigned?"assigned shadowed":"")("ngStyle",T.yc(25,ie,null!=t&&t.selected?"2px solid #a7c853":"2px solid #ffffff")),T.Db(3),T.rc("nzDisabled",t.assigned)("ngModel",t.selected)("nzValue",t.id),T.Db(1),T.rc("nzTooltipTitle",(null==t?null:t.fullName)||"N/A"),T.Db(1),T.rc("ngClass",T.yc(27,ae,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.Zc(" ",(null==t?null:t.fullName)||"N/A"," "),T.Db(1),T.sc("nzTooltipTitle",T.kc(9,21,null==t?null:t.locations)),T.rc("ngClass",T.yc(29,ae,null!=t&&t.assigned?"assigned":"")),T.Db(2),T.Zc(" ",T.kc(11,23,null==t?null:t.locations)," "),T.Db(4),T.rc("ngClass",T.yc(31,ae,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)<10),T.Db(1),T.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)>=10),T.Db(1),T.rc("ngClass",T.yc(33,ae,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",1===((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)),T.Db(1),T.rc("ngIf",1!==((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)),T.Db(2),T.rc("ngClass",T.yc(35,ae,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",((null==t||null==t.assignedStaff?null:t.assignedStaff.length)||0)<10),T.Db(1),T.rc("ngIf",((null==t||null==t.assignedStaff?null:t.assignedStaff.length)||0)>=10),T.Db(1),T.rc("ngClass",T.yc(37,ae,null!=t&&t.assigned?"assigned":""))}}function le(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",1),T.Xb(1,"div",2),T.Xb(2,"div",3),T.Xb(3,"h4",4),T.Xc(4),T.jc(5,"titlecase"),T.Wb(),T.Xb(6,"p",4),T.Xc(7," Assigining a staff member to at least one physician is important for the staff member to actively view and manage the patients assigned to the physician. "),T.Sb(8,"br"),T.Sb(9,"br"),T.Vb(10),T.Xc(11," You can assign one or multiple physicians from "),T.Vc(12,qn,5,6,"strong",5),T.Xc(13),T.jc(14,"titlecase"),T.Ub(),T.Sb(15,"br"),T.Sb(16,"br"),T.Vb(17),T.Xb(18,"strong"),T.Xc(19,"Note: "),T.Wb(),T.Xc(20,"Once assigned, we will be unable to un-assign the staff from these physicians at these locations. "),T.Ub(),T.Wb(),T.Wb(),T.Xb(21,"div",6),T.Xb(22,"nz-input-group",7),T.Xb(23,"input",8),T.ec("ngModelChange",function(n){return T.Lc(t),T.ic().searchKey=n})("ngModelChange",function(n){return T.Lc(t),T.ic().filterPhysicians(n)}),T.jc(24,"translate"),T.Wb(),T.Wb(),T.Vc(25,Zn,2,1,"ng-template",null,9,T.Wc),T.Wb(),T.Wb(),T.Xb(27,"div",10),T.Vc(28,$n,2,1,"ng-container",11),T.Vc(29,oe,26,39,"ng-container",5),T.Wb(),T.Wb()}if(2&n){var i=T.Ic(26),a=T.ic();T.Db(4),T.Zc("Assign ",T.kc(5,8,null==a.staff?null:a.staff.fullName)," to physicians in the same site"),T.Db(8),T.rc("ngForOf",null==a.staff?null:a.staff.locations),T.Db(1),T.Zc(" sites. ",T.kc(14,10,null==a.staff?null:a.staff.fullName)," will be assigned as a monitoring staff to all patients under the selected physicians in these sites. "),T.Db(9),T.rc("nzAddOnAfter",i),T.Db(1),T.sc("placeholder",T.kc(24,12,"COMMON.SEARCH")),T.rc("ngModel",a.searchKey),T.Db(5),T.rc("ngIf",!(null!=a.filteredPhysicians&&a.filteredPhysicians.length)),T.Db(1),T.rc("ngForOf",a.filteredPhysicians)}}var re,se=((re=function(n){r(i,n);var t=c(i);function i(n,e,o,l){var r;return a(this,i),(r=t.call(this))._router=n,r._activatedRoute=e,r._staffService=o,r._notificationsService=l,r.role=r._activatedRoute.snapshot.queryParamMap.get("role"),r._routeHelperService.isPrimaryActionTriggered().pipe(Object(kn.filter)(function(n){return!!n}),Object(wn.takeUntil)(r.unsubscribed)).subscribe(function(){return r.assignPhysicians()}),r}return l(i,[{key:"ngOnInit",value:function(){this.getStaffById()}},{key:"getStaffById",value:function(){var n=this;this._staffService.fetchStaffMemberById(this._activatedRoute.snapshot.params.id).subscribe(function(e){n.staff=null==e?void 0:e.user,n.assignedPhysicians=null==e?void 0:e.assignedToUsers[En.a.PHYSICIAN],n.getAssignableStaff()})}},{key:"checkIfStaffAssigned",value:function(){var n,e=this;null===(n=this.assignedPhysicians)||void 0===n||n.forEach(function(n){var t=e.filteredPhysicians.find(function(e){return e.id===n.id});t&&(t.selected=!0,t.assigned=!0)})}},{key:"getAssignableStaff",value:function(){var n=this,e=this._activatedRoute.snapshot.params.id,t=this._activatedRoute.snapshot.queryParamMap.get("role");t=En.a.PHYSICIAN===t?En.a.MONITORING_STAFF:En.a.PHYSICIAN,this._staffService.fetchAssignableStaffMembersById(e,t).subscribe(function(e){n.filteredPhysicians=e,n.physicians=JSON.parse(JSON.stringify(e)),n.checkIfStaffAssigned()})}},{key:"assignPhysicians",value:function(){var n,e,t,i,a,o=this,l={};this.filteredPhysicians.filter(function(n){return n.selected}).filter(function(n){var e,t;return!(null===(e=o.assignedPhysicians)||void 0===e?void 0:e.length)||-1===(null===(t=o.assignedPhysicians)||void 0===t?void 0:t.findIndex(function(e){return e.id===n.id}))}).forEach(function(n){l[null==n?void 0:n.id]=o.staff.id});var r={assignmentMap:l,assignTo:this.role};(null===(n=this.assignedPhysicians)||void 0===n?void 0:n.length)||l&&(null===(e=Object.keys(l))||void 0===e?void 0:e.length)?!(null===(t=this.assignedPhysicians)||void 0===t?void 0:t.length)||(null===(i=Object.keys(l))||void 0===i?void 0:i.length)?this._staffService.assignStaffMembers(r).subscribe(function(n){var e;o._notificationsService.success("Assignment",(null==n?void 0:n.message)||"Assigned"),o._router.navigate(["/staff/view/",o.staff.id],{queryParams:{role:o.role,staffName:null===(e=o.staff)||void 0===e?void 0:e.fullName}})}):this._router.navigate(["/staff/view/",this.staff.id],{queryParams:{role:this.role,staffName:null===(a=this.staff)||void 0===a?void 0:a.fullName}}):this._notificationsService.error("Assignment","Please select at least 1 physician before proceeding!")}},{key:"filterPhysicians",value:function(n){if(!n)return this.filteredPhysicians=e(this.physicians),void this.checkIfStaffAssigned();this.filteredPhysicians=this.physicians.filter(function(e){var t,i;return null===(i=null===(t=null==e?void 0:e.fullName)||void 0===t?void 0:t.toLowerCase())||void 0===i?void 0:i.includes(null==n?void 0:n.toLowerCase())}),this.checkIfStaffAssigned()}}]),i}(X.a)).\u0275fac=function(n){return new(n||re)(T.Rb(D.g),T.Rb(D.a),T.Rb(pn.a),T.Rb(xn.b))},re.\u0275cmp=T.Lb({type:re,selectors:[["app-physician-assigner"]],features:[T.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","17"],["nz-typography",""],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngIf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-checkbox","",3,"nzDisabled","ngModel","nzValue","ngModelChange"],["nz-typography","","nz-tooltip","",1,"name",3,"nzTooltipTitle"],[3,"ngClass"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"]],template:function(n,e){1&n&&T.Vc(0,le,30,14,"div",0),2&n&&T.rc("ngIf",e.staff)},directives:[f.q,N.c,N.a,O.a,f.p,Vn.a,Ln.c,Ln.b,g.d,g.u,g.x,Fn.a,Un.a,Sn.a,jn.b,f.o,f.r,Gn.a,hn.d],pipes:[f.A,zn.a,Yn.a,Hn.a],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);height:110px;-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-20px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}"]}),re),ce=o("6aLS"),ue=o("1G5W"),fe=o("pLZG"),de=o("F6ss"),be=o("ZE2D"),pe=o("ZyQt");function ge(n,e){if(1&n&&T.Sb(0,"img",8),2&n){var t=T.ic();T.rc("src",null==t.staff?null:t.staff.profilePicture,T.Oc)}}function ve(n,e){1&n&&T.Sb(0,"nz-avatar",9),2&n&&T.rc("nzShape","square")("nzSize",75)("nzIcon","user")}function me(n,e){1&n&&(T.Vb(0),T.Xc(1,", "),T.Ub())}function he(n,e){if(1&n&&(T.Xb(0,"span",4),T.Xc(1),T.jc(2,"titlecase"),T.jc(3,"userLocation"),T.Vc(4,me,2,0,"ng-container",7),T.Wb()),2&n){var t=e.$implicit,i=e.index,a=T.ic();T.Db(1),T.Zc(" ",T.kc(2,2,T.kc(3,4,null==t?null:t.id)),""),T.Db(3),T.rc("ngIf",i!==(null==a.staff||null==a.staff.locations?null:a.staff.locations.length)-1)}}function Se(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-tag",12),T.Xc(2),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(2),T.Yc(t)}}function ze(n,e){if(1&n&&(T.Xb(0,"div"),T.Xb(1,"p",10),T.Xc(2),T.jc(3,"translate"),T.Wb(),T.Vc(4,Se,3,1,"ng-container",11),T.Sb(5,"nz-divider"),T.Wb()),2&n){var t=T.ic();T.Db(2),T.Yc(T.kc(3,2,"COMMON.PROFILETAG")),T.Db(2),T.rc("ngForOf",null==t.staff?null:t.staff.profileTags)}}var ye,Xe,Ie=((Xe=function(){function n(e,t,i){a(this,n),this._activatedRoute=e,this._router=t,this._drawerRef=i}return l(n,[{key:"ngOnInit",value:function(){}},{key:"viewStaff",value:function(){var n,e=this._activatedRoute.snapshot.queryParamMap.get("role")||En.a.PHYSICIAN;this._router.navigate(["staff/view",this.staff.id],{queryParams:{role:e,staffName:null===(n=this.staff)||void 0===n?void 0:n.fullName,status:"ALL"}})}},{key:"closeDrawer",value:function(){this._drawerRef.close()}}]),n}()).\u0275fac=function(n){return new(n||Xe)(T.Rb(D.a),T.Rb(D.g),T.Rb(de.c))},Xe.\u0275cmp=T.Lb({type:Xe,selectors:[["app-staff-details"]],inputs:{staff:"staff"},decls:26,vars:10,consts:[["nz-row",""],["nz-col","","nzSpan","12"],["alt","staff-profile",3,"src",4,"ngIf"],[3,"nzShape","nzSize","nzIcon",4,"ngIf"],["nz-typography","","nzType","secondary"],["nz-typography","","nzType","secondary",4,"ngFor","ngForOf"],["nz-button","","nzSize","large","nzType","primary",3,"click"],[4,"ngIf"],["alt","staff-profile",3,"src"],[3,"nzShape","nzSize","nzIcon"],["nz-typography","","nzType","success"],[4,"ngFor","ngForOf"],["nzColor","#EFFEE2"]],template:function(n,e){1&n&&(T.Sb(0,"br"),T.Xb(1,"div",0),T.Xb(2,"div",1),T.Vc(3,ge,1,1,"img",2),T.Vc(4,ve,1,3,"nz-avatar",3),T.Wb(),T.Wb(),T.Sb(5,"br"),T.Xb(6,"h2"),T.Xc(7),T.Wb(),T.Xb(8,"span",4),T.Xc(9),T.Wb(),T.Sb(10,"br"),T.Sb(11,"br"),T.Xb(12,"label"),T.Xb(13,"strong",4),T.Xc(14,"Contact: "),T.Wb(),T.Xc(15),T.Wb(),T.Xb(16,"label"),T.Xb(17,"strong",4),T.Xc(18,"Sites: "),T.Wb(),T.Vc(19,he,5,6,"span",5),T.Wb(),T.Sb(20,"br"),T.Xb(21,"button",6),T.ec("click",function(){return e.closeDrawer()})("click",function(){return e.viewStaff()}),T.Xc(22),T.jc(23,"translate"),T.Wb(),T.Sb(24,"nz-divider"),T.Vc(25,ze,6,4,"div",7)),2&n&&(T.Db(3),T.rc("ngIf",null==e.staff?null:e.staff.profilePicture),T.Db(1),T.rc("ngIf",!(null!=e.staff&&e.staff.profilePicture)),T.Db(3),T.Yc(null==e.staff?null:e.staff.fullName),T.Db(2),T.Yc(null==e.staff||null==e.staff.roles[0]?null:e.staff.roles[0].name),T.Db(6),T.Zc(" ",null==e.staff?null:e.staff.mobile,"\n"),T.Db(4),T.rc("ngForOf",null==e.staff?null:e.staff.locations),T.Db(3),T.Zc(" ",T.kc(23,8,"PATIENT.VIEW_PROFILE"),"\n"),T.Db(3),T.rc("ngIf",!(null==e.staff||null==e.staff.profileTags||!e.staff.profileTags.length)))},directives:[N.c,N.a,f.q,O.a,f.p,Fn.a,Un.a,Vn.a,E.a,be.a,pe.a],pipes:[zn.a,f.A,Yn.a],styles:["h2[_ngcontent-%COMP%]{text-transform:capitalize;margin-bottom:0}label[_ngcontent-%COMP%]{display:block}nz-tag[_ngcontent-%COMP%]{background:#effee2 0 0 no-repeat padding-box;color:#0f2015;font-size:11px}"]}),Xe),Te=((ye=function(){function n(e){a(this,n),this._drawerService=e}return l(n,[{key:"staffDetails",value:function(n){return this._drawerService.create({nzContent:Ie,nzContentParams:{staff:n},nzMask:!0,nzMaskStyle:{background:"transparent"},nzMaskClosable:!0,nzWidth:350})}}]),n}()).\u0275fac=function(n){return new(n||ye)(T.bc(de.d))},ye.\u0275prov=T.Nb({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye),De=function n(){a(this,n)},We=o("ds6q"),Pe=o("oyxB"),Ce=o("PzCk"),Ae=o("AytR"),_e=o("eq8A"),Oe=o("idJI"),Me=o("dEAy"),Ne=o("Szod"),Re=o("A07A"),Ee=o("ZKr6"),ke=o("Nqz0"),we=o("Q8cG"),xe=o("t2pg");function Ve(n,e){1&n&&T.Sb(0,"th")}function Le(n,e){1&n&&(T.Xb(0,"th"),T.Xc(1,"Assigned"),T.Wb())}function Fe(n,e){1&n&&(T.Xb(0,"th"),T.Xc(1,"Assigned Patients"),T.Wb())}function Ue(n,e){1&n&&(T.Xb(0,"th"),T.Xc(1," Assigned Tenants "),T.Wb())}function je(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",14),T.ec("click",function(){return T.Lc(t),T.ic(2).redirectNoAssignedStaff()}),T.Sb(1,"nz-statistic",15),T.Wb()}if(2&n){T.ic();var i=T.Ic(16),a=T.ic();T.Db(1),T.rc("nzValueStyle",a.disabledStyle)("nzTitle",i)}}function Ge(n,e){if(1&n&&(T.Xb(0,"span"),T.Xc(1),T.Wb()),2&n){var t=T.ic(2);T.Db(1),T.Zc(" ",null==t.element||null==t.element.count?null:t.element.count.patients," ")}}function Ye(n,e){1&n&&T.Sb(0,"td")}function He(n,e){if(1&n&&(T.Xb(0,"tr"),T.Xb(1,"td"),T.Xb(2,"p",6),T.Xc(3," No assigned monitoring staff "),T.Wb(),T.Wb(),T.Xb(4,"td"),T.Xc(5," - "),T.Wb(),T.Xb(6,"td"),T.Xb(7,"div",7),T.Sb(8,"nz-statistic",8),T.Wb(),T.Wb(),T.Xb(9,"td"),T.Vc(10,je,2,2,"div",9),T.Xb(11,"div",7),T.Sb(12,"nz-statistic",10),T.Wb(),T.Xb(13,"div",11),T.Sb(14,"nz-statistic",12),T.Wb(),T.Vc(15,Ge,2,1,"ng-template",null,13,T.Wc),T.Wb(),T.Xb(17,"td"),T.Xc(18," - "),T.Wb(),T.Vc(19,Ye,1,0,"td",4),T.Sb(20,"td"),T.Wb()),2&n){var t=T.ic();T.Db(8),T.rc("nzValueStyle",t.disabledStyle),T.Db(2),T.rc("ngIf","PHYSICIAN"===t.roleType||"MONITORING_STAFF"===t.roleType),T.Db(2),T.rc("nzValueStyle",t.disabledStyle),T.Db(2),T.rc("nzValueStyle",t.disabledStyle)}}function Be(n,e){1&n&&(T.Vb(0),T.Xc(1," (disabled) "),T.Ub())}function qe(n,e){if(1&n&&(T.Xb(0,"nz-tag",23),T.Xc(1,"New"),T.Wb()),2&n){T.ic();var t=T.Ic(3);T.rc("nzTooltipTitle",t)("nzColor","volcano")}}function Ze(n,e){1&n&&(T.Xb(0,"span"),T.Xc(1,"This profile has been created recently and has not been updated since "),T.Wb())}function $e(n,e){if(1&n&&(T.Xb(0,"td"),T.Vc(1,qe,2,2,"nz-tag",21),T.Vc(2,Ze,2,0,"ng-template",null,22,T.Wc),T.Wb()),2&n){var t=T.ic(2).$implicit;T.Db(1),T.rc("ngIf",!(null!=t&&null!=t.user&&t.user.updatedAt))}}function Qe(n,e){if(1&n&&(T.Xb(0,"div",7),T.Sb(1,"nz-statistic",29),T.Wb()),2&n){T.ic();var t=T.Ic(7),i=T.ic(3);T.Db(1),T.rc("nzValueStyle",i.disabledStyle)("nzTitle",t)}}function Ke(n,e){if(1&n&&(T.Xb(0,"div",30),T.Sb(1,"nz-statistic",31),T.Wb()),2&n){T.ic();var t=T.Ic(5);T.Db(1),T.rc("nzTitle",t)}}function Je(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",32),T.ec("click",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic().redirect(null==n||null==n.user?null:n.user.id,null==n||null==n.user?null:n.user.fullName)}),T.Sb(1,"nz-statistic",33),T.Wb()}if(2&n){T.ic();var i=T.Ic(9),a=T.ic(3);T.Db(1),T.rc("nzValueStyle",a.disabledStyle)("nzTitle",i)}}function nt(n,e){if(1&n&&(T.Xb(0,"span",34),T.Xc(1),T.Wb()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.Zc(" ",null==t||null==t.count?null:t.count.monitoringStaff," ")}}function et(n,e){if(1&n&&(T.Xb(0,"span",34),T.Xc(1),T.Wb()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.Zc(" ",null==t||null==t.user||null==t.user.clinicianState?null:t.user.clinicianState.assignedPhysicianCount," ")}}function tt(n,e){if(1&n&&(T.Xb(0,"span",34),T.Xc(1),T.Wb()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.Zc(" ",null==t||null==t.count?null:t.count.patients," ")}}function it(n,e){if(1&n&&(T.Xb(0,"td"),T.Vc(1,Qe,2,2,"div",24),T.Vc(2,Ke,2,1,"div",25),T.Vc(3,Je,2,2,"div",26),T.Vc(4,nt,2,2,"ng-template",null,27,T.Wc),T.Vc(6,et,2,2,"ng-template",null,28,T.Wc),T.Vc(8,tt,2,2,"ng-template",null,13,T.Wc),T.Wb()),2&n){var t=T.ic(3);T.Db(1),T.rc("ngIf","MONITORING_STAFF"===t.roleType),T.Db(1),T.rc("ngIf","PHYSICIAN"===t.roleType),T.Db(1),T.rc("ngIf","PHYSICIAN"===t.roleType)}}function at(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",14),T.ec("click",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic().redirect(null==n||null==n.user?null:n.user.id,null==n||null==n.user?null:n.user.fullName)}),T.Sb(1,"nz-statistic",15),T.Wb()}if(2&n){T.ic();var i=T.Ic(7),a=T.ic(3);T.Db(1),T.rc("nzValueStyle",a.disabledStyle)("nzTitle",i)}}function ot(n,e){if(1&n&&(T.Xb(0,"span",34),T.Xc(1),T.Wb()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.Zc(" ",null==t||null==t.count?null:t.count.patients," ")}}function lt(n,e){if(1&n&&(T.Xb(0,"span",34),T.Xc(1),T.Wb()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.Zc(" ",null==t||null==t.count?null:t.count.primaryPatients," ")}}function rt(n,e){if(1&n&&(T.Xb(0,"span",34),T.Xc(1),T.Wb()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.Zc(" ",null==t||null==t.count?null:t.count.secondaryPatients," ")}}function st(n,e){if(1&n){var t=T.Yb();T.Xb(0,"td"),T.Vc(1,at,2,2,"div",9),T.Xb(2,"div",14),T.ec("click",function(){T.Lc(t);var n=T.ic(2).$implicit;return T.ic().redirect(null==n||null==n.user?null:n.user.id,null==n||null==n.user?null:n.user.fullName,"PRIMARY")}),T.Sb(3,"nz-statistic",35),T.Wb(),T.Xb(4,"div",36),T.ec("click",function(){T.Lc(t);var n=T.ic(2).$implicit;return T.ic().redirect(null==n||null==n.user?null:n.user.id,null==n||null==n.user?null:n.user.fullName,"OTHER")}),T.Sb(5,"nz-statistic",37),T.Wb(),T.Vc(6,ot,2,2,"ng-template",null,13,T.Wc),T.Vc(8,lt,2,2,"ng-template",null,38,T.Wc),T.Vc(10,rt,2,2,"ng-template",null,39,T.Wc),T.Wb()}if(2&n){var i=T.Ic(9),a=T.Ic(11),o=T.ic(3);T.Db(1),T.rc("ngIf","PHYSICIAN"===o.roleType||"MONITORING_STAFF"===o.roleType),T.Db(2),T.rc("nzValueStyle",o.disabledStyle)("nzTitle",i),T.Db(2),T.rc("nzValueStyle",o.disabledStyle)("nzTitle",a)}}function ct(n,e){1&n&&(T.Vb(0),T.Xc(1,", "),T.Ub())}function ut(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"tenantName"),T.Vc(3,ct,2,0,"ng-container",3),T.Ub()),2&n){var t=e.$implicit,i=e.index,a=T.ic(3).$implicit;T.Db(1),T.Zc(" ",T.kc(2,2,t),""),T.Db(2),T.rc("ngIf",i<a.user.assignedTenantIds.length-1)}}function ft(n,e){if(1&n&&(T.Xb(0,"td"),T.Xb(1,"span",18),T.Vc(2,ut,4,4,"ng-container",5),T.Wb(),T.Wb()),2&n){var t=T.ic(2).$implicit,i=T.ic();T.Db(1),T.rc("ngClass",null!=t&&null!=t.user&&t.user.active?"":i.disabledClass),T.Db(1),T.rc("ngForOf",t.user.assignedTenantIds)}}function dt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-icons",40),T.ec("click",function(){T.Lc(t);var n=T.ic(2).$implicit;return T.ic().showDetails(null==n?null:n.user)}),T.Wb()}}function bt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"li",50),T.ec("click",function(){T.Lc(t);var n=T.ic(4).$implicit;return T.ic().disableStaff(n)}),T.Xc(1," Disable "),T.Wb()}}function pt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"li",51),T.ec("click",function(){T.Lc(t);var n=T.ic(4).$implicit;return T.ic().enableStaff(null==n||null==n.user?null:n.user.id)}),T.Xc(1," Enable "),T.Wb()}}function gt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"li",52),T.ec("click",function(){T.Lc(t);var n=T.ic(4).$implicit;return T.ic().generateAndDownloadReport(null==n||null==n.user?null:n.user.id)}),T.Xc(1," Cancelled Appointments "),T.Wb()}}var vt=function(n,e){return{role:n,staffName:e}};function mt(n,e){if(1&n&&(T.Xb(0,"li",53),T.Xc(1," Audit Sessions "),T.Wb()),2&n){var t=T.ic(4).$implicit,i=T.ic();T.tc("routerLink","/staff/sessions/audit/",null==t||null==t.user?null:t.user.id,""),T.rc("queryParams",T.zc(2,vt,i.roleType,null==t||null==t.user?null:t.user.fullName))}}function ht(n,e){if(1&n&&(T.Vb(0),T.Vc(1,bt,2,0,"li",46),T.Vc(2,pt,2,0,"li",47),T.Vc(3,gt,2,0,"li",48),T.Vc(4,mt,2,5,"li",49),T.Ub()),2&n){var t=T.ic(3).$implicit,i=T.ic();T.Db(1),T.rc("ngIf",null==t||null==t.user?null:t.user.active),T.Db(1),T.rc("ngIf",!(null!=t&&null!=t.user&&t.user.active)),T.Db(1),T.rc("ngIf",!(null!=t&&null!=t.user&&t.user.active)),T.Db(1),T.rc("ngIf",null==i.tenantConfig||null==i.tenantConfig.staffSessionConfig?null:i.tenantConfig.staffSessionConfig.auditEnabled)}}function St(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"a",41),T.Sb(2,"app-icons",42),T.Wb(),T.Xb(3,"nz-dropdown-menu",null,43),T.Xb(5,"ul",44),T.Xb(6,"li",45),T.ec("click",function(){T.Lc(t);var n=T.ic(2).$implicit;return T.ic().editStaff(null==n?null:n.user,null==n||null==n.user?null:n.user.active)}),T.Xc(7," Edit Details "),T.Wb(),T.Vc(8,ht,5,4,"ng-container",3),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=T.Ic(4),a=T.ic(2).$implicit,o=T.ic();T.Db(1),T.rc("nzDropdownMenu",i),T.Db(5),T.rc("nzDisabled",!(null!=a&&null!=a.user&&a.user.active))("queryParams",T.zc(4,vt,o.roleType,null==a||null==a.user?null:a.user.fullName)),T.Db(2),T.rc("ngIf","MONITORING_STAFF"===o.roleType)}}var zt=function(){return["EDIT_STAFF","EDIT_PHYSICIAN"]};function yt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"tr"),T.Xb(1,"td",16),T.ec("click",function(){T.Lc(t);var n=T.ic().$implicit;return T.ic().viewStaff(null==n?null:n.user)}),T.Xb(2,"p",17),T.Xc(3),T.Vc(4,Be,2,0,"ng-container",3),T.Wb(),T.Wb(),T.Vc(5,$e,4,1,"td",3),T.Xb(6,"td"),T.Xc(7),T.Wb(),T.Vc(8,it,10,3,"td",3),T.Vc(9,st,12,5,"td",3),T.Xb(10,"td"),T.Xb(11,"span",18),T.Xc(12),T.jc(13,"titlecase"),T.jc(14,"userLocations"),T.Wb(),T.Wb(),T.Vc(15,ft,3,2,"td",4),T.Xb(16,"td"),T.Vc(17,dt,1,0,"app-icons",19),T.Xc(18," \xa0\xa0 "),T.Vc(19,St,9,7,"ng-container",20),T.Wb(),T.Wb()}if(2&n){var i=T.ic().$implicit,a=T.ic();T.Db(2),T.rc("ngClass",null!=i&&null!=i.user&&i.user.active?"":a.disabledClass)("nzTooltipTitle",null==i||null==i.user?null:i.user.fullName),T.Db(1),T.Zc(" ",null==i||null==i.user?null:i.user.fullName," "),T.Db(1),T.rc("ngIf",!(null!=i&&null!=i.user&&i.user.active)),T.Db(1),T.rc("ngIf","PHYSICIAN"===a.roleType),T.Db(2),T.Zc(" ",null==i||null==i.user||null==i.user.roles[0]?null:i.user.roles[0].name," "),T.Db(1),T.rc("ngIf","PHYSICIAN"===a.roleType||"MONITORING_STAFF"===a.roleType),T.Db(1),T.rc("ngIf","MONITORING_STAFF"===a.roleType),T.Db(2),T.rc("ngClass",null!=i&&null!=i.user&&i.user.active?"":a.disabledClass),T.Db(1),T.Yc(T.kc(13,12,T.kc(14,14,null==i||null==i.user?null:i.user.locations))),T.Db(5),T.rc("ngIf",null==i||null==i.user?null:i.user.active),T.Db(2),T.rc("isFeaturePermitted",T.xc(16,zt))}}function Xt(n,e){if(1&n&&(T.Vb(0),T.Vc(1,yt,20,17,"tr",3),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("ngIf",null==t?null:t.user)}}var It,Tt,Dt=function(){return{x:"1250px"}},Wt=((It=function(){function n(e,t,i,o){var l=this;a(this,n),this._router=e,this._staffService=t,this._modalService=i,this._dataSharingService=o,this.disabledStyle={color:"darkgrey",cursor:"not-allowed"},this.disabledClass="disabled-staff",this.data=new T.n,this.details=new T.n,this.delete=new T.n,this.enable=new T.n,this.refresh=new T.n,this._dataSharingService.tenantSettings.subscribe(function(n){l.tenantConfig=n}),this._dataSharingService.onSubTenantChange().subscribe(function(n){l.onSubTenantChange(n)})}return l(n,[{key:"role",set:function(n){this.roleType=n}},{key:"showSubTenant",set:function(n){this.showSubTenantColumn=n}},{key:"viewStaff",value:function(n){n.active&&this._router.navigate(["staff/view",n.id],{queryParams:{role:this.roleType,staffName:n.fullName}})}},{key:"getData",value:function(n){this.data.emit(n)}},{key:"showDetails",value:function(n){n.active&&this.details.emit(n)}},{key:"deleteStaff",value:function(n){this.delete.emit(n)}},{key:"disableStaff",value:function(n){var e;n.count.physicians>0?this._router.navigate(["/disable/staff/MONITORING_STAFF/",n.user.id],{queryParams:{role:this.roleType,staffName:null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.fullName}}):this.disable(n.user.id)}},{key:"enableStaff",value:function(n){this.enable.emit(n)}},{key:"editStaff",value:function(n,e){e&&this._router.navigate(["staff/edit",n.id],{queryParams:{role:this.roleType,staffName:n.fullName}})}},{key:"emitRefresh",value:function(){this.refresh.emit()}},{key:"generateAndDownloadReport",value:function(n){this._staffService.generateAndDownloadReport(n).subscribe(function(n){null!=n.fileName&&window.open("".concat(Ae.g.url,"/v2/media/").concat(n.fileName))})}},{key:"disable",value:function(n){var e=this;this._modalService.create({nzContent:_e.a,nzMaskClosable:!1,nzClosable:!1,nzFooter:null,nzTitle:"Are you sure you want to disable the staff?",nzCancelText:null,nzOkText:null,nzWrapClassName:"vertical-center-modal",nzBodyStyle:{paddingTop:"0px"}}).afterClose.subscribe(function(t){t.isConfirmed&&e._staffService.disableMonitoringStaff(n,t.reason).subscribe(function(n){e._modalService.create({nzContent:Oe.a,nzComponentParams:{selectedMonitoringStaffName:t.selectedMonitoringStaffName,referer:"DISABLE_MONITORING_STAFF"},nzTitle:null,nzFooter:null,nzClosable:!1,nzMaskClosable:!1,nzOkText:null,nzCancelText:null}).afterClose.subscribe(function(){e.emitRefresh()})})})}},{key:"redirect",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ALL",i="ALL"===this.patientStatus?null:this.patientStatus;this._router.navigate(["patient"],En.a.MONITORING_STAFF!==this.roleType?{queryParams:{filter:"ALL_PATIENTS",physicians:n,physiciansName:e,patientStatus:i}}:{queryParams:{filter:"ALL_PATIENTS",staffId:n,staffName:e,assignedStaffType:t,patientStatus:i}})}},{key:"redirectNoAssignedStaff",value:function(){this._router.navigate(["patient"],{queryParams:{filter:"ALL_PATIENTS",staffId:"UNASSIGNED",staffName:"No assigned monitoring staff",physicians:"UNASSIGNED",physiciansName:"No assigned physician",assignedStaffType:"ALL",patientStatus:"ALL"===this.patientStatus?null:this.patientStatus}})}},{key:"onSubTenantChange",value:function(n){this.getData(1)}}]),n}()).\u0275fac=function(n){return new(n||It)(T.Rb(D.g),T.Rb(pn.a),T.Rb(Me.f),T.Rb(h.a))},It.\u0275cmp=T.Lb({type:It,selectors:[["app-staff-table"]],inputs:{widthConfig:"widthConfig",role:"role",staffResponse:["staff","staffResponse"],loading:"loading",patientStatus:"patientStatus",showSubTenant:"showSubTenant"},outputs:{data:"data",details:"details",delete:"delete",enable:"enable",refresh:"refresh"},decls:20,vars:17,consts:[[1,"container"],[3,"nzData","nzShowPagination","nzFrontPagination","nzTotal","nzPageSize","nzWidthConfig","nzScroll","nzLoading","nzPageIndexChange"],["staffTable",""],[4,"ngIf"],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],["nz-typography","","nz-tooltip","","nzTooltipTitle","No assigned monitoring staff","nzEllipsis","",1,"no-assigned-staff"],[1,"stats-container"],["nzTitle"," - ","nzValue","Physicians",3,"nzValueStyle"],["class","stats-container","actionable","",3,"click",4,"ngIf"],["nzTitle"," - ","nzValue","Primary",3,"nzValueStyle"],[1,"stats-container","right-aligned"],["nzTitle"," - ","nzValue","Secondary",3,"nzValueStyle"],["patientCount",""],["actionable","",1,"stats-container",3,"click"],["nzValue","Total",3,"nzValueStyle","nzTitle"],["actionable","",3,"click"],["nz-typography","","nz-tooltip","","nzEllipsis","",3,"ngClass","nzTooltipTitle"],["nz-typography","",3,"ngClass"],["name","view","size","20px",3,"click",4,"ngIf"],[4,"isFeaturePermitted"],["nz-tooltip","",3,"nzTooltipTitle","nzColor",4,"ngIf"],["titleTemplate",""],["nz-tooltip","",3,"nzTooltipTitle","nzColor"],["class","stats-container",4,"ngIf"],["class","half-stats-container",4,"ngIf"],["class","half-stats-container right-aligned","actionable","",3,"click",4,"ngIf"],["monitoringStaffCount",""],["physicianCount",""],["nzValue","Physicians",3,"nzValueStyle","nzTitle"],[1,"half-stats-container"],["nzValue","Monitoring Staff",3,"nzTitle"],["actionable","",1,"half-stats-container","right-aligned",3,"click"],["nzValue","Patients",3,"nzValueStyle","nzTitle"],[3,"ngClass"],["nzValue","Primary",3,"nzValueStyle","nzTitle"],["actionable","",1,"stats-container","right-aligned",3,"click"],["nzValue","Secondary",3,"nzValueStyle","nzTitle"],["primaryPatientCount",""],["otherPatientCount",""],["name","view","size","20px",3,"click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","26px"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"nzDisabled","queryParams","click"],["nz-menu-item","","style","color: #c81c1c;",3,"click",4,"ngIf"],["nz-menu-item","","style","color: var(--primary-color);",3,"click",4,"ngIf"],["nz-menu-item","","style","color: #000;",3,"click",4,"ngIf"],["nz-menu-item","",3,"routerLink","queryParams",4,"ngIf"],["nz-menu-item","",2,"color","#c81c1c",3,"click"],["nz-menu-item","",2,"color","var(--primary-color)",3,"click"],["nz-menu-item","",2,"color","#000",3,"click"],["nz-menu-item","",3,"routerLink","queryParams"]],template:function(n,e){if(1&n&&(T.Xb(0,"div",0),T.Xb(1,"nz-table",1,2),T.ec("nzPageIndexChange",function(n){return e.getData(n)}),T.Xb(3,"thead"),T.Xb(4,"tr"),T.Xb(5,"th"),T.Xc(6),T.jc(7,"translate"),T.Wb(),T.Vc(8,Ve,1,0,"th",3),T.Xb(9,"th"),T.Xc(10,"Role"),T.Wb(),T.Vc(11,Le,2,0,"th",3),T.Vc(12,Fe,2,0,"th",3),T.Xb(13,"th"),T.Xc(14,"Site"),T.Wb(),T.Vc(15,Ue,2,0,"th",4),T.Sb(16,"th"),T.Wb(),T.Wb(),T.Xb(17,"tbody"),T.Vc(18,He,21,4,"tr",3),T.Vc(19,Xt,2,1,"ng-container",5),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.Ic(2);T.Db(1),T.rc("nzData",null==e.staffResponse?null:e.staffResponse.result)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",null==e.staffResponse?null:e.staffResponse.totalCount)("nzPageSize",10)("nzWidthConfig",e.widthConfig)("nzScroll",T.xc(16,Dt))("nzLoading",e.loading),T.Db(5),T.Yc(T.kc(7,14,"COMMON.NAME")),T.Db(2),T.rc("ngIf","PHYSICIAN"===e.roleType),T.Db(3),T.rc("ngIf","PHYSICIAN"===e.roleType||"MONITORING_STAFF"===e.roleType),T.Db(1),T.rc("ngIf","MONITORING_STAFF"===e.roleType),T.Db(6),T.rc("ngIf",!e.loading&&"MONITORING_STAFF"===e.roleType),T.Db(1),T.rc("ngForOf",t.data)}},directives:[_.f,_.n,_.o,_.e,_.l,f.q,Ne.a,_.i,f.p,O.a,hn.d,Re.a,R.a,f.o,Ee.a,pe.a,Sn.a,ke.a,ke.b,ke.e,we.c,Vn.a,we.e,D.h],pipes:[zn.a,f.A,Hn.a,xe.a],styles:[".container[_ngcontent-%COMP%]{padding-top:0!important}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left;padding:11px 10px 11px 26px!important}td[_ngcontent-%COMP%]:first-child{text-transform:capitalize;font-weight:700}td[_ngcontent-%COMP%]:last-child{text-align:right}[_nghost-%COMP%]     .ant-typography-ellipsis-single-line{max-width:22ch;margin-bottom:0}app-icons[_ngcontent-%COMP%]{vertical-align:middle}.full-stats-container[_ngcontent-%COMP%]{width:100%;display:inline-block}.half-stats-container[_ngcontent-%COMP%]{width:50%;display:inline-block}.stats-container[_ngcontent-%COMP%]{width:33.33%;display:inline-block}[_nghost-%COMP%]     .ant-statistic{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .ant-statistic-title{font-size:13px!important;margin-bottom:-2px;text-align:center;font-weight:700;color:rgba(15,32,21,.65)}[_nghost-%COMP%]     .ant-statistic-content{font-size:11px!important;text-align:center;font-weight:700;color:rgba(15,32,21,.45)}.right-aligned[_ngcontent-%COMP%]{text-align:center!important;text-align:-webkit-center!important}.disabled-staff[_ngcontent-%COMP%]{color:#a9a9a9;cursor:not-allowed}.no-assigned-staff[_ngcontent-%COMP%]{max-width:30ch!important;margin-bottom:0}"]}),It),Pt=o("zAKX"),Ct=((Tt=function(){function n(){a(this,n),this.availableRoleTypes=new Set}return l(n,[{key:"transform",value:function(n,e){var t=this;if(e)return null!=e.securityConfigs&&null!=e.securityConfigs.customRolesConfig&&e.securityConfigs.customRolesConfig.availableBoundaries.length>0?e.securityConfigs.customRolesConfig.availableRoleTypes.forEach(function(n){"PATIENT"!=n&&"TENANT_ADMIN"!=n&&t.availableRoleTypes.add(n)}):this.availableRoleTypes=new Set([En.a.MONITORING_STAFF,En.a.PHYSICIAN]),this.availableRoleTypes.has(En.a[n])}}]),n}()).\u0275fac=function(n){return new(n||Tt)},Tt.\u0275pipe=T.Qb({name:"roleTypeEnabled",type:Tt,pure:!0}),Tt),At=function(){return["."]},_t=function(){return{role:"TENANT_ADMIN"}};function Ot(n,e){1&n&&(T.Xb(0,"a",7),T.Xc(1,"Tenant Admins"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,At))("queryParams",T.xc(3,_t))}function Mt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"nz-tab"),T.Vc(1,Ot,2,4,"a",5),T.Xb(2,"app-staff-table",6),T.ec("data",function(n){return T.Lc(t),T.ic(3).getStaff(n)})("details",function(n){return T.Lc(t),T.ic(3).showDetails(n)})("delete",function(n){return T.Lc(t),T.ic(3).deleteStaff(n)}),T.Wb(),T.Wb()}if(2&n){var i=T.ic(3);T.Db(2),T.rc("role",i.role)("staff",i.staffResponse)("loading",i.isLoading)("showSubTenant",i.isAccessAcrossSubTenants)}}var Nt=function(){return["VIEW_TENANT_ADMIN","ADD_TENANT_ADMIN","EDIT_TENANT_ADMIN"]};function Rt(n,e){1&n&&(T.Vb(0),T.Vc(1,Mt,3,4,"nz-tab",4),T.Ub()),2&n&&(T.Db(1),T.rc("anyFeaturePermitted",T.xc(1,Nt)))}var Et=function(){return{role:"PHYSICIAN"}};function kt(n,e){1&n&&(T.Xb(0,"a",7),T.Xc(1,"Physicians"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,At))("queryParams",T.xc(3,Et))}function wt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-staff-table",9),T.ec("data",function(n){return T.Lc(t),T.ic(4).getStaff(n)})("details",function(n){return T.Lc(t),T.ic(4).showDetails(n)})("delete",function(n){return T.Lc(t),T.ic(4).deleteStaff(n)}),T.Wb()}if(2&n){var i=T.ic(4);T.rc("role",i.role)("staff",i.staffResponse)("patientStatus",i.patientStatus)("loading",i.isLoading)("showSubTenant",i.isAccessAcrossSubTenants)("widthConfig",i.isAccessAcrossSubTenants?i.widthConfig.physicianWithSubTenant:i.widthConfig.physicianWithoutSubTenant)}}function xt(n,e){if(1&n&&(T.Xb(0,"nz-tab"),T.Vc(1,kt,2,4,"a",5),T.Vc(2,wt,1,6,"app-staff-table",8),T.jc(3,"roleTypeEnabled"),T.Wb()),2&n){var t=T.ic(3);T.Db(2),T.rc("ngIf",T.lc(3,1,"PHYSICIAN",t.tenantConfig))}}var Vt=function(){return{role:"MONITORING_STAFF"}};function Lt(n,e){1&n&&(T.Xb(0,"a",7),T.Xc(1,"Monitoring Staff"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,At))("queryParams",T.xc(3,Vt))}function Ft(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-staff-table",11),T.ec("data",function(n){return T.Lc(t),T.ic(4).getStaff(n)})("details",function(n){return T.Lc(t),T.ic(4).showDetails(n)})("delete",function(n){return T.Lc(t),T.ic(4).deleteStaff(n)})("enable",function(n){return T.Lc(t),T.ic(4).enableStaff(n)})("refresh",function(n){return T.Lc(t),T.ic(4).refreshList(n)}),T.Wb()}if(2&n){var i=T.ic(4);T.rc("role",i.role)("staff",i.staffResponse)("patientStatus",i.patientStatus)("loading",i.isLoading)("showSubTenant",i.isAccessAcrossSubTenants)("widthConfig",i.isAccessAcrossSubTenants?i.widthConfig.monitoringStaffWithSubTenant:i.widthConfig.monitoringStaffWithoutSubTenant)}}function Ut(n,e){if(1&n&&(T.Xb(0,"nz-tab"),T.Vc(1,Lt,2,4,"a",5),T.Vc(2,Ft,1,6,"app-staff-table",10),T.jc(3,"roleTypeEnabled"),T.Wb()),2&n){var t=T.ic(3);T.Db(2),T.rc("ngIf",T.lc(3,1,"MONITORING_STAFF",t.tenantConfig))}}var jt=function(){return{role:"ENROLMENT_STAFF"}};function Gt(n,e){1&n&&(T.Xb(0,"a",7),T.Xc(1,"Enrollment Staff"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,At))("queryParams",T.xc(3,jt))}function Yt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-staff-table",9),T.ec("data",function(n){return T.Lc(t),T.ic(4).getStaff(n)})("details",function(n){return T.Lc(t),T.ic(4).showDetails(n)})("delete",function(n){return T.Lc(t),T.ic(4).deleteStaff(n)}),T.Wb()}if(2&n){var i=T.ic(4);T.rc("role",i.role)("staff",i.staffResponse)("patientStatus",i.patientStatus)("loading",i.isLoading)("showSubTenant",i.isAccessAcrossSubTenants)("widthConfig",i.isAccessAcrossSubTenants?i.widthConfig.enrollmentStaffWithSubTenant:i.widthConfig.enrollmentStaffWithoutSubTenant)}}function Ht(n,e){if(1&n&&(T.Xb(0,"nz-tab"),T.Vc(1,Gt,2,4,"a",5),T.Vc(2,Yt,1,6,"app-staff-table",8),T.jc(3,"roleTypeEnabled"),T.Wb()),2&n){var t=T.ic(3);T.Db(2),T.rc("ngIf",T.lc(3,1,"ENROLMENT_STAFF",t.tenantConfig))}}var Bt=function(){return{role:"MANAGER_STAFF"}};function qt(n,e){1&n&&(T.Xb(0,"a",7),T.Xc(1,"Managers"),T.Wb()),2&n&&T.rc("routerLink",T.xc(2,At))("queryParams",T.xc(3,Bt))}function Zt(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-staff-table",9),T.ec("data",function(n){return T.Lc(t),T.ic(4).getStaff(n)})("details",function(n){return T.Lc(t),T.ic(4).showDetails(n)})("delete",function(n){return T.Lc(t),T.ic(4).deleteStaff(n)}),T.Wb()}if(2&n){var i=T.ic(4);T.rc("role",i.role)("staff",i.staffResponse)("patientStatus",i.patientStatus)("loading",i.isLoading)("showSubTenant",i.isAccessAcrossSubTenants)("widthConfig",i.isAccessAcrossSubTenants?i.widthConfig.managerWithSubTenant:i.widthConfig.managerWithoutSubTenant)}}function $t(n,e){if(1&n&&(T.Xb(0,"nz-tab"),T.Vc(1,qt,2,4,"a",5),T.Vc(2,Zt,1,6,"app-staff-table",8),T.jc(3,"roleTypeEnabled"),T.Wb()),2&n){var t=T.ic(3);T.Db(2),T.rc("ngIf",T.lc(3,1,"MANAGER_STAFF",t.tenantConfig))}}var Qt=function(){return["VIEW_PHYSICIAN","ADD_PHYSICIAN","EDIT_PHYSICIAN"]},Kt=function(){return["VIEW_MONITORING_STAFF","ADD_MONITORING_STAFF","EDIT_MONITORING_STAFF","DELETE_MONITORING_STAFF"]},Jt=function(){return["VIEW_ENROLMENT_STAFF","ADD_ENROLMENT_STAFF","EDIT_ENROLMENT_STAFF","DELETE_ENROLMENT_STAFF"]},ni=function(){return["VIEW_MANAGER_STAFF","ADD_MANAGER_STAFF","EDIT_MANAGER_STAFF","DELETE_MANAGER_STAFF"]};function ei(n,e){1&n&&(T.Vb(0),T.Vc(1,xt,4,4,"nz-tab",4),T.Vc(2,Ut,4,4,"nz-tab",4),T.Vc(3,Ht,4,4,"nz-tab",4),T.Vc(4,$t,4,4,"nz-tab",4),T.Ub()),2&n&&(T.Db(1),T.rc("anyFeaturePermitted",T.xc(4,Qt)),T.Db(1),T.rc("anyFeaturePermitted",T.xc(5,Kt)),T.Db(1),T.rc("anyFeaturePermitted",T.xc(6,Jt)),T.Db(1),T.rc("anyFeaturePermitted",T.xc(7,ni)))}function ti(n,e){if(1&n){var t=T.Yb();T.Xb(0,"nz-tabset",2),T.ec("nzSelectedIndexChange",function(){return T.Lc(t),T.ic().onTabChange()}),T.Vc(1,Rt,2,2,"ng-container",3),T.jc(2,"roleTypeEnabled"),T.Vc(3,ei,5,8,"ng-container",3),T.jc(4,"roleTypeEnabled"),T.Wb()}if(2&n){var i=T.ic(),a=T.Ic(2);T.rc("nzTabBarExtraContent",a),T.Db(1),T.rc("ngIf",T.lc(2,3,"TENANT_ADMIN",i.tenantConfig)),T.Db(2),T.rc("ngIf",T.lc(4,6,"PHYSICIAN",i.tenantConfig))}}function ii(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",12),T.Xb(1,"div",13),T.Xb(2,"label",14),T.Xc(3,"Patient Status"),T.Wb(),T.Wb(),T.Xb(4,"div",13),T.Xb(5,"nz-select",15),T.ec("ngModelChange",function(n){return T.Lc(t),T.ic().patientStatus=n})("ngModelChange",function(){return T.Lc(t),T.ic().onPatientStatusChange()}),T.Sb(6,"nz-option",16),T.Sb(7,"nz-option",17),T.Wb(),T.Wb(),T.Wb()}if(2&n){var i=T.ic();T.Db(5),T.rc("ngModel",i.patientStatus)}}var ai,oi,li,ri=((ai=function(n){r(t,n);var e=c(t);function t(n,i,o,l,r,s){var c,u;return a(this,t),(c=e.call(this))._staffService=n,c._router=i,c._notificationsService=o,c._staffDrawerService=l,c._dataSharingService=r,c._activatedRoute=s,c.pageIndex=1,c.status="ACTIVE",c.patientStatus="ACTIVE",c.staff$=new We.Subject,c.isLoading=!0,c.initTableWidth(),c._activatedRoute.queryParams.pipe(Object(ue.a)(c.unsubscribed)).subscribe(function(n){c.role=n.role,c.getStaff()}),null===(u=c._dataSharingService.tenantSettings)||void 0===u||u.pipe(Object(ue.a)(c.unsubscribed)).subscribe(function(n){var e;n&&(c.tenantConfig=n,c.initialiseStaff$(),null===(e=c.staff$)||void 0===e||e.next())}),c._routeHelperService.getMultiActionTriggered().pipe(Object(fe.a)(function(n){return!!n}),Object(ue.a)(c.unsubscribed)).subscribe(function(n){return c.addStaff(n)}),c._routeHelperService.getSearch().pipe(Object(fe.a)(function(n){return null!==n}),Object(ue.a)(c.unsubscribed)).subscribe(function(n){return c.getStaff(1,n)}),c}return l(t,[{key:"initialiseStaff$",value:function(){var n=this;this.staff$.pipe(Object(ce.switchMap)(function(){return n._staffService.fetchStaffMembers(n.role,n.getOffset(n.pageIndex),10,n.searchKey,n.status,n.patientStatus,n.role==En.a.MONITORING_STAFF)})).pipe(Object(ue.a)(this.unsubscribed)).subscribe(function(e){n.staffResponse=e,n.isLoading=!1})}},{key:"onPatientStatusChange",value:function(){this.refreshList()}},{key:"addStaff",value:function(n){"BULK_PHYSICIAN"===n?this._router.navigate(["staff/physician/bulk-upload"]):this._router.navigate(["staff/add"],{queryParams:{role:n}})}},{key:"getOffset",value:function(n){return 1!==n?10*(n-1):0}},{key:"getStaff",value:function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ACTIVE";this.staffResponse=void 0,this.isLoading=!0,"MONITORING_STAFF"==this.role&&(i="ALL"),this.pageIndex=e,this.searchKey=t,this.status=i,null===(n=this.staff$)||void 0===n||n.next()}},{key:"deleteStaff",value:function(n){var e=this;this._staffService.delete(n).subscribe(function(){e.getStaff(),e._notificationsService.success("Staff","Staff member removed successfully")})}},{key:"showDetails",value:function(n){this._staffDrawerService.staffDetails(n)}},{key:"enableStaff",value:function(n){var e=this;this._staffService.enabledStaff(n).subscribe(function(){e.getStaff(),e._notificationsService.success("Staff","Staff member enabled successfully")})}},{key:"onTabChange",value:function(){this.staffResponse=new De}},{key:"refreshList",value:function(){this.getStaff()}},{key:"initTableWidth",value:function(){this.widthConfig={physicianWithoutSubTenant:["15%","3%","10%","13%","20%","10%"],physicianWithSubTenant:["15%","7%","10%","20%","20%","20%","10%"],enrollmentStaffWithoutSubTenant:["23%","10%","27%","40%"],enrollmentStaffWithSubTenant:["23 %","10%","30%","30%","15%"],managerWithoutSubTenant:["23%","10%","27%","40%"],managerWithSubTenant:["23%","10%","30%","30%","15%"],monitoringStaffWithoutSubTenant:["20%","14%","8%","18%","30%","10%"],monitoringStaffWithSubTenant:["15%","10%","10%","17%","20%","20%","10%"]}}}]),t}(X.a)).\u0275fac=function(n){return new(n||ai)(T.Rb(pn.a),T.Rb(D.g),T.Rb(xn.b),T.Rb(Te),T.Rb(h.a),T.Rb(D.a))},ai.\u0275cmp=T.Lb({type:ai,selectors:[["app-staff-list"]],features:[T.Ab],decls:3,vars:1,consts:[["nzLinkRouter","",3,"nzTabBarExtraContent","nzSelectedIndexChange",4,"ngIf"],["patientStatusTemplate",""],["nzLinkRouter","",3,"nzTabBarExtraContent","nzSelectedIndexChange"],[4,"ngIf"],[4,"anyFeaturePermitted"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],[3,"role","staff","loading","showSubTenant","data","details","delete"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete",4,"ngIf"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete","enable","refresh",4,"ngIf"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete","enable","refresh"],["nz-row","","nzAlign","middle","nzGutter","12"],["nz-col",""],["nz-typography","","nzType","secondary"],["nzPlaceHolder","Select patient type",2,"min-width","100px",3,"ngModel","ngModelChange"],["nzValue","ALL","nzLabel","All"],["nzValue","ACTIVE","nzLabel","Active"]],template:function(n,e){1&n&&(T.Vc(0,ti,5,9,"nz-tabset",0),T.Vc(1,ii,8,1,"ng-template",null,1,T.Wc)),2&n&&T.rc("ngIf",e.tenantConfig)},directives:[f.q,Pe.d,Ce.a,Pe.a,Pe.c,Wt,Pe.b,D.j,N.c,N.a,O.a,Pt.d,g.u,g.x,Pt.a],pipes:[Ct],styles:["nz-tabset[_ngcontent-%COMP%]{margin-top:10px}a[_ngcontent-%COMP%]{color:var(--light-black)}"]}),ai),si=o("BoNt"),ci=o("Zy1z"),ui=o("Kj3r"),fi=o("/uUt"),di=o("eIep"),bi=o("rzIX"),pi=o("aOTX"),gi=o("mfqL"),vi=o("1jOk"),mi=o("4+6U"),hi=o("RKSz"),Si=function n(){a(this,n),this.firstName=new g.i(null,g.D.required),this.lastName=new g.i(null,g.D.required),this.username=new g.i,this.email=new g.i(null,[g.D.required,g.D.email]),this.password=new g.i(null,g.D.minLength(8)),this.dateOfBirth=new g.i(null),this.timeZone=new g.i(null,g.D.required),this.gender=new g.i(null,g.D.required),this.language=new g.i(null,g.D.required),this.streetAddress=new g.i,this.streetAddress2=new g.i,this.city=new g.i,this.state=new g.i,this.country=new g.i,this.zipCode=new g.i,this.poBox=new g.i,this.lat=new g.i,this.lng=new g.i,this.mobile=new g.i(null,[g.D.minLength(6),g.D.maxLength(15),g.D.pattern(/^[0-9 -]\d*$/)]),this.site=new g.i(null,g.D.required),this.otherSites=new g.i,this.profileTags=new g.i,this.programs=new g.i,this.staffId=new g.i,this.npiId=new g.i,this.credentials=new g.i},zi=o("sWYD"),yi=o("NFKh"),Xi=o("BcC3"),Ii=function(n){if(n)return Object(zi.a)(n,"yyyy-MM-dd")},Ti=function(n){var e,t,i,a,o,l,r,s,c,u,f,d,b,p,g,v,m,h,S,z,y,X;return{line1:null===(t=null===(e=null==n?void 0:n.controls)||void 0===e?void 0:e.streetAddress)||void 0===t?void 0:t.value,line2:null===(a=null===(i=null==n?void 0:n.controls)||void 0===i?void 0:i.streetAddress2)||void 0===a?void 0:a.value,city:null===(l=null===(o=null==n?void 0:n.controls)||void 0===o?void 0:o.city)||void 0===l?void 0:l.value,state:null===(s=null===(r=null==n?void 0:n.controls)||void 0===r?void 0:r.state)||void 0===s?void 0:s.value,country:null===(u=null===(c=null==n?void 0:n.controls)||void 0===c?void 0:c.country)||void 0===u?void 0:u.value,location:null===(d=null===(f=null==n?void 0:n.controls)||void 0===f?void 0:f.location)||void 0===d?void 0:d.value,pin:null===(p=null===(b=null==n?void 0:n.controls)||void 0===b?void 0:b.zipCode)||void 0===p?void 0:p.value,zipCode:null===(v=null===(g=null==n?void 0:n.controls)||void 0===g?void 0:g.zipCode)||void 0===v?void 0:v.value,poBox:null===(h=null===(m=null==n?void 0:n.controls)||void 0===m?void 0:m.poBox)||void 0===h?void 0:h.value,lat:null===(z=null===(S=null==n?void 0:n.controls)||void 0===S?void 0:S.lat)||void 0===z?void 0:z.value,lng:null===(X=null===(y=null==n?void 0:n.controls)||void 0===y?void 0:y.lng)||void 0===X?void 0:X.value}},Di=function(n){var e,t,i,a,o,l,r;if(!(null===(t=null===(e=null==n?void 0:n.controls)||void 0===e?void 0:e.credentials)||void 0===t?void 0:t.value)||!(null===(o=null===(a=null===(i=null==n?void 0:n.controls)||void 0===i?void 0:i.credentials)||void 0===a?void 0:a.value)||void 0===o?void 0:o.length))return null;var s=new Array;return s.push(null===(r=null===(l=null==n?void 0:n.controls)||void 0===l?void 0:l.credentials)||void 0===r?void 0:r.value),s},Wi=function(n,e){var t;16<=(null==n?void 0:n.length)?n=null==n?void 0:n.substring(0,16):15>(null==n?void 0:n.length)?n+="1234567891234567".substring(0,16-(null==n?void 0:n.length)):n||(n="1234567891234567");var i=yi.enc.Latin1.parse(n),a=yi.enc.Latin1.parse(n);return null===(t=yi.AES.encrypt(e,i,{iv:a,mode:yi.mode.CBC,padding:yi.pad.ZeroPadding}))||void 0===t?void 0:t.toString()},Pi=function(n){if(null==n?void 0:n.length)return null==n?void 0:n.map(function(n){return n.split("_")[0]})},Ci=o("5Qfn"),Ai=o("2sp+"),_i=o("h8ax"),Oi=o.n(_i),Mi=o("faT0"),Ni=o.n(Mi),Ri=o("bnsq"),Ei=((li=function(){function n(){a(this,n)}return l(n,[{key:"transform",value:function(n,e){var t="permissions";"GROUP"==e&&(t="permissionGroups");var i=localStorage.getItem(t);return this.permissions=new Map(JSON.parse(i)),this.permissions.get(n)}}]),n}()).\u0275fac=function(n){return new(n||li)},li.\u0275pipe=T.Qb({name:"permissionName",type:li,pure:!0}),li),ki=((oi=function(){function n(){a(this,n)}return l(n,[{key:"transform",value:function(n,e,t){return!t&&null!=e&&0!=e.length&&null!=e.find(function(e){return e===n})}}]),n}()).\u0275fac=function(n){return new(n||oi)},oi.\u0275pipe=T.Qb({name:"isDefaultPermission",type:oi,pure:!0}),oi);function wi(n,e){1&n&&(T.Xb(0,"div",6),T.Xb(1,"span",7),T.Xc(2," You have removed some default permissions which are not recommended. "),T.Wb(),T.Wb())}function xi(n,e){1&n&&(T.Xb(0,"nz-tag",15),T.Xc(1,"DF"),T.Wb()),2&n&&T.rc("nzColor","green")}function Vi(n,e){if(1&n&&(T.Xb(0,"div",12),T.Xb(1,"span",13),T.jc(2,"permissionName"),T.Xb(3,"strong"),T.Xc(4),T.jc(5,"permissionName"),T.Wb(),T.Vc(6,xi,2,1,"nz-tag",14),T.jc(7,"isDefaultPermission"),T.Wb(),T.Wb()),2&n){var t=e.$implicit,i=T.ic(3);T.Db(1),T.sc("nzTooltipTitle",T.kc(2,3,t)),T.Db(3),T.Yc(T.kc(5,5,t)),T.Db(2),T.rc("ngIf",T.lc(7,7,t,i.defaultPrivileges))}}function Li(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"span",17),T.ec("click",function(){return T.Lc(t),T.ic(4).onClick("MORE","ADDED")}),T.Xb(2,"strong"),T.Xc(3),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=T.ic(4);T.Db(3),T.Zc(" Show More + (",i.addedPermissions.length-i.addedPermissionsList.length,") ")}}function Fi(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"span",17),T.ec("click",function(){return T.Lc(t),T.ic(4).onClick("LESS","ADDED")}),T.Xb(2,"strong"),T.Xc(3," Show Less - "),T.Wb(),T.Wb(),T.Ub()}}function Ui(n,e){if(1&n&&(T.Xb(0,"div",16),T.Vc(1,Li,4,1,"ng-container",9),T.Vc(2,Fi,4,0,"ng-container",9),T.Wb()),2&n){var t=T.ic(3);T.Db(1),T.rc("ngIf",!t.addedPermissionsShowMore),T.Db(1),T.rc("ngIf",t.addedPermissionsShowMore)}}function ji(n,e){if(1&n&&(T.Vb(0),T.Vc(1,Vi,8,10,"div",10),T.Vc(2,Ui,3,2,"div",11),T.Ub()),2&n){var t=T.ic(2);T.Db(1),T.rc("ngForOf",t.addedPermissionsList),T.Db(1),T.rc("ngIf",t.addedPermissions.length>9)}}function Gi(n,e){1&n&&(T.Vb(0),T.Xb(1,"div",16),T.Sb(2,"nz-empty",18),T.Wb(),T.Ub())}function Yi(n,e){if(1&n&&(T.Xb(0,"div",6),T.Xb(1,"nz-card",8),T.Xb(2,"div",3),T.Xb(3,"strong"),T.Xc(4,"Added Permissions"),T.Wb(),T.Sb(5,"nz-divider"),T.Wb(),T.Xb(6,"div",3),T.Vc(7,ji,3,2,"ng-container",9),T.Vc(8,Gi,3,0,"ng-container",9),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.ic();T.Db(7),T.rc("ngIf",t.addedPermissions.length>0),T.Db(1),T.rc("ngIf",0==t.addedPermissions.length)}}function Hi(n,e){1&n&&(T.Xb(0,"nz-tag",15),T.Xc(1,"DF"),T.Wb()),2&n&&T.rc("nzColor","green")}function Bi(n,e){if(1&n&&(T.Xb(0,"div",12),T.Xb(1,"span",19),T.jc(2,"permissionName"),T.Xb(3,"strong"),T.Xc(4),T.jc(5,"permissionName"),T.Wb(),T.Wb(),T.Xb(6,"span",20),T.Vc(7,Hi,2,1,"nz-tag",14),T.jc(8,"isDefaultPermission"),T.Wb(),T.Wb()),2&n){var t=e.$implicit,i=T.ic(3);T.Db(1),T.sc("nzTooltipTitle",T.kc(2,3,t)),T.Db(3),T.Yc(T.kc(5,5,t)),T.Db(3),T.rc("ngIf",T.lc(8,7,t,i.defaultPrivileges))}}function qi(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"span",17),T.ec("click",function(){return T.Lc(t),T.ic(4).onClick("MORE","REMOVED")}),T.Xb(2,"strong"),T.Xc(3),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=T.ic(4);T.Db(3),T.Zc(" Show More + (",i.removedPermissions.length-i.removedPermissionsList.length,") ")}}function Zi(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"span",17),T.ec("click",function(){return T.Lc(t),T.ic(4).onClick("LESS","REMOVED")}),T.Xb(2,"strong"),T.Xc(3," Show Less - "),T.Wb(),T.Wb(),T.Ub()}}function $i(n,e){if(1&n&&(T.Xb(0,"div",16),T.Vc(1,qi,4,1,"ng-container",9),T.Vc(2,Zi,4,0,"ng-container",9),T.Wb()),2&n){var t=T.ic(3);T.Db(1),T.rc("ngIf",!t.removedPermissionsShowMore),T.Db(1),T.rc("ngIf",t.removedPermissionsShowMore)}}function Qi(n,e){if(1&n&&(T.Vb(0),T.Vc(1,Bi,9,10,"div",10),T.Vc(2,$i,3,2,"div",11),T.Ub()),2&n){var t=T.ic(2);T.Db(1),T.rc("ngForOf",t.removedPermissionsList),T.Db(1),T.rc("ngIf",t.removedPermissions.length>9)}}function Ki(n,e){1&n&&(T.Vb(0),T.Xb(1,"div",16),T.Sb(2,"nz-empty",18),T.Wb(),T.Ub())}function Ji(n,e){if(1&n&&(T.Xb(0,"div",6),T.Xb(1,"nz-card",8),T.Xb(2,"div",3),T.Xb(3,"strong"),T.Xc(4,"Removed Permissions"),T.Wb(),T.Sb(5,"nz-divider"),T.Wb(),T.Xb(6,"div",3),T.Vc(7,Qi,3,2,"ng-container",9),T.Vc(8,Ki,3,0,"ng-container",9),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.ic();T.Db(7),T.rc("ngIf",t.removedPermissions.length>0),T.Db(1),T.rc("ngIf",0==t.removedPermissions.length)}}var na,ea,ta,ia=((ta=function(){function n(e){a(this,n),this.modalRef=e,this.isDefaultPrivilegesUpdated=!1,this.addedPermissionsShowMore=!1,this.removedPermissionsShowMore=!1}return l(n,[{key:"ngOnInit",value:function(){var n=this;this.isDefaultPrivilegesUpdated=this.defaultPrivileges.filter(function(e){return n.removedPermissions.indexOf(e)>-1}).length>0,this.addedPermissionsList=this.addedPermissions.length>9?this.addedPermissions.slice(0,8):this.addedPermissions,this.removedPermissionsList=this.removedPermissions.length>9?this.removedPermissions.slice(0,8):this.removedPermissions}},{key:"showMore",value:function(n){switch(n){case"ADDED":this.addedPermissionsShowMore=!0,this.addedPermissionsList=e(this.addedPermissions);break;case"REMOVED":this.removedPermissionsShowMore=!0,this.removedPermissionsList=e(this.removedPermissions)}}},{key:"showLess",value:function(n){switch(n){case"ADDED":this.addedPermissionsShowMore=!1,this.addedPermissionsList=e(this.addedPermissions.slice(0,8));break;case"REMOVED":this.removedPermissionsShowMore=!1,this.removedPermissionsList=e(this.removedPermissions.slice(0,8))}}},{key:"onClick",value:function(n,e){switch(n){case"MORE":this.showMore(e);break;case"LESS":this.showLess(e)}}},{key:"confirm",value:function(){this.modalRef.close(!0)}}]),n}()).\u0275fac=function(n){return new(n||ta)(T.Rb(Me.e))},ta.\u0275cmp=T.Lb({type:ta,selectors:[["app-updated-permissions-modal"]],inputs:{addedPermissions:"addedPermissions",removedPermissions:"removedPermissions",defaultPrivileges:"defaultPrivileges"},decls:10,vars:4,consts:[["cdkDrag","","cdkDragRootElement",".ant-modal-content","cdkDragHandle",""],["nz-row","","nzGutter","24","cdkDrag","","cdkDragRootElement",".ant-modal-content","cdkDragHandle",""],["nz-col","","nzSpan","24",4,"ngIf"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","24",1,"confirm-btn-container"],["nz-button","","nzType","primary",3,"nzSize","click"],["nz-col","","nzSpan","24"],[1,"default-privileges-updated-error"],[1,"permissions-card"],[4,"ngIf"],["nz-col","","nzSpan","8","class","each-permissions",4,"ngFor","ngForOf"],["nz-col","","nzSpan","8",4,"ngIf"],["nz-col","","nzSpan","8",1,"each-permissions"],["nz-tooltip","",1,"wrap",3,"nzTooltipTitle"],["class","df-tag",3,"nzColor",4,"ngIf"],[1,"df-tag",3,"nzColor"],["nz-col","","nzSpan","8"],[1,"more-less-span",3,"click"],["nzNotFoundContent","No Changes"],["nz-tooltip","",1,"wrap",2,"width","85%",3,"nzTooltipTitle"],[2,"width","15%"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Vc(2,wi,3,0,"div",2),T.Vc(3,Yi,9,2,"div",2),T.Vc(4,Ji,9,2,"div",2),T.Wb(),T.Xb(5,"div",3),T.Sb(6,"nz-divider"),T.Xb(7,"div",4),T.Xb(8,"button",5),T.ec("click",function(){return e.confirm()}),T.Xc(9," Confirm "),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(2),T.rc("ngIf",e.isDefaultPrivilegesUpdated),T.Db(1),T.rc("ngIf",e.addedPermissions.length>0),T.Db(1),T.rc("ngIf",e.removedPermissions.length>0),T.Db(4),T.rc("nzSize","medium"))},directives:[N.c,f.q,E.a,N.a,Fn.a,Un.a,Vn.a,mn.a,f.p,hn.d,pe.a,jn.b],pipes:[Ei,ki],styles:[".permissions-card[_ngcontent-%COMP%]{margin:10px 0}[_nghost-%COMP%]     .ant-card-bordered{border:1px solid grey}[_nghost-%COMP%]     .ant-card-body{padding-top:10px}.default-privileges-updated-error[_ngcontent-%COMP%]{color:red}.each-permissions[_ngcontent-%COMP%]{padding-bottom:5px;padding-left:0}.wrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.more-less-span[_ngcontent-%COMP%]{color:var(--primary-color);cursor:pointer}[_nghost-%COMP%]     .ant-modal-body{padding-top:0!important}[_nghost-%COMP%]     .ant-divider-horizontal{margin:5px 0}[_nghost-%COMP%]     .ant-tag{font-size:9px;height:20px;width:23px;padding-left:5px}.df-tag[_ngcontent-%COMP%]{margin-left:8px}.confirm-btn-container[_ngcontent-%COMP%]{text-align:end;margin-top:12px}"]}),ta),aa=((ea=function(){function n(){a(this,n)}return l(n,[{key:"transform",value:function(n){if(null==En.a[n])return n;var e=new Map;return e.set(En.a.PHYSICIAN,"Physician"),e.set(En.a.MONITORING_STAFF,"Monitoring Staff"),e.set(En.a.ENROLMENT_STAFF,"Enrollment Staff"),e.set(En.a.MANAGER_STAFF,"Manager"),e.set(En.a.PATIENT,"Patient"),e.set(En.a.TENANT_ADMIN,"Tenant Admin"),e.set(En.a.LOCATION_ADMIN,"Location Admin"),e.set(En.a.CUSTOM,null==n?void 0:n.toString()),e.get(En.a[n])}}]),n}()).\u0275fac=function(n){return new(n||ea)},ea.\u0275pipe=T.Qb({name:"roleName",type:ea,pure:!0}),ea),oa=((na=function(){function n(){a(this,n)}return l(n,[{key:"transform",value:function(n,e){return null!=e.find(function(e){return e==n})}}]),n}()).\u0275fac=function(n){return new(n||na)},na.\u0275pipe=T.Qb({name:"isChecked",type:na,pure:!0}),na);function la(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Sb(1,"div",12),T.Xb(2,"div",10),T.Xb(3,"button",13),T.ec("click",function(){return T.Lc(t),T.ic(2).onEdit()}),T.Sb(4,"app-icons",14),T.Xc(5," Edit Permissions "),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=T.ic(2);T.Db(3),T.rc("nzSize","medium")("nzLoading",i.saveBtnLoading)}}function ra(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"span",22),T.Xb(2,"span",23),T.Xc(3),T.jc(4,"tenantName"),T.Wb(),T.Wb(),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(3),T.Zc(" ",T.kc(4,1,null==t.value?null:t.value.tenantId)," ")}}function sa(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-option",18),T.Xb(2,"span",19),T.Xb(3,"span",20),T.Xc(4),T.Wb(),T.Vc(5,ra,5,3,"ng-container",21),T.Wb(),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.sc("nzLabel",t.value.name),T.rc("nzValue",null==t?null:t.key),T.Db(3),T.Zc(" ",t.value.name," ")}}function ca(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"nz-select",16),T.ec("ngModelChange",function(n){return T.Lc(t),T.ic(3).roleId=n})("ngModelChange",function(n){return T.Lc(t),T.ic(3).onRoleChange(n)}),T.Vc(2,sa,6,3,"ng-container",17),T.jc(3,"keyvalue"),T.Wb(),T.Ub()}if(2&n){var i=T.ic(3);T.Db(1),T.rc("ngModel",i.roleId),T.Db(1),T.rc("ngForOf",T.kc(3,2,i.roleIdMap))}}function ua(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",10),T.Xb(1,"button",13),T.ec("click",function(n){return T.Lc(t),T.ic(3).updatePermissions(n)}),T.Sb(2,"app-icons",24),T.Xc(3," Save Permissions "),T.Wb(),T.Wb()}if(2&n){var i=T.ic(3);T.Db(1),T.rc("nzSize","medium")("nzLoading",i.saveBtnLoading)}}function fa(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"div",10),T.Vc(2,ca,4,4,"ng-container",3),T.Wb(),T.Vc(3,ua,4,2,"div",15),T.Ub()),2&n){var t=T.ic(2);T.Db(2),T.rc("ngIf",t.showRolesDropDown),T.Db(1),T.rc("ngIf","NEW"!=t.userMode&&!t.preview)}}function da(n,e){if(1&n&&(T.Vb(0),T.Vc(1,la,6,2,"ng-container",3),T.Vc(2,fa,4,2,"ng-container",3),T.Xb(3,"div",10),T.Xb(4,"button",11),T.Xc(5," Available Dashboard Widgets "),T.Wb(),T.Wb(),T.Ub()),2&n){var t=T.ic();T.Db(1),T.rc("ngIf",t.preview),T.Db(1),T.rc("ngIf",!t.preview),T.Db(2),T.tc("routerLink","/staff/view/",t.userId,"/dashboard-widgets"),T.rc("nzSize","medium")("nzLoading",t.saveBtnLoading)}}function ba(n,e){1&n&&(T.Vb(0),T.Xc(1," and accross all the selected sub tenants"),T.Ub())}function pa(n,e){1&n&&(T.Xb(0,"nz-tag",33),T.Xc(1,"DF"),T.Wb()),2&n&&T.rc("nzColor","green")}function ga(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"div",30),T.Xb(2,"label",31),T.ec("ngModelChange",function(n){T.Lc(t);var i=e.$implicit;return T.ic(5).onChange(n,i)}),T.jc(3,"isChecked"),T.Xc(4),T.jc(5,"permissionName"),T.Wb(),T.Vc(6,pa,2,1,"nz-tag",32),T.jc(7,"isDefaultPermission"),T.Wb(),T.Ub()}if(2&n){var i=e.$implicit,a=T.ic(5);T.Db(2),T.rc("ngModel",T.lc(3,4,i,a.allStaffPermissions))("ngClass",a.preview?"preview disabled":"edit"),T.Db(2),T.Zc(" ",T.kc(5,7,i)," "),T.Db(2),T.rc("ngIf",T.lc(7,9,i,a.defaultPrivileges))}}function va(n,e){if(1&n&&(T.Xb(0,"div",29),T.Vc(1,ga,8,12,"ng-container",17),T.Wb()),2&n){var t=T.ic(2).$implicit;T.Db(1),T.rc("ngForOf",null==t?null:t.value)}}function ma(n,e){if(1&n&&(T.Xb(0,"div",26),T.Xb(1,"strong",27),T.Xc(2),T.jc(3,"permissionName"),T.Wb(),T.Vb(4),T.Vc(5,va,2,1,"div",28),T.Ub(),T.Wb()),2&n){var t=T.ic(),i=t.index,a=t.$implicit;T.rc("nzSm",i%2==0?11:13)("nzMd",(i+1)%4==0?7:(i+1)%3==0?5:6),T.Db(2),T.Yc(T.lc(3,4,null==a?null:a.key,"GROUP")),T.Db(3),T.rc("ngIf",!(null==a||null==a.value||!a.value.length))}}function ha(n,e){if(1&n&&(T.Vb(0),T.Vc(1,ma,6,7,"div",25),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("ngIf",!(null==t||null==t.value||!t.value.length))}}function Sa(n,e){if(1&n&&(T.Xb(0,"div",4),T.Vc(1,ha,2,1,"ng-container",17),T.jc(2,"keyvalue"),T.Wb()),2&n){var t=T.ic();T.Db(1),T.rc("ngForOf",T.kc(2,1,t.permissionGroups))}}var za,ya=((za=function(){function n(t,i,o){var l=this;a(this,n),this._permissionsService=t,this._modalService=i,this._notificationService=o,this.userMode="NEW",this.permissions=new Map,this.allStaffPermissions=new Array,this.saveBtnLoading=!1,this.addedPermissions=new Array,this.removedPermissions=new Array,this.oldPermissions=new Array,this.defaultRoles=new Array,this.tenantDefaultRoles=new Array,this.preview=!0,this.tenantDefaultRoleNameMap=new Map,this.tenantDefaultRoleMap=new Map,this.permissionsLoading=!1,this.roleIdMap=new Map,this.permissionChangeOverRide=!1,this.boundary=Xi.a.TENANT,this.onBoundaryChange=new T.n,this.submitPermissionUpdateRequest=function(){var n=new Set(l.allStaffPermissions);return l.allStaffPermissions=e(Array.from(n)),l.roleChanged?l._permissionsService.updateUserPermissions(l.userId,l.allStaffPermissions,l.roleId):l._permissionsService.updateUserPermissions(l.userId,l.allStaffPermissions)},this.onChange=function(n,e){return n?l.onPermissionAddition(e):l.onPermissionRemoval(e)},this.onPermissionAddition=function(n){l.allStaffPermissions.push(n),l.allStaffPermissions=e(l.allStaffPermissions),-1==l.oldPermissions.indexOf(n)&&l.addedPermissions.push(n),l.removedPermissions.indexOf(n)>-1&&(l.removedPermissions=l.removedPermissions.filter(function(e){return e!=n}))},this.onPermissionRemoval=function(n){l.allStaffPermissions=e(l.allStaffPermissions.filter(function(e){return e!=n})),l.oldPermissions.indexOf(n)>-1&&l.removedPermissions.push(n),l.addedPermissions=l.addedPermissions.filter(function(e){return e!=n})},this.isChangeInPermissions=function(){return l.removedPermissions.length>0||l.addedPermissions.length>0||l.permissionChangeOverRide}}return l(n,[{key:"ngOnInit",value:function(){this.loggedInUserAccountType=localStorage.getItem("loggedInUserRole"),this.initialRole=this.roleName,this.init()}},{key:"init",value:function(){this.getAllDefaultRoles(),this.getTenantDefaultRoles(),null!=this.userId?this.getGroupedUserPermissions():this.getAllGroupedRolePermissions(),this.getAllGroupedPermissions()}},{key:"getTenantDefaultRoles",value:function(n){var e=this;this.roleIdMap.clear(),this.loadingRoles=!0,this._permissionsService.getTenantDefaultRoles(n).subscribe(function(n){var t;e.tenantDefaultRoles=n,null===(t=e.tenantDefaultRoles)||void 0===t||t.forEach(function(n){n.type==e.role&&(e.tenantDefaultRoleNameMap.set(n.name,n.id),e.tenantDefaultRoleMap.set(n.name,n),e.roleIdMap.set(n.id,n))}),e.loadingRoles=!1,e.preview||(e.showRolesDropDown=!0)})}},{key:"getAllDefaultRoles",value:function(){var n=this;this._permissionsService.getAllDefaultRoles().subscribe(function(t){n.defaultRoles=t;var i=n.defaultRoles.find(function(e){return e.type==n.role});if(n.defaultPrivileges=i.defaultPrivileges,null==n.userId||null==n.userId){var a=new Set(i.privileges);n.allStaffPermissions=e(Array.from(a)),n.oldPermissions=e(n.allStaffPermissions)}})}},{key:"onRoleChange",value:function(n){var t=this;this.roleChanged=!0,this.permissionChangeOverRide=!0,this.permissionsLoading=!0;var i=this.roleIdMap.get(n);this.role=i.type,this.roleName=i.name,this.roleId=i.id,this.boundary=i.accessBoundary,this._permissionsService.fetchGroupedPermissions(null,i.id).subscribe(function(n){t.permissionGroups=n,t.permissionsLoading=!1,t.allStaffPermissions=e(i.privileges)}),this.showPermissions=!0,this.onEdit(),this.onBoundaryChange.emit(this.boundary)}},{key:"onPreview",value:function(){this.preview=!0,this.showRolesDropDown=!1,this.ngOnInit()}},{key:"getGroupedUserPermissions",value:function(){var n=this;this._permissionsService.fetchGroupedUserPermissions(this.userId).subscribe(function(t){n.allStaffPermissionGroups=t,Object.keys(t).forEach(function(i){t[i].length>0&&(n.allStaffPermissions=[].concat(e(n.allStaffPermissions),e(t[i])))}),n.permissionGroups=t,n.oldPermissions=e(n.allStaffPermissions)})}},{key:"getAllGroupedRolePermissions",value:function(){var n=this;this._permissionsService.fetchGroupedPermissions(this.role).subscribe(function(e){n.permissionGroups=e})}},{key:"getAllGroupedPermissions",value:function(){var n=this;this._permissionsService.fetchGroupedPermissions(null).subscribe(function(e){n.allPortalPermissionGroups=e})}},{key:"onEdit",value:function(){this.preview=!1,this.showRolesDropDown=!0,this.permissionGroups=this.allPortalPermissionGroups}},{key:"getAllPermissionStrings",value:function(){var n=localStorage.getItem("permissions");this.permissions=new Map(JSON.parse(n))}},{key:"updatePermissions",value:function(){var n=this;this.isChangeInPermissions()?this.initialRole==this.roleName?this._modalService.create({nzContent:ia,nzTitle:"Updated Permissions Confirmation",nzFooter:null,nzCancelText:null,nzOkText:null,nzClosable:!0,nzMaskClosable:!0,nzOnOk:function(){return n.submitPermissions()},nzOkLoading:this.saveBtnLoading,nzWidth:"900px",nzComponentParams:{addedPermissions:this.addedPermissions,removedPermissions:this.removedPermissions,defaultPrivileges:this.defaultPrivileges}}).afterClose.subscribe(function(e){e&&n.submitPermissions()}):this.submitPermissions():this._notificationService.info("Permissions","No permission changes to update.")}},{key:"submitPermissions",value:function(){var n=this;this.saveBtnLoading=!0,this.submitPermissionUpdateRequest().subscribe(function(){return n.afterPermissionUpdated()})}},{key:"afterPermissionUpdated",value:function(){this.saveBtnLoading=!1,this.addedPermissions=[],this.removedPermissions=[],this.initialRole!=this.roleName&&"NEW"!=this.userMode?this._notificationService.info("User Role","Role changed from ".concat(this.initialRole," to ").concat(this.roleName,".")):"NEW"!=this.userMode&&this._notificationService.info("Permissions","Permissions updated."),this.onPreview()}},{key:"addPermission",value:function(){var n=this;this.oldPermissions.filter(function(e){return-1===n.allStaffPermissions.indexOf(e)}),this.allStaffPermissions.filter(function(e){return-1===n.oldPermissions.indexOf(e)})}}]),n}()).\u0275fac=function(n){return new(n||za)(T.Rb(Ri.a),T.Rb(Me.f),T.Rb(xn.b))},za.\u0275cmp=T.Lb({type:za,selectors:[["app-staff-permissions"]],inputs:{role:"role",roleName:"roleName",userId:"userId",staffActive:"staffActive",userMode:"userMode",roleId:"roleId"},outputs:{onBoundaryChange:"onBoundaryChange"},decls:23,vars:7,consts:[["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography",""],[4,"ngIf"],["nz-row","","nzGutter","8"],["nz-col","","nzSpan","24"],[3,"nzColor"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","24",1,"container"],["nz-row","","nzGutter","8",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",1,"permission-actions",3,"nzSize","nzLoading","routerLink"],["nz-col","","nzSpan","2"],["nz-button","","nzType","primary",1,"permission-actions",3,"nzSize","nzLoading","click"],["size","13px","color","#fff","name","edit"],["nz-col","","nzSpan","4",4,"ngIf"],["nzShowSearch","","nzPlaceHolder","Select a role",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"display","flex"],[2,"width","70%"],[4,"isAccessAcrossTenantEnabled"],[2,"width","30%"],["nz-typography","","nzType","secondary",2,"color","var(--primary-color)"],["size","13px","color","#fff","name","save"],["nz-col","","nzXs","24",3,"nzSm","nzMd",4,"ngIf"],["nz-col","","nzXs","24",3,"nzSm","nzMd"],[1,"heading"],["nz-row","",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","24",1,"each-permission-row"],["nz-checkbox","",3,"ngModel","ngClass","ngModelChange"],["class","df-tag",3,"nzColor",4,"ngIf"],[1,"df-tag",3,"nzColor"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Xb(2,"h3",2),T.Xc(3,"Roles & Permissions"),T.Wb(),T.Wb(),T.Vc(4,da,6,5,"ng-container",3),T.Wb(),T.Xb(5,"div",4),T.Xb(6,"div",5),T.Xb(7,"p"),T.Xc(8," As a "),T.Xb(9,"strong"),T.Xc(10),T.jc(11,"roleName"),T.Wb(),T.Xc(12,", this staff member will have these permissions in all of the assigned sites "),T.Vc(13,ba,2,0,"ng-container",3),T.Xc(14,". "),T.Wb(),T.Wb(),T.Xb(15,"div",5),T.Xb(16,"p"),T.Xc(17," There are some default permissions set which we think are necessary to have. The fields which are Default will have the tag like this "),T.Xb(18,"nz-tag",6),T.Xc(19,"DF"),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(20,"div",7),T.Xb(21,"div",8),T.Vc(22,Sa,3,3,"div",9),T.Wb(),T.Wb()),2&n&&(T.Db(4),T.rc("ngIf","TENANT_ADMIN"===e.loggedInUserAccountType&&e.staffActive),T.Db(6),T.Yc(T.kc(11,5,e.roleName)),T.Db(3),T.rc("ngIf","ACROSS_SUB_TENANTS"==e.boundary),T.Db(5),T.rc("nzColor","green"),T.Db(4),T.rc("ngIf",!e.permissionsLoading))},directives:[N.c,N.a,O.a,f.q,pe.a,Fn.a,Un.a,Vn.a,D.h,Sn.a,Pt.d,g.u,g.x,f.p,Pt.a,Ne.a,Gn.a,f.o],pipes:[aa,f.j,xe.a,Ei,oa,ki],styles:[".container[_ngcontent-%COMP%]{background:#e5e5e5 0 0 no-repeat padding-box;border-radius:10px;padding:10px 25px 30px!important;min-height:200px;opacity:.8}.heading[_ngcontent-%COMP%]{display:block;margin:15px 10px}label[_ngcontent-%COMP%]{flex-direction:row!important}[_nghost-%COMP%]     .preview>.ant-checkbox-checked>.ant-checkbox-inner{background:#e5e5e5!important}[_nghost-%COMP%]     .ant-checkbox-inner{margin-right:2px}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-col-6{margin-top:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none}.each-permission-row[_ngcontent-%COMP%]{margin:5px;display:flex}[_nghost-%COMP%]     .ant-tag{font-size:9px;height:20px;width:23px;padding-left:5px}button[_ngcontent-%COMP%]{display:flex}.df-tag[_ngcontent-%COMP%]{margin-left:6px}.permission-actions[_ngcontent-%COMP%]{margin:auto}"]}),za),Xa=o("pxUr"),Ia=o("ocnv"),Ta=o("5iDH"),Da=o("bE2y"),Wa=["staffFormEl"],Pa=["searchAddress"],Ca=["permissionsHost"];function Aa(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-icons",48),T.ec("click",function(){T.Lc(t);var n=T.ic(2);return n.passwordVisible=!n.passwordVisible}),T.Wb()}if(2&n){var i=T.ic(2);T.rc("color",i.passwordVisible?"#a7c853":"#8A8A8A")}}function _a(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"COMMON.REQUIRED")," "))}function Oa(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"RESET_PASSWORD.MINIMUM_LENGTH_ALERT_MESSAGE")," "))}function Ma(n,e){if(1&n&&(T.Vc(0,_a,3,3,"ng-container",47),T.Vc(1,Oa,3,3,"ng-container",47)),2&n){var t=e.$implicit;T.rc("ngIf",t.hasError("required")),T.Db(1),T.rc("ngIf",t.hasError("minlength"))}}function Na(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"COMMON.REQUIRED")," "))}function Ra(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function Ea(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"PATIENT.EMAIL_ALREADY_ASSIGNED_TO_USER")," "))}function ka(n,e){if(1&n&&(T.Vc(0,Na,3,3,"ng-container",47),T.Vc(1,Ra,3,3,"ng-container",47),T.Vc(2,Ea,3,3,"ng-container",47)),2&n){var t=e.$implicit;T.rc("ngIf",t.hasError("required")),T.Db(1),T.rc("ngIf",t.hasError("email")),T.Db(1),T.rc("ngIf",t.hasError("notUnique"))}}function wa(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"COMMON.REQUIRED")," "))}function xa(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function Va(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"VALIDATION.PHONE_NUMBER_MAX_SIXTEEN_CHARS")," "))}function La(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" ",T.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function Fa(n,e){if(1&n&&(T.Vc(0,wa,3,3,"ng-container",47),T.Vc(1,xa,3,3,"ng-container",47),T.Vc(2,Va,3,3,"ng-container",47),T.Vc(3,La,3,3,"ng-container",47)),2&n){var t=e.$implicit;T.rc("ngIf",t.hasError("required")),T.Db(1),T.rc("ngIf",t.hasError("minlength")),T.Db(1),T.rc("ngIf",t.hasError("maxlength")),T.Db(1),T.rc("ngIf",t.hasError("pattern"))}}function Ua(n,e){if(1&n&&T.Sb(0,"nz-option",49),2&n){var t=e.$implicit;T.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function ja(n,e){if(1&n&&T.Sb(0,"nz-option",49),2&n){var t=e.$implicit;T.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Ga(n,e){if(1&n&&(T.Xb(0,"label",50),T.Xc(1),T.Wb()),2&n){var t=e.$implicit;T.rc("nzValue",null==t?null:t.key),T.Db(1),T.Zc(" ",null==t?null:t.value," ")}}function Ya(n,e){if(1&n&&(T.Xb(0,"strong",54),T.Xb(1,"nz-tag",55),T.Xc(2),T.jc(3,"tenantName"),T.Wb(),T.Wb()),2&n){var t=e.$implicit;T.Db(2),T.Zc(" ",T.kc(3,1,t)," ")}}function Ha(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"div",51),T.Xb(2,"div",3),T.Xb(3,"label"),T.Xc(4,"Assigned Sub Tenants"),T.Wb(),T.Wb(),T.Wb(),T.Xb(5,"div",52),T.Xb(6,"div",3),T.Vc(7,Ya,4,3,"strong",53),T.Wb(),T.Wb(),T.Ub()),2&n){var t=T.ic(2);T.Db(7),T.rc("ngForOf",t.assignedTenantIds)}}function Ba(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"span",59),T.jc(2,"tenantName"),T.Xb(3,"span",60),T.Xc(4),T.jc(5,"tenantName"),T.Wb(),T.Wb(),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.rc("nzTooltipTitle",T.kc(2,2,null==t?null:t.tenantId)),T.Db(3),T.Zc(" ",T.kc(5,4,null==t?null:t.tenantId),"")}}function qa(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-option",56),T.Xb(2,"span",57),T.Xb(3,"span",58),T.Xc(4),T.Wb(),T.Vc(5,Ba,6,6,"ng-container",41),T.Wb(),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.sc("nzLabel",null==t?null:t.value),T.rc("nzValue",null==t?null:t.key),T.Db(3),T.Zc(" ",null==t?null:t.value," ")}}function Za(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"span",59),T.jc(2,"tenantName"),T.Xb(3,"span",60),T.Xc(4),T.jc(5,"tenantName"),T.Wb(),T.Wb(),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.rc("nzTooltipTitle",T.kc(2,2,null==t?null:t.tenantId)),T.Db(3),T.Zc(" ",T.kc(5,4,null==t?null:t.tenantId),"")}}function $a(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-option",61),T.Xb(2,"span",62),T.Xb(3,"span",58),T.Xc(4),T.Wb(),T.Vc(5,Za,6,6,"ng-container",41),T.Wb(),T.Wb(),T.Ub()),2&n){var t=e.$implicit,i=T.ic(2);T.Db(1),T.sc("nzLabel",null==t?null:t.value),T.rc("nzValue",null==t?null:t.key)("nzHide",!i.isNotDefaultSite(null==t?null:t.key)),T.Db(3),T.Zc(" ",null==t?null:t.value," ")}}function Qa(n,e){if(1&n&&T.Sb(0,"nz-option",49),2&n){var t=e.$implicit;T.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Ka(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-option",49),T.Sb(2,"nz-option",49),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.tc("nzValue","",t.type,"_FFS"),T.tc("nzLabel","",t.type,": Fee for service"),T.Db(1),T.tc("nzValue","",t.type,"_CAPITATION"),T.tc("nzLabel","",t.type,": Capitation")}}function Ja(n,e){1&n&&(T.Vb(0),T.Sb(1,"nz-option",64),T.Sb(2,"nz-option",65),T.Ub())}function no(n,e){if(1&n&&(T.Vb(0),T.Vc(1,Ka,3,4,"ng-container",47),T.Vc(2,Ja,3,0,"ng-container",47),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("ngIf","GENERAL"!==(null==t?null:t.type)),T.Db(1),T.rc("ngIf","GENERAL"===(null==t?null:t.type))}}function eo(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"h3",7),T.Xc(2,"Program Participation"),T.Wb(),T.Sb(3,"div",8),T.Xb(4,"div",9),T.Xb(5,"div",3),T.Xb(6,"label"),T.Xc(7,"Physician participates in the following programs"),T.Wb(),T.Wb(),T.Wb(),T.Xb(8,"div",9),T.Xb(9,"div",3),T.Xb(10,"nz-form-item"),T.Xb(11,"nz-form-control",11),T.jc(12,"translate"),T.Xb(13,"nz-select",63),T.Vc(14,no,3,2,"ng-container",43),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(15,"nz-divider"),T.Ub()),2&n){var t=T.ic(2);T.Db(11),T.sc("nzErrorTip",T.kc(12,3,"COMMON.REQUIRED")),T.Db(2),T.rc("nzMode","multiple"),T.Db(1),T.rc("ngForOf",t.episodes)}}function to(n,e){1&n&&(T.Vb(0),T.Xb(1,"h3",7),T.Xc(2,"Physician Information"),T.Wb(),T.Sb(3,"div",8),T.Xb(4,"div",9),T.Xb(5,"div",10),T.Xb(6,"label"),T.Xc(7,"NPI ID*"),T.Wb(),T.Wb(),T.Xb(8,"div",10),T.Xb(9,"label"),T.Xc(10,"Credentials"),T.Wb(),T.Wb(),T.Wb(),T.Xb(11,"div",9),T.Xb(12,"div",10),T.Xb(13,"nz-form-item"),T.Xb(14,"nz-form-control",11),T.jc(15,"translate"),T.Sb(16,"input",66),T.Wb(),T.Wb(),T.Wb(),T.Xb(17,"div",10),T.Xb(18,"nz-form-item"),T.Xb(19,"nz-form-control",11),T.jc(20,"translate"),T.Sb(21,"input",67),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(22,"nz-divider"),T.Ub()),2&n&&(T.Db(14),T.sc("nzErrorTip",T.kc(15,2,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(20,4,"COMMON.REQUIRED")))}function io(n,e){if(1&n){var t=T.Yb();T.Xb(0,"form",5,6),T.ec("ngSubmit",function(){return T.Lc(t),T.ic().submit()})("keydown.enter",function(n){return n.preventDefault()}),T.Xb(2,"h3",7),T.Xc(3,"Basic Information"),T.Wb(),T.Sb(4,"div",8),T.Xb(5,"div",9),T.Xb(6,"div",10),T.Xb(7,"label"),T.Xc(8),T.jc(9,"translate"),T.Wb(),T.Wb(),T.Xb(10,"div",10),T.Xb(11,"label"),T.Xc(12),T.jc(13,"translate"),T.Wb(),T.Wb(),T.Xb(14,"div",10),T.Xb(15,"label"),T.Xc(16),T.jc(17,"translate"),T.Wb(),T.Wb(),T.Xb(18,"div",10),T.Xb(19,"label"),T.Xc(20),T.jc(21,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(22,"div",9),T.Xb(23,"div",10),T.Xb(24,"nz-form-item"),T.Xb(25,"nz-form-control",11),T.jc(26,"translate"),T.Sb(27,"input",12),T.Wb(),T.Wb(),T.Wb(),T.Xb(28,"div",10),T.Xb(29,"nz-form-item"),T.Xb(30,"nz-form-control",11),T.jc(31,"translate"),T.Sb(32,"input",13),T.Wb(),T.Wb(),T.Wb(),T.Xb(33,"div",10),T.Xb(34,"nz-form-item"),T.Xb(35,"nz-form-control",11),T.jc(36,"translate"),T.Sb(37,"input",14),T.Wb(),T.Wb(),T.Wb(),T.Xb(38,"div",10),T.Xb(39,"nz-form-item"),T.Xb(40,"nz-form-control",11),T.Xb(41,"nz-input-group",15),T.Sb(42,"input",16),T.Wb(),T.Wb(),T.Vc(43,Aa,1,1,"ng-template",null,17,T.Wc),T.Vc(45,Ma,2,2,"ng-template",null,18,T.Wc),T.Wb(),T.Wb(),T.Wb(),T.Sb(47,"div",8),T.Xb(48,"div",9),T.Xb(49,"div",10),T.Xb(50,"label"),T.Xc(51),T.jc(52,"translate"),T.Wb(),T.Wb(),T.Xb(53,"div",10),T.Xb(54,"label"),T.Xc(55),T.jc(56,"translate"),T.Wb(),T.Wb(),T.Xb(57,"div",10),T.Xb(58,"label"),T.Xc(59),T.jc(60,"translate"),T.Wb(),T.Wb(),T.Xb(61,"div",10),T.Xb(62,"label"),T.Xc(63),T.jc(64,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(65,"div",9),T.Xb(66,"div",10),T.Xb(67,"nz-form-item"),T.Xb(68,"nz-form-control",11),T.Xb(69,"nz-input-group"),T.Sb(70,"input",19),T.Wb(),T.Wb(),T.Vc(71,ka,3,3,"ng-template",null,20,T.Wc),T.Wb(),T.Wb(),T.Xb(73,"div",10),T.Xb(74,"nz-form-item"),T.Xb(75,"nz-form-control",11),T.Xb(76,"nz-input-group",21),T.Sb(77,"input",22),T.Wb(),T.Wb(),T.Vc(78,Fa,4,4,"ng-template",null,23,T.Wc),T.Wb(),T.Wb(),T.Xb(80,"div",10),T.Xb(81,"nz-form-item"),T.Xb(82,"nz-form-control",11),T.jc(83,"translate"),T.Sb(84,"nz-date-picker",24),T.Wb(),T.Wb(),T.Wb(),T.Xb(85,"div",10),T.Xb(86,"nz-form-item"),T.Xb(87,"nz-form-control",11),T.jc(88,"translate"),T.Xb(89,"nz-select",25),T.Vc(90,Ua,1,2,"nz-option",26),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(91,"div",8),T.Xb(92,"div",9),T.Xb(93,"div",10),T.Xb(94,"label"),T.Xc(95),T.jc(96,"translate"),T.Wb(),T.Wb(),T.Xb(97,"div",27),T.Xb(98,"label"),T.Xc(99),T.jc(100,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(101,"div",9),T.Xb(102,"div",10),T.Xb(103,"nz-form-item"),T.Xb(104,"nz-form-control",11),T.jc(105,"translate"),T.Xb(106,"nz-select",28),T.Vc(107,ja,1,2,"nz-option",26),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(108,"div",27),T.Xb(109,"nz-form-item"),T.Xb(110,"nz-form-control",11),T.jc(111,"translate"),T.Xb(112,"nz-radio-group",29),T.Vc(113,Ga,2,2,"label",30),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(114,"nz-divider"),T.Xb(115,"h3",7),T.Xc(116,"Contact Information"),T.Wb(),T.Xb(117,"div",9),T.Xb(118,"div",31),T.Xb(119,"label"),T.Xc(120,"Staff Home Address"),T.Wb(),T.Wb(),T.Xb(121,"div",27),T.Xb(122,"label"),T.Xc(123),T.jc(124,"translate"),T.Wb(),T.Wb(),T.Xb(125,"div",32),T.Xb(126,"label"),T.Xc(127,"PO Box #"),T.Wb(),T.Wb(),T.Wb(),T.Xb(128,"div",9),T.Xb(129,"div",31),T.Xb(130,"nz-form-item"),T.Xb(131,"nz-form-control",11),T.jc(132,"translate"),T.Sb(133,"input",33,34),T.Wb(),T.Wb(),T.Wb(),T.Xb(135,"div",27),T.Xb(136,"nz-form-item"),T.Xb(137,"nz-form-control",11),T.jc(138,"translate"),T.Sb(139,"input",35),T.Wb(),T.Wb(),T.Wb(),T.Xb(140,"div",32),T.Xb(141,"nz-form-item"),T.Xb(142,"nz-form-control",11),T.jc(143,"translate"),T.Sb(144,"input",36),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(145,"div",8),T.Xb(146,"div",9),T.Xb(147,"div",10),T.Xb(148,"label"),T.Xc(149),T.jc(150,"translate"),T.Wb(),T.Wb(),T.Xb(151,"div",10),T.Xb(152,"label"),T.Xc(153),T.jc(154,"translate"),T.Wb(),T.Wb(),T.Xb(155,"div",10),T.Xb(156,"label"),T.Xc(157),T.jc(158,"translate"),T.Wb(),T.Wb(),T.Xb(159,"div",10),T.Xb(160,"label"),T.Xc(161),T.jc(162,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(163,"div",9),T.Xb(164,"div",10),T.Xb(165,"nz-form-item"),T.Xb(166,"nz-form-control",11),T.jc(167,"translate"),T.Sb(168,"input",37),T.Wb(),T.Wb(),T.Wb(),T.Xb(169,"div",10),T.Xb(170,"nz-form-item"),T.Xb(171,"nz-form-control",11),T.jc(172,"translate"),T.Sb(173,"input",38),T.Wb(),T.Wb(),T.Wb(),T.Xb(174,"div",10),T.Xb(175,"nz-form-item"),T.Xb(176,"nz-form-control",11),T.jc(177,"translate"),T.Sb(178,"input",39),T.Wb(),T.Wb(),T.Wb(),T.Xb(179,"div",10),T.Xb(180,"nz-form-item"),T.Xb(181,"nz-form-control",11),T.jc(182,"translate"),T.Sb(183,"input",40),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(184,"nz-divider"),T.Sb(185,"div",8),T.Sb(186,"div",8),T.Xb(187,"h3",7),T.Xc(188),T.jc(189,"translate"),T.Wb(),T.Sb(190,"div",8),T.Vc(191,Ha,8,1,"ng-container",41),T.Xb(192,"div",9),T.Xb(193,"div",10),T.Xb(194,"label"),T.Xc(195,"Default Site*"),T.Wb(),T.Wb(),T.Xb(196,"div",10),T.Xb(197,"label"),T.Xc(198,"Other Sites"),T.Wb(),T.Wb(),T.Xb(199,"div",10),T.Xb(200,"label"),T.Xc(201),T.jc(202,"translate"),T.Wb(),T.Wb(),T.Xb(203,"div",10),T.Xb(204,"label"),T.Xc(205,"Staff ID"),T.Wb(),T.Wb(),T.Wb(),T.Xb(206,"div",9),T.Xb(207,"div",10),T.Xb(208,"nz-form-item"),T.Xb(209,"nz-form-control",11),T.jc(210,"translate"),T.Xb(211,"nz-select",42),T.ec("ngModelChange",function(n){return T.Lc(t),T.ic().mapAndFilterSites(n)})("ngModelChange",function(){return T.Lc(t),T.ic().onSiteSelect()}),T.Vc(212,qa,6,3,"ng-container",43),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(213,"div",10),T.Xb(214,"nz-form-item"),T.Xb(215,"nz-form-control",11),T.jc(216,"translate"),T.Xb(217,"nz-select",44),T.ec("ngModelChange",function(){return T.Lc(t),T.ic().onSiteSelect()}),T.Vc(218,$a,6,4,"ng-container",43),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(219,"div",10),T.Xb(220,"nz-form-item"),T.Xb(221,"nz-form-control",11),T.jc(222,"translate"),T.Xb(223,"nz-select",45),T.Vc(224,Qa,1,2,"nz-option",26),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(225,"div",10),T.Xb(226,"nz-form-item"),T.Xb(227,"nz-form-control"),T.Sb(228,"input",46),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Sb(229,"nz-divider"),T.Vc(230,eo,16,5,"ng-container",47),T.Vc(231,to,23,6,"ng-container",47),T.Sb(232,"div",8),T.Wb()}if(2&n){var i=T.Ic(44),a=T.Ic(46),o=T.Ic(72),l=T.Ic(79),r=T.ic();T.rc("formGroup",r.staffForm),T.Db(8),T.Zc("",T.kc(9,53,"COMMON.FIRSTNAME"),"*"),T.Db(4),T.Zc("",T.kc(13,55,"COMMON.LASTNAME"),"*"),T.Db(4),T.Yc(T.kc(17,57,"COMMON.USERNAME")),T.Db(4),T.Yc(T.kc(21,59,"COMMON.PASSWORD")),T.Db(5),T.sc("nzErrorTip",T.kc(26,61,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(31,63,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(36,65,"COMMON.REQUIRED")),T.Db(5),T.rc("nzErrorTip",a),T.Db(1),T.rc("nzSuffix",i),T.Db(1),T.rc("type",r.passwordVisible?"text":"password"),T.Db(9),T.Zc("",T.kc(52,67,"COMMON.EMAIL"),"*"),T.Db(4),T.Yc(T.kc(56,69,"COMMON.PHONE_NUMBER")),T.Db(4),T.Yc(T.kc(60,71,"COMMON.DOB")),T.Db(4),T.Zc("",T.kc(64,73,"PATIENT.TIME_ZONE"),"*"),T.Db(5),T.rc("nzErrorTip",o),T.Db(7),T.rc("nzErrorTip",l),T.Db(1),T.tc("nzAddOnBefore","[",r.countryCode,"]"),T.Db(6),T.sc("nzErrorTip",T.kc(83,75,"COMMON.REQUIRED")),T.Db(2),T.rc("nzFormat","MM-dd-yyyy")("nzDisabledDate",r.disabledDate)("nzDefaultPickerValue",r.defaultDate),T.Db(3),T.sc("nzErrorTip",T.kc(88,77,"COMMON.REQUIRED")),T.Db(3),T.rc("ngForOf",r.timezones),T.Db(5),T.Zc("",T.kc(96,79,"PATIENT.PREFERRED_COMMUNICATION_LANGUAGE"),"*"),T.Db(4),T.Zc("",T.kc(100,81,"PATIENT.GENDER"),"*"),T.Db(5),T.sc("nzErrorTip",T.kc(105,83,"COMMON.REQUIRED")),T.Db(3),T.rc("ngForOf",r.languages),T.Db(3),T.sc("nzErrorTip",T.kc(111,85,"COMMON.REQUIRED")),T.Db(3),T.rc("ngForOf",r.genders),T.Db(10),T.Yc(T.kc(124,87,"PATIENT.ADDRESS_LINE_2")),T.Db(8),T.sc("nzErrorTip",T.kc(132,89,"COMMON.REQUIRED")),T.Db(6),T.sc("nzErrorTip",T.kc(138,91,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(143,93,"COMMON.REQUIRED")),T.Db(7),T.Yc(T.kc(150,95,"ZIP_CODE")),T.Db(4),T.Yc(T.kc(154,97,"COMMON.COUNTRY")),T.Db(4),T.Yc(T.kc(158,99,"COMMON.STATE")),T.Db(4),T.Yc(T.kc(162,101,"COMMON.CITY")),T.Db(5),T.sc("nzErrorTip",T.kc(167,103,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(172,105,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(177,107,"COMMON.REQUIRED")),T.Db(5),T.sc("nzErrorTip",T.kc(182,109,"COMMON.REQUIRED")),T.Db(7),T.Yc(T.kc(189,111,"PATIENT.ORGANIZATIONAL_INFORMATION")),T.Db(13),T.Yc(T.kc(202,113,"COMMON.PROFILETAG")),T.Db(8),T.sc("nzErrorTip",T.kc(210,115,"COMMON.REQUIRED")),T.Db(3),T.rc("ngForOf",r.sites),T.Db(3),T.sc("nzErrorTip",T.kc(216,117,"COMMON.REQUIRED")),T.Db(3),T.rc("ngForOf",r.sites),T.Db(3),T.sc("nzErrorTip",T.kc(222,119,"COMMON.REQUIRED")),T.Db(2),T.rc("nzMode","multiple"),T.Db(1),T.rc("ngForOf",r.tags),T.Db(6),T.rc("ngIf","PHYSICIAN"===r.role),T.Db(1),T.rc("ngIf","PHYSICIAN"===r.role)}}function ao(n,e){}var oo,lo=((oo=function(t){r(o,t);var i=c(o);function o(n,e,t,l,r,s,c,u,f,d,b,p){var g,v;a(this,o),(g=i.call(this))._router=n,g._fb=e,g._tagsService=t,g._sitesService=l,g._staffService=r,g.mapsAPILoader=s,g._groupsService=c,g._activatedRoute=u,g._emailValidator=f,g._dataSharingService=d,g._notificationsService=b,g._componentFactoryResolver=p,g.episodes=[],g.timezones=Object(vi.e)(),g.genders=Object(vi.b)(),g.languages=Object(vi.d)(),g.disabledDate=function(n){return Oi()(Date.now(),n)<18},g.assignedTenantIds=new Array,g.siteTenantMap=new Map,g.staffId=g._activatedRoute.snapshot.paramMap.get("id"),g.role=g._activatedRoute.snapshot.queryParamMap.get("role"),g.mode=g._activatedRoute.snapshot.paramMap.get("mode")||"add";var m=g.getRoleName(g.role),h=g._activatedRoute.snapshot.queryParamMap.get("staffName")||"Add ".concat(m);return null===(v=g._dataSharingService.tenantSettings)||void 0===v||v.pipe(Object(ue.a)(g.unsubscribed)).subscribe(function(n){var e;n&&(g.tenantConfig=n,g.countryCode=null===(e=g.tenantConfig)||void 0===e?void 0:e.countryCode,g.initializeForm(),g.getEpisodes())}),g._routeHelperService.setTitleForRoute(h),g._routeHelperService.isPrimaryActionTriggered().pipe(Object(fe.a)(function(n){return!!n}),Object(ue.a)(g.unsubscribed)).subscribe(function(){var n,e;"PENDING"!==g.staffForm.status&&(null===(e=null===(n=g.staffFormEl)||void 0===n?void 0:n.ngSubmit)||void 0===e||e.next())}),g}return l(o,[{key:"getRoleName",value:function(n){switch(n){case En.a.PHYSICIAN:return"Physician";case En.a.ENROLMENT_STAFF:return"Enrolment Staff";case En.a.MANAGER_STAFF:return"Manager";default:return"Monitoring Staff"}}},{key:"ngAfterViewInit",value:function(){null!=this.staffId&&null!=this.staffId||this.initPermissionComponent()}},{key:"ngOnInit",value:function(){this.getAllTags(),this.getAllSites(),this.defaultDate=Ni()(Date.now(),18)}},{key:"initPermissionComponent",value:function(){var n=this,e=this._componentFactoryResolver.resolveComponentFactory(ya);null!=this.viewContainerRef&&(this.viewContainerRef.clear(),this.permissionsComponentRef=this.viewContainerRef.createComponent(e),this.permissionsComponentRef.instance.role=this.role,this.permissionsComponentRef.instance.roleId=this.roleId,this.permissionsComponentRef.instance.roleName=this.roleName,this.permissionsComponentRef.instance.preview="add"!=this.mode,this.permissionsComponentRef.instance.userMode="add"==this.mode?"NEW":"EDIT",this.permissionsComponentRef.instance.staffActive=!0,this.permissionsComponentRef.instance.userId=this.staffId,this.permissionsComponentRef.instance.init(),this.permissionsComponentRef.instance.onBoundaryChange.subscribe(function(e){n.accessBoundary=e}))}},{key:"submitPermissions",value:function(){var n=this;this.permissionsComponentRef.instance.submitPermissionUpdateRequest().subscribe(function(){return n.permissionsComponentRef.instance.afterPermissionUpdated()})}},{key:"initializeForm",value:function(){var n=this;({add:function(){return n.newFormInitializer()},edit:function(){return n.existingStaffFormInitializer()}})[this.mode]()}},{key:"newFormInitializer",value:function(){var e,t,i,a=this,o=null===(e=this.tenantConfig)||void 0===e?void 0:e.timeZone,l=null===(t=this.tenantConfig)||void 0===t?void 0:t.language;this.staffForm=this._fb.group(function(n,e){var t=new Si;return"en"===e&&(e="en_US"),t.timeZone.setValue(null!=n?n:"Canada/Eastern"),t.language.setValue(null!=e?e:"en_US"),t}(o,l)),this.setupExtraValidators(),this.setupGeocodeAPI(),this.initPermissionComponent(),null===(i=this.staffForm)||void 0===i||i.controls.programs.valueChanges.pipe(Object(ci.a)(),Object(ue.a)(this.unsubscribed)).subscribe(function(e){var t,i=n(e,2),o=(i[0],i[1]),l=o.map(function(n){return o.findLast(function(e){return n.split("_")[0]===e.split("_")[0]})}).filter(function(n,e,t){return t.indexOf(n)==e});null===(t=a.staffForm)||void 0===t||t.controls.programs.patchValue(l,{emitEvent:!1})})}},{key:"onSiteSelect",value:function(){var n,e,t,i,a,o,l,r,s,c,u,f,d=this;if(this.assignedTenantIds=new Array,null===(t=null===(e=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===e?void 0:e.site)||void 0===t?void 0:t.value){var b=this.siteTenantMap.get(null===(o=null===(a=null===(i=this.staffForm)||void 0===i?void 0:i.controls)||void 0===a?void 0:a.site)||void 0===o?void 0:o.value);this.assignedTenantIds.push(b)}(null===(s=null===(r=null===(l=this.staffForm)||void 0===l?void 0:l.controls)||void 0===r?void 0:r.otherSites)||void 0===s?void 0:s.value)&&(null===(f=null===(u=null===(c=this.staffForm)||void 0===c?void 0:c.controls)||void 0===u?void 0:u.otherSites)||void 0===f||f.value.forEach(function(n){var e=d.siteTenantMap.get(n);d.assignedTenantIds.push(e)}));var p=new Set(this.assignedTenantIds);if(this.assignedTenantIds=Array.from(p),null!=this.viewContainerRef&&null!=this.permissionsComponentRef){var g=this.assignedTenantIds.join(",");this.permissionsComponentRef.instance.getTenantDefaultRoles(g)}this.getAllTags()}},{key:"existingStaffFormInitializer",value:function(){var e=this;this._staffService.fetchStaffMemberById(this.staffId).subscribe(function(t){var i;e.setupExtraValidators(),e.staffForm=e._fb.group(function(n){var e,t,i=new Si;for(var a in n)null===(e=i[a])||void 0===e||e.setValue(n[a]);return i.dateOfBirth.setValue(Object(mi.a)(n.dateOfBirth||(new Date).toISOString())),i.language.setValue(null===(t=null==n?void 0:n.language)||void 0===t?void 0:t.locale),function(n,e){var t,i=[];null==e||e.forEach(function(e){(null==e?void 0:e.defaultLocation)?n.site.setValue(null==e?void 0:e.id):i.push(null==e?void 0:e.id)}),null===(t=null==n?void 0:n.otherSites)||void 0===t||t.setValue(i)}(i,null==n?void 0:n.locations),function(n,e){n.streetAddress.setValue(null==e?void 0:e.line1),n.streetAddress2.setValue(null==e?void 0:e.line2),n.city.setValue(null==e?void 0:e.city),n.state.setValue(null==e?void 0:e.state),n.country.setValue(null==e?void 0:e.country),n.zipCode.setValue(null==e?void 0:e.pin),n.poBox.setValue(null==e?void 0:e.poBox)}(i,null==n?void 0:n.address),function(n,e){var t=null==e?void 0:e.find(function(n){return n.source===hi.a.NPI_ID});n.npiId.setValue(null==t?void 0:t.sourceId)}(i,null==n?void 0:n.externalSources),function(n,e){var t=null==e?void 0:e.find(function(n){return n.source===hi.a.STAFF_ID});n.staffId.setValue(null==t?void 0:t.sourceId)}(i,null==n?void 0:n.externalSources),function(n,e){(null==e?void 0:e.length)&&n.credentials.setValue(e[0])}(i,null==n?void 0:n.credentials),function(n,e){var t;if(e){var i=[];null===(t=Object.entries(e))||void 0===t||t.forEach(function(n){var e;i.push("".concat(n[0],"_").concat(null===(e=n[1])||void 0===e?void 0:e.model))}),n.programs.setValue(i)}}(i,null==n?void 0:n.programEnrollments),i}(t.user)),e.staff=t,e.roleName=t.user.roles[0].name,e.roleId=t.user.roles[0].id,e.accessBoundary=t.user.roles[0].accessBoundary,e.onSiteSelect(),e.setupGeocodeAPI(),e.initPermissionComponent(),e.staffForm.updateValueAndValidity(),null===(i=e.staffForm)||void 0===i||i.controls.programs.valueChanges.pipe(Object(ci.a)(),Object(ue.a)(e.unsubscribed)).subscribe(function(t){var i,a=n(t,2),o=(a[0],a[1]),l=o.map(function(n){return o.findLast(function(e){return n.split("_")[0]===e.split("_")[0]})}).filter(function(n,e,t){return t.indexOf(n)==e});null===(i=e.staffForm)||void 0===i||i.controls.programs.patchValue(l,{emitEvent:!1})})})}},{key:"setupExtraValidators",value:function(){var n,e,t,i,a,o;En.a.PHYSICIAN===this.role&&(null===(t=null===(e=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===e?void 0:e.npiId)||void 0===t||t.setValidators(g.D.required)),null===(o=null===(a=null===(i=this.staffForm)||void 0===i?void 0:i.controls)||void 0===a?void 0:a.email)||void 0===o||o.setAsyncValidators(this._emailValidator.uniqueEmailValidator())}},{key:"setupGeocodeAPI",value:function(){var n=this;setTimeout(function(){return n.searchAddress()}),this.getLocationFromZipcode()}},{key:"getAllTags",value:function(){var n=this;this._tagsService.getTags("PATIENT",-1,0,this.assignedTenantIds).subscribe(function(e){var t,i=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.map(function(n){return{key:null==n?void 0:n.name,value:null==n?void 0:n.name}}),a=new Map;i.forEach(function(n){a.set(n.key,n)}),n.tags=Array.from(a.values())})}},{key:"getAllSites",value:function(){var n=this,e=localStorage.getItem("loggedInUserAssignedTenants");this._sitesService.getAllSites(0,1e3,null,!(En.a.PHYSICIAN==this.role),e).subscribe(function(e){n.allSites=null==e?void 0:e.result,n.mapAndFilterSites()})}},{key:"getEpisodes",value:function(){var n;this.role===En.a.PHYSICIAN&&((n=this.episodes).push.apply(n,e(this.tenantConfig.episodeBlueprints.filter(function(n){return!1===n.archived}))),this.episodes.sort(function(n,e){return n.type.localeCompare(e.type)}))}},{key:"mapAndFilterSites",value:function(n){var e,t,i,a,o,l,r,s,c,u,f,d=this;(null===(i=null===(t=null===(e=this.staffForm)||void 0===e?void 0:e.controls)||void 0===t?void 0:t.site)||void 0===i?void 0:i.value)&&(null===(l=null===(o=null===(a=this.staffForm)||void 0===a?void 0:a.controls)||void 0===o?void 0:o.otherSites)||void 0===l||l.setValue(null===(u=null===(c=null===(s=null===(r=this.staffForm)||void 0===r?void 0:r.controls)||void 0===s?void 0:s.otherSites)||void 0===c?void 0:c.value)||void 0===u?void 0:u.filter(function(n){var e,t,i;return n!==(null===(i=null===(t=null===(e=d.staffForm)||void 0===e?void 0:e.controls)||void 0===t?void 0:t.site)||void 0===i?void 0:i.value)}))),this.sites=null===(f=this.allSites)||void 0===f?void 0:f.filter(function(e){return!n||(null==e?void 0:e.id)!==n}).map(function(n){return{key:null==n?void 0:n.id,value:null==n?void 0:n.name,tenantId:null==n?void 0:n.tenantId}}),this.sites.forEach(function(n){return d.siteTenantMap.set(n.key,n.tenantId)})}},{key:"isNotDefaultSite",value:function(n){var e,t;return(null===(t=null===(e=this.staffForm)||void 0===e?void 0:e.controls.site)||void 0===t?void 0:t.value)!==n}},{key:"searchAddress",value:function(){var n=this;this.mapsAPILoader.load().then(function(){var e,t=new google.maps.places.Autocomplete(null===(e=n.searchElementRef)||void 0===e?void 0:e.nativeElement);t.addListener("place_changed",function(){var e=Ai.a.mapAddress(t);["streetAddress","streetAddress2","city","state","country","zipCode","lat","lng"].forEach(function(t){var i,a;null===(a=null===(i=n.staffForm)||void 0===i?void 0:i.controls[t])||void 0===a||a.patchValue(e[t],{emitEvent:!1})})})})}},{key:"getLocationFromZipcode",value:function(){var n,e,t,i=this;null===(t=null===(e=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===e?void 0:e.zipCode)||void 0===t||t.valueChanges.pipe(Object(ui.a)(500),Object(fi.a)(),Object(fe.a)(function(n){return(null==n?void 0:n.length)>4}),Object(di.a)(function(n){return i._groupsService.fetchLocationFromZipCode(n)})).pipe(Object(ue.a)(this.unsubscribed)).subscribe(function(n){var e,t,a,o,l,r,s,c,u,f;null===(e=null==n?void 0:n.results)||void 0===e||e.forEach(function(n){var e;null===(e=null==n?void 0:n.address_components)||void 0===e||e.forEach(function(n){var e,t,i;-1!==(null===(e=null==n?void 0:n.types)||void 0===e?void 0:e.findIndex(function(n){return"country"===n}))&&(c=n.long_name),-1!==(null===(t=null==n?void 0:n.types)||void 0===t?void 0:t.findIndex(function(n){return"administrative_area_level_1"===n}))&&(u=n.long_name),-1!==(null===(i=null==n?void 0:n.types)||void 0===i?void 0:i.findIndex(function(n){return"locality"===n}))&&(f=n.long_name)})}),null===(a=null===(t=i.staffForm)||void 0===t?void 0:t.controls)||void 0===a||a.city.setValue(f),null===(l=null===(o=i.staffForm)||void 0===o?void 0:o.controls)||void 0===l||l.state.setValue(u),null===(s=null===(r=i.staffForm)||void 0===r?void 0:r.controls)||void 0===s||s.country.setValue(c)})}},{key:"submit",value:function(){var n,e,t,i,a,o,l,r=this;for(var s in null===(t=null===(e=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===e?void 0:e.email)||void 0===t||t.clearAsyncValidators(),this.staffForm.controls)this.staffForm.controls[s].markAsDirty(),this.staffForm.controls[s].updateValueAndValidity();if("VALID"===(null===(i=this.staffForm)||void 0===i?void 0:i.status)){this.assignedTenantIds.push(this.siteTenantMap.get(this.staffForm.controls.site.value)),this.staffForm.controls.otherSites.value&&this.staffForm.controls.otherSites.value.forEach(function(n){return r.assignedTenantIds.push(r.siteTenantMap.get(n))});var c=new Set(this.assignedTenantIds);this.assignedTenantIds=Array.from(c);var u=function(n,e,t,i){var a,o,l,s,c,u,f,d,b,p,g,v,m,h,S,z,y,X,I,T,D,W,P,C,A,_,O,M,N,R,E,k,w,x,V,L,F,U,j=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xi.a.TENANT,G=arguments.length>5?arguments[5]:void 0;return{id:r.staffId,firstName:null===(o=null===(a=null==n?void 0:n.controls)||void 0===a?void 0:a.firstName)||void 0===o?void 0:o.value,lastName:null===(s=null===(l=null==n?void 0:n.controls)||void 0===l?void 0:l.lastName)||void 0===s?void 0:s.value,credentials:Di(n),dateOfBirth:Ii(null===(u=null===(c=null==n?void 0:n.controls)||void 0===c?void 0:c.dateOfBirth)||void 0===u?void 0:u.value),language:{locale:(null===(d=null===(f=null==n?void 0:n.controls)||void 0===f?void 0:f.language)||void 0===d?void 0:d.value)||"en_US"},email:null===(p=null===(b=null==n?void 0:n.controls)||void 0===b?void 0:b.email)||void 0===p?void 0:p.value,username:null===(v=null===(g=null==n?void 0:n.controls)||void 0===g?void 0:g.username)||void 0===v?void 0:v.value,encryptedPassword:Wi(null===(h=null===(m=null==n?void 0:n.controls)||void 0===m?void 0:m.email)||void 0===h?void 0:h.value,null===(z=null===(S=null==n?void 0:n.controls)||void 0===S?void 0:S.password)||void 0===z?void 0:z.value),country:null===(X=null===(y=null==n?void 0:n.controls)||void 0===y?void 0:y.country)||void 0===X?void 0:X.value,mobile:null===(T=null===(I=null==n?void 0:n.controls)||void 0===I?void 0:I.mobile)||void 0===T?void 0:T.value,gender:null===(W=null===(D=null==n?void 0:n.controls)||void 0===D?void 0:D.gender)||void 0===W?void 0:W.value,address:Ti(n),timeZone:null===(C=null===(P=null==n?void 0:n.controls)||void 0===P?void 0:P.timeZone)||void 0===C?void 0:C.value,profileTags:null===(_=null===(A=null==n?void 0:n.controls)||void 0===A?void 0:A.profileTags)||void 0===_?void 0:_.value,programs:Pi(null===(M=null===(O=null==n?void 0:n.controls)||void 0===O?void 0:O.programs)||void 0===M?void 0:M.value),programEnrollments:null===(R=null===(N=null==n?void 0:n.controls)||void 0===N?void 0:N.programs)||void 0===R?void 0:R.value,countryCode:t,npiId:null===(k=null===(E=null==n?void 0:n.controls)||void 0===E?void 0:E.npiId)||void 0===k?void 0:k.value,site:null===(x=null===(w=null==n?void 0:n.controls)||void 0===w?void 0:w.site)||void 0===x?void 0:x.value,otherSites:null===(L=null===(V=null==n?void 0:n.controls)||void 0===V?void 0:V.otherSites)||void 0===L?void 0:L.value,roleType:i,staffId:null===(U=null===(F=null==n?void 0:n.controls)||void 0===F?void 0:F.staffId)||void 0===U?void 0:U.value,boundary:j,assignedTenantIds:G}}(this.staffForm,0,this.countryCode,this.role,this.accessBoundary,this.assignedTenantIds),f=this._staffService.createStaffMember(u),d=this._staffService.updateStaffMember(u);Object(Ci.iif)(function(){return!!u.id},d,f).subscribe(function(n){var e="Physician";En.a.MONITORING_STAFF===r.role&&(e="Monitoring staff"),En.a.ENROLMENT_STAFF===r.role&&(e="Enrolment staff"),En.a.MANAGER_STAFF===r.role&&(e="Manager staff");var t="add"===r.mode?"Profile created successfully":"Profile updated successfully";"add"===r.mode&&(r.viewContainerRef.clear(),r.permissionsComponentRef.instance.role=r.role,r.permissionsComponentRef.instance.userId=null==n?void 0:n.id,r.permissionsComponentRef.instance.init(),r.submitPermissions()),r._notificationsService.success(e,t),r.redirect(null==n?void 0:n.id,null==n?void 0:n.fullName,!u.id)})}else null===(l=null===(o=null===(a=this.staffForm)||void 0===a?void 0:a.controls)||void 0===o?void 0:o.email)||void 0===l||l.setAsyncValidators(this._emailValidator.uniqueEmailValidator())}},{key:"redirect",value:function(n,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(En.a.PHYSICIAN!==this.role&&En.a.ENROLMENT_STAFF!==this.role&&En.a.MANAGER_STAFF!==this.role&&t)return this.permissionsComponentRef.destroy(),void this._router.navigate(["/staff/assign/physicians/",n],{queryParams:{role:this.role,staffName:e}});this.permissionsComponentRef.destroy(),this._router.navigate(["/staff/view/",n],{queryParams:{role:this.role,staffName:e}})}}]),o}(X.a)).\u0275fac=function(n){return new(n||oo)(T.Rb(D.g),T.Rb(g.h),T.Rb(gi.a),T.Rb(si.a),T.Rb(pn.a),T.Rb(Xa.b),T.Rb(pi.a),T.Rb(D.a),T.Rb(bi.a),T.Rb(h.a),T.Rb(xn.b),T.Rb(T.j))},oo.\u0275cmp=T.Lb({type:oo,selectors:[["app-staff-form"]],viewQuery:function(n,e){var t;1&n&&(T.ed(Wa,1),T.ed(Pa,1),T.ed(Ca,1,T.R)),2&n&&(T.Hc(t=T.fc())&&(e.staffFormEl=t.first),T.Hc(t=T.fc())&&(e.searchElementRef=t.first),T.Hc(t=T.fc())&&(e.viewContainerRef=t.first))},features:[T.Ab],decls:6,vars:1,consts:[[1,"container"],["ngNoForm","","id","staffsForm","nz-form","","appScrollToFirstInvalid","",3,"formGroup","ngSubmit","keydown.enter",4,"ngIf"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","24"],["permissionsHost",""],["ngNoForm","","id","staffsForm","nz-form","","appScrollToFirstInvalid","",3,"formGroup","ngSubmit","keydown.enter"],["staffFormEl","ngForm"],["nz-typography",""],[1,"divider"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","6"],[3,"nzErrorTip"],["formControlName","firstName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","lastName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","username","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],[3,"nzSuffix"],["nz-input","","formControlName","password","readonly","","onfocus","this.removeAttribute('readonly')",3,"type"],["passwordSuffix",""],["passwordErrors",""],["formControlName","email","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["emailErrors",""],[3,"nzAddOnBefore"],["formControlName","mobile","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["mobileErrors",""],["formControlName","dateOfBirth","nzPlaceHolder","MM-DD-YYYY",3,"nzFormat","nzDisabledDate","nzDefaultPickerValue"],["formControlName","timeZone","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-col","","nzSpan","8"],["formControlName","language","nzPlaceHolder","Select a language"],["formControlName","gender"],["nz-radio","","class","radio-label",3,"nzValue",4,"ngFor","ngForOf"],["nz-col","","nzSpan","12"],["nz-col","","nzSpan","4"],["formControlName","streetAddress","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')","placeholder","Search or enter staff's residential address"],["searchAddress",""],["formControlName","streetAddress2","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","poBox","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","zipCode","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","country","nz-input","","readonly",""],["formControlName","state","nz-input","","readonly",""],["formControlName","city","nz-input","","readonly",""],[4,"isAccessAcrossTenantEnabled"],["nzPlaceHolder","Select a default site","formControlName","site","nzShowSearch","",3,"ngModelChange"],[4,"ngFor","ngForOf"],["nzPlaceHolder","Select other sites","formControlName","otherSites","nzShowSearch","","nzMode","multiple",3,"ngModelChange"],["nzPlaceHolder","Select profile tags","formControlName","profileTags","nzShowSearch","","nzAllowClear","",3,"nzMode"],["formControlName","staffId","nz-input",""],[4,"ngIf"],["name","view","size","14px",3,"color","click"],[3,"nzValue","nzLabel"],["nz-radio","",1,"radio-label",3,"nzValue"],["nz-row","","nzGutter","64"],["nz-row","","nzGutter","64",2,"margin-bottom","10px"],["style","margin-left: 5px;",4,"ngFor","ngForOf"],[2,"margin-left","5px"],["nzColor","var(--primary-color)"],["nzCustomContent","",3,"nzLabel","nzValue"],[1,"ellipsis-text","char-limit",2,"display","flex"],[2,"width","70%"],["nz-tooltip","",2,"width","30%",3,"nzTooltipTitle"],["nz-typography","","nzType","secondary",2,"color","var(--primary-color)"],["nzCustomContent","",3,"nzLabel","nzValue","nzHide"],[2,"display","flex"],["nzPlaceHolder","Select programs","formControlName","programs","nzShowSearch","","nzAllowClear","",3,"nzMode"],["nzValue","BHI_FFS","nzLabel","BHI: Fee for service"],["nzValue","BHI_CAPITATION","nzLabel","BHI: Capitation"],["formControlName","npiId","nz-input",""],["formControlName","credentials","nz-input",""]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Vc(1,io,233,121,"form",1),T.Xb(2,"div",2),T.Xb(3,"div",3),T.Vc(4,ao,0,0,"ng-template",null,4,T.Wc),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(1),T.rc("ngIf",e.staffForm))},directives:[f.q,N.c,N.a,Ia.b,Ta.a,g.v,g.m,O.a,Ia.c,Ia.a,g.d,Ln.b,g.u,g.k,Vn.a,Ln.c,Ln.d,C.a,Pt.d,f.p,Da.c,E.a,Ne.a,Sn.a,Pt.a,Da.b,pe.a,hn.d],pipes:[zn.a,xe.a],styles:[".container[_ngcontent-%COMP%]{padding:40px 100px 100px 60px!important}h3[_ngcontent-%COMP%]{margin-bottom:1em}label[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);margin-left:5px;margin-bottom:5px;display:block}.radio-label[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-input-group-addon:empty{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px!important}input[_ngcontent-%COMP%]{border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-select-selector{background:inherit!important}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:var(--light-black)}[_nghost-%COMP%]     .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form label{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);flex-direction:row-reverse}[_nghost-%COMP%]     .ant-checkbox-wrapper{display:inline-flex}[_nghost-%COMP%]     .ant-checkbox-checked{border:none}.alert-label[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-checkbox{float:right}[_nghost-%COMP%]     .ant-checkbox+span{padding-left:0}.ellipsis-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.char-limit[_ngcontent-%COMP%]{max-width:100%}"]}),oo),ro=o("bA1+"),so=o("T5gh"),co=o("qAZ0"),uo=o("9xQM");function fo(n,e){if(1&n&&T.Sb(0,"img",15),2&n){var t=T.ic();T.rc("src",null==t.staff?null:t.staff.profilePhotoURL,T.Oc)}}function bo(n,e){1&n&&T.Sb(0,"nz-avatar",16),2&n&&T.rc("nzShape","square")("nzSize",150)("nzIcon","user")}function po(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Yc(T.kc(2,1,"COMMON.MALE")))}function go(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Yc(T.kc(2,1,"COMMON.FEMALE")))}function vo(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Yc(T.kc(2,1,"GENDER.OTHER")))}function mo(n,e){1&n&&(T.Vb(0),T.Xc(1,"English (United States)"),T.Ub())}function ho(n,e){1&n&&(T.Vb(0),T.Xc(1,"Spanish (United States)"),T.Ub())}function So(n,e){1&n&&(T.Vb(0),T.Xc(1,"Japanese (Japan)"),T.Ub())}function zo(n,e){1&n&&(T.Xb(0,"div",7),T.Xb(1,"label",8),T.Xc(2,"NPI ID"),T.Wb(),T.Wb())}function yo(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic();T.Db(1),T.Zc(" ",null==t.staff||null==t.staff.address?null:t.staff.address.line1,",\xa0 ")}}function Xo(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic();T.Db(1),T.Zc(" ",null==t.staff||null==t.staff.address?null:t.staff.address.line2,",\xa0 ")}}function Io(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic();T.Db(1),T.Zc(" ",null==t.staff||null==t.staff.address?null:t.staff.address.city,",\xa0 ")}}function To(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic();T.Db(1),T.Zc(" ",null==t.staff||null==t.staff.address?null:t.staff.address.state,"\xa0 ")}}function Do(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic();T.Db(1),T.Zc(" -\xa0",null==t.staff||null==t.staff.address?null:t.staff.address.country," ")}}function Wo(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic();T.Db(1),T.Zc(" -\xa0",null==t.staff||null==t.staff.address?null:t.staff.address.pin," ")}}function Po(n,e){1&n&&(T.Xb(0,"p"),T.Xc(1," N/A "),T.Wb())}function Co(n,e){if(1&n&&(T.Xb(0,"div",7),T.Xb(1,"strong"),T.Xc(2),T.jc(3,"externalSources"),T.Wb(),T.Wb()),2&n){var t=T.ic();T.Db(2),T.Yc(T.lc(3,1,null==t.staff?null:t.staff.externalSources,"NPI_ID"))}}var Ao,_o=function(){return[32,8]},Oo=((Ao=function n(){a(this,n)}).\u0275fac=function(n){return new(n||Ao)},Ao.\u0275cmp=T.Lb({type:Ao,selectors:[["app-staff-basic-info"]],inputs:{role:"role",staff:"staff"},decls:84,vars:70,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","8","nzMd","6"],["alt","user-profile",3,"src",4,"ngIf"],[3,"nzShape","nzSize","nzIcon",4,"ngIf"],["nz-col","","nzXs","24","nzSm","16","nzMd","18"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],["nz-typography","","nzType","secondary"],[3,"ngSwitch"],[4,"ngSwitchCase"],["nz-col","","nzSpan","8",4,"ngIf"],["id","address"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"],["alt","user-profile",3,"src"],[3,"nzShape","nzSize","nzIcon"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Vc(3,fo,1,1,"img",3),T.Vc(4,bo,1,3,"nz-avatar",4),T.Wb(),T.Xb(5,"div",5),T.Xb(6,"div",6),T.Xb(7,"div",7),T.Xb(8,"label",8),T.Xc(9),T.jc(10,"translate"),T.Wb(),T.Wb(),T.Xb(11,"div",7),T.Xb(12,"label",8),T.Xc(13),T.jc(14,"translate"),T.Wb(),T.Wb(),T.Xb(15,"div",7),T.Xb(16,"label",8),T.Xc(17),T.jc(18,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(19,"div",6),T.Xb(20,"div",7),T.Xb(21,"strong"),T.Xc(22),T.Wb(),T.Wb(),T.Xb(23,"div",7),T.Xb(24,"strong",9),T.Vc(25,po,3,3,"ng-container",10),T.Vc(26,go,3,3,"ng-container",10),T.Vc(27,vo,3,3,"ng-container",10),T.Wb(),T.Wb(),T.Xb(28,"div",7),T.Xb(29,"strong"),T.Xc(30),T.jc(31,"date"),T.Wb(),T.Wb(),T.Wb(),T.Sb(32,"br"),T.Xb(33,"div",6),T.Xb(34,"div",7),T.Xb(35,"label",8),T.Xc(36),T.jc(37,"translate"),T.Wb(),T.Wb(),T.Xb(38,"div",7),T.Xb(39,"label",8),T.Xc(40),T.jc(41,"translate"),T.Wb(),T.Wb(),T.Xb(42,"div",7),T.Xb(43,"label",8),T.Xc(44),T.jc(45,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(46,"div",6),T.Xb(47,"div",7),T.Xb(48,"strong"),T.Xc(49),T.Wb(),T.Wb(),T.Xb(50,"div",7),T.Xb(51,"strong"),T.Xc(52),T.Wb(),T.Wb(),T.Xb(53,"div",7),T.Xb(54,"strong",9),T.Vc(55,mo,2,0,"ng-container",10),T.Vc(56,ho,2,0,"ng-container",10),T.Vc(57,So,2,0,"ng-container",10),T.Wb(),T.Wb(),T.Wb(),T.Sb(58,"br"),T.Xb(59,"div",6),T.Xb(60,"div",7),T.Xb(61,"label",8),T.Xc(62),T.jc(63,"translate"),T.Wb(),T.Wb(),T.Xb(64,"div",7),T.Xb(65,"label",8),T.Xc(66),T.jc(67,"translate"),T.Wb(),T.Wb(),T.Vc(68,zo,3,0,"div",11),T.Wb(),T.Xb(69,"div",6),T.Xb(70,"div",7),T.Xb(71,"strong"),T.Xc(72),T.Wb(),T.Wb(),T.Xb(73,"div",7),T.Xb(74,"strong",12),T.Xb(75,"p",13),T.Vc(76,yo,2,1,"ng-container",14),T.Vc(77,Xo,2,1,"ng-container",14),T.Vc(78,Io,2,1,"ng-container",14),T.Vc(79,To,2,1,"ng-container",14),T.Vc(80,Do,2,1,"ng-container",14),T.Vc(81,Wo,2,1,"ng-container",14),T.Wb(),T.Vc(82,Po,2,0,"p",14),T.Wb(),T.Wb(),T.Vc(83,Co,4,4,"div",11),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(3),T.rc("ngIf",null==e.staff?null:e.staff.profilePhotoURL),T.Db(1),T.rc("ngIf",!(null!=e.staff&&e.staff.profilePhotoURL)),T.Db(2),T.rc("nzGutter",T.xc(64,_o)),T.Db(3),T.Yc(T.kc(10,45,"PATIENT.FULL_NAME")),T.Db(4),T.Yc(T.kc(14,47,"PATIENT.GENDER")),T.Db(4),T.Yc(T.kc(18,49,"COMMON.DOB")),T.Db(2),T.rc("nzGutter",T.xc(65,_o)),T.Db(3),T.Yc((null==e.staff?null:e.staff.fullName)||"N/A"),T.Db(2),T.rc("ngSwitch",null==e.staff?null:e.staff.gender),T.Db(1),T.rc("ngSwitchCase","MALE"),T.Db(1),T.rc("ngSwitchCase","FEMALE"),T.Db(1),T.rc("ngSwitchCase","OTHER"),T.Db(3),T.Yc(T.lc(31,51,null==e.staff?null:e.staff.dateOfBirth,"mediumDate")||"N/A"),T.Db(3),T.rc("nzGutter",T.xc(66,_o)),T.Db(3),T.Yc(T.kc(37,54,"COMMON.CONTACT")),T.Db(4),T.Yc(T.kc(41,56,"COMMON.E-MAIL")),T.Db(4),T.Yc(T.kc(45,58,"PATIENT.PREFERRED_LANGUAGE")),T.Db(2),T.rc("nzGutter",T.xc(67,_o)),T.Db(3),T.ad("",null==e.staff?null:e.staff.countryCode," - ",null==e.staff?null:e.staff.mobile,""),T.Db(3),T.Yc((null==e.staff?null:e.staff.email)||"N/A"),T.Db(2),T.rc("ngSwitch",null==e.staff||null==e.staff.language?null:e.staff.language.locale),T.Db(1),T.rc("ngSwitchCase","en_US"),T.Db(1),T.rc("ngSwitchCase","es_US"),T.Db(1),T.rc("ngSwitchCase","ja_JP"),T.Db(2),T.rc("nzGutter",T.xc(68,_o)),T.Db(3),T.Yc(T.kc(63,60,"COMMON.USERNAME")),T.Db(4),T.Yc(T.kc(67,62,"PATIENT.HOME_ADDRESS")),T.Db(2),T.rc("ngIf","PHYSICIAN"===e.role),T.Db(1),T.rc("nzGutter",T.xc(69,_o)),T.Db(3),T.Yc((null==e.staff?null:e.staff.username)||"N/A"),T.Db(3),T.wc("nzTooltipTitle","",null==e.staff||null==e.staff.address?null:e.staff.address.line1,"\n                             ",null==e.staff||null==e.staff.address?null:e.staff.address.line2," ",null==e.staff||null==e.staff.address?null:e.staff.address.city,"\n                             ",null==e.staff||null==e.staff.address?null:e.staff.address.state," ",null==e.staff||null==e.staff.address?null:e.staff.address.country,"\n                             ",null==e.staff||null==e.staff.address?null:e.staff.address.pin,""),T.Db(1),T.rc("ngIf",null==e.staff||null==e.staff.address?null:e.staff.address.line1),T.Db(1),T.rc("ngIf",null==e.staff||null==e.staff.address?null:e.staff.address.line2),T.Db(1),T.rc("ngIf",null==e.staff||null==e.staff.address?null:e.staff.address.city),T.Db(1),T.rc("ngIf",null==e.staff||null==e.staff.address?null:e.staff.address.state),T.Db(1),T.rc("ngIf",null==e.staff||null==e.staff.address?null:e.staff.address.country),T.Db(1),T.rc("ngIf",null==e.staff||null==e.staff.address?null:e.staff.address.pin),T.Db(1),T.rc("ngIf",!(null!=e.staff&&null!=e.staff.address&&e.staff.address.line1||null!=e.staff&&null!=e.staff.address&&e.staff.address.line2||null!=e.staff&&null!=e.staff.address&&e.staff.address.city||null!=e.staff&&null!=e.staff.address&&e.staff.address.state||null!=e.staff&&null!=e.staff.address&&e.staff.address.country||null!=e.staff&&null!=e.staff.address&&e.staff.address.pin)),T.Db(1),T.rc("ngIf","PHYSICIAN"===e.role))},directives:[N.c,N.a,f.q,O.a,f.s,f.t,hn.d,be.a],pipes:[zn.a,f.e,uo.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}[_nghost-%COMP%]     .ant-avatar{background:#dddfe1}img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:5px}#address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}"]}),Ao);function Mo(n,e){1&n&&(T.Vb(0),T.Xc(1,", "),T.Ub())}function No(n,e){if(1&n&&(T.Xb(0,"strong"),T.Xc(1),T.jc(2,"tenantName"),T.Vc(3,Mo,2,0,"ng-container",8),T.Wb()),2&n){var t=e.$implicit,i=e.index,a=T.ic();T.Db(1),T.Zc(" ",T.kc(2,2,t),""),T.Db(2),T.rc("ngIf",i<a.staff.assignedTenantIds.length-1)}}function Ro(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-tag",9),T.Xc(2),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("nzColor","green"),T.Db(1),T.Yc(t)}}function Eo(n,e){1&n&&(T.Vb(0),T.Xb(1,"strong"),T.Xc(2,"N/A"),T.Wb(),T.Ub())}var ko,wo=function(){return[32,8]},xo=((ko=function n(){a(this,n)}).\u0275fac=function(n){return new(n||ko)},ko.\u0275cmp=T.Lb({type:ko,selectors:[["app-staff-organisation-info"]],inputs:{staff:"staff"},decls:36,vars:20,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","8"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","4"],[4,"ngIf"],[3,"nzColor"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Xb(3,"label",3),T.Xc(4,"Assigned Subtenants"),T.Wb(),T.Wb(),T.Xb(5,"div",2),T.Vc(6,No,4,4,"strong",4),T.Wb(),T.Wb(),T.Xb(7,"div",1),T.Xb(8,"div",5),T.Xb(9,"label",3),T.Xc(10,"Sites"),T.Wb(),T.Wb(),T.Xb(11,"div",6),T.Xb(12,"label",3),T.Xc(13),T.jc(14,"translate"),T.Wb(),T.Wb(),T.Xb(15,"div",7),T.Xb(16,"label",3),T.Xc(17,"Staff ID"),T.Wb(),T.Wb(),T.Xb(18,"div",6),T.Xb(19,"label",3),T.Xc(20,"Role"),T.Wb(),T.Wb(),T.Wb(),T.Xb(21,"div",1),T.Xb(22,"div",5),T.Xb(23,"strong"),T.Xc(24),T.jc(25,"userLocations"),T.Wb(),T.Wb(),T.Xb(26,"div",6),T.Vc(27,Ro,3,2,"ng-container",4),T.Vc(28,Eo,3,0,"ng-container",8),T.Wb(),T.Xb(29,"div",7),T.Xb(30,"strong"),T.Xc(31),T.jc(32,"externalSources"),T.Wb(),T.Wb(),T.Xb(33,"div",6),T.Xb(34,"strong"),T.Xc(35),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(1),T.rc("nzGutter",T.xc(17,wo)),T.Db(5),T.rc("ngForOf",e.staff.assignedTenantIds),T.Db(1),T.rc("nzGutter",T.xc(18,wo)),T.Db(6),T.Yc(T.kc(14,10,"COMMON.PROFILETAG")),T.Db(8),T.rc("nzGutter",T.xc(19,wo)),T.Db(3),T.Yc(T.kc(25,12,null==e.staff?null:e.staff.locations)),T.Db(3),T.rc("ngForOf",null==e.staff?null:e.staff.profileTags),T.Db(1),T.rc("ngIf",!(null!=e.staff&&null!=e.staff.profileTags&&e.staff.profileTags.length)),T.Db(3),T.Yc(T.lc(32,14,null==e.staff?null:e.staff.externalSources,"STAFF_ID")),T.Db(4),T.Yc(null==e.staff||null==e.staff.roles[0]?null:e.staff.roles[0].name))},directives:[N.c,N.a,O.a,f.p,f.q,pe.a],pipes:[zn.a,Hn.a,uo.a,xe.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}"]}),ko);function Vo(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-tag",15),T.Xc(2),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("nzColor","green"),T.Db(1),T.Yc(t)}}function Lo(n,e){1&n&&(T.Vb(0),T.Xb(1,"strong"),T.Xc(2,"N/A"),T.Wb(),T.Ub())}function Fo(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-tag",15),T.Xc(2),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("nzColor","green"),T.Db(1),T.Yc(t)}}function Uo(n,e){1&n&&(T.Vb(0),T.Xb(1,"strong"),T.Xc(2,"N/A"),T.Wb(),T.Ub())}function jo(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-tag",15),T.Xc(2),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("nzColor","green"),T.Db(1),T.Yc(t)}}function Go(n,e){1&n&&(T.Vb(0),T.Xb(1,"strong"),T.Xc(2,"N/A"),T.Wb(),T.Ub())}function Yo(n,e){if(1&n&&(T.Xb(0,"nz-timeline-item"),T.Xb(1,"p"),T.Xb(2,"span"),T.Xb(3,"strong",16),T.Xc(4," Changed From "),T.Wb(),T.Wb(),T.Vc(5,Fo,3,2,"ng-container",7),T.Vc(6,Uo,3,0,"ng-container",8),T.Xb(7,"span"),T.Xb(8,"strong",16),T.Xc(9," to \xa0\xa0"),T.Wb(),T.Wb(),T.Vc(10,jo,3,2,"ng-container",7),T.Vc(11,Go,3,0,"ng-container",8),T.Wb(),T.Xb(12,"p",17),T.Xc(13),T.Xb(14,"strong"),T.Xc(15),T.jc(16,"date"),T.Wb(),T.Wb(),T.Wb()),2&n){var t=e.$implicit,i=T.ic(2);T.Db(5),T.rc("ngForOf",null==t?null:t.previousState),T.Db(1),T.rc("ngIf",!(null!=t&&null!=t.previousState&&t.previousState.length)),T.Db(4),T.rc("ngForOf",null==t?null:t.changedToState),T.Db(1),T.rc("ngIf",!(null!=t&&null!=t.changedToState&&t.changedToState.length)),T.Db(2),T.Zc("Updated by: ",i.changedByMap[null==t?null:t.changedBy]," | "),T.Db(2),T.Yc(T.lc(16,6,(null==t?null:t.changedAt)+"Z","medium"))}}function Ho(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"nz-timeline"),T.Vc(2,Yo,17,9,"nz-timeline-item",7),T.Wb(),T.Ub()),2&n){var t=T.ic();T.Db(2),T.rc("ngForOf",null==t.staff?null:t.staff.programChangeHistory)}}function Bo(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div"),T.Xb(1,"button",18),T.ec("click",function(){return T.Lc(t),T.ic().handleClose()}),T.Xc(2,"Close"),T.Wb(),T.Wb()}}var qo,Zo=function(){return[32,8]},$o=((qo=function(){function n(e){a(this,n),this._staffService=e,this.disableHistory=!0,this.showHistoryModal=!1}return l(n,[{key:"ngOnInit",value:function(){var n,e,t,i,a,o=this,l=null===(t=null===(e=null===(n=this.staff)||void 0===n?void 0:n.programChangeHistory)||void 0===e?void 0:e.map(function(n){return n.changedBy}))||void 0===t?void 0:t.join(",");0!=l.length&&(null===(a=null===(i=this.staff)||void 0===i?void 0:i.programChangeHistory)||void 0===a||a.reverse(),this._staffService.fetchNameByIds(l).subscribe(function(n){o.changedByMap=n,o.disableHistory=!1}))}},{key:"showHistory",value:function(){this.showHistoryModal=!0}},{key:"handleClose",value:function(){this.showHistoryModal=!1}}]),n}()).\u0275fac=function(n){return new(n||qo)(T.Rb(pn.a))},qo.\u0275cmp=T.Lb({type:qo,selectors:[["app-staff-program-participation"]],inputs:{staff:"staff"},decls:19,vars:10,consts:[[1,"container"],["nz-row",""],["nz-col","","nzSpan","18"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-typography","","nzType","secondary"],["nz-col",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-col","","nzSpan","4"],["nz-row","","nzAlign","middle","nzJustify","end",2,"height","100%"],["nz-button","","nzType","primary",3,"nzSize","disabled","click"],["nzTitle","Program Change History",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[4,"nzModalFooter"],[3,"nzColor"],["nz-typography",""],["nz-typography","","nzType","secondary",1,"note-footer"],["nz-button","","nzType","primary",3,"click"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"div",1),T.Xb(2,"div",2),T.Xb(3,"div",3),T.Xb(4,"div",4),T.Xb(5,"label",5),T.Xc(6,"Physician participates in the following programs"),T.Wb(),T.Wb(),T.Wb(),T.Xb(7,"div",3),T.Xb(8,"div",6),T.Vc(9,Vo,3,2,"ng-container",7),T.Vc(10,Lo,3,0,"ng-container",8),T.Wb(),T.Wb(),T.Wb(),T.Xb(11,"div",9),T.Xb(12,"div",10),T.Xb(13,"div",6),T.Xb(14,"button",11),T.ec("click",function(){return e.showHistory()}),T.Xc(15," Show History "),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Xb(16,"nz-modal",12),T.ec("nzVisibleChange",function(n){return e.showHistoryModal=n})("nzOnCancel",function(){return e.handleClose()}),T.Vc(17,Ho,3,1,"ng-container",13),T.Vc(18,Bo,3,0,"div",14),T.Wb(),T.Wb()),2&n&&(T.Db(3),T.rc("nzGutter",T.xc(8,Zo)),T.Db(4),T.rc("nzGutter",T.xc(9,Zo)),T.Db(2),T.rc("ngForOf",null==e.staff?null:e.staff.programs),T.Db(1),T.rc("ngIf",!(null!=e.staff&&null!=e.staff.programs&&e.staff.programs.length)),T.Db(4),T.rc("nzSize","middle")("disabled",e.disableHistory),T.Db(2),T.rc("nzVisible",e.showHistoryModal)("nzFooter",null))},directives:[N.c,N.a,O.a,f.p,f.q,Fn.a,Un.a,Vn.a,Me.a,Me.b,Me.c,pe.a,M.a,M.b],pipes:[f.e],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}"]}),qo);function Qo(n,e){if(1&n&&(T.Xb(0,"tr"),T.Xb(1,"td"),T.Xc(2),T.jc(3,"tenantName"),T.Wb(),T.Xb(4,"td"),T.Xb(5,"span",5),T.Xc(6),T.Wb(),T.Wb(),T.Wb()),2&n){var t=e.$implicit;T.Db(2),T.Yc(T.kc(3,2,null==t?null:t.tenantId)),T.Db(4),T.Zc(" ",null==t?null:t.patientCount," ")}}var Ko=function(){return["75%","25%"]};function Jo(n,e){if(1&n&&(T.Xb(0,"div",1),T.Xb(1,"nz-table",2,3),T.Xb(3,"tbody"),T.Vc(4,Qo,7,4,"tr",4),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.Ic(2),i=T.ic();T.Db(1),T.rc("nzData",i.assignedTenantList)("nzShowPagination",!1)("nzPageSize",999999)("nzWidthConfig",T.xc(5,Ko)),T.Db(3),T.rc("ngForOf",null==t?null:t.data)}}var nl,el=((nl=function(){function n(){a(this,n),this.assignedTenantList=new Array}return l(n,[{key:"ngOnInit",value:function(){for(var n in console.log("Assigned Tenants : ",this.assignedTenants),this.assignedTenants)this.assignedTenantList.push({tenantId:n,patientCount:this.assignedTenants[n]})}}]),n}()).\u0275fac=function(n){return new(n||nl)},nl.\u0275cmp=T.Lb({type:nl,selectors:[["app-assigned-tenants"]],inputs:{assignedTenants:"assignedTenants"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nzSize","small",3,"nzData","nzShowPagination","nzPageSize","nzWidthConfig"],["assignedTenantsTable",""],[4,"ngFor","ngForOf"],["nz-typography",""]],template:function(n,e){1&n&&T.Vc(0,Jo,5,6,"div",0),2&n&&T.rc("ngIf",null==e.assignedTenantList?null:e.assignedTenantList.length)},directives:[f.q,_.f,_.i,f.p,_.o,_.e,O.a],pipes:[xe.a],styles:[".container[_ngcontent-%COMP%]{padding:1% 5px!important}*[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{padding:16px!important;pointer-events:none}td[_ngcontent-%COMP%]:first-child{font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}[_nghost-%COMP%]     .ant-table table{border-collapse:collapse}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:1px solid #f0f0f0}"]}),nl);function tl(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" ",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0," Patients ")}}function il(n,e){1&n&&T.Sb(0,"td")}function al(n,e){if(1&n&&(T.Xb(0,"tr"),T.Xb(1,"td"),T.Xc(2),T.Wb(),T.Xb(3,"td"),T.Xb(4,"span",5),T.Xc(5),T.jc(6,"userLocations"),T.Wb(),T.Wb(),T.Vc(7,tl,2,1,"td",6),T.Vc(8,il,1,0,"td",6),T.Sb(9,"td"),T.Wb()),2&n){var t=e.$implicit;T.Db(2),T.Yc(null==t?null:t.fullName),T.Db(3),T.Zc(" ",T.kc(6,4,null==t?null:t.locations)," "),T.Db(2),T.rc("ngIf","PATIENT"!==(null==t?null:t.type)),T.Db(1),T.rc("ngIf","PATIENT"===(null==t?null:t.type))}}var ol=function(){return["25%","25%","25%","25%"]};function ll(n,e){if(1&n&&(T.Xb(0,"div",1),T.Xb(1,"nz-table",2,3),T.Xb(3,"tbody"),T.Vc(4,al,10,6,"tr",4),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.Ic(2),i=T.ic();T.Db(1),T.rc("nzData",i.assignedUsers)("nzShowPagination",!1)("nzPageSize",999999)("nzWidthConfig",T.xc(5,ol)),T.Db(3),T.rc("ngForOf",null==t?null:t.data)}}var rl,sl=((rl=function n(){a(this,n)}).\u0275fac=function(n){return new(n||rl)},rl.\u0275cmp=T.Lb({type:rl,selectors:[["app-staff-assigned-users"]],inputs:{role:"role",assignedUsers:"assignedUsers"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nzSize","small",3,"nzData","nzShowPagination","nzPageSize","nzWidthConfig"],["assignedUsersTable",""],[4,"ngFor","ngForOf"],["nz-typography",""],[4,"ngIf"]],template:function(n,e){1&n&&T.Vc(0,ll,5,6,"div",0),2&n&&T.rc("ngIf",null==e.assignedUsers?null:e.assignedUsers.length)},directives:[f.q,_.f,_.i,f.p,_.o,_.e,O.a],pipes:[Hn.a],styles:[".container[_ngcontent-%COMP%]{padding:1% 5px!important}*[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{padding:16px!important;pointer-events:none}td[_ngcontent-%COMP%]:first-child{font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}[_nghost-%COMP%]     .ant-table table{border-collapse:collapse}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:1px solid #f0f0f0}"]}),rl);function cl(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc("",null==t||null==t.value?null:t.value.total," Total Patients")}}function ul(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc("",null==t||null==t.value?null:t.value.total," Total Patient")}}function fl(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc("",null==t||null==t.value?null:t.value.primary," Primary Patients")}}function dl(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc("",null==t||null==t.value?null:t.value.primary," Primary Patient")}}function bl(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc("",null==t||null==t.value?null:t.value.secondary," Secondary Patients")}}function pl(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc("",null==t||null==t.value?null:t.value.secondary," Secondary Patient")}}function gl(n,e){if(1&n&&(T.Xb(0,"tr"),T.Xb(1,"td"),T.Xc(2),T.jc(3,"userLocation"),T.Wb(),T.Vc(4,cl,2,1,"td",3),T.Vc(5,ul,2,1,"td",3),T.Vc(6,fl,2,1,"td",3),T.Vc(7,dl,2,1,"td",3),T.Vc(8,bl,2,1,"td",3),T.Vc(9,pl,2,1,"td",3),T.Sb(10,"td"),T.Wb()),2&n){var t=e.$implicit;T.Db(2),T.Yc(T.kc(3,7,null==t?null:t.key)),T.Db(2),T.rc("ngIf",(null==t||null==t.value?null:t.value.total)>1),T.Db(1),T.rc("ngIf",(null==t||null==t.value?null:t.value.total)<=1),T.Db(1),T.rc("ngIf",(null==t||null==t.value?null:t.value.primary)>1),T.Db(1),T.rc("ngIf",(null==t||null==t.value?null:t.value.primary)<=1),T.Db(1),T.rc("ngIf",(null==t||null==t.value?null:t.value.secondary)>1),T.Db(1),T.rc("ngIf",(null==t||null==t.value?null:t.value.secondary)<=1)}}var vl,ml=function(){return["20%","20%","20%","20%","20%"]},hl=((vl=function(){function n(){a(this,n),this.patientsBySites=new Map}return l(n,[{key:"ngOnInit",value:function(){var n,e=this;null===(n=this.assignedUsers)||void 0===n||n.forEach(function(n){var t,i=null===(t=null==n?void 0:n.locations[0])||void 0===t?void 0:t.id;if(i)if(e.patientsBySites.get(i)){var a=e.patientsBySites.get(i).total+1,o=n.assignedStaffs.findIndex(function(n){return"PRIMARY"===n.assignedStaffType&&n.staffId===e.staffId}),l=e.patientsBySites.get(i).primary,r=e.patientsBySites.get(i).secondary;o>=0?l++:r++,e.patientsBySites.set(i,{total:a,primary:l,secondary:r})}else l=0,r=0,n.assignedStaffs.findIndex(function(n){return"PRIMARY"===n.assignedStaffType&&n.staffId===e.staffId})>=0?l++:r++,e.patientsBySites.set(i,{total:1,primary:l,secondary:r})})}}]),n}()).\u0275fac=function(n){return new(n||vl)},vl.\u0275cmp=T.Lb({type:vl,selectors:[["app-assigned-site-users"]],inputs:{role:"role",staffId:"staffId",assignedUsers:"assignedUsers"},decls:5,vars:10,consts:[[1,"container"],["nzSize","small",3,"nzShowPagination","nzPageSize","nzWidthConfig","nzNoResult","nzFooter","nzTemplateMode"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"nz-table",1),T.Xb(2,"tbody"),T.Vc(3,gl,11,9,"tr",2),T.jc(4,"keyvalue"),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(1),T.rc("nzShowPagination",!1)("nzPageSize",999999)("nzWidthConfig",T.xc(9,ml))("nzNoResult",null)("nzFooter",null)("nzTemplateMode",!0),T.Db(2),T.rc("ngForOf",T.kc(4,7,e.patientsBySites)))},directives:[_.f,_.i,f.p,_.o,_.e,f.q],pipes:[f.j,Yn.a],styles:[".container[_ngcontent-%COMP%]{padding:1% 5px!important}*[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{padding:16px!important;pointer-events:none}td[_ngcontent-%COMP%]:first-child{font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}[_nghost-%COMP%]     .ant-table table{border-collapse:collapse}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:1px solid #f0f0f0}"]}),vl),Sl=function(n,e){return{role:n,staffName:e}};function zl(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"div",9),T.Xb(2,"div",5),T.Sb(3,"app-icons",10),T.Wb(),T.Xc(4," \xa0 "),T.Xb(5,"strong"),T.Xc(6),T.jc(7,"translate"),T.Wb(),T.Xc(8," \xa0 "),T.Sb(9,"app-icons",8),T.Wb(),T.Ub()),2&n){var t=T.ic();T.Db(1),T.tc("routerLink","/staff/edit/",null==t.staff?null:t.staff.id,""),T.rc("queryParams",T.zc(6,Sl,t.role,null==t.staff?null:t.staff.fullName)),T.Db(2),T.rc("originalStyle",!0),T.Db(3),T.Yc(T.kc(7,4,"PATIENT.EDIT_PROFILE"))}}function yl(n,e){if(1&n&&(T.Xb(0,"div",9),T.Xb(1,"div",5),T.Sb(2,"app-icons",10),T.Wb(),T.Xc(3," \xa0 "),T.Xb(4,"strong"),T.Xc(5,"Assign Physicians"),T.Wb(),T.Xc(6," \xa0 "),T.Sb(7,"app-icons",8),T.Wb()),2&n){var t=T.ic(2);T.tc("routerLink","/staff/assign/physicians/",null==t.staff?null:t.staff.id,""),T.rc("queryParams",T.zc(3,Sl,t.role,null==t.staff?null:t.staff.fullName)),T.Db(2),T.rc("originalStyle",!0)}}function Xl(n,e){if(1&n&&(T.Vb(0),T.Vc(1,yl,8,6,"div",3),T.Ub()),2&n){var t=T.ic();T.Db(1),T.rc("ngIf","MONITORING_STAFF"===t.role)}}function Il(n,e){if(1&n&&(T.Xb(0,"div",9),T.Xb(1,"div",5),T.Sb(2,"app-icons",10),T.Wb(),T.Xc(3," \xa0 "),T.Xb(4,"strong"),T.Xc(5,"Assign Monitoring Staff"),T.Wb(),T.Xc(6," \xa0 "),T.Sb(7,"app-icons",8),T.Wb()),2&n){var t=T.ic();T.tc("routerLink","/staff/assign/monitoring-staff/",null==t.staff?null:t.staff.id,""),T.rc("queryParams",T.zc(3,Sl,t.role,null==t.staff?null:t.staff.fullName)),T.Db(2),T.rc("originalStyle",!0)}}var Tl,Dl=function(){return[32,32]},Wl=((Tl=function(){function n(e){a(this,n),this._notificationsService=e}return l(n,[{key:"disableStaff",value:function(){this._notificationsService.warning("Profile Deactivation","This action is disabled, please contact support!")}}]),n}()).\u0275fac=function(n){return new(n||Tl)(T.Rb(xn.b))},Tl.\u0275cmp=T.Lb({type:Tl,selectors:[["app-staff-quick-actions"]],inputs:{staff:"staff",role:"role"},decls:18,vars:12,consts:[[1,"container"],["nz-row","",3,"nzGutter"],[4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"click"],[1,"profile-icon"],["name","profileDelete","size","32px",3,"originalStyle"],["nz-typography","","nzType","danger"],["name","arrowRight"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams"],["name","profileEdit","size","32px",3,"originalStyle"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"h4"),T.Xc(2),T.jc(3,"translate"),T.Wb(),T.Xb(4,"div",1),T.Vc(5,zl,10,9,"ng-container",2),T.Vc(6,Xl,2,1,"ng-container",2),T.Vc(7,Il,8,6,"div",3),T.Xb(8,"div",4),T.ec("click",function(){return e.disableStaff()}),T.Xb(9,"div",5),T.Sb(10,"app-icons",6),T.Wb(),T.Xc(11," \xa0 "),T.Xb(12,"strong",7),T.Xb(13,"label",7),T.Xc(14),T.jc(15,"translate"),T.Wb(),T.Wb(),T.Xc(16," \xa0 "),T.Sb(17,"app-icons",8),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(2),T.Yc(T.kc(3,7,"PATIENT.OTHER_ACCOUNT_ACTIONS")),T.Db(2),T.rc("nzGutter",T.xc(11,Dl)),T.Db(1),T.rc("ngIf",null==e.staff?null:e.staff.active),T.Db(1),T.rc("ngIf",null==e.staff?null:e.staff.active),T.Db(1),T.rc("ngIf","PHYSICIAN"===e.role),T.Db(3),T.rc("originalStyle",!0),T.Db(4),T.Yc(T.kc(15,9,"PATIENT.DEACTIVATE_PROFILE")))},directives:[N.c,f.q,N.a,Sn.a,O.a,D.h],pipes:[zn.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{width:100%;height:175px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey)}h4[_ngcontent-%COMP%]{padding:16px 8px 0;font-weight:700;margin-bottom:15px}[_nghost-%COMP%]     .ant-col-6{cursor:pointer}.profile-icon[_ngcontent-%COMP%]{padding:8px;background-color:#e9e9e9;border-radius:50%;height:50px;width:50px;text-align:center;display:inline-block}strong[_ngcontent-%COMP%]{line-height:40px}app-icons[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{vertical-align:text-bottom;display:inline-block;height:70%}app-icons[_ngcontent-%COMP%]{line-height:50px}.profile-icon[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:unset}@media screen and (orientation:portrait){.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;height:-webkit-fit-content}}"]}),Tl),Pl=["permissionsHost"];function Cl(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-divider"),T.Xb(2,"h4"),T.Xc(3,"Program Participation"),T.Wb(),T.Sb(4,"app-staff-program-participation",7),T.Ub()),2&n){var t=T.ic(2);T.Db(4),T.rc("staff",null==t.staff?null:t.staff.user)}}function Al(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-divider"),T.Xb(2,"h4"),T.Xc(3,"Assigned Sub Tenant Patients"),T.Wb(),T.Sb(4,"app-assigned-tenants",9),T.Ub()),2&n){var t=T.ic(3);T.Db(4),T.rc("assignedTenants",null==t.staff?null:t.staff.tenantPatientCount)}}function _l(n,e){if(1&n&&(T.Vb(0),T.Vc(1,Al,5,1,"ng-container",2),T.Ub()),2&n){var t=T.ic(2);T.Db(1),T.rc("ngIf","PHYSICIAN"===t.role||"MONITORING_STAFF"===t.role)}}function Ol(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-divider"),T.Xb(2,"h4"),T.Xc(3,"Assigned Monitoring Staff"),T.Wb(),T.Sb(4,"app-staff-assigned-users",10),T.Ub()),2&n){var t=T.ic(2);T.Db(4),T.rc("role",t.role)("assignedUsers",null==t.staff?null:t.staff.assignedUsers.MONITORING_STAFF)}}function Ml(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-divider"),T.Xb(2,"h4"),T.Xc(3,"Assigned Physicians"),T.Wb(),T.Sb(4,"app-staff-assigned-users",10),T.Ub()),2&n){var t=T.ic(2);T.Db(4),T.rc("role",t.role)("assignedUsers",null==t.staff?null:t.staff.assignedToUsers.PHYSICIAN)}}function Nl(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-divider"),T.Xb(2,"h4"),T.Xc(3,"Assigned Patients"),T.Wb(),T.Sb(4,"app-assigned-site-users",11),T.Ub()),2&n){var t=T.ic(2);T.Db(4),T.rc("role",t.role)("assignedUsers",null==t.staff?null:t.staff.assignedToUsers.PATIENT)("staffId",t.staffId)}}function Rl(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"h4"),T.Xc(2),T.jc(3,"translate"),T.Wb(),T.Sb(4,"app-staff-basic-info",6),T.Sb(5,"nz-divider"),T.Xb(6,"h4"),T.Xc(7),T.jc(8,"translate"),T.Wb(),T.Sb(9,"app-staff-organisation-info",7),T.Vc(10,Cl,5,1,"ng-container",2),T.Vc(11,_l,2,1,"ng-container",8),T.Vc(12,Ol,5,2,"ng-container",2),T.Vc(13,Ml,5,2,"ng-container",2),T.Vc(14,Nl,5,3,"ng-container",2),T.Ub()),2&n){var t=T.ic();T.Db(2),T.Yc(T.kc(3,9,"COMMON.BASICINFO")),T.Db(2),T.rc("role",t.role)("staff",null==t.staff?null:t.staff.user),T.Db(3),T.Yc(T.kc(8,11,"PATIENT.ORGANIZATIONAL_INFORMATION")),T.Db(2),T.rc("staff",null==t.staff?null:t.staff.user),T.Db(1),T.rc("ngIf","PHYSICIAN"===t.role),T.Db(2),T.rc("ngIf","PHYSICIAN"===t.role&&(null==t.staff||null==t.staff.assignedUsers.MONITORING_STAFF?null:t.staff.assignedUsers.MONITORING_STAFF.length)),T.Db(1),T.rc("ngIf","PHYSICIAN"!==t.loggedInUserRole&&"MONITORING_STAFF"===t.role&&(null==t.staff||null==t.staff.assignedToUsers.PHYSICIAN?null:t.staff.assignedToUsers.PHYSICIAN.length)),T.Db(1),T.rc("ngIf","MONITORING_STAFF"===t.role&&(null==t.staff||null==t.staff.assignedToUsers.PATIENT?null:t.staff.assignedToUsers.PATIENT.length))}}function El(n,e){1&n&&T.Sb(0,"nz-divider")}function kl(n,e){}function wl(n,e){if(1&n&&T.Sb(0,"app-staff-quick-actions",14),2&n){var t=T.ic(3);T.rc("staff",null==t.staff?null:t.staff.user)("role",t.role)}}function xl(n,e){if(1&n&&(T.Vb(0),T.Vc(1,wl,1,2,"app-staff-quick-actions",13),T.Ub()),2&n){var t=T.ic(2);T.Db(1),T.rc("ngIf",null==t.staff?null:t.staff.user)}}var Vl=function(){return["EDIT_PHYSICIAN","EDIT_MONITORING_STAFF","ASSIGN_STAFF","ASSIGN_MONITORING_STAFF_PHYSICIAN"]};function Ll(n,e){1&n&&(T.Vb(0),T.Vc(1,xl,2,1,"ng-container",12),T.Ub()),2&n&&(T.Db(1),T.rc("anyFeaturePermitted",T.xc(1,Vl)))}var Fl,Ul=((Fl=function(n){r(t,n);var e=c(t);function t(n,i,o,l){var r;a(this,t),(r=e.call(this))._staffService=n,r._activatedRoute=i,r._router=o,r._componentFactoryResolver=l,r.staffId=r._activatedRoute.snapshot.params.id,r.role=r._activatedRoute.snapshot.queryParamMap.get("role"),r.status=r._activatedRoute.snapshot.queryParamMap.get("status"),r.loggedInUserRole=localStorage.getItem("loggedInUserRole");var s=r._activatedRoute.snapshot.queryParamMap.get("staffName")||"Details";return r._routeHelperService.setTitleForRoute(s),r}return l(t,[{key:"ngOnInit",value:function(){this.getStaffDetails()}},{key:"initPermissionComponent",value:function(){var n,e=this._componentFactoryResolver.resolveComponentFactory(ya);null===(n=this.viewContainerRef)||void 0===n||n.clear(),this.permissionsComponentRef=this.viewContainerRef.createComponent(e),this.permissionsComponentRef.instance.role=this.role,this.permissionsComponentRef.instance.userId=this.staffId,this.permissionsComponentRef.instance.preview=!0,this.permissionsComponentRef.instance.userMode="EDIT",this.permissionsComponentRef.instance.roleId=this.roleId,this.permissionsComponentRef.instance.roleName=this.roleName,this.permissionsComponentRef.instance.staffActive=this.staff.user.active}},{key:"getStaffDetails",value:function(){var n=this;this.loading=!0,this._staffService.fetchStaffMemberById(this.staffId,this.staffId,this.status).subscribe(function(e){n.staff=e,n.loading=!1,n.roleName=e.user.roles[0].name,n.roleId=e.user.roles[0].id,console.log("Role id 1\t: ",n.roleId),n.initPermissionComponent()})}},{key:"editProfile",value:function(){var n,e;this._router.navigate(["staff/edit",this.staffId],{queryParams:{role:this.role,staffName:null===(e=null===(n=this.staff)||void 0===n?void 0:n.user)||void 0===e?void 0:e.fullName}})}}]),t}(X.a)).\u0275fac=function(n){return new(n||Fl)(T.Rb(pn.a),T.Rb(D.a),T.Rb(D.g),T.Rb(T.j))},Fl.\u0275cmp=T.Lb({type:Fl,selectors:[["app-staff-view"]],viewQuery:function(n,e){var t;1&n&&T.ed(Pl,1,T.R),2&n&&T.Hc(t=T.fc())&&(e.viewContainerRef=t.first)},features:[T.Ab],decls:10,vars:4,consts:[[1,"container"],["nzTip","Loading...",2,"min-height","50vh",3,"nzSpinning"],[4,"ngIf"],["id","permissions","nz-row","","nzGutter","32"],["nz-col","","nzSpan","24"],["permissionsHost",""],[3,"role","staff"],[3,"staff"],[4,"isAccessAcrossTenantEnabled"],[3,"assignedTenants"],[3,"role","assignedUsers"],[3,"role","assignedUsers","staffId"],[4,"anyFeaturePermitted"],[3,"staff","role",4,"ngIf"],[3,"staff","role"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Xb(1,"nz-spin",1),T.Vc(2,Rl,15,13,"ng-container",2),T.Vb(3),T.Vc(4,El,1,0,"nz-divider",2),T.Xb(5,"div",3),T.Xb(6,"div",4),T.Vc(7,kl,0,0,"ng-template",null,5,T.Wc),T.Wb(),T.Wb(),T.Ub(),T.Wb(),T.Wb(),T.Vc(9,Ll,2,2,"ng-container",2)),2&n&&(T.Db(1),T.rc("nzSpinning",e.loading),T.Db(1),T.rc("ngIf",!!e.staff),T.Db(2),T.rc("ngIf",!!e.staff),T.Db(5),T.rc("ngIf","TENANT_ADMIN"==e.loggedInUserRole))},directives:[co.a,f.q,N.c,N.a,Oo,E.a,xo,Ne.a,$o,el,sl,hl,Ce.a,Wl],pipes:[zn.a],styles:[".container[_ngcontent-%COMP%]{padding:30px 20px!important;width:90%}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}p[_ngcontent-%COMP%]{margin-left:10px}#permissions[_ngcontent-%COMP%]{margin-left:-8px!important}"]}),Fl);function jl(n,e){1&n&&(T.Vb(0),T.Xc(1,", "),T.Ub())}function Gl(n,e){if(1&n&&(T.Xb(0,"strong"),T.Xc(1),T.jc(2,"titlecase"),T.jc(3,"userLocation"),T.Vc(4,jl,2,0,"ng-container",11),T.Wb()),2&n){var t=e.$implicit,i=e.index,a=T.ic(2);T.Db(1),T.Zc(" ",T.kc(2,2,T.kc(3,4,null==t?null:t.id)),""),T.Db(3),T.rc("ngIf",i!==(null==a.staff||null==a.staff.locations?null:a.staff.locations.length)-1)}}function Yl(n,e){if(1&n){var t=T.Yb();T.Xb(0,"button",12),T.ec("click",function(n){return T.Lc(t),T.ic(2).filterStaff(n)}),T.Sb(1,"app-icons",13),T.Wb()}2&n&&(T.Db(1),T.rc("originalStyle",!0))}function Hl(n,e){if(1&n&&(T.Vb(0),T.Sb(1,"nz-empty",14),T.Ub()),2&n){var t=T.ic(2);T.Db(1),T.rc("nzNotFoundContent",t.searchKey?"No monitoring staff available matching your search":"No monitoring staff found")}}function Bl(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" 0",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0," ")}}function ql(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" ",null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount," ")}}function Zl(n,e){1&n&&(T.Vb(0),T.Xc(1," Physician "),T.Ub())}function $l(n,e){1&n&&(T.Vb(0),T.Xc(1," Physicians "),T.Ub())}function Ql(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" 0",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0," ")}}function Kl(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" ",null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount," ")}}function Jl(n,e){1&n&&(T.Vb(0),T.Xc(1," Active Patient "),T.Ub())}function nr(n,e){1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"translate"),T.Ub()),2&n&&(T.Db(1),T.Zc(" Active ",T.kc(2,1,"COMMON.PATIENTS")," "))}var er=function(n){return{border:n}},tr=function(n){return[n]};function ir(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"div",15),T.Xb(2,"div",16),T.Xb(3,"div",17),T.Xb(4,"label",18),T.ec("ngModelChange",function(n){return e.$implicit.selected=n}),T.Wb(),T.Wb(),T.Wb(),T.Xb(5,"h5",19),T.Xb(6,"strong",20),T.Xc(7),T.Wb(),T.Wb(),T.Xb(8,"h5",21),T.jc(9,"userLocations"),T.Xc(10),T.jc(11,"userLocations"),T.Wb(),T.Xb(12,"div",22),T.Xb(13,"div",23),T.Xb(14,"span",24),T.Vc(15,Bl,2,1,"ng-container",11),T.Vc(16,ql,2,1,"ng-container",11),T.Wb(),T.Xb(17,"span",25),T.Vc(18,Zl,2,0,"ng-container",11),T.Vc(19,$l,2,0,"ng-container",11),T.Wb(),T.Wb(),T.Xb(20,"div",23),T.Xb(21,"span",24),T.Vc(22,Ql,2,1,"ng-container",11),T.Vc(23,Kl,2,1,"ng-container",11),T.Wb(),T.Xb(24,"span",25),T.Vc(25,Jl,2,0,"ng-container",11),T.Vc(26,nr,3,3,"ng-container",11),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("ngClass",null!=t&&t.assigned?"assigned shadowed":"")("ngStyle",T.yc(27,er,null!=t&&t.selected?"2px solid #a7c853":"2px solid #ffffff")),T.Db(3),T.rc("nzDisabled",t.assigned)("ngModel",t.selected)("nzValue",t.id),T.Db(1),T.rc("nzTooltipTitle",(null==t?null:t.fullName)||"N/A"),T.Db(1),T.rc("ngClass",T.yc(29,tr,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.Zc(" ",(null==t?null:t.fullName)||"N/A"," "),T.Db(1),T.sc("nzTooltipTitle",T.kc(9,23,null==t?null:t.locations)),T.rc("ngClass",T.yc(31,tr,null!=t&&t.assigned?"assigned":"")),T.Db(2),T.Zc(" ",T.kc(11,25,null==t?null:t.locations)," "),T.Db(4),T.rc("ngClass",T.yc(33,tr,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)<10),T.Db(1),T.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)>=10),T.Db(1),T.rc("ngClass",T.yc(35,tr,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",1===((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)),T.Db(1),T.rc("ngIf",1!==((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)),T.Db(2),T.rc("ngClass",T.yc(37,tr,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)<10),T.Db(1),T.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)>=10),T.Db(1),T.rc("ngClass",T.yc(39,tr,null!=t&&t.assigned?"assigned":"")),T.Db(1),T.rc("ngIf",1===((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)),T.Db(1),T.rc("ngIf",1!==((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0))}}function ar(n,e){if(1&n){var t=T.Yb();T.Xb(0,"div",1),T.Xb(1,"div",2),T.Xb(2,"div",3),T.Xb(3,"h4",4),T.Xc(4),T.Wb(),T.Xb(5,"p",4),T.Xc(6," Assigining a minimum of one staff member is important for the staff member to actively view and manage the assigned patients. "),T.Sb(7,"br"),T.Sb(8,"br"),T.Vb(9),T.Xc(10," You can assign one or multiple monitoring staff from the "),T.Vc(11,Gl,5,6,"strong",5),T.Xc(12," sites. They will be assigned as a monitoring staff to all the patients under the selected sites. "),T.Ub(),T.Sb(13,"br"),T.Sb(14,"br"),T.Vb(15),T.Xb(16,"strong"),T.Xc(17,"Note: "),T.Wb(),T.Xc(18,"Once assigned, we will be unable to un-assign the staff from these physicians at these locations. "),T.Ub(),T.Wb(),T.Wb(),T.Xb(19,"div",6),T.Xb(20,"nz-input-group",7),T.Xb(21,"input",8),T.ec("ngModelChange",function(n){return T.Lc(t),T.ic().searchKey=n})("ngModelChange",function(n){return T.Lc(t),T.ic().filterStaff(n)}),T.jc(22,"translate"),T.Wb(),T.Wb(),T.Vc(23,Yl,2,1,"ng-template",null,9,T.Wc),T.Wb(),T.Wb(),T.Xb(25,"div",10),T.Vc(26,Hl,2,1,"ng-container",11),T.Vc(27,ir,27,41,"ng-container",5),T.Wb(),T.Wb()}if(2&n){var i=T.Ic(24),a=T.ic();T.Db(4),T.Zc("Assign monitoring staff to ",null==a.staff?null:a.staff.fullName,""),T.Db(7),T.rc("ngForOf",null==a.staff?null:a.staff.locations),T.Db(9),T.rc("nzAddOnAfter",i),T.Db(1),T.sc("placeholder",T.kc(22,7,"COMMON.SEARCH")),T.rc("ngModel",a.searchKey),T.Db(5),T.rc("ngIf",!(null!=a.filteredStaff&&a.filteredStaff.length)),T.Db(1),T.rc("ngForOf",a.filteredStaff)}}var or,lr=((or=function(n){r(i,n);var t=c(i);function i(n,e,o,l){var r;return a(this,i),(r=t.call(this))._router=n,r._activatedRoute=e,r._staffService=o,r._notificationsService=l,r.role=r._activatedRoute.snapshot.queryParamMap.get("role"),r._routeHelperService.isPrimaryActionTriggered().pipe(Object(kn.filter)(function(n){return!!n}),Object(wn.takeUntil)(r.unsubscribed)).subscribe(function(){return r.assignStaff()}),r}return l(i,[{key:"ngOnInit",value:function(){this.getStaffById()}},{key:"getStaffById",value:function(){var n=this;this._staffService.fetchStaffMemberById(this._activatedRoute.snapshot.params.id).subscribe(function(e){n.staff=null==e?void 0:e.user,n.assignedStaff=null==e?void 0:e.assignedUsers[En.a.MONITORING_STAFF],n.getAssignableStaff()})}},{key:"checkIfStaffAssigned",value:function(){var n,e=this;null===(n=this.assignedStaff)||void 0===n||n.forEach(function(n){var t=e.filteredStaff.find(function(e){return e.id===n.id});t&&(t.selected=!0,t.assigned=!0)})}},{key:"getAssignableStaff",value:function(){var n=this,e=this._activatedRoute.snapshot.params.id,t=this._activatedRoute.snapshot.queryParamMap.get("role");t=En.a.PHYSICIAN===t?En.a.MONITORING_STAFF:En.a.PHYSICIAN,this._staffService.fetchAssignableStaffMembersById(e,t).subscribe(function(e){n.filteredStaff=e,n.staffMembers=JSON.parse(JSON.stringify(e)),n.checkIfStaffAssigned()})}},{key:"assignStaff",value:function(){var n=this,e={};this.filteredStaff.filter(function(n){return n.selected}).filter(function(e){var t,i;return!(null===(t=n.assignedStaff)||void 0===t?void 0:t.length)||-1===(null===(i=n.assignedStaff)||void 0===i?void 0:i.findIndex(function(n){return n.id===e.id}))}).forEach(function(t){e[null==t?void 0:t.id]=n.staff.id}),this._staffService.assignStaffMembers({assignmentMap:e,assignTo:this.role}).subscribe(function(e){e&&n._notificationsService.success("Assignment",(null==e?void 0:e.message)||"Assigned"),n._router.navigate(["/staff/view/",n.staff.id],{queryParams:{role:n.role}})})}},{key:"filterStaff",value:function(n){if(!n)return this.filteredStaff=e(this.staffMembers),void this.checkIfStaffAssigned();this.filteredStaff=this.staffMembers.filter(function(e){var t,i;return null===(i=null===(t=null==e?void 0:e.fullName)||void 0===t?void 0:t.toLowerCase())||void 0===i?void 0:i.includes(null==n?void 0:n.toLowerCase())}),this.checkIfStaffAssigned()}}]),i}(X.a)).\u0275fac=function(n){return new(n||or)(T.Rb(D.g),T.Rb(D.a),T.Rb(pn.a),T.Rb(xn.b))},or.\u0275cmp=T.Lb({type:or,selectors:[["app-monitoring-staff-assigner"]],features:[T.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","17"],["nz-typography",""],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngIf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-checkbox","",3,"nzDisabled","ngModel","nzValue","ngModelChange"],["nz-typography","","nz-tooltip","",1,"name",3,"nzTooltipTitle"],[3,"ngClass"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"]],template:function(n,e){1&n&&T.Vc(0,ar,28,9,"div",0),2&n&&T.rc("ngIf",e.staff)},directives:[f.q,N.c,N.a,O.a,f.p,Vn.a,Ln.c,Ln.b,g.d,g.u,g.x,Fn.a,Un.a,Sn.a,jn.b,f.o,f.r,Gn.a,hn.d],pipes:[zn.a,f.A,Yn.a,Hn.a],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);height:110px;-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-20px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}"]}),or),rr=o("0W7X"),sr={Listing:{header:!0,title:"Staff",searchEnabled:!0,primaryAction:{},secondaryAction:{},multiAction:{title:"Add Staff",permissions:[rr.a.ADD_PHYSICIAN,rr.a.ADD_MONITORING_STAFF,rr.a.ADD_ENROLMENT_STAFF],actions:[{title:"Physician",value:"PHYSICIAN",permissions:[rr.a.ADD_PHYSICIAN]},{title:"Bulk Add Physician",value:"BULK_PHYSICIAN",permissions:[rr.a.ADD_PHYSICIAN]},{title:"Monitoring Staff",value:"MONITORING_STAFF",permissions:[rr.a.ADD_MONITORING_STAFF]},{title:"Enrolment Staff",value:"ENROLMENT_STAFF",permissions:[rr.a.ADD_ENROLMENT_STAFF]},{title:"Manager",value:"MANAGER_STAFF",permissions:[rr.a.ADD_MANAGER_STAFF]}],enabled:!0},privileges:[]},Form:{header:!0,title:"Staff",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[rr.a.ADD_MONITORING_STAFF,rr.a.VIEW_MONITORING_STAFF],showTenantToggle:!1},Detail:{header:!0,title:"Details",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[rr.a.VIEW_STAFF],showTenantToggle:!1},PhysicianAssigner:{header:!0,title:"Staff actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[rr.a.VIEW_STAFF,rr.a.EDIT_STAFF],showTenantToggle:!1},MonitoringStaffAssigner:{header:!0,title:"Staff actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[rr.a.VIEW_STAFF,rr.a.EDIT_STAFF],showTenantToggle:!1},StaffDashboardWidgets:{header:!0,title:"Dashboard Widgets",searchEnabled:!1,primaryAction:{title:"",permissions:[],enabled:!1},secondaryAction:{},multiAction:{},privileges:[rr.a.VIEW_STAFF],showTenantToggle:!1},Audit:{header:!0,title:"Audit",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[rr.a.VIEW_STAFF],showTenantToggle:!1},WorkList:{header:!0,title:"Staff Work List",searchEnabled:!0,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[rr.a.VIEW_WORK_LIST],showTenantToggle:!0},BulkUpload:{header:!0,title:"Bulk Upload",searchEnabled:!1,primaryAction:{title:"Upload",permissions:[],enabled:!0},secondaryAction:{title:"Download Template",permissions:[],enabled:!0},multiAction:{},privileges:[rr.a.ADD_PHYSICIAN]},RoleForm:{header:!0,title:"Role",searchEnabled:!1,primaryAction:{title:"Save",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!1},ListRoles:{header:!0,title:"Roles",searchEnabled:!1,primaryAction:{title:"Add Role",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!0,subTenantToggleMode:"SINGLE"},EditRoleForm:{header:!0,title:"Edit Role",searchEnabled:!1,primaryAction:{title:"Save",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!1}},cr=o("jG/O"),ur=o("H/XM"),fr=o("Gi1d"),dr=o("IVUT"),br=o("r0o6"),pr=o("YRM7"),gr=o("Ff2k"),vr=o("KupA"),mr=o("BQXE");function hr(n,e){1&n&&(T.Xb(0,"strong"),T.Xc(1," Qualification engine is running, please wait for it to complete before continuing... "),T.Wb())}function Sr(n,e){if(1&n&&(T.Xb(0,"strong"),T.Xc(1),T.Wb()),2&n){var t=T.ic(2);T.Db(1),T.Zc(" Qualification engine is running for ",null==t.qualificationState?null:t.qualificationState.numberOfUsers," patient(s), please wait for it to complete before continuing... ")}}function zr(n,e){if(1&n){var t=T.Yb();T.Vc(0,hr,2,0,"strong",15),T.Vc(1,Sr,2,1,"strong",15),T.Xc(2," \xa0\xa0 "),T.Xb(3,"app-icons",16),T.ec("click",function(){return T.Lc(t),T.ic().getStaffDetails()}),T.Wb()}if(2&n){var i=T.ic();T.rc("ngIf",0===(null==i.qualificationState?null:i.qualificationState.numberOfUsers)),T.Db(1),T.rc("ngIf",0!==(null==i.qualificationState?null:i.qualificationState.numberOfUsers))}}function yr(n,e){if(1&n&&T.Sb(0,"nz-alert",17),2&n){T.ic();var t=T.Ic(1);T.rc("nzMessage",t)}}function Xr(n,e){1&n&&(T.Xb(0,"th"),T.Xc(1," Sub Tenant "),T.Wb())}function Ir(n,e){if(1&n&&(T.Xb(0,"span",25),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.tc("routerLink","/leads/details/",null==t||null==t.lead?null:t.lead.id,""),T.Db(1),T.ad(" ",null==t||null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.firstName," ",null==t||null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.lastName," ")}}function Tr(n,e){if(1&n&&(T.Xb(0,"span",25),T.Xc(1),T.Wb()),2&n){var t=T.ic().$implicit;T.tc("routerLink","/patient/view/",null==t||null==t.patient?null:t.patient.id,""),T.Db(1),T.Zc(" ",null==t||null==t.patient?null:t.patient.fullName," ")}}function Dr(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"tenantName"),T.Ub()),2&n){var t=T.ic(2).$implicit;T.Db(1),T.Zc(" ",T.kc(2,1,null==t||null==t.patient?null:t.patient.tenantId)," ")}}function Wr(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.jc(2,"tenantName"),T.Ub()),2&n){var t=T.ic(2).$implicit;T.Db(1),T.Zc(" ",T.kc(2,1,null==t||null==t.lead?null:t.lead.tenantId)," ")}}function Pr(n,e){if(1&n&&(T.Xb(0,"td"),T.Vc(1,Dr,3,3,"ng-container",15),T.Vc(2,Wr,3,3,"ng-container",15),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.rc("ngIf","PATIENT"===(null==t?null:t.userType)),T.Db(1),T.rc("ngIf","LEAD"===(null==t?null:t.userType))}}function Cr(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xc(1," \xa0 "),T.Xb(2,"a",27),T.ec("nzOnConfirm",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic().initiateDischarge(null==n?null:n.id,null==n?null:n.userType)}),T.Sb(3,"app-icons",28),T.Wb(),T.Ub()}}function Ar(n,e){if(1&n&&(T.Vb(0),T.Vc(1,Cr,4,0,"ng-container",15),T.jc(2,"filterList"),T.Ub()),2&n){var t=T.ic(2).$implicit;T.Db(1),T.rc("ngIf",!T.mc(2,1,"type",null==t?null:t.workListItems,"DISCHARGE_FROM_PROGRAM"))}}function _r(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xc(1," \xa0 "),T.Xb(2,"a",29),T.ec("nzOnConfirm",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic().dischargeFromProgram(null==n?null:n.id,null==n||null==n.patient?null:n.patient.fullName)}),T.Sb(3,"app-icons",30),T.Wb(),T.Ub()}}var Or=function(){return["DISCHARGE_FROM_PROGRAM_MANAGEMENT"]};function Mr(n,e){1&n&&(T.Vb(0),T.Vc(1,_r,4,0,"ng-container",26),T.Ub()),2&n&&(T.Db(1),T.rc("isFeaturePermitted",T.xc(1,Or)))}var Nr=function(){return["PATIENT_DISCHARGE_FROM_PROGRAM_MANAGEMENT"]};function Rr(n,e){if(1&n&&(T.Vb(0),T.Vc(1,Ar,3,5,"ng-container",26),T.Vc(2,Mr,2,2,"ng-container",15),T.jc(3,"filterList"),T.Ub()),2&n){var t=T.ic().$implicit;T.Db(1),T.rc("isFeaturePermitted",T.xc(6,Nr)),T.Db(1),T.rc("ngIf",T.mc(3,2,"type",null==t?null:t.workListItems,"DISCHARGE_FROM_PROGRAM"))}}function Er(n,e){if(1&n){var t=T.Yb();T.Xb(0,"a",36),T.ec("click",function(){T.Lc(t);var n=T.ic(2).$implicit,e=T.ic().$implicit;return T.ic().resolve(n,e)}),T.Xc(1," Patient Agrees "),T.Wb()}}function kr(n,e){if(1&n){var t=T.Yb();T.Xb(0,"a",37),T.ec("nzOnConfirm",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic().dischargeFromProgram(null==n?null:n.id,null==n||null==n.patient?null:n.patient.fullName)}),T.Xc(1," Discharge "),T.Wb()}}var wr=function(){return["RESOLVE_WORK_LIST_ITEM"]};function xr(n,e){1&n&&(T.Vb(0),T.Vc(1,Er,2,0,"a",34),T.Xc(2," \xa0 "),T.Vc(3,kr,2,0,"a",35),T.Ub()),2&n&&(T.Db(1),T.rc("isFeaturePermitted",T.xc(2,wr)),T.Db(2),T.rc("isFeaturePermitted",T.xc(3,Or)))}function Vr(n,e){if(1&n){var t=T.Yb();T.Xb(0,"a",36),T.ec("click",function(){T.Lc(t);var n=T.ic(2).$implicit,e=T.ic().$implicit;return T.ic().resolve(n,e)}),T.Xc(1," Revoke "),T.Wb()}}function Lr(n,e){if(1&n){var t=T.Yb();T.Xb(0,"a",37),T.ec("nzOnConfirm",function(){T.Lc(t);var n=T.ic(3).$implicit;return T.ic().dischargeFromProgram(null==n?null:n.id,null==n||null==n.patient?null:n.patient.fullName)}),T.Xc(1," Discharge "),T.Wb()}}function Fr(n,e){1&n&&(T.Vb(0),T.Vc(1,Vr,2,0,"a",34),T.Xc(2," \xa0 "),T.Vc(3,Lr,2,0,"a",35),T.Ub()),2&n&&(T.Db(1),T.rc("isFeaturePermitted",T.xc(2,wr)),T.Db(2),T.rc("isFeaturePermitted",T.xc(3,Or)))}function Ur(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit,i=T.ic(2);T.Db(1),T.bd(" ",null==i.issueReasonMap?null:i.issueReasonMap.get(null==t?null:t.type)," from tier ",null==t?null:t.additionalInformation.oldTier," to tier ",null==t?null:t.additionalInformation.newTier," ")}}function jr(n,e){if(1&n&&(T.Vb(0),T.Xc(1),T.Ub()),2&n){var t=T.ic().$implicit,i=T.ic(2);T.Db(1),T.Zc(" ",null==i.issueReasonMap?null:i.issueReasonMap.get(null==t?null:t.type)," ")}}function Gr(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"li",31),T.Xb(2,"ul",32),T.Xb(3,"nz-list-item-action"),T.Vc(4,xr,4,4,"ng-container",15),T.Vc(5,Fr,4,4,"ng-container",15),T.Wb(),T.Wb(),T.Xb(6,"nz-tag",33),T.Xc(7),T.Wb(),T.Xc(8," \xa0 "),T.Vc(9,Ur,2,3,"ng-container",15),T.Vc(10,jr,2,1,"ng-container",15),T.Wb(),T.Ub()),2&n){var t=e.$implicit,i=T.ic(2);T.Db(4),T.rc("ngIf","INSURANCE_TIER_ISSUE"===(null==t?null:t.type)),T.Db(1),T.rc("ngIf","DISCHARGE_FROM_PROGRAM"===(null==t?null:t.type)),T.Db(1),T.rc("nzColor","green"),T.Db(1),T.Yc(null==i.contextMap?null:i.contextMap.get(null==t?null:t.context)),T.Db(2),T.rc("ngIf","INSURANCE_TIER_ISSUE"===(null==t?null:t.type)),T.Db(1),T.rc("ngIf","INSURANCE_TIER_ISSUE"!==(null==t?null:t.type))}}function Yr(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"tr"),T.Xb(2,"td",18),T.ec("nzExpandChange",function(n){T.Lc(t);var i=e.$implicit;return T.ic().onExpandChange(null==i?null:i.id,n)}),T.Wb(),T.Xb(3,"td",19),T.jc(4,"filterList"),T.jc(5,"filterList"),T.Vc(6,Ir,2,3,"span",20),T.Vc(7,Tr,2,2,"span",20),T.Wb(),T.Xb(8,"td"),T.Xc(9),T.jc(10,"titlecase"),T.Wb(),T.Xb(11,"td"),T.Xc(12),T.Wb(),T.Vc(13,Pr,3,2,"td",13),T.Xb(14,"td"),T.Xb(15,"app-icons",21),T.ec("click",function(){T.Lc(t);var n=e.$implicit;return T.ic().viewUser(null==n?null:n.id,null==n?null:n.userType)}),T.Wb(),T.Xc(16," \xa0 "),T.Xb(17,"app-icons",22),T.ec("click",function(){T.Lc(t);var n=e.$implicit;return T.ic().reEvaluate(null==n?null:n.id,null==n?null:n.userType)}),T.Wb(),T.Vc(18,Rr,4,7,"ng-container",15),T.Wb(),T.Wb(),T.Xb(19,"tr",23),T.Xb(20,"div",1),T.Xb(21,"ul",24),T.Vc(22,Gr,11,6,"ng-container",14),T.Wb(),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=e.$implicit,a=T.ic();T.Db(2),T.rc("nzExpand",a.expandSet.has(null==i?null:i.id)),T.Db(1),T.rc("nzType",T.mc(4,11,"type",null==i?null:i.workListItems,"DISCHARGE_FROM_PROGRAM")?"danger":"default")("nzTooltipTitle",T.mc(5,15,"type",null==i?null:i.workListItems,"DISCHARGE_FROM_PROGRAM")?"Flagged for discharging from the programme":"Go to profile"),T.Db(3),T.rc("ngIf","LEAD"===(null==i?null:i.userType)),T.Db(1),T.rc("ngIf","PATIENT"===(null==i?null:i.userType)),T.Db(2),T.Zc(" ",T.kc(10,19,null==i?null:i.userType)," "),T.Db(3),T.Zc(" ",(null==i||null==i.lead||null==i.lead.patientInfo?null:i.lead.patientInfo.dateOfBirth)||(null==i||null==i.patient?null:i.patient.dateOfBirth)," "),T.Db(6),T.rc("ngIf","PATIENT"===(null==i?null:i.userType)),T.Db(1),T.rc("nzExpand",a.expandSet.has(null==i?null:i.id)),T.Db(2),T.rc("nzDataSource",null==i?null:i.workListItems),T.Db(1),T.rc("ngForOf",null==i?null:i.workListItems)}}var Hr,Br,qr=function(){return[25,50,75,100]},Zr=function(){return["3%","20%","15%","35%","15%"]},$r=((Hr=function(n){r(t,n);var e=c(t);function t(n,i,o,l,r,s,c,u){var f;return a(this,t),(f=e.call(this))._router=n,f._staffWorkList=i,f._leadsService=o,f._staffService=l,f._patientsService=r,f._dataSharingService=s,f._patientsViewService=c,f._notificationsService=u,f.pageLimit=50,f.expandSet=new Set,f.contextMap=new Map([[fr.b.LEAD_QUALIFICATION_ISSUE,"Lead Qualification"],[fr.b.LEAD_INSURANCE_TIER_ISSUE,"Lead Insurance Tier"],[fr.b.PATIENT_QUALIFICATION_ISSUE,"Patient Qualification"],[fr.b.PATIENT_INSURANCE_TIER_ISSUE,"Patient Insurance Tier"],[fr.b.PATIENT_DISCHARGE,"Patient Discharge"]]),f.issueReasonMap=new Map([[fr.a.DOB_ISSUE,"Age is less than 18 years"],[fr.a.DX_CODE_ISSUE,"Two chronic codes are not available"],[fr.a.INSURANCE_ISSUE,"Compatible insurance information is not available"],[fr.a.LANGUAGE_ISSUE,"Language is not supported"],[fr.a.NO_PHYSICIAN_ISSUE,"Physician profile is not assigned"],[fr.a.NO_PARTICIPATING_PHYSICIAN_ISSUE,"Assigned physician does not participate in the program"],[fr.a.NO_VISIT_ENCOUNTER_ISSUE,"No visits or encounters within the last 12 months"],[fr.a.INSURANCE_TIER_ISSUE,"Insurance tier changed"],[fr.a.DISCHARGE_FROM_PROGRAM,"Patient is marked to be discharged"]]),f._routeHelperService.getSearch().pipe(Object(fe.a)(function(n){return null!==n}),Object(ue.a)(f.unsubscribed)).subscribe(function(n){f.searchKey=n,f.setQueryParamsToURL()}),f.activatedRoute.queryParams.pipe(Object(ue.a)(f.unsubscribed)).subscribe(function(n){f.userType=n.userType,f.getData()}),f}return l(t,[{key:"ngOnInit",value:function(){var n=this;this._dataSharingService.onSubTenantChange().pipe(Object(ue.a)(this.unsubscribed)).subscribe(function(e){n.onSubTenantChange(e)})}},{key:"changePageSize",value:function(n){this.pageLimit=n,this.getData()}},{key:"setQueryParamsToURL",value:function(){this._router.navigate([],{relativeTo:this.activatedRoute,queryParams:{userType:this.userType,search:this.searchKey},queryParamsHandling:"merge"})}},{key:"onSubTenantChange",value:function(n){"object"!=typeof n||""==n||null==n||null==n?this.getData():(this.requestTenantIds=n.join(),this.getData(1))}},{key:"getData",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.getWorklistItemsForTenant(n)}},{key:"getWorklistItemsForTenant",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._staffWorkList.fetchWorklistItemsForTenant(e,this.pageLimit,this.userType,this.searchKey,void 0,this.requestTenantIds).subscribe(function(e){n.staffWorkListResponse=e})}},{key:"getWorklistItemsForStaff",value:function(){var n=this;this._staffWorkList.fetchWorklistItemsForStaff(void 0,void 0,void 0,this.requestTenantIds).subscribe(function(e){n.staffWorkListResponse=e})}},{key:"resolve",value:function(n,e){var t,i,a,o,l=this;e.workListItems=null===(t=null==e?void 0:e.workListItems)||void 0===t?void 0:t.filter(function(e){return(null==e?void 0:e.id)!==(null==n?void 0:n.id)}),(null===(i=null==e?void 0:e.workListItems)||void 0===i?void 0:i.length)||(this.staffWorkListResponse.result=null===(o=null===(a=this.staffWorkListResponse)||void 0===a?void 0:a.result)||void 0===o?void 0:o.filter(function(n){return(null==n?void 0:n.id)!==(null==e?void 0:e.id)})),this._staffWorkList.markAsResolved(null==n?void 0:n.id).subscribe(function(){l._notificationsService.success("Work List","Item marked as resolved successfully!")})}},{key:"onExpandChange",value:function(n,e){e?this.expandSet.add(n):this.expandSet.delete(n)}},{key:"viewUser",value:function(n,e){"LEAD"===e?this._router.navigate(["/leads/details/".concat(n)]):"PATIENT"===e&&this._router.navigate(["/patient/view/".concat(n)])}},{key:"reEvaluate",value:function(n,e){var t,i=this,a={userIds:[n]};this.qualificationState||(this.qualificationState={}),this.qualificationState.running=!0,this.qualificationState.numberOfUsers=null===(t=null==a?void 0:a.userIds)||void 0===t?void 0:t.length;var o=this._leadsService.qualifyLeads(a),l=this._patientsService.qualifyPatients(a);Object(br.a)(function(){return"LEAD"===e},o,l).subscribe(function(){i._notificationsService.success("Qualification","".concat(e," is being evaluated, please wait a few seconds...")),i.getStaffDetails()})}},{key:"getStaffDetails",value:function(){var n=this,e=localStorage.getItem("loggedInUser");this._staffService.getStaffByUserId(e).subscribe(function(e){var t,i,a,o,l,r;(null===(t=n.qualificationState)||void 0===t?void 0:t.running)&&!(null===(a=null===(i=null==e?void 0:e.clinicianState)||void 0===i?void 0:i.qualificationState)||void 0===a?void 0:a.running)&&n.getData(),n.qualificationState=null===(o=null==e?void 0:e.clinicianState)||void 0===o?void 0:o.qualificationState,(null===(l=n.qualificationState)||void 0===l?void 0:l.dateTime)&&30<=Object(cr.a)(Object(mi.a)((null===(r=n.qualificationState)||void 0===r?void 0:r.dateTime)+"Z"),new Date)&&(n.qualificationState.running=!1)})}},{key:"initiateDischarge",value:function(n,e){var t=this;this._staffWorkList.generateWorkItem({userIds:[n],userType:e,type:fr.a.DISCHARGE_FROM_PROGRAM,context:fr.b.PATIENT_DISCHARGE}).subscribe(function(){t._notificationsService.success("Worklist","".concat(e," sent for discharge to CDN")),t.getData()})}},{key:"dischargeFromProgram",value:function(n,e){var t=this;this._patientsViewService.showDischargePatientModal(n,e).afterClose.pipe(Object(ue.a)(this.unsubscribed)).subscribe(function(n){"success"===n&&t.getData()})}}]),t}(X.a)).\u0275fac=function(n){return new(n||Hr)(T.Rb(D.g),T.Rb(ur.a),T.Rb(dr.a),T.Rb(pn.a),T.Rb(m.a),T.Rb(h.a),T.Rb(pr.a),T.Rb(xn.b))},Hr.\u0275cmp=T.Lb({type:Hr,selectors:[["app-worklist"]],features:[T.Ab],decls:28,vars:17,consts:[["qualificationMessage",""],[1,"container"],["nz-row",""],["nz-col","","nzSpan","20"],["nzType","warning",3,"nzMessage",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-typoraphy","","nzType","secondary",1,"heading"],["nzPlaceHolder","User Type",3,"ngModel","ngModelChange"],["nzValue","LEAD","nzLabel","Lead"],["nzValue","PATIENT","nzLabel","Patient"],["nzTableLayout","fixed",3,"nzData","nzShowPagination","nzFrontPagination","nzTotal","nzPageSize","nzShowSizeChanger","nzPageSizeOptions","nzWidthConfig","nzPageIndexChange","nzPageSizeChange"],["workListTable",""],["nzWidth","60px"],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-tooltip","","nzTooltipTitle","Refresh","name","reload","size","14px",3,"click"],["nzType","warning",3,"nzMessage"],[3,"nzExpand","nzExpandChange"],["nz-typography","","nz-tooltip","",3,"nzType","nzTooltipTitle"],["actionable","",3,"routerLink",4,"ngIf"],["nz-tooltip","","nzTooltipTitle","View details","name","view",3,"click"],["nz-tooltip","","nzTooltipTitle","Re-evaluate","size","16px","name","reload",3,"click"],[3,"nzExpand"],["nz-list","","nzSize","large",3,"nzDataSource"],["actionable","",3,"routerLink"],[4,"isFeaturePermitted"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to initiate the discharge process?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"],["nz-tooltip","","nzTooltipTitle","Send for discharge","size","16px","name","profileDelete"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to discharge this patient?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"],["nz-tooltip","","nzTooltipTitle","Discharge","size","16px","name","profileDelete"],["nz-list-item","","nzNoFlex",""],["nz-list-item-actions",""],[3,"nzColor"],[3,"click",4,"isFeaturePermitted"],["nz-typography","","nzType","danger","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to discharge this patient?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm",4,"isFeaturePermitted"],[3,"click"],["nz-typography","","nzType","danger","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to discharge this patient?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"]],template:function(n,e){if(1&n&&(T.Vc(0,zr,4,2,"ng-template",null,0,T.Wc),T.Xb(2,"div",1),T.Xb(3,"div",2),T.Xb(4,"div",3),T.Vc(5,yr,1,1,"nz-alert",4),T.Wb(),T.Xb(6,"div",5),T.Xb(7,"label",6),T.Xc(8,"Filter By:"),T.Wb(),T.Xb(9,"nz-select",7),T.ec("ngModelChange",function(n){return e.userType=n})("ngModelChange",function(){return e.setQueryParamsToURL()}),T.Sb(10,"nz-option",8),T.Sb(11,"nz-option",9),T.Wb(),T.Wb(),T.Wb(),T.Xb(12,"nz-table",10,11),T.ec("nzPageIndexChange",function(n){return e.getData(n)})("nzPageSizeChange",function(n){return e.changePageSize(n)}),T.Xb(14,"thead"),T.Xb(15,"tr"),T.Sb(16,"th",12),T.Xb(17,"th"),T.Xc(18),T.jc(19,"translate"),T.Wb(),T.Xb(20,"th"),T.Xc(21,"User Type"),T.Wb(),T.Xb(22,"th"),T.Xc(23,"Date of Birth"),T.Wb(),T.Vc(24,Xr,2,0,"th",13),T.Sb(25,"th"),T.Wb(),T.Wb(),T.Xb(26,"tbody"),T.Vc(27,Yr,23,21,"ng-container",14),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.Ic(13);T.Db(5),T.rc("ngIf",null==e.qualificationState?null:e.qualificationState.running),T.Db(4),T.rc("ngModel",e.userType),T.Db(3),T.rc("nzData",null==e.staffWorkListResponse?null:e.staffWorkListResponse.result)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",null==e.staffWorkListResponse||null==e.staffWorkListResponse.metaData?null:e.staffWorkListResponse.metaData.totalCount)("nzPageSize",e.pageLimit)("nzShowSizeChanger",!0)("nzPageSizeOptions",!0)("nzPageSizeOptions",T.xc(15,qr))("nzWidthConfig",T.xc(16,Zr)),T.Db(6),T.Yc(T.kc(19,13,"COMMON.NAME")),T.Db(9),T.rc("ngForOf",null==t?null:t.data)}},directives:[N.c,N.a,f.q,Pt.d,g.u,g.x,Pt.a,_.f,_.n,_.o,_.e,_.l,Ne.a,_.i,f.p,Sn.a,hn.d,W.a,_.j,O.a,_.p,_.g,gr.a,R.a,D.h,Ee.a,vr.a,gr.e,gr.d,gr.c,pe.a],pipes:[zn.a,mr.a,f.A,xe.a],styles:["nz-alert[_ngcontent-%COMP%]{padding-top:10px}"]}),Hr),Qr=o("Ifg2"),Kr=((Br=function(){function n(){a(this,n),this.headersMap=new Map([["First Name","firstName"],["Last Name","lastName"],["DOB (yyyy-MM-dd)","dateOfBirth"],["Gender","gender"],["Phone Number (optional)","mobile"],["Address Line 1 (optional)","addressLine1"],["Address Line 2 (optional)","addressLine2"],["City (optional)","city"],["State","state"],["Country","country"],["Pin Code","pinCode"],["Default Site","primarySite"],["Other Sites (optional, comma separated)","otherSites"],["Profile Tag (optional, comma separated)","profileTags"],["Staff ID (optional)","staffId"],["Program Participation (comma separated)","programs"],["NPI ID (optional)","npiId"],["Credential (optional)","credentials"]])}return l(n,[{key:"validateHeaders",value:function(n){var e=this;return n.forEach(function(n,t){Object.keys(n).forEach(function(t){Object.defineProperty(n,e.headersMap.get(t),Object.getOwnPropertyDescriptor(n,t)),delete n[t]}),n.rowId=t}),n}}]),n}()).\u0275fac=function(n){return new(n||Br)},Br.\u0275prov=T.Nb({token:Br,factory:Br.\u0275fac}),Br),Jr=o("S5rh"),ns=o("MZxW"),es=o("D9mS"),ts=o("FwiY");function is(n,e){if(1&n){var t=T.Yb();T.Xb(0,"h5"),T.Xb(1,"span",11),T.Sb(2,"i",12),T.Xc(3),T.Wb(),T.Xc(4," \xa0 "),T.Xb(5,"span",13),T.ec("click",function(n){return T.Lc(t),T.ic().removeFile(n)}),T.Sb(6,"i",14),T.Xc(7," Delete"),T.Wb(),T.Wb()}if(2&n){var i=T.ic();T.Db(3),T.Zc(" File Seleted: ",i.uploadedFileName,"")}}function as(n,e){if(1&n&&(T.Xb(0,"li"),T.Xc(1),T.Wb()),2&n){var t=e.$implicit;T.Db(1),T.Zc(" ",t," ")}}function os(n,e){if(1&n&&(T.Xb(0,"div"),T.Xb(1,"nz-card",18),T.Xb(2,"ul"),T.Vc(3,as,2,1,"li",16),T.Wb(),T.Wb(),T.Wb()),2&n){var t=e.$implicit,i=T.ic(2);T.Db(1),T.sc("nzTitle",t.key),T.rc("nzExtra",i.extraTemplate),T.Db(2),T.rc("ngForOf",t.value)}}function ls(n,e){1&n&&(T.Xb(0,"span",19),T.Xb(1,"strong"),T.Xc(2,"Validation Errors"),T.Wb(),T.Wb())}function rs(n,e){if(1&n&&(T.Xb(0,"div",2),T.Xb(1,"nz-card",15),T.Vc(2,os,4,3,"div",16),T.jc(3,"keyvalue"),T.Wb(),T.Vc(4,ls,3,0,"ng-template",null,17,T.Wc),T.Wb()),2&n){var t=T.Ic(5),i=T.ic();T.Db(1),T.rc("nzTitle",t),T.Db(1),T.rc("ngForOf",T.kc(3,2,i.errors))}}var ss,cs=((ss=function(n){r(t,n);var e=c(t);function t(n,i,o,l,r,s,c,u,f){var d;return a(this,t),(d=e.call(this))._xlsxParserService=n,d._physicianXlsxValidator=i,d._datePipe=o,d._staffService=l,d._router=r,d._tagsService=s,d._sitesService=c,d._dataSharingService=u,d._notificationsService=f,d.loading=!1,d.loadingText="Please wait...",d.handleUpload=function(n){d.loading=!0,d.loadingText="Please wait. Reading file ...";var e=new FileReader;e.onload=function(){var t=d._xlsxParserService.parse(e);try{d.data=d._physicianXlsxValidator.validateHeaders(t[Object.keys(t)[0]]);var i=d.data.map(function(n){return d.xlsxDataToStaffRequest(n)}),a=[];if(d.errors=new Map,i.forEach(function(n,e){var t=[];null==n&&t.push("Invalid Physician Data"),d.isStaffRequest(n)?a.push(n):t.push(n),t.length&&d.errors.set("Row : "+e,t)}),d.uploadedFileName=n.file.name,d.loading=!1,d.staffRequests=a,0===d.errors.size&&0===d.staffRequests.length&&d.errors.set("Invalid File",["Invalid File - no physician data found"]),d.errors.size)return;d.errors=null,d._routeHelperService.setPrimaryEnableAction(!1)}catch(o){return d.loading=!1,void d._notificationsService.error("Bulk Upload","Error while reading file headers!")}},e.readAsBinaryString(n.file)},d}return l(t,[{key:"ngOnInit",value:function(){var n,e=this;this._routeHelperService.isPrimaryActionTriggered().pipe(Object(fe.a)(function(n){return!!n}),Object(ue.a)(this.unsubscribed)).subscribe(function(){return e.validateAndSave()}),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(fe.a)(function(n){return!!n}),Object(ue.a)(this.unsubscribed)).subscribe(function(){return e.downloadTemplate()}),this._routeHelperService.setPrimaryEnableAction(!0),null===(n=this._dataSharingService.tenantSettings)||void 0===n||n.pipe(Object(ue.a)(this.unsubscribed)).subscribe(function(n){var t,i,a;n&&(e.tenantConfig=n,e.countryCode=null===(t=e.tenantConfig)||void 0===t?void 0:t.countryCode,e.timezone=null===(i=e.tenantConfig)||void 0===i?void 0:i.timeZone,e.language=null===(a=e.tenantConfig)||void 0===a?void 0:a.language)}),this.getAllSites(),this.getAllTags()}},{key:"onSubTenantChange",value:function(n){"object"==typeof n&&""!=n&&null!=n&&null!=n&&(this.getAllSites(),this.getAllTags(),this.requestTenantId=n)}},{key:"getAllTags",value:function(){var n=this;this._tagsService.getTags("PATIENT",-1,0).subscribe(function(e){var t;n.tags=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.map(function(n){return null==n?void 0:n.name})})}},{key:"getAllSites",value:function(){var n=this;this._sitesService.getAllSites(0,1e3,null,!1).subscribe(function(e){n.allSites=null==e?void 0:e.result})}},{key:"downloadSampleSheet",value:function(){window.open("https://api.cooeyhealth.com/v2/media/Bulk_Upload_Sheet_Updated_For_Site.xlsx","_blank")}},{key:"isStaffRequest",value:function(n){return n.hasOwnProperty("id")}},{key:"removeFile",value:function(n){return this.uploadedFileName=null,this.staffRequests=null,this._routeHelperService.setPrimaryEnableAction(!0),n.stopPropagation(),!1}},{key:"validateAndSave",value:function(){var n=this;this.errors=null,this.loading=!0,this.loadingText="Uploading file to server ...";var e={staffRequest:this.staffRequests,tenantId:this.requestTenantId};this._staffService.validateUploadPhysician(e).subscribe(function(t){n.errors=t,Object.keys(n.errors).length?n.loading=!1:n._staffService.bulkUploadPhysician(e).subscribe(function(){n._notificationsService.success("Bulk Upload","Physicians uploaded successfully!"),n.loading=!1,n._router.navigate(["staff"],{queryParams:{role:"PHYSICIAN"}})},function(e){var t;n.loading=!1,(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)&&n._notificationsService.error("Bulk Upload",e.error.message)})},function(e){var t;n.loading=!1,(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)&&n._notificationsService.error("Bulk Upload",e.error.message)})}},{key:"xlsxDataToStaffRequest",value:function(n){var e,t;(null===(e=null==n?void 0:n.dateOfBirth)||void 0===e?void 0:e.length)&&(n.dateOfBirth=this._datePipe.transform(null==n?void 0:n.dateOfBirth,"yyyy-MM-dd"));var i=[];return null==n.firstName&&i.push("First Name missing"),null==n.lastName&&i.push("Last Name missing"),null==n.gender&&i.push("Gender missing"),i.length>0?"Invalid Physician Data -  "+i.join(","):{id:null,firstName:n.firstName,lastName:n.lastName,credentials:[n.credentials],dateOfBirth:n.dateOfBirth,language:{locale:this.language},email:n.email,username:"",encryptedPassword:"",country:n.country,mobile:n.mobile,gender:null===(t=n.gender)||void 0===t?void 0:t.toUpperCase(),address:this.getAddress(n),timeZone:this.timezone,profileTags:this.getStringListFromCommaSeperatedString(n.profileTags),programs:this.getStringListFromCommaSeperatedString(n.programs),countryCode:this.countryCode,site:n.primarySite,otherSites:this.getStringListFromCommaSeperatedString(n.otherSites),roleType:En.a.PHYSICIAN,npiId:n.npiId,staffId:n.staffId}}},{key:"getAddress",value:function(n){return{line1:n.addressLine1,line2:n.addressLine2,city:n.city,state:n.state,country:n.country,location:n.location,pin:n.pinCode}}},{key:"getStringListFromCommaSeperatedString",value:function(n){return(null==n?void 0:n.split(","))||[]}},{key:"downloadTemplate",value:function(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=bulk-upload-pcp-template.xlsx","_blank")}}]),t}(X.a)).\u0275fac=function(n){return new(n||ss)(T.Rb(Qr.a),T.Rb(Kr),T.Rb(f.e),T.Rb(pn.a),T.Rb(D.g),T.Rb(gi.a),T.Rb(si.a),T.Rb(h.a),T.Rb(xn.b))},ss.\u0275cmp=T.Lb({type:ss,selectors:[["app-bulk-add-physician"]],features:[T.Cb([Qr.a,Kr,f.e,f.j]),T.Ab],decls:24,vars:20,consts:[[3,"defaultTitle","isSearchEnabled","isActionEnabled"],[3,"nzSpinning","nzTip"],[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","6","nzOffset","18"],["mode","SINGLE",3,"onSubTenantSelected"],[1,"file-details-container"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList","nzDisabled"],[4,"ngIf"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["class","container",4,"ngIf"],[2,"color","#8BC34A"],["nz-icon","","nzType","paper-clip","nzTheme","outline"],[2,"color","#FF0000","cursor","pointer",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"nzTitle"],[4,"ngFor","ngForOf"],["errorTitle",""],["nzType","inner",2,"margin-top","16px",3,"nzTitle","nzExtra"],["nz-typography","","nzType","danger"]],template:function(n,e){1&n&&(T.Xb(0,"div"),T.Sb(1,"app-header",0),T.jc(2,"translate"),T.Xb(3,"nz-spin",1),T.Xb(4,"div",2),T.Xb(5,"div",3),T.Xb(6,"div",4),T.Xb(7,"sub-tenant-select",5),T.ec("onSubTenantSelected",function(n){return e.onSubTenantChange(n)}),T.Wb(),T.Wb(),T.Wb(),T.Xb(8,"h3"),T.Xc(9,"You can upload bulk list of physicians to the system and can assign them easily."),T.Wb(),T.Sb(10,"br"),T.Xb(11,"div",6),T.Xb(12,"ul"),T.Xb(13,"li"),T.Xc(14),T.jc(15,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Xb(16,"nz-upload",7),T.Vc(17,is,8,1,"h5",8),T.Xb(18,"button",9),T.Xc(19,"BROWSE / DRAG"),T.Wb(),T.Xb(20,"p"),T.Xc(21),T.jc(22,"translate"),T.Wb(),T.Wb(),T.Wb(),T.Vc(23,rs,6,4,"div",10),T.Wb(),T.Wb()),2&n&&(T.Db(1),T.sc("defaultTitle",T.kc(2,14,"BULK_ADD.BULK_ADD_PATIENTS")),T.rc("isSearchEnabled",!1)("isActionEnabled",!1),T.Db(2),T.rc("nzSpinning",e.loading)("nzTip",e.loadingText),T.Db(11),T.Yc(T.kc(15,16,"BULK_ADD.GUIDELINE.PROPER_DATA_FORMAT")),T.Db(2),T.rc("nzCustomRequest",e.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1)("nzDisabled",e.uploadedFileName),T.Db(1),T.rc("ngIf",e.uploadedFileName),T.Db(1),T.rc("disabled",e.uploadedFileName),T.Db(3),T.Yc(T.kc(22,18,"COMMON.DRAG_AND_UPLOAD")),T.Db(2),T.rc("ngIf",!e.loading&&e.errors))},directives:[Jr.a,co.a,N.c,N.a,ns.a,es.a,f.q,Fn.a,Un.a,Vn.a,ts.a,mn.a,f.p,O.a],pipes:[zn.a,f.j],styles:[""]}),ss),us=function n(){a(this,n),this.accessBoundary=Xi.a.TENANT},fs=o("hj5u"),ds=o("4RGM");function bs(n,e){if(1&n&&(T.Xb(0,"p",17),T.Xc(1),T.Wb()),2&n){var t=T.ic();T.Db(1),T.Zc(" ",t.errors.get("name")," ")}}function ps(n,e){if(1&n&&(T.Xb(0,"p",17),T.Xc(1),T.Wb()),2&n){var t=T.ic();T.Db(1),T.Zc(" ",t.errors.get("DUPLICATE_ROLE_NAME")," ")}}function gs(n,e){if(1&n&&(T.Sb(0,"nz-option",19),T.jc(1,"roleName")),2&n){var t=T.ic().$implicit;T.rc("nzLabel",T.kc(1,2,t))("nzValue",t)}}function vs(n,e){if(1&n&&(T.Vb(0),T.Vc(1,gs,2,4,"nz-option",18),T.jc(2,"roleTypeEnabled"),T.Ub()),2&n){var t=e.$implicit,i=T.ic();T.Db(1),T.rc("ngIf",T.lc(2,1,t,i.tenantConfig))}}function ms(n,e){if(1&n&&(T.Vb(0),T.Xb(1,"p",17),T.Xc(2),T.Wb(),T.Ub()),2&n){var t=T.ic();T.Db(2),T.Zc(" ",t.errors.get("type")," ")}}function hs(n,e){if(1&n){var t=T.Yb();T.Vb(0),T.Xb(1,"div",26),T.Xb(2,"label",27),T.ec("ngModelChange",function(n){T.Lc(t);var i=e.$implicit;return T.ic(5).onChange(n,i)}),T.jc(3,"isChecked"),T.Xc(4),T.jc(5,"permissionName"),T.Wb(),T.Wb(),T.Ub()}if(2&n){var i=e.$implicit,a=T.ic(5);T.Db(2),T.rc("ngModel",T.lc(3,2,i,a.allRolePermissions)),T.Db(2),T.Zc(" ",T.kc(5,5,i)," ")}}function Ss(n,e){if(1&n&&(T.Xb(0,"div",25),T.Vc(1,hs,6,7,"ng-container",9),T.Wb()),2&n){var t=T.ic(2).$implicit;T.Db(1),T.rc("ngForOf",null==t?null:t.value)}}function zs(n,e){if(1&n&&(T.Xb(0,"div",22),T.Xb(1,"strong",23),T.Xc(2),T.jc(3,"permissionName"),T.Wb(),T.Vb(4),T.Vc(5,Ss,2,1,"div",24),T.Ub(),T.Wb()),2&n){var t=T.ic(),i=t.index,a=t.$implicit;T.rc("nzSm",i%2==0?11:13)("nzMd",(i+1)%3==0?8:(i+1)%3==0?5:8),T.Db(2),T.Yc(T.lc(3,4,null==a?null:a.key,"GROUP")),T.Db(3),T.rc("ngIf",!(null==a||null==a.value||!a.value.length))}}function ys(n,e){if(1&n&&(T.Vb(0),T.Vc(1,zs,6,7,"div",21),T.Ub()),2&n){var t=e.$implicit;T.Db(1),T.rc("ngIf",!(null==t||null==t.value||!t.value.length))}}function Xs(n,e){if(1&n&&(T.Xb(0,"div",20),T.Vc(1,ys,2,1,"ng-container",9),T.jc(2,"keyvalue"),T.Wb()),2&n){var t=T.ic();T.Db(1),T.rc("ngForOf",T.kc(2,1,t.permissionGroups))}}var Is,Ts=((Is=function(n){r(i,n);var t=c(i);function i(n,o,l,r,s,c){var u,f;return a(this,i),(u=t.call(this))._rolesService=n,u._router=o,u._activatedRoute=l,u._dataSharingService=r,u._permissionsService=s,u._notificationService=c,u.role=new us,u.permissionsLoading=!0,u.accessBoundaryLoading=!0,u.oldPermissions=new Array,u.addedPermissions=new Array,u.removedPermissions=new Array,u.allRolePermissions=new Array,u.accessBoundaries=new Array,u.errors=new Map,u.availableRoleTypes=new Array,u.onChange=function(n,e){return n?u.onPermissionAddition(e):u.onPermissionRemoval(e)},u.onPermissionAddition=function(n){u.allRolePermissions.push(n),u.allRolePermissions=e(u.allRolePermissions),-1==u.oldPermissions.indexOf(n)&&u.addedPermissions.push(n),u.removedPermissions.indexOf(n)>-1&&(u.removedPermissions=u.removedPermissions.filter(function(e){return e!=n}))},u.onPermissionRemoval=function(n){u.allRolePermissions=e(u.allRolePermissions.filter(function(e){return e!=n})),u.oldPermissions.indexOf(n)>-1&&u.removedPermissions.push(n),u.addedPermissions=u.addedPermissions.filter(function(e){return e!=n})},u.mode=u._activatedRoute.snapshot.paramMap.get("mode")||"add",u.roleId=u._activatedRoute.snapshot.paramMap.get("roleId"),null===(f=u._dataSharingService.tenantSettings)||void 0===f||f.pipe(Object(ue.a)(u.unsubscribed)).subscribe(function(n){n&&(u.tenantConfig=n,null!=n.securityConfigs&&null!=n.securityConfigs.customRolesConfig&&n.securityConfigs.customRolesConfig.availableBoundaries.length>0&&(u.availableRoleTypes=e(n.securityConfigs.customRolesConfig.availableRoleTypes)))}),u}return l(i,[{key:"ngOnInit",value:function(){var n=this;this.getPermissions(),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(fe.a)(function(n){return!!n}),Object(ue.a)(this.unsubscribed)).subscribe(function(){return n.submit()}),this.roleId&&this._rolesService.getCustomRoleById(this.roleId).subscribe(function(e){n.existingRole(e)}),this.role.tenantId=localStorage.getItem(ds.a.REQUEST_TENANT_IDS)}},{key:"existingRole",value:function(n){this.role=n,this.allRolePermissions=n.privileges}},{key:"fetchAccessBoundaries",value:function(){var n=this;this.accessBoundaryLoading=!0,this._rolesService.getAccessBoundaries().subscribe(function(e){n.accessBoundaries=e,n.accessBoundaryLoading=!1})}},{key:"getPermissions",value:function(){var n=this;this._permissionsService.fetchGroupedPermissions(null).subscribe(function(e){n.permissionGroups=e,n.permissionsLoading=!1})}},{key:"onSubTenantChange",value:function(n){this.role.tenantId=n,console.log("Role : ",this.role)}},{key:"submit",value:function(){var n=this;this.errors=new Map,this.role.privileges=this.allRolePermissions,this.role.accessBoundary=Xi.a.TENANT,this.role.privileges.length<=0?this._notificationService.warning("Roles","To save this role, you need to add at least one permission."):"add"==this.mode?(this.role.id=null,this._rolesService.createCustomRole(this.role).subscribe(function(e){n._notificationService.success("Role","Role saved successfully."),n._router.navigate(["staff/custom-roles/list/roles"])},function(e){"VALIDATION_PROBLEM"==e.error.type?e.error.invalidParams.forEach(function(e){n.errors.set(e.name,e.reason)}):n.errors.set(e.error.type,e.error.title)})):this._rolesService.updateCustomRole(this.roleId,this.role).subscribe(function(e){n._notificationService.success("Role","Role updated successfully."),n._router.navigate(["staff/custom-roles/list/roles"])},function(e){"VALIDATION_PROBLEM"==e.error.type?e.error.invalidParams.forEach(function(e){n.errors.set(e.name,e.reason)}):n.errors.set(e.error.type,e.error.title)})}}]),i}(X.a)).\u0275fac=function(n){return new(n||Is)(T.Rb(fs.a),T.Rb(D.g),T.Rb(D.a),T.Rb(h.a),T.Rb(Ri.a),T.Rb(xn.b))},Is.\u0275cmp=T.Lb({type:Is,selectors:[["app-roles-form"]],inputs:{role:"role"},features:[T.Ab],decls:35,vars:10,consts:[[1,"container","role-container"],[1,"divider"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","8"],[2,"color","red"],["mode","SINGLE",3,"persist","selectedSubTenant","onSubTenantSelected"],["nz-input","","placeholder","Role Name",3,"ngModel","ngModelChange"],["style","margin-top: 3px; text-align: right; margin-right: 5px; color: red;","nz-typography","","nzType","secondary",4,"ngIf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a user type",3,"ngModel","nzDisabled","ngModelChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-row","","nzGutter","64",2,"margin-top","20px"],["nz-typography","","nzType","primary"],["nz-col","","nzSpan","24"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","24",1,"permission-container"],["nz-row","","nzGutter","8",4,"ngIf"],["nz-typography","","nzType","secondary",2,"margin-top","3px","text-align","right","margin-right","5px","color","red"],[3,"nzLabel","nzValue",4,"ngIf"],[3,"nzLabel","nzValue"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","24",3,"nzSm","nzMd",4,"ngIf"],["nz-col","","nzXs","24",3,"nzSm","nzMd"],[1,"heading"],["nz-row","",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","24",1,"each-permission-row"],["nz-checkbox","",3,"ngModel","ngModelChange"]],template:function(n,e){1&n&&(T.Xb(0,"div",0),T.Sb(1,"div",1),T.Xb(2,"div",2),T.Xb(3,"div",3),T.Xb(4,"label"),T.Xc(5," Role Name "),T.Xb(6,"sup",4),T.Xc(7,"*"),T.Wb(),T.Wb(),T.Wb(),T.Xb(8,"div",3),T.Xb(9,"label"),T.Xc(10," User Type "),T.Xb(11,"sup",4),T.Xc(12,"*"),T.Wb(),T.Wb(),T.Wb(),T.Xb(13,"div",3),T.Xb(14,"sub-tenant-select",5),T.ec("onSubTenantSelected",function(n){return e.onSubTenantChange(n)}),T.Wb(),T.Wb(),T.Wb(),T.Xb(15,"div",2),T.Xb(16,"div",3),T.Xb(17,"input",6),T.ec("ngModelChange",function(n){return e.role.name=n}),T.Wb(),T.Vb(18),T.Vc(19,bs,2,1,"p",7),T.Vc(20,ps,2,1,"p",7),T.Ub(),T.Wb(),T.Xb(21,"div",3),T.Xb(22,"nz-select",8),T.ec("ngModelChange",function(n){return e.role.type=n}),T.Vc(23,vs,3,4,"ng-container",9),T.Wb(),T.Vc(24,ms,3,1,"ng-container",10),T.Wb(),T.Sb(25,"div",3),T.Wb(),T.Xb(26,"div",11),T.Xb(27,"div",3),T.Xb(28,"h3",12),T.Xc(29," Permissions "),T.Wb(),T.Wb(),T.Wb(),T.Xb(30,"div",2),T.Xb(31,"div",13),T.Xb(32,"div",14),T.Xb(33,"div",15),T.Vc(34,Xs,3,3,"div",16),T.Wb(),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&n&&(T.Db(14),T.rc("persist",!1)("selectedSubTenant",e.role.tenantId),T.Db(3),T.rc("ngModel",e.role.name),T.Db(2),T.rc("ngIf",e.errors.has("name")),T.Db(1),T.rc("ngIf",e.errors.has("DUPLICATE_ROLE_NAME")),T.Db(2),T.rc("ngModel",e.role.type)("nzDisabled","edit"==e.mode),T.Db(1),T.rc("ngForOf",e.availableRoleTypes),T.Db(1),T.rc("ngIf",e.errors.has("type")),T.Db(10),T.rc("ngIf",!e.permissionsLoading))},directives:[N.c,N.a,ns.a,Ln.b,g.d,g.u,g.x,f.q,Pt.d,f.p,O.a,Pt.a,Gn.a],pipes:[Ct,aa,f.j,Ei,oa],styles:[".permission-container[_ngcontent-%COMP%]{background:#e5e5e5 0 0 no-repeat padding-box;border-radius:10px;padding:10px 25px 30px!important;min-height:200px;opacity:.8;margin:0 10px 10px}.role-container[_ngcontent-%COMP%]{margin:20px}.heading[_ngcontent-%COMP%]{display:block;margin:15px 10px}label[_ngcontent-%COMP%]{flex-direction:row!important}[_nghost-%COMP%]     .preview>.ant-checkbox-checked>.ant-checkbox-inner{background:#e5e5e5!important}[_nghost-%COMP%]     .ant-checkbox-inner{margin-right:2px}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-col-6{margin-top:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none}.each-permission-row[_ngcontent-%COMP%]{margin:5px;display:flex}[_nghost-%COMP%]     .ant-tag{font-size:9px;height:20px;width:23px;padding-left:5px}button[_ngcontent-%COMP%]{display:flex}.df-tag[_ngcontent-%COMP%]{margin-left:6px}.permission-actions[_ngcontent-%COMP%]{margin:auto}"]}),Is);function Ds(n,e){1&n&&(T.Xb(0,"th"),T.Xc(1," Sub Tenant "),T.Wb())}function Ws(n,e){if(1&n&&(T.Xb(0,"td"),T.Xc(1),T.jc(2,"tenantName"),T.Wb()),2&n){var t=T.ic().$implicit;T.Db(1),T.Zc(" ",T.kc(2,1,null==t?null:t.tenantId)," ")}}function Ps(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-icons",9),T.ec("click",function(){T.Lc(t);var n=T.ic().$implicit;return T.ic().edit(null==n?null:n.id)}),T.Wb()}}function Cs(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-icons",10),T.ec("click",function(){T.Lc(t);var n=T.ic().$implicit;return T.ic().clone(null==n?null:n.id)}),T.Wb()}}function As(n,e){if(1&n){var t=T.Yb();T.Xb(0,"app-icons",11),T.ec("click",function(){T.Lc(t);var n=T.ic().$implicit;return T.ic().delete(null==n?null:n.id)}),T.Wb()}}var _s=function(){return["EDIT_ROLE"]},Os=function(){return["ADD_ROLE"]},Ms=function(){return["DELETE_ROLE"]};function Ns(n,e){if(1&n&&(T.Xb(0,"tr"),T.Xb(1,"td"),T.Xb(2,"p",5),T.Xc(3),T.Wb(),T.Wb(),T.Xb(4,"td"),T.Xb(5,"p",5),T.jc(6,"roleName"),T.Xc(7),T.jc(8,"roleName"),T.Wb(),T.Wb(),T.Vc(9,Ws,3,3,"td",3),T.Xb(10,"td"),T.Xb(11,"p",5),T.Xc(12),T.Wb(),T.Wb(),T.Xb(13,"td"),T.Xb(14,"p"),T.Xc(15),T.Wb(),T.Wb(),T.Xb(16,"td"),T.Vc(17,Ps,1,0,"app-icons",6),T.Xc(18," \xa0\xa0 "),T.Vc(19,Cs,1,0,"app-icons",7),T.Xc(20," \xa0\xa0 "),T.Vc(21,As,1,0,"app-icons",8),T.Wb(),T.Wb()),2&n){var t=e.$implicit;T.Db(2),T.rc("nzTooltipTitle",null==t?null:t.name),T.Db(1),T.Zc(" ",null==t?null:t.name," "),T.Db(2),T.rc("nzTooltipTitle",T.kc(6,10,null==t?null:t.type)),T.Db(2),T.Zc(" ",T.kc(8,12,null==t?null:t.type)," "),T.Db(4),T.rc("nzTooltipTitle",null==t||null==t.privileges?null:t.privileges.length),T.Db(1),T.Zc(" ",null==t||null==t.privileges?null:t.privileges.length," Permissions "),T.Db(3),T.Zc(" ",null==t?null:t.staffCount," "),T.Db(2),T.rc("isFeaturePermitted",T.xc(14,_s)),T.Db(2),T.rc("isFeaturePermitted",T.xc(15,Os)),T.Db(2),T.rc("isFeaturePermitted",T.xc(16,Ms))}}var Rs,Es,ks,ws=[{path:"",component:ri,pathMatch:"full",data:sr.Listing,canActivate:[so.a,ro.a]},{path:"view/:id",component:Ul,data:sr.Detail,canActivate:[so.a,ro.a]},{path:"add",component:lo,data:sr.Form,canActivate:[so.a,ro.a]},{path:"physician/bulk-upload",component:cs,data:sr.BulkUpload,canActivate:[so.a,ro.a]},{path:":mode/:id",component:lo,data:sr.Form,canActivate:[so.a,ro.a]},{path:"assign/physicians/:id",component:se,data:sr.PhysicianAssigner,canActivate:[so.a,ro.a]},{path:"assign/monitoring-staff/:id",component:lr,data:sr.MonitoringStaffAssigner,canActivate:[so.a,ro.a]},{path:"view/:id/dashboard-widgets",component:Rn,data:sr.StaffDashboardWidgets,canActivate:[so.a,ro.a]},{path:"sessions/audit/:id",component:dn,data:sr.Audit,canActivate:[so.a,ro.a]},{path:"work-list",component:$r,data:sr.WorkList,canActivate:[so.a,ro.a]},{path:"custom-roles/:mode/role",component:Ts,data:sr.RoleForm,canActivate:[so.a,ro.a]},{path:"custom-roles/list/roles",component:(Rs=function(n){r(t,n);var e=c(t);function t(n,i,o,l){var r;return a(this,t),(r=e.call(this))._router=n,r._rolesService=i,r._notificationService=o,r._dataSharingService=l,r.loading=!0,r._routeHelperService.isPrimaryActionTriggered().pipe(Object(fe.a)(function(n){return!!n}),Object(ue.a)(r.unsubscribed)).subscribe(function(){n.navigate(["staff/custom-roles/add/role/"])}),r}return l(t,[{key:"ngOnInit",value:function(){var n=this,e=localStorage.getItem("loggedInUserAssignedTenants").split(",");this.selectedSubTenant=e[0],localStorage.setItem(ds.a.REQUEST_TENANT_IDS,this.selectedSubTenant),this.getRoles(1),this._dataSharingService.onSubTenantChange().pipe(Object(ue.a)(this.unsubscribed)).subscribe(function(e){n.onSubTenantChange(e)})}},{key:"onSubTenantChange",value:function(n){"object"!=typeof n||""==n||null==n||null==n||(this.requestTenantIds=n),this.getRoles(1)}},{key:"getRoles",value:function(n){var e=this;this.loading=!0,this._rolesService.getCustomRoles(n-1).subscribe(function(n){e.rolesResponse=n,e.roleList=e.rolesResponse.result,e.loading=!1})}},{key:"edit",value:function(n){this._router.navigate(["staff/custom-roles/edit/role/",n])}},{key:"clone",value:function(n){this._router.navigate(["staff/custom-roles/add/role/",n])}},{key:"delete",value:function(n){var e=this;this._rolesService.deleteCustomRoleById(n).subscribe(function(n){e._notificationService.success("Roles","Role deleted successfully."),e.getRoles(1)},function(n){console.log("Error : ",n.error),"ROLE_CANNOT_BE_DELETED"==n.error.type&&e._notificationService.warning("Roles","This role has been assigned to  "+n.error.parameters.users_already_using_role+" staff members. Please reassign them to different roles and then delete this role.")})}}]),t}(X.a),Rs.\u0275fac=function(n){return new(n||Rs)(T.Rb(D.g),T.Rb(fs.a),T.Rb(xn.b),T.Rb(h.a))},Rs.\u0275cmp=T.Lb({type:Rs,selectors:[["app-list-roles"]],features:[T.Ab],decls:18,vars:10,consts:[[1,"container"],[3,"nzData","nzShowPagination","nzFrontPagination","nzTotal","nzPageSize","nzLoading","nzPageIndexChange"],["staffTable",""],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],["nz-typography","","nz-tooltip","","nzEllipsis","",3,"nzTooltipTitle"],["name","edit","size","20px","nz-tooltip","","nzTooltipTitle","Edit Role",3,"click",4,"isFeaturePermitted"],["name","clone","size","20px","nz-tooltip","","nzTooltipTitle","Clone Role",3,"click",4,"isFeaturePermitted"],["nz-tooltip","","nzTooltipTitle","Delete Role","name","delete","size","20px",3,"click",4,"isFeaturePermitted"],["name","edit","size","20px","nz-tooltip","","nzTooltipTitle","Edit Role",3,"click"],["name","clone","size","20px","nz-tooltip","","nzTooltipTitle","Clone Role",3,"click"],["nz-tooltip","","nzTooltipTitle","Delete Role","name","delete","size","20px",3,"click"]],template:function(n,e){if(1&n&&(T.Xb(0,"div",0),T.Xb(1,"nz-table",1,2),T.ec("nzPageIndexChange",function(n){return e.getRoles(n)}),T.Xb(3,"thead"),T.Xb(4,"tr"),T.Xb(5,"th"),T.Xc(6),T.jc(7,"translate"),T.Wb(),T.Xb(8,"th"),T.Xc(9," Type "),T.Wb(),T.Vc(10,Ds,2,0,"th",3),T.Xb(11,"th"),T.Xc(12,"Permissions"),T.Wb(),T.Xb(13,"th"),T.Xc(14,"Staffs Assigned"),T.Wb(),T.Sb(15,"th"),T.Wb(),T.Wb(),T.Xb(16,"tbody"),T.Vc(17,Ns,22,17,"tr",4),T.Wb(),T.Wb(),T.Wb()),2&n){var t=T.Ic(2);T.Db(1),T.rc("nzData",e.roleList)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",null==e.rolesResponse?null:e.rolesResponse.totalCount)("nzPageSize",10)("nzLoading",e.loading),T.Db(5),T.Yc(T.kc(7,8,"COMMON.NAME")),T.Db(11),T.rc("ngForOf",t.data)}},directives:[_.f,_.n,_.o,_.e,_.l,Ne.a,_.i,f.p,O.a,hn.d,Ee.a,Sn.a],pipes:[zn.a,aa,xe.a],styles:[".title[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-table-thead>tr>th, td[_ngcontent-%COMP%]{text-align:center!important}[_nghost-%COMP%]     .ant-table-thead>tr>th{height:50px!important}[_nghost-%COMP%]     tr.ant-table-placeholder{display:none}"]}),Rs),data:sr.ListRoles,canActivate:[so.a,ro.a]},{path:"custom-roles/:mode/role/:roleId",component:Ts,data:sr.EditRoleForm,canActivate:[so.a,ro.a]}],xs=((Es=function n(){a(this,n)}).\u0275mod=T.Pb({type:Es}),Es.\u0275inj=T.Ob({factory:function(n){return new(n||Es)},imports:[[D.k.forChild(ws)],D.k]}),Es),Vs=o("bKRa"),Ls=((ks=function n(e){a(this,n),this.translationService=e,e.setLanguage()}).\u0275mod=T.Pb({type:ks}),ks.\u0275inj=T.Ob({factory:function(n){return new(n||ks)(T.bc(d.a))},imports:[[f.c,b.a,p.a,g.B,g.o,v.a.forRoot(),xs,u.a,s.a,Vs.a]]}),ks)},zmLq:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,e){(0,a.default)(2,arguments);var t=(0,i.default)(n),o=(0,i.default)(e),l=t.getTime()-o.getTime();return l<0?-1:l>0?1:l};var i=o(t("2Oix")),a=o(t("YGjY"));function o(n){return n&&n.__esModule?n:{default:n}}n.exports=e.default}}])}();