(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Osby:function(n,t,e){"use strict";e.d(t,"a",function(){return i}),e.d(t,"e",function(){return o}),e.d(t,"c",function(){return l}),e.d(t,"d",function(){return s}),e.d(t,"k",function(){return b}),e.d(t,"f",function(){return u}),e.d(t,"h",function(){return p}),e.d(t,"g",function(){return g}),e.d(t,"j",function(){return h}),e.d(t,"b",function(){return S}),e.d(t,"i",function(){return v});class i{constructor(){this.form=new l,this.scoreProperties=new h}}var o=function(n){return n.ASSESSMENT="ASSESSMENT",n.QUESTIONNAIRE="QUESTIONNAIRE",n.AGREEMENT="AGREEMENT",n.SCORED_ASSESSMENT="SCORED_ASSESSMENT",n.SMS_ASSESSMENT="SMS_ASSESSMENT",n}({}),r=function(n){return n.SECTION="SECTION",n.FOOTER="FOOTER",n}({}),c=function(n){return n.RADIO="RADIO",n.CHECKBOX="CHECKBOX",n.INPUT="INPUT",n.SIGNATURE="SIGNATURE",n.DATE="DATE",n.TIME="TIME",n.UPLOAD="UPLOAD",n.PRE_FILLED="PRE_FILLED",n.ARITHMETIC="ARITHMETIC",n.INPUT_AREA="INPUT_AREA",n}({}),a=function(n){return n.NONE="NONE",n.PHQ_9="PHQ-9",n.GAD_7="GAD-7",n.IHRS="IHRS",n.MARS="MARS",n.COVID="COVID",n}({});class l{constructor(){this.language="en",this.type=o.ASSESSMENT,this.bannerImage="",this.tags=[],this.elements=[],this.showResultTo=[],this.formCategory=6,this.formStandard=a.NONE,this.isTitleValid=!0,this.isDescValid=!0,this.isTagsValid=!0}}class s{constructor(){this.description="",this.type=r.SECTION,this.helpText="",this.imageUrl="",this.displaySequence=1,this.elements=[new b],this.valid=!0}}class b{constructor(){this.required=!1,this.options=[new g],this.type=c.RADIO,this.helpText="",this.imageUrl="",this.displaySequence=1,this.answer=[],this.resultConditions=[new v],this.valid=!0}}var d=function(n){return n.FIRSTNAME="FIRSTNAME",n.LASTNAME="LASTNAME",n.DATE_OF_BIRTH="DATE_OF_BIRTH",n.MOBILE="MOBILE",n.GENDER="GENDER",n.WEIGHT="WEIGHT",n.HEIGHT="HEIGHT",n}({}),u=function(n){return n.RADIO="RADIO",n.CHECKBOX="CHECKBOX",n.INPUT="INPUT",n.DATE="DATE",n.RADIO_TEXT="RADIO_TEXT",n.COMBO_TEXT="COMBO_TEXT",n}({});class p{constructor(){this.dataType=f.STRING,this.min="1",this.max="500",this.errorMessage=""}}var f=function(n){return n.STRING="STRING",n.NUMBER="NUMBER",n.DATE="DATE",n}({});class g{constructor(){this.type=u.RADIO,this.validation=new p,this.prefilledFieldType=d.DATE_OF_BIRTH,this.arithmeticFieldType=new m,this.imageUrl="",this.helpText="",this.displaySequence=1,this.redirectToSection=1}}class m{constructor(){this.unit=O.NONE}}class h{constructor(){this.title="",this.type="",this.criterias=[]}}class S{constructor(){this.notify=["CARETAKER"],this.isStartRangeValid=!0,this.isEndRangeValid=!0,this.isIdentificationValid=!0,this.isDescriptionValid=!0}}var O=function(n){return n.KILOGRAM="KILOGRAM",n.POUND="POUND",n.INCH="INCH",n.CENTIMETER="CENTIMETER",n.FEET="FEET",n.NONE="NONE",n}({});class v{constructor(){this.operation=M.BETWEEN}}var M=function(n){return n.LESS_THAN="LESS_THAN",n.LESS_THAN_EQUAL_TO="LESS_THAN_EQUAL_TO",n.BETWEEN="BETWEEN",n.GREATER_THAN="GREATER_THAN",n.GREATER_THAN_EQUAL_TO="GREATER_THAN_EQUAL_TO",n.EQUAL_TO="EQUAL_TO",n.NOT_EQUAL_TO="NOT_EQUAL_TO",n}({})},TGKT:function(n,t,e){"use strict";e.r(t),e.d(t,"FormNewModule",function(){return wi});var i=e("ofXK"),o=e("KZX/"),r=e("UFn0"),c=e("3Pt+"),a=e("tyNb"),l=e("qQcL"),s=e("Osby"),b=e("fXoL");let d=(()=>{class n{set(n){this.form=n}get(n=!1){return n&&(this.form=new s.c,this.form.elements.push(new s.d)),this.form}setScoreRanges(n){this.scoreRanges=n}getScoreRanges(n=!1){return this.scoreRanges&&!n||(this.scoreRanges=new s.j),this.scoreRanges}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=b.Nb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=e("bNXi");let p=(()=>{class n{constructor(n,t){this._formSharingService=n,this._notificationsService=t}state(n,t="#e8e8e8"){return{valid:n,color:t}}validateHeader(n){const t=this._formSharingService.get();switch(n){case"TITLE":return t.title&&t.title.trim()?this.state(!0,"#2f4f4f"):this.state(!1);case"DESC":return t.description&&t.description.trim()?this.state(!0):this.state(!1);case"TAGS":return this.state(!(!t.tags||!t.tags.length))}}validateScoreRange(n,t){const e=[];!isNaN(n.startRange)&&!isNaN(n.endRange)&&n.startRange>=n.endRange&&e.push("Minimum value cannot be greater than or equal to Maximum value!"),isNaN(n.startRange)||(n.isStartRangeValid=!1),isNaN(n.endRange)||(n.isEndRangeValid=!1),n.identification&&(n.isIdentificationValid=!1),n.description&&(n.isDescriptionValid=!1);let i=!1,o=!1,r=!1;return this._formSharingService.getScoreRanges().criterias.forEach((e,c)=>{t!==c&&(n.startRange===e.startRange&&(i=!0),n.endRange===e.endRange&&(o=!0),n.identification&&n.identification===e.identification&&(r=!0))}),i&&e.push("More than one score range cannot have the same start range!"),o&&e.push("More than one score range cannot have the same end range!"),r&&e.push("More than one score range cannot have the same risk category!"),e}validateSection(n){return n.title&&n.title.trim()?this.state(!0,"#2f4f4f"):this.state(!1)}validateQuestion(n){return n.title&&n.title.trim()?this.state(!0,"#2f4f4f"):this.state(!1)}isFormValid(){const n=this._formSharingService.get(),t=new Set;return this.validateHeader("TITLE").valid||(n.isTitleValid=!1,t.add("Form title cannot be blank!")),this.validateHeader("DESC").valid||(n.isDescValid=!1,t.add("Form description cannot be blank!")),this.validateHeader("TAGS").valid||(n.isTagsValid=!1,t.add("At least one tag is needed!")),n.scored&&this._formSharingService.getScoreRanges().criterias.forEach((n,t)=>{n.startRange||(n.isStartRangeValid=!1),n.endRange||(n.isEndRangeValid=!1),n.identification||(n.isIdentificationValid=!1),n.description||(n.isDescriptionValid=!1)}),n.elements.forEach(n=>{this.validateSection(n).valid||(t.add("Section title cannot be blank!"),n.valid=!1),n.elements.forEach(n=>{this.validateQuestion(n).valid||(n.valid=!1,t.add("Question title cannot be blank!"))})}),n.scored&&!this._formSharingService.getScoreRanges().criterias.length&&(t.add("At least one score range is required for a scored assessment form!"),this._notificationsService.error("Validation","At least one score range is required for a scored assessment form!")),!t.size}}return n.\u0275fac=function(t){return new(t||n)(b.bc(d),b.bc(u.b))},n.\u0275prov=b.Nb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class f{}var g=e("pe0G"),m=e("WoUL"),h=e("q+jA"),S=e("dEAy"),O=e("S5rh"),v=e("OzZK"),M=e("C2AL"),X=e("mfqL"),C=e("B+r4"),E=e("JA5x"),z=e("PTRe");let _=(()=>{class n{constructor(n,t,e,i){this._renderer=n,this._element=t,this.translationService=e,this._formValidationService=i,this.count=0}ngOnInit(){this.translationService.getMultiple("COMMON.REQUIRED").subscribe(n=>this.translatedStrings=n)}ngDoCheck(){if(this.isDirty())switch(this.formValidate){case"header":this.validate(this._formValidationService.validateHeader(this.entityType));break;case"section":this.validate(this._formValidationService.validateSection(this.entity));break;case"question":this.validate(this._formValidationService.validateQuestion(this.entity))}}isDirty(){const n=this._element.nativeElement.getAttribute("class");return!(!n.includes("ng-touched")&&!n.includes("ng-dirty"))}validate(n){n.valid?this.markAsValid(n.color):this.markAsInvalid()}markAsInvalid(){this._renderer.setStyle(this._element.nativeElement,"border","1px solid #ff2e2e");const n=this._renderer.parentNode(this._element.nativeElement),t=this._renderer.createText("*"+this.translatedStrings.get("COMMON.REQUIRED"));this._renderer.setStyle(n,"color","#ff2e2e"),0==this.count&&(this._renderer.appendChild(n,t),this.count++)}markAsValid(n="#e8e8e8"){const t=this._renderer.parentNode(this._element.nativeElement);this._renderer.setStyle(t,"color","#ffffff"),this._renderer.setStyle(this._element.nativeElement,"border",`1px solid ${n}`)}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(b.F),b.Rb(b.l),b.Rb(m.a),b.Rb(p))},n.\u0275dir=b.Mb({type:n,selectors:[["","formValidate",""]],inputs:{formValidate:"formValidate",entityType:"entityType",entity:"entity",class:"class"}}),n})();var D=e("zAKX"),T=e("dRHE");function x(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",13),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}function R(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",13),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}function y(n,t){if(1&n&&(b.Vb(0),b.Sb(1,"nz-option",14),b.Ub()),2&n){const n=t.$implicit;b.Db(1),b.rc("nzLabel",n)("nzValue",n)}}function W(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",13),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}const P=function(n){return{border:n}};let I=(()=>{class n{constructor(n){this._tagsService=n,this.tags=[]}ngOnInit(){this.getTags()}getTags(){this._tagsService.getALLTags("FORM").subscribe(n=>{this.tags=n.map(n=>n.name)})}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(X.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-header-section"]],inputs:{form:"form"},decls:41,vars:34,consts:[["nz-row",""],["nz-col","","nzXs","8","nzSm","6","nzMd","4","id","header"],["nz-row","","nzGutter","32",1,"label-row"],["nz-col","","nzXs","24","nzSm","12","nzMd","16"],[1,"required"],["nz-col","","nzXs","24","nzSm","12","nzMd","8"],["nz-row","","nzGutter","32"],["nz-input","","type","text",3,"placeholder","ngModel","ngStyle","ngModelChange"],[4,"ngIf"],[1,"label-row"],["formValidate","header","entityType","DESC","rows","4","nz-input","",3,"ngModel","ngStyle","ngModelChange"],["formValidate","header","entityType","TAGS","nzMode","tags",3,"ngStyle","nzPlaceHolder","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"required-text"],[3,"nzLabel","nzValue"]],template:function(n,t){1&n&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"h3"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(5,"nz-card"),b.Xb(6,"div",2),b.Xb(7,"div",3),b.Xb(8,"label"),b.Xc(9),b.jc(10,"translate"),b.Xb(11,"span",4),b.Xc(12,"*"),b.Wb(),b.Wb(),b.Wb(),b.Xb(13,"div",5),b.Xb(14,"label"),b.Xc(15),b.jc(16,"translate"),b.Xb(17,"span",4),b.Xc(18,"*"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(19,"div",6),b.Xb(20,"div",3),b.Xb(21,"input",7),b.ec("ngModelChange",function(n){return t.form.title=n}),b.jc(22,"translate"),b.Wb(),b.Vc(23,x,4,3,"div",8),b.Sb(24,"br"),b.Sb(25,"br"),b.Xb(26,"div",9),b.Xb(27,"label"),b.Xc(28),b.jc(29,"translate"),b.Xb(30,"span",4),b.Xc(31,"*"),b.Wb(),b.Wb(),b.Wb(),b.Xb(32,"textarea",10),b.ec("ngModelChange",function(n){return t.form.description=n}),b.Xc(33,"\t\t\t"),b.Wb(),b.Vc(34,R,4,3,"div",8),b.Wb(),b.Xb(35,"div",5),b.Xb(36,"nz-select",11),b.ec("ngModelChange",function(n){return t.form.tags=n}),b.jc(37,"translate"),b.Vc(38,y,2,2,"ng-container",12),b.Wb(),b.Vc(39,W,4,3,"div",8),b.Wb(),b.Wb(),b.Wb(),b.Sb(40,"br")),2&n&&(b.Db(3),b.Yc(b.kc(4,16,"FORMS.HEADER")),b.Db(6),b.Zc(" ",b.kc(10,18,"FORMS.FORM_NAME")," "),b.Db(6),b.Zc(" ",b.kc(16,20,"FORMS.ADD_TAGS")," "),b.Db(6),b.tc("placeholder"," ",b.kc(22,22,"FORMS.ENTER_FORM_TITLE")," "),b.rc("ngModel",t.form.title)("ngStyle",b.yc(28,P,null!=t.form&&t.form.isTitleValid||null!=t.form&&t.form.title?"":"1px solid red")),b.Db(2),b.rc("ngIf",!(null!=t.form&&t.form.isTitleValid||null!=t.form&&t.form.title)),b.Db(5),b.Zc(" ",b.kc(29,24,"FORMS.FORM_DESCRIPTION")," "),b.Db(4),b.rc("ngModel",t.form.description)("ngStyle",b.yc(30,P,null!=t.form&&t.form.isDescValid||null!=t.form&&t.form.description?"":"1px solid red")),b.Db(2),b.rc("ngIf",!(null!=t.form&&t.form.isDescValid||null!=t.form&&t.form.description)),b.Db(2),b.tc("nzPlaceHolder"," ",b.kc(37,26,"FORMS.SEARCH_TAGS")," "),b.rc("ngStyle",b.yc(32,P,null!=t.form&&t.form.isTagsValid||0!==(null==t.form?null:t.form.tags.length)?"":"1px solid red"))("ngModel",t.form.tags),b.Db(2),b.rc("ngForOf",t.tags),b.Db(1),b.rc("ngIf",!(null!=t.form&&t.form.isTagsValid)&&0===(null==t.form?null:t.form.tags.length)))},directives:[C.c,C.a,E.a,z.b,c.d,c.u,c.x,i.r,i.q,_,D.d,i.p,D.a],pipes:[T.a],styles:["#header[_ngcontent-%COMP%]{background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:15px;height:75px;text-align:center;padding-top:15px;top:35px}.required-text[_ngcontent-%COMP%]{color:#ff2e2e;float:left;position:absolute}h3[_ngcontent-%COMP%]{font:normal normal normal 12px/14px Nunito;letter-spacing:2.4px;color:var(--neutral-color)}nz-card[_ngcontent-%COMP%]{border-radius:20px;padding:2%}.label-row[_ngcontent-%COMP%]{margin-bottom:5px}label[_ngcontent-%COMP%]{color:var(--tertiary-color);font:normal normal normal 12px/14px Nunito}input[_ngcontent-%COMP%]{border-radius:0;border:none;border-bottom:1px solid #2f4f4f;padding:0;color:var(--light-black);font:normal normal 600 20px/25px Nunito}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{outline:none}nz-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-select-selection{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey);border-radius:5px;height:165px}[_nghost-%COMP%]     .ant-select-selection--multiple .ant-select-selection__choice{color:var(--light-black);background:var(--grey) 0 0 no-repeat padding-box;border-radius:3px;font:normal normal 600 12px/14px Nunito;padding-top:3px}textarea[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey);border-radius:5px;resize:none;font-size:12px}.required[_ngcontent-%COMP%]{color:#ff2e2e}"]}),n})();var k=e("bE2y"),w=e("EGpF"),N=e("TaO5"),A=e("glKu"),F=e("z4wI");function V(n,t){if(1&n&&(b.Xb(0,"div",1),b.Xb(1,"label",2),b.Xc(2),b.Wb(),b.Wb()),2&n){const n=t.$implicit;b.Db(2),b.Zc("* ",n,"")}}let L=(()=>{class n{constructor(n){this._formValidationService=n,this.errors=[]}ngDoCheck(){switch(this.type){case"score_range":this.errors=this._formValidationService.validateScoreRange(this.entity,this.index)}}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(p))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-errors"]],inputs:{type:"type",entity:"entity",index:"index"},decls:2,vars:1,consts:[["id","error-container",4,"ngFor","ngForOf"],["id","error-container"],[1,"error"]],template:function(n,t){1&n&&(b.Sb(0,"br"),b.Vc(1,V,3,1,"div",0)),2&n&&(b.Db(1),b.rc("ngForOf",t.errors))},directives:[i.p],styles:[".error[_ngcontent-%COMP%]{color:#ff2e2e;font-size:12px}#error-container[_ngcontent-%COMP%]{display:inline-block;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 30px 0 0}"]}),n})();function q(n,t){1&n&&(b.Vb(0),b.Sb(1,"br"),b.Sb(2,"br"),b.Ub())}function j(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",24),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}function U(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",24),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}function $(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",24),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}function H(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",24),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}const Y=function(n){return{border:n}};function B(n,t){if(1&n){const n=b.Yb();b.Vb(0),b.Vc(1,q,3,0,"ng-container",0),b.Xb(2,"b"),b.Xc(3),b.Wb(),b.Xb(4,"div",8),b.Xb(5,"div",9),b.Xc(6,"Min "),b.Xb(7,"span",10),b.Xc(8,"*"),b.Wb(),b.Wb(),b.Xb(9,"div",9),b.Xc(10,"Max "),b.Xb(11,"span",10),b.Xc(12,"*"),b.Wb(),b.Wb(),b.Xb(13,"div",11),b.Xc(14,"Risk Category "),b.Xb(15,"span",10),b.Xc(16,"*"),b.Wb(),b.Wb(),b.Xb(17,"div",12),b.Xc(18,"Notify"),b.Wb(),b.Xb(19,"div",13),b.Xc(20,"Suggested Action "),b.Xb(21,"span",10),b.Xc(22,"*"),b.Wb(),b.Wb(),b.Wb(),b.Xb(23,"div",14),b.Xb(24,"div",9),b.Xb(25,"nz-input-number",15),b.ec("ngModelChange",function(n){return t.$implicit.startRange=n}),b.Wb(),b.Vc(26,j,4,3,"div",0),b.Wb(),b.Xb(27,"div",9),b.Xb(28,"nz-input-number",15),b.ec("ngModelChange",function(n){return t.$implicit.endRange=n}),b.Wb(),b.Vc(29,U,4,3,"div",0),b.Wb(),b.Xb(30,"div",11),b.Xb(31,"input",16),b.ec("ngModelChange",function(n){return t.$implicit.identification=n}),b.Wb(),b.Vc(32,$,4,3,"div",0),b.Wb(),b.Xb(33,"div",17),b.Xb(34,"label",18),b.ec("ngModelChange",function(n){return t.$implicit.shouldSendAlert=n})("ngModelChange",function(){b.Lc(n);const e=t.$implicit;return b.ic(2).enableNotificationForRange(e)}),b.Wb(),b.Xb(35,"span",19),b.Xc(36,"If this is checked, the patient's monitoring staff will receive an alert when the patient's assessment score is between this range"),b.Wb(),b.Wb(),b.Xb(37,"div",20),b.Xb(38,"input",16),b.ec("ngModelChange",function(n){return t.$implicit.description=n}),b.Wb(),b.Vc(39,H,4,3,"div",0),b.Wb(),b.Xb(40,"div",21),b.Xb(41,"app-icons",22),b.ec("click",function(){b.Lc(n);const e=t.index;return b.ic(2).removeRange(e)}),b.Wb(),b.Wb(),b.Wb(),b.Sb(42,"app-errors",23),b.Ub()}if(2&n){const n=t.$implicit,e=t.index;b.Db(1),b.rc("ngIf",0<e),b.Db(2),b.Zc("Range ",e+1,""),b.Db(22),b.rc("ngModel",n.startRange)("nzMin",0)("nzStep",1)("ngStyle",b.yc(21,Y,null!=n&&n.isStartRangeValid||null!=n&&n.startRange?"":"1px solid red")),b.Db(1),b.rc("ngIf",!(null!=n&&n.isStartRangeValid||null!=n&&n.startRange)),b.Db(2),b.rc("ngModel",n.endRange)("nzMin",0)("nzStep",1)("ngStyle",b.yc(23,Y,null!=n&&n.isEndRangeValid||null!=n&&n.endRange?"":"1px solid red")),b.Db(1),b.rc("ngIf",!(null!=n&&n.isEndRangeValid||null!=n&&n.endRange)),b.Db(2),b.rc("ngModel",n.identification)("ngStyle",b.yc(25,Y,null!=n&&n.isIdentificationValid||null!=n&&n.identification?"":"1px solid red")),b.Db(1),b.rc("ngIf",!(null!=n&&n.isIdentificationValid||null!=n&&n.identification)),b.Db(2),b.rc("ngModel",n.shouldSendAlert),b.Db(4),b.rc("ngModel",n.description)("ngStyle",b.yc(27,Y,null!=n&&n.isDescriptionValid||null!=n&&n.description?"":"1px solid red")),b.Db(1),b.rc("ngIf",!(null!=n&&n.isDescriptionValid||null!=n&&n.description)),b.Db(3),b.rc("entity",n)("index",e)}}function Z(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"div",5),b.Xb(2,"div",6),b.Xb(3,"label"),b.Xc(4,"Define the score range parameters:"),b.Wb(),b.Wb(),b.Wb(),b.Sb(5,"br"),b.Vc(6,B,43,29,"ng-container",7),b.Sb(7,"br"),b.Ub()),2&n){const n=b.ic();b.Db(6),b.rc("ngForOf",null==n.scoreRanges?null:n.scoreRanges.criterias)}}let G=(()=>{class n{addNewRange(){this.scoreRanges.criterias.push(new s.b)}removeRange(n){this.scoreRanges.criterias.splice(n,1)}enableNotificationForRange(n){if(this.form.showResultTo){const t=Array.from(this.form.showResultTo);n.notify=t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-score-ranges"]],inputs:{form:"form",scoreRanges:"scoreRanges"},decls:7,vars:1,consts:[[4,"ngIf"],["nz-row","",1,"label-row","link"],["nz-col","","nzSpan","4",1,"clickable",3,"click"],["color","#a7c853","size","15px","name","plusCircle"],[1,"clickable"],["nz-row","",1,"label-row"],["nz-col","","nzSpan","24"],[4,"ngFor","ngForOf"],["nz-row","",1,"label-row","ranges"],["nz-col","","nzSpan","3"],[1,"required"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","2"],["nz-col","","nzSpan","10"],["nz-row","","nzGutter","16",1,"ranges"],[3,"ngModel","nzMin","nzStep","ngStyle","ngModelChange"],["nz-input","",3,"ngModel","ngStyle","ngModelChange"],["nz-col","","nzSpan","2",1,"tooltip"],["nz-checkbox","",3,"ngModel","ngModelChange"],[1,"tooltiptext"],["nz-col","","nzSpan","9"],["nz-col","","nzSpan","1"],["id","delete-range","name","delete",3,"click"],["type","score_range",3,"entity","index"],[1,"required-text"]],template:function(n,t){1&n&&(b.Vc(0,Z,8,1,"ng-container",0),b.Xb(1,"div",1),b.Xb(2,"div",2),b.ec("click",function(){return t.addNewRange()}),b.Sb(3,"app-icons",3),b.Xc(4," \xa0 "),b.Xb(5,"label",4),b.Xc(6,"Add a range"),b.Wb(),b.Wb(),b.Wb()),2&n&&b.rc("ngIf",t.scoreRanges&&(null==t.scoreRanges||null==t.scoreRanges.criterias?null:t.scoreRanges.criterias.length))},directives:[i.q,C.c,C.a,A.a,i.p,F.a,c.u,c.x,i.r,z.b,c.d,N.a,L],pipes:[T.a],styles:[".label-row[_ngcontent-%COMP%]{margin-bottom:5px}label[_ngcontent-%COMP%]{color:var(--tertiary-color)}.link[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font:normal normal normal 12px/14px Nunito}.link[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{color:var(--primary-color)}.link[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > em[_ngcontent-%COMP%]{font-size:18px;vertical-align:middle;color:var(--neutral-color);background:var(--primary-color);border-radius:50%}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:200px;color:var(--neutral-color);background-color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.ranges[_ngcontent-%COMP%]{font-size:12px;font-family:Nunito;text-align:center}[_nghost-%COMP%]     .ant-checkbox-inner{width:35px;height:35px;border:1px solid var(--grey);border-radius:5px;background-color:#fbfbfb}[_nghost-%COMP%]     .ant-checkbox-inner:after{top:55%;left:35%;border:2px solid #2f4f4f;border-top:0;border-left:0;transform:rotate(45deg) scale(1.5) translate(-50%,-50%)}.ant-input[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%;font-size:12px;font-family:Nunito}[_nghost-%COMP%]     .ant-input-number-input, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px}#delete-range[_ngcontent-%COMP%]{line-height:3}.required[_ngcontent-%COMP%]{color:#ff2e2e}.required-text[_ngcontent-%COMP%]{color:#ff2e2e;float:left;position:absolute}"]}),n})();function Q(n,t){if(1&n&&(b.Vb(0),b.Sb(1,"br"),b.Sb(2,"br"),b.Sb(3,"app-score-ranges",13),b.Ub()),2&n){const n=b.ic();b.Db(3),b.rc("form",n.form)("scoreRanges",n.scoreRanges)}}let K=(()=>{class n{constructor(){this.isScoredAssessment=!1}ngAfterViewInit(){this.form.showResultTo&&this.form.showResultTo.forEach(n=>{"PATIENT"===n&&(this.notifyPatient=!!n),"CARETAKER"===n&&(this.notifyCaretaker=!!n)})}setFormAsScoredAssessment(n){n?(this.isScoredAssessment=!0,0==this.scoreRanges.criterias.length&&this.scoreRanges.criterias.push(new s.b)):(this.isScoredAssessment=!1,this.scoreRanges.criterias=[]),this.form.scored=n,this.form.elements.forEach(t=>t.elements.forEach(t=>t.scored=n))}enableNotification(n,t){this.form.showResult=!0;const e=this.form.showResultTo.indexOf(t);n?-1===e&&this.form.showResultTo.push(t):-1<e&&this.form.showResultTo.splice(e,1),this.form.showResultTo.length||(this.form.showResult=!1)}onFormTypeSelected(){this.setFormAsScoredAssessment(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-settings-section"]],inputs:{form:"form",scoreRanges:"scoreRanges"},decls:48,vars:35,consts:[["nz-row",""],["nz-col","","nzXs","8","nzSm","6","nzMd","4","id","header"],["nz-row","",1,"label-row"],["nz-col","","nzSpan","24"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","ASSESSMENT"],["nz-radio","","nzValue","SMS_ASSESSMENT"],["nz-col","","nzSpan","12"],[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","ngModelChange"],["nz-col","","nzSpan","24",1,"tooltip"],["nz-checkbox","","nzValue","PATIENT",3,"nzDisabled","ngModel","ngModelChange"],[1,"tooltiptext"],[4,"ngIf"],[3,"form","scoreRanges"]],template:function(n,t){1&n&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"h3"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(5,"nz-card"),b.Xb(6,"div",2),b.Xb(7,"div",3),b.Xb(8,"label"),b.Xc(9),b.jc(10,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(11,"div",0),b.Xb(12,"div",3),b.Xb(13,"nz-radio-group",4),b.ec("ngModelChange",function(n){return t.form.type=n})("ngModelChange",function(){return t.onFormTypeSelected()}),b.Xb(14,"label",5),b.Xc(15),b.jc(16,"translate"),b.Wb(),b.Xb(17,"label",6),b.Xc(18),b.jc(19,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Sb(20,"br"),b.Sb(21,"br"),b.Xb(22,"div",2),b.Xb(23,"div",7),b.Xb(24,"label"),b.Xc(25),b.jc(26,"translate"),b.Wb(),b.Wb(),b.Xb(27,"div",7),b.Xb(28,"label"),b.Xc(29),b.jc(30,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(31,"div",0),b.Xb(32,"div",7),b.Xb(33,"nz-switch",8),b.ec("ngModelChange",function(n){return t.form.scored=n})("ngModelChange",function(n){return t.setFormAsScoredAssessment(n)}),b.jc(34,"translate"),b.jc(35,"translate"),b.Wb(),b.Wb(),b.Xb(36,"div",7),b.Xb(37,"nz-checkbox-wrapper"),b.Xb(38,"div",0),b.Xb(39,"div",9),b.Xb(40,"label",10),b.ec("ngModelChange",function(n){return t.notifyPatient=n})("ngModelChange",function(n){return t.enableNotification(n,"PATIENT")}),b.Xc(41),b.jc(42,"translate"),b.Wb(),b.Xb(43,"span",11),b.Xc(44),b.jc(45,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Vc(46,Q,4,2,"ng-container",12),b.Wb(),b.Sb(47,"br")),2&n&&(b.Db(3),b.Yc(b.kc(4,15,"FORMS.SETTINGS")),b.Db(6),b.Zc(" ",b.kc(10,17,"FORMS.PURPOSE")," "),b.Db(4),b.rc("ngModel",t.form.type),b.Db(2),b.Zc(" ",b.kc(16,19,"ASSESSMENT.TITLE")," "),b.Db(3),b.Yc(b.kc(19,21,"FORMS.SMS_ASSESSMENT")),b.Db(7),b.Zc(" ",b.kc(26,23,"FORMS.IS_SCORED_ASSESSMENT")," "),b.Db(4),b.Zc(" ",b.kc(30,25,"FORMS.DISPLAY_RESULTS_TO")," :"),b.Db(4),b.tc("nzCheckedChildren"," ",b.kc(34,27,"COMMON.YES")," "),b.tc("nzUnCheckedChildren","",b.kc(35,29,"COMMON.NO")," "),b.rc("ngModel",t.form.scored),b.Db(7),b.rc("nzDisabled",!t.isScoredAssessment)("ngModel",t.notifyPatient),b.Db(1),b.Zc(" ",b.kc(42,31,"MENU.PATIENTS")," "),b.Db(3),b.Zc(" ",b.kc(45,33,"FORMS.SEE_SCORES_DESC")," "),b.Db(2),b.rc("ngIf",t.isScoredAssessment))},directives:[C.c,C.a,E.a,k.c,c.u,c.x,k.b,w.a,N.d,N.a,i.q,G],pipes:[T.a],styles:['#header[_ngcontent-%COMP%]{background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:15px;height:75px;text-align:center;padding-top:15px;top:35px}h3[_ngcontent-%COMP%]{font:normal normal normal 12px/14px Nunito;letter-spacing:2.4px;color:var(--neutral-color)}nz-card[_ngcontent-%COMP%]{border-radius:20px;padding:2%}.label-row[_ngcontent-%COMP%]{margin-bottom:15px}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:200px;color:var(--neutral-color);background-color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}label[_ngcontent-%COMP%]{color:var(--tertiary-color);font:normal normal normal 12px/14px Nunito;margin:5px}[_nghost-%COMP%]     .disabled>span.ant-radio+*{color:#d3d3d3}.ant-radio[_ngcontent-%COMP%]{border:1px solid #2f4f4f;border-radius:50%}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal 600 15px "system-ui";color:var(--light-black);padding-left:15px;padding-right:15px}[_nghost-%COMP%]     .ant-radio-inner:after{background:var(--tertiary-color) 0 0 no-repeat padding-box;border:1px solid #2f4f4f}.ant-checkbox-group[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-radio-checked .ant-radio-inner{border-color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-checkbox+span{font:normal normal 600 14px "system-ui"}']}),n})();var J=e("IvDN"),nn=e("RwU8"),tn=e("FwiY"),en=e("5vDB"),on=e("nJia");function rn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",8),b.Xb(1,"nz-radio-group",9),b.ec("ngModelChange",function(t){return b.Lc(n),b.ic().$implicit.type=t}),b.Xb(2,"label",10),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Xb(5,"label",11),b.Xc(6),b.jc(7,"translate"),b.Wb(),b.Wb(),b.Wb()}if(2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngModel",n.type),b.Db(2),b.Zc(" ",b.kc(4,3,"FORMS.DEFINED")," "),b.Db(3),b.Zc(" ",b.kc(7,5,"CUSTOM")," ")}}function cn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",12),b.Xb(1,"nz-input-number",13),b.ec("ngModelChange",function(t){return b.Lc(n),b.ic().$implicit.score=t}),b.jc(2,"translate"),b.Wb(),b.Wb()}if(2&n){const n=b.ic().$implicit;b.Db(1),b.sc("nzPlaceHolder",b.kc(2,2,"SCORE")),b.rc("ngModel",n.score)}}function an(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",14),b.Xb(1,"app-icons",15),b.ec("click",function(){return b.Lc(n),b.ic(2).addNewOption()}),b.Wb(),b.Wb()}}function ln(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",16),b.Xb(1,"app-icons",17),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().removeOption(t)}),b.Wb(),b.Wb()}}function sn(n,t){if(1&n&&(b.Vb(0),b.Sb(1,"br"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"input",3),b.ec("ngModelChange",function(n){return t.$implicit.option=n}),b.Wb(),b.Wb(),b.Vc(5,rn,8,7,"div",4),b.Vc(6,cn,3,4,"div",5),b.Vc(7,an,2,0,"div",6),b.Vc(8,ln,2,0,"div",7),b.Wb(),b.Ub()),2&n){const n=t.$implicit,e=t.index,i=b.ic();b.Db(4),b.rc("ngModel",n.option),b.Db(1),b.rc("ngIf",!1),b.Db(1),b.rc("ngIf",null==i.question?null:i.question.scored),b.Db(1),b.rc("ngIf",e===(null==i.question||null==i.question.options?null:i.question.options.length)-1),b.Db(1),b.rc("ngIf",1<(null==i.question||null==i.question.options?null:i.question.options.length))}}let bn=(()=>{class n{addNewOption(){this.question.options.push(new s.g)}removeOption(n){this.question.options.splice(n,1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-radio"]],inputs:{question:"question"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["nz-row","","nzGutter","8"],["nz-col","","nzSpan","10"],["nz-input","","placeholder","Option Text",2,"height","32px",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","6","class","type-selector",4,"ngIf"],["nz-col","","nzSpan","4",4,"ngIf"],["nz-col","","nzSpan","1","class","link",4,"ngIf"],["nz-col","","nzSpan","1",4,"ngIf"],["nz-col","","nzSpan","6",1,"type-selector"],[3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","RADIO"],["nz-radio-button","","nzValue","RADIO_TEXT"],["nz-col","","nzSpan","4"],[3,"nzPlaceHolder","ngModel","ngModelChange"],["nz-col","","nzSpan","1",1,"link"],["size","17px","name","plusCircle",3,"click"],["nz-col","","nzSpan","1"],["name","delete",3,"click"]],template:function(n,t){1&n&&b.Vc(0,sn,9,5,"ng-container",0),2&n&&b.rc("ngForOf",null==t.question?null:t.question.options)},directives:[i.p,C.c,C.a,z.b,c.d,c.u,c.x,i.q,k.c,k.b,k.a,F.a,A.a],pipes:[T.a],styles:[".link[_ngcontent-%COMP%] > em[_ngcontent-%COMP%]{font-size:18px;vertical-align:bottom;color:var(--neutral-color);background:var(--primary-color);border-radius:50%}.ant-input[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-input-number-input, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px;font:normal normal normal 12px/14px Nunito}.option-action[_ngcontent-%COMP%]{padding-top:5px}[_nghost-%COMP%]     .ant-radio-group{font:normal normal normal 12px/14px Nunito}.type-selector[_ngcontent-%COMP%]{text-align:center}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}"]}),n})();function dn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",7),b.Xb(1,"nz-input-number",8),b.ec("ngModelChange",function(t){return b.Lc(n),b.ic().$implicit.score=t}),b.jc(2,"translate"),b.Wb(),b.Wb()}if(2&n){const n=b.ic().$implicit;b.Db(1),b.sc("nzPlaceHolder",b.kc(2,2,"SCORE")),b.rc("ngModel",n.score)}}function un(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",9),b.Xb(1,"app-icons",10),b.ec("click",function(){return b.Lc(n),b.ic(2).addNewOption()}),b.Wb(),b.Wb()}}function pn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",11),b.Xb(1,"app-icons",12),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().removeOption(t)}),b.Wb(),b.Wb()}}function fn(n,t){if(1&n&&(b.Vb(0),b.Sb(1,"br"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"input",3),b.ec("ngModelChange",function(n){return t.$implicit.option=n}),b.Wb(),b.Wb(),b.Vc(5,dn,3,4,"div",4),b.Vc(6,un,2,0,"div",5),b.Vc(7,pn,2,0,"div",6),b.Wb(),b.Ub()),2&n){const n=t.$implicit,e=t.index,i=b.ic();b.Db(4),b.rc("ngModel",n.option),b.Db(1),b.rc("ngIf",null==i.question?null:i.question.scored),b.Db(1),b.rc("ngIf",e===(null==i.question||null==i.question.options?null:i.question.options.length)-1),b.Db(1),b.rc("ngIf",1<(null==i.question||null==i.question.options?null:i.question.options.length))}}let gn=(()=>{class n{constructor(){}ngOnInit(){this.question.options.forEach(function(n){n.type=s.f.CHECKBOX})}addNewOption(){this.question.options.push(new s.g)}removeOption(n){this.question.options.splice(n,1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-checkbox"]],inputs:{question:"question"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","6"],["nz-input","","placeholder","Option Text",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","4",4,"ngIf"],["nz-col","","nzSpan","1","class","link",4,"ngIf"],["nz-col","","nzSpan","1",4,"ngIf"],["nz-col","","nzSpan","4"],[3,"nzPlaceHolder","ngModel","ngModelChange"],["nz-col","","nzSpan","1",1,"link"],["size","17px","name","plusCircle",3,"click"],["nz-col","","nzSpan","1"],["name","delete",3,"click"]],template:function(n,t){1&n&&b.Vc(0,fn,8,4,"ng-container",0),2&n&&b.rc("ngForOf",null==t.question?null:t.question.options)},directives:[i.p,C.c,C.a,z.b,c.d,c.u,c.x,i.q,F.a,A.a],pipes:[T.a],styles:[".link[_ngcontent-%COMP%] > em[_ngcontent-%COMP%]{font-size:18px;vertical-align:bottom;color:var(--neutral-color);background:var(--primary-color);border-radius:50%}.ant-input[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-input-number-input, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px;font:normal normal normal 12px/14px Nunito}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}.option-action[_ngcontent-%COMP%]{padding-top:5px}"]}),n})(),mn=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-text"]],inputs:{question:"question"},decls:5,vars:4,consts:[["nz-row","","nzGutter","32"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],["nz-input","",3,"placeholder","ngModel","ngModelChange"]],template:function(n,t){1&n&&(b.Sb(0,"br"),b.Xb(1,"div",0),b.Xb(2,"div",1),b.Xb(3,"input",2),b.ec("ngModelChange",function(n){return t.question.options[0].option=n}),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Wb()),2&n&&(b.Db(3),b.tc("placeholder"," ",b.kc(4,2,"FORMS.TEXT_TO_BE_DISPLAYED")," "),b.rc("ngModel",t.question.options[0].option))},directives:[C.c,C.a,z.b,c.d,c.u,c.x],pipes:[T.a],styles:[".ant-input[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-input-number-input, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px;font:normal normal normal 12px/14px Nunito}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}"]}),n})(),hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-prefilled"]],inputs:{question:"question"},decls:17,vars:20,consts:[["nz-row","","nzGutter","32"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],["nz-input","",3,"placeholder","ngModel","ngModelChange"],["placeholder"," {{ 'COMMON.TYPE' | translate } ",3,"ngModel","ngModelChange"],["nzValue","DATE_OF_BIRTH",3,"nzLabel"],["nzValue","GENDER",3,"nzLabel"],["nzValue","HEIGHT",3,"nzLabel"],["nzValue","WEIGHT",3,"nzLabel"],["nzValue","MOBILE",3,"nzLabel"]],template:function(n,t){1&n&&(b.Sb(0,"br"),b.Xb(1,"div",0),b.Xb(2,"div",1),b.Xb(3,"input",2),b.ec("ngModelChange",function(n){return t.question.options[0].option=n}),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Xb(5,"div",1),b.Xb(6,"nz-select",3),b.ec("ngModelChange",function(n){return t.question.options[0].prefilledFieldType=n}),b.Sb(7,"nz-option",4),b.jc(8,"translate"),b.Sb(9,"nz-option",5),b.jc(10,"translate"),b.Sb(11,"nz-option",6),b.jc(12,"translate"),b.Sb(13,"nz-option",7),b.jc(14,"translate"),b.Sb(15,"nz-option",8),b.jc(16,"translate"),b.Wb(),b.Wb(),b.Wb()),2&n&&(b.Db(3),b.tc("placeholder"," ",b.kc(4,8,"FORMS.TEXT_TO_BE_DISPLAYED")," "),b.rc("ngModel",t.question.options[0].option),b.Db(3),b.rc("ngModel",t.question.options[0].prefilledFieldType),b.Db(1),b.tc("nzLabel"," ",b.kc(8,10,"TABLEHEADER.DOB")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(10,12,"TABLEHEADER.GENDER")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(12,14,"COMMON.HEIGHT")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(14,16,"COMMON.WEIGHT")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(16,18,"LOCATION.MOBILE")," "))},directives:[C.c,C.a,z.b,c.d,c.u,c.x,D.d,D.a],pipes:[T.a],styles:[".ant-input[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-input-number-input, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px;font:normal normal normal 12px/14px Nunito}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}nz-select[_ngcontent-%COMP%]{width:100%;background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid #2f4f4f;border-radius:5px}.ant-select[_ngcontent-%COMP%]{font:normal normal 600 12px Nunito}[_nghost-%COMP%]     .ant-select-selection{background:#fbfbfb 0 0 no-repeat padding-box;color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-select-arrow{color:var(--tertiary-color)}"]}),n})();function Sn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",27),b.Xb(1,"label"),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"nz-input-number",12),b.ec("ngModelChange",function(t){return b.Lc(n),b.ic().$implicit.secondValue=t}),b.jc(5,"translate"),b.Wb(),b.Wb()}if(2&n){const n=b.ic().$implicit;b.Db(2),b.Yc(b.kc(3,3,"TABLEHEADER.VALUE")),b.Db(2),b.sc("nzPlaceHolder",b.kc(5,5,"COMMON.SECOND")),b.rc("ngModel",n.secondValue)}}function On(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",30),b.Xb(1,"app-icons",31),b.ec("click",function(){return b.Lc(n),b.ic(2).addNewCondition()}),b.Wb(),b.Wb()}}function vn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",30),b.Xb(1,"app-icons",32),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().removeCondition(t)}),b.Wb(),b.Wb()}}const Mn=function(){return{xs:8,sm:16,md:32,lg:32}};function Xn(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"div",18),b.Xb(2,"div",19),b.Xb(3,"label"),b.Xc(4),b.jc(5,"translate"),b.Wb(),b.Xb(6,"nz-select",4),b.ec("ngModelChange",function(n){return t.$implicit.operation=n}),b.Sb(7,"nz-option",20),b.jc(8,"translate"),b.Sb(9,"nz-option",21),b.jc(10,"translate"),b.Sb(11,"nz-option",22),b.jc(12,"translate"),b.Sb(13,"nz-option",23),b.jc(14,"translate"),b.Sb(15,"nz-option",24),b.jc(16,"translate"),b.Sb(17,"nz-option",25),b.jc(18,"translate"),b.Sb(19,"nz-option",26),b.jc(20,"translate"),b.Wb(),b.Wb(),b.Xb(21,"div",27),b.Xb(22,"label"),b.Xc(23),b.jc(24,"translate"),b.Wb(),b.Xb(25,"nz-input-number",12),b.ec("ngModelChange",function(n){return t.$implicit.firstValue=n}),b.jc(26,"translate"),b.Wb(),b.Wb(),b.Vc(27,Sn,6,7,"div",28),b.Xb(28,"div",27),b.Xb(29,"label"),b.Xc(30),b.jc(31,"translate"),b.Wb(),b.Xb(32,"nz-input-number",12),b.ec("ngModelChange",function(n){return t.$implicit.score=n}),b.jc(33,"translate"),b.Wb(),b.Wb(),b.Vc(34,On,2,0,"div",29),b.Vc(35,vn,2,0,"div",29),b.Wb(),b.Sb(36,"br"),b.Ub()),2&n){const n=t.$implicit,e=t.index,i=b.ic();b.Db(1),b.rc("nzGutter",b.xc(43,Mn)),b.Db(3),b.Zc(" ",b.kc(5,19,"FORMS.RESULT_SCORE"),""),b.Db(2),b.rc("ngModel",n.operation),b.Db(1),b.tc("nzLabel"," ",b.kc(8,21,"COMMON.LESSER_THAN")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(10,23,"COMMON.LESSER_THAN_EQUAL_TO")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(12,25,"BETWEEN")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(14,27,"GREATER_THAN")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(16,29,"COMMON.GREATER_THAN_EQUAL_TO")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(18,31,"EQUAL_TO")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(20,33,"COMMON.NOT_EQUAL_TO")," "),b.Db(4),b.Zc(" ",b.kc(24,35,"TABLEHEADER.VALUE"),""),b.Db(2),b.tc("nzPlaceHolder"," ",b.kc(26,37,"COMMON.FIRST")," "),b.rc("ngModel",n.firstValue),b.Db(2),b.rc("ngIf","BETWEEN"===(null==n?null:n.operation)),b.Db(3),b.Zc(" ",b.kc(31,39,"SCORE")," "),b.Db(2),b.sc("nzPlaceHolder",b.kc(33,41,"SCORE")),b.rc("ngModel",n.score),b.Db(2),b.rc("ngIf",e===(null==i.question||null==i.question.resultConditions?null:i.question.resultConditions.length)-1),b.Db(1),b.rc("ngIf",1<(null==i.question||null==i.question.resultConditions?null:i.question.resultConditions.length))}}let Cn=(()=>{class n{constructor(){}ngOnInit(){this.question.options.length<2&&(this.question.options=[new s.g,new s.g]),this.question.options.forEach(n=>{n.validation||(n.validation=new s.h)})}addNewCondition(){this.question.resultConditions.push(new s.i)}removeCondition(n){this.question.resultConditions.splice(n,1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-arithmetic"]],inputs:{question:"question"},decls:94,vars:100,consts:[["nz-row","","nzGutter","32"],["nz-col","","nzXs","24","nzSm","12","nzMd","8"],["nz-input","",3,"placeholder","ngModel","ngModelChange"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],[3,"ngModel","ngModelChange"],["nzValue","KILOGRAM",3,"nzLabel"],["nzValue","POUND",3,"nzLabel"],["nzValue","INCH",3,"nzLabel"],["nzValue","CENTIMETER",3,"nzLabel"],["nzValue","FEET",3,"nzLabel"],["nzValue","NONE",3,"nzLabel"],["nz-col","","nzXs","12","nzSm","6","nzMd","3"],[3,"nzPlaceHolder","ngModel","ngModelChange"],["nz-radio","","nzValue","DIVIDE"],["nz-radio","","nzValue","MULTIPLY"],["nz-radio","","nzValue","ADD"],["nz-radio","","nzValue","SUBTRACT"],[4,"ngFor","ngForOf"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","6","nzMd","8"],["nzValue","LESS_THAN",3,"nzLabel"],["nzValue","LESS_THAN_EQUAL_TO",3,"nzLabel"],["nzValue","BETWEEN",3,"nzLabel"],["nzValue","GREATER_THAN",3,"nzLabel"],["nzValue","GREATER_THAN_EQUAL_TO",3,"nzLabel"],["nzValue","EQUAL_TO",3,"nzLabel"],["nzValue","NOT_EQUAL_TO",3,"nzLabel"],["nz-col","","nzXs","12","nzSm","5","nzMd","3"],["nz-col","","nzXs","12","nzSm","5","nzMd","3",4,"ngIf"],["nz-col","","nzXs","1","nzSm","1","nzMd","2","class","link",4,"ngIf"],["nz-col","","nzXs","1","nzSm","1","nzMd","2",1,"link"],["name","plus",3,"click"],["name","delete",3,"click"]],template:function(n,t){1&n&&(b.Sb(0,"br"),b.Xb(1,"div",0),b.Xb(2,"div",1),b.Xb(3,"label"),b.Xc(4),b.jc(5,"translate"),b.Wb(),b.Xb(6,"input",2),b.ec("ngModelChange",function(n){return t.question.options[0].option=n}),b.jc(7,"translate"),b.Wb(),b.Wb(),b.Xb(8,"div",3),b.Xb(9,"label"),b.Xc(10),b.jc(11,"translate"),b.Wb(),b.Xb(12,"nz-select",4),b.ec("ngModelChange",function(n){return t.question.options[0].arithmeticFieldType.unit=n}),b.Sb(13,"nz-option",5),b.jc(14,"translate"),b.Sb(15,"nz-option",6),b.jc(16,"translate"),b.Sb(17,"nz-option",7),b.jc(18,"translate"),b.Sb(19,"nz-option",8),b.jc(20,"translate"),b.Sb(21,"nz-option",9),b.jc(22,"translate"),b.Sb(23,"nz-option",10),b.jc(24,"translate"),b.Wb(),b.Wb(),b.Xb(25,"div",11),b.Xb(26,"label"),b.Xc(27),b.jc(28,"translate"),b.Wb(),b.Xb(29,"nz-input-number",12),b.ec("ngModelChange",function(n){return t.question.options[0].validation.min=n}),b.jc(30,"translate"),b.Wb(),b.Wb(),b.Xb(31,"div",11),b.Xb(32,"label"),b.Xc(33),b.jc(34,"translate"),b.Wb(),b.Xb(35,"nz-input-number",12),b.ec("ngModelChange",function(n){return t.question.options[0].validation.max=n}),b.jc(36,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Sb(37,"br"),b.Sb(38,"br"),b.Xb(39,"nz-radio-group",4),b.ec("ngModelChange",function(n){return t.question.options[0].arithmeticFieldType.arithmeticOperation=n}),b.Xb(40,"label",13),b.Xc(41),b.jc(42,"translate"),b.Wb(),b.Xb(43,"label",14),b.Xc(44),b.jc(45,"translate"),b.Wb(),b.Xb(46,"label",15),b.Xc(47),b.jc(48,"translate"),b.Wb(),b.Xb(49,"label",16),b.Xc(50),b.jc(51,"translate"),b.Wb(),b.Wb(),b.Sb(52,"br"),b.Sb(53,"br"),b.Xb(54,"div",0),b.Xb(55,"div",1),b.Xb(56,"label"),b.Xc(57),b.jc(58,"translate"),b.Wb(),b.Xb(59,"input",2),b.ec("ngModelChange",function(n){return t.question.options[1].option=n}),b.jc(60,"translate"),b.Wb(),b.Wb(),b.Xb(61,"div",3),b.Xb(62,"label"),b.Xc(63),b.jc(64,"translate"),b.Wb(),b.Xb(65,"nz-select",4),b.ec("ngModelChange",function(n){return t.question.options[1].arithmeticFieldType.unit=n}),b.Sb(66,"nz-option",5),b.jc(67,"translate"),b.Sb(68,"nz-option",6),b.jc(69,"translate"),b.Sb(70,"nz-option",7),b.jc(71,"translate"),b.Sb(72,"nz-option",8),b.jc(73,"translate"),b.Sb(74,"nz-option",9),b.jc(75,"translate"),b.Sb(76,"nz-option",10),b.jc(77,"translate"),b.Wb(),b.Wb(),b.Xb(78,"div",11),b.Xb(79,"label"),b.Xc(80),b.jc(81,"translate"),b.Wb(),b.Xb(82,"nz-input-number",12),b.ec("ngModelChange",function(n){return t.question.options[1].validation.min=n}),b.jc(83,"translate"),b.Wb(),b.Wb(),b.Xb(84,"div",11),b.Xb(85,"label"),b.Xc(86),b.jc(87,"translate"),b.Wb(),b.Xb(88,"nz-input-number",12),b.ec("ngModelChange",function(n){return t.question.options[1].validation.max=n}),b.jc(89,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Sb(90,"br"),b.Sb(91,"br"),b.Xb(92,"nz-card"),b.Vc(93,Xn,37,44,"ng-container",17),b.Wb()),2&n&&(b.Db(4),b.Zc(" ",b.kc(5,40,"FORMS.INPUT")," "),b.Db(2),b.tc("placeholder"," ",b.kc(7,42,"FORMS.ENTER_LABEL")," "),b.rc("ngModel",t.question.options[0].option),b.Db(4),b.Zc(" ",b.kc(11,44,"FORMS.UNITS_OF_MEASUREMENT"),""),b.Db(2),b.rc("ngModel",t.question.options[0].arithmeticFieldType.unit),b.Db(1),b.tc("nzLabel","",b.kc(14,46,"COMMON.UNITS.KG")," (kg)"),b.Db(2),b.tc("nzLabel","",b.kc(16,48,"COMMON.UNITS.LBS")," (lbs)"),b.Db(2),b.tc("nzLabel","",b.kc(18,50,"COMMON.UNITS.IN")," (in)"),b.Db(2),b.tc("nzLabel","",b.kc(20,52,"COMMON.UNITS.CM")," (cm)"),b.Db(2),b.tc("nzLabel","",b.kc(22,54,"COMMON.UNITS.FT")," (ft)"),b.Db(2),b.tc("nzLabel"," ",b.kc(24,56,"COMMON.UNITS.NO_UNITS")," "),b.Db(4),b.Zc(" ",b.kc(28,58,"FORMS.MIN_VALUE")," "),b.Db(2),b.tc("nzPlaceHolder"," ",b.kc(30,60,"COMMON.MIN")," "),b.rc("ngModel",t.question.options[0].validation.min),b.Db(4),b.Zc(" ",b.kc(34,62,"FORMS.MAX_VALUE")," "),b.Db(2),b.sc("nzPlaceHolder",b.kc(36,64,"COMMON.MAX")),b.rc("ngModel",t.question.options[0].validation.max),b.Db(4),b.rc("ngModel",t.question.options[0].arithmeticFieldType.arithmeticOperation),b.Db(2),b.Zc(" ",b.kc(42,66,"COMMON.OPERATION.DIVIDE")," (/)"),b.Db(3),b.Zc("",b.kc(45,68,"COMMON.OPERATION.MULTIPLY")," (x)"),b.Db(3),b.Zc("",b.kc(48,70,"COMMON.OPERATION.ADD")," (+)"),b.Db(3),b.Zc("",b.kc(51,72,"COMMON.OPERATION.SUBTRACT")," (-)"),b.Db(7),b.Zc(" ",b.kc(58,74,"FORMS.INPUT")," "),b.Db(2),b.tc("placeholder","",b.kc(60,76,"FORMS.ENTER_LABEL")," "),b.rc("ngModel",t.question.options[1].option),b.Db(4),b.Zc(" ",b.kc(64,78,"FORMS.UNITS_OF_MEASUREMENT"),""),b.Db(2),b.rc("ngModel",t.question.options[1].arithmeticFieldType.unit),b.Db(1),b.tc("nzLabel","",b.kc(67,80,"COMMON.UNITS.KG")," (kg)"),b.Db(2),b.tc("nzLabel","",b.kc(69,82,"COMMON.UNITS.LBS")," (lbs)"),b.Db(2),b.tc("nzLabel","",b.kc(71,84,"COMMON.UNITS.IN")," (in)"),b.Db(2),b.tc("nzLabel","",b.kc(73,86,"COMMON.UNITS.CM")," (cm)"),b.Db(2),b.tc("nzLabel","",b.kc(75,88,"COMMON.UNITS.FT")," (ft)"),b.Db(2),b.tc("nzLabel"," ",b.kc(77,90,"COMMON.UNITS.NO_UNITS")," "),b.Db(4),b.Zc(" ",b.kc(81,92,"FORMS.MIN_VALUE")," "),b.Db(2),b.tc("nzPlaceHolder"," ",b.kc(83,94,"COMMON.MIN")," "),b.rc("ngModel",t.question.options[1].validation.min),b.Db(4),b.Zc(" ",b.kc(87,96,"FORMS.MAX_VALUE")," "),b.Db(2),b.sc("nzPlaceHolder",b.kc(89,98,"COMMON.MAX")),b.rc("ngModel",t.question.options[1].validation.max),b.Db(5),b.rc("ngForOf",null==t.question?null:t.question.resultConditions))},directives:[C.c,C.a,z.b,c.d,c.u,c.x,D.d,D.a,F.a,k.c,k.b,E.a,i.p,i.q,A.a],pipes:[T.a],styles:['.label-row[_ngcontent-%COMP%]{margin-bottom:5px}label[_ngcontent-%COMP%]{color:var(--tertiary-color);font:normal normal normal 12px/14px Nunito}.ant-input[_ngcontent-%COMP%], .ant-input-number[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ant-input-number-input{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px;font:normal normal normal 12px/14px Nunito}nz-select[_ngcontent-%COMP%]{width:100%;background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid #2f4f4f;border-radius:5px}.ant-select[_ngcontent-%COMP%]{font:normal normal 600 12px Nunito}[_nghost-%COMP%]     .ant-select-selection{background:#fbfbfb 0 0 no-repeat padding-box;color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-select-arrow{color:var(--tertiary-color)}input[_ngcontent-%COMP%]{color:var(--light-black);font:normal normal 600 14px Nunito;background:#fbfbfb 0 0 no-repeat padding-box}.ant-radio[_ngcontent-%COMP%]{border:1px solid #2f4f4f;border-radius:50%}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal 600 12px "system-ui";color:var(--light-black);padding-left:15px;padding-right:15px}[_nghost-%COMP%]     .ant-radio-inner:after{background:var(--tertiary-color) 0 0 no-repeat padding-box;border:1px solid #2f4f4f}.ant-card[_ngcontent-%COMP%]{background:#ececec 0 0 no-repeat padding-box;border-radius:5px}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}.link[_ngcontent-%COMP%]{margin-top:25px}']}),n})();function En(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",19),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}function zn(n,t){1&n&&(b.Xb(0,"div",0),b.Xb(1,"div",20),b.Xb(2,"label"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Wb()),2&n&&(b.Db(3),b.Zc(" ",b.kc(4,1,"COMMON.REQUIRED")," "))}function _n(n,t){1&n&&(b.Sb(0,"nz-option",21),b.jc(1,"translate")),2&n&&b.tc("nzLabel"," ",b.kc(1,1,"TEXT")," ")}function Dn(n,t){1&n&&(b.Sb(0,"nz-option",22),b.jc(1,"translate")),2&n&&b.tc("nzLabel"," ",b.kc(1,1,"FORMS.QUESTION.PREFILLED")," ")}function Tn(n,t){1&n&&(b.Sb(0,"nz-option",23),b.jc(1,"translate")),2&n&&b.tc("nzLabel"," ",b.kc(1,1,"FORMS.QUESTION.CALCULATION")," ")}function xn(n,t){1&n&&(b.Sb(0,"app-icons",24),b.jc(1,"translate")),2&n&&b.tc("nzTooltipTitle"," ",b.kc(1,1,"FORMS.YES_NO_QUESTION_DESC")," ")}function Rn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",25),b.Xb(1,"nz-switch",26),b.ec("ngModelChange",function(t){return b.Lc(n),b.ic().question.required=t}),b.jc(2,"translate"),b.jc(3,"translate"),b.Wb(),b.Wb()}if(2&n){const n=b.ic();b.Db(1),b.tc("nzCheckedChildren"," ",b.kc(2,3,"COMMON.YES")," "),b.sc("nzUnCheckedChildren",b.kc(3,5,"COMMON.NO")),b.rc("ngModel",n.question.required)}}function yn(n,t){if(1&n&&b.Sb(0,"app-radio",27),2&n){const n=b.ic();b.rc("question",n.question)}}function Wn(n,t){if(1&n&&b.Sb(0,"app-checkbox",27),2&n){const n=b.ic();b.rc("question",n.question)}}function Pn(n,t){if(1&n&&b.Sb(0,"app-text",27),2&n){const n=b.ic();b.rc("question",n.question)}}function In(n,t){if(1&n&&b.Sb(0,"app-prefilled",27),2&n){const n=b.ic();b.rc("question",n.question)}}function kn(n,t){if(1&n&&b.Sb(0,"app-arithmetic",27),2&n){const n=b.ic();b.rc("question",n.question)}}const wn=function(n){return{border:n}};let Nn=(()=>{class n{constructor(){this.remove=new b.n}removeQuestion(){this.remove.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-question"]],inputs:{formType:"formType",question:"question"},outputs:{remove:"remove"},decls:34,vars:31,consts:[["nz-row","","nzGutter","32",1,"label-row"],["nz-col","","nzSpan","24"],["formValidate","question","nz-input","",3,"entity","placeholder","ngModel","ngStyle","ngModelChange"],[4,"ngIf"],["nz-row","","nzGutter","32","class","label-row",4,"ngIf"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","20"],[3,"ngModel","ngModelChange"],["nzValue","RADIO",3,"nzLabel"],["nzValue","CHECKBOX",3,"nzLabel"],["nzValue","INPUT",3,"nzLabel",4,"ngIf"],["nzValue","PRE_FILLED",3,"nzLabel",4,"ngIf"],["nzValue","ARITHMETIC",3,"nzLabel",4,"ngIf"],["nzType","vertical"],["nz-tooltip","","name","infoCircle",3,"nzTooltipTitle",4,"ngIf"],["nz-col","","nzSpan","4",4,"ngIf"],["nz-row",""],[3,"ngSwitch"],[3,"question",4,"ngSwitchCase"],[1,"required-text"],["nz-col","","nzOffset","20","nzSpan","4"],["nzValue","INPUT",3,"nzLabel"],["nzValue","PRE_FILLED",3,"nzLabel"],["nzValue","ARITHMETIC",3,"nzLabel"],["nz-tooltip","","name","infoCircle",3,"nzTooltipTitle"],["nz-col","","nzSpan","4"],[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","ngModelChange"],[3,"question"]],template:function(n,t){1&n&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"label"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(5,"div",0),b.Xb(6,"div",1),b.Xb(7,"input",2),b.ec("ngModelChange",function(n){return t.question.title=n}),b.jc(8,"translate"),b.Wb(),b.Vc(9,En,4,3,"div",3),b.Wb(),b.Wb(),b.Sb(10,"br"),b.Vc(11,zn,5,3,"div",4),b.Xb(12,"div",5),b.Xb(13,"div",6),b.Xb(14,"nz-select",7),b.ec("ngModelChange",function(n){return t.question.type=n}),b.Sb(15,"nz-option",8),b.jc(16,"translate"),b.Sb(17,"nz-option",9),b.jc(18,"translate"),b.Vc(19,_n,2,3,"nz-option",10),b.Vc(20,Dn,2,3,"nz-option",11),b.Vc(21,Tn,2,3,"nz-option",12),b.Wb(),b.Sb(22,"nz-divider",13),b.Vc(23,xn,2,3,"app-icons",14),b.Wb(),b.Vc(24,Rn,4,7,"div",15),b.Wb(),b.Xb(25,"div",16),b.Xb(26,"div",1),b.Sb(27,"br"),b.Vb(28,17),b.Vc(29,yn,1,1,"app-radio",18),b.Vc(30,Wn,1,1,"app-checkbox",18),b.Vc(31,Pn,1,1,"app-text",18),b.Vc(32,In,1,1,"app-prefilled",18),b.Vc(33,kn,1,1,"app-arithmetic",18),b.Ub(),b.Wb(),b.Wb()),2&n&&(b.Db(3),b.Zc(" ",b.kc(4,21,"FORMS.QUESTION"),""),b.Db(4),b.tc("placeholder"," ",b.kc(8,23,"FORMS.ENTER_QUESTION")," "),b.rc("entity",t.question)("ngModel",t.question.title)("ngStyle",b.yc(29,wn,null!=t.question&&t.question.valid||null!=t.question&&t.question.title?"":"1px solid red")),b.Db(2),b.rc("ngIf",!(null!=t.question&&t.question.valid||null!=t.question&&t.question.title)),b.Db(2),b.rc("ngIf","SMS_ASSESSMENT"!==t.formType),b.Db(3),b.rc("ngModel",t.question.type),b.Db(1),b.tc("nzLabel"," ",b.kc(16,25,"FORMS.QUESTION.ONE_ANSWER")," "),b.Db(2),b.tc("nzLabel"," ",b.kc(18,27,"FORMS.MULTIPLE_ANSWERS")," "),b.Db(2),b.rc("ngIf","SMS_ASSESSMENT"!==t.formType),b.Db(1),b.rc("ngIf","SMS_ASSESSMENT"!==t.formType),b.Db(1),b.rc("ngIf","SMS_ASSESSMENT"!==t.formType),b.Db(2),b.rc("ngIf","ARITHMETIC"===(null==t.question?null:t.question.type)),b.Db(1),b.rc("ngIf","SMS_ASSESSMENT"!==t.formType),b.Db(4),b.rc("ngSwitch",null==t.question?null:t.question.type),b.Db(1),b.rc("ngSwitchCase","RADIO"),b.Db(1),b.rc("ngSwitchCase","CHECKBOX"),b.Db(1),b.rc("ngSwitchCase","INPUT"),b.Db(1),b.rc("ngSwitchCase","PRE_FILLED"),b.Db(1),b.rc("ngSwitchCase","ARITHMETIC"))},directives:[C.c,C.a,z.b,c.d,_,c.u,c.x,i.r,i.q,D.d,D.a,en.a,i.s,i.t,A.a,on.d,w.a,bn,gn,mn,hn,Cn],pipes:[T.a],styles:[".label-row[_ngcontent-%COMP%]{margin-bottom:5px}label[_ngcontent-%COMP%]{color:var(--tertiary-color);font:normal normal normal 12px/14px Nunito}input[_ngcontent-%COMP%]{border-radius:0;border:none;border-bottom:1px solid #2f4f4f;padding:0;color:var(--light-black);font:normal normal 600 18px/20px Nunito}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{outline:none}nz-select[_ngcontent-%COMP%]{width:50%;background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid #2f4f4f;border-radius:5px}.ant-select[_ngcontent-%COMP%]{font:normal normal 600 12px Nunito}[_nghost-%COMP%]     .ant-select-selection{background:#fbfbfb 0 0 no-repeat padding-box;color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-select-arrow{color:var(--tertiary-color)}.required[_ngcontent-%COMP%]{color:#ff2e2e}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:200px;color:var(--neutral-color);background-color:#000;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.required-text[_ngcontent-%COMP%]{color:#ff2e2e;float:left;position:absolute}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}"]}),n})();var An=e("SKKP"),Fn=e("Nqz0"),Vn=e("Q8cG");function Ln(n,t){1&n&&(b.Xb(0,"div"),b.Xb(1,"div",8),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Wb()),2&n&&(b.Db(2),b.Zc("*",b.kc(3,1,"COMMON.REQUIRED"),""))}const qn=function(n){return{"ribbon-animation":n}};function jn(n,t){if(1&n&&b.Sb(0,"nz-ribbon",25),2&n){const n=b.ic().index,t=b.ic();b.rc("nzText",t.newQuestions.get(n))("ngClass",b.yc(2,qn,t.selectedIndex==n))}}function Un(n,t){if(1&n){const n=b.Yb();b.Xb(0,"button",26),b.Xc(1," More "),b.Sb(2,"i",27),b.Wb(),b.Xb(3,"nz-dropdown-menu",null,28),b.Xb(5,"ul",29),b.Xb(6,"li",30),b.Sb(7,"app-icons",31),b.Xb(8,"a",32),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().addNewQuestion(t,"ABOVE")}),b.Xc(9,"Add question above"),b.Wb(),b.Wb(),b.Xb(10,"li",30),b.Sb(11,"app-icons",33),b.Xb(12,"a",32),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().addNewQuestion(t,"BELOW")}),b.Xc(13,"Add question below"),b.Wb(),b.Wb(),b.Xb(14,"li",34),b.Sb(15,"i",35),b.Xb(16,"a",32),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().move(t,"UP")}),b.Xc(17,"Move Question Up"),b.Wb(),b.Wb(),b.Xb(18,"li",30),b.Sb(19,"i",36),b.Xb(20,"a",32),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().copyQuestion(t)}),b.Xc(21,"Copy Question"),b.Wb(),b.Wb(),b.Xb(22,"li",34),b.Sb(23,"i",37),b.Xb(24,"a",32),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().move(t,"DOWN")}),b.Xc(25,"Move Question down"),b.Wb(),b.Wb(),b.Xb(26,"li",38),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic().removeQuestion(t)}),b.Sb(27,"app-icons",39),b.Xc(28," Remove "),b.Wb(),b.Wb(),b.Wb()}if(2&n){const n=b.Ic(4),t=b.ic().index,e=b.ic();b.rc("nzDropdownMenu",n),b.Db(14),b.rc("nzDisabled",0==t),b.Db(8),b.rc("nzDisabled",t==(null==e.form||null==e.form.elements?null:e.form.elements.length)-1)}}const $n=function(n){return{"card-animation":n}};function Hn(n,t){if(1&n){const n=b.Yb();b.Vb(0),b.Vc(1,jn,1,4,"nz-ribbon",9),b.Xb(2,"nz-card",10),b.Xb(3,"div",3),b.Xb(4,"div",11),b.ec("keydown",function(e){b.Lc(n);const i=t.index;return b.ic().onFocus(e,i)}),b.Xb(5,"app-question",12),b.ec("remove",function(){b.Lc(n);const e=t.index;return b.ic().removeQuestion(e)}),b.Wb(),b.Wb(),b.Xb(6,"div",13),b.Xb(7,"nz-card",14),b.Xb(8,"div",15),b.Xb(9,"span",16),b.Xb(10,"a",17),b.Xb(11,"app-icons",18),b.ec("click",function(){b.Lc(n);const e=t.index;return b.ic().addNewQuestion(e,"ABOVE")}),b.Wb(),b.Wb(),b.Wb(),b.Sb(12,"nz-divider"),b.Xb(13,"span",19),b.Xb(14,"a",20),b.Xb(15,"i",21),b.ec("click",function(){b.Lc(n);const e=t.index;return b.ic().copyQuestion(e)}),b.Wb(),b.Wb(),b.Wb(),b.Sb(16,"nz-divider"),b.Xb(17,"span",22),b.Xb(18,"a",17),b.Xb(19,"app-icons",23),b.ec("click",function(){b.Lc(n);const e=t.index;return b.ic().addNewQuestion(e,"BELOW")}),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Vc(20,Un,29,3,"ng-template",null,24,b.Wc),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Ub()}if(2&n){const n=t.index,e=b.Ic(21),i=b.ic();b.Db(1),b.rc("ngIf",i.newQuestions.has(n)),b.Db(1),b.uc("id","question-section-",i.sectionIndex,"-",n,""),b.rc("ngClass",b.yc(8,$n,i.selectedIndex==n))("nzExtra",e),b.Db(3),b.rc("question",null==i.section?null:i.section.elements[n])("formType",i.formType),b.Db(2),b.rc("nzBodyStyle",i.cardBodyStyle)}}function Yn(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",3),b.Xb(1,"div",40),b.Xb(2,"button",41),b.ec("click",function(){b.Lc(n);const t=b.ic();return t.addNewQuestion(t.section.elements.length-1)}),b.Sb(3,"i",42),b.Xc(4),b.jc(5,"translate"),b.Wb(),b.Wb(),b.Wb()}2&n&&(b.Db(4),b.Yc(b.kc(5,1,"FORMS.ADD_A_QUESTION")))}const Bn=function(n){return{border:n}};let Zn=(()=>{class n{constructor(n,t){this._formSharingService=n,this._notificationsService=t,this.newQuestions=new Map,this.selectedIndex=-1,this.cardBodyStyle={padding:"10px"}}addNewQuestion(n,t="BELOW",e=new s.k,i="NEW"){e.scored=this._formSharingService.get().scored;let o="BELOW"==t?this.addNewQuestionBelow(n,e):this.addNewQuestionAbove(n,e);this.newQuestions.set(o,i),this.scrollTo(o)}addNewQuestionAbove(n,t){return this.section.elements.splice(n,0,t),n}addNewQuestionBelow(n,t){return this.section.elements.splice(n+1,0,t),n+1}removeQuestion(n){this.selectedIndex=-1,1!==this.section.elements.length?(this.section.elements.splice(n,1),this.newQuestions.has(n)&&this.newQuestions.delete(n)):this._notificationsService.warning("Form Section","Atleast one question is required per section!")}move(n,t){if(1===this.section.elements.length||"UP"==t&&0==n||"DOWN"==t&&n==this.section.elements.length-1)return;let e=this.swap(n,"UP"==t?n-1:n+1);this.newQuestions.has(n)&&this.newQuestions.delete(n),this.scrollTo(e)}swap(n,t){const e=JSON.parse(JSON.stringify(this.section.elements[t]));return this.section.elements[t]=JSON.parse(JSON.stringify(this.section.elements[n])),this.section.elements[n]=e,t}scrollTo(n){document.getElementById("section-"+this.sectionIndex).querySelector(`#question-section-${this.sectionIndex}-${n}`).scrollIntoView({behavior:"smooth",block:"start"}),this.selectedIndex=n}copyQuestion(n){this.addNewQuestion(n,"BELOW",JSON.parse(JSON.stringify(this.section.elements[n])),"DUPLICATE")}onFocus(n,t){this.newQuestions.has(t)&&this.newQuestions.delete(t)}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(d),b.Rb(u.b))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-section"]],inputs:{formType:"formType",section:"section",sectionIndex:"sectionIndex"},decls:20,vars:14,consts:[["nz-row","","nzGutter","32",1,"label-row"],["nz-col","","nzSpan","22"],[1,"required"],["nz-row","","nzGutter","32"],["formValidate","section","nz-input","",3,"entity","placeholder","ngModel","ngStyle","ngModelChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","32",4,"ngIf"],[1,"required-text"],["nzStandalone","",3,"nzText","ngClass",4,"ngIf"],[1,"question-card",3,"id","ngClass","nzExtra"],["nz-col","","nzSpan","22",3,"keydown"],[3,"question","formType","remove"],["nz-col","","nzSpan","2",1,"move-btn"],[1,"action-card",3,"nzBodyStyle"],[1,"move-btn"],["nz-tooltip","","nzTooltipTitle","Add question above"],["nz-button","","nzType","text"],["name","insertBefore","color","#a7c853",3,"click"],["nz-tooltip","","nzTooltipTitle","Copy Question"],["nz-button","","nzType","text",2,"color","var(--primary-color)"],["nz-icon","","nzType","copy","nzTheme","outline",3,"click"],["nz-tooltip","","nzTooltipTitle","Add question below"],["name","insertAfter","color","#a7c853",3,"click"],["extraTemplate",""],["nzStandalone","",3,"nzText","ngClass"],["nz-button","","nz-dropdown","","nzType","text",3,"nzDropdownMenu"],["nz-icon","","nzType","more",2,"color","var(--primary-color)"],["menuMore","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"menu-item"],["name","insertBefore"],[3,"click"],["name","insertAfter"],["nz-menu-item","",1,"menu-item",3,"nzDisabled"],["nz-icon","","nzType","vertical-align-top"],["nz-icon","","nzType","copy","nzTheme","outline"],["nz-icon","","nzType","vertical-align-bottom"],["nz-menu-item","",1,"menu-item",3,"click"],["color","red","name","delete"],[1,"add-question"],["nz-button","","nzType","default","nzShape","round",3,"click"],["nz-icon","","nzType","plus"]],template:function(n,t){1&n&&(b.Xb(0,"nz-card"),b.Xb(1,"div",0),b.Xb(2,"div",1),b.Xb(3,"label"),b.Xc(4),b.jc(5,"translate"),b.Xb(6,"span",2),b.Xc(7,"*"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(8,"div",3),b.Xb(9,"div",1),b.Xb(10,"input",4),b.ec("ngModelChange",function(n){return t.section.title=n}),b.jc(11,"translate"),b.Wb(),b.Vc(12,Ln,4,3,"div",5),b.Wb(),b.Wb(),b.Sb(13,"br"),b.Sb(14,"br"),b.Vc(15,Hn,22,10,"ng-container",6),b.Sb(16,"br"),b.Sb(17,"br"),b.Vc(18,Yn,6,3,"div",7),b.Wb(),b.Sb(19,"br")),2&n&&(b.Db(4),b.Zc(" ",b.kc(5,8,"FORMS.SECTION_HEADER")," "),b.Db(6),b.tc("placeholder"," ",b.kc(11,10,"FORMS.ENTER_SECTION_TITLE")," "),b.rc("entity",t.section)("ngModel",t.section.title)("ngStyle",b.yc(12,Bn,null!=t.section&&t.section.valid||null!=t.section&&t.section.title?"":"1px solid red")),b.Db(2),b.rc("ngIf",!(null!=t.section&&t.section.valid||null!=t.section&&t.section.title)),b.Db(3),b.rc("ngForOf",null==t.section?null:t.section.elements),b.Db(3),b.rc("ngIf","SMS_ASSESSMENT"!==t.formType))},directives:[E.a,C.c,C.a,z.b,c.d,_,c.u,c.x,i.r,i.q,i.p,i.o,Nn,on.d,v.a,M.a,A.a,en.a,tn.a,An.c,Fn.d,Fn.b,Fn.e,Vn.c,Vn.e,nn.a],pipes:[T.a],styles:["#header[_ngcontent-%COMP%]{background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:15px;height:75px;text-align:center;padding-top:15px;top:35px}h3[_ngcontent-%COMP%]{font:normal normal normal 12px/14px Nunito;letter-spacing:2.4px;color:var(--neutral-color)}[_ngcontent-%COMP%]::-moz-placeholder{font-size:16px}[_ngcontent-%COMP%]::placeholder{font-size:16px}nz-card[_ngcontent-%COMP%]{border-radius:20px;padding:2%;position:relative;top:5px}.required-text[_ngcontent-%COMP%]{color:#ff2e2e;float:left;position:absolute}.label-row[_ngcontent-%COMP%]{margin-bottom:5px}label[_ngcontent-%COMP%]{color:var(--tertiary-color);font:normal normal normal 12px/14px Nunito}input[_ngcontent-%COMP%]{border-radius:0;border:none;border-bottom:1px solid #2f4f4f;padding:0;color:var(--light-black);font:normal normal 600 18px/20px Nunito}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{outline:none}.required[_ngcontent-%COMP%]{color:#ff2e2e}.ng-invalid.ng-dirty[_ngcontent-%COMP%], .ng-invalid.ng-touched[_ngcontent-%COMP%]{border:2px solid #ff3939}.add-question[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.add-question[_ngcontent-%COMP%]{position:absolute;right:40px;bottom:32px}.move-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;align-self:center}.action-card[_ngcontent-%COMP%]{width:60px;border-radius:5px;padding:0;background:#f0f0f0}.icon-color[_ngcontent-%COMP%]{color:var(--primary-color)}[_nghost-%COMP%]     .ant-card-head{border-bottom:none;min-height:24px;height:24px}[_nghost-%COMP%]     .ant-card-head-wrapper{height:24px;position:absolute;right:0;padding-top:27px;right:20px}.question-card[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:10px}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]     .ant-ribbon{z-index:1;color:var(--neutral-color)}.card-animation[_ngcontent-%COMP%]{-webkit-animation:move-card .75s 4;animation:move-card .75s 4;-webkit-animation-direction:alternate;animation-direction:alternate}@-webkit-keyframes move-card{0%{left:0;border:4px solid var(--primary-color)}to{left:30px;border:4px solid var(--primary-color)}}@keyframes move-card{0%{left:0;border:4px solid var(--primary-color)}to{left:30px;border:4px solid var(--primary-color)}}.ribbon-animation[_ngcontent-%COMP%]{-webkit-animation:move-ribbon .75s 4;animation:move-ribbon .75s 4;-webkit-animation-direction:alternate;animation-direction:alternate}@-webkit-keyframes move-ribbon{0%{right:0}to{right:-30px}}@keyframes move-ribbon{0%{right:0}to{right:-30px}}"]}),n})();function Gn(n,t){if(1&n&&(b.Xb(0,"span"),b.Xc(1),b.Wb()),2&n){const n=b.ic(3).$implicit;b.Db(1),b.Zc(" ",null==n?null:n.title,"")}}function Qn(n,t){if(1&n&&(b.Xb(0,"span"),b.Xc(1),b.Wb()),2&n){const n=b.ic(3).index;b.Db(1),b.Zc("Untitled Header - ",n+1,"")}}function Kn(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"nz-card",21),b.Xb(2,"div",22),b.Vc(3,Gn,2,1,"span",20),b.Vc(4,Qn,2,1,"span",20),b.Wb(),b.Wb(),b.Ub()),2&n){const n=b.ic(2).$implicit;b.Db(3),b.rc("ngIf",null==n?null:n.title),b.Db(1),b.rc("ngIf",!(null!=n&&n.title))}}function Jn(n,t){if(1&n&&(b.Xb(0,"div",17),b.Sb(1,"i",18),b.Xb(2,"h3",19),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Wb(),b.Vc(5,Kn,5,2,"ng-container",20)),2&n){const n=b.ic().index,t=b.Ic(1);b.Db(1),b.rc("nzRotate",t.nzActive?90:0),b.Db(2),b.ad(" ",b.kc(4,4,"FORMS.SECTION")," - ",n+1," "),b.Db(2),b.rc("ngIf",!t.nzActive)}}function nt(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",23),b.Xb(1,"span",24),b.Xb(2,"button",25),b.Xc(3," More "),b.Sb(4,"i",26),b.Wb(),b.Xb(5,"nz-dropdown-menu",null,27),b.Xb(7,"ul",28),b.Xb(8,"li",29),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic(2).addNewSection(t,"ABOVE")}),b.Sb(9,"app-icons",30),b.Xc(10,"Add section Above "),b.Wb(),b.Xb(11,"li",29),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic(2).addNewSection(t,"BELOW")}),b.Sb(12,"app-icons",30),b.Xc(13,"Add section Below "),b.Wb(),b.Xb(14,"li",31),b.Sb(15,"i",32),b.Xb(16,"a",33),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic(2).move(t,"UP")}),b.Xc(17,"Move Section up "),b.Wb(),b.Wb(),b.Xb(18,"li",31),b.Sb(19,"i",34),b.Xb(20,"a",33),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic(2).move(t,"DOWN")}),b.Xc(21,"Move Section down"),b.Wb(),b.Wb(),b.Xb(22,"li",35),b.Sb(23,"i",36),b.Xb(24,"a",33),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic(2).copySection(t)}),b.Xc(25,"Copy Section"),b.Wb(),b.Wb(),b.Xb(26,"li",29),b.ec("click",function(){b.Lc(n);const t=b.ic().index;return b.ic(2).removeSection(t)}),b.Sb(27,"app-icons",37),b.Xc(28," Remove "),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&n){const n=b.Ic(6),t=b.ic().index,e=b.Ic(1),i=b.ic(2);b.Sc("top",e.nzActive?"0px":"-70px"),b.Db(2),b.rc("nzDropdownMenu",n),b.Db(12),b.rc("nzDisabled",0==t),b.Db(4),b.rc("nzDisabled",t==(null==i.form||null==i.form.elements?null:i.form.elements.length)-1)}}const tt=function(n){return{"card-animation":n}};function et(n,t){if(1&n&&(b.Xb(0,"nz-collapse-panel",12,13),b.Sb(2,"app-section",14),b.Vc(3,Jn,6,6,"ng-template",null,15,b.Wc),b.Vc(5,nt,29,5,"ng-template",null,16,b.Wc),b.Wb()),2&n){const n=t.$implicit,e=t.index,i=b.Ic(4),o=b.Ic(6),r=b.ic(2);b.tc("id","section-",e,""),b.rc("nzActive",!0)("nzShowArrow",!1)("nzHeader",i)("nzExtra",o)("ngClass",b.yc(9,tt,r.selectedIndex==e)),b.Db(2),b.rc("section",n)("formType",null==r.form?null:r.form.type)("sectionIndex",e)}}function it(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",4),b.Sb(1,"app-header-section",5),b.Sb(2,"app-settings-section",6),b.Xb(3,"nz-collapse",7),b.Vc(4,et,7,11,"nz-collapse-panel",8),b.Wb(),b.Sb(5,"br"),b.Xb(6,"div",9),b.Xb(7,"button",10),b.ec("click",function(){b.Lc(n);const t=b.ic();return t.addNewSection((null==t.form||null==t.form.elements?null:t.form.elements.length)-1)}),b.Sb(8,"i",11),b.Xc(9),b.jc(10,"translate"),b.Wb(),b.Wb(),b.Sb(11,"br"),b.Sb(12,"br"),b.Wb()}if(2&n){const n=b.ic();b.Db(1),b.rc("form",n.form),b.Db(1),b.rc("form",n.form)("scoreRanges",n.scoreRanges),b.Db(2),b.rc("ngForOf",null==n.form?null:n.form.elements),b.Db(5),b.Zc(" ",b.kc(10,5,"FORMS.ADD_SECTION")," ")}}let ot=(()=>{class n extends l.a{constructor(n,t,e,i,o,r,c,a,l){super(),this._notificationsService=n,this._formSharingService=t,this._formsService=e,this.translationService=i,this._formValidationService=o,this._modalService=r,this._router=c,this._formsEventLogger=a,this._activatedRoute=l,this.title="New Form"}ngOnInit(){this.initTranslations(),this.initializeNewForm()}initTranslations(){this.translationService.getMultiple("FORMS.NEW_SECTION_ADDED","FORMS.FORM_SECTION","FORM.EDIT_FORM_TITLE","FORMS.SECTION_REMOVE","FORMS.SAVE_AS_DRAFT","FORMS.INVALID_SECTION_FIELD").subscribe(n=>this.translatedStrings=n)}initializeNewForm(){return this.formId=this._activatedRoute.snapshot.paramMap.get("id"),this.formId&&(this.title=this.translatedStrings.get("FORM.EDIT_FORM_TITLE")),this._formSharingService.get()||this.formId?this._formSharingService.get()?(this.form=this._formSharingService.get(),void(this.scoreRanges=this._formSharingService.getScoreRanges())):void this._formsService.getSingleForm(this.formId).subscribe(n=>{this.form=n.data.schema,this.form.draft=n.data.draft,this.form.id=n.data._id,this.scoreRanges=n.data.scoreCriteriaId,this.setFormDetails(this.form,this.scoreRanges)}):(this.form=this._formSharingService.get(!0),void(this.scoreRanges=this._formSharingService.getScoreRanges(!0)))}setFormDetails(n,t){this._formSharingService.set(n),this._formSharingService.setScoreRanges(t)}addNewSection(n,t="BELOW",e=new s.d){e.elements[0].scored=this.form.scored;let i="BELOW"==t?this.addNewSectionBelow(n,e):this.addNewSectionAbove(n,e);this.scrollTo(i),this._notificationsService.success(this.translatedStrings.get("FORMS.FORM_SECTION"),this.translatedStrings.get("FORMS.NEW_SECTION_ADDED"))}addNewSectionAbove(n,t){return this.form.elements.splice(n,0,t),n}addNewSectionBelow(n,t){return this.form.elements.splice(n+1,0,t),n+1}removeSection(n){1!==this.form.elements.length&&(this.form.elements.splice(n,1),this._notificationsService.warning(this.translatedStrings.get("FORMS.FORM_SECTION"),this.translatedStrings.get("FORMS.SECTION_REMOVE")))}move(n,t){if(1===this.form.elements.length||"UP"==t&&0==n||"DOWN"==t&&n==this.form.elements.length-1)return;let e=this.swap(n,"UP"==t?n-1:n+1);this.scrollTo(e)}swap(n,t){const e=JSON.parse(JSON.stringify(this.form.elements[t]));return this.form.elements[t]=JSON.parse(JSON.stringify(this.form.elements[n])),this.form.elements[n]=e,t}copySection(n){this.addNewSection(n,"DOWN",JSON.parse(JSON.stringify(this.form.elements[n])))}createRequestObject(){const n=new s.a;return n.form=this.form,n.scoreProperties=this.scoreRanges,n.createdBy="DEFAULT",n.draft=this.form.draft,n}preview(){const n=this.createRequestObject();f.formRequestHolder=n,this._formsEventLogger.formsActionEvent(this.formId,this.form.title,this.form.id?"Published":"Unpublished","preview"),this._router.navigate(["form/preview",this.form.id?this.form.id:"New form",this.form.title?this.form.title:"Empty title"])}saveDraft(){const n=this.createRequestObject();this._formValidationService.isFormValid()?this.saveOrUpdateDraft(n):this._modalService.confirm({nzTitle:this.translatedStrings.get("FORMS.SAVE_AS_DRAFT"),nzContent:this.translatedStrings.get("FORMS.INVALID_SECTION_FIELD"),nzOnOk:()=>this.saveOrUpdateDraft(n)})}saveOrUpdateDraft(n){let t;this.formId?(this._formsEventLogger.formsActionEvent(this.formId,this.form.title,"Drafts","save_to_draft"),t=this._formsService.saveDraft(n,this.formId)):(this._formsEventLogger.formsActionEvent(this.formId,this.form.title,"Drafts","save_to_draft"),t=this._formsService.insertDraft(n)),t.subscribe(()=>{this._notificationsService.success("Form","Draft saved successfully!"),this._router.navigate(["forms/drafts"])},()=>{this._notificationsService.error("Form","Something went wrong while saving the form as draft!")})}publish(){const n=this.createRequestObject();this._formValidationService.isFormValid()&&this.saveOrUpdate(n)}saveOrUpdate(n){let t;this.formId?(this._formsEventLogger.formsActionEvent(this.formId,this.form.title,"Published","update"),t=this._formsService.updateForm(n,this.formId)):(this._formsEventLogger.formsActionEvent(this.formId,this.form.title,"Unpublished","create"),t=this._formsService.insertForm(n)),t.subscribe(()=>{this._notificationsService.success("Form","Form saved successfully!"),this._router.navigate(["forms"])},n=>{n.error.message&&this._notificationsService.error("Form",n.error.message)})}scrollTo(n){let t;setTimeout(function(){t=document.getElementById(`section-${n}`),t.scrollIntoView({behavior:"smooth"}),this.selectedIndex=n},100)}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(u.b),b.Rb(d),b.Rb(g.a),b.Rb(m.a),b.Rb(p),b.Rb(S.f),b.Rb(a.g),b.Rb(h.a),b.Rb(a.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-create"]],features:[b.Ab],decls:9,vars:16,consts:[[3,"title","defaultTitle","isSearchEnabled","actionTitle","isSecondaryActionEnabled","secondaryActionTitle","action","secondaryAction"],["nz-button","","nzType","link",3,"click"],["id","saveToDrafts"],["class","container",4,"ngIf"],[1,"container"],[3,"form"],[3,"form","scoreRanges"],["nzGhost",""],[3,"nzActive","nzShowArrow","nzHeader","nzExtra","id","ngClass",4,"ngFor","ngForOf"],[1,"add-section"],["nz-button","","nzType","default","nzShape","round",3,"click"],["nz-icon","","nzType","plus"],[3,"nzActive","nzShowArrow","nzHeader","nzExtra","id","ngClass"],["p",""],[3,"section","formType","sectionIndex"],["sectionTemplate",""],["extra",""],["nz-col","","nzSpan","4","id","header"],["nz-icon","","nzType","right-circle","nzTheme","fill",2,"font-size","15px","color","#fff",3,"nzRotate"],[2,"color","#fff","padding-left","10px","margin","0px"],[4,"ngIf"],[2,"position","relative","top","40px"],[2,"display","flex"],[2,"display","flex","flex-direction","row-reverse","position","relative"],[2,"padding","5px","padding-left","10px"],["nz-button","","nz-dropdown","","nzType","text",3,"nzDropdownMenu"],["nz-icon","","nzType","more"],["menuMore","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",1,"menu-item",3,"click"],["name","insertBefore"],["nz-menu-item","",1,"menu-item",3,"nzDisabled"],["nz-icon","","nzType","vertical-align-top"],[3,"click"],["nz-icon","","nzType","vertical-align-bottom"],["nz-menu-item","",1,"menu-item"],["nz-icon","","nzType","copy","nzTheme","outline"],["color","red","name","delete"]],template:function(n,t){1&n&&(b.Xb(0,"app-header",0),b.ec("action",function(){return t.publish()})("secondaryAction",function(){return t.preview()}),b.jc(1,"translate"),b.jc(2,"translate"),b.jc(3,"translate"),b.Xb(4,"a",1),b.ec("click",function(){return t.saveDraft()}),b.Xb(5,"strong",2),b.Xc(6),b.jc(7,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Vc(8,it,13,7,"div",3)),2&n&&(b.sc("title",b.kc(1,8,"TITLE.SURVEY")),b.sc("defaultTitle",t.title),b.tc("actionTitle"," ",b.kc(2,10,"FORMS.PUBLISH")," "),b.sc("secondaryActionTitle",b.kc(3,12,"FORMS.PREVIEW")),b.rc("isSearchEnabled",!1)("isSecondaryActionEnabled",!0),b.Db(6),b.Yc(b.kc(7,14,"FORMS.SAVE_DRAFTS")),b.Db(2),b.rc("ngIf",t.form))},directives:[O.a,v.a,M.a,i.q,I,K,J.a,i.p,nn.a,tn.a,J.c,i.o,Zn,C.a,E.a,Fn.d,Fn.b,Fn.e,Vn.c,Vn.e,A.a],pipes:[T.a],styles:[".container[_ngcontent-%COMP%]{padding:50px 0 0 100px;width:80%}#header[_ngcontent-%COMP%]{background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:15px;height:75px;display:flex;position:absolute;top:0;padding:15px}h3[_ngcontent-%COMP%]{letter-spacing:2.4px;color:var(--neutral-color)}.header-actions[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font:normal normal normal 12px/14px Nunito}.header-actions[_ngcontent-%COMP%]{color:#0080e2;bottom:-65px;text-align:center;padding-right:10px;z-index:100;cursor:pointer}.add-section[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:#8a8a8a}.add-section[_ngcontent-%COMP%]:hover{color:var(--primary-color)}#saveToDrafts[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header .ant-collapse-extra{position:relative}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{padding:0;position:relative;margin-top:35px}[_nghost-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:0}[_nghost-%COMP%]     .ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding-top:0}.non-collapsed-state[_ngcontent-%COMP%]{position:relative;top:-70px}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center}.card-animation[_ngcontent-%COMP%]{-webkit-animation:mymove 2s 2;animation:mymove 2s 2;-webkit-animation-direction:alternate;animation-direction:alternate}.add-section[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}@-webkit-keyframes mymove{0%{left:0}to{left:35px}}@keyframes mymove{0%{left:0}to{left:35px}}@media screen and (orientation:portrait){.container[_ngcontent-%COMP%]{width:100%}}"]}),n})();var rt=e("i680"),ct=e("cLAn"),at=e.n(ct),lt=e("eHCX"),st=e("eKjZ");function bt(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"b"),b.Xc(2,"Score between"),b.Wb(),b.Xc(3),b.Ub()),2&n){const n=t.$implicit;b.Db(3),b.bd(" ",n.startRange,"-",n.endRange,": ",n.identification," \xa0\xa0 ")}}function dt(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"div"),b.Xb(2,"div",10),b.Xb(3,"span"),b.Xc(4),b.Wb(),b.Wb(),b.Wb(),b.Sb(5,"div",11),b.Vc(6,bt,4,3,"ng-container",9),b.Wb()),2&n){const n=b.ic();b.Db(1),b.Sc("padding-left",n.paddingPercent,"%"),b.Db(3),b.Yc(null==n.formResponse?null:n.formResponse.evaluatedScore),b.Db(2),b.rc("ngForOf",null==n.scoreProperties?null:n.scoreProperties.criterias)}}function ut(n,t){if(1&n&&(b.Xb(0,"div",12),b.Xb(1,"h5",5),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h3"),b.Xc(5),b.Wb(),b.Wb()),2&n){const n=b.ic();b.Db(2),b.Zc(" ",b.kc(3,2,"FORM.TOTAL_ASSESSMENT_SCORE")," "),b.Db(3),b.Yc(null==n.formResponse?null:n.formResponse.evaluatedScore)}}function pt(n,t){if(1&n&&(b.Xb(0,"small",16),b.Xc(1),b.Wb()),2&n){const n=b.ic().index,t=b.ic().$implicit;b.Db(1),b.ad("",n+1," of ",t.elements.length,"")}}function ft(n,t){if(1&n&&(b.Xb(0,"span",18),b.Xb(1,"b"),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Sb(4,"br"),b.Xc(5),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(2),b.Yc(b.kc(3,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function gt(n,t){if(1&n&&(b.Xb(0,"span",18),b.Xb(1,"b"),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Sb(4,"br"),b.Xc(5),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(2),b.Yc(b.kc(3,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function mt(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,ft,6,4,"span",17),b.Vc(2,gt,6,4,"span",17),b.Wb()),2&n){const n=t.$implicit,e=b.ic().$implicit,i=b.ic(2);b.Db(1),b.rc("ngIf","ASSESSMENT"!=(null==i.form?null:i.form.type)&&(n.option===(null==e?null:e.answer[0])||"PRE_FILLED"===e.type)),b.Db(1),b.rc("ngIf",(null==e?null:e.answer[0])&&"RADIO_TEXT"===n.type&&1===e.options.length&&"ASSESSMENT"!=(null==i.form?null:i.form.type))}}function ht(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function St(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function Ot(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function vt(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function Mt(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function Xt(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function Ct(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function Et(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,ht,7,4,"div",6),b.Vc(2,St,7,4,"div",6),b.Vc(3,Ot,7,4,"div",6),b.Vc(4,vt,7,4,"div",6),b.Vc(5,Mt,7,4,"div",6),b.Vc(6,Xt,7,4,"div",6),b.Vc(7,Ct,7,4,"div",6),b.Wb()),2&n){const n=t.$implicit,e=b.ic(2).$implicit;b.Db(1),b.rc("ngIf","LESS_THAN"===n.operation&&n.firstValue>e.answer),b.Db(1),b.rc("ngIf","LESS_THAN_EQUAL_TO"===n.operation&&n.firstValue>=e.answer),b.Db(1),b.rc("ngIf","GREATER_THAN_EQUAL_TO"===n.operation&&n.firstValue<=e.answer),b.Db(1),b.rc("ngIf","GREATER_THAN"===n.operation&&n.firstValue<e.answer),b.Db(1),b.rc("ngIf","BETWEEN"===n.operation&&n.firstValue<e.answer&&n.secondValue>e.answer),b.Db(1),b.rc("ngIf","EQUAL_TO"===n.operation&&n.firstValue===e.answer),b.Db(1),b.rc("ngIf","NOT_EQUAL_TO"===n.operation&&n.firstValue===e.answer)}}function zt(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,Et,8,7,"div",9),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",n.resultConditions)}}function _t(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",null==n||null==n.options[null==n?null:n.answer[0]]?null:n.options[null==n?null:n.answer[0]].score," ")}}function Dt(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"label",19),b.Xc(2),b.Wb(),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(2),b.Zc("Answer:\xa0 ",null==n?null:n.answer[0],"")}}function Tt(n,t){if(1&n&&(b.Xb(0,"span"),b.Xc(1),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.Yc(null==n||null==n.arithmeticFieldType?null:n.arithmeticFieldType.unit)}}function xt(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"h6",21),b.Xc(2),b.Vc(3,Tt,2,1,"span",6),b.Wb(),b.Ub()),2&n){const n=t.$implicit;b.Db(2),b.ad(" ",null==n?null:n.option,":\xa0 ",null==n?null:n.answer," \xa0 "),b.Db(1),b.rc("ngIf","NONE"!==(null==n||null==n.arithmeticFieldType?null:n.arithmeticFieldType.unit))}}function Rt(n,t){if(1&n&&(b.Vb(0),b.Vc(1,xt,4,3,"ng-container",9),b.Sb(2,"br"),b.Xb(3,"label",20),b.Xc(4),b.Wb(),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",null==n?null:n.options),b.Db(3),b.Zc("Result:\xa0 ",null==n?null:n.answer[0],"")}}function yt(n,t){if(1&n&&(b.Xb(0,"label",19),b.Xc(1),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(null==n?null:n.answer[0])}}function Wt(n,t){if(1&n&&(b.Xb(0,"label",19),b.Xc(1),b.jc(2,"date"),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(b.lc(2,1,null==n?null:n.answer[0],"mediumDate"))}}function Pt(n,t){if(1&n&&(b.Vb(0),b.Vc(1,yt,2,1,"label",22),b.Vc(2,Wt,3,4,"label",22),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngIf","DATE_OF_BIRTH"!=n.options[0].prefilledFieldType),b.Db(1),b.rc("ngIf","DATE_OF_BIRTH"===n.options[0].prefilledFieldType)}}function It(n,t){if(1&n&&(b.Xb(0,"label",24),b.Xc(1),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(null==n?null:n.answer[0])}}function kt(n,t){if(1&n&&(b.Xb(0,"label",24),b.Xc(1),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(null==n||null==n.options[null==n?null:n.answer[0]]?null:n.options[null==n?null:n.answer[0]].option)}}function wt(n,t){if(1&n&&(b.Vb(0),b.Vc(1,It,2,1,"label",23),b.Vc(2,kt,2,1,"label",23),b.Ub()),2&n){const n=b.ic(3);b.Db(1),b.rc("ngIf",!n.isOlderForm),b.Db(1),b.rc("ngIf",n.isOlderForm)}}function Nt(n,t){if(1&n&&(b.Xb(0,"label",19),b.Xc(1),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.Yc(n)}}function At(n,t){if(1&n&&(b.Vb(0),b.Vc(1,Nt,2,1,"label",25),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",null==n?null:n.answer)}}function Ft(n,t){if(1&n&&(b.Vb(0),b.Vc(1,pt,2,2,"small",14),b.Xb(2,"h3",15),b.Xc(3),b.Wb(),b.Vc(4,mt,3,2,"div",9),b.Vc(5,zt,2,1,"div",6),b.Vc(6,_t,7,4,"div",6),b.Sb(7,"br"),b.Vc(8,Dt,3,1,"ng-container",6),b.Vc(9,Rt,5,2,"ng-container",6),b.Vc(10,Pt,3,2,"ng-container",6),b.Vc(11,wt,3,2,"ng-container",6),b.Vc(12,At,2,1,"ng-container",6),b.Sb(13,"br"),b.Sb(14,"br"),b.Ub()),2&n){const n=t.$implicit,e=b.ic(2);b.Db(1),b.rc("ngIf","AGREEMENT"!==e.type),b.Db(2),b.Yc(null==n?null:n.title),b.Db(1),b.rc("ngForOf",n.options),b.Db(1),b.rc("ngIf","ARITHMETIC"===n.type&&"ASSESSMENT"!=(null==e.form?null:e.form.type)),b.Db(1),b.rc("ngIf",e.isOlderForm&&"ASSESSMENT"!=(null==e.form?null:e.form.type)),b.Db(2),b.rc("ngIf","INPUT"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","ARITHMETIC"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","PRE_FILLED"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","RADIO"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","CHECKBOX"===(null==n?null:n.type))}}function Vt(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"label",13),b.Xc(2),b.Wb(),b.Sb(3,"br"),b.Sb(4,"br"),b.Vc(5,Ft,15,10,"ng-container",9),b.Sb(6,"nz-divider"),b.Sb(7,"br"),b.Ub()),2&n){const n=t.$implicit;b.Db(2),b.Yc(null==n?null:n.title),b.Db(3),b.rc("ngForOf",null==n?null:n.elements)}}let Lt=(()=>{class n extends l.a{constructor(n,t,e){super(),this._formsService=n,this._formsEventLogger=t,this._activatedRoute=e,this.paddingPercent=0}ngOnInit(){const n=this._activatedRoute.snapshot.paramMap.get("id");this.fetchForm(n)}fetchForm(n){this._formsService.getSingleEvalForm(n).subscribe(t=>{this.formResponse=t.data,this.form=t.data.schema,this.scoreProperties=t.data.scoreCriteriaId,this._formsEventLogger.evaluatedFormViewEvent(n,this.formResponse.patient[0].id,this.form.title),this.calculatePaddingPercent(),"FORM"===this.formResponse.actionItem.type&&(this.isOlderForm=!0)})}calculatePaddingPercent(){if(this.scoreProperties&&this.scoreProperties.criterias.length>=1){let n=this.scoreProperties.criterias[0].startRange,t=this.scoreProperties.criterias[0].endRange;for(const e of this.scoreProperties.criterias)n=Math.min(n,e.startRange),t=Math.max(t,e.endRange);this.paddingPercent=Number(this.formResponse.evaluatedScore)/Number(t-n)*100,this.paddingPercent>96&&(this.paddingPercent=96)}}exportForm(){const n=document.getElementById("formCanvas"),t=this.formResponse.patient[0].firstName,e=this.form.title;let i,o,r;at.a.toPng(n,{bgcolor:"#fff"}).then(function(n){i=new Image,i.src=n,r=i.src,i.onload=function(){const n=i.width,c=i.height;let a;a=new rt.default(n>c?"l":"p","mm",[n,c]);const l=a.internal.pageSize.getWidth(),s=a.internal.pageSize.getHeight();a.addImage(r,"PNG",10,10,l,s),o=t+"-"+e+" assessment.pdf",a.save(o)}}).catch(function(n){console.log(n)})}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(g.a),b.Rb(h.a),b.Rb(a.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-eval-form-viewer"]],features:[b.Ab],decls:45,vars:30,consts:[["title","evalForm",3,"defaultTitle","isSearchEnabled","actionTitle","action"],[1,"container"],["id","formCanvas"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","16"],["nz-typography",""],[4,"ngIf"],["nz-col","","nzSpan","8","id","basic-info"],["id","form-score",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"triangle-down"],[1,"rcorners1"],["id","form-score"],[1,"section-title"],["class","numbering",4,"ngIf"],[1,"question"],[1,"numbering"],["class","score",4,"ngIf"],[1,"score"],[1,"answer"],[1,"answer","result"],["nz-typography","",1,"answer"],["class","answer",4,"ngIf"],["nz-radio","","class","answer",4,"ngIf"],["nz-radio","",1,"answer"],["class","answer",4,"ngFor","ngForOf"]],template:function(n,t){1&n&&(b.Xb(0,"app-header",0),b.ec("action",function(){return t.exportForm()}),b.jc(1,"translate"),b.Wb(),b.Xb(2,"div",1),b.Xb(3,"nz-card",2),b.Xb(4,"div",3),b.Xb(5,"div",4),b.Xb(6,"h1",5),b.Xc(7),b.Wb(),b.Xb(8,"h2",5),b.Xc(9),b.Wb(),b.Sb(10,"br"),b.Sb(11,"br"),b.Sb(12,"br"),b.Sb(13,"br"),b.Vc(14,dt,7,4,"div",6),b.Wb(),b.Xb(15,"div",7),b.Xb(16,"h4",5),b.Xb(17,"strong"),b.Xc(18),b.jc(19,"translate"),b.Wb(),b.Wb(),b.Xb(20,"h4",5),b.Xc(21),b.jc(22,"userAge"),b.Xb(23,"span"),b.Xc(24),b.Wb(),b.Wb(),b.Sb(25,"br"),b.Xb(26,"h4",5),b.Xb(27,"strong"),b.Xc(28),b.jc(29,"translate"),b.Wb(),b.Wb(),b.Xb(30,"h4",5),b.Xc(31),b.jc(32,"date"),b.Wb(),b.Sb(33,"br"),b.Xb(34,"h4",5),b.Xb(35,"strong"),b.Xc(36),b.jc(37,"translate"),b.Wb(),b.Wb(),b.Xb(38,"h4",5),b.Xc(39),b.Wb(),b.Sb(40,"br"),b.Vc(41,ut,6,4,"div",8),b.Wb(),b.Wb(),b.Sb(42,"nz-divider"),b.Sb(43,"br"),b.Vc(44,Vt,8,2,"ng-container",9),b.Wb(),b.Wb()),2&n&&(b.sc("defaultTitle",null==t.form?null:t.form.title),b.tc("actionTitle"," ",b.kc(1,17,"FORM.DOWNLOAD_FORM")," "),b.rc("isSearchEnabled",!1),b.Db(7),b.Yc(null==t.form?null:t.form.title),b.Db(2),b.Yc(null==t.form?null:t.form.description),b.Db(5),b.rc("ngIf","ASSESSMENT"!=(null==t.form?null:t.form.type)),b.Db(4),b.Zc("",b.kc(19,19,"PATIENT.NAME")," "),b.Db(3),b.bd(" ",null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].firstName," ",null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].lastName," | ",b.kc(22,21,null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].dateOfBirth)," years, "),b.Db(3),b.Yc(null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].gender),b.Db(4),b.Zc(" ",b.kc(29,23,"FORM.DATE_OF_SUBMISSION")," "),b.Db(3),b.Yc(b.lc(32,25,null==t.formResponse?null:t.formResponse.assessedOn,"mediumDate")),b.Db(5),b.Zc(" ",b.kc(37,28,"PATIENT.MONITORING_STAFF")," "),b.Db(3),b.Yc(null==t.formResponse?null:t.formResponse.assessedBy),b.Db(2),b.rc("ngIf","ASSESSMENT"!=(null==t.form?null:t.form.type)),b.Db(3),b.rc("ngForOf",null==t.form?null:t.form.elements))},directives:[O.a,E.a,C.c,C.a,lt.a,i.q,en.a,i.p,k.b],pipes:[T.a,st.a,i.e],styles:[".container[_ngcontent-%COMP%]{padding:50px 0 0 120px;width:75%;text-align:left;margin-left:5%}.rcorners1[_ngcontent-%COMP%]{border-radius:5px;background-image:linear-gradient(90deg,#fff,red);width:100%;height:40px;border-color:var(--light-grey);margin-bottom:15px}.score[_ngcontent-%COMP%]{float:right;margin-right:30px;font:normal normal 700 12px/16px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}.triangle-down[_ngcontent-%COMP%]{margin-top:-10px;border-color:transparent transparent #000;border-style:inset;border-width:0 16px 25px;float:left}.triangle-down[_ngcontent-%COMP%], .triangle-down[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{transform:rotate(180deg);-ms-transform:rotate(180deg);-moz-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg)}.triangle-down[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{text-align:center;color:var(--neutral-color);left:-47px;position:absolute;font-size:smaller;width:93px;height:25px;margin:0}.ant-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:20px;padding:2%}h1[_ngcontent-%COMP%]{font:normal normal 700 20px/25px Nunito}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:var(--light-black)}h2[_ngcontent-%COMP%]{font:normal normal normal 14px/16px Nunito;font-weight:400}#basic-info[_ngcontent-%COMP%]{text-transform:capitalize;font:normal normal normal 12px/16px Nunito;color:var(--light-black);text-align:right}#form-score[_ngcontent-%COMP%]{background:var(--light-black) 0 0 no-repeat padding-box;border-radius:5px;width:154px;height:80px;float:right;padding:5px 15px}h5[_ngcontent-%COMP%]{text-align:center;font:normal normal 700 12px/16px Nunito;font-weight:500}h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:var(--neutral-color)}h3[_ngcontent-%COMP%]{text-align:right;font:normal normal 700 25px/34px Nunito}[_nghost-%COMP%]     .ant-progress-inner{border-radius:5px;opacity:.6}[_nghost-%COMP%]     .ant-progress-bg, [_nghost-%COMP%]     .ant-progress-success-bg{border-radius:5px!important;height:50px!important}.section-title[_ngcontent-%COMP%]{color:var(--light-black);display:block;font-size:14pt;font:normal normal 600 16px/24px Nunito}.question[_ngcontent-%COMP%]{font:normal normal 600 16px/24px Nunito;color:var(--light-black);font-size:12pt}.numbering[_ngcontent-%COMP%], .question[_ngcontent-%COMP%]{text-align:left;letter-spacing:0;opacity:1}.numbering[_ngcontent-%COMP%]{color:var(--tertiary-color);font-size:8pt}.answer[_ngcontent-%COMP%]{text-align:left;font:normal normal 600 12px/16px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}.result[_ngcontent-%COMP%]{color:#0080ff}"]}),n})();var qt=e("pLZG"),jt=e("1G5W"),Ut=e("igu/"),$t=e("KCkQ"),Ht=e("rMZv"),Yt=e("Szod"),Bt=e("wjar"),Zt=e("t2pg");function Gt(n,t){1&n&&(b.Xb(0,"th"),b.Xc(1,"Sub Tenant"),b.Wb())}function Qt(n,t){if(1&n&&(b.Xb(0,"td"),b.Xc(1),b.jc(2,"tenantName"),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.Zc(" ",b.kc(2,1,null==n||null==n.tenantId?null:n.tenantId.id)," ")}}function Kt(n,t){1&n&&b.Sb(0,"app-icons",14)}function Jt(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",15),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic().editForm(null==t?null:t._id,null==t?null:t.draft)}),b.Wb()}}function ne(n,t){1&n&&b.Sb(0,"app-icons",16)}function te(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",17),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic().removeForm(null==t?null:t._id)}),b.Wb()}}function ee(n,t){1&n&&b.Sb(0,"app-icons",18)}function ie(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",19),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic().cloneForm(null==t?null:t._id,null==t?null:t.title)}),b.Wb()}}function oe(n,t){if(1&n){const n=b.Yb();b.Xb(0,"tr"),b.Xb(1,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id)}),b.Xb(2,"span",6),b.jc(3,"slice"),b.Xc(4),b.Wb(),b.Wb(),b.Xb(5,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id)}),b.Xc(6),b.jc(7,"titlecase"),b.Wb(),b.Xb(8,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id)}),b.Xc(9),b.Wb(),b.Vc(10,Qt,3,3,"td",3),b.Xb(11,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id)}),b.Xc(12),b.jc(13,"date"),b.Wb(),b.Xb(14,"td"),b.Xb(15,"span"),b.Vc(16,Kt,1,0,"app-icons",7),b.Vc(17,Jt,1,0,"app-icons",8),b.Wb(),b.Sb(18,"nz-divider",9),b.Xb(19,"span"),b.Vc(20,ne,1,0,"app-icons",10),b.Vc(21,te,1,0,"app-icons",11),b.Wb(),b.Sb(22,"nz-divider",9),b.Xb(23,"span"),b.Vc(24,ee,1,0,"app-icons",12),b.Vc(25,ie,1,0,"app-icons",13),b.Wb(),b.Wb(),b.Wb()}if(2&n){const n=t.$implicit;b.Db(2),b.sc("nzTooltipTitle",b.mc(3,11,null==n||null==n.schema?null:n.schema.description,0,500)),b.Db(2),b.Zc(" ",null==n?null:n.title," "),b.Db(2),b.Zc(" ","SCORED_ASSESSMENT"===(null==n?null:n.type)?"Scored Assessment":b.kc(7,15,null==n?null:n.type)," "),b.Db(3),b.Zc(" ",null!=n&&n.parentForm?"Default":(null==n?null:n.createdByUserName)||(null==n?null:n.createdBy)," "),b.Db(3),b.Zc(" ",b.lc(13,17,null==n?null:n.updatedOn,"mediumDate")," "),b.Db(4),b.rc("ngIf",null==n?null:n.parentForm),b.Db(1),b.rc("ngIf",!(null!=n&&n.parentForm)),b.Db(3),b.rc("ngIf",null==n?null:n.parentForm),b.Db(1),b.rc("ngIf",!(null!=n&&n.parentForm)),b.Db(3),b.rc("ngIf",null==n?null:n.parentForm),b.Db(1),b.rc("ngIf",!(null!=n&&n.parentForm))}}const re=function(){return{x:"1250px"}};let ce=(()=>{class n extends l.a{constructor(n,t,e,i,o,r,c,a){super(),this.router=n,this._formService=t,this._formSharingService=e,this._dataSharingService=i,this._modalService=o,this.translationService=r,this._notificationsService=c,this._formsEventLogger=a,this.page=1,this.noResult="Tap on 'Create Form' button to create a form.",this.featureConfigs=new $t.a,this.strings=new Array("FORM.DELETE_FORM_TITLE","FORM.DELETE_FORM_DESC","FORM.EDIT_FORM_TITLE","FORM.EDIT_FORM_DESC","COMMON.SURVEYFORM","FORM.CLONE_DESC"),this.formsLoaded=!0,this._routeHelperService.getSearch().pipe(Object(qt.a)(n=>null!==n),Object(jt.a)(this.unsubscribed)).subscribe(n=>this.searchValueChanged(n)),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(qt.a)(n=>!!n),Object(jt.a)(this.unsubscribed)).subscribe(()=>this.goToFormCreation()),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(qt.a)(n=>!!n),Object(jt.a)(this.unsubscribed)).subscribe(()=>this.goToDraftFormsList())}ngOnInit(){this.list=[],this.translationService.getMultiple(...this.strings).pipe(Object(jt.a)(this.unsubscribed)).subscribe(n=>this.translatedStrings=n),this._dataSharingService.featureConfigs.subscribe(n=>{n&&(this.featureConfigs=n,this.fetchForms(0))}),this._dataSharingService.onSubTenantChange().subscribe(n=>this.fetchForms(0)),this._formSharingService.set(null)}fetchForms(n){0===n&&(this.page=1),this._formService.getFormsWithBody({phq9:this.featureConfigs.phq9,gad7:this.featureConfigs.gad7,ri:this.featureConfigs.ri,covid:this.featureConfigs.covid,feveriq:this.featureConfigs.feverIq},n,10,"").subscribe(n=>{n.data.forms&&(this.count=n.data.forms.total,this.list=n.data.forms.obj,this.formsLoaded=!1)})}filter(){this.fetchForms(0)}redirectToViewer(n,t){this._formsEventLogger.formsActionEvent(n,t,"Published","View"),n&&this.router.navigateByUrl("/form/view/"+n)}getData(n){this.page=n,this.fetchForms(n-1)}goToFormCreation(){f.formRequestHolder=null,this.router.navigate(["forms/create"])}goToDraftFormsList(){this.router.navigate(["forms/drafts"])}removeForm(n,t){this._formsEventLogger.formsActionEvent(n,t,"Published","Remove"),this._modalService.create({nzTitle:this.translatedStrings.get("FORM.DELETE_FORM_TITLE"),nzContent:this.translatedStrings.get("FORM.DELETE_FORM_DESC"),nzClosable:!0,nzOnCancel:()=>{this.router.navigate(["forms"])},nzOnOk:()=>{this._formService.removeForm(n).subscribe(n=>{this.fetchForms(0),this.page=1})}})}cloneForm(n,t){this._formsEventLogger.formsActionEvent(n,t,"Published","Clone"),this._formService.cloneForm(n).subscribe(()=>{this._notificationsService.success(this.translatedStrings.get("COMMON.SURVEYFORM"),this.translatedStrings.get("FORM.CLONE_DESC").replace("{TITLE}",t)),this.fetchForms(0),this.page=1})}editForm(n,t,e){this._formsEventLogger.formsActionEvent(n,e,"Published","Edit"),this._formService.checkIfFormAlreadyAssigned(n).subscribe(e=>{e&&e.data&&this._modalService.create({nzTitle:this.translatedStrings.get("FORM.EDIT_FORM_TITLE"),nzContent:this.translatedStrings.get("FORM.EDIT_FORM_DESC"),nzOnCancel:()=>{this.router.navigate(["forms"])},nzOnOk:()=>{this.router.navigate(["/form/edit",n,t])}}),this.router.navigate(["/form/edit",n,t])})}searchValueChanged(n){void 0!==n&&this._formService.getFormsWithBody({phq9:this.featureConfigs.phq9,gad7:this.featureConfigs.gad7,ri:this.featureConfigs.ri,covid:this.featureConfigs.covid,feveriq:this.featureConfigs.feverIq},0,10,n).subscribe(t=>{this._formsEventLogger.formsSearchEvent(n,"Published"),this.count=t.data.forms.total,this.list=t.data.forms.obj})}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(a.g),b.Rb(g.a),b.Rb(d),b.Rb(Ut.a),b.Rb(S.f),b.Rb(m.a),b.Rb(u.b),b.Rb(h.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-form-new-listing"]],features:[b.Ab],decls:23,vars:26,consts:[[1,"container"],[3,"nzData","nzFrontPagination","nzShowPagination","nzTotal","nzNoResult","nzLoading","nzPageIndex","nzPageSize","nzScroll","nzPageIndexChange"],["listFormsTable",""],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],["actionable","",3,"click"],["nz-tooltip","",3,"nzTooltipTitle"],["name","edit","color","#dbdbdb","altColor","#dbdbdb",4,"ngIf"],["name","edit",3,"click",4,"ngIf"],["nzType","vertical"],["name","delete","color","#dbdbdb","altColor","#dbdbdb",4,"ngIf"],["name","delete",3,"click",4,"ngIf"],["name","clone","color","#dbdbdb","altColor","#dbdbdb",4,"ngIf"],["name","clone",3,"click",4,"ngIf"],["name","edit","color","#dbdbdb","altColor","#dbdbdb"],["name","edit",3,"click"],["name","delete","color","#dbdbdb","altColor","#dbdbdb"],["name","delete",3,"click"],["name","clone","color","#dbdbdb","altColor","#dbdbdb"],["name","clone",3,"click"]],template:function(n,t){if(1&n&&(b.Xb(0,"div",0),b.Xb(1,"nz-table",1,2),b.ec("nzPageIndexChange",function(n){return t.getData(n)}),b.Xb(3,"thead"),b.Xb(4,"tr"),b.Xb(5,"th"),b.Xc(6),b.jc(7,"translate"),b.Wb(),b.Xb(8,"th"),b.Xc(9),b.jc(10,"translate"),b.Wb(),b.Xb(11,"th"),b.Xc(12),b.jc(13,"translate"),b.Wb(),b.Vc(14,Gt,2,0,"th",3),b.Xb(15,"th"),b.Xc(16),b.jc(17,"translate"),b.Wb(),b.Xb(18,"th"),b.Xc(19),b.jc(20,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(21,"tbody"),b.Vc(22,oe,26,20,"tr",4),b.Wb(),b.Wb(),b.Wb()),2&n){const n=b.Ic(2);b.Db(1),b.rc("nzData",t.list)("nzFrontPagination",!1)("nzShowPagination",!0)("nzTotal",t.count)("nzNoResult",t.noResult)("nzLoading",t.formsLoaded)("nzPageIndex",t.page)("nzPageSize",10)("nzScroll",b.xc(25,re)),b.Db(5),b.Yc(b.kc(7,15,"COMMON.NAME")),b.Db(3),b.Yc(b.kc(10,17,"PURPOSE")),b.Db(3),b.Yc(b.kc(13,19,"CREATED_BY")),b.Db(4),b.Yc(b.kc(17,21,"LAST_EDITED")),b.Db(3),b.Yc(b.kc(20,23,"ACTIONS")),b.Db(3),b.rc("ngForOf",null==n?null:n.data)}},directives:[Ht.f,Ht.n,Ht.o,Ht.e,Ht.l,Yt.a,Ht.i,i.p,Bt.a,on.d,i.q,en.a,A.a],pipes:[T.a,i.z,i.A,i.e,Zt.a],styles:["[_nghost-%COMP%]     .ant-table-thead>tr:first-child>th:first-child{padding-left:95px}"]}),n})();class ae{}var le=e("PScX"),se=e("oyxB"),be=e("QlLE"),de=e("ZyQt");let ue=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["app-radio-text"]],inputs:{label:"label",enable:"enable",inputType:"inputType"},decls:5,vars:3,consts:[["type","radio","ng-value","color",3,"name"],["disabled","!enable","type","text","ng-model","textBoxOutput",1,"input-box"]],template:function(n,t){1&n&&(b.Xb(0,"div"),b.Sb(1,"input",0),b.Sb(2,"input",1),b.Xb(3,"label"),b.Xc(4),b.Wb(),b.Wb()),2&n&&(b.Db(1),b.sc("name",t.label),b.Eb("disabled",!!t.enable),b.Db(3),b.Zc(" ",t.label," "))},styles:[".input-box[_ngcontent-%COMP%]{border:#a9a9a9;border-radius:2pt;min-width:100px;margin-left:10px;border-style:double}"]}),n})();var pe=e("0lU3");function fe(n,t){1&n&&b.Sb(0,"nz-empty",13)}function ge(n,t){if(1&n){const n=b.Yb();b.Xb(0,"span",26),b.ec("click",function(){return b.Lc(n),b.ic(3).editForm()}),b.Xc(1),b.jc(2,"translate"),b.Sb(3,"app-icons",27),b.Wb()}2&n&&(b.Db(1),b.Zc(" ",b.kc(2,1,"COMMON.EDIT")," "))}function me(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",32),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic(4).tagClose(t)}),b.Wb()}}function he(n,t){if(1&n&&(b.Xb(0,"span"),b.Xb(1,"nz-tag",30),b.Xc(2),b.Wb(),b.Vc(3,me,1,0,"app-icons",31),b.Wb()),2&n){const n=t.$implicit,e=b.ic(4);b.Db(1),b.rc("nzColor","green"),b.Db(1),b.Yc(n),b.Db(1),b.rc("ngIf",e.tagsEnable)}}function Se(n,t){if(1&n&&(b.Xb(0,"div",28),b.Vc(1,he,4,3,"span",29),b.Wb()),2&n){const n=b.ic(3);b.Db(1),b.rc("ngForOf",n.tags)}}function Oe(n,t){if(1&n){const n=b.Yb();b.Xb(0,"div",33),b.Xb(1,"div",34),b.Xb(2,"div",35),b.Xc(3),b.Wb(),b.Xb(4,"div",36),b.Xc(5),b.Wb(),b.Xb(6,"div",37),b.Xb(7,"nz-switch",38),b.ec("ngModelChange",function(){b.Lc(n);const e=t.index;return b.ic(3).notificationPreferenceChange(e)})("ngModelChange",function(e){b.Lc(n);const i=t.index;return b.ic(3).alertPreference[i]=e}),b.Wb(),b.Wb(),b.Xb(8,"div",39),b.Xc(9),b.Wb(),b.Wb(),b.Wb()}if(2&n){const n=t.$implicit,e=t.index,i=b.ic(3);b.Db(3),b.ad("",n.startRange||n.startRange,"-",n.endRange||n.endRange,""),b.Db(2),b.Yc(n.identification),b.Db(2),b.rc("ngModel",i.alertPreference[e]),b.Db(2),b.Yc(n.description)}}function ve(n,t){if(1&n&&(b.Xb(0,"div",14),b.Vc(1,ge,4,3,"span",15),b.Sb(2,"br"),b.Xb(3,"h4",16),b.Xc(4),b.Wb(),b.Xb(5,"h3",17),b.Xc(6),b.Wb(),b.Xb(7,"h3"),b.Xb(8,"small",18),b.Xc(9),b.Wb(),b.Wb(),b.Xb(10,"div",19),b.Vc(11,Se,2,1,"div",20),b.Wb(),b.Xb(12,"div",19),b.Xb(13,"div",21),b.Xc(14),b.jc(15,"translate"),b.Wb(),b.Xb(16,"div",22),b.Xc(17),b.jc(18,"translate"),b.Wb(),b.Xb(19,"div",23),b.Xc(20),b.jc(21,"translate"),b.Wb(),b.Xb(22,"div",24),b.Xc(23),b.jc(24,"translate"),b.Wb(),b.Wb(),b.Vc(25,Oe,10,5,"div",25),b.Wb()),2&n){const n=b.ic(2);b.Db(1),b.rc("ngIf",!n.parentForm),b.Db(3),b.Yc("SCORED_ASSESSMENT"===n.type||"ASSESSMENT"===n.type&&1==n.scored?"SCORED ASSESSMENT":n.type),b.Db(2),b.Yc(n.title),b.Db(3),b.Yc(n.desc),b.Db(2),b.rc("ngIf",!n.parentForm),b.Db(3),b.Zc(" ",b.kc(15,10,"FORMS.SCORE_RANGE")," "),b.Db(3),b.Zc(" ",b.kc(18,12,"RISK_CATEGORY")," "),b.Db(3),b.Zc(" ",b.kc(21,14,"COMMON.NOTIFY_MONITORING_STAFF")," "),b.Db(3),b.Zc(" ",b.kc(24,16,"COMMON.SUGGESTED_ACTION")," "),b.Db(2),b.rc("ngForOf",n.criterias)}}function Me(n,t){if(1&n&&(b.Xb(0,"nz-tab",2),b.jc(1,"translate"),b.Vc(2,fe,1,0,"nz-empty",11),b.Xb(3,"div",3),b.Vc(4,ve,26,18,"div",12),b.Wb(),b.Wb()),2&n){const n=b.ic();b.sc("nzTitle",b.kc(1,3,"COMMON.INFORMATION")),b.Db(2),b.rc("ngIf",!n.criterias||!n.criterias.length),b.Db(2),b.rc("ngIf",n.criterias&&n.criterias.length)}}function Xe(n,t){if(1&n){const n=b.Yb();b.Xb(0,"span",40),b.ec("click",function(){return b.Lc(n),b.ic().editForm()}),b.Xc(1),b.jc(2,"translate"),b.Sb(3,"app-icons",41),b.Wb()}2&n&&(b.Db(1),b.Zc(" ",b.kc(2,1,"COMMON.EDIT")," "))}function Ce(n,t){if(1&n&&(b.Xb(0,"small",51),b.Xc(1),b.Wb()),2&n){const n=b.ic().index,t=b.ic(2).$implicit;b.Db(1),b.ad("",n+1," of ",t.elements.length,"")}}function Ee(n,t){1&n&&(b.Xb(0,"div"),b.Sb(1,"input",52),b.Wb())}function ze(n,t){1&n&&b.Sb(0,"input",56)}function _e(n,t){if(1&n&&b.Sb(0,"app-radio-text",57),2&n){const n=b.ic().$implicit;b.rc("label",n.option)("enable",!1)("inputType",n.answerType)}}function De(n,t){if(1&n&&(b.Xb(0,"label",58),b.Xc(1),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.Zc(" ",n.option," ")}}function Te(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,ze,1,0,"input",53),b.Vc(2,_e,1,3,"app-radio-text",54),b.Vc(3,De,2,1,"label",55),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.rc("ngIf","CHECKBOX"==n.type||"RADIO"==n.type),b.Db(1),b.rc("ngIf","RADIO_TEXT"==n.type),b.Db(1),b.rc("ngIf","RADIO_TEXT"!=n.type&&null!=n.type)}}function xe(n,t){if(1&n&&(b.Xb(0,"label",60),b.Xc(1),b.Sb(2,"input",61),b.Sb(3,"span",62),b.Wb()),2&n){const n=b.ic().$implicit,t=b.ic(2).$implicit;b.Db(1),b.Yc(n.option),b.Db(1),b.sc("name",t.title)}}function Re(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,xe,4,2,"label",59),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.rc("ngIf",null==n.type)}}function ye(n,t){if(1&n&&(b.Vb(0),b.Vc(1,Te,4,3,"div",29),b.Vc(2,Re,2,1,"div",29),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",n.options),b.Db(1),b.rc("ngForOf",n.options)}}function We(n,t){1&n&&b.Sb(0,"input",64)}function Pe(n,t){if(1&n&&b.Sb(0,"app-radio-text",57),2&n){const n=b.ic().$implicit;b.rc("label",n.option)("enable",!1)("inputType",n.answerType)}}function Ie(n,t){if(1&n&&(b.Xb(0,"label",58),b.Xc(1),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.Zc(" ",n.option," ")}}function ke(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,We,1,0,"input",63),b.Vc(2,Pe,1,3,"app-radio-text",54),b.Vc(3,Ie,2,1,"label",55),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.rc("ngIf","CHECKBOX"==n.type||"RADIO"==n.type),b.Db(1),b.rc("ngIf","RADIO_TEXT"==n.type),b.Db(1),b.rc("ngIf","RADIO_TEXT"!=!n.type&&null!=n.type)}}function we(n,t){if(1&n&&(b.Xb(0,"label",66),b.Xc(1),b.Sb(2,"input",67),b.Sb(3,"span",68),b.Wb()),2&n){const n=b.ic().$implicit,t=b.ic(2).$implicit;b.Db(1),b.Yc(n.option),b.Db(1),b.sc("name",t.title)}}function Ne(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,we,4,2,"label",65),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.rc("ngIf",null==n.type)}}function Ae(n,t){if(1&n&&(b.Vb(0),b.Vc(1,ke,4,3,"div",29),b.Vc(2,Ne,2,1,"div",29),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",n.options),b.Db(1),b.rc("ngForOf",n.options)}}function Fe(n,t){if(1&n&&(b.Xb(0,"div",70),b.Sb(1,"input",71),b.Xb(2,"b"),b.Xc(3),b.Wb(),b.Sb(4,"br"),b.Xc(5),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.sc("placeholder",n.option),b.Db(2),b.Yc("NONE"===n.arithmeticFieldType.unit?"":n.arithmeticFieldType.unit),b.Db(2),b.Zc(" ",n.arithmeticFieldType.arithmeticOperation," ")}}function Ve(n,t){if(1&n&&(b.Vb(0),b.Vc(1,Fe,6,3,"div",69),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",n.options)}}function Le(n,t){if(1&n&&b.Sb(0,"input",72),2&n){const n=b.ic().$implicit;b.sc("placeholder",n.options[0].prefilledFieldType)}}function qe(n,t){1&n&&(b.Sb(0,"nz-date-picker",73),b.jc(1,"translate")),2&n&&b.tc("nzPlaceHolder"," ",b.kc(1,1,"COMMON.SELECT_DATE")," ")}function je(n,t){if(1&n&&(b.Xb(0,"div",46),b.Vc(1,Ce,2,2,"small",47),b.Xb(2,"h4",48),b.Xc(3),b.Wb(),b.Vc(4,Ee,2,0,"div",43),b.Vc(5,ye,3,2,"ng-container",43),b.Vc(6,Ae,3,2,"ng-container",43),b.Vc(7,Ve,2,1,"ng-container",43),b.Vc(8,Le,1,1,"input",49),b.Vc(9,qe,2,3,"nz-date-picker",50),b.Wb()),2&n){const n=t.$implicit,e=b.ic(3);b.Db(1),b.rc("ngIf","AGREEMENT"!==e.type),b.Db(2),b.Yc(n.title),b.Db(1),b.rc("ngIf","INPUT"==n.type),b.Db(1),b.rc("ngIf","RADIO"==n.type),b.Db(1),b.rc("ngIf","CHECKBOX"==n.type),b.Db(1),b.rc("ngIf","ARITHMETIC"==n.type),b.Db(1),b.rc("ngIf","PRE_FILLED"==n.type),b.Db(1),b.rc("ngIf","DATE"==n.type)}}function Ue(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"h3",44),b.Xc(2),b.Wb(),b.Vc(3,je,10,8,"div",45),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(2),b.Yc(n.title),b.Db(1),b.rc("ngForOf",n.elements)}}function $e(n,t){if(1&n&&(b.Xb(0,"div",42),b.Vc(1,Ue,4,2,"ng-container",43),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.rc("ngIf","SECTION"===n.type)}}function He(n,t){if(1&n&&(b.Xb(0,"div",74),b.Xb(1,"div",42),b.Xb(2,"h3",44),b.Xc(3),b.Wb(),b.Xb(4,"h4",75),b.Xb(5,"small",76),b.Xc(6),b.Wb(),b.Wb(),b.Sb(7,"div",77),b.Xb(8,"div",78),b.Xb(9,"small"),b.Xc(10),b.jc(11,"translate"),b.Wb(),b.Xb(12,"p"),b.Xc(13),b.Wb(),b.Wb(),b.Xb(14,"div",79),b.Xb(15,"small"),b.Xc(16),b.jc(17,"translate"),b.Wb(),b.Xb(18,"p"),b.Xc(19),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&n){const n=b.ic();b.Db(3),b.Yc(n.footer.title),b.Db(3),b.Yc(n.footer.description),b.Db(4),b.Zc(" ",b.kc(11,6,"FORMS.ASSIGNER_SIGN")," "),b.Db(3),b.Zc(" ",n.footer.assigner,""),b.Db(3),b.Zc(" ",b.kc(17,8,"FORMS.ASSIGNEE_SIGN")," "),b.Db(3),b.Zc(" ",n.footer.assignee,"")}}let Ye=(()=>{class n extends l.a{constructor(n,t,e,i,o,r,c){super(),this._tagsService=n,this._modalService=t,this.formService=e,this.message=i,this.router=o,this.location=r,this._activatedRoute=c,this.createFormRequest=new s.a,this.criterias=[],this.tags=[],this.isDraft=!1,this.tagOptions=[],this.results=[],this.tagsEnable=!1}ngOnInit(){this.id=this._activatedRoute.snapshot.paramMap.get("id"),this.title=this._activatedRoute.snapshot.paramMap.get("name"),this.getTags(),this.id&&null!=this.title?this.previewForm():this.id&&null==this.title&&this.fetchForm(this.id)}previewForm(){const n=f.formRequestHolder;n?(this.footers=[],this.title=n.form.title,this.desc=n.form.description,this.type=n.form.type,this.scored=n.form.scored,this.tags=n.form.tags,n.form.showResultTo&&(this.results=Array.from(n.form.showResultTo)),this.sections=n.form.elements.filter(n=>"FOOTER"!==n.type),this.footer=n.form.elements.find(n=>"FOOTER"===n.type),this.createdBy=n.createdBy,this.scoreCriteriaObject=n.scoreProperties,this.criterias=this.scoreCriteriaObject?this.scoreCriteriaObject.criterias.sort((n,t)=>n.startRange-t.startRange):[],this.alertPreference=this.criterias.map(n=>n.shouldSendAlert),this.footers.length>0&&(this.footer=!0)):this.location.back()}fetchForm(n){this.formService.getSingleForm(n).subscribe(n=>{this.footers=[],this.createFormRequest.form=n.data.schema,this.createFormRequest.scoreProperties=n.data.scoreCriteriaId,this.createFormRequest.createdBy=n.data.parentForm?"Default":n.data.createdBy,this.parentForm=n.data.parentForm,this.title=n.data.schema.title,this.desc=n.data.schema.description,this.type=n.data.schema.type,this.tags=n.data.schema.tags,this.isDraft=n.data.draft,this.results=n.data.showResultTo,this.sections=n.data.schema.elements.filter(n=>"FOOTER"!==n.type),this.footer=n.data.schema.elements.find(n=>"FOOTER"===n.type),this.createdBy=n.data.parentForm?"Default":n.data.createdBy,this.scoreCriteriaObject=n.data.scoreCriteriaId,this.criterias=this.scoreCriteriaObject?this.scoreCriteriaObject.criterias.sort((n,t)=>n.startRange-t.startRange):[],this.alertPreference=this.criterias.map(n=>n.shouldSendAlert),this.footers.length>0&&(this.footer=!0)})}notificationPreferenceChange(n){this.criteriaRequest=new ae,this.criteriaRequest.title="",this.criteriaRequest.type="";let t=this.criterias;this.alertPreference[n]=!this.alertPreference[n],t[n].shouldSendAlert=this.alertPreference[n],t=t.map(n=>({description:n.description?n.description:"",identification:n.identification,endRange:n.endRange,startRange:n.startRange,notify:["CARETAKER"],shouldSendAlert:n.shouldSendAlert,_id:n._id})),this.criteriaRequest.criterias=t,this.updateFormCriteria()}updateFormCriteria(){this.formService.updateFormCriterias(this.criteriaRequest,this.id).subscribe(n=>{})}editForm(){this.parentForm?this.tagsEnable=!0:(this.formService.checkIfFormAlreadyAssigned(this.id).subscribe(n=>{n&&n.data?this._modalService.create({nzTitle:"Edit form ?",nzContent:"The changes made to this form will reflect when this form is assigned to a patient here on.",nzOnCancel:()=>{this.router.navigate(["forms"])},nzOnOk:()=>{this.router.navigate(["/form/edit",this.id,this.isDraft])}}):this.router.navigate(["/form/edit",this.id,this.isDraft])}),this.router.navigate(["/form/edit",this.id,this.isDraft]))}cancel(){this.location.back()}getTags(){this._tagsService.getALLTags("FORM").subscribe(n=>{this.suggestionTags=n.map(n=>n.name)})}tagClose(n){this.tags=this.tags.filter(t=>t!==n),null==this.tags&&(this.tags=[]),this.createFormRequest.form.tags=this.tags}updateTag(){null!=this.addedTags&&(this.createFormRequest.form.tags=Array.from(new Set(this.createFormRequest.form.tags.concat(this.addedTags)))),this.id&&this.formService.updateForm(this.createFormRequest,this.id).subscribe(n=>{this.tagsEnable=!1,this.tags=this.createFormRequest.form.tags,this.addedTags=[],this.router.navigateByUrl("/form")},n=>{this.message.info("Form save failed, "+n.error.message)})}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(X.a),b.Rb(S.f),b.Rb(g.a),b.Rb(le.e),b.Rb(a.g),b.Rb(i.l),b.Rb(a.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-form-viewer"]],features:[b.Ab],decls:18,vars:16,consts:[[3,"title","defaultTitle","isSearchEnabled","isActionEnabled"],[3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[2,"padding","20px"],[1,"form-container"],[1,"header"],["class","left-id",3,"click",4,"ngIf"],[1,"heading"],[1,"divider"],["class","section",4,"ngFor","ngForOf"],["class","form-container","style","display: flow-root;",4,"ngIf"],["style","margin-top: 100px;",4,"ngIf"],["class","form-container-white",4,"ngIf"],[2,"margin-top","100px"],[1,"form-container-white"],["actionable","","class","left-id",3,"click",4,"ngIf"],["nz-typography","",1,"sub-heading-gray"],[1,"heading-black"],[1,""],["nz-row","","nzGutter","64",1,"bold-text"],["nz-col","","nzSpan","20","class","tags-view",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-col","","nzSpan","3"],["nz-col","","nzSpan","5"],["nz-col","","nzSpan","12"],["class","scores",4,"ngFor","ngForOf"],["actionable","",1,"left-id",3,"click"],["name","edit","originalStyle","true","color","#a7c853","altColor","#707070","size","13px"],["nz-col","","nzSpan","20",1,"tags-view"],[4,"ngFor","ngForOf"],[3,"nzColor"],["name","close",3,"click",4,"ngIf"],["name","close",3,"click"],[1,"scores"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","4",1,"criteria-ops"],["nz-col","","nzSpan","3",1,"criteria-ops"],["nz-col","","nzSpan","5",1,"criteria-ops"],[3,"ngModel","ngModelChange"],["nz-col","","nzSpan","12",1,"criteria-ops"],[1,"left-id",3,"click"],["name","edit","originalStyle","true","size","13px"],[1,"section"],[4,"ngIf"],[1,"sec-title"],["class","question",4,"ngFor","ngForOf"],[1,"question"],["class","numbering",4,"ngIf"],["nz-typography","",1,"que-title"],["class","input-ans","type","text","disabled","",3,"placeholder",4,"ngIf"],[3,"nzPlaceHolder",4,"ngIf"],[1,"numbering"],["type","text","placeholder","Answer here","disabled","",1,"input-type-box"],["class","verticalMiddle","type","radio","disabled","",4,"ngIf"],[3,"label","enable","inputType",4,"ngIf"],["class","options",4,"ngIf"],["type","radio","disabled","",1,"verticalMiddle"],[3,"label","enable","inputType"],[1,"options"],["class","options","class","radio-container",4,"ngIf"],[1,"radio-container"],["type","radio","disabled","",3,"name"],[1,"checkmark"],["style","vertical-align: middle;","type","checkbox","disabled","",4,"ngIf"],["type","checkbox","disabled","",2,"vertical-align","middle"],["class","options","class","checkbox-container",4,"ngIf"],[1,"checkbox-container"],["type","checkbox","disabled","",3,"name"],[1,"checkmark-check"],["style","width: 40%;",4,"ngFor","ngForOf"],[2,"width","40%"],["type","text","disabled","",3,"placeholder"],["type","text","disabled","",1,"input-ans",3,"placeholder"],[3,"nzPlaceHolder"],[1,"form-container",2,"display","flow-root"],["nz-typography","",2,"text-align","justify","float","left"],[1,"sec-desc"],[1,"sec-divider"],[2,"float","left"],[2,"float","right"]],template:function(n,t){1&n&&(b.Sb(0,"app-header",0),b.jc(1,"translate"),b.jc(2,"translate"),b.Xb(3,"nz-tabset"),b.Vc(4,Me,5,5,"nz-tab",1),b.Xb(5,"nz-tab",2),b.jc(6,"translate"),b.Xb(7,"div",3),b.Xb(8,"div",4),b.Xb(9,"div",5),b.Vc(10,Xe,4,3,"span",6),b.Sb(11,"br"),b.Xb(12,"h3",7),b.Xc(13),b.Wb(),b.Wb(),b.Sb(14,"br"),b.Sb(15,"div",8),b.Vc(16,$e,2,1,"div",9),b.Wb(),b.Vc(17,He,20,10,"div",10),b.Wb(),b.Wb(),b.Wb()),2&n&&(b.tc("title"," ",b.kc(1,10,"FORMS.PREVIEW_FORM")," "),b.tc("defaultTitle"," ",b.kc(2,12,"FORMS.PREVIEW_FORM")," "),b.rc("isSearchEnabled",!1)("isActionEnabled",!1),b.Db(4),b.rc("ngIf",t.criterias&&t.criterias.length),b.Db(1),b.sc("nzTitle",b.kc(6,14,"FORMS.PREVIEW")),b.Db(5),b.rc("ngIf",!t.parentForm),b.Db(3),b.Yc(t.title),b.Db(3),b.rc("ngForOf",t.sections),b.Db(1),b.rc("ngIf",t.footer))},directives:[O.a,se.d,i.q,se.a,i.p,be.b,lt.a,C.c,C.a,Bt.a,A.a,de.a,w.a,c.u,c.x,ue,pe.a],pipes:[T.a],styles:['.form-container[_ngcontent-%COMP%]{top:172px;width:70%;max-width:1280px;height:auto;background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:20px;opacity:1;margin:1% auto 0 10%}.form-container-green[_ngcontent-%COMP%]{margin:1% auto 0 10%}.form-container-green[_ngcontent-%COMP%], .form-container-white[_ngcontent-%COMP%]{top:172px;width:70%;max-width:1280px;height:auto;background:#fff 0 0 no-repeat padding-box;border-radius:20px;opacity:1;padding:3%}.form-container-white[_ngcontent-%COMP%]{margin:2% auto 0 10%;color:#000}.section[_ngcontent-%COMP%]{padding:2% 5% 1%;margin:0 auto}.left-id[_ngcontent-%COMP%]{float:right;color:#707070}.left-id[_ngcontent-%COMP%]:hover{color:var(--primary-color);stroke:var(--primary-color)}.header[_ngcontent-%COMP%]{background:#fff 0 0 no-repeat padding-box;padding:5% 5% 5px;margin:5% auto 0;border-top-right-radius:20px;border-top-left-radius:20px}.heading[_ngcontent-%COMP%], .heading-black[_ngcontent-%COMP%]{top:212px;left:225px;width:auto;height:25px;text-align:left;letter-spacing:0;opacity:1;color:#000;font-size:large;font-weight:700}.sub-heading-gray[_ngcontent-%COMP%]{color:#a9a9a9}.description[_ngcontent-%COMP%]{color:#789;font-size:16px}.bold-text[_ngcontent-%COMP%]{font-weight:700;font-size:smaller}.input-ans[_ngcontent-%COMP%]{border:var(--grey);background-color:#fbfbfb;border-radius:2pt;min-width:200px;border-style:solid;color:#8a8a8a}.verticalMiddle[_ngcontent-%COMP%]{vertical-align:middle}.options[_ngcontent-%COMP%]{margin-left:5px;font:normal normal normal 13px/16px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}nz-select[_ngcontent-%COMP%]{width:100%;height:100px}.divider[_ngcontent-%COMP%]{height:1pt;background-color:var(--light-black);margin:0 5%}.sec-divider[_ngcontent-%COMP%]{height:1pt;background-color:#d3d3d3;margin-bottom:2%;margin-top:2%}.sec-title[_ngcontent-%COMP%]{font-weight:700}.question[_ngcontent-%COMP%], .scores[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.sec-desc[_ngcontent-%COMP%]{font-size:medium;text-align:justify;text-justify:inter-word}.numbering[_ngcontent-%COMP%]{text-align:left;letter-spacing:0;color:var(--tertiary-color);opacity:1;font-size:7pt}.numbering-white[_ngcontent-%COMP%]{font-weight:300!important;color:var(--light-black);margin-top:20px;font-size:7pt}.que-title[_ngcontent-%COMP%]{text-align:left;letter-spacing:0;font:normal normal 600 16px/24px Nunito;opacity:1;font-weight:700;font-size:12pt}.ans[_ngcontent-%COMP%], .que-title[_ngcontent-%COMP%]{color:var(--light-black)}.ans[_ngcontent-%COMP%]{font-size:10pt}.warning-desc[_ngcontent-%COMP%]{color:#191970;font-weight:900}.criteria-desc[_ngcontent-%COMP%]{font-weight:lighter;color:#000}.radio-container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:14px;color:#789;-webkit-user-select:none;-moz-user-select:none;user-select:none}.radio-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:18px;width:18px;background-color:#eee;border-radius:50%}.radio-container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.radio-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:var(--primary-color)}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.radio-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{top:9px;left:9px;width:8px;height:8px;border-radius:50%;background:var(--neutral-color)}.checkbox-container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:14px;color:#789;-webkit-user-select:none;-moz-user-select:none;user-select:none}.checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkbox-container-selected[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.checkbox-container-selected[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark-check[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:18px;width:18px;background-color:#eee}.checkbox-container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark-check[_ngcontent-%COMP%]{background-color:#ccc}.checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark-check[_ngcontent-%COMP%]{background-color:var(--primary-color)}.checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark-check[_ngcontent-%COMP%]:after{display:block}.checkbox-container[_ngcontent-%COMP%]   .checkmark-check[_ngcontent-%COMP%]:after{left:7px;top:3px;width:5px;height:10px;border:solid var(--neutral-color);border-width:0 3px 3px 0;transform:rotate(45deg)}.checkbox-container-selected[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark-check[_ngcontent-%COMP%]{background-color:#ccc}.checkbox-container-selected[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark-check[_ngcontent-%COMP%]{background-color:var(--primary-color)}.checkmark-check[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkbox-container-selected[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark-check[_ngcontent-%COMP%]:after{display:block}.checkbox-container-selected[_ngcontent-%COMP%]   .checkmark-check[_ngcontent-%COMP%]:after{left:9px;top:5px;width:5px;height:10px;border:solid var(--neutral-color);border-width:0 3px 3px 0;transform:rotate(45deg)}.sub-header[_ngcontent-%COMP%]{background:var(--light-black) 0 0 no-repeat padding-box}#header-title[_ngcontent-%COMP%], .sub-header[_ngcontent-%COMP%]{color:var(--neutral-color)}.tags-view[_ngcontent-%COMP%]{display:inline-block;margin:15px;background:#fbfbfb;padding:20px;border:1px solid var(--grey)}.tags-view[_ngcontent-%COMP%]   .inner-div-label[_ngcontent-%COMP%]{float:left;margin-right:10px}.tags-view[_ngcontent-%COMP%]   .inner-div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:gray;margin-left:10px}.criteria-ops[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.input-type-box[_ngcontent-%COMP%]{width:50%;height:80px;border:var(--grey);background-color:#fbfbfb;border-radius:2pt;min-width:200px;border-style:solid;color:#8a8a8a;align-items:flex-start}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}']}),n})();function Be(n,t){1&n&&b.Sb(0,"app-icons",14)}function Ze(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",15),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic().editForm(null==t?null:t._id,null==t?null:t.draft,null==t?null:t.title)}),b.Wb()}}function Ge(n,t){1&n&&b.Sb(0,"app-icons",16)}function Qe(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",17),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic().removeForm(null==t?null:t._id,null==t?null:t.title)}),b.Wb()}}function Ke(n,t){1&n&&b.Sb(0,"app-icons",18)}function Je(n,t){if(1&n){const n=b.Yb();b.Xb(0,"app-icons",19),b.ec("click",function(){b.Lc(n);const t=b.ic().$implicit;return b.ic().cloneForm(null==t?null:t._id,null==t?null:t.title)}),b.Wb()}}function ni(n,t){if(1&n){const n=b.Yb();b.Xb(0,"tr"),b.Xb(1,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id,null==e?null:e.title)}),b.Xb(2,"span",6),b.jc(3,"slice"),b.Xc(4),b.Wb(),b.Wb(),b.Xb(5,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id,null==e?null:e.title)}),b.Xc(6),b.Wb(),b.Xb(7,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id,null==e?null:e.title)}),b.Xc(8),b.Wb(),b.Xb(9,"td",5),b.ec("click",function(){b.Lc(n);const e=t.$implicit;return b.ic().redirectToViewer(null==e?null:e._id,null==e?null:e.title)}),b.Xc(10),b.jc(11,"date"),b.Wb(),b.Xb(12,"td"),b.Xb(13,"span"),b.Vc(14,Be,1,0,"app-icons",7),b.Vc(15,Ze,1,0,"app-icons",8),b.Wb(),b.Sb(16,"nz-divider",9),b.Xb(17,"span"),b.Vc(18,Ge,1,0,"app-icons",10),b.Vc(19,Qe,1,0,"app-icons",11),b.Wb(),b.Sb(20,"nz-divider",9),b.Xb(21,"span"),b.Vc(22,Ke,1,0,"app-icons",12),b.Vc(23,Je,1,0,"app-icons",13),b.Wb(),b.Wb(),b.Wb()}if(2&n){const n=t.$implicit;b.Db(2),b.sc("nzTooltipTitle",b.mc(3,11,null==n||null==n.schema?null:n.schema.description,0,500)),b.Db(2),b.Zc(" ",null==n?null:n.title," "),b.Db(2),b.Zc(" ","SCORED_ASSESSMENT"===(null==n?null:n.type)?"SCORED ASSESSMENT":null==n?null:n.type," "),b.Db(2),b.Zc(" ",null!=n&&n.parentForm?"Default":null==n?null:n.createdBy," "),b.Db(2),b.Zc(" ",b.lc(11,15,null==n?null:n.updatedOn,"mediumDate")," "),b.Db(4),b.rc("ngIf",null==n?null:n.parentForm),b.Db(1),b.rc("ngIf",!(null!=n&&n.parentForm)),b.Db(3),b.rc("ngIf",null==n?null:n.parentForm),b.Db(1),b.rc("ngIf",!(null!=n&&n.parentForm)),b.Db(3),b.rc("ngIf",null==n?null:n.parentForm),b.Db(1),b.rc("ngIf",!(null!=n&&n.parentForm))}}let ti=(()=>{class n extends l.a{constructor(n,t,e,i,o,r){super(),this.router=n,this._formService=t,this._formSharingService=e,this._modalService=i,this._notificationsService=o,this._formsEventLogger=r,this.page=1,this.noResult="No records found."}ngOnInit(){this.list=[],this.fetchForms(0),this._formSharingService.set(null)}fetchForms(n){this._formService.getDrafts(n,10,"").subscribe(n=>{this.count=n.data.forms.total,this.list=n.data.forms.obj})}redirectToViewer(n,t){this._formsEventLogger.formsActionEvent(n,t,"Draft","View"),n&&this.router.navigateByUrl("/form/view/"+n)}getData(n){this.page=n,this.fetchForms(n-1)}searchValueChanged(n){this._formService.getDrafts(0,10,n).subscribe(t=>{this._formsEventLogger.formsSearchEvent(n,"Drafts"),this.count=t.data.forms.total,this.list=t.data.forms.obj})}removeForm(n,t){this._formsEventLogger.formsActionEvent(n,t,"Draft","Remove"),this._modalService.create({nzTitle:"Delete Form?",nzContent:"Are you sure, you want to delete this form?",nzClosable:!0,nzOnCancel:()=>{},nzOnOk:()=>{this._formService.removeForm(n).subscribe(()=>{this.fetchForms(0),this.page=1})}})}cloneForm(n,t){this._formsEventLogger.formsActionEvent(n,t,"Draft","Clone"),this._formService.cloneForm(n).subscribe(()=>{this._notificationsService.success("Form",`Form (${t}) cloned successfully!`),this.fetchForms(0),this.page=1})}editForm(n,t,e){this._formsEventLogger.formsActionEvent(n,e,"Draft","Edit"),this.router.navigate(["/form/edit",n,t])}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(a.g),b.Rb(g.a),b.Rb(d),b.Rb(S.f),b.Rb(u.b),b.Rb(h.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-forms-draft"]],features:[b.Ab],decls:23,vars:25,consts:[["title","forms-draft","defaultTitle","Drafts",3,"isSearchEnabled","isActionEnabled","search"],[1,"container"],[3,"nzData","nzFrontPagination","nzShowPagination","nzTotal","nzNoResult","nzPageIndex","nzPageSize","nzPageIndexChange"],["listFormsTable",""],[4,"ngFor","ngForOf"],[3,"click"],["nz-tooltip","",3,"nzTooltipTitle"],["name","edit","color","#dbdbdb","altColor","#dbdbdb",4,"ngIf"],["name","edit",3,"click",4,"ngIf"],["nzType","vertical"],["name","delete","color","#dbdbdb","altColor","#dbdbdb",4,"ngIf"],["name","delete",3,"click",4,"ngIf"],["name","clone","color","#dbdbdb","altColor","#dbdbdb",4,"ngIf"],["name","clone",3,"click",4,"ngIf"],["name","edit","color","#dbdbdb","altColor","#dbdbdb"],["name","edit",3,"click"],["name","delete","color","#dbdbdb","altColor","#dbdbdb"],["name","delete",3,"click"],["name","clone","color","#dbdbdb","altColor","#dbdbdb"],["name","clone",3,"click"]],template:function(n,t){if(1&n&&(b.Xb(0,"app-header",0),b.ec("search",function(n){return t.searchValueChanged(n)}),b.Wb(),b.Xb(1,"div",1),b.Xb(2,"nz-table",2,3),b.ec("nzPageIndexChange",function(n){return t.getData(n)}),b.Xb(4,"thead"),b.Xb(5,"tr"),b.Xb(6,"th"),b.Xc(7),b.jc(8,"translate"),b.Wb(),b.Xb(9,"th"),b.Xc(10),b.jc(11,"translate"),b.Wb(),b.Xb(12,"th"),b.Xc(13),b.jc(14,"translate"),b.Wb(),b.Xb(15,"th"),b.Xc(16),b.jc(17,"translate"),b.Wb(),b.Xb(18,"th"),b.Xc(19),b.jc(20,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(21,"tbody"),b.Vc(22,ni,24,18,"tr",4),b.Wb(),b.Wb(),b.Wb()),2&n){const n=b.Ic(3);b.rc("isSearchEnabled",!0)("isActionEnabled",!1),b.Db(2),b.rc("nzData",t.list)("nzFrontPagination",!1)("nzShowPagination",!0)("nzTotal",t.count)("nzNoResult",t.noResult)("nzPageIndex",t.page)("nzPageSize",10),b.Db(5),b.Yc(b.kc(8,15,"COMMON.NAME")),b.Db(3),b.Yc(b.kc(11,17,"PURPOSE")),b.Db(3),b.Yc(b.kc(14,19,"CREATED_BY")),b.Db(3),b.Yc(b.kc(17,21,"LAST_EDITED")),b.Db(3),b.Yc(b.kc(20,23,"ACTIONS")),b.Db(3),b.rc("ngForOf",null==n?null:n.data)}},directives:[O.a,Ht.f,Ht.n,Ht.o,Ht.e,Ht.l,Ht.i,i.p,on.d,i.q,en.a,A.a],pipes:[T.a,i.z,i.e],styles:[""]}),n})();function ei(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"b"),b.Xc(2,"Score between"),b.Wb(),b.Xc(3),b.Ub()),2&n){const n=t.$implicit;b.Db(3),b.bd(" ",n.startRange,"-",n.endRange,": ",n.identification," \xa0\xa0 ")}}function ii(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"div"),b.Xb(2,"div",10),b.Xb(3,"span"),b.Xc(4),b.Wb(),b.Wb(),b.Wb(),b.Sb(5,"div",11),b.Vc(6,ei,4,3,"ng-container",9),b.Wb()),2&n){const n=b.ic();b.Db(1),b.Sc("padding-left",n.paddingPercent,"%"),b.Db(3),b.Yc(null==n.formResponse?null:n.formResponse.evaluatedScore),b.Db(2),b.rc("ngForOf",null==n.scoreProperties?null:n.scoreProperties.criterias)}}function oi(n,t){if(1&n&&(b.Xb(0,"div",12),b.Xb(1,"h5",5),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h3"),b.Xc(5),b.Wb(),b.Wb()),2&n){const n=b.ic();b.Db(2),b.Zc(" ",b.kc(3,2,"FORM.TOTAL_ASSESSMENT_SCORE")," "),b.Db(3),b.Yc(null==n.formResponse?null:n.formResponse.evaluatedScore)}}function ri(n,t){if(1&n&&(b.Xb(0,"small",16),b.Xc(1),b.Wb()),2&n){const n=b.ic().index,t=b.ic().$implicit;b.Db(1),b.ad("",n+1," of ",t.elements.length,"")}}function ci(n,t){if(1&n&&(b.Xb(0,"span",18),b.Xb(1,"b"),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Sb(4,"br"),b.Xc(5),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(2),b.Yc(b.kc(3,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function ai(n,t){if(1&n&&(b.Xb(0,"span",18),b.Xb(1,"b"),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Sb(4,"br"),b.Xc(5),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(2),b.Yc(b.kc(3,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function li(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,ci,6,4,"span",17),b.Vc(2,ai,6,4,"span",17),b.Wb()),2&n){const n=t.$implicit,e=b.ic().$implicit,i=b.ic(2);b.Db(1),b.rc("ngIf","SCORED_ASSESSMENT"==(null==i.form?null:i.form.type)&&(n.option===(null==e?null:e.answer[0])||"PRE_FILLED"===e.type)),b.Db(1),b.rc("ngIf",(null==e?null:e.answer[0])&&"RADIO_TEXT"===n.type&&1===e.options.length&&"ASSESSMENT"!=(null==i.form?null:i.form.type))}}function si(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function bi(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function di(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function ui(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function pi(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function fi(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function gi(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",n.score," ")}}function mi(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,si,7,4,"div",6),b.Vc(2,bi,7,4,"div",6),b.Vc(3,di,7,4,"div",6),b.Vc(4,ui,7,4,"div",6),b.Vc(5,pi,7,4,"div",6),b.Vc(6,fi,7,4,"div",6),b.Vc(7,gi,7,4,"div",6),b.Wb()),2&n){const n=t.$implicit,e=b.ic(2).$implicit;b.Db(1),b.rc("ngIf","LESS_THAN"===n.operation&&n.firstValue>e.answer),b.Db(1),b.rc("ngIf","LESS_THAN_EQUAL_TO"===n.operation&&n.firstValue>=e.answer),b.Db(1),b.rc("ngIf","GREATER_THAN_EQUAL_TO"===n.operation&&n.firstValue<=e.answer),b.Db(1),b.rc("ngIf","GREATER_THAN"===n.operation&&n.firstValue<e.answer),b.Db(1),b.rc("ngIf","BETWEEN"===n.operation&&n.firstValue<e.answer&&n.secondValue>e.answer),b.Db(1),b.rc("ngIf","EQUAL_TO"===n.operation&&n.firstValue===e.answer),b.Db(1),b.rc("ngIf","NOT_EQUAL_TO"===n.operation&&n.firstValue===e.answer)}}function hi(n,t){if(1&n&&(b.Xb(0,"div"),b.Vc(1,mi,8,7,"div",9),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",n.resultConditions)}}function Si(n,t){if(1&n&&(b.Xb(0,"div"),b.Xb(1,"span",18),b.Xb(2,"b"),b.Xc(3),b.jc(4,"translate"),b.Wb(),b.Sb(5,"br"),b.Xc(6),b.Wb(),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(3),b.Yc(b.kc(4,2,"SCORE")),b.Db(3),b.Zc("\xa0\xa0 ",null==n||null==n.options[null==n?null:n.answer[0]]?null:n.options[null==n?null:n.answer[0]].score," ")}}function Oi(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"label",19),b.Xc(2),b.Wb(),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(2),b.Zc("Answer:\xa0 ",null==n?null:n.answer[0],"")}}function vi(n,t){if(1&n&&(b.Xb(0,"span"),b.Xc(1),b.Wb()),2&n){const n=b.ic().$implicit;b.Db(1),b.Yc(null==n||null==n.arithmeticFieldType?null:n.arithmeticFieldType.unit)}}function Mi(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"h6",21),b.Xc(2),b.Vc(3,vi,2,1,"span",6),b.Wb(),b.Ub()),2&n){const n=t.$implicit;b.Db(2),b.ad(" ",null==n?null:n.option,":\xa0 ",null==n?null:n.answer," \xa0 "),b.Db(1),b.rc("ngIf","NONE"!==(null==n||null==n.arithmeticFieldType?null:n.arithmeticFieldType.unit))}}function Xi(n,t){if(1&n&&(b.Vb(0),b.Vc(1,Mi,4,3,"ng-container",9),b.Sb(2,"br"),b.Xb(3,"label",20),b.Xc(4),b.Wb(),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",null==n?null:n.options),b.Db(3),b.Zc("Result:\xa0 ",null==n?null:n.answer[0],"")}}function Ci(n,t){if(1&n&&(b.Xb(0,"label",19),b.Xc(1),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(null==n?null:n.answer[0])}}function Ei(n,t){if(1&n&&(b.Xb(0,"label",19),b.Xc(1),b.jc(2,"date"),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(b.lc(2,1,null==n?null:n.answer[0],"mediumDate"))}}function zi(n,t){if(1&n&&(b.Vb(0),b.Vc(1,Ci,2,1,"label",22),b.Vc(2,Ei,3,4,"label",22),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngIf","DATE_OF_BIRTH"!=n.options[0].prefilledFieldType),b.Db(1),b.rc("ngIf","DATE_OF_BIRTH"===n.options[0].prefilledFieldType)}}function _i(n,t){if(1&n&&(b.Xb(0,"label",24),b.Xc(1),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(null==n?null:n.answer[0])}}function Di(n,t){if(1&n&&(b.Xb(0,"label",24),b.Xc(1),b.Wb()),2&n){const n=b.ic(2).$implicit;b.Db(1),b.Yc(null==n||null==n.options[null==n?null:n.answer[0]]?null:n.options[null==n?null:n.answer[0]].option)}}function Ti(n,t){if(1&n&&(b.Vb(0),b.Vc(1,_i,2,1,"label",23),b.Vc(2,Di,2,1,"label",23),b.Ub()),2&n){const n=b.ic(3);b.Db(1),b.rc("ngIf",!n.isOlderForm),b.Db(1),b.rc("ngIf",n.isOlderForm)}}function xi(n,t){if(1&n&&(b.Xb(0,"label",19),b.Xc(1),b.Wb()),2&n){const n=t.$implicit;b.Db(1),b.Yc(n)}}function Ri(n,t){if(1&n&&(b.Vb(0),b.Vc(1,xi,2,1,"label",25),b.Ub()),2&n){const n=b.ic().$implicit;b.Db(1),b.rc("ngForOf",null==n?null:n.answer)}}function yi(n,t){if(1&n&&(b.Vb(0),b.Vc(1,ri,2,2,"small",14),b.Xb(2,"h3",15),b.Xc(3),b.Wb(),b.Vc(4,li,3,2,"div",9),b.Vc(5,hi,2,1,"div",6),b.Vc(6,Si,7,4,"div",6),b.Sb(7,"br"),b.Vc(8,Oi,3,1,"ng-container",6),b.Vc(9,Xi,5,2,"ng-container",6),b.Vc(10,zi,3,2,"ng-container",6),b.Vc(11,Ti,3,2,"ng-container",6),b.Vc(12,Ri,2,1,"ng-container",6),b.Sb(13,"br"),b.Sb(14,"br"),b.Ub()),2&n){const n=t.$implicit,e=b.ic(2);b.Db(1),b.rc("ngIf","AGREEMENT"!==e.type),b.Db(2),b.Yc(null==n?null:n.title),b.Db(1),b.rc("ngForOf",n.options),b.Db(1),b.rc("ngIf","ARITHMETIC"===n.type&&"ASSESSMENT"!=(null==e.form?null:e.form.type)),b.Db(1),b.rc("ngIf",e.isOlderForm&&"ASSESSMENT"!=(null==e.form?null:e.form.type)),b.Db(2),b.rc("ngIf","INPUT"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","ARITHMETIC"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","PRE_FILLED"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","RADIO"===(null==n?null:n.type)),b.Db(1),b.rc("ngIf","CHECKBOX"===(null==n?null:n.type))}}function Wi(n,t){if(1&n&&(b.Vb(0),b.Xb(1,"label",13),b.Xc(2),b.Wb(),b.Sb(3,"br"),b.Sb(4,"br"),b.Vc(5,yi,15,10,"ng-container",9),b.Sb(6,"nz-divider"),b.Sb(7,"br"),b.Ub()),2&n){const n=t.$implicit;b.Db(2),b.Yc(null==n?null:n.title),b.Db(3),b.rc("ngForOf",null==n?null:n.elements)}}const Pi=[{path:"",component:ce,data:{header:!0,title:"TITLE.SURVEY",searchEnabled:!0,feature:"FORMS",primaryAction:{title:"Create Form",permissions:[],feature:"FORMS.FORM_BUILDER",enabled:!0},secondaryAction:{title:"Drafts",permissions:[],enabled:!0},multiAction:{}}},{path:"evalforms/view/:id",component:Lt},{path:"directevalforms/view/:id",component:(()=>{class n extends l.a{constructor(n,t,e){super(),this._formsService=n,this._formsEventLogger=t,this._activatedRoute=e,this.paddingPercent=0}ngOnInit(){const n=this._activatedRoute.snapshot.paramMap.get("id");this.fetchForm(n)}fetchForm(n){this._formsService.getDirectEvalFormDetails(n).subscribe(t=>{this.formResponse=t.data,this.form=t.data.schema,this.scoreProperties=t.data.scoreCriteriaId,this._formsEventLogger.evaluatedFormViewEvent(n,this.formResponse.patient[0].id,this.form.title),this.calculatePaddingPercent()})}calculatePaddingPercent(){if(this.scoreProperties&&this.scoreProperties.criterias.length>=1){let n=this.scoreProperties.criterias[0].startRange,t=this.scoreProperties.criterias[0].endRange;for(const e of this.scoreProperties.criterias)n=Math.min(n,e.startRange),t=Math.max(t,e.endRange);this.paddingPercent=Number(this.formResponse.evaluatedScore)/Number(t-n)*100,this.paddingPercent>96&&(this.paddingPercent=96)}}exportForm(){const n=document.getElementById("formCanvas"),t=this.formResponse.patient[0].firstName,e=this.form.title;let i,o,r;at.a.toPng(n,{bgcolor:"#fff"}).then(function(n){i=new Image,i.src=n,r=i.src,i.onload=function(){const n=i.width,c=i.height;let a;a=new rt.default(n>c?"l":"p","mm",[n,c]);const l=a.internal.pageSize.getWidth(),s=a.internal.pageSize.getHeight();a.addImage(r,"PNG",10,10,l,s),o=t+"-"+e+" assessment.pdf",a.save(o)}}).catch(function(n){console.log(n)})}}return n.\u0275fac=function(t){return new(t||n)(b.Rb(g.a),b.Rb(h.a),b.Rb(a.a))},n.\u0275cmp=b.Lb({type:n,selectors:[["app-direct-eval-form-viewer"]],features:[b.Ab],decls:45,vars:30,consts:[["title","evalForm",3,"defaultTitle","isSearchEnabled","actionTitle","action"],[1,"container"],["id","formCanvas"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","16"],["nz-typography",""],[4,"ngIf"],["nz-col","","nzSpan","8","id","basic-info"],["id","form-score",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"triangle-down"],[1,"rcorners1"],["id","form-score"],[1,"section-title"],["class","numbering",4,"ngIf"],[1,"question"],[1,"numbering"],["class","score",4,"ngIf"],[1,"score"],[1,"answer"],[1,"answer","result"],["nz-typography","",1,"answer"],["class","answer",4,"ngIf"],["nz-radio","","class","answer",4,"ngIf"],["nz-radio","",1,"answer"],["class","answer",4,"ngFor","ngForOf"]],template:function(n,t){1&n&&(b.Xb(0,"app-header",0),b.ec("action",function(){return t.exportForm()}),b.jc(1,"translate"),b.Wb(),b.Xb(2,"div",1),b.Xb(3,"nz-card",2),b.Xb(4,"div",3),b.Xb(5,"div",4),b.Xb(6,"h1",5),b.Xc(7),b.Wb(),b.Xb(8,"h2",5),b.Xc(9),b.Wb(),b.Sb(10,"br"),b.Sb(11,"br"),b.Sb(12,"br"),b.Sb(13,"br"),b.Vc(14,ii,7,4,"div",6),b.Wb(),b.Xb(15,"div",7),b.Xb(16,"h4",5),b.Xb(17,"strong"),b.Xc(18),b.jc(19,"translate"),b.Wb(),b.Wb(),b.Xb(20,"h4",5),b.Xc(21),b.jc(22,"userAge"),b.Xb(23,"span"),b.Xc(24),b.Wb(),b.Wb(),b.Sb(25,"br"),b.Xb(26,"h4",5),b.Xb(27,"strong"),b.Xc(28),b.jc(29,"translate"),b.Wb(),b.Wb(),b.Xb(30,"h4",5),b.Xc(31),b.jc(32,"date"),b.Wb(),b.Sb(33,"br"),b.Xb(34,"h4",5),b.Xb(35,"strong"),b.Xc(36),b.jc(37,"translate"),b.Wb(),b.Wb(),b.Xb(38,"h4",5),b.Xc(39),b.Wb(),b.Sb(40,"br"),b.Vc(41,oi,6,4,"div",8),b.Wb(),b.Wb(),b.Sb(42,"nz-divider"),b.Sb(43,"br"),b.Vc(44,Wi,8,2,"ng-container",9),b.Wb(),b.Wb()),2&n&&(b.sc("defaultTitle",null==t.form?null:t.form.title),b.tc("actionTitle"," ",b.kc(1,17,"FORM.DOWNLOAD_FORM")," "),b.rc("isSearchEnabled",!1),b.Db(7),b.Yc(null==t.form?null:t.form.title),b.Db(2),b.Yc(null==t.form?null:t.form.description),b.Db(5),b.rc("ngIf","SCORED_ASSESSMENT"==(null==t.form?null:t.form.type)),b.Db(4),b.Zc("",b.kc(19,19,"PATIENT.NAME")," "),b.Db(3),b.bd(" ",null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].firstName," ",null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].lastName," | ",b.kc(22,21,null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].dateOfBirth)," years, "),b.Db(3),b.Yc(null==t.formResponse||null==t.formResponse.patient[0]?null:t.formResponse.patient[0].gender),b.Db(4),b.Zc(" ",b.kc(29,23,"FORM.DATE_OF_SUBMISSION")," "),b.Db(3),b.Yc(b.lc(32,25,null==t.formResponse?null:t.formResponse.assessedOn,"mediumDate")),b.Db(5),b.Zc(" ",b.kc(37,28,"PATIENT.MONITORING_STAFF")," "),b.Db(3),b.Yc(null==t.formResponse?null:t.formResponse.assessedBy),b.Db(2),b.rc("ngIf","SCORED_ASSESSMENT"==(null==t.form?null:t.form.type)),b.Db(3),b.rc("ngForOf",null==t.form?null:t.form.elements))},directives:[O.a,E.a,C.c,C.a,lt.a,i.q,en.a,i.p,k.b],pipes:[T.a,st.a,i.e],styles:[".container[_ngcontent-%COMP%]{padding:50px 0 0 120px;width:75%;text-align:left;margin-left:5%}.rcorners1[_ngcontent-%COMP%]{border-radius:5px;background-image:linear-gradient(90deg,#fff,red);width:100%;height:40px;border-color:var(--light-grey);margin-bottom:15px}.score[_ngcontent-%COMP%]{float:right;margin-right:30px;font:normal normal 700 12px/16px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}.triangle-down[_ngcontent-%COMP%]{margin-top:-10px;border-color:transparent transparent #000;border-style:inset;border-width:0 16px 25px;float:left}.triangle-down[_ngcontent-%COMP%], .triangle-down[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{transform:rotate(180deg);-ms-transform:rotate(180deg);-moz-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg)}.triangle-down[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{text-align:center;color:var(--neutral-color);left:-47px;position:absolute;font-size:smaller;width:93px;height:25px;margin:0}.ant-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:20px;padding:2%}h1[_ngcontent-%COMP%]{font:normal normal 700 20px/25px Nunito}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:var(--light-black)}h2[_ngcontent-%COMP%]{font:normal normal normal 14px/16px Nunito;font-weight:400}#basic-info[_ngcontent-%COMP%]{text-transform:capitalize;font:normal normal normal 12px/16px Nunito;color:var(--light-black);text-align:right}#form-score[_ngcontent-%COMP%]{background:var(--light-black) 0 0 no-repeat padding-box;border-radius:5px;width:154px;height:80px;float:right;padding:5px 15px}h5[_ngcontent-%COMP%]{text-align:center;font:normal normal 700 12px/16px Nunito;font-weight:500}h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:var(--neutral-color)}h3[_ngcontent-%COMP%]{text-align:right;font:normal normal 700 25px/34px Nunito}[_nghost-%COMP%]     .ant-progress-inner{border-radius:5px;opacity:.6}[_nghost-%COMP%]     .ant-progress-bg, [_nghost-%COMP%]     .ant-progress-success-bg{border-radius:5px!important;height:50px!important}.section-title[_ngcontent-%COMP%]{color:var(--light-black);display:block;font-size:14pt;font:normal normal 600 16px/24px Nunito}.question[_ngcontent-%COMP%]{font:normal normal 600 16px/24px Nunito;color:var(--light-black);font-size:12pt}.numbering[_ngcontent-%COMP%], .question[_ngcontent-%COMP%]{text-align:left;letter-spacing:0;opacity:1}.numbering[_ngcontent-%COMP%]{color:var(--tertiary-color);font-size:8pt}.answer[_ngcontent-%COMP%]{text-align:left;font:normal normal 600 12px/16px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}.result[_ngcontent-%COMP%]{color:#0080ff}"]}),n})()},{path:"view/:id",component:Ye},{path:"preview/:id/:name",component:Ye},{path:"edit/:id/:draft",component:ot},{path:"create",component:ot},{path:"drafts",component:ti}];let Ii=(()=>{class n{}return n.\u0275mod=b.Pb({type:n}),n.\u0275inj=b.Ob({factory:function(t){return new(t||n)},imports:[[a.k.forChild(Pi)],a.k]}),n})();var ki=e("SHZf");let wi=(()=>{class n{constructor(n){this.translationService=n,n.setLanguage()}}return n.\u0275mod=b.Pb({type:n}),n.\u0275inj=b.Ob({factory:function(t){return new(t||n)(b.bc(m.a))},imports:[[i.c,o.a,r.a,c.o,Ii,ki.a.forRoot()]]}),n})()},cLAn:function(n,t,e){!function(t){"use strict";var e=function(){return{escape:function(n){return n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(n){var e;return(e="application/font-woff",{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[t(n).toLowerCase()]||""},dataAsUrl:function(n,t){return"data:"+t+";base64,"+n},isDataUrl:function(n){return-1!==n.search(/^(data:)/)},canvasToBlob:function(n){return n.toBlob?new Promise(function(t){n.toBlob(t)}):function(n){return new Promise(function(t){for(var e=window.atob(n.toDataURL().split(",")[1]),i=e.length,o=new Uint8Array(i),r=0;r<i;r++)o[r]=e.charCodeAt(r);t(new Blob([o],{type:"image/png"}))})}(n)},resolveUrl:function(n,t){var e=document.implementation.createHTMLDocument(),i=e.createElement("base");e.head.appendChild(i);var o=e.createElement("a");return e.body.appendChild(o),i.href=t,o.href=n,o.href},getAndEncode:function(n){return c.impl.options.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+(new Date).getTime()),new Promise(function(t){var e,i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var o=new FileReader;o.onloadend=function(){var n=o.result.split(/,/)[1];t(n)},o.readAsDataURL(i.response)}else e?t(e):r("cannot fetch resource: "+n+", status: "+i.status)},i.ontimeout=function(){e?t(e):r("timeout of 30000ms occured while fetching resource: "+n)},i.responseType="blob",i.timeout=3e4,i.open("GET",n,!0),i.send(),c.impl.options.imagePlaceholder){var o=c.impl.options.imagePlaceholder.split(/,/);o&&o[1]&&(e=o[1])}function r(n){console.error(n),t("")}})},uid:(n=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+n++}),delay:function(n){return function(t){return new Promise(function(e){setTimeout(function(){e(t)},n)})}},asArray:function(n){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t},escapeXhtml:function(n){return n.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(n){return new Promise(function(t,e){var i=new Image;i.onload=function(){t(i)},i.onerror=e,i.src=n})},width:function(n){var t=e(n,"border-left-width"),i=e(n,"border-right-width");return n.scrollWidth+t+i},height:function(n){var t=e(n,"border-top-width"),i=e(n,"border-bottom-width");return n.scrollHeight+t+i}};var n;function t(n){var t=/\.([^\.\/]*?)$/g.exec(n);return t?t[1]:""}function e(n,t){var e=window.getComputedStyle(n).getPropertyValue(t);return parseFloat(e.replace("px",""))}}(),i=function(){var n=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(n,e,r){return t(n)?Promise.resolve(n).then(i).then(function(t){var i=Promise.resolve(n);return t.forEach(function(n){i=i.then(function(t){return o(t,n,e,r)})}),i}):Promise.resolve(n)},shouldProcess:t,impl:{readUrls:i,inline:o}};function t(t){return-1!==t.search(n)}function i(t){for(var i,o=[];null!==(i=n.exec(t));)o.push(i[1]);return o.filter(function(n){return!e.isDataUrl(n)})}function o(n,t,i,o){return Promise.resolve(t).then(function(n){return i?e.resolveUrl(n,i):n}).then(o||e.getAndEncode).then(function(n){return e.dataAsUrl(n,e.mimeType(t))}).then(function(i){return n.replace(function(n){return new RegExp("(url\\(['\"]?)("+e.escape(n)+")(['\"]?\\))","g")}(t),"$1"+i+"$3")})}}(),o=function(){return{resolveAll:function(){return n(document).then(function(n){return Promise.all(n.map(function(n){return n.resolve()}))}).then(function(n){return n.join("\n")})},impl:{readAll:n}};function n(){return Promise.resolve(e.asArray(document.styleSheets)).then(function(n){var t=[];return n.forEach(function(n){try{e.asArray(n.cssRules||[]).forEach(t.push.bind(t))}catch(i){console.log("Error while reading CSS rules from "+n.href,i.toString())}}),t}).then(function(n){return n.filter(function(n){return n.type===CSSRule.FONT_FACE_RULE}).filter(function(n){return i.shouldProcess(n.style.getPropertyValue("src"))})}).then(function(t){return t.map(n)});function n(n){return{resolve:function(){return i.inlineAll(n.cssText,(n.parentStyleSheet||{}).href)},src:function(){return n.style.getPropertyValue("src")}}}}}(),r=function(){return{inlineAll:function t(o){return o instanceof Element?function(n){var t=n.style.getPropertyValue("background");return t?i.inlineAll(t).then(function(t){n.style.setProperty("background",t,n.style.getPropertyPriority("background"))}).then(function(){return n}):Promise.resolve(n)}(o).then(function(){return o instanceof HTMLImageElement?n(o).inline():Promise.all(e.asArray(o.childNodes).map(function(n){return t(n)}))}):Promise.resolve(o)},impl:{newImage:n}};function n(n){return{inline:function(t){return e.isDataUrl(n.src)?Promise.resolve():Promise.resolve(n.src).then(t||e.getAndEncode).then(function(t){return e.dataAsUrl(t,e.mimeType(n.src))}).then(function(t){return new Promise(function(e,i){n.onload=e,n.onerror=i,n.src=t})})}}}}(),c={toSvg:a,toPng:function(n,t){return l(n,t||{}).then(function(n){return n.toDataURL()})},toJpeg:function(n,t){return l(n,t=t||{}).then(function(n){return n.toDataURL("image/jpeg",t.quality||1)})},toBlob:function(n,t){return l(n,t||{}).then(e.canvasToBlob)},toPixelData:function(n,t){return l(n,t||{}).then(function(t){return t.getContext("2d").getImageData(0,0,e.width(n),e.height(n)).data})},impl:{fontFaces:o,images:r,util:e,inliner:i,options:{}}};function a(n,t){return function(n){c.impl.options.imagePlaceholder=void 0===n.imagePlaceholder?undefined:n.imagePlaceholder,c.impl.options.cacheBust=void 0!==n.cacheBust&&n.cacheBust}(t=t||{}),Promise.resolve(n).then(function(n){return s(n,t.filter,!0)}).then(b).then(d).then(function(n){return t.bgcolor&&(n.style.backgroundColor=t.bgcolor),t.width&&(n.style.width=t.width+"px"),t.height&&(n.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach(function(e){n.style[e]=t.style[e]}),n}).then(function(i){return function(n,t,i){return Promise.resolve(n).then(function(n){return n.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(n)}).then(e.escapeXhtml).then(function(n){return'<foreignObject x="0" y="0" width="100%" height="100%">'+n+"</foreignObject>"}).then(function(n){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+i+'">'+n+"</svg>"}).then(function(n){return"data:image/svg+xml;charset=utf-8,"+n})}(i,t.width||e.width(n),t.height||e.height(n))})}function l(n,t){return a(n,t).then(e.makeImage).then(e.delay(100)).then(function(i){var o=function(n){var i=document.createElement("canvas");if(i.width=t.width||e.width(n),i.height=t.height||e.height(n),t.bgcolor){var o=i.getContext("2d");o.fillStyle=t.bgcolor,o.fillRect(0,0,i.width,i.height)}return i}(n);return o.getContext("2d").drawImage(i,0,0),o})}function s(n,t,i){return i||!t||t(n)?Promise.resolve(n).then(function(n){return n instanceof HTMLCanvasElement?e.makeImage(n.toDataURL()):n.cloneNode(!1)}).then(function(i){return function(n,t,i){var o=n.childNodes;return 0===o.length?Promise.resolve(t):function(n,t,e){var i=Promise.resolve();return t.forEach(function(t){i=i.then(function(){return s(t,e)}).then(function(t){t&&n.appendChild(t)})}),i}(t,e.asArray(o),i).then(function(){return t})}(n,i,t)}).then(function(t){return function(n,t){return t instanceof Element?Promise.resolve().then(function(){var i,o;i=window.getComputedStyle(n),o=t.style,i.cssText?o.cssText=i.cssText:function(n,t){e.asArray(n).forEach(function(e){t.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))})}(i,o)}).then(function(){[":before",":after"].forEach(function(i){!function(i){var o=window.getComputedStyle(n,i),r=o.getPropertyValue("content");if(""!==r&&"none"!==r){var c=e.uid();t.className=t.className+" "+c;var a=document.createElement("style");a.appendChild(function(n,t,i){var o="."+n+":"+t,r=i.cssText?function(n){var t=n.getPropertyValue("content");return n.cssText+" content: "+t+";"}(i):function(n){return e.asArray(n).map(function(t){return t+": "+n.getPropertyValue(t)+(n.getPropertyPriority(t)?" !important":"")}).join("; ")+";"}(i);return document.createTextNode(o+"{"+r+"}")}(c,i,o)),t.appendChild(a)}}(i)})}).then(function(){n instanceof HTMLTextAreaElement&&(t.innerHTML=n.value),n instanceof HTMLInputElement&&t.setAttribute("value",n.value)}).then(function(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach(function(n){var e=t.getAttribute(n);e&&t.style.setProperty(n,e)}))}).then(function(){return t}):t}(n,t)}):Promise.resolve()}function b(n){return o.resolveAll().then(function(t){var e=document.createElement("style");return n.appendChild(e),e.appendChild(document.createTextNode(t)),n})}function d(n){return r.inlineAll(n).then(function(){return n})}n.exports=c}()}}]);