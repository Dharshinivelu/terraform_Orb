(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{D4zX:function(e,t,n){"use strict";n.r(t),n.d(t,"LeadsModule",function(){return Ql});var i=n("bKRa"),o=n("ofXK"),a=n("3Pt+"),l=n("tyNb"),c=n("T5gh"),r=n("qQcL"),s=n("VGjC"),d=n("IVUT");class b{constructor(){this.personInfo=new u,this.patientInfo=new u}}class u{}var p=n("AytR"),h=n("WoUL"),g=n("yob6"),m=n("fXoL"),f=n("bNXi"),v=n("ocnv"),C=n("S5rh"),z=n("B+r4"),S=n("PTRe"),I=n("EGpF"),X=n("dRHE");function y(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",25),m.Xb(1,"strong",4),m.Xc(2),m.jc(3,"translate"),m.Wb(),m.Xb(4,"div",5),m.Xb(5,"nz-form-item",6),m.Xb(6,"nz-form-control"),m.Xb(7,"input",26),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().lead.patientInfo.firstName=t}),m.jc(8,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(9,"nz-form-item",6),m.Xb(10,"nz-form-control"),m.Xb(11,"input",27),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().lead.patientInfo.middleName=t}),m.jc(12,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(13,"nz-form-item",6),m.Xb(14,"nz-form-control"),m.Xb(15,"input",28),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().lead.patientInfo.lastName=t}),m.jc(16,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(17,"div",5),m.Xb(18,"nz-form-item",10),m.Xb(19,"nz-form-control"),m.Xb(20,"input",29),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().lead.patientInfo.email=t}),m.jc(21,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(22,"nz-form-item",10),m.Xb(23,"nz-form-control"),m.Xb(24,"input",30),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().lead.patientInfo.phoneNumber=t}),m.jc(25,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.ic();m.Db(2),m.Zc("* ",m.kc(3,11,"COMMON.PATIENTINFO"),":"),m.Db(5),m.sc("placeholder",m.kc(8,13,"COMMON.FIRSTNAME")),m.rc("ngModel",e.lead.patientInfo.firstName),m.Db(4),m.sc("placeholder",m.kc(12,15,"COMMON.MIDDLENAME")),m.rc("ngModel",e.lead.patientInfo.middleName),m.Db(4),m.sc("placeholder",m.kc(16,17,"COMMON.LASTNAME")),m.rc("ngModel",e.lead.patientInfo.lastName),m.Db(5),m.sc("placeholder",m.kc(21,19,"COMMON.EMAIL")),m.rc("ngModel",e.lead.patientInfo.email),m.Db(4),m.sc("placeholder",m.kc(25,21,"PORTAL.CONTACT")),m.rc("ngModel",e.lead.patientInfo.phoneNumber)}}let D=(()=>{class e extends r.a{constructor(e,t,n,i,o,a,l,c){super(),this._leadsService=e,this._notificationsService=t,this._router=n,this.translationService=i,this._location=o,this._userService=a,this._leadsEventLogger=l,this._activatedRoute=c,this.languages=[],this.baseUrl=p.g.url,this.userSearch="",this.leadSameAsPatient=!0,this.lead=new b,this.mode="ADD",this.userId=localStorage.getItem("loggedInUser")}ngOnInit(){this._leadsEventLogger.pageViewEvent(this.constructor.name,this._activatedRoute.snapshot._routerState.url),this.translationService.getMultiple("LEAD.LEAD_SUCCESS","TITLE.LEADS","LEAD.LEAD_ERROR","LEAD.LEAD_UPDATE").subscribe(e=>this.translatedStrings=e),this._activatedRoute.params.forEach(e=>{this.leadId=e.id}),this.leadId&&(this.mode="EDIT",this._leadsService.getSpecificLeadForUser(this.leadId).subscribe(e=>{this.lead=e,this.getAdminNameFromAPI(this.lead.assignedTo)}))}createLead(e){e&&("ADD"===this.mode?this.createNewLead():this.updateLead())}createNewLead(){this.lead.leadSameAsPatient=this.leadSameAsPatient,this._leadsService.addNewLead(this.lead).subscribe(()=>{this._notificationsService.success(this.translatedStrings.get("TITLE.LEADS"),this.translatedStrings.get("LEAD.LEAD_SUCCESS")),this._router.navigate(["leads"])},e=>{e.error?e.error.forEach(e=>this._notificationsService.error(this.translatedStrings.get("TITLE.LEADS"),e)):this._notificationsService.error(this.translatedStrings.get("TITLE.LEADS"),this.translatedStrings.get("LEAD.LEAD_ERROR"))})}updateLead(){this.goingBack||this._leadsService.updateLead(this.lead,this.leadId).subscribe(()=>{this._notificationsService.success(this.translatedStrings.get("TITLE.LEADS"),this.translatedStrings.get("LEAD.LEAD_UPDATE")),this._router.navigate(["leads"])},()=>{this._notificationsService.error(this.translatedStrings.get("TITLE.LEADS"),this.translatedStrings.get("LEAD.LEAD_ERROR"))})}goBack(){this.goingBack=!0,this._location.back()}getAdminNameFromAPI(e){this._userService.getUser(e).subscribe(e=>{this.adminName=e.firstName+" "+e.lastName})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(d.a),m.Rb(f.b),m.Rb(l.g),m.Rb(h.a),m.Rb(o.l),m.Rb(s.a),m.Rb(g.a),m.Rb(l.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-create"]],features:[m.Ab],decls:84,vars:69,consts:[["nz-form","",3,"ngSubmit"],["leadForm","ngForm"],["title","lead",3,"defaultTitle","isSearchEnabled","actionTitle"],[1,"lead-form-container","lead-form-border-top"],[1,"input-heading"],[1,"row"],[1,"col-33"],["required","","nz-input","","formControlName","firstName",3,"placeholder","ngModel","ngModelChange"],["nz-input","","formControlName","middleName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","lastName",3,"placeholder","ngModel","ngModelChange"],[1,"col-50"],["required","","nz-input","","formControlName","email","email","",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","phoneNumber","pattern","^[0-9]{8,15}$",3,"placeholder","ngModel","ngModelChange"],["formControlName","leadSameAsPatient",1,"toggle",3,"ngModel","ngModelChange"],["class","lead-form-container lead-form-border-middle","id","leadPatientInfo",4,"ngIf"],[1,"lead-form-container","lead-form-border-middle"],["required","","nz-input","","formControlName","source",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","domain",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","lead.insuranceCarrier",3,"placeholder","ngModel","ngModelChange"],[1,"col-100"],["nz-input","","formControlName","query",3,"placeholder","ngModel","ngModelChange"],[1,"lead-form-container","lead-form-border-bottom"],["required","","nz-input","","formControlName","referredBy",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","referredTo",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","referralReason",3,"placeholder","ngModel","ngModelChange"],["id","leadPatientInfo",1,"lead-form-container","lead-form-border-middle"],["required","","nz-input","","formControlName","patientFirstName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientMiddleName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientLastName",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientEmail","email","",3,"placeholder","ngModel","ngModelChange"],["required","","nz-input","","formControlName","patientPhoneNumber","pattern","^[0-9]{8,15}$",3,"placeholder","ngModel","ngModelChange"]],template:function(e,t){if(1&e){const e=m.Yb();m.Xb(0,"form",0,1),m.ec("ngSubmit",function(){m.Lc(e);const n=m.Ic(1);return t.createLead(n.valid)}),m.Sb(2,"app-header",2),m.jc(3,"translate"),m.jc(4,"translate"),m.Sb(5,"br"),m.Sb(6,"br"),m.Sb(7,"br"),m.Xb(8,"div"),m.Xb(9,"div",3),m.Xb(10,"strong",4),m.Xc(11),m.jc(12,"translate"),m.Wb(),m.Xb(13,"div",5),m.Xb(14,"nz-form-item",6),m.Xb(15,"nz-form-control"),m.Xb(16,"input",7),m.ec("ngModelChange",function(e){return t.lead.personInfo.firstName=e}),m.jc(17,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(18,"nz-form-item",6),m.Xb(19,"nz-form-control"),m.Xb(20,"input",8),m.ec("ngModelChange",function(e){return t.lead.personInfo.middleName=e}),m.jc(21,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(22,"nz-form-item",6),m.Xb(23,"nz-form-control"),m.Xb(24,"input",9),m.ec("ngModelChange",function(e){return t.lead.personInfo.lastName=e}),m.jc(25,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(26,"div",5),m.Xb(27,"nz-form-item",10),m.Xb(28,"nz-form-control"),m.Xb(29,"input",11),m.ec("ngModelChange",function(e){return t.lead.personInfo.email=e}),m.jc(30,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(31,"nz-form-item",10),m.Xb(32,"nz-form-control"),m.Xb(33,"input",12),m.ec("ngModelChange",function(e){return t.lead.personInfo.phoneNumber=e}),m.jc(34,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(35,"div",5),m.Xb(36,"nz-form-item"),m.Xb(37,"nz-form-control"),m.Xb(38,"nz-switch",13),m.ec("ngModelChange",function(e){return t.leadSameAsPatient=e}),m.Wb(),m.Xc(39),m.jc(40,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Sb(41,"br"),m.Sb(42,"br"),m.Wb(),m.Vc(43,y,26,23,"div",14),m.Xb(44,"div",15),m.Xb(45,"strong",4),m.Xc(46),m.jc(47,"translate"),m.Wb(),m.Xb(48,"div",5),m.Xb(49,"nz-form-item",10),m.Xb(50,"nz-form-control"),m.Xb(51,"input",16),m.ec("ngModelChange",function(e){return t.lead.source=e}),m.jc(52,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(53,"div",5),m.Xb(54,"nz-form-item",10),m.Xb(55,"nz-form-control"),m.Xb(56,"input",17),m.ec("ngModelChange",function(e){return t.lead.domain=e}),m.jc(57,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(58,"nz-form-item",10),m.Xb(59,"nz-form-control"),m.Xb(60,"input",18),m.ec("ngModelChange",function(e){return t.lead.insuranceCarrier=e}),m.jc(61,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(62,"div",5),m.Xb(63,"nz-form-item",19),m.Xb(64,"nz-form-control"),m.Xb(65,"textarea",20),m.ec("ngModelChange",function(e){return t.lead.query=e}),m.jc(66,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(67,"div",21),m.Xb(68,"strong",4),m.Xc(69),m.jc(70,"translate"),m.Wb(),m.Xb(71,"div",5),m.Xb(72,"nz-form-item",6),m.Xb(73,"nz-form-control"),m.Xb(74,"input",22),m.ec("ngModelChange",function(e){return t.lead.referredBy=e}),m.jc(75,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(76,"nz-form-item",6),m.Xb(77,"nz-form-control"),m.Xb(78,"input",23),m.ec("ngModelChange",function(e){return t.lead.referredTo=e}),m.jc(79,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(80,"nz-form-item",6),m.Xb(81,"nz-form-control"),m.Xb(82,"input",24),m.ec("ngModelChange",function(e){return t.lead.referralReason=e}),m.jc(83,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb()}2&e&&(m.Db(2),m.sc("defaultTitle",m.kc(3,33,"LEADS.CREATE")),m.sc("actionTitle",m.kc(4,35,"LEADS.SAVE")),m.rc("isSearchEnabled",!1),m.Db(9),m.Zc("* ",m.kc(12,37,"COMMON.PERSONALINFO"),":"),m.Db(5),m.sc("placeholder",m.kc(17,39,"COMMON.FIRSTNAME")),m.rc("ngModel",t.lead.personInfo.firstName),m.Db(4),m.sc("placeholder",m.kc(21,41,"COMMON.MIDDLENAME")),m.rc("ngModel",t.lead.personInfo.middleName),m.Db(4),m.sc("placeholder",m.kc(25,43,"COMMON.LASTNAME")),m.rc("ngModel",t.lead.personInfo.lastName),m.Db(5),m.sc("placeholder",m.kc(30,45,"COMMON.EMAIL")),m.rc("ngModel",t.lead.personInfo.email),m.Db(4),m.sc("placeholder",m.kc(34,47,"PORTAL.CONTACT")),m.rc("ngModel",t.lead.personInfo.phoneNumber),m.Db(5),m.rc("ngModel",t.leadSameAsPatient),m.Db(1),m.Zc(" ",m.kc(40,49,"LEADS.LEADSAME")," "),m.Db(4),m.rc("ngIf",!t.leadSameAsPatient),m.Db(3),m.Zc("* ",m.kc(47,51,"COMMON.GENERALINFO"),":"),m.Db(5),m.sc("placeholder",m.kc(52,53,"LEADS.SOURCE")),m.rc("ngModel",t.lead.source),m.Db(5),m.sc("placeholder",m.kc(57,55,"LEADS.DOMAIN")),m.rc("ngModel",t.lead.domain),m.Db(4),m.sc("placeholder",m.kc(61,57,"LEADS.INSURANCE")),m.rc("ngModel",t.lead.insuranceCarrier),m.Db(5),m.sc("placeholder",m.kc(66,59,"LEADS.QUERY")),m.rc("ngModel",t.lead.query),m.Db(4),m.Zc("* ",m.kc(70,61,"COMMON.MEDICALINFO"),":"),m.Db(5),m.sc("placeholder",m.kc(75,63,"LEADS.REFERRER")),m.rc("ngModel",t.lead.referredBy),m.Db(4),m.sc("placeholder",m.kc(79,65,"LEADS.REFERRED")),m.rc("ngModel",t.lead.referredTo),m.Db(4),m.sc("placeholder",m.kc(83,67,"LEADS.REFREASON")),m.rc("ngModel",t.lead.referralReason))},directives:[a.F,a.v,a.w,v.b,C.a,z.c,v.c,z.a,v.a,S.b,a.d,a.C,a.u,a.k,a.e,a.A,I.a,o.q],pipes:[X.a],styles:[".top-bar[_ngcontent-%COMP%]{margin-bottom:2%}.lead-form-container[_ngcontent-%COMP%]{width:80%;background-color:var(--neutral-color);margin:auto auto 5%;justify-content:center;border:2px solid #d3d3d3;padding:2%;font-family:Nunito!important}.lead-form-border-top[_ngcontent-%COMP%]{border-bottom:0}.lead-form-border-middle[_ngcontent-%COMP%]{border-top:0;border-bottom:0}.lead-form-border-bottom[_ngcontent-%COMP%]{border-top:0}.row[_ngcontent-%COMP%]{flex:1 1 auto;margin:auto}.col-33[_ngcontent-%COMP%]{width:29%;padding:2%}.col-50[_ngcontent-%COMP%]{width:45%;padding:2%}.col-100[_ngcontent-%COMP%]{width:95%;padding:2%}.input-heading[_ngcontent-%COMP%]{color:var(--primary-color);font-size:12px;margin-left:2%;margin-top:5%;font-family:Nunito!important}.toggle[_ngcontent-%COMP%]{margin-right:2%;float:right}"]}),e})();class W{}class T{}var E=n("dEAy"),w=n("eHCX"),L=n("0lU3"),M=n("OzZK"),O=n("RwU8"),k=n("C2AL"),_=n("FwiY"),N=n("nJia");function x(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",14),m.Xb(1,"nz-form-item"),m.Xb(2,"nz-form-control",15),m.Sb(3,"input",16),m.jc(4,"translate"),m.Wb(),m.Xb(5,"nz-form-control",17),m.Xb(6,"button",18),m.ec("click",function(n){m.Lc(e);const i=t.$implicit;return m.ic().removeField(i,n)}),m.Sb(7,"i",19),m.jc(8,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,n=m.ic();m.rc("nzSpan",24),m.Db(2),m.rc("nzXs",21)("nzSm",21)("nzErrorTip",(null==n.listOfControl?null:n.listOfControl.length)>=0?"Please input a task or delete this field.":"Please input atleast 1 task"),m.Db(1),m.tc("placeholder","",m.kc(4,10,"COMMON.WRITETASK"),"..."),m.rc("formControlName",e.controlInstance),m.Eb("id",e.id),m.Db(2),m.rc("nzXs",3)("nzSm",3),m.Db(2),m.sc("nzTooltipTitle",m.kc(8,12,"COMMON.REMOVETASK"))}}const A=function(){return{span:24,offset:0}},P=function(){return{span:24}};let R=(()=>{class e{constructor(e,t,n,i,o){this.formBuilder=e,this._leadsService=t,this._location=n,this._modalRef=i,this.messageService=o,this.languages=[],this.tasks=new Array,this.newFollowUp=new W,this.listOfControl=[],this.saveBtnLoading=!1}addField(e){e&&e.preventDefault();const t=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,n=this.listOfControl.push({id:t,controlInstance:`task${t}`});this.validateForm.addControl(this.listOfControl[n-1].controlInstance,new a.i(null,a.D.required))}removeField(e,t){if(t.preventDefault(),this.listOfControl.length>1){const t=this.listOfControl.indexOf(e);this.listOfControl.splice(t,1),this.validateForm.removeControl(e.controlInstance)}}submitForm(){this.saveBtnLoading=!0;let e=!1;for(const n in this.validateForm.controls)if("INVALID"==this.validateForm.controls[n].status)return void(e=!0);for(let n=0;n<this.listOfControl.length;n++){let e=new T;e.completed=!1,e.description=this.validateForm.value[`task${n}`],this.tasks.push(e)}let t=new W;t.leadId=this.leadId,t.tasks=this.tasks,t.scheduledOn=this.validateForm.value.scheduledOn.getTime(),this._leadsService.addNewFollowUp(t).subscribe(()=>{this.messageService.success("Success","New Follow-Up Added Successfully."),this.saveBtnLoading=!1,this._modalRef.close(!0)},()=>{this.messageService.error("Error","Something Went Wrong, Please Try Again!"),this.saveBtnLoading=!1,this._modalRef.close(!1)})}ngOnInit(){this.validateForm=this.formBuilder.group({scheduledOn:[new Date,[a.D.required]]}),this.addField()}goBack(){this._location.back()}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(a.h),m.Rb(d.a),m.Rb(o.l),m.Rb(E.e),m.Rb(f.b))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-add-followup"]],decls:34,vars:17,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nz-row",""],["nz-col","","nzSpan","24"],["nz-typography",""],["nz-typography","","nzType","secondary"],["nzErrorTip","Please choose a valid date."],["formControlName","scheduledOn"],["nz-row","",3,"nzGutter"],["nz-col","","style","margin-top: 5px; margin-bottom: 5px;",3,"nzSpan",4,"ngFor","ngForOf"],["nz-col","",2,"text-align","center","margin-top","20px",3,"nzSpan"],[3,"nzXs","nzSm"],["nz-button","","nzType","dashed",1,"add-button",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",3,"nzLoading"],["nz-col","",2,"margin-top","5px","margin-bottom","5px",3,"nzSpan"],[3,"nzXs","nzSm","nzErrorTip"],["nz-input","",1,"passenger-input",3,"placeholder","formControlName"],[1,"task-action-btn",3,"nzXs","nzSm"],["nz-button","","nzType","primary","nzSize","small","nzShape","circle","nzDanger","",1,"add-button",3,"click"],["nz-icon","","nzType","minus","nz-tooltip","",3,"nzTooltipTitle"]],template:function(e,t){1&e&&(m.Xb(0,"form",0),m.ec("ngSubmit",function(){return t.submitForm()}),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"strong",3),m.Xc(4,"Add a Follow-up"),m.Wb(),m.Wb(),m.Wb(),m.Xb(5,"div",1),m.Xb(6,"div",2),m.Xb(7,"p",4),m.Xc(8," Date "),m.Wb(),m.Wb(),m.Wb(),m.Xb(9,"div",1),m.Xb(10,"div",2),m.Xb(11,"nz-form-item"),m.Xb(12,"nz-form-control",5),m.Sb(13,"nz-date-picker",6),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(14,"div",1),m.Xb(15,"div",2),m.Xb(16,"p",4),m.Xc(17," Add a task "),m.Wb(),m.Wb(),m.Wb(),m.Xb(18,"div",7),m.Vc(19,x,9,14,"div",8),m.Wb(),m.Xb(20,"div",1),m.Xb(21,"div",9),m.Xb(22,"nz-form-item"),m.Xb(23,"nz-form-control",10),m.Xb(24,"button",11),m.ec("click",function(e){return t.addField(e)}),m.Sb(25,"i",12),m.Xc(26),m.jc(27,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(28,"div",1),m.Xb(29,"div",9),m.Xb(30,"nz-form-item"),m.Xb(31,"nz-form-control",10),m.Xb(32,"button",13),m.Xc(33,"Save"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.rc("formGroup",t.validateForm),m.Db(18),m.rc("nzGutter",24),m.Db(1),m.rc("ngForOf",t.listOfControl),m.Db(2),m.rc("nzSpan",24),m.Db(2),m.rc("nzXs",m.xc(13,A))("nzSm",m.xc(14,P)),m.Db(3),m.Zc(" ",m.kc(27,11,"COMMON.ADDTASK")," "),m.Db(3),m.rc("nzSpan",24),m.Db(2),m.rc("nzXs",m.xc(15,A))("nzSm",m.xc(16,A)),m.Db(1),m.rc("nzLoading",t.saveBtnLoading))},directives:[a.F,a.v,v.b,a.m,z.c,z.a,w.a,v.c,v.a,L.a,a.u,a.k,o.p,M.a,O.a,k.a,_.a,S.b,a.d,N.d],pipes:[X.a],styles:[".save-followUp[_ngcontent-%COMP%]{padding:10px;color:var(--neutral-color);border:0;border-radius:25px;font-size:12px;width:120px;height:35px;background-color:var(--primary-color);cursor:pointer}.followUp-container[_ngcontent-%COMP%]{width:80%;margin:100px auto 5%;justify-content:center;padding:2%}.row[_ngcontent-%COMP%]{flex:1 1 auto;margin:auto}.followUp[_ngcontent-%COMP%]{padding:auto}.input-heading[_ngcontent-%COMP%]{color:var(--primary-color);font-size:12px;margin-left:2%;margin-top:5%}.add-task[_ngcontent-%COMP%]{margin:5px}.remove-task[_ngcontent-%COMP%]{border-radius:50%;padding:5px;color:var(--primary-color);border:1px solid var(--neutral-color-dark);font-size:16px;font-weight:600;width:30px;height:30px;background-color:var(--neutral-color) smoke;cursor:pointer;margin-left:2%}  .vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}  .ant-typography.ant-typography-secondary{margin-top:15px;margin-bottom:5px}  .ant-form-item{margin-bottom:0!important}.task-action-btn[_ngcontent-%COMP%]{text-align:right}.task-row[_ngcontent-%COMP%]{margin-top:5px}.ant-btn-dangerous.ant-btn-primary[_ngcontent-%COMP%]:focus,   .ant-btn-dangerous.ant-btn-primary:hover{border:1px solid;background-color:#fff1f0!important;border-color:#ffa39e!important;color:red!important}  .ant-btn-dangerous.ant-btn-primary{border:1px solid!important}"]}),e})();var U=n("qAZ0");function V(e,t){1&e&&(m.Xb(0,"div",3),m.Xb(1,"strong"),m.Xc(2),m.jc(3,"translate"),m.Wb(),m.Wb()),2&e&&(m.Db(2),m.Yc(m.kc(3,1,"COMMON.NOFOLLOWUPS")))}function F(e,t){if(1&e&&(m.Xb(0,"div"),m.Xb(1,"strong"),m.Xc(2),m.jc(3,"translate"),m.Wb(),m.Xb(4,"p"),m.Xc(5),m.Wb(),m.Wb()),2&e){const e=t.$implicit,n=t.index;m.Db(2),m.ad("",m.kc(3,3,"COMMON.TASK"),": ",n+1,""),m.Db(3),m.Yc(e.description)}}function B(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div"),m.Xb(1,"div",4),m.Xb(2,"h3"),m.Xc(3),m.jc(4,"translate"),m.Wb(),m.Vc(5,F,6,5,"div",2),m.Xb(6,"button",5),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().gotoLead(n.leadId)}),m.jc(7,"translate"),m.Xc(8),m.jc(9,"translate"),m.Wb(),m.Sb(10,"br"),m.Sb(11,"br"),m.Xb(12,"div",6),m.Xb(13,"span",7),m.Xc(14),m.jc(15,"translate"),m.jc(16,"date"),m.Wb(),m.Xb(17,"span",8),m.Xc(18),m.jc(19,"translate"),m.jc(20,"date"),m.Wb(),m.Wb(),m.Sb(21,"br"),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,n=t.index;m.Db(3),m.ad("",m.kc(4,9,"COMMON.FOLLOWUP"),": #",n+1,""),m.Db(2),m.rc("ngForOf",e.tasks),m.Db(1),m.sc("nzTooltipTitle",m.kc(7,11,"LEADS.VIEW")),m.Db(2),m.Zc(" ",m.kc(9,13,"LEADS.VIEW")," "),m.Db(6),m.ad("",m.kc(15,15,"COMMON.CREATEDON"),": ",m.lc(16,17,e.createdOn,"mediumDate"),""),m.Db(4),m.ad("",m.kc(19,20,"TABLEHEADER.SCHEDULEDON"),": ",m.lc(20,22,e.scheduledOn,"mediumDate"),"")}}let j=(()=>{class e{constructor(e,t,n){this._leadsService=e,this.router=t,this.translate=n,this.languages=[],this.loading=!0}ngOnInit(){this.getFollowUpsForUser()}getFollowUpsForUser(){this._leadsService.getAllFollowUpsForUser().subscribe(e=>{this.followUps=e,this.loading=!1})}gotoLead(e){this.router.navigate(["leads/details",e])}gotoLeads(){this.router.navigate(["leads"])}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(d.a),m.Rb(l.g),m.Rb(h.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-followups"]],decls:3,vars:3,consts:[[2,"min-height","80vh",3,"nzSpinning"],["id","nofollowup",4,"ngIf"],[4,"ngFor","ngForOf"],["id","nofollowup"],[1,"followup-container","nz-typography"],["nz-tooltip","",1,"goto-lead",3,"nzTooltipTitle","click"],[1,"schedule"],[1,"completed"],[1,"created"]],template:function(e,t){1&e&&(m.Xb(0,"nz-spin",0),m.Vc(1,V,4,3,"div",1),m.Vc(2,B,22,25,"div",2),m.Wb()),2&e&&(m.rc("nzSpinning",t.loading),m.Db(1),m.rc("ngIf",!t.loading&&(null==t.followUps||0==t.followUps.length)),m.Db(1),m.rc("ngForOf",t.followUps))},directives:[U.a,o.q,o.p,N.d],pipes:[X.a,o.e],styles:[".followup-container[_ngcontent-%COMP%]{margin:2% auto 5%;width:85%;padding:3%;border-radius:5px;background-color:var(--neutral-color)}#nofollowup[_ngcontent-%COMP%]{margin-top:2%;text-align:center}.completed[_ngcontent-%COMP%]{float:left}.completed[_ngcontent-%COMP%], .created[_ngcontent-%COMP%]{color:var(--primary-color);font-size:12px;font-weight:600}.created[_ngcontent-%COMP%]{float:right}.schedule[_ngcontent-%COMP%]{border-top:1px solid #ededed;margin:2% auto auto;padding-top:2%}.goto-lead[_ngcontent-%COMP%]{float:right;padding:10px;color:var(--neutral-color);border:0;border-radius:25px;font-size:12px;width:120px;height:35px;background-color:var(--primary-color);cursor:pointer}.tabs[_ngcontent-%COMP%]{width:90%;margin:auto}.my-leads[_ngcontent-%COMP%]{padding:10px;color:#a9a9a9;border:none;border-bottom:1px solid grey;font-size:12px;font-weight:600;width:110px;height:35px;background:transparent;cursor:pointer}"]}),e})();var q=n("c36b"),G=n("Z93s"),H=n("+gyu"),Z=n("mUB+"),Y=n("mUTz");function $(e,t){1&e&&(m.Xb(0,"label",11),m.Xc(1,"Required"),m.Wb())}let K=(()=>{class e{constructor(e,t,n,i,o,a){this._modalRef=e,this._notificationsService=t,this._leadsService=n,this._leadsEventLogger=i,this._translationService=o,this._noteTemplatesService=a,this.noteObject=new G.a,this.isLoadingSaveNote=!1,this.isInputEmpty=!1,this.config=q.b}ngOnInit(){this.initTranslation()}initTranslation(){let e=new Array("LEADS.LEAD_CONVERTED_SUCCESS","NOTE_ADDED_SUCCESSFULLY","COMMON.SOMETHING_WENT_WRONG","MENU.LEADS");this._translationService.getMultiple(...e).subscribe(e=>this.translatedStrings=e)}addNewNote(){if(""===this.noteObject.content)return void(this.isInputEmpty=!0);this.isInputEmpty=!1,this.isLoadingSaveNote=!0;const e={createdOn:Math.round((new Date).getTime()/1e3+900+19800).toString(),updatedOn:Math.round((new Date).getTime()/1e3+900+19800).toString(),archived:!1,leadId:this.leadId,tenantId:this.tenantId,content:this.noteObject.content};e&&""!=e.content&&this._leadsService.addNewNoteForLead(e).subscribe(()=>{this._leadsEventLogger.leadsActionEvent(this.leadId,"add_note"),this.noteObject.content="",this._notificationsService.success(this.translatedStrings.get("MENU.LEADS"),this.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY")),this.isLoadingSaveNote=!1,this._modalRef.close(!0)},e=>{this._notificationsService.error(this.translatedStrings.get("MENU.LEADS"),JSON.parse(e._body).message),this.isLoadingSaveNote=!1})}closeDialog(){this._modalRef.close(!1)}onNoteChanged(e){this.isInputEmpty=0===(null==e?void 0:e.length)}setTemplate(e){this.noteObject.content=e}getNoteTemplates(){this.noteTemplates$=this._noteTemplatesService.fetchNoteTemplates(0,100,null,this.tenantId)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(f.b),m.Rb(d.a),m.Rb(g.a),m.Rb(h.a),m.Rb(H.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-add-leads-note"]],inputs:{leadId:"leadId",tenantId:"tenantId"},decls:19,vars:17,consts:[["id","patient"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"ngModel","placeholder","config","ngModelChange"],["note",""],["style","color:red",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","8"],[3,"note","onTemplateSelected"],["nz-col","","nzSpan","8","nzOffset","16",2,"text-align","right"],["nz-button","","nzType","primary",3,"nzLoading","click"],[2,"color","red"]],template:function(e,t){1&e&&(m.Xb(0,"strong"),m.Xb(1,"p",0),m.Xc(2),m.jc(3,"translate"),m.Wb(),m.Wb(),m.Xb(4,"div",1),m.Xb(5,"div",2),m.Xb(6,"angular-editor",3,4),m.ec("ngModelChange",function(e){return t.noteObject.content=e})("ngModelChange",function(e){return t.onNoteChanged(e)}),m.jc(8,"translate"),m.Wb(),m.Vc(9,$,2,0,"label",5),m.Wb(),m.Wb(),m.Sb(10,"br"),m.Xb(11,"div",6),m.Xb(12,"div",7),m.Xb(13,"app-note-template-picker",8),m.ec("onTemplateSelected",function(e){return t.setTemplate(e)}),m.Wb(),m.Wb(),m.Wb(),m.Xb(14,"div",1),m.Xb(15,"div",9),m.Xb(16,"button",10),m.ec("click",function(){return t.addNewNote()}),m.Xc(17),m.jc(18,"translate"),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(2),m.Yc(m.kc(3,11,"COMMON.ADD_NOTES")),m.Db(2),m.rc("nzGutter",16),m.Db(1),m.rc("nzSpan",24),m.Db(1),m.sc("placeholder",m.kc(8,13,"COMMON.ENTER_NOTES")),m.rc("ngModel",t.noteObject.content)("config",t.config),m.Db(3),m.rc("ngIf",t.isInputEmpty),m.Db(4),m.rc("note",t.noteObject.content),m.Db(1),m.rc("nzGutter",16),m.Db(2),m.rc("nzLoading",t.isLoadingSaveNote),m.Db(1),m.Zc(" ",m.kc(18,15,"COMMON.SAVE")," "))},directives:[z.c,z.a,Z.a,a.u,a.x,o.q,Y.a,M.a,O.a,k.a],pipes:[X.a],styles:[""]}),e})();var Q=n("1G5W"),J=n("IzEk"),ee=n("CLv8"),te=n("rqHP"),ne=n("igu/"),ie=n("6i1W"),oe=n("1jOk");class ae{constructor(){this.unit="CMS"}}class le{constructor(){this.unit="CMS"}}class ce{constructor(){this.unit="CMS"}}class re{constructor(){this.unit="KGS"}}var se=n("gXqy"),de=n("bE2y");function be(e,t){1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"translate"),m.Ub()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"COMMON.REQUIRED")," "))}function ue(e,t){1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"translate"),m.Ub()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function pe(e,t){if(1&e&&(m.Vc(0,be,3,3,"ng-container",29),m.Vc(1,ue,3,3,"ng-container",29)),2&e){const e=t.$implicit;m.rc("ngIf",e.hasError("required")),m.Db(1),m.rc("ngIf",e.hasError("email"))}}function he(e,t){if(1&e&&(m.Xb(0,"label",30),m.Xc(1),m.Wb()),2&e){const e=t.$implicit;m.rc("nzValue",null==e?null:e.key),m.Db(1),m.Zc(" ",null==e?null:e.value," ")}}function ge(e,t){1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"translate"),m.Ub()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"COMMON.REQUIRED")," "))}function me(e,t){1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"translate"),m.Ub()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function fe(e,t){1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"translate"),m.Ub()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function ve(e,t){if(1&e&&(m.Vc(0,ge,3,3,"ng-container",29),m.Vc(1,me,3,3,"ng-container",29),m.Vc(2,fe,3,3,"ng-container",29)),2&e){const e=t.$implicit;m.rc("ngIf",e.hasError("required")),m.Db(1),m.rc("ngIf",e.hasError("minlength")),m.Db(1),m.rc("ngIf",e.hasError("pattern"))}}const Ce=function(){return[16,16]};let ze=(()=>{class e{constructor(e,t,n,i,o){var a;this._modalRef=e,this._leadsService=t,this._notificationsService=n,this.translationService=i,this._dataSharingService=o,this.genders=Object(oe.b)(),this.disabledDates=e=>Object(se.a)(new Date,e)<0,null===(a=this._dataSharingService.tenantSettings)||void 0===a||a.pipe(Object(J.a)(1)).subscribe(e=>{var t;e&&(this.tenantConfig=e,this.countryCode=null===(t=this.tenantConfig)||void 0===t?void 0:t.countryCode)}),this.translationService.getMultiple("LEAD.LEAD_SUCCESS","TITLE.LEADS","LEAD.LEAD_ERROR","LEAD.LEAD_UPDATE").subscribe(e=>this.translatedStrings=e)}ngOnInit(){var e,t,n,i,o,l,c,r,s,d,b,u,p,h,g,m,f,v,C,z,S,I,X,y,D,W,T,E,w,L,M,O;this.leadForm=new a.l({firstName:new a.i(null===(e=this.lead.patientInfo)||void 0===e?void 0:e.firstName,a.D.required),lastName:new a.i(null===(t=this.lead.patientInfo)||void 0===t?void 0:t.lastName,a.D.required),email:new a.i(null===(n=this.lead.patientInfo)||void 0===n?void 0:n.email,a.D.email),dateOfBirth:new a.i(null===(i=this.lead.patientInfo)||void 0===i?void 0:i.dateOfBirth),gender:new a.i(null===(o=this.lead.patientInfo)||void 0===o?void 0:o.gender),primaryNumber:new a.i(null,[a.D.required,a.D.minLength(6),a.D.pattern(/^[0-9 -]\d*$/)]),secondaryNumber:new a.i(null,[a.D.minLength(6),a.D.pattern(/^[0-9 -]\d*$/)]),primaryInsurance:new a.i(null===(s=null===(r=null===(c=null===(l=this.lead)||void 0===l?void 0:l.patientInfo)||void 0===c?void 0:c.insuranceInformation)||void 0===r?void 0:r.primaryInsuranceDetails)||void 0===s?void 0:s.carrierName),insuranceId:new a.i(null===(p=null===(u=null===(b=null===(d=this.lead)||void 0===d?void 0:d.patientInfo)||void 0===b?void 0:b.insuranceInformation)||void 0===u?void 0:u.primaryInsuranceDetails)||void 0===p?void 0:p.insuranceId),secondaryInsured:new a.i(!1),secondaryInsurance:new a.i({value:null===(f=null===(m=null===(g=null===(h=this.lead)||void 0===h?void 0:h.patientInfo)||void 0===g?void 0:g.insuranceInformation)||void 0===m?void 0:m.secondaryInsuranceDetails)||void 0===f?void 0:f.carrierName,disabled:!0}),secondaryInsuranceId:new a.i({value:null===(S=null===(z=null===(C=null===(v=this.lead)||void 0===v?void 0:v.patientInfo)||void 0===C?void 0:C.insuranceInformation)||void 0===z?void 0:z.secondaryInsuranceDetails)||void 0===S?void 0:S.insuranceId,disabled:!0})}),(null===(I=this.lead.patientInfo.phoneNumbers)||void 0===I?void 0:I[0])&&(this.leadForm.controls.primaryNumber.setValue(null===(D=null===(y=null===(X=this.lead.patientInfo)||void 0===X?void 0:X.phoneNumbers)||void 0===y?void 0:y[0])||void 0===D?void 0:D.number),(null===(W=this.lead.patientInfo.phoneNumbers)||void 0===W?void 0:W[1])&&this.leadForm.controls.secondaryNumber.setValue(null===(w=null===(E=null===(T=this.lead.patientInfo)||void 0===T?void 0:T.phoneNumbers)||void 0===E?void 0:E[1])||void 0===w?void 0:w.number)),this.leadForm.get("secondaryInsured").valueChanges.subscribe(e=>{e?(this.leadForm.get("secondaryInsurance").enable(),this.leadForm.get("secondaryInsuranceId").enable()):(this.leadForm.get("secondaryInsurance").disable(),this.leadForm.get("secondaryInsuranceId").disable())}),this.leadForm.get("secondaryInsured").setValue(null===(O=null===(M=null===(L=this.lead)||void 0===L?void 0:L.patientInfo)||void 0===M?void 0:M.insuranceInformation)||void 0===O?void 0:O.secondaryInsured)}updateLead(){if(!this.leadForm.valid)return;const e=JSON.parse(JSON.stringify(this.lead)),t=e.patientInfo,n=e.personInfo,i=(null==t?void 0:t.firstName)==(null==n?void 0:n.firstName)&&(null==t?void 0:t.lastName)==(null==n?void 0:n.lastName);if(t){t.firstName=this.leadForm.get("firstName").value,t.lastName=this.leadForm.get("lastName").value,t.email=this.leadForm.get("email").value,t.dateOfBirth=this.leadForm.get("dateOfBirth").value,t.gender=this.leadForm.get("gender").value;const e=t.phoneNumbers||[],n=e[0]||this.newPhoneNumber(),i=e[1]||this.newPhoneNumber();n.number=this.leadForm.controls.primaryNumber.value,i.number=this.leadForm.controls.secondaryNumber.value,t.phoneNumbers=[n,i];const o=t.insuranceInformation||new te.a,a=o.primaryInsuranceDetails||new ee.a,l=o.secondaryInsuranceDetails||new ee.a;a.carrierName=this.leadForm.get("primaryInsurance").value,a.insuranceId=this.leadForm.get("insuranceId").value,o.secondaryInsured=this.leadForm.get("secondaryInsured").value,o.secondaryInsured?(l.carrierName=this.leadForm.get("secondaryInsurance").value,l.insuranceId=this.leadForm.get("secondaryInsuranceId").value,o.secondaryInsuranceDetails=l):o.secondaryInsuranceDetails=null,t.insuranceInformation=o}this.updateUnits(t),e.patientInfo=t,i&&(e.personInfo=t),this._leadsService.updateLead(e,e.leadId).subscribe(()=>{this._notificationsService.success(this.translatedStrings.get("TITLE.LEADS"),this.translatedStrings.get("LEAD.LEAD_UPDATE")),this._modalRef.close(!0)},()=>{this._notificationsService.error(this.translatedStrings.get("TITLE.LEADS"),this.translatedStrings.get("LEAD.LEAD_ERROR")),this.closeDialog()})}newPhoneNumber(){return{number:"",extension:0,countryCode:this.countryCode,preferred:!1,label:"",type:ie.c.MOBILE,notificationConfig:new Map}}updateUnits(e){const t=e.healthInfo;t&&(null==t.weight.value&&(t.weight=new re),null==t.height.value&&(t.height=new ae),null==t.hipSize.value&&(t.hipSize=new le),null==t.waistSize.value&&(t.waistSize=new ce))}closeDialog(){this._modalRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(d.a),m.Rb(f.b),m.Rb(h.a),m.Rb(ne.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-edit-lead"]],inputs:{lead:"lead"},decls:122,vars:78,consts:[[1,"container"],["nz-row",""],["nz-form","",3,"formGroup","ngSubmit"],["leadFormName","ngForm"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],[3,"nzErrorTip"],["nz-input","","formControlName","firstName",3,"placeholder"],["nz-input","","formControlName","lastName",3,"placeholder"],["nz-input","","formControlName","email","email","",3,"placeholder"],["emailErrors",""],["formControlName","dateOfBirth","nzPlaceHolder","YYYY-MM-DD",3,"nzFormat","nzDisabledDate"],["nz-col","","nzSpan","16"],["formControlName","gender",1,"gender-radio"],["nz-radio","","class","radio-label",3,"nzValue",4,"ngFor","ngForOf"],["nz-col",""],[3,"nzAddOnBefore"],["formControlName","primaryNumber","nz-input",""],["formControlName","secondaryNumber","nz-input",""],["nz-input","","formControlName","primaryInsurance"],["nz-input","","formControlName","insuranceId"],["nz-row","","nzAlign","middle",2,"margin-top","16px"],["nz-col","","nzFlex","1"],["nzSize","small","formControlName","secondaryInsured"],["nz-input","","formControlName","secondaryInsurance"],["nz-input","","formControlName","secondaryInsuranceId"],["nz-row","","nzJustify","center",3,"nzGutter"],["nz-button","","nzType","primary","type","submit",2,"margin-top","16px"],["mobileErrors",""],[4,"ngIf"],["nz-radio","",1,"radio-label",3,"nzValue"]],template:function(e,t){if(1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"h3"),m.Xc(3),m.jc(4,"translate"),m.Wb(),m.Wb(),m.Sb(5,"br"),m.Xb(6,"form",2,3),m.ec("ngSubmit",function(){return t.updateLead()}),m.Xb(8,"div",4),m.Xb(9,"div",5),m.Xb(10,"nz-form-item"),m.Xb(11,"nz-form-control",6),m.jc(12,"translate"),m.Xb(13,"label"),m.Xc(14),m.jc(15,"translate"),m.Wb(),m.Sb(16,"input",7),m.jc(17,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(18,"div",5),m.Xb(19,"nz-form-item"),m.Xb(20,"nz-form-control",6),m.jc(21,"translate"),m.Xb(22,"label"),m.Xc(23),m.jc(24,"translate"),m.Wb(),m.Sb(25,"input",8),m.jc(26,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(27,"div",5),m.Xb(28,"nz-form-item"),m.Xb(29,"nz-form-control",6),m.Xb(30,"label"),m.Xc(31),m.jc(32,"translate"),m.Wb(),m.Sb(33,"input",9),m.jc(34,"translate"),m.Wb(),m.Vc(35,pe,2,2,"ng-template",null,10,m.Wc),m.Wb(),m.Wb(),m.Wb(),m.Xb(37,"div",4),m.Xb(38,"div",5),m.Xb(39,"nz-form-item"),m.Xb(40,"nz-form-control",6),m.jc(41,"translate"),m.Xb(42,"label"),m.Xc(43),m.jc(44,"translate"),m.Wb(),m.Sb(45,"nz-date-picker",11),m.Wb(),m.Wb(),m.Wb(),m.Xb(46,"div",12),m.Xb(47,"nz-form-item"),m.Xb(48,"nz-form-control",6),m.jc(49,"translate"),m.Xb(50,"label"),m.Xc(51),m.jc(52,"translate"),m.Wb(),m.Xb(53,"nz-radio-group",13),m.Vc(54,he,2,2,"label",14),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(55,"div",4),m.Xb(56,"div",5),m.Xb(57,"div",1),m.Xb(58,"div",15),m.Xb(59,"label"),m.Xc(60,"Primary Contact Number*"),m.Wb(),m.Wb(),m.Wb(),m.Xb(61,"div",1),m.Xb(62,"nz-form-item"),m.Xb(63,"nz-form-control",6),m.Xb(64,"nz-input-group",16),m.Sb(65,"input",17),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(66,"div",5),m.Xb(67,"div",1),m.Xb(68,"div",15),m.Xb(69,"label"),m.Xc(70,"Secondary Contact Number*"),m.Wb(),m.Wb(),m.Wb(),m.Xb(71,"div",1),m.Xb(72,"nz-form-item"),m.Xb(73,"nz-form-control",6),m.Xb(74,"nz-input-group",16),m.Sb(75,"input",18),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(76,"div",4),m.Xb(77,"div",5),m.Xb(78,"nz-form-item"),m.Xb(79,"nz-form-control"),m.Xb(80,"label"),m.Xc(81),m.jc(82,"translate"),m.Wb(),m.Sb(83,"input",19),m.Wb(),m.Wb(),m.Wb(),m.Xb(84,"div",5),m.Xb(85,"nz-form-item"),m.Xb(86,"nz-form-control"),m.Xb(87,"label"),m.Xc(88),m.jc(89,"translate"),m.Wb(),m.Sb(90,"input",20),m.Wb(),m.Wb(),m.Wb(),m.Xb(91,"div",5),m.Xb(92,"nz-form-item"),m.Xb(93,"nz-form-control"),m.Xb(94,"div",21),m.Xb(95,"div",22),m.Xb(96,"label"),m.Xc(97),m.jc(98,"translate"),m.Wb(),m.Wb(),m.Xb(99,"div",15),m.Sb(100,"nz-switch",23),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(101,"div",4),m.Xb(102,"div",5),m.Xb(103,"nz-form-item"),m.Xb(104,"nz-form-control"),m.Xb(105,"label"),m.Xc(106),m.jc(107,"translate"),m.Wb(),m.Sb(108,"input",24),m.Wb(),m.Wb(),m.Wb(),m.Xb(109,"div",5),m.Xb(110,"nz-form-item"),m.Xb(111,"nz-form-control"),m.Xb(112,"label"),m.Xc(113),m.jc(114,"translate"),m.Wb(),m.Sb(115,"input",25),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(116,"div",26),m.Xb(117,"button",27),m.Xc(118),m.jc(119,"translate"),m.Wb(),m.Wb(),m.Vc(120,ve,3,3,"ng-template",null,28,m.Wc),m.Wb(),m.Wb()),2&e){const e=m.Ic(36),n=m.Ic(121);m.Db(3),m.Zc("Edit ",m.kc(4,34,"LEADS.LEAD_DETAILS"),""),m.Db(3),m.rc("formGroup",t.leadForm),m.Db(2),m.rc("nzGutter",m.xc(72,Ce)),m.Db(3),m.sc("nzErrorTip",m.kc(12,36,"COMMON.REQUIRED")),m.Db(3),m.Zc("",m.kc(15,38,"COMMON.FIRSTNAME"),"*"),m.Db(2),m.sc("placeholder",m.kc(17,40,"COMMON.FIRSTNAME")),m.Db(4),m.sc("nzErrorTip",m.kc(21,42,"COMMON.REQUIRED")),m.Db(3),m.Zc("",m.kc(24,44,"COMMON.LASTNAME"),"*"),m.Db(2),m.sc("placeholder",m.kc(26,46,"COMMON.LASTNAME")),m.Db(4),m.rc("nzErrorTip",e),m.Db(2),m.Yc(m.kc(32,48,"COMMON.EMAIL")),m.Db(2),m.sc("placeholder",m.kc(34,50,"COMMON.EMAIL")),m.Db(4),m.rc("nzGutter",m.xc(73,Ce)),m.Db(3),m.sc("nzErrorTip",m.kc(41,52,"COMMON.REQUIRED")),m.Db(3),m.Zc("",m.kc(44,54,"COMMON.DOB"),"*"),m.Db(2),m.rc("nzFormat","yyyy-MM-dd")("nzDisabledDate",t.disabledDates),m.Db(3),m.sc("nzErrorTip",m.kc(49,56,"COMMON.REQUIRED")),m.Db(3),m.Zc("",m.kc(52,58,"PATIENT.GENDER"),"*"),m.Db(3),m.rc("ngForOf",t.genders),m.Db(1),m.rc("nzGutter",m.xc(74,Ce)),m.Db(8),m.rc("nzErrorTip",n),m.Db(1),m.tc("nzAddOnBefore","[",t.countryCode,"]"),m.Db(9),m.rc("nzErrorTip",n),m.Db(1),m.tc("nzAddOnBefore","[",t.countryCode,"]"),m.Db(2),m.rc("nzGutter",m.xc(75,Ce)),m.Db(5),m.Yc(m.kc(82,60,"INSURANCE.PRIMARY_INSURANCE_CARRIER_NAME")),m.Db(7),m.Yc(m.kc(89,62,"INSURANCE.INSURER_MEMBER_ID")),m.Db(9),m.Yc(m.kc(98,64,"PATIENT.DOES_PATIENT_HAVE_SECONDARY_INSURANCE")),m.Db(4),m.rc("nzGutter",m.xc(76,Ce)),m.Db(5),m.Yc(m.kc(107,66,"INSURANCE.SECONDARY_INSURANCE_CARRIER_NAME")),m.Db(7),m.Yc(m.kc(114,68,"INSURANCE.INSURER_MEMBER_ID")),m.Db(3),m.rc("nzGutter",m.xc(77,Ce)),m.Db(2),m.Zc(" ",m.kc(119,70,"COMMON.SAVE"),"")}},directives:[z.c,a.F,a.v,v.b,a.m,z.a,v.c,v.a,S.b,a.d,a.u,a.k,a.e,L.a,de.c,o.p,k.a,S.c,I.a,M.a,O.a,o.q,de.b],pipes:[X.a],styles:[".gender-radio[_ngcontent-%COMP%]{width:100%;margin-top:8px}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:#262626}"]}),e})();var Se=n("cnAw"),Ie=n("w7IE"),Xe=n("IOC6"),ye=n("q5r7"),De=n("tbdY"),We=n("tk/3");let Te=(()=>{class e{constructor(e){this._http=e,this.rootUrl=p.g.url}createFollowUp(e,t){return this._http.post(this.rootUrl+"/v3/leads/follow-ups/create/"+e,t)}createBulkFollowUp(e){return this._http.post(this.rootUrl+"/v3/leads/follow-ups/bulk/create/",e)}}return e.\u0275fac=function(t){return new(t||e)(m.bc(We.c))},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Ee{constructor(){this.followUpResponseStatus=De.a.CALL_SCHEDULED}}class we{}var Le=n("glKu"),Me=n("yffR"),Oe=n("rmZX"),ke=n("JA5x"),_e=n("Ff2k"),Ne=n("ZyQt");function xe(e,t){if(1&e){const e=m.Yb();m.Xb(0,"li",19),m.Xb(1,"nz-list-item-meta",20),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().selectTemplate(n)}),m.Xb(2,"nz-list-item-meta-title"),m.Xb(3,"nz-tag",21),m.Xc(4),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit;m.Db(1),m.rc("nzDescription",e.letterType),m.Db(3),m.Zc(" ",e.language," ")}}function Ae(e,t){if(1&e){const e=m.Yb();m.Xb(0,"span",22),m.ec("click",function(){return m.Lc(e),m.ic().preview()}),m.Sb(1,"span",23),m.Wb()}}function Pe(e,t){if(1&e&&m.Sb(0,"span",24),2&e){const e=m.ic();m.rc("innerHtml",e.previewHtml,m.Mc)}}function Re(e,t){1&e&&(m.Xb(0,"p",25),m.Xc(1,"No Template Selected"),m.Wb())}let Ue=(()=>{class e{constructor(e,t,n,i){this._modalRef=e,this._notificaionService=t,this._templateHtmlHelperService=n,this.letterService=i,this.selectedLeads=new Set,this.onLetterSelected=new m.n,this.limit=20}ngOnInit(){this.getAllLetterTemplate()}getAllLetterTemplate(){this.letterTemplatesLoading=!0,this.letterService.fetchAllLetterTemplates().subscribe(e=>{this.letterTemplates=e,this.letterTemplates.forEach(e=>e.letterType=e.templateName.replace(" Template",""))},()=>{},()=>this.letterTemplatesLoading=!1)}selectTemplate(e){this.selectedTemplateId=e.id,this.selectedTemplateLanguage=e.language,this.selectedTemplate=e.html,this.previewHtml=this._templateHtmlHelperService.formatHtml(this.selectedTemplate)}preview(){const e=this._templateHtmlHelperService.formatHtml(this.selectedTemplate),t=window.open();t.document.write(e),t.document.close()}sentOutLetter(){this.selectedTemplateId||this.selectedTemplateLanguage?(this._modalRef.close({selectedTemplateId:this.selectedTemplateId,language:this.selectedTemplateLanguage,templateId:this.selectedTemplateId}),this.onLetterSelected.emit({selectedTemplateId:this.selectedTemplateId,language:this.selectedTemplateLanguage,templateId:this.selectedTemplateId})):this._notificaionService.warning("Enrollment letter","Please choose a letter template.")}showLetterPreview(){}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(f.b),m.Rb(Oe.a),m.Rb(Me.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["add-letter-follow-up"]],inputs:{selectedLeads:"selectedLeads"},outputs:{onLetterSelected:"onLetterSelected"},decls:26,vars:10,consts:[["nz-row","","nzGutter","24",1,"follow-up-container"],["nz-col","","nzSpan","24",2,"padding-right","10px","padding-left","10px"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","9"],["nz-typography","",1,"header"],["nz-row","","nzGutter","10",1,"list-container"],["nz-col","","nzSpan","24"],["nz-list","","nzSize","large",3,"nzDataSource","nzBordered","nzLoading"],["nz-list-item","","nzNoFlex","",4,"ngFor","ngForOf"],["nz-col","","nzSpan","15",2,"padding-right","10px","padding-left","20px"],["nz-row","","nzGutter","10",1,"preview-container"],["nz-col","","nzSpan","24",2,"display","flex","flex-direction","column","align-items","center"],["class","preview-btn",3,"click",4,"ngIf"],["class","preview",3,"innerHtml",4,"ngIf","ngIfElse"],["nz-row","","nzGutter","24",2,"margin-top","12px","text-align","right"],["nz-col","","nzSpan","19"],["nz-col","","nzSpan","5"],["nz-button","","nzType","primary",3,"click"],["noTemplateSelected",""],["nz-list-item","","nzNoFlex",""],[3,"nzDescription","click"],["nzColor","default",2,"cursor","pointer"],[1,"preview-btn",3,"click"],["nz-icon","","nzType","fullscreen","nzTheme","outline",2,"color","#fff","font-size","20px"],[1,"preview",3,"innerHtml"],["nz-typography","","nzType","secondary",2,"position","absolute","top","48%"]],template:function(e,t){if(1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"nz-card"),m.Xb(3,"div",2),m.Xb(4,"div",3),m.Xb(5,"p",4),m.Xc(6),m.jc(7,"translate"),m.Wb(),m.Xb(8,"div",5),m.Xb(9,"div",6),m.Xb(10,"ul",7),m.Vc(11,xe,5,2,"li",8),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(12,"div",9),m.Xb(13,"p",4),m.Xc(14," Preview "),m.Wb(),m.Xb(15,"div",10),m.Xb(16,"div",11),m.Vc(17,Ae,2,0,"span",12),m.Vc(18,Pe,1,1,"span",13),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(19,"div",14),m.Sb(20,"div",15),m.Xb(21,"div",16),m.Xb(22,"button",17),m.ec("click",function(){return t.sentOutLetter()}),m.Xc(23,"Send Letter"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Vc(24,Re,2,0,"ng-template",null,18,m.Wc)),2&e){const e=m.Ic(25);m.Db(6),m.Zc(" ",m.kc(7,8,"SMS.CHOOSE_FROM_TEMPLATE")," "),m.Db(4),m.rc("nzDataSource",t.letterTemplates)("nzBordered",!1)("nzLoading",t.letterTemplatesLoading),m.Db(1),m.rc("ngForOf",t.letterTemplates),m.Db(6),m.rc("ngIf",t.selectedTemplate&&null!=t.selectedTemplate),m.Db(1),m.rc("ngIf",t.selectedTemplate&&null!=t.selectedTemplate)("ngIfElse",e)}},directives:[z.c,z.a,ke.a,w.a,_e.a,o.p,o.q,M.a,O.a,k.a,_e.e,_e.f,_e.g,Ne.a,_.a],pipes:[X.a],styles:["nz-list[_ngcontent-%COMP%]{padding:14px 20px;height:460px}[_nghost-%COMP%]     .ant-list-items{height:460px;overflow:auto;padding:5px}[_nghost-%COMP%]     .ant-list-item{padding:7px 0}[_nghost-%COMP%]     .ant-list-item-meta-title{margin-bottom:0;margin-top:4px}.header[_ngcontent-%COMP%]{color:var(--primary-color);font:normal normal normal 12px/21px Nunito}.follow-up-container[_ngcontent-%COMP%]{margin-top:17px;height:575}nz-card[_ngcontent-%COMP%]{height:570px}.list-container[_ngcontent-%COMP%], .preview-container[_ngcontent-%COMP%]{margin-left:-5px;margin-right:-5px;height:450px;border:1px solid #f0f0f0;border-radius:5px}.preview-container[_ngcontent-%COMP%]{overflow:auto;padding:7px}.preview-btn[_ngcontent-%COMP%]{background-color:#0000009e;height:30px;width:30px;position:absolute;right:0;border-radius:5px;padding:5px;cursor:pointer}[_nghost-%COMP%]     .page img{width:100%;height:auto}"]}),e})();var Ve=n("rP/m");function Fe(e,t){1&e&&m.Sb(0,"div",12)}function Be(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",8),m.Xb(1,"button",9),m.ec("click",function(){return m.Lc(e),m.ic(2).onSelectFollowUpType("LETTER")}),m.Sb(2,"span",10),m.Xc(3," Letter "),m.Wb(),m.Vc(4,Fe,1,0,"div",11),m.Wb()}if(2&e){const e=m.ic(2);m.rc("nzSpan",8),m.Db(1),m.rc("nzLoading",e.saveBtnLoading),m.Db(3),m.rc("ngIf","LETTER"==e.selectedFollowUpType)}}function je(e,t){1&e&&m.Sb(0,"div",12)}function qe(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",8),m.Xb(1,"button",13),m.ec("click",function(){return m.Lc(e),m.ic(2).onSelectFollowUpType("SMS")}),m.Sb(2,"app-icons",14),m.Xc(3," SMS "),m.Wb(),m.Vc(4,je,1,0,"div",11),m.Wb()}if(2&e){const e=m.ic(2);m.rc("nzSpan",8),m.Db(1),m.rc("nzLoading",e.saveBtnLoading),m.Db(3),m.rc("ngIf","SMS"==e.selectedFollowUpType)}}function Ge(e,t){1&e&&m.Sb(0,"div",12)}function He(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",8),m.Xb(1,"button",13),m.ec("click",function(){return m.Lc(e),m.ic(2).onSelectFollowUpType("AUDIO_CALL")}),m.Sb(2,"app-icons",15),m.Xc(3," Audio Call "),m.Wb(),m.Vc(4,Ge,1,0,"div",11),m.Wb()}if(2&e){const e=m.ic(2);m.rc("nzSpan",8),m.Db(1),m.rc("nzLoading",e.saveBtnLoading),m.Db(1),m.rc("color","#ffffff"),m.Db(2),m.rc("ngIf","AUDIO_CALL"==e.selectedFollowUpType)}}function Ze(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"div",1),m.Vc(2,Be,5,3,"div",7),m.Vc(3,qe,5,3,"div",7),m.Vc(4,He,5,4,"div",7),m.Wb(),m.Ub()),2&e){const e=m.ic();m.Db(2),m.rc("ngIf",!1),m.Db(1),m.rc("ngIf",!1),m.Db(1),m.rc("ngIf",e.showAudioCallFollowUp)}}function Ye(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"add-letter-follow-up",16),m.ec("onLetterSelected",function(t){return m.Lc(e),m.ic().createFollowUp(t)}),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(1),m.rc("selectedLeads",e.selectedLeads)}}function $e(e,t){if(1&e){const e=m.Yb();m.Xb(0,"li",27),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic(2).selectTemplate(n)}),m.Xc(1),m.Wb()}if(2&e){const e=t.$implicit;m.Db(1),m.Zc(" ",e.title," ")}}function Ke(e,t){1&e&&(m.Xb(0,"div"),m.Xb(1,"div",28),m.Xc(2),m.jc(3,"translate"),m.Wb(),m.Wb()),2&e&&(m.Db(2),m.Zc("*",m.kc(3,1,"COMMON.REQUIRED"),""))}const Qe=function(e){return{border:e}};function Je(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",17),m.Xb(2,"div",18),m.Xb(3,"nz-card"),m.Xb(4,"div",19),m.Xb(5,"div",20),m.Xb(6,"strong",21),m.Xc(7),m.jc(8,"translate"),m.Wb(),m.Xb(9,"ul",22),m.Xc(10),m.Vc(11,$e,2,1,"li",23),m.Wb(),m.Wb(),m.Xb(12,"div",20),m.Xb(13,"strong",21),m.Xc(14," Message Preview "),m.Wb(),m.Xb(15,"textarea",24),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().message=t})("ngModelChange",function(){return m.Lc(e),m.ic().onChange()}),m.Wb(),m.Vc(16,Ke,4,3,"div",6),m.Xb(17,"label",25),m.Xb(18,"em"),m.Xc(19),m.jc(20,"translate"),m.Wb(),m.Wb(),m.Xb(21,"div",26),m.Xb(22,"button",9),m.ec("click",function(){return m.Lc(e),m.ic().createFollowUp()}),m.Sb(23,"app-icons",14),m.Xc(24," Log SMS "),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(7),m.Zc(" ",m.kc(8,10,"SMS.CHOOSE_FROM_TEMPLATE")," "),m.Db(2),m.rc("nzDataSource",e.templates),m.Db(1),m.Zc(" ",e.data," "),m.Db(1),m.rc("ngForOf",e.templates),m.Db(4),m.rc("ngStyle",m.yc(14,Qe,e.isValidMessage||0!==(null==e.message?null:e.message.length)?"":"1px solid red"))("ngModel",e.message),m.Db(1),m.rc("ngIf",!e.isValidMessage&&0==(null==e.message?null:e.message.length)),m.Db(3),m.ad("",e.message.length," ",m.kc(20,12,"SMS.CHARACTERS"),""),m.Db(3),m.rc("nzLoading",e.saveBtnLoading)}}function et(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",17),m.Xb(2,"div",18),m.Xb(3,"nz-card"),m.Xb(4,"div",19),m.Xb(5,"div",18),m.Xb(6,"div",29),m.Xb(7,"strong",30),m.Xc(8),m.jc(9,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(10,"div",18),m.Xb(11,"div",29),m.Xb(12,"app-appointment-datetimepicker",31),m.ec("appointmentScheduleChange",function(t){return m.Lc(e),m.ic().onAppointmentScheduleChange(t)}),m.Wb(),m.Wb(),m.Wb(),m.Sb(13,"div",32),m.Xb(14,"div",33),m.Xb(15,"button",34),m.ec("click",function(){return m.Lc(e),m.ic().createFollowUp()}),m.Sb(16,"app-icons",14),m.Xc(17," Log Audiocall "),m.Wb(),m.Wb(),m.Sb(18,"div",32),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(6),m.rc("nzSpan",8),m.Db(2),m.Yc(m.kc(9,4,"COMMON.DATE_TIME")),m.Db(3),m.rc("nzSpan",24),m.Db(4),m.rc("nzLoading",e.saveBtnLoading)}}let tt=(()=>{class e{constructor(e,t,n,i,o){this.smsTemplateService=e,this._datePipe=t,this._followUpService=n,this._modalRef=i,this.letterService=o,this.selectedFollowUpType=De.c.LETTER,this.showAllFollowUpTypes=!0,this.selectedLeads=new Array,this.limit=20,this.tags="ENROLMENT",this.message="",this.isValidMessage=!0,this.sendMessageBtnLoading=!1,this.appointment=new we,this.isLoggedInUserCaretaker=!1,this.showLetterFollowUp=!0,this.showSMSFollowUp=!0,this.showAudioCallFollowUp=!1}set isBulkOperation(e){e||(this.showAudioCallFollowUp=!0),this.bulkFollowUps=e}ngOnInit(){this.getAllTemplates(),this.getAllLetterTemplate(),this.appointment.schedule=new Ie.a,"CARE_TAKER"===localStorage.getItem("loggedInUserAccountType")&&(this.isLoggedInUserCaretaker=!0),this.isLoggedInUserCaretaker&&(this.appointment.ownerType=Se.a.CARE_TAKER)}getAllTemplates(e=1){this.smsTemplatesLoading=!0,this.smsTemplateService.getSMSTemplates(this.limit,e-1,this.tags).subscribe(e=>{this.templates=null==e?void 0:e.result,this.smsTemplatesLoading=!1})}getAllLetterTemplate(){this.letterTemplatesLoading=!0,this.letterService.fetchDefaultLetterTemplates().subscribe(e=>{this.letterTemplates=e},()=>{},()=>this.letterTemplatesLoading=!1)}onSelectFollowUpType(e){this.selectedFollowUpType=e}selectTemplate(e){this.sendMessageBtnLoading=!1,this.message=e.template}onAppointmentScheduleChange(e){var t,n;e.valid?(this.appointment.schedule.startsOn=null==e?void 0:e.startTime,this.appointment.schedule.startDate=null===(t=null==e?void 0:e.startTime)||void 0===t?void 0:t.getTime(),this.appointment.schedule.endDate=null===(n=null==e?void 0:e.endTime)||void 0===n?void 0:n.getTime(),this.appointment.dateParam=this._datePipe.transform(e.startTime,"yyyy-MM-dd")):(this.appointment.schedule.startsOn=void 0,this.appointment.schedule.startDate=void 0,this.appointment.schedule.endDate=void 0)}createFollowUp(e){let t=new Ee;switch(this.selectedFollowUpType){case De.c.AUDIO_CALL:t.leadCallAppointment=this.appointment,t.followUpResponseStatus=De.a.CALL_SCHEDULED;break;case De.c.SMS:t.smsTemplate=this.message,t.followUpResponseStatus=De.a.SMS_SEND;break;case De.c.LETTER:this.bulkFollowUps&&(t.leadIds=Array.from(this.selectedLeads)),t.templateId=e.selectedTemplateId,t.templateLanguage=e.language,t.followUpResponseStatus=De.a.LETTER_SEND}t.type=this.selectedFollowUpType,this.bulkFollowUps?this._followUpService.createBulkFollowUp({type:this.selectedFollowUpType,leadIds:this.selectedLeads,templateId:null}).subscribe(e=>{this._modalRef.close(t)},()=>{},()=>this._modalRef.close(t)):this._followUpService.createFollowUp(this.lead.leadId,t).subscribe(e=>{this._modalRef.close(t)})}onClose(){this._modalRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(Xe.a),m.Rb(o.e),m.Rb(Te),m.Rb(E.e),m.Rb(ye.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-add-follow-up"]],inputs:{title:"title",lead:"lead",selectedFollowUpType:"selectedFollowUpType",showAllFollowUpTypes:"showAllFollowUpTypes",selectedLeads:"selectedLeads",isBulkOperation:"isBulkOperation"},decls:11,vars:8,consts:[[1,"container"],["nz-row","","nzGutter","24"],["nz-col","",1,"title",3,"nzSpan"],["nz-col","",2,"text-align","left",3,"nzSpan"],["nz-col","",2,"text-align","right",3,"nzSpan"],["nz-icon","","nzType","close","nzTheme","outline",1,"close-btn",3,"click"],[4,"ngIf"],["nz-col","","style","text-align: center; display: flex; flex-direction: column;",3,"nzSpan",4,"ngIf"],["nz-col","",2,"text-align","center","display","flex","flex-direction","column",3,"nzSpan"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","mail","nzTheme","outline"],["class","triangle-up",4,"ngIf"],[1,"triangle-up"],["nz-button","","nzType","primary",2,"display","flex","text-align","center",3,"nzLoading","click"],["name","sms","size","16px"],["name","audioCall","size","16px",1,"button-icon",3,"color"],[3,"selectedLeads","onLetterSelected"],["nz-row","","nzGutter","64",1,"follow-up-container"],["nz-col","","nzSpan","24"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","12"],[1,"header"],["nz-list","","nzBordered","","nzSize","large",3,"nzDataSource"],["nz-list-item","","nzNoFlex","","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["disabled","","rows","2","nz-input","","placeholder","Type here...","required","",1,"message-textarea",3,"ngStyle","ngModel","ngModelChange"],[1,"message-count"],[2,"position","absolute","bottom","10%","left","30%"],["nz-list-item","","nzNoFlex","",2,"cursor","pointer",3,"click"],[1,"required-text"],["nz-col","",3,"nzSpan"],[1,"header",2,"padding-left","5px"],[3,"appointmentScheduleChange"],["nz-col","","nzSpan","9",2,"margin-top","30px","text-align","center"],["nz-col","","nzSpan","6",2,"margin-top","30px","padding","0px","text-align","center"],["nz-button","","nzType","primary",2,"display","flex",3,"nzLoading","click"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xc(3),m.Wb(),m.Sb(4,"div",3),m.Xb(5,"div",4),m.Xb(6,"span",5),m.ec("click",function(){return t.onClose()}),m.Wb(),m.Wb(),m.Wb(),m.Vc(7,Ze,5,3,"ng-container",6),m.Vc(8,Ye,2,1,"ng-container",6),m.Vc(9,Je,25,16,"ng-container",6),m.Vc(10,et,19,6,"ng-container",6),m.Wb()),2&e&&(m.Db(2),m.rc("nzSpan",8),m.Db(1),m.Zc(" ",t.title," "),m.Db(1),m.rc("nzSpan",14),m.Db(1),m.rc("nzSpan",2),m.Db(2),m.rc("ngIf",t.showAllFollowUpTypes),m.Db(1),m.rc("ngIf",t.showLetterFollowUp&&"LETTER"==t.selectedFollowUpType),m.Db(1),m.rc("ngIf",t.showSMSFollowUp&&"SMS"==t.selectedFollowUpType),m.Db(1),m.rc("ngIf",t.showAudioCallFollowUp&&"AUDIO_CALL"==t.selectedFollowUpType))},directives:[z.c,z.a,k.a,_.a,o.q,M.a,O.a,Le.a,Ue,ke.a,_e.a,o.p,S.b,a.d,a.C,o.r,a.u,a.x,_e.e,Ve.a],pipes:[X.a],styles:["[_nghost-%COMP%]     .ant-modal-content{background-color:#eff2f0 0 0 no-repeat padding-box}#title[_ngcontent-%COMP%]{padding-left:1%;font-size:14px;font-weight:600;border-left:3px solid var(--primary-color);cursor:move}.centerize[_ngcontent-%COMP%]{text-align:center}.filter-card[_ngcontent-%COMP%]{margin:15px;border-radius:10px;vertical-align:bottom}.required-text[_ngcontent-%COMP%]{color:#ff2e2e;float:left;position:absolute}.ant-tag[_ngcontent-%COMP%]{font-size:10px}.filter-tag-div[_ngcontent-%COMP%], .forms-tag-div[_ngcontent-%COMP%]{margin-top:10px}.filter-header[_ngcontent-%COMP%]{font:normal normal normal 12px/21px Nunito;letter-spacing:0;color:var(--primary-color);opacity:1;vertical-align:top}.message-textarea[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey);border-radius:5px;opacity:1;width:100%;min-height:150px;max-height:150px;resize:none}.demo-infinite-container[_ngcontent-%COMP%]{height:300px;border:1px solid var(--grey);border-radius:4px}nz-list[_ngcontent-%COMP%]{padding:14px 20px}[_nghost-%COMP%]     .ant-list{min-height:280px}.template[_ngcontent-%COMP%]{text-align:justify;font:normal normal normal 11px/15px Nunito;letter-spacing:0;color:var(--light-black);opacity:1}.message-count[_ngcontent-%COMP%]{float:right;margin-top:4px}.header[_ngcontent-%COMP%]{color:var(--primary-color);font:normal normal normal 12px/21px Nunito}.follow-up-container[_ngcontent-%COMP%]{margin-top:17px;height:575}nz-card[_ngcontent-%COMP%]{height:570px}.triangle-up[_ngcontent-%COMP%]{position:absolute;bottom:-27px;display:block;width:20px;height:20px;overflow:hidden;background:#fff;pointer-events:none;left:47%;border:1px solid #f0f0f0;border-right:none;border-bottom:none;rotate:45deg;z-index:1}  .vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}.title[_ngcontent-%COMP%]{text-align:left;margin-top:20px;border-left:3px solid var(--primary-color)}.close-btn[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}.close-btn[_ngcontent-%COMP%]{margin-top:25px;color:var(--error-color);cursor:pointer}"]}),e})(),nt=(()=>{class e{constructor(e){this._modalService=e}initEnrolment(e=new Array,t=!1,n,i,o=!1){return this._modalService.create({nzContent:tt,nzComponentParams:{lead:i,selectedLeads:e,isBulkOperation:t,selectedFollowUpType:n,title:i&&i.status==De.e.ELIGIBLE?"Start followup with":"Create next follow-up",showAllFollowUpTypes:o},nzWrapClassName:"vertical-center-modal",nzTitle:null,nzClosable:!1,nzMaskClosable:!1,nzMask:!0,nzOkText:null,nzCancelText:null,nzFooter:null,nzWidth:70*window.innerWidth/100,nzBodyStyle:{paddingTop:"0px",height:80*window.innerHeight/100+" px"}})}showConfirm(){this._modalService.confirm({nzTitle:"Do you Want to close the tab?",nzContent:"When clicked the OK button, this dialog will be closed after 1 second",nzOnOk:()=>this.close()})}close(){window.close()}}return e.\u0275fac=function(t){return new(t||e)(m.bc(E.f))},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),it=(()=>{class e{constructor(){this.timer=new ct}}return e.getStep=(e,t)=>t.find(t=>t.order==e),e})();var ot=function(e){return e.COMPLETE="COMPLETE",e.DRAFT="DRAFT",e.INVALIDATED="INVALIDATED",e}({}),at=function(e){return e.GLOBAL="GLOBAL",e.GLOBAL_TO_SUB_TENANTS="GLOBAL_TO_SUB_TENANTS",e.TENANT_SPECIFIC="TENANT_SPECIFIC",e.USER_SPECIFIC="USER_SPECIFIC",e}({});class lt{}class ct{constructor(){this.timeLog=new Array}}class rt extends class{}{}var st=n("2lmJ"),dt=n("fhRi"),bt=function(e){return e.SEND_SMS="SEND_SMS",e.UPDATE_AVAILABLE_TIME="UPDATE_AVAILABLE_TIME",e.UPDATE_TIMEZONE="UPDATE_TIMEZONE",e.ADD_NEW_NUMBER="ADD_NEW_NUMBER",e.UPDATE_NAME_PREFERENCE="UPDATE_NAME_PREFERENCE",e.SCHEDULE_APPOINTMENT="SCHEDULE_APPOINTMENT",e}({}),ut=n("nLCl");let pt=(()=>{class e{constructor(e){this._http=e,this.rootUrl=p.g.url}initEnrolment(e,t){return this._http.post(this.rootUrl+"/v2/leads/init-enrolment",{userIds:e,templateId:t,userKind:"LEAD",templateKind:"LETTER"})}initBulkEnrolment(e,t){return this._http.post(this.rootUrl+"/v3/direct-mail/new-mail/bulk",{leadIds:e,templateId:t}).pipe()}updateContact(e,t,n="LEAD"){let i;return"LEAD"==n&&(i=this.rootUrl+"/v2/leads/"+e+"/update-new-contact?type="+n),this._http.put(i,t)}updateAvailableHours(e,t,n="LEAD"){let i;return"LEAD"==n&&(i=this.rootUrl+"/v2/leads/"+e+"/update-available-hours?type="+n),this._http.put(i,t)}updatePreferredName(e,t,n="LEAD"){let i;return"LEAD"==n&&(i=this.rootUrl+"/v2/leads/"+e+"/update-preferred-name?type="+n),this._http.put(i,t)}updateTimezone(e,t,n="LEAD"){let i;return"LEAD"==n&&(i=this.rootUrl+"/v2/leads/"+e+"/update-timezone?type="+n),this._http.put(i,{timezone:t})}createLeadAppointmentRequest(e,t,n="LEAD"){let i;return"LEAD"==n&&(i=this.rootUrl+"/v2/leads/appointment-requests/"+e+"?type="+n),this._http.post(i,t)}updateLeadAppointmentRequest(e,t,n="LEAD"){let i;return"LEAD"==n&&(i=this.rootUrl+"/v2/leads/appointment-requests/"+e+"?type="+n),this._http.put(i,t)}markNotEligible(e,t,n){return this._http.put(`${this.rootUrl}/v2/leads/${e}/mark-not-eligible`,{type:t,reason:n})}}return e.\u0275fac=function(t){return new(t||e)(m.bc(We.c))},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ht=n("zAKX"),gt=n("m3lz");function mt(e,t){if(1&e&&(m.Sb(0,"nz-option",10),m.jc(1,"userLocations")),2&e){const e=t.$implicit;m.vc("nzLabel","",null==e||null==e.user?null:e.user.firstName," ",null==e||null==e.user?null:e.user.lastName," - ",m.kc(1,4,null==e||null==e.user?null:e.user.locations),""),m.rc("nzValue",e.user)}}function ft(e,t){if(1&e&&(m.Vb(0),m.Vc(1,mt,2,6,"nz-option",9),m.Ub()),2&e){const e=t.ngIf;m.Db(1),m.rc("ngForOf",e.result)}}function vt(e,t){1&e&&(m.Xb(0,"nz-option",11),m.Sb(1,"app-icons",12),m.Xc(2," Loading Data... "),m.Wb())}let Ct=(()=>{class e{constructor(e,t,n,i){this._datePipe=e,this.staffService=t,this._enrolmentService=n,this._modalRef=i,this.appointment=new Se.b}ngOnInit(){this.value?this.appointment=this.value:(this.appointment=new Se.b,this.appointment.schedule=new Ie.a,this.appointment.serviceIds=new Array,this.appointment.type=Se.c.AUDIO_CALL)}searchCaretakers(e){this.caretakers$=this.staffService.fetchStaffMembers(ut.a.MONITORING_STAFF,0,100,e)}onAppointmentScheduleChange(e){var t,n;this.caretakers$=void 0,e.valid?(this.appointment.schedule.startsOn=null==e?void 0:e.startTime,this.appointment.schedule.startDate=null===(t=null==e?void 0:e.startTime)||void 0===t?void 0:t.getTime(),this.appointment.schedule.endDate=null===(n=null==e?void 0:e.endTime)||void 0===n?void 0:n.getTime(),this.appointment.dateParam=this._datePipe.transform(e.startTime,"yyyy-MM-dd")):(this.appointment.schedule.startsOn=void 0,this.appointment.schedule.startDate=void 0,this.appointment.schedule.endDate=void 0),this.appointment.title="First nurse call"}save(){this.appointment.attenderId=this.selectedCaretaker.id,this.appointment.attendeeId=this.userId,this.appointment.tenantId=localStorage.getItem("loggedInTenant"),this._modalRef.close({response:this.appointment,noSubscriber:!0})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(o.e),m.Rb(st.a),m.Rb(pt),m.Rb(E.e))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-appointment"]],inputs:{userId:"userId",value:"value",lead:"lead",customComponentsValuesMap:"customComponentsValuesMap"},features:[m.Cb([o.e])],decls:28,vars:28,consts:[[1,"appointments-card"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"appointmentScheduleChange"],["nzSize","large",1,"full-width",3,"nzShowSearch","nzDisabled","ngModel","nzServerSearch","nzPlaceHolder","ngModelChange","nzOnSearch"],[4,"ngIf","ngIfElse"],["staffLoading",""],["nz-col","","nzOffset","16",1,"align-right",3,"nzSpan"],["nzSize","large","nz-button","","nzType","primary",3,"click"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nzDisabled","","nzCustomContent",""],["name","loading","size","12px"]],template:function(e,t){if(1&e&&(m.Xb(0,"nz-card",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"app-appointment-datetimepicker",3),m.ec("appointmentScheduleChange",function(e){return t.onAppointmentScheduleChange(e)}),m.Wb(),m.Wb(),m.Wb(),m.Sb(4,"br"),m.Sb(5,"br"),m.Sb(6,"br"),m.Xb(7,"div",1),m.Xb(8,"div",2),m.Xb(9,"strong"),m.Xc(10),m.jc(11,"translate"),m.jc(12,"translate"),m.jc(13,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(14,"div",1),m.Xb(15,"div",2),m.Xb(16,"nz-select",4),m.ec("ngModelChange",function(e){return t.selectedCaretaker=e})("nzOnSearch",function(e){return t.searchCaretakers(e)}),m.jc(17,"translate"),m.Vc(18,ft,2,1,"ng-container",5),m.jc(19,"async"),m.Vc(20,vt,3,0,"ng-template",null,6,m.Wc),m.Wb(),m.Wb(),m.Wb(),m.Sb(22,"br"),m.Sb(23,"br"),m.Xb(24,"div",1),m.Xb(25,"div",7),m.Xb(26,"button",8),m.ec("click",function(){return t.save()}),m.Xc(27," Schedule appointment "),m.Wb(),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.Ic(21);m.Db(1),m.rc("nzGutter",24),m.Db(1),m.rc("nzSpan",24),m.Db(5),m.rc("nzGutter",24),m.Db(1),m.rc("nzSpan",8),m.Db(2),m.bd("",m.kc(11,18,"COMMON.PHYSICIAN"),"\\",m.kc(12,20,"PATIENT.MONITORING_STAFF")," - ",m.kc(13,22,"SITE"),""),m.Db(4),m.rc("nzGutter",24),m.Db(1),m.rc("nzSpan",24),m.Db(1),m.tc("nzPlaceHolder"," ",m.kc(17,24,"COMMON.AVAILABLE_CLINICIANS")," "),m.rc("nzShowSearch",!0)("nzDisabled",!(null!=t.appointment&&null!=t.appointment.schedule&&t.appointment.schedule.startDate))("ngModel",t.selectedCaretaker)("nzServerSearch",!0),m.Db(2),m.rc("ngIf",m.kc(19,26,t.caretakers$))("ngIfElse",e),m.Db(6),m.rc("nzGutter",24),m.Db(1),m.rc("nzSpan",4)}},directives:[ke.a,z.c,z.a,Ve.a,ht.d,a.u,a.x,o.q,M.a,O.a,k.a,o.p,ht.a,Le.a],pipes:[X.a,o.b,gt.a],styles:[""]}),e})();function zt(e,t){if(1&e&&(m.Xb(0,"label",5),m.Xc(1),m.Wb()),2&e){const e=t.$implicit;m.rc("nzValue",e.number),m.Db(1),m.bd(" (",e.countryCode,") ",e.number," (",e.type,")")}}function St(e,t){1&e&&(m.Xb(0,"label",22),m.Xc(1," Required "),m.Wb())}function It(e,t){1&e&&(m.Xb(0,"label",22),m.Xc(1," Phone number must be at least 6 characters long. "),m.Wb())}function Xt(e,t){1&e&&(m.Xb(0,"label",22),m.Xc(1," Phone number must be less than 16 characters. "),m.Wb())}function yt(e,t){1&e&&(m.Xb(0,"label",22),m.Xc(1," Required "),m.Wb())}const Dt=function(e){return{border:e}};function Wt(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",6),m.Xb(1,"div",7),m.Xb(2,"form",8,9),m.ec("ngSubmit",function(){return m.Lc(e),m.ic().save()}),m.Xb(4,"div",10),m.Xb(5,"div",11),m.Xb(6,"h4"),m.Xc(7,"Phone number*"),m.Wb(),m.Xb(8,"nz-input-group",12),m.Xb(9,"input",13,14),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().contact.number=t}),m.Wb(),m.Wb(),m.Vc(11,St,2,0,"label",15),m.Vc(12,It,2,0,"label",15),m.Vc(13,Xt,2,0,"label",15),m.Wb(),m.Xb(14,"div",11),m.Xb(15,"h4"),m.Xc(16,"Contact Type*"),m.Wb(),m.Xb(17,"nz-select",16,17),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().contact.type=t}),m.Sb(19,"nz-option",18),m.Sb(20,"nz-option",19),m.Sb(21,"nz-option",20),m.Wb(),m.Wb(),m.Vc(22,yt,2,0,"label",15),m.Wb(),m.Sb(23,"br"),m.Xb(24,"button",21),m.Xc(25,"Save"),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.Ic(3),t=m.Ic(10),n=m.Ic(18),i=m.ic();m.Db(8),m.tc("nzAddOnBefore","[",i.countryCode,"]"),m.Db(1),m.rc("ngModel",i.contact.number),m.Db(2),m.rc("ngIf",(t.dirty||t.touched)&&(null==t.errors?null:t.errors.required)),m.Db(1),m.rc("ngIf",((null==t?null:t.dirty)||(null==t?null:t.touched))&&(null==t||null==t.errors?null:t.errors.minlength)),m.Db(1),m.rc("ngIf",((null==t?null:t.dirty)||(null==t?null:t.touched))&&(null==t||null==t.errors?null:t.errors.maxlength)),m.Db(4),m.rc("ngModel",i.contact.type)("ngStyle",m.yc(9,Dt,(n.dirty||n.touched)&&n.errors?"1px solid red":"")),m.Db(5),m.rc("ngIf",(n.dirty||n.touched)&&n.errors),m.Db(2),m.rc("disabled",e.invalid)}}function Tt(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",6),m.Xb(1,"button",23),m.ec("click",function(){return m.Lc(e),m.ic().submit()}),m.Xc(2,"Submit"),m.Wb(),m.Wb()}}let Et=(()=>{class e{constructor(e,t,n){this._modalRef=e,this._enrolmentService=t,this._dataSharingService=n,this._dataSharingService.tenantSettings.subscribe(e=>{e&&(this.countryCode=null==e?void 0:e.countryCode,this.initPhoneNumberObject())})}ngOnInit(){this.phoneNumbers=this.lead.patientInfo.phoneNumbers,this.getselectedNumber(this.value.number)}getselectedNumber(e){if(e&&null!=e)for(let t of this.phoneNumbers)if(t.number==e)return this.selectedNumber=t.number,this.contact=t,!0}initPhoneNumberObject(){this.contact={number:"",extension:0,countryCode:this.countryCode,preferred:!1,label:"",type:ie.c.MOBILE,notificationConfig:new Map}}validate(){return this.contact.number&&this.contact.countryCode&&this.contact.type}save(){this.validate()&&this.createNewContact()}submit(){this.getselectedNumber(this.selectedNumber),this._modalRef.close({response:this.contact,noSubscriber:!0})}createNewContact(){this.contact.countryCode=this.countryCode;const e=this._enrolmentService.updateContact(this.userId,this.contact,"LEAD");this._modalRef.close({response:this.contact,requestSubscription:e})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(pt),m.Rb(ne.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-update-contact"]],inputs:{lead:"lead",userId:"userId",type:"type",value:"value",customComponentsValuesMap:"customComponentsValuesMap"},decls:8,vars:4,consts:[[1,"container"],[3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["nz-radio","","nzValue","NEW_NUMBER"],["nz-row","","nzGutter","64",4,"ngIf"],["nz-radio","",3,"nzValue"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[3,"ngSubmit"],["f","ngForm"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],[3,"nzAddOnBefore"],["oninput","this.value=this.value.replace(/[^\\d]/,'')","nz-input","","readonly","","required","","minlength","6","maxlength","15","onfocus","this.removeAttribute('readonly')","name","number",3,"ngModel","ngModelChange"],["number","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],["name","type","required","",3,"ngModel","ngStyle","ngModelChange"],["type","ngModel"],["nzValue","MOBILE","nzLabel","Mobile Number"],["nzValue","LANDLINE","nzLabel","Home Number"],["nzValue","OTHER","nzLabel","Other Number"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"],["nz-button","","nzType","primary","nzSize","large",3,"click"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div"),m.Xb(2,"nz-radio-group",1),m.ec("ngModelChange",function(e){return t.selectedNumber=e}),m.Vc(3,zt,2,4,"label",2),m.Xb(4,"label",3),m.Xc(5," Add new number... "),m.Vc(6,Wt,26,11,"div",4),m.Wb(),m.Wb(),m.Vc(7,Tt,3,0,"div",4),m.Wb(),m.Wb()),2&e&&(m.Db(2),m.rc("ngModel",t.selectedNumber),m.Db(1),m.rc("ngForOf",t.phoneNumbers),m.Db(3),m.rc("ngIf","NEW_NUMBER"===t.selectedNumber),m.Db(1),m.rc("ngIf",t.selectedNumber&&null!=t.selectedNumber&&"NEW_NUMBER"!=t.selectedNumber))},directives:[de.c,a.u,a.x,o.p,de.b,o.q,z.c,z.a,a.F,a.v,a.w,k.a,S.c,S.b,a.d,a.C,a.q,a.p,ht.d,o.r,ht.a,M.a,O.a,w.a],styles:["h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}h4[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-btn{width:75%;display:block;margin:auto}input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     .ant-typography-danger{margin-top:5px;float:right}[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}[_nghost-%COMP%]     .ant-radio-group{width:100%}"]}),e})();var wt=n("TaO5"),Lt=n("ix5O");function Mt(e,t){if(1&e&&m.Sb(0,"nz-option",20),2&e){const e=t.$implicit;m.rc("nzValue",null==e?null:e.key)("nzLabel",null==e?null:e.value)}}let Ot=(()=>{class e{constructor(e,t,n){this._modalRef=e,this.datePipe=t,this._enrolmentService=n,this.timezones=Object(oe.e)(),this.fromTime=null,this.toTime=null,this.allChecked=!1,this.indeterminate=!0,this.checkOptionsOne=[{label:"Mondays",value:"Mondays",checked:!1},{label:"Tuesdays",value:"Tuesdays",checked:!1},{label:"Wednesdays",value:"Wednesdays",checked:!1},{label:"Thursdays",value:"Thursdays",checked:!1},{label:"Fridays",value:"Fridays",checked:!1}]}ngOnInit(){if(this.value){let e=new Set;this.value.availableHours.days.forEach(t=>e.add(t)),this.checkOptionsOne.forEach(t=>{t.checked=e.has(t.value)}),this.selectedTimezone=this.value.availableHours.timezone,this.fromTime=this.value.availableHours.fromTime,this.toTime=this.value.availableHours.toTime}else this.selectedTimezone=this.customComponentsValuesMap.get("TENANT_TIMEZONE")}updateAllChecked(){this.indeterminate=!1,this.checkOptionsOne=this.checkOptionsOne.map(this.allChecked?e=>Object.assign(Object.assign({},e),{checked:!0}):e=>Object.assign(Object.assign({},e),{checked:!1}))}updateSingleChecked(){this.checkOptionsOne.every(e=>!e.checked)?(this.allChecked=!1,this.indeterminate=!1):this.checkOptionsOne.every(e=>e.checked)?(this.allChecked=!0,this.indeterminate=!1):this.indeterminate=!0}onTimeChange(e,t){}onSubmit(){let e={availableHours:{days:this.checkOptionsOne.filter(e=>e.checked).map(e=>e.value),fromTime:this.fromTime,toTime:this.toTime},timezone:this.selectedTimezone};const t=this._enrolmentService.updateAvailableHours(this.userId,e);this._modalRef.close({response:e,requestSubscription:t})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(o.e),m.Rb(pt))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-update-available-time"]],inputs:{userId:"userId",value:"value",customComponentsValuesMap:"customComponentsValuesMap"},features:[m.Cb([o.e])],decls:30,vars:9,consts:[[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[2,"border-bottom","1px solid rgb(233, 233, 233)","padding-bottom","10px"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelChange"],["nz-col","","nzSpan","24",2,"margin-top","20px","padding-left","0px !important"],[3,"ngModel","ngModelChange"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%","margin-left","32px"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%"],["nz-col","","nzSpan","11",2,"width","100%","margin-left","32px"],["nzFormat","h:mm a",3,"ngModel","nzUse12Hours","ngModelChange"],["nz-col","","nzSpan","11",2,"width","100%"],["nz-col","","nzSpan","12",2,"margin-left","32px","margin-top","20px","width","100%"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","12",2,"margin-left","32px","width","100%"],["nzShowSearch","","nzAllowClear","",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-col","","nzSpan","18"],["nz-col","","nzSpan","4",2,"margin-top","32px"],["nz-button","","nzType","primary",3,"click"],[3,"nzValue","nzLabel"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"div",3),m.Xb(4,"label",4),m.ec("ngModelChange",function(e){return t.allChecked=e})("ngModelChange",function(){return t.updateAllChecked()}),m.Xc(5," Check all "),m.Wb(),m.Wb(),m.Xb(6,"div",5),m.Xb(7,"nz-checkbox-group",6),m.ec("ngModelChange",function(e){return t.checkOptionsOne=e})("ngModelChange",function(){return t.updateSingleChecked()}),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(8,"div",1),m.Xb(9,"div",7),m.Xc(10," Available from: "),m.Wb(),m.Xb(11,"div",8),m.Xc(12," Available till: "),m.Wb(),m.Wb(),m.Xb(13,"div",1),m.Xb(14,"div",9),m.Xb(15,"nz-time-picker",10),m.ec("ngModelChange",function(e){return t.fromTime=e})("ngModelChange",function(e){return t.onTimeChange(e,"FROM")}),m.Wb(),m.Wb(),m.Xb(16,"div",11),m.Xb(17,"nz-time-picker",10),m.ec("ngModelChange",function(e){return t.toTime=e})("ngModelChange",function(e){return t.onTimeChange(e,"TO")}),m.Wb(),m.Wb(),m.Wb(),m.Xb(18,"div",1),m.Xb(19,"div",12),m.Xb(20,"p",13),m.Xc(21," Timezone "),m.Wb(),m.Wb(),m.Xb(22,"div",14),m.Xb(23,"nz-select",15),m.ec("ngModelChange",function(e){return t.selectedTimezone=e}),m.Vc(24,Mt,1,2,"nz-option",16),m.Wb(),m.Wb(),m.Wb(),m.Xb(25,"div",1),m.Sb(26,"div",17),m.Xb(27,"div",18),m.Xb(28,"button",19),m.ec("click",function(){return t.onSubmit()}),m.Xc(29,"Submit"),m.Wb(),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(4),m.rc("ngModel",t.allChecked)("nzIndeterminate",t.indeterminate),m.Db(3),m.rc("ngModel",t.checkOptionsOne),m.Db(8),m.rc("ngModel",t.fromTime)("nzUse12Hours",!0),m.Db(2),m.rc("ngModel",t.toTime)("nzUse12Hours",!0),m.Db(6),m.rc("ngModel",t.selectedTimezone),m.Db(1),m.rc("ngForOf",t.timezones))},directives:[z.c,z.a,wt.a,a.u,a.x,wt.b,w.a,Lt.a,ht.d,o.p,M.a,O.a,k.a,ht.a],styles:[""]}),e})();function kt(e,t){if(1&e){const e=m.Yb();m.Xb(0,"input",13),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().customName=t}),m.Wb()}if(2&e){const e=m.ic();m.rc("ngModel",e.customName)}}let _t=(()=>{class e{constructor(e,t){this._modalRef=e,this._enrolmentService=t}ngOnInit(){if(this.firstName=this.lead.patientInfo.firstName,this.lastName=this.lead.patientInfo.lastName,this.value){switch(this.value.preferredName){case this.firstName+" "+this.lastName:this.radioValue="FN_LN";break;case this.lastName+" "+this.firstName:this.radioValue="LN_FN";break;case this.firstName:this.radioValue="FN";break;case this.lastName:this.radioValue="LN";break;default:this.radioValue="CUSTOM",this.customName=this.value.preferredName}this.preferredName=this.value.preferredName}}onPreferredNameChange(e){switch(e){case"FN_LN":this.preferredName=this.firstName+" "+this.lastName;break;case"LN_FN":this.preferredName=this.lastName+" "+this.firstName;break;case"FN":this.preferredName=this.firstName;break;case"LN":this.preferredName=this.lastName;break;case"CUSTOM":this.preferredName=this.customName;break;default:this.preferredName=this.firstName+" "+this.lastName}}submit(){"CUSTOM"==this.radioValue&&(this.preferredName=this.customName);const e={preferredName:this.preferredName},t=this._enrolmentService.updatePreferredName(this.userId,e);this._modalRef.close({response:e,requestSubscription:t})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(pt))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-update-preferred-name"]],inputs:{userId:"userId",lead:"lead",value:"value",customComponentsValuesMap:"customComponentsValuesMap"},decls:20,vars:8,consts:[[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","FN_LN"],["nz-radio","","nzValue","LN_FN"],["nz-radio","","nzValue","FN"],["nz-radio","","nzValue","LN"],["nz-radio","","nzValue","CUSTOM"],["type","text","nz-input","",3,"ngModel","ngModelChange",4,"ngIf"],["nz-col","","nzSpan","18"],["nz-col","","nzSpan","4",2,"margin-top","32px"],["nz-button","","nzType","primary",3,"click"],["type","text","nz-input","",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"nz-radio-group",3),m.ec("ngModelChange",function(e){return t.radioValue=e})("ngModelChange",function(e){return t.onPreferredNameChange(e)}),m.Xb(4,"label",4),m.Xc(5),m.Wb(),m.Xb(6,"label",5),m.Xc(7),m.Wb(),m.Xb(8,"label",6),m.Xc(9),m.Wb(),m.Xb(10,"label",7),m.Xc(11),m.Wb(),m.Xb(12,"label",8),m.Xc(13," Custom... "),m.Vc(14,kt,1,1,"input",9),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(15,"div",1),m.Sb(16,"div",10),m.Xb(17,"div",11),m.Xb(18,"button",12),m.ec("click",function(){return t.submit()}),m.Xc(19,"Submit"),m.Wb(),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(3),m.rc("ngModel",t.radioValue),m.Db(2),m.ad("",t.firstName," ",t.lastName,""),m.Db(2),m.ad("",t.lastName," ",t.firstName,""),m.Db(2),m.Yc(t.firstName),m.Db(2),m.Yc(t.lastName),m.Db(3),m.rc("ngIf","CUSTOM"===t.radioValue))},directives:[z.c,z.a,de.c,a.u,a.x,de.b,o.q,M.a,O.a,k.a,S.b,a.d],styles:["[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}input[_ngcontent-%COMP%]{width:350px;margin-left:10px}"]}),e})(),Nt=(()=>{class e{transform(e,t){return t.forEach((t,n)=>{-1!=e.search(n)&&(e=e.replace(n,t))}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m.Qb({name:"keyValueReplace",type:e,pure:!0}),e})(),xt=(()=>{class e{transform(e,t,n,i="IS_VALID"){let o,a=!0;return null!=n&&0!=n.length&&n.findIndex(e=>"REQUIRED"==e.type)>-1&&(null==e||null==e||0==e.length||""==e)?(a=!1,o="Required","IS_VALID"==i?a:"Required"):a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m.Qb({name:"isValid",type:e,pure:!0}),e})();function At(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"date"),m.Ub()),2&e){const e=m.ic(3);m.Db(1),m.Zc(" ",m.lc(2,1,null==e.component||null==e.component.time?null:e.component.time.value,"dd MMM yyyy hh:mm a")," ")}}function Pt(e,t){if(1&e&&(m.Xb(0,"div",11),m.Xc(1),m.Wb()),2&e){const e=m.ic(3);m.Db(1),m.Zc(" ",e.component.radioButton.label," ")}}function Rt(e,t){1&e&&m.Sb(0,"div",8)}function Ut(e,t){if(1&e&&(m.Xb(0,"label",14),m.Xc(1),m.jc(2,"keyValueReplace"),m.Wb()),2&e){const e=t.$implicit,n=m.ic(3);m.rc("nzValue",e.value),m.Db(1),m.Zc(" ",m.lc(2,2,e.label,n.variablesMap)," ")}}function Vt(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",7),m.Xb(2,"div",8),m.Vc(3,At,3,4,"ng-container",0),m.Wb(),m.Vc(4,Pt,2,1,"div",9),m.Vc(5,Rt,1,0,"div",10),m.Xb(6,"div",11),m.Xb(7,"nz-radio-group",12),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(2).component.radioButton.value=t})("ngModelChange",function(t){m.Lc(e);const n=m.ic(2);return n.onRadioButtonChange(t,n.component)}),m.Vc(8,Ut,3,5,"label",13),m.Wb(),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic(2);m.Db(3),m.rc("ngIf",(null==e.component||null==e.component.time?null:e.component.time.show)&&(null==e.component||null==e.component.time?null:e.component.time.value)),m.Db(1),m.rc("ngIf",e.component.radioButton.showLabel&&null!=e.component.radioButton.label&&null!=e.component.radioButton.label),m.Db(1),m.rc("ngIf",e.component.radioButton.showLabel&&null!=e.component.radioButton.label&&null!=e.component.radioButton.label),m.Db(2),m.rc("ngModel",e.component.radioButton.value)("nzDisabled",e.preview||!e.preview&&!e.component.enabled),m.Db(1),m.rc("ngForOf",null==e.component||null==e.component.radioButton?null:e.component.radioButton.options)}}function Ft(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"date"),m.Ub()),2&e){const e=m.ic(3);m.Db(1),m.Zc(" ",m.lc(2,1,null==e.component||null==e.component.time?null:e.component.time.value,"dd MMM yyyy hh:mm a")," ")}}function Bt(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"nz-switch",17),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.checkbox.value=t})("ngModelChange",function(t){m.Lc(e);const n=m.ic(3);return n.onCheck(t,n.component)}),m.Wb(),m.Xc(2),m.jc(3,"keyValueReplace"),m.Ub()}if(2&e){const e=m.ic(3),t=m.Ic(2),n=m.Ic(4);m.Db(1),m.rc("ngModel",e.component.checkbox.value)("nzCheckedChildren",t)("nzUnCheckedChildren",n)("nzDisabled",e.preview||!e.preview&&!e.component.enabled),m.Db(1),m.Zc(" ",m.lc(3,5,null==e.component||null==e.component.checkbox?null:e.component.checkbox.label,e.variablesMap)," ")}}function jt(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"div",15),m.Xb(2,"div",8),m.Vc(3,Ft,3,4,"ng-container",0),m.Wb(),m.Xb(4,"div",16),m.Vc(5,Bt,4,8,"ng-container",0),m.Wb(),m.Wb(),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.rc("ngClass",e.isSubChecklist?"sublist-component-spacer":"component-spacer"),m.Db(2),m.rc("ngIf",(null==e.component||null==e.component.time?null:e.component.time.show)&&(null==e.component||null==e.component.time?null:e.component.time.value)),m.Db(2),m.rc("ngIf",null==e.component||null==e.component.checkbox?null:e.component.checkbox.show)}}function qt(e,t){if(1&e&&(m.Xb(0,"p"),m.Xc(1," Available On : "),m.Xb(2,"strong"),m.Xc(3),m.Wb(),m.Xc(4," From: "),m.Xb(5,"strong"),m.Xc(6),m.jc(7,"date"),m.Wb(),m.Xc(8," To: "),m.Xb(9,"strong"),m.Xc(10),m.jc(11,"date"),m.Wb(),m.Xc(12," At: "),m.Xb(13,"strong"),m.Xc(14),m.Wb(),m.Xc(15," Timezone. "),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",e.component.actionableComponent.value.availableHours.days," "),m.Db(3),m.Zc(" ",m.lc(7,4,e.component.actionableComponent.value.availableHours.fromTime,"hh:mm a")," "),m.Db(4),m.Zc(" ",m.lc(11,7,e.component.actionableComponent.value.availableHours.toTime,"hh:mm a")," "),m.Db(4),m.Zc(" ",e.component.actionableComponent.value.timezone," ")}}function Gt(e,t){if(1&e&&(m.Xb(0,"p"),m.Xc(1," Preferred Name : "),m.Xb(2,"strong"),m.Xc(3),m.Wb(),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",e.component.actionableComponent.value.preferredName," ")}}function Ht(e,t){if(1&e&&(m.Xb(0,"p"),m.Xc(1," Preferred Number : "),m.Xb(2,"strong"),m.Xc(3),m.Wb(),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.bd(" (",e.component.actionableComponent.value.countryCode,") ",e.component.actionableComponent.value.number," - ",e.component.actionableComponent.value.type," ")}}function Zt(e,t){if(1&e&&(m.Xb(0,"span"),m.Xb(1,"p"),m.Xc(2," Title : "),m.Xb(3,"strong"),m.Xc(4),m.Wb(),m.Wb(),m.Xb(5,"p"),m.Xc(6," Date : "),m.Xb(7,"strong"),m.Xc(8),m.jc(9,"date"),m.Wb(),m.Wb(),m.Xb(10,"p"),m.Xc(11," Time : "),m.Xb(12,"strong"),m.Xc(13),m.jc(14,"date"),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.ic(4);m.Db(4),m.Zc(" ",e.component.actionableComponent.value.title," "),m.Db(4),m.Zc("",m.lc(9,3,e.component.actionableComponent.value.schedule.startsOn,"dd-MM-yyyy")," "),m.Db(5),m.Zc("",m.lc(14,6,e.component.actionableComponent.value.schedule.startsOn,"hh:mm a")," ")}}function Yt(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"nz-card",18),m.Xb(2,"span",19),m.ec("click",function(){m.Lc(e);const t=m.ic(3);return t.checklistActions(t.component)}),m.Sb(3,"span",20),m.Wb(),m.Vc(4,qt,16,10,"p",0),m.Vc(5,Gt,4,1,"p",0),m.Vc(6,Ht,4,3,"p",0),m.Vc(7,Zt,15,9,"span",0),m.Wb(),m.Ub()}if(2&e){const e=m.ic(3);m.Db(4),m.rc("ngIf","UPDATE_AVAILABLE_TIME"==e.component.actionableComponent.action),m.Db(1),m.rc("ngIf","UPDATE_NAME_PREFERENCE"==e.component.actionableComponent.action),m.Db(1),m.rc("ngIf","ADD_NEW_NUMBER"==e.component.actionableComponent.action),m.Db(1),m.rc("ngIf","SCHEDULE_APPOINTMENT"==e.component.actionableComponent.action)}}function $t(e,t){if(1&e&&(m.Vb(0),m.Vc(1,Yt,8,4,"ng-container",0),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.rc("ngIf",e.component.actionableComponent.value&&null!=e.component.actionableComponent.value)}}function Kt(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",6),m.Xc(1," Change/Discrepancy reported "),m.Xb(2,"nz-switch",21),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic(2);return n.onNewDescrepancyReport(t,n.component)})("ngModelChange",function(t){return m.Lc(e),m.ic(2).component.reportDiscrepancy.reported=t}),m.Wb(),m.Wb()}if(2&e){const e=m.ic(2);m.Db(2),m.rc("ngModel",e.component.reportDiscrepancy.reported)("nzDisabled",e.preview||!e.preview&&!e.component.enabled)}}function Qt(e,t){if(1&e&&(m.Xb(0,"p",24),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3),m.jc(4,"isValid"),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",m.nc(4,1,e.component.input.value,"TEXT",e.component.input.validators,"MESSAGE")," ")}}function Jt(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"input",22),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.input.value=t}),m.jc(2,"isValid"),m.Wb(),m.Vc(3,Qt,5,6,"p",23),m.jc(4,"isValid"),m.Ub()}if(2&e){const e=m.ic(3);m.Db(1),m.rc("ngModel",e.component.input.value)("disabled",e.preview||!e.preview&&!e.component.enabled)("ngClass",!m.mc(2,4,e.component.input.value,"TEXT",e.component.input.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)?"error":"ok"),m.Db(2),m.rc("ngIf",!m.mc(4,8,e.component.input.value,"TEXT",e.component.input.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value))}}function en(e,t){if(1&e&&(m.Xb(0,"p",24),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3),m.jc(4,"isValid"),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",m.nc(4,1,e.component.textArea.value,"TEXT",e.component.textArea.validators,"MESSAGE")," ")}}function tn(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"textarea",25),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.textArea.value=t}),m.jc(2,"isValid"),m.Wb(),m.Vc(3,en,5,6,"p",23),m.jc(4,"isValid"),m.Ub()}if(2&e){const e=m.ic(3);m.Db(1),m.rc("ngModel",e.component.textArea.value)("disabled",e.preview||!e.preview&&!e.component.enabled)("ngClass",!m.mc(2,4,e.component.textArea.value,"TEXT",e.component.textArea.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)?"error":"ok"),m.Db(2),m.rc("ngIf",!m.mc(4,8,e.component.textArea.value,"TEXT",e.component.textArea.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value))}}function nn(e,t){if(1&e&&(m.Xb(0,"p",24),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3),m.jc(4,"isValid"),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",m.nc(4,1,e.component.datePicker.value,"TEXT",e.component.datePicker.validators,"MESSAGE")," ")}}function on(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"nz-date-picker",26),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.datePicker.value=t})("ngModelChange",function(t){m.Lc(e);const n=m.ic(3);return n.onDateChange(t,n.component)}),m.jc(2,"isValid"),m.Wb(),m.Vc(3,nn,5,6,"p",23),m.jc(4,"isValid"),m.Ub()}if(2&e){const e=m.ic(3);m.Db(1),m.rc("ngModel",e.component.datePicker.value)("nzDisabled",e.preview||!e.preview&&!e.component.enabled)("ngClass",!m.mc(2,4,e.component.datePicker.value,"TEXT",e.component.datePicker.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)?"error":"ok"),m.Db(2),m.rc("ngIf",!m.mc(4,8,e.component.datePicker.value,"TEXT",e.component.datePicker.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value))}}function an(e,t){if(1&e&&(m.Xb(0,"p",24),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3),m.jc(4,"isValid"),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",m.nc(4,1,e.component.range.left,"TEXT",e.component.range.validators,"MESSAGE")," ")}}function ln(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",3),m.Xb(2,"div",27),m.Xb(3,"nz-time-picker",28),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.range.left=t}),m.jc(4,"translate"),m.jc(5,"isValid"),m.Wb(),m.Wb(),m.Xb(6,"div",29),m.Xc(7," To "),m.Wb(),m.Xb(8,"div",27),m.Xb(9,"nz-time-picker",28),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.range.right=t}),m.jc(10,"translate"),m.jc(11,"isValid"),m.Wb(),m.Wb(),m.Wb(),m.Vc(12,an,5,6,"p",23),m.jc(13,"isValid"),m.jc(14,"isValid"),m.Ub()}if(2&e){const e=m.ic(3);m.Db(3),m.sc("nzPlaceHolder",m.kc(4,13,"TABLEHEADER.STARTTIME")),m.rc("ngModel",e.component.range.left)("nzDisabled",e.preview||!e.preview&&!e.component.enabled)("nzUse12Hours",e.use12Hours)("nzDefaultOpenValue",e.defaultOpenValue)("ngClass",!m.mc(5,15,e.component.range.value,"TEXT",e.component.range.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)?"error":"ok"),m.Db(6),m.sc("nzPlaceHolder",m.kc(10,19,"TABLEHEADER.STARTTIME")),m.rc("ngModel",e.component.range.right)("nzDisabled",e.preview||!e.preview&&!e.component.enabled)("nzUse12Hours",e.use12Hours)("nzDefaultOpenValue",e.defaultOpenValue)("ngClass",!m.mc(11,21,e.component.range.value,"TEXT",e.component.range.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)?"error":"ok"),m.Db(3),m.rc("ngIf",!m.mc(13,25,e.component.range.left,"TEXT",e.component.range.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)||!m.mc(14,29,e.component.range.right,"TEXT",e.component.range.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value))}}function cn(e,t){if(1&e&&m.Sb(0,"nz-option",32),2&e){const e=t.$implicit;m.rc("nzValue",null==e?null:e.key)("nzLabel",null==e?null:e.value)}}function rn(e,t){if(1&e&&(m.Xb(0,"p",24),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3),m.jc(4,"isValid"),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",m.nc(4,1,e.component.selectBox.value,"TEXT",e.component.selectBox.validators,"MESSAGE")," ")}}function sn(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"nz-select",30),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.selectBox.value=t})("ngModelChange",function(t){m.Lc(e);const n=m.ic(3);return n.onDateChange(t,n.component)}),m.jc(2,"isValid"),m.Vc(3,cn,1,2,"nz-option",31),m.Wb(),m.Vc(4,rn,5,6,"p",23),m.jc(5,"isValid"),m.Ub()}if(2&e){const e=m.ic(3);m.Db(1),m.rc("nzDisabled",e.preview||!e.preview&&!e.component.enabled)("ngModel",e.component.selectBox.value)("ngClass",!m.mc(2,5,e.component.selectBox.value,"TEXT",e.component.selectBox.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value)?"error":"ok"),m.Db(2),m.rc("ngForOf",e.timezones),m.Db(1),m.rc("ngIf",!m.mc(5,9,e.component.selectBox.value,"TEXT",null==e.component||null==e.component.selectBox?null:e.component.selectBox.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value))}}function dn(e,t){if(1&e&&(m.Xb(0,"label",35),m.Xc(1),m.Wb()),2&e){const e=t.$implicit;m.rc("nzValue",e),m.Db(1),m.Yc(e)}}function bn(e,t){if(1&e&&(m.Vb(0),m.Vc(1,dn,2,2,"label",34),m.Ub()),2&e){const e=m.ic(4);m.Db(1),m.rc("ngForOf",e.customComponentsValuesMap.get(null==e.component||null==e.component.radioGroup||null==e.component.radioGroup.customComponent?null:e.component.radioGroup.customComponent.customComponentType))}}function un(e,t){if(1&e&&(m.Xb(0,"p",24),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3),m.jc(4,"isValid"),m.Wb()),2&e){const e=m.ic(4);m.Db(3),m.Zc(" ",m.nc(4,1,e.component.radioGroup.value,"TEXT",e.component.radioGroup.validators,"MESSAGE")," ")}}function pn(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"nz-radio-group",33),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).component.radioGroup.value=t})("ngModelChange",function(t){m.Lc(e);const n=m.ic(3);return n.onRadioOptionChange(t,n.component)}),m.Vc(2,bn,2,1,"ng-container",0),m.Wb(),m.Vc(3,un,5,6,"p",23),m.jc(4,"isValid"),m.Ub()}if(2&e){const e=m.ic(3);m.Db(1),m.rc("ngModel",e.component.radioGroup.value)("nzDisabled",e.preview||!e.preview&&!e.component.enabled),m.Db(1),m.rc("ngIf",(null==e.component||null==e.component.radioGroup?null:e.component.radioGroup.customComponent)&&null!=(null==e.component||null==e.component.radioGroup?null:e.component.radioGroup.customComponent)&&(null==e.component||null==e.component.radioGroup||null==e.component.radioGroup.customComponent?null:e.component.radioGroup.customComponent.custom)),m.Db(1),m.rc("ngIf",!m.mc(4,4,e.component.radioGroup.value,"TEXT",null==e.component||null==e.component.radioGroup?null:e.component.radioGroup.validators)&&("CHECKBOX"==e.component.type&&null!=e.component.checkbox&&e.component.checkbox.value||"RADIO_BUTTON"==e.component.type&&e.component.radioButton&&e.component.radioButton.value))}}function hn(e,t){if(1&e&&(m.Vb(0),m.Vc(1,Jt,5,12,"ng-container",0),m.Vc(2,tn,5,12,"ng-container",0),m.Vc(3,on,5,12,"ng-container",0),m.Vc(4,ln,15,33,"ng-container",0),m.Vc(5,sn,6,13,"ng-container",0),m.Vc(6,pn,5,8,"ng-container",0),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.rc("ngIf",null==e.component||null==e.component.input?null:e.component.input.show),m.Db(1),m.rc("ngIf",null==e.component||null==e.component.textArea?null:e.component.textArea.show),m.Db(1),m.rc("ngIf",(null==e.component?null:e.component.datePicker)&&(null==e.component||null==e.component.datePicker?null:e.component.datePicker.show)),m.Db(1),m.rc("ngIf",null!=(null==e.component?null:e.component.range)&&(null==e.component||null==e.component.range?null:e.component.range.show)),m.Db(1),m.rc("ngIf",null!=(null==e.component?null:e.component.selectBox)&&(null==e.component||null==e.component.selectBox?null:e.component.selectBox.show)),m.Db(1),m.rc("ngIf",null!=(null==e.component?null:e.component.radioGroup)&&(null==e.component||null==e.component.radioGroup?null:e.component.radioGroup.show))}}function gn(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"wizard-content",37),m.Ub()),2&e){const e=t.$implicit,n=m.ic(3);m.Db(1),m.rc("component",e)("variablesMap",n.variablesMap)("isSubChecklist",!0)("preview",n.preview||!n.preview&&!n.component.enabled)("lead",n.lead)}}function mn(e,t){if(1&e&&(m.Vb(0),m.Vc(1,gn,2,5,"ng-container",36),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.rc("ngForOf",e.component.subChecklists)}}function fn(e,t){if(1&e&&(m.Vb(0),m.Vc(1,Vt,9,6,"ng-container",0),m.Vc(2,jt,6,3,"ng-container",0),m.Vb(3),m.Xb(4,"div",3),m.Sb(5,"div",4),m.Vc(6,$t,2,1,"ng-container",0),m.Vc(7,Kt,3,2,"div",5),m.Xb(8,"div",6),m.Vc(9,hn,7,6,"ng-container",0),m.Wb(),m.Wb(),m.Vc(10,mn,2,1,"ng-container",0),m.Ub(),m.Ub()),2&e){const e=m.ic();m.Db(1),m.rc("ngIf","RADIO_BUTTON"===(null==e.component?null:e.component.type)&&e.component.radioButton),m.Db(1),m.rc("ngIf","CHECKBOX"==(null==e.component?null:e.component.type)&&e.component.checkbox),m.Db(4),m.rc("ngIf",(null!=e.component.radioButton&&e.component.radioButton.value||null!=e.component.checkbox&&e.component.checkbox.value)&&null!=e.component.actionableComponent&&e.component.actionableComponent&&e.component.actionableComponent.actionable),m.Db(1),m.rc("ngIf",(null!=e.component.radioButton&&e.component.radioButton.value||null!=e.component.checkbox&&e.component.checkbox.value)&&(null!=e.component.checkbox&&e.component.checkbox.showDiscrepancyButton||null!=e.component.radioButton&&e.component.radioButton.showDiscrepancyButton)),m.Db(2),m.rc("ngIf",null!=e.component.radioButton&&e.component.radioButton.value||null!=e.component.checkbox&&e.component.checkbox.value),m.Db(1),m.rc("ngIf",e.component.subChecklists&&e.component.subChecklists.length>0&&(null!=e.component.radioButton&&e.component.radioButton.value||null!=e.component.checkbox&&e.component.checkbox.value))}}function vn(e,t){1&e&&m.Sb(0,"span",38)}function Cn(e,t){1&e&&m.Sb(0,"span",39)}let zn=(()=>{class e{constructor(e){this._modalService=e,this.use12Hours=!0,this.isHidden=!0,this.preview=!1,this.haveUnSavedChanges=!1,this.onChecklistUpdate=new m.n,this.positiveNegativeFlow=new m.n,this.onFirstNurseCallAppointmentUpdate=new m.n,this.enableNext=!1,this.defaultOpenValue=new Date(0,0,0,0,0,0)}ngOnInit(){this.leadId=this.lead.leadId}onCheck(e,t){t.checkbox.value=e,t.time.value=e?new Date:"",this.haveUnSavedChanges=!0,e&&null!=t.actionableComponent&&t.actionableComponent&&t.actionableComponent.actionable?this.checklistActions(t):this.onChecklistUpdate.emit(!0),this.checkPositiveValue(e,t)}checkPositiveValue(e,t){null!=t.checkbox&&null!=t.checkbox?null==t.checkbox.positiveValues||null==t.checkbox.positiveValues||0==t.checkbox.positiveValues.length||t.checkbox.positiveValues.find(t=>t==e)?this.positiveNegativeFlow.emit({flow:"POSITIVE"}):this.positiveNegativeFlow.emit({flow:"NEGATIVE",index:t.order}):null!=t.radioButton&&null!=t.radioButton&&(null==t.radioButton.positiveValues||null==t.radioButton.positiveValues||0==t.radioButton.positiveValues.length||t.radioButton.positiveValues.find(t=>t==e)?this.positiveNegativeFlow.emit({flow:"POSITIVE"}):this.positiveNegativeFlow.emit({flow:"NEGATIVE",index:t.order}))}checklistActions(e){switch(e.actionableComponent.action){case bt.UPDATE_AVAILABLE_TIME:this.showActionableComponentModals(Ot,"Available Time",e.actionableComponent.action,this.lead,e.actionableComponent.value);break;case bt.UPDATE_NAME_PREFERENCE:this.showActionableComponentModals(_t,"Preferred Name",e.actionableComponent.action,this.lead,e.actionableComponent.value);break;case bt.ADD_NEW_NUMBER:this.showActionableComponentModals(Et,"Update preferred contact",e.actionableComponent.action,this.lead,e.actionableComponent.value);break;case bt.SCHEDULE_APPOINTMENT:this.showActionableComponentModals(Ct,"Schedule first nurse call",e.actionableComponent.action,this.lead,e.actionableComponent.value)}}onRadioButtonChange(e,t){this.haveUnSavedChanges=!0,t.time.value=e?new Date:"",this.onChecklistUpdate.emit(!0),this.checkPositiveValue(e,t)}onDateChange(e,t){t.datePicker.value=e,this.onChecklistUpdate.emit(!0)}onRadioOptionChange(e,t){this.haveUnSavedChanges=!0,t.radioGroup.value=e,this.onChecklistUpdate.emit(!0)}onNewDescrepancyReport(e,t){t.reportDiscrepancy=new lt,t.reportDiscrepancy.reported=e,this.onChecklistUpdate.emit(!0)}showActionableComponentModals(e,t,n,i,o){this._modalService.create({nzContent:e,nzComponentParams:{userId:this.leadId,lead:i,type:"LEAD",value:o,customComponentsValuesMap:this.customComponentsValuesMap},nzTitle:t,nzWidth:700,nzFooter:null,nzClosable:!0,nzMaskClosable:!0,nzBodyStyle:{paddingTop:"0px"}}).afterClose.subscribe(e=>{e&&(this.component.actionableComponent.value=e.response,n==bt.SCHEDULE_APPOINTMENT&&this.onFirstNurseCallAppointmentUpdate.emit(e.response),null==e.requestSubscription&&null!=e.noSubscriber&&e.noSubscriber?this.onChecklistUpdate.emit(!0):e.requestSubscription.subscribe(e=>{this.onChecklistUpdate.emit(!0)}))})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.f))},e.\u0275cmp=m.Lb({type:e,selectors:[["wizard-content"]],inputs:{component:"component",variablesMap:"variablesMap",isSubChecklist:"isSubChecklist",timezones:"timezones",use12Hours:"use12Hours",isHidden:"isHidden",customComponentsValuesMap:"customComponentsValuesMap",lead:"lead",preview:"preview",haveUnSavedChanges:"haveUnSavedChanges"},outputs:{onChecklistUpdate:"onChecklistUpdate",positiveNegativeFlow:"positiveNegativeFlow",onFirstNurseCallAppointmentUpdate:"onFirstNurseCallAppointmentUpdate"},decls:5,vars:1,consts:[[4,"ngIf"],["checkedTemplate",""],["unCheckedTemplate",""],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","2",1,"list-components"],["nz-col","","nzSpan","8","class","list-components",4,"ngIf"],["nz-col","","nzSpan","8",1,"list-components"],["nz-row","","nzGutter","64",1,"component-spacer","radio-component-container"],["nz-col","","nzSpan","3",1,"list-components"],["nz-col","","nzSpan","21","class","component-spacer radio-btn-padding",4,"ngIf"],["nz-col","","nzSpan","3","class","list-components",4,"ngIf"],["nz-col","","nzSpan","21",1,"component-spacer","radio-btn-padding"],["nzButtonStyle","solid",3,"ngModel","nzDisabled","ngModelChange"],["nz-radio-button","",3,"nzValue",4,"ngFor","ngForOf"],["nz-radio-button","",3,"nzValue"],["nz-row","","nzGutter","64",1,"component-spacer",3,"ngClass"],["nz-col","","nzSpan","21",1,"list-components","list-components-label"],[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","nzDisabled","ngModelChange"],[1,"actionable-component-value-card"],[2,"position","absolute","top","10px","right","10px","cursor","pointer",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline",2,"color","black"],["nzCheckedChildren","Yes","nzUnCheckedChildren","No",3,"ngModel","nzDisabled","ngModelChange"],["nz-input","",3,"ngModel","disabled","ngClass","ngModelChange"],["nz-typography","","nzType","danger","class","required-text",4,"ngIf"],["nz-typography","","nzType","danger",1,"required-text"],["rows","4","nz-input","",3,"ngModel","disabled","ngClass","ngModelChange"],[3,"ngModel","nzDisabled","ngClass","ngModelChange"],["nz-col","","nzSpan","10"],["nzSize","large","nzFormat","h:mm a","nzAllowEmpty","false",3,"ngModel","nzDisabled","nzUse12Hours","nzDefaultOpenValue","nzPlaceHolder","ngClass","ngModelChange"],["nz-col","","nzSpan","1",2,"display","flex","align-items","center"],["nzShowSearch","","nzAllowClear","",3,"nzDisabled","ngModel","ngClass","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],[3,"ngModel","nzDisabled","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["nz-radio","",3,"nzValue"],[4,"ngFor","ngForOf"],[3,"component","variablesMap","isSubChecklist","preview","lead"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"]],template:function(e,t){1&e&&(m.Vc(0,fn,11,6,"ng-container",0),m.Vc(1,vn,1,0,"ng-template",null,1,m.Wc),m.Vc(3,Cn,1,0,"ng-template",null,2,m.Wc)),2&e&&m.rc("ngIf",t.preview||t.component.enabled||1==t.component.order||!t.isHidden)},directives:[o.q,z.c,z.a,de.c,a.u,a.x,o.p,de.b,de.a,o.o,I.a,ke.a,k.a,_.a,S.b,a.d,w.a,L.a,Lt.a,ht.d,ht.a,e],pipes:[o.e,Nt,xt,X.a],styles:[".list-components[_ngcontent-%COMP%]{text-align:center;padding-left:5px!important;padding-right:5px!important}.list-components-label[_ngcontent-%COMP%]{text-align:left}.component-spacer[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.radio-component-container[_ngcontent-%COMP%]{display:flex;align-items:center}.radio-btn-padding[_ngcontent-%COMP%]{padding-left:0!important}.wizard-checkbox[_ngcontent-%COMP%]{width:5%}.sublist-component-spacer[_ngcontent-%COMP%]{padding-left:35px!important}.required-text[_ngcontent-%COMP%]{text-align:right}.error[_ngcontent-%COMP%]{border:1px solid var(--error-color)}.actionable-component-value-card[_ngcontent-%COMP%]{padding:5px;margin-left:30px;background:#11111142}[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}"]}),e})();function Sn(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",3),m.Xb(2,"button",4),m.ec("click",function(){return m.Lc(e),m.ic().onSaveChecklist()}),m.Xc(3,"Save Checklist"),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(2),m.rc("disabled",e.disabled)("nzLoading",e.loading)}}function In(e,t){1&e&&(m.Xb(0,"button",12),m.Xc(1,"Send SMS Enrollment"),m.Wb())}function Xn(e,t){if(1&e&&m.Sb(0,"nz-option",13),2&e){const e=t.$implicit;m.rc("nzLabel",e.value)("nzValue",e.key)}}function yn(e,t){if(1&e&&(m.Xb(0,"p",19),m.Xc(1),m.Wb()),2&e){const e=m.ic(4);m.Db(1),m.Zc(" ",e.notEligibleReasonMap.get(e.notEligibleBecause)," ")}}function Dn(e,t){1&e&&(m.Xb(0,"p",20),m.Xb(1,"sup"),m.Xc(2,"*"),m.Wb(),m.Xc(3," Please enter a valid reason. "),m.Wb())}function Wn(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Vc(1,yn,2,1,"p",16),m.Xb(2,"textarea",17),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(3).comment=t}),m.Wb(),m.Vc(3,Dn,4,0,"p",18),m.Ub()}if(2&e){const e=m.ic(3);m.Db(1),m.rc("ngIf","NOT_ELIGIBLE"==e.event),m.Db(1),m.rc("ngModel",e.comment)("nzBorderless",!1),m.Db(1),m.rc("ngIf",e.showOtherInputError&&"OTHER"==e.notEligibleBecause)}}function Tn(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"nz-modal",14),m.ec("nzOnCancel",function(){return m.Lc(e),m.ic(2).handleCancel()})("nzOnOk",function(){return m.Lc(e),m.ic(2).handleOk()}),m.Vc(2,Wn,4,4,"ng-container",15),m.Wb(),m.Ub()}if(2&e){const e=m.ic(2);m.Db(1),m.rc("nzVisible",e.commentModalVisible)("nzTitle",e.commentModalTitle)}}function En(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",3),m.Xb(2,"button",5),m.ec("click",function(){return m.Lc(e),m.ic().checklistSubmit()}),m.Xc(3,"Convert to patient"),m.Wb(),m.Wb(),m.Xb(4,"div",6),m.Vc(5,In,2,0,"button",7),m.Xb(6,"nz-select",8),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().notEligibleBecause=t})("ngModelChange",function(t){return m.Lc(e),m.ic().callActions("NOT_ELIGIBLE",t)}),m.Vc(7,Xn,1,2,"nz-option",9),m.jc(8,"keyvalue"),m.Wb(),m.Vc(9,Tn,3,2,"ng-container",2),m.Xb(10,"button",10),m.ec("click",function(){return m.Lc(e),m.ic().callActions("REMIND_TO_CALL_LATER")}),m.Xc(11,"Remind me to call later"),m.Wb(),m.Xb(12,"button",11),m.ec("click",function(){return m.Lc(e),m.ic().callActions("CALL_TERMINATED")}),m.Xc(13,"Call Terminated"),m.Wb(),m.Xb(14,"button",11),m.ec("click",function(){return m.Lc(e),m.ic().callActions("CALL_DECLINED_HARD_NO")}),m.Xc(15," Call Declined - Do not call Again "),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(5),m.rc("ngIf",e.isSMSEnabled),m.Db(1),m.rc("ngModel",e.notEligibleBecause),m.Db(1),m.rc("ngForOf",m.kc(8,4,e.notEligibleReasonMap)),m.Db(2),m.rc("ngIf",e.commentModalVisible)}}let wn=(()=>{class e{constructor(){this.haveUnSavedChanges=!0,this.saveChecklist=new m.n,this.submitChecklist=new m.n,this.sendSMSEnrolment=new m.n,this.onCallActionUpdate=new m.n,this.showOtherInputError=!1,this.notEligibleReasonMap=new Map([["PATIENT_IN_HOSPICE","The patient is in hospice"],["NO_LONGER_SEEING_PROVIDER","The patient is no longer seeing provider"],["ALREADY_IN_OTHER_PROGRAM","Patient is already participating in other program"],["OTHER","Other reasons"]])}ngOnInit(){}callActions(e,t){this.event=e;let n=!1;switch(e){case"REMIND_TO_CALL_LATER":case"CALL_TERMINATED":this.notEligibleBecause=null,n=!0,this.onCallActionUpdate.emit({event:e,value:t,showAddFollowupPopup:n,notEligibleBecause:this.notEligibleBecause});break;case"CALL_DECLINED_HARD_NO":this.notEligibleBecause=null,this.commentModalTitle="Call declined because...",this.commentModalVisible=!0;break;case"NOT_ELIGIBLE":this.commentModalTitle="Not eligible because...",this.commentModalVisible=!0}}onSaveChecklist(){this.saveChecklist.emit()}checklistSubmit(){this.submitChecklist.emit()}handleCancel(){this.notEligibleBecause=null,this.commentModalVisible=!1}handleOk(){("NOT_ELIGIBLE"!=this.event||"OTHER"!=this.notEligibleBecause||null!=this.comment&&null!=this.comment)&&("CALL_DECLINED_HARD_NO"!=this.event||null!=this.comment&&null!=this.comment)?(this.commentModalVisible=!1,this.submitChecklist.emit({notEligible:"NOT_ELIGIBLE"==this.event,callDeclined:"CALL_DECLINED_HARD_NO"==this.event,notEligibleType:this.notEligibleBecause,notEligibileBecause:this.notEligibleReasonMap.get(this.notEligibleBecause),extraNotes:this.comment})):this.showOtherInputError=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["wizard-footer-action-bar"]],inputs:{loading:"loading",isSMSEnabled:"isSMSEnabled",haveUnSavedChanges:"haveUnSavedChanges",disabled:"disabled"},outputs:{saveChecklist:"saveChecklist",submitChecklist:"submitChecklist",sendSMSEnrolment:"sendSMSEnrolment",onCallActionUpdate:"onCallActionUpdate"},decls:4,vars:2,consts:[[1,"container"],["nz-row","","nzGutter","64"],[4,"ngIf"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzSpan","20"],["class","remove-col-padding action-btn","nz-button","","nzType","default",4,"ngIf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Not Eligible(Select Reason)",1,"remove-col-padding",2,"width","fit-content",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","secondary",1,"remove-col-padding","action-btn",3,"click"],["nz-button","","nzType","default",1,"remove-col-padding","action-btn",3,"click"],["nz-button","","nzType","default",1,"remove-col-padding","action-btn"],[3,"nzLabel","nzValue"],[3,"nzVisible","nzTitle","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-typography","","nzType","primary",4,"ngIf"],["rows","8","nz-input","","placeholder","Additional comments...",1,"remove-col-padding",3,"ngModel","nzBorderless","ngModelChange"],["style","margin: 10px; ","nz-typography","","nzType","danger",4,"ngIf"],["nz-typography","","nzType","primary"],["nz-typography","","nzType","danger",2,"margin","10px"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Vc(2,Sn,4,2,"ng-container",2),m.Vc(3,En,16,6,"ng-container",2),m.Wb(),m.Wb()),2&e&&(m.Db(2),m.rc("ngIf",t.haveUnSavedChanges),m.Db(1),m.rc("ngIf",!t.haveUnSavedChanges))},directives:[z.c,o.q,z.a,M.a,O.a,k.a,ht.d,a.u,a.x,o.p,ht.a,E.a,E.b,S.b,a.d,w.a],pipes:[o.j],styles:[".remove-col-padding[_ngcontent-%COMP%]{margin-right:5px!important;margin-left:5px!important}.action-btn[_ngcontent-%COMP%]{font-weight:300;border:none}"]}),e})();var Ln=n("iUtR");function Mn(e,t){if(1&e&&(m.Xb(0,"div",8),m.Xb(1,"span",9),m.Xc(2," Enrollment Wizard "),m.Wb(),m.Xb(3,"span",10),m.Xb(4,"strong",11),m.Xc(5),m.jc(6,"timer"),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.ic(2);m.Db(5),m.Zc(" ",m.mc(6,1,e.timerValue,e.timerStart,e.isDiffValue)," ")}}function On(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"wizard-content",16),m.ec("onChecklistUpdate",function(){return m.Lc(e),m.ic(4).onCheckListChange()})("positiveNegativeFlow",function(t){return m.Lc(e),m.ic(4).positiveNegativeFlow(t)})("onFirstNurseCallAppointmentUpdate",function(t){return m.Lc(e),m.ic(4).onFirstNurseCallAppointmentUpdate(t)}),m.Wb(),m.Ub()}if(2&e){const e=t.$implicit,n=m.ic(4);m.Db(1),m.rc("component",e)("variablesMap",n.variablesMap)("timezones",n.timezones)("isHidden",n.isHidden)("lead",n.lead)("preview",n.preview)("customComponentsValuesMap",n.customComponentsValuesMap)("haveUnSavedChanges",n.haveUnSavedChanges)}}function kn(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",17),m.Xb(1,"div",18),m.Xb(2,"div",19),m.Xb(3,"div",20),m.Xb(4,"div",21),m.Xb(5,"angular-editor",22,23),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic(4).enrolmentChecklist.additionalNotes=t}),m.Wb(),m.Wb(),m.Wb(),m.Sb(7,"br"),m.Xb(8,"div",20),m.Xb(9,"div",24),m.Xb(10,"app-note-template-picker",25),m.ec("onTemplateSelected",function(t){return m.Lc(e),m.ic(4).setTemplate(t)}),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.ic(4);m.Sc("height",e.height),m.Db(5),m.rc("ngModel",e.enrolmentChecklist.additionalNotes)("config",e.config),m.Db(5),m.rc("note",e.enrolmentChecklist.additionalNotes)}}function _n(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"div",12),m.Xb(2,"div",13),m.Vc(3,On,2,8,"ng-container",14),m.Wb(),m.Wb(),m.Vc(4,kn,11,5,"div",15),m.Ub()),2&e){const e=m.ic(3);m.Db(1),m.Sc("height",e.height),m.Db(2),m.rc("ngForOf",null==e.enrolmentChecklist?null:e.enrolmentChecklist.checklistData),m.Db(1),m.rc("ngIf",!e.preview)}}function Nn(e,t){if(1&e&&(m.Vb(0),m.Vc(1,_n,5,4,"ng-container",1),m.Ub()),2&e){const e=m.ic(2),t=m.Ic(5);m.Db(1),m.rc("ngIf",e.enrolmentChecklist)("ngIfElse",t)}}function xn(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"div",6),m.Vc(2,Mn,7,5,"div",7),m.Vc(3,Nn,2,2,"ng-container",2),m.Wb(),m.Ub()),2&e){const e=m.ic();m.Db(2),m.rc("ngIf",!e.preview),m.Db(1),m.rc("ngIf",!e.showChecklistLoader)}}function An(e,t){if(1&e&&(m.Xb(0,"div",27),m.Xb(1,"div",28),m.Xb(2,"div",29),m.Xb(3,"p",30),m.Xc(4," Additional Notes "),m.Wb(),m.Sb(5,"p",31),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.ic(2);m.Db(5),m.rc("innerHTML",null==e.enrolmentChecklist?null:e.enrolmentChecklist.additionalNotes,m.Mc)}}function Pn(e,t){if(1&e&&(m.Vb(0),m.Vc(1,An,6,1,"div",26),m.Ub()),2&e){const e=m.ic();m.Db(1),m.rc("ngIf",e.preview)}}function Rn(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",6),m.Xb(1,"div",32),m.Xb(2,"div",33),m.Xb(3,"wizard-footer-action-bar",34),m.ec("submitChecklist",function(t){return m.Lc(e),m.ic().onChecklistSubmit(t)})("onCallActionUpdate",function(t){return m.Lc(e),m.ic().onCallActionUpdate(t)})("sendSMSEnrolment",function(t){return m.Lc(e),m.ic().sendSms(t)})("saveChecklist",function(){return m.Lc(e),m.ic().onChecklistUpdate()}),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.ic();m.Db(3),m.rc("isSMSEnabled",!1)("loading",e.loading)("disabled",e.disabled)("haveUnSavedChanges",e.haveUnSavedChanges)}}function Un(e,t){if(1&e&&(m.Xb(0,"div",35),m.Sb(1,"nz-spin",36),m.Wb()),2&e){const e=m.ic();m.Sc("height",e.height)}}function Vn(e,t){if(1&e&&(m.Xb(0,"div",37),m.Xc(1," No Checklist for Patient "),m.Wb()),2&e){const e=m.ic();m.Sc("height",e.height)}}let Fn=(()=>{class e extends r.a{constructor(e,t,n,i,o,a,l){super(),this.router=e,this._staffService=t,this._leadsService=n,this._datePipe=i,this._dataSharingService=o,this._followUpModalService=a,this._notificationService=l,this.toNumber=null,this.preview=!1,this.haveUnSavedChanges=!0,this.timezones=Object(oe.e)(),this.isHidden=!0,this.variablesMap=new Map,this.leadPhoneNumbers=new Set,this.customComponentsValuesMap=new Map,this.shouldAddNewTimeLog=!0,this.timerLogRequest=new rt,this.autosaveInterval=15e3,this.config=q.a}set previewList(e){this.preview=e,this.config.editable=!e}ngOnInit(){this.loadFromDraft=!1,this.disabled=!0,this._dataSharingService.assignedTenantSettings.subscribe(e=>{this.tenantConfigMap=e,console.log("Lead Tenant Id : ",this.lead.tenantId),this.tenantConfig=this.tenantConfigMap.get(this.lead.tenantId),console.log("TenantConfig : ",this.tenantConfig),this.customComponentsValuesMap.set("TENANT_TIMEZONE",this.tenantConfig.timeZone)}),this.getLeadPhysician(),this.checklistLoading=!0,this.preview?this.height="auto":(this.height=this.wizardHeight-100-40+"px !important",this.config.height=this.wizardHeight-100-40-120+"px !important"),this.lead.patientInfo.phoneNumbers.forEach(e=>{this.leadPhoneNumbers.add(`${e.number}`)}),this.customComponentsValuesMap.set("PATIENT_CONTACT_LIST",this.leadPhoneNumbers),this.initVariableMap()}ngOnDestroy(){this._routeHelperService.setSidebarCollapsed(!1)}getLeadPhysician(){this._staffService.getStaffByUserId(this.lead.physicianId).subscribe(e=>{if(e){let n=e;var t=n.locations.filter(e=>e.defaultLocation);this.siteId=t&&0==t.length?null:n.locations.filter(e=>e.defaultLocation)[0].id,this.variablesMap.set("{{PROVIDER_NAME}}",n.fullName),this.preview?this.getChecklistForPreview():this.getCheckList()}})}renewAutoSaveSubscription(){this.onChecklistUpdate()}startTimer(){this.timerEnd=void 0,null==this.enrolmentChecklist.timer||0==this.enrolmentChecklist.timer.totalDuration?(this.timerStart=new Date,this.timerValue=new Date,this.timerLogRequest.startTime=this.timerStart,this.timerIntervalId=setInterval(()=>this.timerValue=new Date,1e3)):(this.timerStart=void 0,this.timerValue=this.enrolmentChecklist.timer.totalDuration,this.isDiffValue=!0,this.timerLogRequest.startTime=new Date,this.timerIntervalId=setInterval(()=>this.timerValue+=1e3,1e3))}endTimer(){this.timerEnd=new Date,this.timerLogRequest.endTime=this.timerEnd,clearInterval(this.timerIntervalId),this.timerIntervalId=void 0}clearTimer(){this.timerValue=void 0,this.timerStart=void 0,this.timerEnd=void 0,this.timerIntervalId=void 0}initVariableMap(){var e=this.getPreferredPhoneNumber();this.variablesMap.set("{{LEAD_PHONE_NUMBER}}",this.toNumber&&null!=this.toNumber?this.toNumber:"("+e.countryCode+")"+e.number),this.variablesMap.set("{{LEAD_PHONE_NUMBER_TYPE}}",e.label),this.variablesMap.set("{{CLINICIAN_NAME}}",this.tenantConfig.tenantName)}getPreferredPhoneNumber(){let e=this.lead.patientInfo.phoneNumbers.filter(e=>e.preferred);return e&&e.length>0?e[0]:this.lead.patientInfo.phoneNumbers[0]}hideShowChecklist(){let e=it.getStep(1,this.enrolmentChecklist.checklistData);null!=e.radioButton&&null!=e.radioButton.value&&(this.isHidden=!1)}getCheckList(){this.enrolmentChecklist?(this.enrolmentChecklist.checklistData=this.enrolmentChecklist.checklistData.sort((e,t)=>e.order>=t.order?1:-1),this.hideShowChecklist(),this.startTimer(),this.noChecklist=!1,this.disabled=!1,this.loadFromDraft=!0):this._leadsService.getChecklist(this.lead.leadId,"ENROLMENT","DRAFT",this.loadFromDraft).subscribe(e=>{this.enrolmentChecklist=e,this.enrolmentChecklist.checklistData=this.enrolmentChecklist.checklistData.sort((e,t)=>e.order>=t.order?1:-1),this.hideShowChecklist(),this.startTimer(),this.noChecklist=!1,this.disabled=!1,this.loadFromDraft=!0},e=>{},()=>this.checklistLoading=!1)}getChecklistForPreview(){this._leadsService.getChecklistForPreview(this.lead.leadId).subscribe(e=>{this.enrolmentChecklist=e,this.enrolmentChecklist.checklistData=this.enrolmentChecklist.checklistData.sort((e,t)=>e.order>=t.order?1:-1)},e=>{this.noChecklist=!0},()=>this.checklistLoading=!1)}onCheckListChange(){this.haveUnSavedChanges=!0}onChecklistUpdate(e=!1){this.loading=!0,this.hideShowChecklist(),this.enrolmentChecklist.boundary!=at.USER_SPECIFIC&&(this.enrolmentChecklist.id=null,this.enrolmentChecklist.boundary=at.USER_SPECIFIC,this.enrolmentChecklist.status=ot.DRAFT,this.enrolmentChecklist.name=this.enrolmentChecklist.name+" - "+this.lead.patientInfo.firstName+" "+this.lead.patientInfo.lastName,this.enrolmentChecklist.userId=this.lead.leadId),this.enrolmentChecklist.checklistTimeLog=this.timerLogRequest,this.enrolmentChecklist.checklistTimeLog.shouldAddNewTimeLog=this.shouldAddNewTimeLog,this.enrolmentChecklist.checklistTimeLog.endTime=new Date,this.enrolmentChecklist.totalDiscrepancyReported=this.enrolmentChecklist.checklistData.filter(e=>null!=e.reportDiscrepancy&&e.reportDiscrepancy.reported).length,this._leadsService.updateChecklist(this.enrolmentChecklist).pipe(Object(Q.a)(this.unsubscribed)).subscribe(e=>{this.enrolmentChecklist.id=e.id,this.shouldAddNewTimeLog=!1,this.haveUnSavedChanges=!1,this.loading=!1})}onChecklistSubmit(e){let t=null;if(t=e&&e.notEligible?{comments:e.extraNotes,reason:e.notEligibileBecause,submitType:"NOT_ELIGIBLE",reasonType:e.notEligibleType}:e&&e.callDeclined?{comments:e.extraNotes,reason:e.notEligibileBecause,submitType:"DECLINED"}:{submitType:"OKAY"},this.enrolmentChecklist.totalDiscrepancyReported>2)return this._notificationService.warning("Descrepancy Found",`${this.enrolmentChecklist.totalDiscrepancyReported} Descrepancy Found.`),this.enrolmentChecklist.additionalNotes=this.enrolmentChecklist.additionalNotes+"<br> <br> <hr> <br> "+`${this.enrolmentChecklist.totalDiscrepancyReported} Descrepancy Found. HIPAA verification failure.`,void this.submitChecklist(t);"OKAY"==t.submitType&&this.validateChecklist()?this._notificationService.warning("Checklist","Please check all questions in the list are marked as done."):this.submitChecklist(t)}enableDisableConvertButton(){this.enableCompleteButton=this.enrolmentChecklist.checklistData.filter(e=>e.isRequired&&(null!=e.checkbox&&null!=e.checkbox.value&&1==e.checkbox.value||null!=e.radioButton&&null!=e.radioButton.value&&null!=e.radioButton.value)).length<=0}validateChecklist(){return this.enrolmentChecklist.checklistData.filter(e=>e.checkbox&&null!=e.checkbox&&e.checkbox.value&&null!=e.checkbox.value||e.radioButton&&null!=e.radioButton&&e.radioButton.value&&null!=e.radioButton.value).length<=0}submitChecklist(e){this._leadsService.submitChecklist(this.enrolmentChecklist.id,e).pipe(Object(Q.a)(this.unsubscribed)).subscribe(e=>{this._leadsService.createChecklistNote(this.enrolmentChecklist).subscribe(),"SUCCESS"==e.response?this.convertLead():this.router.navigate(["leads/"],{queryParams:{tab:"ACTIVE",status:"ACTIVE"}}),this.endTimer()})}convertLead(){var e,t,n,i;this.router.navigate(["patient/lead/",this.lead.leadId],{queryParams:{patientName:`${null===(t=null===(e=this.lead)||void 0===e?void 0:e.patientInfo)||void 0===t?void 0:t.firstName} ${null===(i=null===(n=this.lead)||void 0===n?void 0:n.patientInfo)||void 0===i?void 0:i.lastName}`,physicianId:this.lead.physicianId,siteId:this.siteId}})}onCallActionUpdate(e){switch(this._leadsService.createChecklistNote(this.enrolmentChecklist).subscribe(),e.event){case"REMIND_TO_CALL_LATER":case"CALL_TERMINATED":this._followUpModalService.initEnrolment(void 0,!1,De.c.AUDIO_CALL,this.lead,!0).afterClose.subscribe(e=>{this.hideShowChecklist(),this.isReferredFromGenesys&&window.close()});break;case"CALL_DECLINED_HARD_NO":case"NOT_ELIGIBLE":this.isReferredFromGenesys&&window.close()}}sendSms(e){this._followUpModalService.initEnrolment(void 0,!1,De.c.SMS,this.lead).afterClose.subscribe(e=>{})}positiveNegativeFlow(e){this.showChecklistLoader=!0;let t=new Array;this.enrolmentChecklist.checklistData.forEach(n=>{"POSITIVE"!==e.flow&&e.index&&n.order>e.index?n.enabled=!1:"POSITIVE"===e.flow&&(n.enabled=!0),t.push(n)}),this.enrolmentChecklist.checklistData=[...t],this.showChecklistLoader=!1}onFirstNurseCallAppointmentUpdate(e){this.showChecklistLoader=!0;let t=new Array;this.enrolmentChecklist.checklistData.forEach(n=>{"PATIENT_SMS_SENT"==n.checklistComponentName&&n.textArea&&null!=n.textArea&&(n.textArea.value="You have scheduled an appointment with your care management nurse on "+this._datePipe.transform(e.schedule.startsOn,"dd MMM yyyy hh:mm a")+". Just a remainder, the number that they will be calling you from is {{Nurse_Line}}. Have a great day."),t.push(n)}),this.enrolmentChecklist.checklistData=[...t],this.showChecklistLoader=!1}setTemplate(e){this.enrolmentChecklist.additionalNotes=e}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(l.g),m.Rb(st.a),m.Rb(d.a),m.Rb(o.e),m.Rb(ne.a),m.Rb(nt),m.Rb(f.b))},e.\u0275cmp=m.Lb({type:e,selectors:[["basic-enrolment-wizard"]],inputs:{lead:"lead",wizardHeight:"wizardHeight",toNumber:"toNumber",previewList:"previewList",isReferredFromGenesys:"isReferredFromGenesys",enrolmentChecklist:"enrolmentChecklist"},features:[m.Cb([o.e,dt.a]),m.Ab],decls:8,vars:4,consts:[[1,"container","extra"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["nz-row","","nzGutter","64",4,"ngIf"],["loadingAnimation",""],["noChecklistTemplate",""],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24","class","header",4,"ngIf"],["nz-col","","nzSpan","24",1,"header"],[2,"width","50%"],[2,"width","50%","text-align","end"],["nz-typography","","nzType","success",1,"timer"],["nz-col","","nzFlex","1000","id","checklist-container"],[1,"container"],[4,"ngFor","ngForOf"],["nz-col","","nzFlex","1 0 400px","class","additional-note-container",3,"height",4,"ngIf"],[3,"component","variablesMap","timezones","isHidden","lead","preview","customComponentsValuesMap","haveUnSavedChanges","onChecklistUpdate","positiveNegativeFlow","onFirstNurseCallAppointmentUpdate"],["nz-col","","nzFlex","1 0 400px",1,"additional-note-container"],["nz-row",""],["nz-col",""],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","24",1,"additional-note"],["placeholder","Add additional notes..",3,"ngModel","config","ngModelChange"],["note",""],["nz-col","","nzSpan","24"],[3,"note","onTemplateSelected"],["nz-row","","nzGutter","64","style","padding-right: 86px; padding-left: 64px;",4,"ngIf"],["nz-row","","nzGutter","64",2,"padding-right","86px","padding-left","64px"],["nz-col","","nzSpan","24",1,"additional-note-container"],[1,"additional-note"],["nz-typography","","nzType","secondary"],[3,"innerHTML"],[1,"footer-container"],["nz-col","","nzSpan","24",2,"margin","12px"],[3,"isSMSEnabled","loading","disabled","haveUnSavedChanges","submitChecklist","onCallActionUpdate","sendSMSEnrolment","saveChecklist"],["nz-col","","nzSpan","24",1,"checklist-loader"],["nzTip","Loading..."],["nz-col","","nzSpan","24",1,"checklist-loader",2,"text-align","center"]],template:function(e,t){if(1&e&&(m.Xb(0,"div",0),m.Vc(1,xn,4,2,"ng-container",1),m.Vc(2,Pn,2,1,"ng-container",2),m.Vc(3,Rn,4,4,"div",3),m.Wb(),m.Vc(4,Un,2,2,"ng-template",null,4,m.Wc),m.Vc(6,Vn,2,2,"ng-template",null,5,m.Wc)),2&e){const e=m.Ic(7);m.Db(1),m.rc("ngIf",!t.noChecklist)("ngIfElse",e),m.Db(1),m.rc("ngIf",!t.showChecklistLoader),m.Db(1),m.rc("ngIf",!t.preview)}},directives:[o.q,z.c,z.a,w.a,o.p,zn,Z.a,a.u,a.x,Y.a,wn,U.a],pipes:[Ln.a],styles:[".extra[_ngcontent-%COMP%]{padding:0!important;margin:0!important;background:#fff;min-height:200px}#checklist-container[_ngcontent-%COMP%]{margin-right:0!important;margin-left:0!important;margin-top:20px;overflow-y:scroll;scroll-behavior:smooth}.header[_ngcontent-%COMP%]{display:flex;position:absolute;top:0;border-bottom:1px solid #f0f0f0;width:100%;margin-bottom:16px px;height:30px}.additional-note-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:16px!important;width:100%;margin-top:16px}[_nghost-%COMP%]     .angular-editor{width:100%}.checklist-loader[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;top:49%}[_nghost-%COMP%]     body::-webkit-scrollbar{display:none}.footer-container[_ngcontent-%COMP%]{background:#00000099;color:#fff;bottom:0;height:90px;position:absolute;width:100%;left:0}"]}),e})();var Bn=n("0zwC"),jn=n("5vDB"),qn=n("9xQM");function Gn(e,t){1&e&&(m.Xb(0,"strong"),m.Xc(1," N/A "),m.Wb())}function Hn(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1),m.jc(2,"translate"),m.Wb()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"TABLEHEADER.GENDER")," "))}function Zn(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1," Primary Contact Number "),m.Wb())}function Yn(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1," Secondary Contact Number "),m.Wb())}function $n(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1," Primary Insurance Name "),m.Wb())}function Kn(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1," Primary Insurance Member Id "),m.Wb())}function Qn(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1," Secondary Insurance Name "),m.Wb())}function Jn(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1),m.jc(2,"translate"),m.Wb()),2&e&&(m.Db(1),m.Zc(" Secondary ",m.kc(2,1,"INSURANCE.INSURER_MEMBER_ID")," "))}function ei(e,t){1&e&&(m.Xb(0,"span",16),m.Xc(1," Address "),m.Wb())}let ti=(()=>{class e{constructor(){}ngOnInit(){this.avatarName=this.lead.patientInfo.firstName.charAt(0)+this.lead.patientInfo.lastName.charAt(0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["app-follow-up-confirmation"]],inputs:{lead:"lead"},decls:57,vars:19,consts:[[1,"outer-container"],["nz-row","",1,"container",3,"nzGutter"],["nz-col","","nzSpan","24"],[2,"width","100%","height","100%"],[2,"text-align","center","display","flex","flex-direction","column"],[1,"avatar-container"],[1,"avatar-name"],[2,"text-align","center"],["nz-typography","","nzType","primary"],[2,"margin","10px"],["isToolTipEnabled","true",3,"isFullName","leadStatus"],[2,"text-align","center","margin","10px"],["nzColor","var(--primary-color)"],["nz-typography","","nz-type","secondary",2,"margin-bottom","10px","margin-top","10px"],[2,"display","flex","flex-direction","row","margin-bottom","10px"],[2,"display","flex","flex-direction","column","width","48%"],["nz-typography","","nzType","secondary"],["nzType","vertical",2,"height","50px"],[2,"display","flex","flex-direction","column","width","100%","margin-top","10px"],["nz-typography",""],["emptyContact",""],["gender",""],["primaryContact",""],["secondaryContact",""],["primaryInsuranceName",""],["primaryInsuranceMemberId",""],["secondaryInsuranceName",""],["secondaryInsuranceMemberId",""],["address1n2",""]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"nz-card",3),m.Xb(4,"div",4),m.Xb(5,"span",5),m.Xb(6,"span",6),m.Xc(7),m.Wb(),m.Wb(),m.Xb(8,"span",7),m.Xb(9,"h4",8),m.Xc(10),m.Wb(),m.Xb(11,"span",9),m.Sb(12,"app-patient-status-tag",10),m.Wb(),m.Wb(),m.Xb(13,"span",11),m.Xb(14,"nz-tag",12),m.Xc(15,"Tier 1"),m.Wb(),m.Wb(),m.Xb(16,"span",13),m.Xc(17),m.Wb(),m.Xb(18,"span",14),m.Xb(19,"span",15),m.Xb(20,"span",16),m.Xc(21," MR Number "),m.Wb(),m.Xb(22,"span",8),m.Xc(23),m.jc(24,"externalSources"),m.Wb(),m.Wb(),m.Sb(25,"nz-divider",17),m.Xb(26,"span",15),m.Xb(27,"span",16),m.Xc(28),m.jc(29,"translate"),m.Wb(),m.Xb(30,"span",8),m.Xc(31),m.jc(32,"date"),m.Wb(),m.Wb(),m.Wb(),m.Xb(33,"span",18),m.Xb(34,"span",16),m.Xc(35," Address "),m.Wb(),m.Xb(36,"span",13),m.Xb(37,"strong",19),m.Xc(38),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Vc(39,Gn,2,0,"ng-template",null,20,m.Wc),m.Vc(41,Hn,3,3,"ng-template",null,21,m.Wc),m.Vc(43,Zn,2,0,"ng-template",null,22,m.Wc),m.Vc(45,Yn,2,0,"ng-template",null,23,m.Wc),m.Vc(47,$n,2,0,"ng-template",null,24,m.Wc),m.Vc(49,Kn,2,0,"ng-template",null,25,m.Wc),m.Vc(51,Qn,2,0,"ng-template",null,26,m.Wc),m.Vc(53,Jn,3,3,"ng-template",null,27,m.Wc),m.Vc(55,ei,2,0,"ng-template",null,28,m.Wc),m.Wb()),2&e&&(m.Db(1),m.rc("nzGutter",10),m.Db(6),m.Zc(" ",t.avatarName," "),m.Db(3),m.ad(" ",null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.firstName," \xa0 ",null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.lastName," "),m.Db(2),m.rc("isFullName",!0)("leadStatus",null==t.lead?null:t.lead.status),m.Db(5),m.Zc(" ",(null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.email)||"N/A"," "),m.Db(6),m.Zc(" ",m.lc(24,11,null==t.lead||null==t.lead.patientInfo?null:t.lead.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")," "),m.Db(5),m.Zc(" ",m.kc(29,14,"TABLEHEADER.DOB")," "),m.Db(3),m.Zc("",m.lc(32,16,(null==t.lead?null:t.lead.patientInfo.dateOfBirth)||"N/A","mediumDate")," "),m.Db(7),m.Zc(" ",(null==t.lead||null==t.lead.patientInfo||null==t.lead.patientInfo.address?null:t.lead.patientInfo.address.location)||""," "))},directives:[z.c,z.a,ke.a,w.a,Bn.a,Ne.a,jn.a],pipes:[qn.a,X.a,o.e],styles:[".lead-details-row[_ngcontent-%COMP%]{margin-top:24px!important}.avatar-container[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:50%;background:#eff1f7;text-align:center;display:flex;align-self:center;flex-direction:column;margin-bottom:10px}.avatar-name[_ngcontent-%COMP%]{height:revert;width:100%;display:flex;align-items:center;flex-flow:column;position:inherit;padding:28%;font-size:25px}[_nghost-%COMP%]     .ant-descriptions-item-label:after{content:none;margin:0}[_nghost-%COMP%]     .ant-descriptions-item-label{font-size:.9em}"]}),e})();var ni=n("50vb"),ii=n("H/XM"),oi=n("Gi1d"),ai=n("IvDN");function li(e,t){if(1&e&&(m.Xc(0," Last updated On: "),m.Xb(1,"strong"),m.Xc(2),m.jc(3,"date"),m.Wb()),2&e){const e=m.ic().$implicit;m.Db(2),m.Yc(m.lc(3,1,e.updatedOn,"dd MMM yyyy hh:mm a"))}}function ci(e,t){if(1&e&&(m.Xc(0," Updated By: "),m.Xb(1,"strong"),m.Xc(2),m.Wb()),2&e){const e=m.ic().$implicit;m.Db(2),m.Yc(e.changedByName)}}function ri(e,t){if(1&e&&(m.Xb(0,"nz-collapse-panel",1),m.Xb(1,"p",2),m.Sb(2,"basic-enrolment-wizard",3),m.Wb(),m.Vc(3,li,4,4,"ng-template",null,4,m.Wc),m.Vc(5,ci,3,1,"ng-template",null,5,m.Wc),m.Wb()),2&e){const e=t.$implicit,n=m.Ic(4),i=m.Ic(6),o=m.ic();m.rc("nzHeader",n)("nzExtra",i)("nzShowArrow",!0),m.Db(2),m.rc("lead",o.lead)("previewList",!0)("checklist",e)}}let si=(()=>{class e{constructor(e){this._leadsService=e,this.checklists=new Array}ngOnInit(){this._leadsService.getChecklistHistory(this.lead.leadId,!0).subscribe(e=>{this.checklists=e})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(d.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-checklist-history"]],inputs:{lead:"lead"},decls:2,vars:1,consts:[[3,"nzHeader","nzExtra","nzShowArrow",4,"ngFor","ngForOf"],[3,"nzHeader","nzExtra","nzShowArrow"],[2,"margin","0"],[3,"lead","previewList","checklist"],["header",""],["extraTpl",""]],template:function(e,t){1&e&&(m.Xb(0,"nz-collapse"),m.Vc(1,ri,7,6,"nz-collapse-panel",0),m.Wb()),2&e&&(m.Db(1),m.rc("ngForOf",t.checklists))},directives:[ai.a,o.p,ai.c,Fn],pipes:[o.e],styles:[""]}),e})();var di=n("4RGM");function bi(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"label",4),m.Xc(2),m.Wb(),m.Ub()),2&e){const e=m.ic().$implicit;m.Db(1),m.rc("nzValue",e.key),m.Db(1),m.Yc(e.key)}}function ui(e,t){if(1&e&&(m.Vb(0),m.Vc(1,bi,3,2,"ng-container",3),m.Ub()),2&e){const e=t.$implicit,n=m.ic();m.Db(1),m.rc("ngIf","LOST"!=n.programStatusMap.get(e.key))}}function pi(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"div",5),m.Xb(2,"div",6),m.Xb(3,"p",7),m.Xc(4,"Notes"),m.Wb(),m.Wb(),m.Xb(5,"div",8),m.Xb(6,"textarea",9),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().note=t}),m.Wb(),m.Wb(),m.Xb(7,"div",10),m.Xb(8,"button",11),m.ec("click",function(){m.Lc(e);const t=m.ic();return t.markAsLost(t.selectedProgram)}),m.Xc(9," Mark as Lost "),m.Wb(),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(6),m.rc("ngModel",e.note),m.Db(2),m.rc("nzLoading",e.loading)}}let hi=(()=>{class e{constructor(e,t){this.nzModalRef=e,this._leadsService=t,this.programStatusMap=new Map}ngOnInit(){for(let e in this.programEligibility)this.selectedProgram=e,this.programStatusMap.set(e,this.programEligibility[e].status);console.log("this.programStatusMap : ",this.programStatusMap)}onProgramSelect(e){this.selectedProgram=e,this.note=""}markAsLost(e){this.loading=!0,this._leadsService.markAsLost(this.lead.leadId,e,this.note).subscribe(t=>{this.programStatusMap.set(e,"LOST"),console.log("this.programStatusMap : ",this.programStatusMap),console.log("Note : ",this.note),this.loading=!1,this.note="",this.nzModalRef.close()})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(d.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-mark-as-lost"]],inputs:{lead:"lead",programEligibility:"programEligibility"},decls:6,vars:5,consts:[[1,"container"],["nzButtonStyle","solid",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-radio-button","",3,"nzValue"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","24",1,"timeline-div"],["required","","rows","4","nz-input","",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","24",1,"timeline-div",2,"text-align","center","margin-top","10px"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"nz-radio-group",1),m.ec("ngModelChange",function(e){return t.selectedProgram=e})("ngModelChange",function(){return t.onProgramSelect(t.selectedProgram)}),m.Vc(2,ui,2,1,"ng-container",2),m.jc(3,"keyvalue"),m.Wb(),m.Sb(4,"nz-divider"),m.Vc(5,pi,10,2,"ng-container",3),m.Wb()),2&e&&(m.Db(1),m.rc("ngModel",t.selectedProgram),m.Db(1),m.rc("ngForOf",m.kc(3,3,t.programEligibility)),m.Db(3),m.rc("ngIf",t.selectedProgram))},directives:[de.c,a.u,a.x,o.p,jn.a,o.q,de.b,de.a,z.c,z.a,w.a,S.b,a.d,a.C,M.a,O.a,k.a],pipes:[o.j],styles:[""]}),e})();var gi=n("oyxB"),mi=n("xB20"),fi=n("ncdi");let vi=(()=>{class e{constructor(e){this.modalService=e}ngOnInit(){}showMessagePreview(){this.modalService.create({nzTitle:"Message Preview",nzFooter:null,nzMaskClosable:!0,nzKeyboard:!0,nzContent:this.followUp.followUpEntity.message})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.f))},e.\u0275cmp=m.Lb({type:e,selectors:[["sms-follow-up-card"]],inputs:{followUp:"followUp"},decls:20,vars:8,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","16"],[1,"header"],["nz-col","","nzSpan","8",2,"text-align","right"],[1,"view-message-btn",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline",2,"color","var(--primary-color)"],["nz-col","","nzSpan","12",2,"text-align","left","margin-top","20px"],["nz-typography","",2,"color","var(--primary-color)"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","12",1,"follow-up-response"],["nzColor","var(--primary-color)"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Sb(2,"span",2),m.Xb(3,"strong"),m.Xc(4," SMS Follow-up "),m.Wb(),m.Wb(),m.Xb(5,"div",3),m.Xb(6,"span",4),m.ec("click",function(){return t.showMessagePreview()}),m.Sb(7,"i",5),m.Wb(),m.Wb(),m.Xb(8,"div",6),m.Xb(9,"strong"),m.Xb(10,"span",7),m.Xc(11),m.jc(12,"utcToLocalTime"),m.Wb(),m.Wb(),m.Sb(13,"br"),m.Xb(14,"span",8),m.Xc(15),m.jc(16,"utcToLocalTime"),m.Wb(),m.Wb(),m.Xb(17,"div",9),m.Xb(18,"nz-tag",10),m.Xc(19," Complete "),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(11),m.Zc("",m.lc(12,2,t.followUp.createdAt,"hh:mm a")," "),m.Db(4),m.Yc(m.lc(16,5,t.followUp.createdAt,"mediumDate")))},directives:[z.c,z.a,k.a,_.a,w.a,Ne.a],pipes:[dt.a],styles:[".view-message-btn[_ngcontent-%COMP%]{color:var(--primary-color)}.follow-up-response[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-self:end}nz-tag[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]{border-radius:5px 5px 5px 5px;border:1px solid var(--primary-color);margin-right:4px}"]}),e})();var Ci=n("2Vo4");let zi=(()=>{class e{constructor(e){this._genesysService=e}transform(e){return"ININ-OUTBOUND-NUMBER-UNCALLABLE-SKIPPED"==e?new Ci.a({name:"Call Skipped"}).asObservable():this._genesysService.getWrapUpCodeDetail(e)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(ni.a))},e.\u0275pipe=m.Qb({name:"wrapUpCode",type:e,pure:!0}),e})();function Si(e,t){if(1&e){const e=m.Yb();m.Xb(0,"span",16),m.ec("click",function(){return m.Lc(e),m.ic().showMessagePreview()}),m.Sb(1,"i",17),m.Wb()}}function Ii(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"async"),m.jc(3,"wrapUpCode"),m.Ub()),2&e){const e=m.ic(2);let t=null;m.Db(1),m.Zc(" ",null==(t=m.kc(2,1,m.kc(3,3,null==e.followUp||null==e.followUp.callRecord||null==e.followUp.callRecord.cellPhone?null:e.followUp.callRecord.cellPhone.lastResult)))?null:t.name," ")}}function Xi(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"async"),m.jc(3,"wrapUpCode"),m.Ub()),2&e){const e=m.ic(2);let t=null;m.Db(1),m.Zc(" ",null==(t=m.kc(2,1,m.kc(3,3,null==e.followUp||null==e.followUp.callRecord||null==e.followUp.callRecord.primaryPhone?null:e.followUp.callRecord.primaryPhone.lastResult)))?null:t.name," ")}}function yi(e,t){if(1&e&&(m.Xb(0,"span",8),m.Xb(1,"p",6),m.Xc(2," Call Response "),m.Wb(),m.Vc(3,Ii,4,5,"ng-container",18),m.Vc(4,Xi,4,5,"ng-container",18),m.Wb()),2&e){const e=m.ic();m.Db(3),m.rc("ngIf",null!=e.followUp.callRecord.cellPhone),m.Db(1),m.rc("ngIf",null!=e.followUp.callRecord.primaryPhone)}}function Di(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"utcToLocalTime"),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.Zc(" ",m.lc(2,1,null==e.followUp||null==e.followUp.callRecord||null==e.followUp.callRecord.cellPhone?null:e.followUp.callRecord.cellPhone.lastAttempt,"dd MMM yyyy hh:mm a")," ")}}function Wi(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"utcToLocalTime"),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.Zc(" ",m.lc(2,1,null==e.followUp||null==e.followUp.callRecord||null==e.followUp.callRecord.primaryPhone?null:e.followUp.callRecord.primaryPhone.lastAttempt,"dd MMM yyyy hh:mm a")," ")}}function Ti(e,t){if(1&e&&(m.Xb(0,"span",8),m.Xb(1,"p",6),m.Xc(2," Call Time "),m.Wb(),m.Vc(3,Di,3,4,"ng-container",18),m.Vc(4,Wi,3,4,"ng-container",18),m.Wb()),2&e){const e=m.ic();m.Db(3),m.rc("ngIf",null!=e.followUp.callRecord.cellPhone),m.Db(1),m.rc("ngIf",null!=e.followUp.callRecord.primaryPhone)}}function Ei(e,t){1&e&&(m.Xb(0,"nz-tag",19),m.Xc(1," Complete "),m.Wb())}function wi(e,t){1&e&&(m.Xb(0,"nz-tag",20),m.Xc(1," Pending "),m.Wb())}let Li=(()=>{class e{constructor(){}ngOnInit(){}onCallInitiated(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["audio-call-follow-up"]],inputs:{followUp:"followUp",phoneNumbers:"phoneNumbers",leadId:"leadId"},decls:30,vars:17,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","16"],[1,"header"],["nz-col","","nzSpan","8",2,"text-align","right"],["class","view-message-btn",3,"click",4,"ngIf"],["nz-col","","nzSpan","24",1,"follow-up-body",2,"text-align","left","margin-top","20px"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","24",1,"follow-up-body",2,"text-align","left","margin-bottom","8px"],["nz-typography","","nzType","primary"],["nz-col","","nzSpan","12",1,"follow-up-body"],["nz-typography","","nzType","primary",4,"ngIf"],["nz-col","","nzSpan","12",2,"text-align","left","margin-top","20px"],["nz-typography","",2,"color","var(--primary-color)"],["nz-col","","nzSpan","12",1,"follow-up-response"],["nzColor","var(--primary-color)",4,"ngIf"],["nzColor","var(--warning-color)",4,"ngIf"],[1,"view-message-btn",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline",2,"color","var(--primary-color)"],[4,"ngIf"],["nzColor","var(--primary-color)"],["nzColor","var(--warning-color)"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Sb(2,"span",2),m.Xb(3,"strong"),m.Xc(4," Audio call Follow-up "),m.Wb(),m.Wb(),m.Xb(5,"div",3),m.Vc(6,Si,2,0,"span",4),m.Wb(),m.Xb(7,"div",5),m.Xb(8,"p",6),m.Xc(9," Call scheduled Date "),m.Wb(),m.Wb(),m.Xb(10,"div",7),m.Xb(11,"p",8),m.Xc(12),m.jc(13,"utcToLocalTime"),m.Wb(),m.Wb(),m.Xb(14,"div",9),m.Vc(15,yi,5,2,"span",10),m.Wb(),m.Xb(16,"div",9),m.Vc(17,Ti,5,2,"span",10),m.Wb(),m.Xb(18,"div",11),m.Xb(19,"strong"),m.Xb(20,"span",12),m.Xc(21),m.jc(22,"utcToLocalTime"),m.Wb(),m.Wb(),m.Sb(23,"br"),m.Xb(24,"span",6),m.Xc(25),m.jc(26,"utcToLocalTime"),m.Wb(),m.Wb(),m.Xb(27,"div",13),m.Vc(28,Ei,2,0,"nz-tag",14),m.Vc(29,wi,2,0,"nz-tag",15),m.Wb(),m.Wb()),2&e&&(m.Db(6),m.rc("ngIf",!1),m.Db(6),m.Zc(" ",m.lc(13,8,t.followUp.linkedAppointment.schedule.startsOn,"mediumDate")," "),m.Db(3),m.rc("ngIf",null!=t.followUp.callRecord),m.Db(2),m.rc("ngIf",null!=t.followUp.callRecord),m.Db(4),m.Zc("",m.lc(22,11,t.followUp.createdAt,"hh:mm a")," "),m.Db(4),m.Yc(m.lc(26,14,t.followUp.createdAt,"mediumDate")),m.Db(3),m.rc("ngIf","COMPLETED"==(null==t.followUp?null:t.followUp.status)),m.Db(1),m.rc("ngIf","PENDING"==(null==t.followUp?null:t.followUp.status)))},directives:[z.c,z.a,o.q,w.a,k.a,_.a,Ne.a],pipes:[dt.a,o.b,zi],styles:[".view-message-btn[_ngcontent-%COMP%]{color:var(--primary-color)}.follow-up-response[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-self:end;padding-right:0!important}nz-tag[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]{border-radius:5px 5px 5px 5px;border:1px solid var(--primary-color);margin-right:4px}.follow-up-body[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;align-items:center}p[_ngcontent-%COMP%]{margin-bottom:3px}"]}),e})(),Mi=(()=>{class e{constructor(){}ngOnInit(){}showLetterPreview(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["letter-follow-up"]],inputs:{followUp:"followUp"},decls:20,vars:8,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","16"],[1,"header"],["nz-col","","hidden","","nzSpan","8",2,"text-align","right"],[1,"view-message-btn",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline",2,"color","var(--primary-color)"],["nz-col","","nzSpan","12",2,"text-align","left","margin-top","20px"],["nz-typography","",2,"color","var(--primary-color)"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","12",1,"follow-up-response"],["nzColor","var(--primary-color)"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Sb(2,"span",2),m.Xb(3,"strong"),m.Xc(4," Enrollment letter sent "),m.Wb(),m.Wb(),m.Xb(5,"div",3),m.Xb(6,"span",4),m.ec("click",function(){return t.showLetterPreview()}),m.Sb(7,"i",5),m.Wb(),m.Wb(),m.Xb(8,"div",6),m.Xb(9,"strong"),m.Xb(10,"span",7),m.Xc(11),m.jc(12,"utcToLocalTime"),m.Wb(),m.Wb(),m.Sb(13,"br"),m.Xb(14,"span",8),m.Xc(15),m.jc(16,"utcToLocalTime"),m.Wb(),m.Wb(),m.Xb(17,"div",9),m.Xb(18,"nz-tag",10),m.Xc(19," Complete "),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.Db(11),m.Zc("",m.lc(12,2,t.followUp.createdAt,"hh:mm a")," "),m.Db(4),m.Yc(m.lc(16,5,t.followUp.createdAt,"mediumDate")))},directives:[z.c,z.a,k.a,_.a,w.a,Ne.a],pipes:[dt.a],styles:[".view-message-btn[_ngcontent-%COMP%]{color:var(--primary-color)}.follow-up-response[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-self:end}nz-tag[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.header[_ngcontent-%COMP%]{border-radius:5px 5px 5px 5px;border:1px solid var(--primary-color);margin-right:4px}"]}),e})();function Oi(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"nz-card",11),m.Sb(2,"sms-follow-up-card",12),m.Wb(),m.Ub()),2&e){const e=m.ic(2).$implicit;m.Db(1),m.rc("nzHoverable",!0),m.Db(1),m.rc("followUp",e)}}function ki(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"nz-card",13),m.Sb(2,"audio-call-follow-up",14),m.Wb(),m.Ub()),2&e){const e=m.ic(2).$implicit,t=m.ic(2);m.Db(1),m.rc("nzHoverable",!0),m.Db(1),m.rc("followUp",e)("phoneNumbers",t.phoneNumbers)("leadId",t.leadId)}}function _i(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"nz-card",11),m.Sb(2,"letter-follow-up",12),m.Wb(),m.Ub()),2&e){const e=m.ic(2).$implicit;m.Db(1),m.rc("nzHoverable",!0),m.Db(1),m.rc("followUp",e)}}function Ni(e,t){if(1&e&&(m.Xb(0,"nz-timeline-item",9),m.Vc(1,Oi,3,2,"ng-container",10),m.Vc(2,ki,3,4,"ng-container",10),m.Vc(3,_i,3,2,"ng-container",10),m.Wb()),2&e){const e=m.ic().$implicit;m.ic();const t=m.Ic(7),n=m.Ic(5);m.rc("nzDot","COMPLETED"==e.status?t:n),m.Db(1),m.rc("ngIf","SMS"==e.type),m.Db(1),m.rc("ngIf","AUDIO_CALL"==e.type),m.Db(1),m.rc("ngIf","LETTER"==e.type)}}function xi(e,t){if(1&e&&(m.Vb(0),m.Vc(1,Ni,4,4,"nz-timeline-item",8),m.Ub()),2&e){const e=t.$implicit;m.Db(1),m.rc("ngIf",!e.hidden)}}function Ai(e,t){1&e&&m.Sb(0,"i",15)}function Pi(e,t){1&e&&m.Sb(0,"i",16)}function Ri(e,t){if(1&e&&(m.Xb(0,"div",3),m.Xb(1,"div",4),m.Xb(2,"nz-timeline"),m.Vc(3,xi,2,1,"ng-container",5),m.Wb(),m.Vc(4,Ai,1,0,"ng-template",null,6,m.Wc),m.Vc(6,Pi,1,0,"ng-template",null,7,m.Wc),m.Wb(),m.Wb()),2&e){const e=m.ic();m.Db(3),m.rc("ngForOf",e.followUps)}}let Ui=(()=>{class e{constructor(e,t){this._genesysService=e,this._leadsService=t,this.followUps=new Array,this.loadFullLead=!1}ngOnInit(){var e;this.loadFullLead?this.getLead():this.followUps=null===(e=this.followUps)||void 0===e?void 0:e.sort((e,t)=>e.step>=t.step?-1:1)}getLead(){this.loadingFollowUp=!0,this._genesysService.updateLeadContact(this.leadId).subscribe(e=>{this.getSpecificLead()},e=>{this.getSpecificLead()})}getSpecificLead(){this._leadsService.getSpecificLeadForUser(this.leadId).subscribe(e=>{this.lead=e,this.followUps=null!=this.lead.followUps&&null!=this.lead.followUps?this.lead.followUps.reverse():[],this.loadingFollowUp=!1})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(ni.a),m.Rb(d.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["follow-up-timeline"]],inputs:{followUps:"followUps",phoneNumbers:"phoneNumbers",leadId:"leadId",loadFullLead:"loadFullLead"},decls:3,vars:2,consts:[[1,"container"],["nzSimple","",2,"display","flex","flex-direction","column","align-items","center",3,"nzSpinning"],["nz-row","","nzGutter","64",4,"ngIf"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24",1,"timeline-div"],[4,"ngFor","ngForOf"],["pendingTemplate",""],["completedTemplate",""],["nzColor","var(--primary-color)",3,"nzDot",4,"ngIf"],["nzColor","var(--primary-color)",3,"nzDot"],[4,"ngIf"],[1,"followup-card",3,"nzHoverable"],[3,"followUp"],["cclass","followup-card",3,"nzHoverable"],[3,"followUp","phoneNumbers","leadId"],["nz-icon","","nzType","clock-circle","nzTheme","fill",2,"font-size","16px","color","var(--warning-color)"],["nz-icon","","nzType","check-circle","nzTheme","fill",2,"font-size","16px","color","var(--success-color)"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Sb(1,"nz-spin",1),m.Vc(2,Ri,8,1,"div",2),m.Wb()),2&e&&(m.Db(1),m.rc("nzSpinning",t.loadingFollowUp),m.Db(1),m.rc("ngIf",!t.loadingFollowUp))},directives:[U.a,o.q,z.c,z.a,fi.a,o.p,fi.b,ke.a,vi,Li,Mi,k.a,_.a],styles:[".followup-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;margin-bottom:3px}[_nghost-%COMP%]     .ant-card-hoverable{cursor:default!important}[_nghost-%COMP%]     .ant-card-hoverable:hover{box-shadow:3px 5px 5px #00000036;background:#f1f1f1 0 0 no-repeat padding-box}.followup-card[_ngcontent-%COMP%] >   .ant-card-body{padding:10px 10px 10px 18px}.timeline-div[_ngcontent-%COMP%]{padding-left:24px!important;padding-right:24px!important}"]}),e})();var Vi=n("HStR"),Fi=n("3+Kf"),Bi=n("Wfee"),ji=n("ZKr6");const qi=["enrolmentWizard"];function Gi(e,t){if(1&e&&m.Sb(0,"nz-alert",77),2&e){const e=m.ic(2);m.tc("nzMessage","The lead was marked as Lost with reason: ",null==e.lead||null==e.lead.leadStatusInfo||null==e.lead.leadStatusInfo.latestStatusHistory?null:e.lead.leadStatusInfo.latestStatusHistory.comments,"")}}function Hi(e,t){if(1&e&&(m.Xb(0,"div",78),m.Xb(1,"div",21),m.Xb(2,"nz-card",79),m.Xc(3),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.ic(2);m.rc("nzGutter",10),m.Db(3),m.cd(" ",null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.firstName," ",null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.lastName," was moved to Not Eligible on ",e.notEligibleDate," with this note : ",e.message," ")}}function Zi(e,t){if(1&e&&(m.Xb(0,"span",80),m.Xb(1,"strong",81),m.Xc(2),m.Wb(),m.Wb()),2&e){const e=m.ic(2),t=m.Ic(22);m.rc("nzTitle",t),m.Db(2),m.Zc(" ",null==e.lead?null:e.lead.physician," ")}}function Yi(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"strong",51),m.Xc(2),m.Wb(),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.uc("nzCopyText","[",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[0]?null:e.lead.patientInfo.phoneNumbers[0].countryCode,"]",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[0]?null:e.lead.patientInfo.phoneNumbers[0].number,""),m.Db(1),m.ad(" [",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[0]?null:e.lead.patientInfo.phoneNumbers[0].countryCode,"] ",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[0]?null:e.lead.patientInfo.phoneNumbers[0].number," ")}}function $i(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"strong",51),m.Xc(2),m.Wb(),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.uc("nzCopyText","[",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[1]?null:e.lead.patientInfo.phoneNumbers[1].countryCode,"]",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[1]?null:e.lead.patientInfo.phoneNumbers[1].number,""),m.Db(1),m.ad(" [",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[1]?null:e.lead.patientInfo.phoneNumbers[1].countryCode,"] ",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[1]?null:e.lead.patientInfo.phoneNumbers[1].number," ")}}function Ki(e,t){if(1&e&&(m.Xb(0,"nz-descriptions-item",48),m.Xb(1,"strong",81),m.Xc(2),m.jc(3,"userLocations"),m.Wb(),m.Wb()),2&e){const e=m.ic(2),t=m.Ic(24);m.rc("nzTitle",t),m.Db(2),m.Zc(" ",m.kc(3,2,null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.locations)," ")}}function Qi(e,t){if(1&e&&(m.Xb(0,"strong",81),m.Xb(1,"span"),m.Xc(2),m.Wb(),m.Sb(3,"br"),m.Xc(4),m.jc(5,"date"),m.jc(6,"date"),m.Wb()),2&e){const e=m.ic(2);m.Db(2),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.availableHours?null:e.lead.patientInfo.availableHours.days)||""," "),m.Db(2),m.ad(" From: ",m.lc(5,3,null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.availableHours?null:e.lead.patientInfo.availableHours.fromTime,"hh:mm a")||"-"," To: ",m.lc(6,6,null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.availableHours?null:e.lead.patientInfo.availableHours.toTime,"hh:mm a")||"-"," ")}}function Ji(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"span",82),m.Xc(2),m.Wb(),m.Ub()),2&e){const e=t.$implicit;m.Db(2),m.ad("",null==e?null:e.code," ",null==e?null:e.description," ")}}function eo(e,t){if(1&e&&(m.Xb(0,"nz-descriptions-item",48),m.Xb(1,"strong",81),m.Vc(2,Ji,3,2,"ng-container",58),m.Wb(),m.Wb()),2&e){const e=m.ic(2),t=m.Ic(26);m.rc("nzTitle",t),m.Db(2),m.rc("ngForOf",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.healthInfo?null:e.lead.patientInfo.healthInfo.dxCodes)}}function to(e,t){1&e&&m.Sb(0,"nz-divider",86)}function no(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"div"),m.Xb(2,"div",83),m.Sb(3,"label",84),m.Wb(),m.Xb(4,"label",39),m.Xc(5),m.jc(6,"date"),m.Wb(),m.Wb(),m.Vc(7,to,1,0,"nz-divider",85),m.Ub()),2&e){const e=t.$implicit,n=t.last,i=m.ic(2);m.Db(3),m.rc("innerHTML",null==e?null:e.content,m.Mc),m.Db(2),m.ad(" Added by ",i.getAddedBy(null==e?null:e.caretakerName)," on ",m.lc(6,4,null==e?null:e.createdOn,"MMM dd yyyy, hh:mm a")," "),m.Db(2),m.rc("ngIf",!n)}}function io(e,t){if(1&e){const e=m.Yb();m.Xb(0,"a",94),m.ec("click",function(){m.Lc(e);const t=m.ic().$implicit,n=m.ic(3);return n.resolve(t,n.element)}),m.Xc(1," Resolve "),m.Wb()}}const oo=function(){return["RESOLVE_WORK_LIST_ITEM"]};function ao(e,t){if(1&e&&(m.Xb(0,"li",90),m.Xb(1,"ul",91),m.Xb(2,"nz-list-item-action"),m.Vc(3,io,2,0,"a",92),m.Wb(),m.Wb(),m.Xb(4,"label",93),m.Xc(5),m.Wb(),m.Wb()),2&e){const e=t.$implicit,n=m.ic(3);m.Db(3),m.rc("isFeaturePermitted",m.xc(2,oo)),m.Db(2),m.Zc(" ",null==n.issueReasonMap?null:n.issueReasonMap.get(null==e?null:e.type)," ")}}function lo(e,t){if(1&e&&(m.Xb(0,"div",87),m.Xb(1,"div",62),m.Xb(2,"div",21),m.Xb(3,"span"),m.Xb(4,"label",64),m.Xc(5,"Qualification Issues"),m.Wb(),m.Xb(6,"p"),m.Xb(7,"strong"),m.Xc(8,"Total: "),m.Wb(),m.Xc(9),m.Wb(),m.Wb(),m.Wb(),m.Xb(10,"div",21),m.Xb(11,"ul",88),m.Vc(12,ao,6,3,"li",89),m.Wb(),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.ic(2);m.Db(9),m.Zc(" ",null==e.workLists?null:e.workLists.totalElements," "),m.Db(2),m.rc("nzDataSource",null==e.workLists?null:e.workLists.content),m.Db(1),m.rc("ngForOf",null==e.workLists?null:e.workLists.content)}}function co(e,t){if(1&e){const e=m.Yb();m.Xb(0,"button",95),m.ec("click",function(){return m.Lc(e),m.ic(2).addFollowUp()}),m.Sb(1,"i",96),m.Wb()}if(2&e){const e=m.ic(2);m.rc("disabled",e.pendingFollowUpPresent)}}function ro(e,t){}function so(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",102),m.ec("click",function(){return m.Lc(e),m.ic(3).editLead()}),m.Xb(1,"div",103),m.Sb(2,"app-icons",107),m.Wb(),m.Xc(3," \xa0 "),m.Xb(4,"strong"),m.Xc(5),m.jc(6,"translate"),m.Wb(),m.Xc(7," \xa0 "),m.Sb(8,"app-icons",106),m.Wb()}2&e&&(m.Db(2),m.rc("originalStyle",!0),m.Db(3),m.Yc(m.kc(6,2,"LEADS.EDIT_LEAD")))}function bo(e,t){1&e&&m.Tb(0)}function uo(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",102),m.ec("click",function(){return m.Lc(e),m.ic(4).markAsLost()}),m.Xb(1,"div",103),m.Sb(2,"app-icons",107),m.Wb(),m.Xc(3," \xa0 "),m.Xb(4,"strong"),m.Xc(5,"Mark as Lost"),m.Wb(),m.Xc(6," \xa0 "),m.Sb(7,"app-icons",106),m.Wb()}2&e&&(m.Db(2),m.rc("originalStyle",!0))}function po(e,t){if(1&e&&(m.Vb(0),m.Vc(1,uo,8,1,"div",99),m.Ub()),2&e){const e=m.ic(3);m.Db(1),m.rc("ngIf",!(null!=e.tenantConfig&&null!=e.tenantConfig.redoxConfig&&e.tenantConfig.redoxConfig.enabled))}}function ho(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",102),m.ec("click",function(){return m.Lc(e),m.ic(3).showPreview()}),m.Xb(1,"div",103),m.Sb(2,"span",108),m.Wb(),m.Xc(3," \xa0 "),m.Xb(4,"strong",109),m.Xb(5,"label",34),m.Xc(6,"Preview Checklist"),m.Wb(),m.Wb(),m.Xc(7," \xa0 "),m.Sb(8,"app-icons",106),m.Wb()}}const go=function(){return[32,32]},mo=function(){return["MARK_LEAD_AS_LOST"]};function fo(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",97),m.Xb(1,"div",54),m.Xb(2,"div",98),m.Xb(3,"strong"),m.Xc(4),m.jc(5,"translate"),m.Wb(),m.Wb(),m.Sb(6,"br"),m.Xb(7,"div",27),m.Vc(8,so,9,4,"div",99),m.Vc(9,bo,1,0,"ng-container",100),m.Vc(10,po,2,1,"ng-container",101),m.Vc(11,ho,9,0,"div",99),m.Xb(12,"div",102),m.ec("click",function(){return m.Lc(e),m.ic(2).deleteLead()}),m.Xb(13,"div",103),m.Sb(14,"app-icons",104),m.Wb(),m.Xc(15," \xa0 "),m.Xb(16,"strong",105),m.Xb(17,"label",93),m.Xc(18),m.jc(19,"translate"),m.Wb(),m.Wb(),m.Xc(20," \xa0 "),m.Sb(21,"app-icons",106),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.ic(2);m.Db(4),m.Yc(m.kc(5,8,"PATIENT.OTHER_ACCOUNT_ACTIONS")),m.Db(3),m.rc("nzGutter",m.xc(12,go)),m.Db(1),m.rc("ngIf",!(null!=e.tenantConfig&&null!=e.tenantConfig.redoxConfig&&e.tenantConfig.redoxConfig.enabled)),m.Db(1),m.rc("isFeaturePermitted",m.xc(13,mo)),m.Db(1),m.rc("ngIf","LOST"!=(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)),m.Db(1),m.rc("ngIf","ACTIVE"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)||"NOT_ELIGIBLE"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)||"CONVERTED"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)),m.Db(3),m.rc("originalStyle",!0),m.Db(4),m.Yc(m.kc(19,10,"LEADS.DELETE_LEAD"))}}const vo=function(e){return{left:e}};function Co(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",15),m.Xb(1,"app-header",16),m.ec("action",function(){return m.Lc(e),m.ic().startEnrolmentWizard()})("secondaryAction",function(){return m.Lc(e),m.ic().updateContact()}),m.Wb(),m.Xb(2,"nz-tabset",17),m.ec("nzSelectedIndexChange",function(t){return m.Lc(e),m.ic().selectedTabIndex=t}),m.Xb(3,"nz-tab",18),m.Xb(4,"div",19),m.Xb(5,"div",20),m.Xb(6,"div",21),m.Vc(7,Gi,1,1,"nz-alert",22),m.Wb(),m.Wb(),m.Xb(8,"div",23),m.Xb(9,"div",21),m.Vc(10,Hi,4,5,"div",24),m.Xb(11,"div",25),m.Xb(12,"div",26),m.Xb(13,"div",27),m.Xb(14,"div",28),m.Xb(15,"nz-card",29),m.Xb(16,"div",30),m.Xb(17,"span",31),m.Xb(18,"span",32),m.Xc(19),m.Wb(),m.Wb(),m.Xb(20,"span",33),m.Xb(21,"strong",34),m.Xc(22),m.Wb(),m.Xb(23,"span",35),m.Sb(24,"app-patient-status-tag",36),m.Wb(),m.Xb(25,"p"),m.Xc(26),m.Wb(),m.Wb(),m.Xb(27,"span",37),m.Xb(28,"nz-tag",38),m.Xc(29),m.Wb(),m.Wb(),m.Xb(30,"span"),m.Xb(31,"span",39),m.Xc(32),m.jc(33,"translate"),m.Wb(),m.Xb(34,"span",40),m.Xc(35),m.Wb(),m.Wb(),m.Xb(36,"span",41),m.Xb(37,"span",42),m.Xb(38,"span",39),m.Xc(39," MR Number "),m.Wb(),m.Xb(40,"span",43),m.jc(41,"externalSources"),m.Xc(42),m.jc(43,"externalSources"),m.Wb(),m.Wb(),m.Sb(44,"nz-divider",44),m.Xb(45,"span",42),m.Xb(46,"span",39),m.Xc(47),m.jc(48,"translate"),m.Wb(),m.Xb(49,"span",43),m.jc(50,"date"),m.Xc(51),m.jc(52,"date"),m.Wb(),m.Wb(),m.Wb(),m.Xb(53,"span",42),m.Xb(54,"span",39),m.Xc(55," Physician "),m.Wb(),m.Vc(56,Zi,3,2,"span",45),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(57,"div",46),m.Xb(58,"nz-card",29),m.Xb(59,"nz-descriptions",47),m.Xb(60,"nz-descriptions-item",48),m.Xb(61,"strong"),m.Xc(62),m.jc(63,"titlecase"),m.Wb(),m.Wb(),m.Xb(64,"nz-descriptions-item",48),m.Vc(65,Yi,3,4,"ng-container",49),m.Wb(),m.Xb(66,"nz-descriptions-item",48),m.Vc(67,$i,3,4,"ng-container",49),m.Wb(),m.Vc(68,Ki,4,4,"nz-descriptions-item",50),m.Xb(69,"nz-descriptions-item",48),m.Xb(70,"strong",51),m.Xc(71),m.Wb(),m.Wb(),m.Xb(72,"nz-descriptions-item",48),m.Xb(73,"strong",51),m.Xc(74),m.Wb(),m.Wb(),m.Xb(75,"nz-descriptions-item",48),m.Xb(76,"strong",51),m.Xc(77),m.Wb(),m.Wb(),m.Vb(78),m.Xb(79,"nz-descriptions-item",48),m.Xb(80,"strong",51),m.Xc(81),m.Wb(),m.Wb(),m.Xb(82,"nz-descriptions-item",48),m.Xb(83,"strong",51),m.Xc(84),m.Wb(),m.Wb(),m.Ub(),m.Wb(),m.Xb(85,"nz-descriptions",47),m.Xb(86,"nz-descriptions-item",48),m.Vc(87,Qi,7,9,"strong",52),m.Wb(),m.Wb(),m.Xb(88,"nz-descriptions",47),m.Vc(89,eo,3,2,"nz-descriptions-item",50),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Sb(90,"nz-divider"),m.Xb(91,"div",27),m.Xb(92,"div",21),m.Xb(93,"div",53),m.Xb(94,"div",54),m.Xb(95,"h3"),m.Xc(96),m.jc(97,"translate"),m.Wb(),m.Wb(),m.Xb(98,"div",55),m.Xb(99,"div",56),m.Xb(100,"button",57),m.ec("click",function(){return m.Lc(e),m.ic().addNewNote()}),m.Xc(101),m.jc(102,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Vc(103,no,8,7,"ng-container",58),m.Wb(),m.Wb(),m.Wb(),m.Xb(104,"div",59),m.Vc(105,lo,13,3,"div",60),m.Xb(106,"div",61),m.Xb(107,"div",62),m.Xb(108,"div",63),m.Xb(109,"span"),m.Xb(110,"label",64),m.Xc(111," Follow-up History "),m.Wb(),m.Xb(112,"p"),m.Xb(113,"strong"),m.Xc(114),m.jc(115,"translate"),m.Wb(),m.Xc(116),m.Wb(),m.Wb(),m.Wb(),m.Xb(117,"div",63),m.Xb(118,"span",65),m.jc(119,"translate"),m.Vc(120,co,2,1,"button",66),m.Wb(),m.Wb(),m.Wb(),m.Xb(121,"div",67),m.Sb(122,"follow-up-timeline",68),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(123,"div",69),m.Xb(124,"div",70),m.Vc(125,ro,0,0,"ng-template",null,71,m.Wc),m.Wb(),m.Wb(),m.Vc(127,fo,22,14,"div",72),m.Wb(),m.Wb(),m.Xb(128,"nz-tab",73),m.Xb(129,"div",74),m.Sb(130,"app-visits",75),m.Wb(),m.Wb(),m.Xb(131,"nz-tab",76),m.Xb(132,"div",74),m.Sb(133,"app-encounters",75),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.ic(),t=m.Ic(4),n=m.Ic(6),i=m.Ic(2),o=m.Ic(8),a=m.Ic(10),l=m.Ic(12),c=m.Ic(18),r=m.Ic(14),s=m.Ic(16),d=m.Ic(20),b=m.Ic(28);m.Db(1),m.sc("title",(null==e.lead?null:e.lead.patientInfo.firstName)+" "+(null==e.lead?null:e.lead.patientInfo.lastName)),m.sc("defaultTitle",(null==e.lead?null:e.lead.patientInfo.firstName)+" "+(null==e.lead?null:e.lead.patientInfo.lastName)),m.rc("isSearchEnabled",!1)("actionTitle",e.actionTitle)("isSecondaryActionEnabled",!0)("isActionEnabled","ACTIVE"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)),m.Db(1),m.rc("nzSelectedIndex",e.selectedTabIndex),m.Db(2),m.Sc("height",e.height)("min-height",e.height)("overflow-x","hidden"),m.Db(3),m.rc("ngIf","LOST"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)),m.Db(1),m.rc("nzGutter",10),m.Db(2),m.rc("ngIf",e.message),m.Db(1),m.rc("nzGutter",10),m.Db(2),m.rc("nzGutter",10),m.Db(6),m.Zc(" ",e.avatarName," "),m.Db(3),m.ad(" ",null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.firstName," \xa0 ",null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.lastName," "),m.Db(2),m.rc("leadStatus",null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus),m.Db(2),m.Yc(e.preferredName),m.Db(3),m.Zc(" Tier ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation?null:e.lead.patientInfo.insuranceInformation.tier)||"0"," "),m.Db(3),m.Zc(" ",m.kc(33,86,"TABLEHEADER.EMAIL")," "),m.Db(3),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.email)||"N/A"," "),m.Db(5),m.rc("nzCopyText",m.lc(41,88,null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")),m.Db(2),m.Zc(" ",m.lc(43,91,null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")," "),m.Db(5),m.Zc(" ",m.kc(48,94,"TABLEHEADER.DOB")," "),m.Db(2),m.rc("nzCopyText",m.lc(50,96,(null==e.lead?null:e.lead.patientInfo.dateOfBirth)||"N/A","mediumDate")),m.Db(2),m.Zc("",m.lc(52,99,(null==e.lead?null:e.lead.patientInfo.dateOfBirth)||"N/A","mediumDate")," "),m.Db(5),m.rc("ngIf",!(null==e.lead||!e.lead.physician)),m.Db(4),m.rc("nzTitle",t),m.Db(2),m.Yc(m.kc(63,102,(null==e.lead?null:e.lead.patientInfo.gender)||"N/A")),m.Db(2),m.rc("nzTitle",n),m.Db(1),m.rc("ngIf",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[0]?null:e.lead.patientInfo.phoneNumbers[0].number)("ngIfElse",i),m.Db(1),m.rc("nzTitle",o),m.Db(1),m.rc("ngIf",null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.phoneNumbers[1]?null:e.lead.patientInfo.phoneNumbers[1].number)("ngIfElse",i),m.Db(1),m.rc("ngIf",!(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.locations||!e.lead.patientInfo.locations.length)),m.Db(1),m.rc("nzTitle",a),m.Db(1),m.rc("nzCopyText",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName)||"N/A"),m.Db(1),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName)||"N/A"," "),m.Db(1),m.rc("nzTitle",l),m.Db(1),m.rc("nzCopyText",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId)||"N/A"),m.Db(1),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId)||"N/A"," "),m.Db(1),m.rc("nzTitle",c),m.Db(1),m.sc("nzCopyText",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.address?null:e.lead.patientInfo.address.location)||""),m.Db(1),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.address?null:e.lead.patientInfo.address.location)||""," "),m.Db(2),m.rc("nzTitle",r),m.Db(1),m.rc("nzCopyText",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName)||"N/A"),m.Db(1),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName)||"N/A"," "),m.Db(1),m.rc("nzTitle",s),m.Db(1),m.rc("nzCopyText",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId)||"N/A"),m.Db(1),m.Zc(" ",(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.insuranceInformation||null==e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.lead.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId)||"N/A"," "),m.Db(2),m.rc("nzTitle",d),m.Db(1),m.rc("ngIf",null!=(null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.availableHours)&&null!=(null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.availableHours))("ngIfElse",b),m.Db(2),m.rc("ngIf",!(null==e.lead||null==e.lead.patientInfo||null==e.lead.patientInfo.healthInfo||null==e.lead.patientInfo.healthInfo.dxCodes||!e.lead.patientInfo.healthInfo.dxCodes.length)),m.Db(2),m.rc("nzGutter",10),m.Db(5),m.Yc(m.kc(97,104,"COMMON.NOTES")),m.Db(5),m.Zc(" ",m.kc(102,106,"LEADS.ADDNOTE"),""),m.Db(2),m.rc("ngForOf",e.notes),m.Db(1),m.Sc("height",e.height)("min-height",e.height),m.Db(1),m.rc("ngIf","NOT_ELIGIBLE"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)&&!(null==e.workLists||!e.workLists.totalElements)),m.Db(9),m.Zc("",m.kc(115,108,"LEADS.TOTALFOLLOWUPS"),":"),m.Db(2),m.Zc(" ",null==e.followUps?null:e.followUps.length," "),m.Db(2),m.rc("nzTooltipTitle",e.pendingFollowUpPresent?"Complete pending follow-ups to create new follow-up":m.kc(119,110,"LEADS.ADDFOLLOWUP")),m.Db(2),m.rc("ngIf","ACTIVE"==(null==e.lead||null==e.lead.leadStatusInfo?null:e.lead.leadStatusInfo.overAllStatus)),m.Db(2),m.rc("followUps",e.followUps)("phoneNumbers",null==e.lead||null==e.lead.patientInfo?null:e.lead.patientInfo.phoneNumbers)("leadId",null==e.lead?null:e.lead.leadId),m.Db(1),m.Sc("height",e.wizardHeight)("min-height",e.wizardHeight),m.rc("hidden",!e.showEnrolmentChecklist)("nzGutter",m.xc(112,go))("ngStyle",m.yc(113,vo,e.headerLeft)),m.Db(4),m.rc("ngIf",!e.hideFooter),m.Db(3),m.rc("patientId",e.leadId),m.Db(3),m.rc("patientId",e.leadId)}}function zo(e,t){1&e&&(m.Xb(0,"strong"),m.Xc(1," N/A "),m.Wb())}function So(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1),m.jc(2,"translate"),m.Wb()),2&e&&(m.Db(1),m.Zc(" ",m.kc(2,1,"TABLEHEADER.GENDER")," "))}function Io(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Primary Contact Number "),m.Wb())}function Xo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Secondary Contact Number "),m.Wb())}function yo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Primary Insurance Name "),m.Wb())}function Do(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Primary Insurance Member Id "),m.Wb())}function Wo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Secondary Insurance Name "),m.Wb())}function To(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Secondary Insurance Member Id "),m.Wb())}function Eo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Address "),m.Wb())}function wo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Patient Available on "),m.Wb())}function Lo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Physician "),m.Wb())}function Mo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Site "),m.Wb())}function Oo(e,t){1&e&&(m.Xb(0,"span",39),m.Xc(1," Diagnosis Codes "),m.Wb())}function ko(e,t){1&e&&(m.Xb(0,"strong",110),m.Xc(1," - "),m.Wb())}let _o=(()=>{class e extends r.a{constructor(e,t,n,i,o,a,l,c,r,s,d,b,u){super(),this.router=e,this._location=t,this._leadsService=n,this._modalService=i,this._activatedRoute=o,this._genesysService=a,this._leadsEventLogger=l,this.translationService=c,this._staffWorklistService=r,this._dataSharingService=s,this.followUpModalService=d,this._notificationsService=b,this._componentFactoryResolver=u,this.languages=[],this.loadingNotes=!1,this.loadingFollowups=!1,this.hideFooter=!1,this.pendingFollowUpPresent=!0,this.preferredName="",this.selectedTabIndex=0,this.actionTitle="Start Enrollment Wizard",this.checkPendingFollowUps=()=>null!=this.followUps&&this.followUps.findIndex(e=>e.status==De.b.PENDING)>-1,this.issueReasonMap=new Map([[oi.a.DOB_ISSUE,"Age is less than 18 years"],[oi.a.DX_CODE_ISSUE,"Two chronic codes are not available"],[oi.a.INSURANCE_ISSUE,"Compatible insurance information is not available"],[oi.a.LANGUAGE_ISSUE,"Language is not supported"],[oi.a.NO_PHYSICIAN_ISSUE,"Physician profile is not assigned"],[oi.a.NO_PARTICIPATING_PHYSICIAN_ISSUE,"Assigned physician does not participate in the program"],[oi.a.NO_VISIT_ENCOUNTER_ISSUE,"No visits or encounters within the last 12 months"],[oi.a.INSURANCE_TIER_ISSUE,"Insurance tier changed"]])}ngOnInit(){this.height=window.innerHeight-244+"px",this.timelineHeight=window.innerHeight-244-124+"px",this.initTranslation(),this._activatedRoute.params.forEach(e=>{this.checkLeadIdAndRedirectToken(e.id)}),this.getLead(this.leadId),this.$callTriggerSubscription=this._dataSharingService.getVoiceCallInitiated().subscribe(e=>{e&&this.startEnrolmentWizard(e.toNumber)}),this._dataSharingService.tenantSettings.subscribe(e=>this.tenantConfig=e)}checkLeadIdAndRedirectToken(e){if(e.length>24){var t=this.parseJwt(e);localStorage.getItem("loggedInTenant")==t.tenantId?(this.leadId=t.leadId,this.isReferredFromGenesys=!0,this.referrer="GENESYS"):(this._notificationsService.warning("User","Please check if you have logged into the correct tenant."),this.router.navigate(["/authorization/logout"],{queryParams:{returnUrl:"/leads/details/"+e,referrer:"GENESYS"}}))}else this.leadId=e}parseJwt(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}ngOnDestroy(){this.$callTriggerSubscription.unsubscribe()}showHIPPAConsentPopUp(){this._modalService.create({nzTitle:"Please confirm if the below lead information is correct, before beginning the enrollment process.",nzContent:ti,nzOkText:"I Confirm",nzOkType:"primary",nzOnOk:()=>this.startEnrolmentWizard(),nzCancelText:"Cancel",nzComponentParams:{lead:this.lead},nzClosable:!1,nzMaskClosable:!1,nzWidth:500,nzOnCancel:()=>this.close(),nzBodyStyle:{paddingTop:"0px"}})}markAsLost(){this._modalService.create({nzTitle:"Choose the program for which the lead to be marked as Lost.",nzContent:hi,nzComponentParams:{lead:this.lead,programEligibility:this.programEligibility},nzBodyStyle:{paddingTop:"0px"},nzClosable:!0,nzMaskClosable:!0,nzWidth:500,nzOkText:null,nzFooter:null}).afterClose.subscribe(()=>{this.getLead(this.leadId)})}updateContact(){this._genesysService.updateLeadContact(this.leadId).subscribe(e=>{})}initTranslation(){let e=new Array("MENU.LEADS","LEADS.DELETE_LEAD_TITLE","LEADS.DELETE_LEAD_DESC","COMMON.SOMETHING_WENT_WRONG");this.translationService.getMultiple(...e).subscribe(e=>this.translatedStrings=e)}getLead(e,t=!0){this.getSpecificLead(e),this.getWorklistItems()}getSpecificLead(e){this._leadsService.getSpecificLeadForUser(e).subscribe(e=>{var t,n,i,o,a;this.lead=e,localStorage.setItem(di.a.REQUEST_TENANT_TEMP_IDS,this.lead.tenantId),this.lead.patientInfo.preferredName&&null!=this.lead.patientInfo.preferredName&&(this.preferredName=`(${this.lead.patientInfo.preferredName})`),this.avatarName=this.lead.patientInfo.firstName.charAt(0)+this.lead.patientInfo.lastName.charAt(0),this.followUps=null!=this.lead.followUps&&null!=this.lead.followUps?this.lead.followUps.reverse():[],this.pendingFollowUpPresent=this.checkPendingFollowUps(),this.getNotesForLead(),"GENESYS"==this.referrer&&(this.isReferredFromGenesys=!0,this.referrer=null,this.showHIPPAConsentPopUp()),"NOT_ELIGIBLE"==(null===(n=null===(t=this.lead)||void 0===t?void 0:t.leadStatusInfo)||void 0===n?void 0:n.overAllStatus)&&"MANUAL"==(null===(i=this.lead.leadStatusInfo.statusHistory[this.lead.leadStatusInfo.statusHistory.length-1])||void 0===i?void 0:i.changeType)&&(this.message=null===(o=this.lead.leadStatusInfo.statusHistory[this.lead.leadStatusInfo.statusHistory.length-1])||void 0===o?void 0:o.comments,this.notEligibleDate=this.getDischargeDate(null===(a=this.lead.leadStatusInfo.statusHistory[this.lead.leadStatusInfo.statusHistory.length-1])||void 0===a?void 0:a.dateTime)),console.log("Lead : ",e.leadStatusInfo.programEligibility),this.programEligibility=e.leadStatusInfo.programEligibility})}getDischargeDate(e){var t,n,i;const o=(e instanceof Date?e:new Date(e+"Z")).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",timeZone:this.tenantConfig.timeZone,timeZoneName:"short"});return`${null===(t=o.split(","))||void 0===t?void 0:t[0]} (${null===(i=null===(n=o.split(","))||void 0===n?void 0:n[1])||void 0===i?void 0:i.trim()})`}getNotesForLead(){this.loadingNotes=!0,this._leadsService.getAllNotesForLead(this.lead.leadId).subscribe(e=>{this.notes=e,this.loadingNotes=!1})}addNewNote(){this._modalService.create({nzContent:K,nzComponentParams:{leadId:this.lead.leadId,tenantId:this.lead.tenantId},nzStyle:{width:"800px"},nzClosable:!0,nzFooter:null}).afterClose.pipe(Object(Q.a)(this.unsubscribed)).subscribe(e=>{e&&this.getNotesForLead()})}addFollowUp(){this.gotoCreateFollowUp(De.c.AUDIO_CALL).afterClose.subscribe(e=>{this.getLead(this.leadId,!1)})}gotoCreateFollowUp(e){return this._leadsEventLogger.leadsActionEvent(this.lead.leadId,"create_followUp"),this.followUpModalService.initEnrolment(null,!1,!e&&null!=this.followUps&&this.followUps.length>1?De.c.AUDIO_CALL:e,this.lead,!0)}initStartEnrolmentWizardComponent(e,t=null){var n;let i=this._componentFactoryResolver.resolveComponentFactory(Fn);null===(n=this.viewContainerRef)||void 0===n||n.clear(),this.enrolmentWizardComponentRef=this.viewContainerRef.createComponent(i),this.enrolmentWizardComponentRef.instance.lead=this.lead,this.enrolmentWizardComponentRef.instance.wizardHeight=e,this.enrolmentWizardComponentRef.instance.toNumber=t,this.enrolmentWizardComponentRef.instance.previewList=!1,this.enrolmentWizardComponentRef.instance.isReferredFromGenesys=this.isReferredFromGenesys}startEnrolmentWizard(e=null){this.selectedTabIndex=0,null!=this.followUps&&0!=this.followUps.length&&this.followUps.findIndex(e=>e.type==De.c.AUDIO_CALL&&e.status==De.b.PENDING)>-1?(this.getLead(this.leadId,!1),this.showEnrolmentWizard(e)):this.gotoCreateFollowUp(De.c.AUDIO_CALL).afterClose.subscribe(t=>{this.getLead(this.leadId,!1),t&&this.showEnrolmentWizard(e)})}showEnrolmentWizard(e=null){if(this.showEnrolmentChecklist=!this.showEnrolmentChecklist,this.hideFooter=this.showEnrolmentChecklist,this.showEnrolmentChecklist){this.actionTitle="Close Enrollment Wizard";let t=.4*window.innerHeight+75;this.wizardHeight=t+"px !important",this.height=window.innerHeight-150-t-20+"px !important",this.outerContainerOverflow="scroll",this._routeHelperService.setSidebarCollapsed(this.showEnrolmentChecklist),this.initStartEnrolmentWizardComponent(t,e)}else this._routeHelperService.setSidebarCollapsed(this.showEnrolmentChecklist),this.height=window.innerHeight-240+"px",this.outerContainerOverflow="hidden",this.actionTitle="Start Enrollment Wizard",this.viewContainerRef.clear()}editLead(){this._modalService.create({nzContent:ze,nzComponentParams:{lead:this.lead},nzStyle:{width:"800px"},nzClosable:!0,nzFooter:null}).afterClose.pipe(Object(Q.a)(this.unsubscribed)).subscribe(e=>{e&&this.getLead(this.leadId)})}deleteLead(){this._modalService.create({nzTitle:this.translatedStrings.get("LEADS.DELETE_LEAD_TITLE"),nzContent:this.translatedStrings.get("LEADS.DELETE_LEAD_DESC"),nzClosable:!0,nzOnCancel:()=>{},nzOnOk:()=>{this._leadsService.deleteSpecificLead(this.leadId).subscribe(e=>{this._leadsEventLogger.leadsActionEvent(this.leadId,"delete"),200===e.status?this.goBack():this._notificationsService.error(this.translatedStrings.get("MENU.LEADS"),this.translatedStrings.get("COMMON.SOMETHING_WENT_WRONG"))})}})}getWorklistItems(){this._staffWorklistService.fetchWorklistItemsForUser(this.leadId,0,9999999,oi.c.ACTIVE,oi.b.LEAD_QUALIFICATION_ISSUE,void 0).subscribe(e=>{this.workLists=e})}resolve(e){var t,n;this.workLists.content=null===(n=null===(t=this.workLists)||void 0===t?void 0:t.content)||void 0===n?void 0:n.filter(t=>(null==t?void 0:t.id)!==(null==e?void 0:e.id)),this.workLists.totalElements-=1,this._staffWorklistService.markAsResolved(null==e?void 0:e.id).subscribe(()=>{this._notificationsService.success("Work List","Item marked as resolved successfully!")})}getAddedBy(e){return null!=e&&e.trim().length>0?e:"N/A"}goBack(){this.isReferredFromGenesys?this.close():this._location.back()}close(){window.close()}showPreview(){this._modalService.create({nzContent:si,nzComponentParams:{lead:this.lead},nzFooter:null,nzClosable:!0,nzMaskClosable:!0,nzWidth:900,nzTitle:"Enrollment Checklist History",nzBodyStyle:{paddingTop:"0px"}})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(l.g),m.Rb(o.l),m.Rb(d.a),m.Rb(E.f),m.Rb(l.a),m.Rb(ni.a),m.Rb(g.a),m.Rb(h.a),m.Rb(ii.a),m.Rb(ne.a),m.Rb(nt),m.Rb(f.b),m.Rb(m.j))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-details"]],viewQuery:function(e,t){if(1&e&&m.ed(qi,1,m.R),2&e){let e;m.Hc(e=m.fc())&&(t.viewContainerRef=e.first)}},features:[m.Ab],decls:29,vars:1,consts:[["class","details-container",4,"ngIf"],["emptyContact",""],["gender",""],["primaryContact",""],["secondaryContact",""],["primaryInsuranceName",""],["primaryInsuranceMemberId",""],["secondaryInsuranceName",""],["secondaryInsuranceMemberId",""],["address1n2",""],["patientAvailability",""],["pcp",""],["site",""],["diagnosis",""],["na",""],[1,"details-container"],["secondaryActionTitle","Update Lead",3,"title","defaultTitle","isSearchEnabled","actionTitle","isSecondaryActionEnabled","isActionEnabled","action","secondaryAction"],[3,"nzSelectedIndex","nzSelectedIndexChange"],["nzTitle","Details"],[1,"outer-container"],["nz-row","",1,"container"],["nz-col","","nzSpan","24"],["nzType","error",3,"nzMessage",4,"ngIf"],["nz-row","",1,"container",3,"nzGutter"],["nz-row","","style","margin-bottom: 20px;",3,"nzGutter",4,"ngIf"],["nz-row","",1,"note-container",3,"nzGutter"],["nz-col","","nzSpan","17"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],[2,"width","100%","height","100%"],[2,"text-align","center","display","flex","flex-direction","column"],[1,"avatar-container"],[1,"avatar-name"],[2,"text-align","center"],["nz-typography","","nzType","primary"],[2,"margin","10px"],["isToolTipEnabled","true",3,"leadStatus"],[2,"text-align","center","margin","10px"],["nzColor","var(--primary-color)"],["nz-typography","","nzType","secondary"],["nz-typography","","nz-type","secondary",2,"margin-bottom","10px","margin-top","10px"],[2,"display","flex","flex-direction","row"],[2,"display","flex","flex-direction","column","width","48%"],["nz-typography","","nzType","primary","nzCopyable","",3,"nzCopyText"],["nzType","vertical",2,"height","50px"],["nz-typography","","nzType","primary",3,"nzTitle",4,"ngIf"],["nz-col","","nzSpan","16"],["nzLayout","vertical"],[3,"nzTitle"],[4,"ngIf","ngIfElse"],[3,"nzTitle",4,"ngIf"],["nz-typography","","nzCopyable","",3,"nzCopyText"],["nz-typography","",4,"ngIf","ngIfElse"],["nz-row","",1,"notes-container"],["nz-col","","nzFlex","1"],["nz-col","","nzFlex","100px"],["nz-row","","nzJustify","end"],["nz-button","","nzType","primary",1,"converter","note-adder",3,"click"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","7"],["class","followup-container qualification-container",4,"ngIf"],[1,"followup-container"],["nz-row","","nzJustify","space-between",2,"padding-left","15px"],["nz-col",""],[1,"follow-up-heading"],["nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","circle",3,"disabled","click",4,"ngIf"],[1,"follow-up-body"],[3,"followUps","phoneNumbers","leadId"],["nz-row","",1,"other-action","checklist",3,"hidden","nzGutter","ngStyle"],["nz-col","","nzFlex","1",2,"padding-bottom","0px !important","padding-right","0px !important","padding-top","0px  !important"],["enrolmentWizard",""],["style","padding:10px 20px !important; border: 1px solid #E8E8E8;  font-size: 12px;","class","container other-action",4,"ngIf"],["nzTitle","Visits"],[1,"container"],[3,"patientId"],["nzTitle","Encounters"],["nzType","error",3,"nzMessage"],["nz-row","",2,"margin-bottom","20px",3,"nzGutter"],["nzSize","small",1,"not-eligible-reason-card"],["nz-typography","","nzType","primary",3,"nzTitle"],["nz-typography",""],[2,"margin-right","5px"],[2,"display","block","margin-bottom","4px"],["nz-typography","",3,"innerHTML"],["class","notes-divider",4,"ngIf"],[1,"notes-divider"],[1,"followup-container","qualification-container"],["nz-list","",3,"nzDataSource"],["nz-list-item","",4,"ngFor","ngForOf"],["nz-list-item",""],["nz-list-item-actions",""],[3,"click",4,"isFeaturePermitted"],["nz-typography","","nzType","danger"],[3,"click"],["nz-button","","nzType","primary","nzShape","circle",3,"disabled","click"],["nz-icon","","nzType","plus",2,"font-size","20px"],[1,"container","other-action",2,"padding","10px 20px !important","border","1px solid #E8E8E8","font-size","12px"],[2,"padding","8px 8px 0 8px","margin-bottom","15px"],["class","action-item","nz-col","","nzXs","24","nzSm","12","nzMd","6",3,"click",4,"ngIf"],[4,"isFeaturePermitted"],[4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","6",1,"action-item",3,"click"],[1,"profile-icon"],["name","profileDelete","size","32px",3,"originalStyle"],["nzTypography","","nzType","danger"],["name","arrowRight"],["name","profileEdit","size","32px",3,"originalStyle"],["nz-icon","","nzType","eye","nzTheme","outline",2,"font-size","32px"],["nzTypography","","nzType","primary"],["nz-typography","",2,"text-align","center"]],template:function(e,t){1&e&&(m.Vc(0,Co,134,115,"div",0),m.Vc(1,zo,2,0,"ng-template",null,1,m.Wc),m.Vc(3,So,3,3,"ng-template",null,2,m.Wc),m.Vc(5,Io,2,0,"ng-template",null,3,m.Wc),m.Vc(7,Xo,2,0,"ng-template",null,4,m.Wc),m.Vc(9,yo,2,0,"ng-template",null,5,m.Wc),m.Vc(11,Do,2,0,"ng-template",null,6,m.Wc),m.Vc(13,Wo,2,0,"ng-template",null,7,m.Wc),m.Vc(15,To,2,0,"ng-template",null,8,m.Wc),m.Vc(17,Eo,2,0,"ng-template",null,9,m.Wc),m.Vc(19,wo,2,0,"ng-template",null,10,m.Wc),m.Vc(21,Lo,2,0,"ng-template",null,11,m.Wc),m.Vc(23,Mo,2,0,"ng-template",null,12,m.Wc),m.Vc(25,Oo,2,0,"ng-template",null,13,m.Wc),m.Vc(27,ko,2,0,"ng-template",null,14,m.Wc)),2&e&&m.rc("ngIf",t.lead)},directives:[o.q,C.a,gi.d,gi.a,z.c,z.a,ke.a,w.a,Bn.a,Ne.a,jn.a,mi.a,mi.b,M.a,O.a,k.a,o.p,N.d,Ui,o.r,Vi.a,Fi.a,Bi.a,_e.a,_e.e,_e.d,_e.c,ji.a,_.a,Le.a],pipes:[X.a,qn.a,o.e,o.A,gt.a],styles:["body[_ngcontent-%COMP%]{font-family:Nunito!important}.outer-container[_ngcontent-%COMP%]{min-height:calc(100vh - 240px);overflow:scroll}.note-container[_ngcontent-%COMP%]{margin-bottom:70px}.details-container[_ngcontent-%COMP%]{font-family:Nunito!important;overflow:scroll}.body-container[_ngcontent-%COMP%]{margin:8px}.lead-details-row[_ngcontent-%COMP%]{margin-top:24px!important}.followup-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;height:100%;padding:16px!important}.qualification-container[_ngcontent-%COMP%]{min-height:-webkit-fit-content!important;min-height:-moz-fit-content!important;min-height:fit-content!important;margin-bottom:10px}.leads-container[_ngcontent-%COMP%]{padding:16px 0!important}.notes-container[_ngcontent-%COMP%]{margin-bottom:24px}.notes-divider[_ngcontent-%COMP%]{margin:12px 0!important}.other-action[_ngcontent-%COMP%]{background-color:#fff;margin-bottom:0!important;padding:16px 0 0 16px!important;position:absolute;width:100%;bottom:0}.profile-icon[_ngcontent-%COMP%]{padding:8px;background-color:#e9e9e9;border-radius:50%;height:50px;width:50px;text-align:center;display:inline-block}.action-item[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.action-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{line-height:40px}.action-item[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%], .action-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{vertical-align:text-bottom;display:inline-block;height:70%}.action-item[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{line-height:50px}.profile-icon[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:unset}.grid-container[_ngcontent-%COMP%]{display:flex;width:100%}.grid-item[_ngcontent-%COMP%]{text-align:center;margin:32px;width:50%;border:1px solid #ededed;padding:25px;font-family:Nunito!important;height:100%;overflow:scroll}.margin-right-0[_ngcontent-%COMP%]{margin-right:0}@media screen and (max-width:480px){.grid-container[_ngcontent-%COMP%]{display:block;width:100%}.grid-item[_ngcontent-%COMP%]{text-align:center;margin:2% auto;width:80%;border:1px solid #ededed;padding:25px}.details[_ngcontent-%COMP%], .grid-item[_ngcontent-%COMP%]{font-family:Nunito!important}.details[_ngcontent-%COMP%]{float:none!important}}.lead-profile[_ngcontent-%COMP%]{margin:auto auto 5%;border-radius:50%;text-transform:uppercase}.lead[_ngcontent-%COMP%]{color:#f56a00;background-color:#fde3cf;height:50px;width:50px;line-height:4}.lead-managers[_ngcontent-%COMP%]{width:85%;margin:auto;padding-left:3%}.details[_ngcontent-%COMP%]{text-align:left;font-weight:400;color:#7e87a0;font-family:Nunito!important}.detail-holder[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #ededed;margin-top:3%;margin-bottom:3%}.detail-label[_ngcontent-%COMP%]{width:25%}.detail[_ngcontent-%COMP%], .detail-label[_ngcontent-%COMP%]{padding-bottom:10px;font-size:13px;font-family:Nunito!important}.detail[_ngcontent-%COMP%]{color:#000;width:70%;padding-left:5px}.notes[_ngcontent-%COMP%]{word-spacing:3px;text-align:left;font-family:Nunito!important}.note-adder[_ngcontent-%COMP%]{margin-left:20px}.follow-up-body[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.follow-up-header[_ngcontent-%COMP%]{width:100%;text-align:left;padding:5px 5px 15px;font-family:Nunito!important}.follow-up-body[_ngcontent-%COMP%]{padding-top:15px;overflow-y:scroll;overflow-x:hidden;height:86%}.habit-tag[_ngcontent-%COMP%]{padding:5px;margin-bottom:6px}i[_ngcontent-%COMP%]{color:var(--neutral-color)}.follow-up[_ngcontent-%COMP%]{margin-top:15px;margin-right:15px}.task-li[_ngcontent-%COMP%]{list-style-type:disc}li[_ngcontent-%COMP%]{color:#8bc34a}.follow-up-heading[_ngcontent-%COMP%]{text-align:left;font:normal normal 700 20px/27px Nunito;letter-spacing:0;color:var(--primary-color);opacity:1}.header-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.note-container[_ngcontent-%COMP%]{border:none;padding:0}.grid-item-left[_ngcontent-%COMP%]{width:65%}.grid-item-right[_ngcontent-%COMP%]{width:35%}.extra[_ngcontent-%COMP%]{padding:0!important}.checklist[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:999;right:36px;left:0;width:auto!important}.avatar-container[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:50%;background:#eff1f7;text-align:center;display:flex;align-self:center;flex-direction:column;margin-bottom:10px}.avatar-name[_ngcontent-%COMP%]{height:revert;width:100%;display:flex;align-items:center;flex-flow:column;position:inherit;padding:28%;font-size:25px}[_nghost-%COMP%]     .ant-descriptions-item-label:after{content:none;margin:0}[_nghost-%COMP%]     .ant-descriptions-item-label{font-size:.9em}[_nghost-%COMP%]     .ant-modal-confirm-content{margin-left:0!important}.top[_ngcontent-%COMP%]{position:absolute;top:0;left:49%}.not-eligible-reason-card[_ngcontent-%COMP%]{background-color:#78909c;color:var(--neutral-color);font-weight:700;border-radius:5px}[_nghost-%COMP%]     .ant-alert-error{background-color:#78909c;border:1px solid #78909c}[_nghost-%COMP%]     .ant-alert-message{color:#fff;font-weight:700}"]}),e})();var No=n("0W7X"),xo=n("bA1+");const Ao={Listing:{header:!0,title:"TITLE.LEADS",searchEnabled:!0,primaryAction:{title:"Bulk Upload",permissions:[No.a.VIEW_LEAD,No.a.ADD_LEAD],enabled:!0},secondaryAction:{title:"Run Qualification",permissions:[No.a.VIEW_LEAD],enabled:!0},multiAction:{},privileges:[No.a.VIEW_LEAD],showTenantToggle:!0,subTenantToggleMode:"SINGLE"},FollowUp:{header:!0,title:"COMMON.FOLLOWUPS",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[No.a.VIEW_LEAD_FOLLOW_UPS],showTenantToggle:!0},BulkUpload:{header:!0,title:"Bulk Upload",searchEnabled:!1,primaryAction:{title:"Upload",permissions:[],enabled:!0},secondaryAction:{title:"Download Template",permissions:[],enabled:!0},multiAction:{},privileges:[No.a.ADD_LEAD],showTenantToggle:!1}};var Po=n("Ifg2");let Ro=(()=>{class e{constructor(){this.headersMap=new Map([["First Name","firstName"],["Last Name","lastName"],["DOB (yyyy-MM-dd)","dateOfBirth"],["Gender","gender"],["Email (optional)","email"],["Address Line 1 (optional)","addressLine1"],["City (optional)","city"],["State","state"],["Country","country"],["Pin Code","pinCode"],["MR# / Patient ID (optional)","patientId"],["Primary Insurance","primaryInsurance"],["Primary Insurance ID","primaryInsuranceId"],["Secondary Insurance (optional)","secondaryInsurance"],["Secondary Insurance ID (optional)","secondaryInsuranceId"],["Diagnosis Codes (Delimiter /)","icdCodes"],["Primary Label","primaryContactLabel"],["Primary Contact Number*","primaryContactNumber"],["Primary Type","primaryContactType"],["Secondary Label","secondaryLabel"],["Secondary Contact Number","secondaryContactNumber"],["Secondary Type","secondaryContactType"],["Last PCP Visit Date","lastPCPVisitDateTime"],["Language","language"]])}validateHeaders(e){return e.forEach((e,t)=>{Object.keys(e).forEach(t=>{Object.defineProperty(e,this.headersMap.get(t),Object.getOwnPropertyDescriptor(e,t)),delete e[t]}),e.rowId=t}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac}),e})();var Uo=n("pLZG"),Vo=n("MZxW"),Fo=n("D9mS"),Bo=n("rMZv"),jo=n("KupA");function qo(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"nz-option",12),m.Ub()),2&e){const e=t.$implicit;m.Db(1),m.rc("nzValue",null==e||null==e.user?null:e.user.id)("nzLabel",null==e||null==e.user?null:e.user.fullName)}}function Go(e,t){if(1&e){const e=m.Yb();m.Xb(0,"nz-card"),m.Xb(1,"div",2),m.Xb(2,"div",3),m.Xb(3,"sub-tenant-select",4),m.ec("onSubTenantSelected",function(t){return m.Lc(e),m.ic().onSubTenantChange(t)}),m.Wb(),m.Wb(),m.Wb(),m.Xb(4,"nz-spin",5),m.Xb(5,"h3"),m.Xc(6," You can upload lead profiles in bulk by using the bulk upload sheet provided below: "),m.Wb(),m.Xb(7,"h4"),m.Xc(8," Once you choose any one physician from the below list, all leads in the bulk upload sheet will be assigned to the selected physician "),m.Wb(),m.Xb(9,"div",6),m.Xb(10,"div",7),m.Xb(11,"strong"),m.Xc(12,"Physician"),m.Wb(),m.Xb(13,"nz-select",8),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().physician=t}),m.Vc(14,qo,2,2,"ng-container",9),m.Wb(),m.Wb(),m.Wb(),m.Sb(15,"br"),m.Xb(16,"nz-upload",10),m.Xb(17,"button",11),m.Xc(18," BROWSE / DRAG "),m.Wb(),m.Xb(19,"p"),m.Sb(20,"br"),m.Xc(21),m.jc(22,"translate"),m.Wb(),m.Wb(),m.Sb(23,"br"),m.Wb(),m.Wb()}if(2&e){const e=m.ic();m.Db(3),m.rc("persist",!1),m.Db(1),m.rc("nzSpinning",!(null!=e.physicians&&e.physicians.length)),m.Db(9),m.rc("ngModel",e.physician),m.Db(1),m.rc("ngForOf",e.physicians),m.Db(2),m.rc("nzCustomRequest",e.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1),m.Db(5),m.Zc(" ",m.kc(22,8,"COMMON.DRAG_AND_UPLOAD")," ")}}function Ho(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"td",22),m.ec("nzExpandChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).onExpandChange(n.rowId,t)}),m.Wb(),m.Xb(2,"td",23),m.Xc(3),m.Wb(),m.Xb(4,"td",23),m.Xc(5),m.Wb(),m.Xb(6,"td",23),m.Xc(7),m.jc(8,"date"),m.Wb(),m.Xb(9,"td",23),m.Xc(10),m.Wb(),m.Xb(11,"td",23),m.Xc(12),m.Wb(),m.Xb(13,"td",23),m.Xc(14),m.Wb(),m.Xb(15,"td",23),m.Xc(16),m.Wb(),m.Xb(17,"td",23),m.Xc(18),m.Wb(),m.Xb(19,"td",23),m.Xc(20),m.Wb(),m.Xb(21,"td",23),m.Xc(22),m.Wb(),m.Xb(23,"td",23),m.Xc(24),m.Wb(),m.Xb(25,"td",23),m.Xc(26),m.Wb(),m.Xb(27,"td",23),m.Xc(28),m.Wb(),m.Xb(29,"td",23),m.Xc(30),m.Wb(),m.Xb(31,"td",23),m.Xc(32),m.Wb(),m.Xb(33,"td",23),m.Xc(34),m.Wb(),m.Xb(35,"td",23),m.Xc(36),m.Wb(),m.Xb(37,"td",23),m.Xc(38),m.Wb(),m.Xb(39,"td",23),m.Xc(40),m.Wb(),m.Xb(41,"td",23),m.Xc(42),m.Wb(),m.Xb(43,"td",23),m.Xc(44),m.Wb(),m.Xb(45,"td",23),m.Xc(46),m.Wb(),m.Xb(47,"td",23),m.jc(48,"date"),m.Xc(49),m.jc(50,"date"),m.Wb(),m.Xb(51,"td",23),m.Xc(52),m.Wb(),m.Xb(53,"td",16),m.Xb(54,"a",24),m.ec("click",function(){m.Lc(e);const t=m.ic().$implicit;return m.ic(2).startEdit(t.rowId)}),m.Sb(55,"app-icons",25),m.Wb(),m.Xc(56," \xa0\xa0 "),m.Xb(57,"a",26),m.ec("nzOnConfirm",function(){m.Lc(e);const t=m.ic().$implicit;return m.ic(2).deleteRow(t.rowId)}),m.Sb(58,"app-icons",27),m.Wb(),m.Wb(),m.Ub()}if(2&e){const e=m.ic().$implicit,t=m.ic(2);m.Db(1),m.rc("nzShowExpand",t.errors.hasOwnProperty(null==e?null:e.rowId))("nzExpand",t.expandSet.has(e.rowId)),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.firstName),m.Db(1),m.Zc(" ",null==e?null:e.firstName," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.lastName),m.Db(1),m.Zc(" ",null==e?null:e.lastName," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.dateOfBirth),m.Db(1),m.Zc(" ",m.lc(8,50,null==e?null:e.dateOfBirth,"mediumDate")," "),m.Db(2),m.rc("nzTooltipTitle",null==e?null:e.gender),m.Db(1),m.Zc(" ",null==e?null:e.gender," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.email),m.Db(1),m.Zc(" ",null==e?null:e.email," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.addressLine1),m.Db(1),m.Zc(" ",null==e?null:e.addressLine1," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.city),m.Db(1),m.Zc(" ",null==e?null:e.city," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.state),m.Db(1),m.Zc(" ",null==e?null:e.state," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.country),m.Db(1),m.Zc(" ",null==e?null:e.country," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.pinCode),m.Db(1),m.Zc(" ",null==e?null:e.pinCode," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.patientId),m.Db(1),m.Zc(" ",null==e?null:e.patientId," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.primaryInsurance),m.Db(1),m.Zc(" ",null==e?null:e.primaryInsurance," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.primaryInsuranceId),m.Db(1),m.Zc(" ",null==e?null:e.primaryInsuranceId," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.secondaryInsurance),m.Db(1),m.Zc(" ",null==e?null:e.secondaryInsurance," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.secondaryInsuranceId),m.Db(1),m.Zc(" ",null==e?null:e.secondaryInsuranceId," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.icdCodes),m.Db(1),m.Zc(" ",null==e?null:e.icdCodes," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.primaryContactLabel),m.Db(1),m.Zc(" ",null==e?null:e.primaryContactLabel," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.primaryContactNumber),m.Db(1),m.Zc(" ",null==e?null:e.primaryContactNumber," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.primaryContactType),m.Db(1),m.Zc(" ",null==e?null:e.primaryContactType," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.secondaryContactLabel),m.Db(1),m.Zc(" ",null==e?null:e.secondaryContactLabel," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.secondaryContactNumber),m.Db(1),m.Zc(" ",null==e?null:e.secondaryContactNumber," "),m.Db(1),m.rc("nzTooltipTitle",null==e?null:e.secondaryContactType),m.Db(1),m.Zc(" ",null==e?null:e.secondaryContactType," "),m.Db(1),m.rc("nzTooltipTitle",m.lc(48,53,null==e?null:e.lastPCPVisitDateTime,"medium")),m.Db(2),m.Zc(" ",m.lc(50,56,null==e?null:e.lastPCPVisitDateTime,"medium")," "),m.Db(2),m.rc("nzTooltipTitle",null==e?null:e.language),m.Db(1),m.Zc(" ",null==e?null:e.language," ")}}function Zo(e,t){if(1&e){const e=m.Yb();m.Xb(0,"td",22),m.ec("nzExpandChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).onExpandChange(n.rowId,t)}),m.Wb(),m.Xb(1,"td"),m.Xb(2,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.firstName=t}),m.Wb(),m.Wb(),m.Xb(3,"td"),m.Xb(4,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.lastName=t}),m.Wb(),m.Wb(),m.Xb(5,"td"),m.Xb(6,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.dateOfBirth=t}),m.Wb(),m.Wb(),m.Xb(7,"td"),m.Xb(8,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.gender=t}),m.Wb(),m.Wb(),m.Xb(9,"td"),m.Xb(10,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.email=t}),m.Wb(),m.Wb(),m.Xb(11,"td"),m.Xb(12,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.addressLine1=t}),m.Wb(),m.Wb(),m.Xb(13,"td"),m.Xb(14,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.city=t}),m.Wb(),m.Wb(),m.Xb(15,"td"),m.Xb(16,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.state=t}),m.Wb(),m.Wb(),m.Xb(17,"td"),m.Xb(18,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.country=t}),m.Wb(),m.Wb(),m.Xb(19,"td"),m.Xb(20,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.pinCode=t}),m.Wb(),m.Wb(),m.Xb(21,"td"),m.Xb(22,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.patientId=t}),m.Wb(),m.Wb(),m.Xb(23,"td"),m.Xb(24,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.primaryInsurance=t}),m.Wb(),m.Wb(),m.Xb(25,"td"),m.Xb(26,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.primaryInsuranceId=t}),m.Wb(),m.Wb(),m.Xb(27,"td"),m.Xb(28,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.secondaryInsurace=t}),m.Wb(),m.Wb(),m.Xb(29,"td"),m.Xb(30,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.secondaryInsuraceId=t}),m.Wb(),m.Wb(),m.Xb(31,"td"),m.Xb(32,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.icdCodes=t}),m.Wb(),m.Wb(),m.Xb(33,"td"),m.Xb(34,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.primaryContactLabel=t}),m.Wb(),m.Wb(),m.Xb(35,"td"),m.Xb(36,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.primaryContactNumber=t}),m.Wb(),m.Wb(),m.Xb(37,"td"),m.Xb(38,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.primaryContactType=t}),m.Wb(),m.Wb(),m.Xb(39,"td"),m.Xb(40,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.secondaryContactLabel=t}),m.Wb(),m.Wb(),m.Xb(41,"td"),m.Xb(42,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.secondaryContactNumber=t}),m.Wb(),m.Wb(),m.Xb(43,"td"),m.Xb(44,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.secondaryContactType=t}),m.Wb(),m.Wb(),m.Xb(45,"td"),m.Xb(46,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.lastPCPVisitDateTime=t}),m.Wb(),m.Wb(),m.Xb(47,"td"),m.Xb(48,"input",28),m.ec("ngModelChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic(2).editCache[n.rowId].element.language=t}),m.Wb(),m.Wb(),m.Xb(49,"td",16),m.Xb(50,"a",29),m.ec("click",function(){m.Lc(e);const t=m.ic().$implicit;return m.ic(2).saveEdit(t.rowId)}),m.Xc(51,"Save"),m.Wb(),m.Wb()}if(2&e){const e=m.ic().$implicit,t=m.ic(2);m.rc("nzShowExpand",t.errors.hasOwnProperty(null==e?null:e.rowId))("nzExpand",t.expandSet.has(e.rowId)),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.firstName),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.lastName),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.dateOfBirth),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.gender),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.email),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.addressLine1),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.city),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.state),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.country),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.pinCode),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.patientId),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.primaryInsurance),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.primaryInsuranceId),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.secondaryInsurace),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.secondaryInsuraceId),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.icdCodes),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.primaryContactLabel),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.primaryContactNumber),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.primaryContactType),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.secondaryContactLabel),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.secondaryContactNumber),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.secondaryContactType),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.lastPCPVisitDateTime),m.Db(2),m.rc("ngModel",t.editCache[e.rowId].element.language)}}function Yo(e,t){if(1&e&&(m.Xb(0,"p",30),m.Xc(1),m.Wb()),2&e){const e=t.$implicit;m.Db(1),m.Zc(" ",e," ")}}const $o=function(e){return{danger:e}};function Ko(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"tr",17),m.Vc(2,Ho,59,59,"ng-container",18),m.Vc(3,Zo,52,26,"ng-template",null,19,m.Wc),m.Wb(),m.Xb(5,"tr",20),m.Vc(6,Yo,2,1,"p",21),m.Wb(),m.Ub()),2&e){const e=t.$implicit,n=m.Ic(4),i=m.ic(2);m.Db(1),m.rc("ngClass",m.yc(5,$o,i.errors.hasOwnProperty(null==e?null:e.rowId))),m.Db(1),m.rc("ngIf",!i.editCache[e.rowId].edit)("ngIfElse",n),m.Db(3),m.rc("nzExpand",i.expandSet.has(e.rowId)),m.Db(1),m.rc("ngForOf",i.errors[null==e?null:e.rowId])}}const Qo=function(){return{x:"3096px"}};function Jo(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"nz-table",13,14),m.Xb(3,"thead"),m.Xb(4,"tr"),m.Sb(5,"th",15),m.Xb(6,"th"),m.Xc(7,"First Name"),m.Wb(),m.Xb(8,"th"),m.Xc(9,"Last Name"),m.Wb(),m.Xb(10,"th"),m.Xc(11,"Date of Birth (yyyy-MM-dd)"),m.Wb(),m.Xb(12,"th"),m.Xc(13,"Gender"),m.Wb(),m.Xb(14,"th"),m.Xc(15,"E-mail"),m.Wb(),m.Xb(16,"th"),m.Xc(17,"Address"),m.Wb(),m.Xb(18,"th"),m.Xc(19,"City"),m.Wb(),m.Xb(20,"th"),m.Xc(21,"State"),m.Wb(),m.Xb(22,"th"),m.Xc(23,"Country"),m.Wb(),m.Xb(24,"th"),m.Xc(25,"Pin Code"),m.Wb(),m.Xb(26,"th"),m.Xc(27,"MR# / Patient Id"),m.Wb(),m.Xb(28,"th"),m.Xc(29,"Primary Insurance"),m.Wb(),m.Xb(30,"th"),m.Xc(31,"Primary Insurance ID"),m.Wb(),m.Xb(32,"th"),m.Xc(33,"Secondary Insurance"),m.Wb(),m.Xb(34,"th"),m.Xc(35,"Secondary Insurance ID"),m.Wb(),m.Xb(36,"th"),m.Xc(37,"Diagnosis Codes"),m.Wb(),m.Xb(38,"th"),m.Xc(39,"Primary Contact Label"),m.Wb(),m.Xb(40,"th"),m.Xc(41,"Primary Contact Number"),m.Wb(),m.Xb(42,"th"),m.Xc(43,"Primary Contact Type"),m.Wb(),m.Xb(44,"th"),m.Xc(45,"Secondary Contact Label"),m.Wb(),m.Xb(46,"th"),m.Xc(47,"Secondary Contact Number"),m.Wb(),m.Xb(48,"th"),m.Xc(49,"Secondary Contact Type"),m.Wb(),m.Xb(50,"th"),m.Xc(51,"Last Visit Date Time"),m.Wb(),m.Xb(52,"th"),m.Xc(53,"Language"),m.Wb(),m.Xb(54,"th",16),m.Xc(55,"Action"),m.Wb(),m.Wb(),m.Wb(),m.Xb(56,"tbody"),m.Vc(57,Ko,7,7,"ng-container",9),m.Wb(),m.Wb(),m.Ub()),2&e){const e=m.Ic(2),t=m.ic();m.Db(1),m.rc("nzData",t.data)("nzScroll",m.xc(4,Qo))("nzPageSize",99999),m.Db(56),m.rc("ngForOf",e.data)}}let ea=(()=>{class e extends r.a{constructor(e,t,n,i,o,a,l){super(),this._xlsxParserService=e,this._leadXlsxValidator=t,this._datePipe=n,this._leadsService=i,this._router=o,this._staffService=a,this._notificationsService=l,this.expandSet=new Set,this.editCache={},this.handleUpload=e=>{const t=new FileReader;t.onload=()=>{var e;const n=this._xlsxParserService.parse(t);try{this.data=this._leadXlsxValidator.validateHeaders(n[Object.keys(n)[0]]),null===(e=this.data)||void 0===e||e.forEach(e=>{var t;(null===(t=null==e?void 0:e.dateOfBirth)||void 0===t?void 0:t.length)&&(e.dateOfBirth=this._datePipe.transform(null==e?void 0:e.dateOfBirth,"yyyy-MM-dd"))})}catch(i){return void this._notificationsService.error("Bulk Upload","Error while reading file headers!")}this.updateEditCache(),this.bulkUploadVisible=!1},t.readAsBinaryString(e.file)},this.errors=new Map}ngOnInit(){this.bulkUploadVisible=!0,this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Uo.a)(e=>!!e),Object(Q.a)(this.unsubscribed)).subscribe(()=>this.validateAndSave()),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(Uo.a)(e=>!!e),Object(Q.a)(this.unsubscribed)).subscribe(()=>this.downloadTemplate()),this.requestTenantId=localStorage.getItem(di.a.REQUEST_TENANT_IDS).split(",")[0],this.initialiseStaff()}onSubTenantChange(e){"object"==typeof e&&""!=e&&null!=e&&null!=e&&(this.initialiseStaff(),this.requestTenantId=e)}onExpandChange(e,t){t?this.expandSet.add(e):this.expandSet.delete(e)}startEdit(e){this.editCache[e].edit=!0}initialiseStaff(){this._staffService.fetchStaffMembers(ut.a.PHYSICIAN,0,-1,void 0).subscribe(e=>{this.physicians=null==e?void 0:e.result})}saveEdit(e){const t=this.data.findIndex(t=>t.rowId===e);Object.assign(this.data[t],this.editCache[e].element),this.editCache[e].edit=!1}deleteRow(e){this.data=this.data.filter(t=>t.rowId!==e)}updateEditCache(){this.data.forEach(e=>{this.editCache[e.rowId]={edit:!1,element:Object.assign({},e)}})}validateAndSave(){const e={bulkLeadRequest:this.data,tenantId:this.requestTenantId};this._leadsService.validateBulkLeads(e).subscribe(t=>{var n;this.errors=t,Object.keys(this.errors).length||(null===(n=this.data)||void 0===n||n.forEach(e=>{e.physician=this.physician,Object.keys(e).forEach(t=>{const i=e[t];try{e[t]=null==i?void 0:i.trim()}catch(n){console.log(e[t])}})}),e.bulkLeadRequest=this.data,this._leadsService.bulkUploadLeads(e).subscribe(()=>{this._notificationsService.success("Bulk Upload","Leads uploaded successfully!"),this._router.navigate(["leads"],{queryParams:{tab:"NEW"}})}))},e=>{const t=e.error;t.ERROR&&this._notificationsService.error("Bulk Upload",t.ERROR[0])})}downloadTemplate(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=leads-bulk-upload-template.xlsx","_blank")}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(Po.a),m.Rb(Ro),m.Rb(o.e),m.Rb(d.a),m.Rb(l.g),m.Rb(st.a),m.Rb(f.b))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-bulk-upload"]],features:[m.Cb([Po.a,Ro,o.e]),m.Ab],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","6","nzOffset","18"],["mode","SINGLE",3,"persist","onSubTenantSelected"],["nzTip","Loading...",3,"nzSpinning"],["nz-row",""],["nz-col","","nzSpan","6"],["nzPlaceHolder","Select a physician",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList"],["nz-button","","nzType","primary","nzSize","large"],[3,"nzValue","nzLabel"],["nzBordered","","nzShowPagination","false",3,"nzData","nzScroll","nzPageSize"],["editRowTable",""],["nzWidth","60px"],["nzRight",""],[3,"ngClass"],[4,"ngIf","ngIfElse"],["editTemplate",""],[3,"nzExpand"],["nz-typography","","nzType","danger",4,"ngFor","ngForOf"],[3,"nzShowExpand","nzExpand","nzExpandChange"],["nzEllipsis","","nz-tooltip","",3,"nzTooltipTitle"],[3,"click"],["strokeWidth","4px","name","edit"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure?",3,"nzOnConfirm"],["name","delete"],["type","text","nz-input","",3,"ngModel","ngModelChange"],[1,"save",3,"click"],["nz-typography","","nzType","danger"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Vc(1,Go,24,10,"nz-card",1),m.Vc(2,Jo,58,5,"ng-container",1),m.Wb()),2&e&&(m.Db(1),m.rc("ngIf",t.bulkUploadVisible),m.Db(1),m.rc("ngIf",!t.bulkUploadVisible))},directives:[o.q,ke.a,z.c,z.a,Vo.a,U.a,ht.d,a.u,a.x,o.p,Fo.a,M.a,O.a,k.a,ht.a,Bo.f,Bo.n,Bo.o,Bo.e,Bo.l,Bo.d,Bo.i,o.o,Bo.p,Bo.g,Bo.j,Bo.c,N.d,Le.a,jo.a,S.b,a.d,w.a],pipes:[X.a,o.e],styles:["[_nghost-%COMP%]     .ant-table-tbody>tr>td:last-child, [_nghost-%COMP%]     .ant-table-thead>tr>th:last-child{background-color:var(--neutral-color)}.danger[_ngcontent-%COMP%]{outline:thin solid #c81c1c}p[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]     .ant-spin-nested-loading>div>.ant-spin{height:70vh;max-height:98vh}nz-card[_ngcontent-%COMP%]{min-height:80vh}"]}),e})();var ta=n("jG/O"),na=n("4+6U");let ia=(()=>{class e{constructor(e,t){this._router=e,this._activatedRoute=t,this.queryParams=this._activatedRoute.snapshot.queryParams,this._activatedRoute.queryParams.subscribe(e=>{this.queryParams=e})}setParameter(e,t=!1,n){this._router.navigate([],{queryParams:e,queryParamsHandling:t?"":"merge",relativeTo:this._activatedRoute,replaceUrl:n})}getParameterValue(e){return this.queryParams[e]}}return e.\u0275fac=function(t){return new(t||e)(m.bc(l.g),m.bc(l.a))},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var oa=n("geco");class aa{constructor(){this.d1=null,this.d2=null,this.startTime=null,this.endTime=null,this.status=null,this.tier=-1,this.query=null,this.physicianId=null,this.site=null,this.language=null,this.allSelected=!1,this.limit=20,this.offset=0,this.order="ASC"}}var la=n("t6gT"),ca=n("iCh7"),ra=n("0rTH");function sa(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"br"),m.Xc(2),m.Ub()),2&e){const e=m.ic(3);m.Db(2),m.Zc("",e.statusValue," ")}}function da(e,t){if(1&e&&(m.Xb(0,"div",29),m.Xb(1,"strong"),m.Xc(2," Lead Status "),m.Wb(),m.Vc(3,sa,3,1,"ng-container",30),m.Wb()),2&e){const e=m.ic(2);m.Db(3),m.rc("ngIf",e.statusValue)}}function ba(e,t){if(1&e){const e=m.Yb();m.Xb(0,"nz-tab",4),m.Xb(1,"div",5),m.Xb(2,"label",27),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().allStatusChecked=t})("ngModelChange",function(){return m.Lc(e),m.ic().updateStatusAllChecked()}),m.Xc(3," Check all "),m.Wb(),m.Wb(),m.Sb(4,"br"),m.Xb(5,"nz-checkbox-group",7),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().statusCheckOptions=t})("ngModelChange",function(){return m.Lc(e),m.ic().updateSingleStatusChecked()}),m.Wb(),m.Vc(6,da,4,1,"ng-template",null,28,m.Wc),m.Wb()}if(2&e){const e=m.Ic(7),t=m.ic();m.rc("nzTitle",e),m.Db(2),m.rc("ngModel",t.allStatusChecked)("nzIndeterminate",t.statusIndeterminate)("disabled",t.isAllStatusCheckDisabled),m.Db(3),m.rc("ngModel",t.statusCheckOptions)}}function ua(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"br"),m.Xc(2),m.Ub()),2&e){const e=m.ic(2);m.Db(2),m.Zc("",e.languageValue," ")}}function pa(e,t){if(1&e&&(m.Xb(0,"div",29),m.Xb(1,"strong",31),m.Xc(2," Lead Language "),m.Wb(),m.Vc(3,ua,3,1,"ng-container",30),m.Wb()),2&e){const e=m.ic();m.Db(3),m.rc("ngIf",e.languageValue)}}function ha(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"br"),m.Xc(2),m.jc(3,"date"),m.jc(4,"date"),m.Ub()),2&e){const e=m.ic(3);m.Db(2),m.ad("",m.lc(3,2,e.dateRange[0],"mediumDate")," - ",m.lc(4,5,e.dateRange[1],"mediumDate")," ")}}function ga(e,t){if(1&e&&(m.Xb(0,"strong",31),m.Xc(1," Date Range "),m.Wb(),m.Vc(2,ha,5,8,"ng-container",30)),2&e){const e=m.ic(2);m.Db(2),m.rc("ngIf",null==e.dateRange?null:e.dateRange.length)}}const ma=function(){return{"background-color":"#fff"}};function fa(e,t){if(1&e){const e=m.Yb();m.Xb(0,"nz-tab",4),m.Xb(1,"nz-range-picker",32),m.ec("ngModelChange",function(t){return m.Lc(e),m.ic().dateRange=t}),m.Wb(),m.Vc(2,ga,3,1,"ng-template",null,33,m.Wc),m.Wb()}if(2&e){const e=m.Ic(3),t=m.ic();m.rc("nzTitle",e),m.Db(1),m.rc("ngStyle",m.xc(5,ma))("nzDisabledDate",t.disabledDate)("nzAllowClear",!0)("ngModel",t.dateRange)}}function va(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"br"),m.Xc(2),m.Ub()),2&e){const e=m.ic(2);m.Db(2),m.Zc("Tier ",e.selectedTier," ")}}function Ca(e,t){if(1&e&&(m.Xb(0,"strong",31),m.Xc(1," Insurance Tier "),m.Wb(),m.Vc(2,va,3,1,"ng-container",30)),2&e){const e=m.ic();m.Db(2),m.rc("ngIf",e.selectedTier)}}function za(e,t){if(1&e&&(m.Xb(0,"label",34),m.Xc(1),m.Wb()),2&e){const e=t.$implicit;m.rc("nzValue",null==e?null:e.id),m.Db(1),m.Zc(" ",null==e?null:e.name," ")}}function Sa(e,t){if(1&e&&(m.Xc(0),m.jc(1,"translate"),m.Xb(2,"label",35),m.Xc(3),m.Wb()),2&e){const e=m.ic();m.Zc(" ",m.kc(1,2,"SITE")," "),m.Db(3),m.Yc(e.selectedSiteName)}}function Ia(e,t){if(1&e&&(m.Vb(0),m.Sb(1,"nz-option",36),m.Ub()),2&e){const e=t.$implicit;m.Db(1),m.rc("nzLabel",e.value)("nzValue",null==e?null:e.key)}}function Xa(e,t){1&e&&(m.Xb(0,"nz-option",37),m.Xb(1,"div",38),m.Sb(2,"em",39),m.Xc(3," Loading... "),m.Wb(),m.Wb())}function ya(e,t){1&e&&(m.Xb(0,"strong",31),m.Xc(1," Physicians "),m.Wb())}function Da(e,t){1&e&&(m.Xb(0,"span"),m.Xc(1," No assigned physician "),m.Wb())}let Wa=(()=>{class e{constructor(e,t,n,i,o){this._modalRef=e,this._urlService=t,this._leadService=n,this._languagePipe=i,this._staffService=o,this.listOfAllPhysicians=new Map,this.filterRequest=new aa,this.indeterminate=!1,this.statusIndeterminate=!1,this.dateRange=[],this.allStatusChecked=!1,this.allLanguagesChecked=!1,this.selectedIndex=0,this.filteredSites=new Array,this.statusCheckOptions=[{label:"New",value:De.e.NEW,checked:!1,disabled:!1},{label:"Lost",value:De.e.LOST,checked:!1,disabled:!1},{label:"Active",value:De.e.ACTIVE,checked:!1,disabled:!1},{label:"Eligible",value:De.e.ELIGIBLE,checked:!1,disabled:!1},{label:"Converted",value:De.e.CONVERTED,checked:!1,disabled:!1},{label:"Not Eligible",value:De.e.NOT_ELIGIBLE,checked:!1,disabled:!1},{label:"Flagged",value:De.e.FLAGGED_FOR_ELIGIBILITY_RECHECK,checked:!1,disabled:!1}],this.languageCheckOptions=new Array,this.disabledDate=e=>Object(se.a)(new Date((new Date).setHours(23,59,59,99)),e)<0,this.sites=JSON.parse(sessionStorage.getItem("sites"))}set status(e){this.isAllStatusCheckDisabled=!("ALL"==e.tab),this.tab=e.tab;let t=new Set(e.statuses.split(","));this.statusCheckOptions.forEach(e=>{t.has(e.value)&&(e.checked=!0)}),this.createStatusValue(),this.filterRequest.allSelected=this.allStatusChecked,this.filterRequest.status=e.statuses}ngOnInit(){this.fetchAllLanguages(),this.fetchPhysicians(),this.getAllSites()}fetchAllLanguages(){this._leadService.getAllLanguagesForLeads().subscribe(e=>{if(this.languages=e,this.languages.forEach(e=>{this.languageCheckOptions.push({label:this._languagePipe.transform(e),value:e,checked:!1,disabled:!1})}),this.filterRequest.language){let e=new Set(this.filterRequest.language.split(","));this.languageCheckOptions.forEach(t=>{e.has(t.value)&&(t.checked=!0)})}this.createLanguageValue()})}fetchPhysicians(){this.loadingPhysician=!0,this._staffService.fetchStaffMembersWithoutPagination(ut.a.PHYSICIAN,null,this.selectedSiteId).subscribe(e=>{this.loadingPhysician=!1,null==e||0===e.totalCount?this.noPhysiciansAvailable=!0:e.result.forEach(e=>{this.listOfAllPhysicians.set(e.user.id,e.user.fullName)}),this.listOfAllPhysicians.set("NOT_ASSIGNED","Not Assigned")},e=>{this.loadingPhysician=!1,this.noPhysiciansAvailable=!0})}updateLanguagesAllChecked(){this.indeterminate=!1,this.checkUncheckAllLanguages(this.allLanguagesChecked),this.createLanguageValue(this.allLanguagesChecked)}updateSingleLanguageChecked(){this.languageCheckOptions.every(e=>!e.checked)?(this.allLanguagesChecked=!1,this.indeterminate=!1):this.languageCheckOptions.every(e=>e.checked)?(this.allLanguagesChecked=!0,this.indeterminate=!1):(this.allLanguagesChecked=!1,this.indeterminate=!0),this.createLanguageValue()}createLanguageValue(e=!1){if(e||0==this.languageCheckOptions.filter(e=>!e.checked).length)return this.languageValue="All",void this.checkUncheckAllLanguages(!0);this.languageValue=this.languageCheckOptions.filter(e=>e.checked).map(e=>e.label).join(", ")}updateStatusAllChecked(){this.statusIndeterminate=!1,this.checkUncheckAll(this.allStatusChecked),this.createStatusValue(this.allStatusChecked)}updateSingleStatusChecked(){this.statusCheckOptions.every(e=>!e.checked)?(this.allStatusChecked=!1,this.statusIndeterminate=!1):this.statusCheckOptions.every(e=>e.checked)?(this.allStatusChecked=!0,this.statusIndeterminate=!1):(this.allStatusChecked=!1,this.statusIndeterminate=!0),this.createStatusValue()}createStatusValue(e=!1){if(e||0==this.statusCheckOptions.filter(e=>!e.checked).length)return this.allStatusChecked=!0,this.statusValue="All",void this.checkUncheckAll(!0);this.statusValue=this.statusCheckOptions.filter(e=>e.checked).map(e=>e.label).join(", ")}applyFilter(){var e;this.filterRequest=new aa,this.filterRequest.d1=this.dateRange?this.dateRange[0]:null,this.filterRequest.d2=this.dateRange?this.dateRange[1]:null,this.filterRequest.tier=this.selectedTier;const t=this.dateRange?this.dateRange[0]:new Date((new Date).setDate((new Date).getDate()-1));this.filterRequest.startTime=t&&null!=t?new Date(t).toISOString().split("T")[0]:null;const n=this.dateRange?this.dateRange[1]:new Date;this.filterRequest.endTime=n&&null!=n?new Date(n).toISOString().split("T")[0]:null,this.selectedPhysicianId&&null!=this.selectedPhysicianId&&(this.filterRequest.physicianId=this.selectedPhysicianId),(null===(e=this.selectedSite)||void 0===e?void 0:e.length)&&(this.filterRequest.site=this.selectedSite),this.selectedSiteId&&null!=this.selectedSiteId&&(this.filterRequest.siteId=this.selectedSiteId),this.filterRequest.status=this.statusCheckOptions.filter(e=>e.checked).map(e=>e.value).join(","),this.filterRequest.language=this.languageCheckOptions.some(e=>e.checked)?this.languageCheckOptions.filter(e=>e.checked).map(e=>e.value).join(","):null,this._urlService.setParameter(this.filterRequest),this._modalRef.close(this.filterRequest)}clearAll(){this.dateRange=[],this.selectedTier=null,this.selectedPhysicianId=null,this.selectedSite=null,this.selectedSiteName=null,this.allLanguagesChecked=!1,this.allStatusChecked=!0,this.updateLanguagesAllChecked(),this.updateStatusAllChecked()}checkUncheckAll(e){this.statusCheckOptions=this.statusCheckOptions.map(t=>Object.assign(Object.assign({},t),{checked:e}))}filterSites(e){if(this.filteredSites=JSON.parse(JSON.stringify(this.sites)),!(e=null==e?void 0:e.trim()))return;const t=new RegExp(e,"gi");this.filteredSites=this.filteredSites.filter(e=>{var n;return null===(n=null==e?void 0:e.name)||void 0===n?void 0:n.match(t)})}getAllSites(){this.loadingSites=!0,this.sites=new Array,this.filteredSites=new Array,this._staffService.fetchSitesForStaff().subscribe(e=>{this.sites=e,this.filteredSites=JSON.parse(JSON.stringify(this.sites)),this.loadingSites=!1})}checkUncheckAllLanguages(e){this.languageCheckOptions=this.languageCheckOptions.map(t=>Object.assign(Object.assign({},t),{checked:e}))}onFilterTabChange(){}onPhysicianChange(e){}selectSite(e){if(!e)return;const t=this.sites.find(t=>t.id===e);this.selectedSiteName=`${t.name}`,this.selectedSite=e}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(E.e),m.Rb(ia),m.Rb(d.a),m.Rb(ra.a),m.Rb(st.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-lead-filter"]],inputs:{status:"status"},features:[m.Cb([ra.a])],decls:45,vars:26,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","24"],["nzTabBarGutter","10px",3,"nzSelectedIndex","nzTabPosition","nzSelectedIndexChange"],[3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[2,"border-bottom","1px solid rgb(233, 233, 233)"],["nz-checkbox","",2,"margin-top","10px","margin-bottom","10px",3,"ngModel","nzIndeterminate","ngModelChange"],[2,"display","flex","flex-direction","column",3,"ngModel","ngModelChange"],["leadLanguageTitle",""],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select Insurance Tier",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","Tier 1"],["nzValue","2","nzLabel","Tier 2"],["nzValue","3","nzLabel","Tier 3"],["insuranceTitle",""],[3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["sitesTitle",""],[1,"staff-slect-box"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a Physician",3,"ngModel","nzNotFoundContent","ngModelChange"],[4,"ngFor","ngForOf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["physicianTitle",""],["noPhysicianData",""],["nz-row","","nzGutter","8",2,"flex-direction","row-reverse","margin-top","10px"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","link",3,"click"],["nz-checkbox","",2,"margin-top","10px","margin-bottom","10px",3,"ngModel","nzIndeterminate","disabled","ngModelChange"],["leadStatusTitle",""],[2,"height","auto"],[4,"ngIf"],[1,"tab-title"],["nzFormat","MMM d, y",3,"ngStyle","nzDisabledDate","nzAllowClear","ngModel","ngModelChange"],["dateRangeTitle",""],["nz-radio","",3,"nzValue"],[1,"filterTitle"],[3,"nzLabel","nzValue"],["nzDisabled","","nzCustomContent",""],[1,"loading-option"],["nz-icon","","nzType","loading",2,"font-size","20px","color","#8BC34A"]],template:function(e,t){if(1&e&&(m.Vb(0),m.Xb(1,"div",0),m.Xb(2,"div",1),m.Xb(3,"nz-tabset",2),m.ec("nzSelectedIndexChange",function(e){return t.selectedTabIndex=e})("nzSelectedIndexChange",function(){return t.onFilterTabChange()}),m.Vc(4,ba,8,5,"nz-tab",3),m.Xb(5,"nz-tab",4),m.Xb(6,"div",5),m.Xb(7,"label",6),m.ec("ngModelChange",function(e){return t.allLanguagesChecked=e})("ngModelChange",function(){return t.updateLanguagesAllChecked()}),m.Xc(8," Check all "),m.Wb(),m.Wb(),m.Sb(9,"br"),m.Xb(10,"nz-checkbox-group",7),m.ec("ngModelChange",function(e){return t.languageCheckOptions=e})("ngModelChange",function(){return t.updateSingleLanguageChecked()}),m.Wb(),m.Vc(11,pa,4,1,"ng-template",null,8,m.Wc),m.Wb(),m.Vc(13,fa,4,6,"nz-tab",3),m.Xb(14,"nz-tab",4),m.Xb(15,"nz-select",9),m.ec("ngModelChange",function(e){return t.selectedTier=e}),m.Sb(16,"nz-option",10),m.Sb(17,"nz-option",11),m.Sb(18,"nz-option",12),m.Wb(),m.Vc(19,Ca,3,1,"ng-template",null,13,m.Wc),m.Wb(),m.Xb(21,"nz-tab",4),m.Xb(22,"nz-radio-group",14),m.ec("ngModelChange",function(e){return t.selectedSite=e})("ngModelChange",function(e){return t.selectSite(e)}),m.Vc(23,za,2,2,"label",15),m.Wb(),m.Vc(24,Sa,4,4,"ng-template",null,16,m.Wc),m.Wb(),m.Xb(26,"nz-tab",4),m.Xb(27,"div",17),m.Xb(28,"nz-select",18),m.ec("ngModelChange",function(e){return t.selectedPhysicianId=e})("ngModelChange",function(e){return t.onPhysicianChange(e)}),m.Vc(29,Ia,2,2,"ng-container",19),m.jc(30,"keyvalue"),m.Vc(31,Xa,4,0,"nz-option",20),m.Wb(),m.Wb(),m.Vc(32,ya,2,0,"ng-template",null,21,m.Wc),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Vc(34,Da,2,0,"ng-template",null,22,m.Wc),m.Xb(36,"div",23),m.Xb(37,"div",24),m.Xb(38,"button",25),m.ec("click",function(){return t.applyFilter()}),m.Xc(39),m.jc(40,"translate"),m.Wb(),m.Wb(),m.Xb(41,"div",24),m.Xb(42,"button",26),m.ec("click",function(){return t.clearAll()}),m.Xc(43),m.jc(44,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Ub()),2&e){const e=m.Ic(12),n=m.Ic(20),i=m.Ic(25),o=m.Ic(33),a=m.Ic(35);m.Db(3),m.rc("nzSelectedIndex",t.selectedTabIndex)("nzTabPosition","left"),m.Db(1),m.rc("ngIf","ALL"==t.tab),m.Db(1),m.rc("nzTitle",e),m.Db(2),m.rc("ngModel",t.allLanguagesChecked)("nzIndeterminate",t.indeterminate),m.Db(3),m.rc("ngModel",t.languageCheckOptions),m.Db(3),m.rc("ngIf",!1),m.Db(1),m.rc("nzTitle",n),m.Db(1),m.rc("ngModel",t.selectedTier),m.Db(6),m.rc("nzTitle",i),m.Db(1),m.rc("ngModel",t.selectedSite),m.Db(1),m.rc("ngForOf",t.sites),m.Db(3),m.rc("nzTitle",o),m.Db(2),m.rc("ngModel",t.selectedPhysicianId)("nzNotFoundContent",a),m.Db(1),m.rc("ngForOf",m.kc(30,20,t.listOfAllPhysicians)),m.Db(2),m.rc("ngIf",t.loadingPhysician),m.Db(8),m.Zc(" ",m.kc(40,22,"FILTERS.APPLY")," "),m.Db(4),m.Zc(" ",m.kc(44,24,"FILTERS.CLEAR_ALL")," ")}},directives:[z.c,z.a,gi.d,o.q,gi.a,wt.a,a.u,a.x,wt.b,ht.d,ht.a,de.c,o.p,M.a,O.a,k.a,L.a,L.c,o.r,de.b,_.a],pipes:[o.j,X.a,o.e],styles:["[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}[_nghost-%COMP%]     .ant-tabs-tab{width:200px;text-align:left!important;height:50px}[_nghost-%COMP%]     .ant-tabs{height:300px}[_nghost-%COMP%]     .ant-tabs-tab{color:var(--neutral-color)}#sub-header[_ngcontent-%COMP%]{background:transparent;padding:0 20px}.container[_ngcontent-%COMP%]{padding:0 20px!important}.strong[_ngcontent-%COMP%]{font-weight:bolder}[_nghost-%COMP%]     .ant-tabs-nav{background:#f6f6f6 0 0 no-repeat padding-box;border-radius:10px;width:262px;padding:35px 0 0 20px;font:normal normal 700 14px/19px Nunito;height:300px}[_nghost-%COMP%]     .ant-tabs-content-holder:first{height:350px;overflow-y:scroll;padding-left:10px}[_nghost-%COMP%]     .ant-tabs-content-holder{overflow:auto}[_nghost-%COMP%]     .ant-picker-range, [_nghost-%COMP%]     .ant-select-show-search.ant-select:not(.ant-select-customize-input) .ant-select-selector, [_nghost-%COMP%]     .ant-select:not(.ant-select-customize-input) .ant-select-selector{height:50px;border:1px solid #ebebeb;border-radius:10px;width:100%}[_nghost-%COMP%]     .ant-select-selector input, [_nghost-%COMP%]     .ant-select-show-search.ant-select:not(.ant-select-customize-input) .ant-select-selector input{height:50px}[_nghost-%COMP%]     .ant-select-single.ant-select-show-arrow .ant-select-selection-item, [_nghost-%COMP%]     .ant-select-single.ant-select-show-arrow .ant-select-selection-placeholder{line-height:50px}[_nghost-%COMP%]     .ant-tabs-tab{height:auto;white-space:normal}[_nghost-%COMP%]     .ant-tabs-left>.ant-tabs-nav .ant-tabs-tab:last-of-type{padding:0}[_nghost-%COMP%]     .ant-tabs-tab-btn{text-align:left;color:var(--light-black)!important}[_nghost-%COMP%]     .ant-tabs-tab-active{border-bottom:none!important;border-left:2px solid var(--primary-color)!important}[_nghost-%COMP%]     .ant-tabs-ink-bar{height:0!important}.filterTitle[_ngcontent-%COMP%]{color:var(--light-black);font-weight:600;font-size:11px;display:block;margin:0;line-height:12px}[_nghost-%COMP%]     span.ant-radio+*{font-weight:400}[_nghost-%COMP%]     .ant-btn-link{text-align:right;color:var(--dark-grey)}  .vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}[_nghost-%COMP%]     .ant-checkbox-group-item{margin-top:5px}[_nghost-%COMP%]     .ant-checkbox-wrapper{padding-left:16px;padding-right:8px;border-spacing:0!important}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}input[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid #ebebeb;border-radius:10px!important;outline:none;height:50px}.tab-title[_ngcontent-%COMP%]{font-size:13px;font-weight:100;color:#000}"]}),e})(),Ta=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Lb({type:e,selectors:[["app-lead-status-description"]],decls:31,vars:0,consts:[[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","4",2,"text-align","center","padding-left","5px","padding-right","5px","height","35px"],["leadStatus","NEW","isToolTipEnabled","true"],["nz-col","","nzSpan","20"],["leadStatus","ELIGIBLE","isToolTipEnabled","true"],["leadStatus","ACTIVE","isToolTipEnabled","true"],["leadStatus","NOT_ELIGIBLE","isToolTipEnabled","true"],["leadStatus","CONVERTED","isToolTipEnabled","true"],["leadStatus","LOST","isToolTipEnabled","true"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Sb(3,"app-patient-status-tag",3),m.Wb(),m.Xb(4,"div",4),m.Xc(5," Every Lead added to the system have NEW status "),m.Wb(),m.Wb(),m.Xb(6,"div",1),m.Xb(7,"div",2),m.Sb(8,"app-patient-status-tag",5),m.Wb(),m.Xb(9,"div",4),m.Xc(10," Patients whose eligibility check is completed and is eligible for the program "),m.Wb(),m.Wb(),m.Xb(11,"div",1),m.Xb(12,"div",2),m.Sb(13,"app-patient-status-tag",6),m.Wb(),m.Xb(14,"div",4),m.Xc(15," Once we start the enrollment process "),m.Wb(),m.Wb(),m.Xb(16,"div",1),m.Xb(17,"div",2),m.Sb(18,"app-patient-status-tag",7),m.Wb(),m.Xb(19,"div",4),m.Xc(20," If the lead is not eligible for the program "),m.Wb(),m.Wb(),m.Xb(21,"div",1),m.Xb(22,"div",2),m.Sb(23,"app-patient-status-tag",8),m.Wb(),m.Xb(24,"div",4),m.Xc(25," Once the enrollment process is completed and lead is converted as patient "),m.Wb(),m.Wb(),m.Xb(26,"div",1),m.Xb(27,"div",2),m.Sb(28,"app-patient-status-tag",9),m.Wb(),m.Xb(29,"div",4),m.Xc(30," If the patient denies to enroll the program "),m.Wb(),m.Wb(),m.Wb())},directives:[z.c,z.a,Bn.a],styles:[""]}),e})();function Ea(e,t){1&e&&(m.Vb(0),m.Xb(1,"div",0),m.Xb(2,"div",7),m.Sb(3,"app-icons",8),m.Wb(),m.Wb(),m.Xb(4,"div",0),m.Xb(5,"div",7),m.Xc(6),m.jc(7,"translate"),m.Wb(),m.Wb(),m.Ub()),2&e&&(m.Db(1),m.rc("nzGutter",64),m.Db(1),m.rc("nzSpan",24),m.Db(2),m.rc("nzGutter",64),m.Db(1),m.rc("nzSpan",24),m.Db(1),m.Zc(" ",m.kc(7,5,"PATIENTS.GENERATINGREPORT")," "))}function wa(e,t){1&e&&(m.Vb(0),m.Xb(1,"div",9),m.Sb(2,"nz-alert",10),m.jc(3,"translate"),m.jc(4,"translate"),m.Wb(),m.Ub()),2&e&&(m.Db(1),m.rc("nzSpan",24),m.Db(1),m.sc("nzMessage",m.kc(3,3,"LEADS.PATIENT_INTAKE_REPORT")),m.sc("nzDescription",m.kc(4,5,"LEADS.REPORT.NO_RECORD")))}let La=(()=>{class e{constructor(e){this._leadsService=e,this.isReportLoading=!1,this.dateFormat="MMM, dd yyyy",this.today=new Date,this.noRecords=!1,this.disabledDate=e=>Object(se.a)(e,this.today)>0}ngOnInit(){}generateReport(){this.isReportLoading=!0,this._leadsService.generateLeadReport(this.startDate,this.endDate).subscribe(e=>{null!=e?(this.noRecords=!1,window.open("https://api.cooeyhealth.com/v2/media/"+e.fileName,"_blank")):this.noRecords=!0,this.isReportLoading=!1})}onChange(e){this.startDate=e[0].toISOString().split("T")[0],this.endDate=e[1].toISOString().split("T")[0]}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(d.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-patient-intake-report-dialog"]],decls:16,vars:18,consts:[["nz-row","",3,"nzGutter"],["nz-col","",1,"spacing",3,"nzSpan"],["id","title"],["nzMode","date","ngModel","",2,"width","100%",3,"nzFormat","nzDisabledDate","ngModelChange"],[4,"ngIf"],[2,"text-align","right"],["nz-button","","nzType","primary",3,"disabled","nzLoading","click"],["nz-col","",1,"center",3,"nzSpan"],["name","loading"],["nz-col","",3,"nzSpan"],["nzType","warning","nzShowIcon","",3,"nzMessage","nzDescription"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"h3",2),m.Xc(3),m.jc(4,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(5,"div",0),m.Xb(6,"div",1),m.Xb(7,"nz-range-picker",3),m.ec("ngModelChange",function(e){return t.onChange(e)}),m.Wb(),m.Wb(),m.Wb(),m.Vc(8,Ea,8,7,"ng-container",4),m.Vc(9,wa,5,7,"ng-container",4),m.Xb(10,"div",0),m.Xb(11,"div",1),m.Xb(12,"div",5),m.Xb(13,"button",6),m.ec("click",function(){return t.generateReport()}),m.Xc(14),m.jc(15,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb()),2&e&&(m.rc("nzGutter",64),m.Db(1),m.rc("nzSpan",24),m.Db(2),m.Zc(" ",m.kc(4,14,"LEADS.PATIENT_INTAKE_REPORT_RANGE")," "),m.Db(2),m.rc("nzGutter",64),m.Db(1),m.rc("nzSpan",24),m.Db(1),m.rc("nzFormat",t.dateFormat)("nzDisabledDate",t.disabledDate),m.Db(1),m.rc("ngIf",t.isReportLoading),m.Db(1),m.rc("ngIf",t.noRecords&&!t.isReportLoading),m.Db(1),m.rc("nzGutter",64),m.Db(1),m.rc("nzSpan",24),m.Db(2),m.rc("disabled",!t.startDate||!t.endDate)("nzLoading",t.isReportLoading),m.Db(1),m.Zc(" ",m.kc(15,16,"PATIENTS.GENERATEREPORTSTART")," "))},directives:[z.c,z.a,L.a,L.c,a.u,a.x,o.q,M.a,O.a,k.a,Le.a,Bi.a],pipes:[X.a],styles:["#title[_ngcontent-%COMP%]{padding-left:1%;font-size:14px;font-weight:600;border-left:3px solid var(--primary-color)}.spacing[_ngcontent-%COMP%]{padding:10px 10px 10px 0}.center[_ngcontent-%COMP%]{text-align:center;padding:10px}"]}),e})();class Ma{constructor(e,t){this._document=t;const n=this._textarea=this._document.createElement("textarea"),i=n.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",n.setAttribute("aria-hidden","true"),n.value=e,this._document.body.appendChild(n)}copy(){const e=this._textarea;let t=!1;try{if(e){const n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),n&&n.focus()}}catch(n){}return t}destroy(){const e=this._textarea;e&&(e.parentNode&&e.parentNode.removeChild(e),this._textarea=void 0)}}let Oa=(()=>{class e{constructor(e){this._document=e}copy(e){const t=this.beginCopy(e),n=t.copy();return t.destroy(),n}beginCopy(e){return new Ma(e,this._document)}}return e.\u0275fac=function(t){return new(t||e)(m.bc(o.d))},e.\u0275prov=Object(m.Nb)({factory:function(){return new e(Object(m.bc)(o.d))},token:e,providedIn:"root"}),e})(),ka=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)}}),e})();var _a=n("PScX"),Na=n("F6ss"),xa=n("Szod"),Aa=n("SKKP"),Pa=n("Ujc4"),Ra=n("Nqz0"),Ua=n("Q8cG"),Va=n("ZO2R"),Fa=n("t2pg");let Ba=(()=>{class e{transform(e,t="TYPE",n=De.b.COMPLETED){let i,o,a,l=0;switch(n){case De.b.COMPLETED:a=De.d.getLatestCompletedLeadFollowUp(e);break;default:a=De.d.getLatestLeadFollowUp(e)}if(null==a)return"";switch(i=a.type,l=a.step,o=a.status,t){case"TYPE":switch(i){case De.c.SMS:return"SMS Sent";case De.c.LETTER:return"Letter Sent";case De.c.AUDIO_CALL:return"Call Completed"}case"STEP":return l;case"STATUS":return o;case"LAST_FOLLOW_UP_ON":return(new Date).getTime();case"COLOR":switch(a.status){case De.b.COMPLETED:return this.getColor("--success-color");case De.b.PENDING:case De.b.CANCELLED:case De.b.RESCHEDULED:return this.getColor("--warning-color")}case"ICON":switch(a.status){case De.b.COMPLETED:return"check-circle";case De.b.PENDING:case De.b.CANCELLED:case De.b.RESCHEDULED:return"clock-circle"}}}getColor(e="--primary-color"){var t;const n=null===(t=null===document||void 0===document?void 0:document.documentElement)||void 0===t?void 0:t.style;return null==n?void 0:n.getPropertyValue(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m.Qb({name:"latestFollowUp",type:e,pure:!0}),e})();function ja(e,t){if(1&e&&(m.Xb(0,"div",19),m.Xb(1,"div",20),m.Sb(2,"nz-alert",21),m.Wb(),m.Wb()),2&e){m.ic();const e=m.Ic(2);m.Db(2),m.rc("nzMessage",e)}}function qa(e,t){1&e&&(m.Xb(0,"strong"),m.Xc(1," Qualification engine is running, please wait for it to complete before continuing... "),m.Wb())}function Ga(e,t){if(1&e&&(m.Xb(0,"strong"),m.Xc(1),m.Wb()),2&e){const e=m.ic(2);m.Db(1),m.Zc(" Qualification engine is running for ",null==e.qualificationState?null:e.qualificationState.numberOfUsers," lead(s), please wait for it to complete before continuing... ")}}function Ha(e,t){if(1&e){const e=m.Yb();m.Vc(0,qa,2,0,"strong",13),m.Vc(1,Ga,2,1,"strong",13),m.Xc(2," \xa0\xa0 "),m.Xb(3,"app-icons",22),m.ec("click",function(){return m.Lc(e),m.ic().refresh.emit()}),m.Wb()}if(2&e){const e=m.ic();m.rc("ngIf",0===(null==e.qualificationState?null:e.qualificationState.numberOfUsers)),m.Db(1),m.rc("ngIf",0!==(null==e.qualificationState?null:e.qualificationState.numberOfUsers))}}function Za(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"th",23),m.ec("nzCheckedChange",function(t){return m.Lc(e),m.ic().onAllChecked(t)}),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(1),m.rc("nzShowCheckbox",e.totalCount>0)("nzChecked",e.checked)("nzIndeterminate",e.indeterminate)}}function Ya(e,t){1&e&&(m.Xb(0,"th"),m.Xc(1," Sub Tenant "),m.Wb())}function $a(e,t){1&e&&(m.Xb(0,"th"),m.Xc(1,"Last Activity"),m.Wb())}function Ka(e,t){1&e&&(m.Xb(0,"th"),m.Xc(1,"Last Activity On"),m.Wb())}function Qa(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"td",36),m.ec("nzCheckedChange",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic().onItemChecked(n.leadId,t,!0)}),m.Wb(),m.Ub()}if(2&e){const e=m.ic().$implicit,t=m.ic();m.Db(1),m.rc("nzChecked",t.setOfCheckedId.has(e.leadId))}}function Ja(e,t){1&e&&(m.Xb(0,"span",37),m.Sb(1,"em",38),m.Wb())}function el(e,t){if(1&e&&(m.Xb(0,"td"),m.Xc(1),m.jc(2,"tenantName"),m.Wb()),2&e){const e=m.ic().$implicit;m.Db(1),m.Zc(" ",m.kc(2,1,e.tenantId)," ")}}function tl(e,t){if(1&e&&(m.Xb(0,"nz-tag",40),m.jc(1,"latestFollowUp"),m.Sb(2,"i",41),m.jc(3,"latestFollowUp"),m.Xc(4),m.jc(5,"latestFollowUp"),m.jc(6,"latestFollowUp"),m.Wb()),2&e){const e=m.ic(2).$implicit;m.rc("nzColor",m.lc(1,4,e,"COLOR")),m.Db(2),m.rc("nzType",m.lc(3,7,e,"ICON")),m.Db(2),m.ad(" Step - ",m.lc(5,10,e,"STEP")," | ",m.lc(6,13,e,"TYPE")," ")}}function nl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"td",24),m.ec("click",function(){m.Lc(e);const t=m.ic().$implicit;return m.ic().showDetails(null==t?null:t.leadId)}),m.Xb(1,"span",24),m.ec("click",function(t){m.Lc(e);const n=m.ic().$implicit;return m.ic().showTimeline(t,n)}),m.Vc(2,tl,7,16,"nz-tag",39),m.Wb(),m.Wb()}if(2&e){const e=m.ic().$implicit;m.ic();const t=m.Ic(37);m.Db(2),m.rc("ngIf",(null==e?null:e.followUps)&&(null==e||null==e.followUps?null:e.followUps.length)>0)("ngIfElse",t)}}function il(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.jc(2,"date"),m.jc(3,"latestFollowUp"),m.Ub()),2&e){const e=m.ic(2).$implicit;m.Db(1),m.Zc(" ",m.lc(2,1,m.lc(3,4,e,"LAST_FOLLOW_UP_ON"),"mediumDate")," ")}}function ol(e,t){if(1&e){const e=m.Yb();m.Xb(0,"td",24),m.ec("click",function(){m.Lc(e);const t=m.ic().$implicit;return m.ic().showDetails(null==t?null:t.leadId)}),m.Xb(1,"span"),m.Vc(2,il,4,7,"ng-container",42),m.Wb(),m.Wb()}if(2&e){const e=m.ic().$implicit;m.ic();const t=m.Ic(39);m.Db(2),m.rc("ngIf",(null==e?null:e.followUps)&&(null==e||null==e.followUps?null:e.followUps.length)>0)("ngIfElse",t)}}function al(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"app-icons",43),m.ec("click",function(){m.Lc(e);const t=m.ic().$implicit;return m.ic().gotoEditLead(null==t?null:t.leadId)}),m.Wb(),m.Ub()}}const ll=function(){return["START_LEAD_ENROLMENT_FLOW"]};function cl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"tr"),m.Vc(1,Qa,2,1,"ng-container",9),m.Xb(2,"td",24),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().showDetails(null==n?null:n.leadId)}),m.Xb(3,"span"),m.Xc(4),m.Wb(),m.Xb(5,"span"),m.Xc(6),m.Wb(),m.Wb(),m.Xb(7,"td",24),m.ec("click",function(t){return m.Lc(e),m.ic().showStatusDescription(t)}),m.Xb(8,"nz-badge",25),m.Sb(9,"app-patient-status-tag",26),m.Wb(),m.Wb(),m.Xb(10,"td"),m.Vc(11,Ja,2,0,"span",27),m.Wb(),m.Xb(12,"td"),m.Sb(13,"app-audio-call-widget",28),m.Wb(),m.Xb(14,"td",24),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().showDetails(null==n?null:n.leadId)}),m.Xb(15,"span"),m.Xc(16),m.jc(17,"externalSources"),m.Wb(),m.Wb(),m.Xb(18,"td",24),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().showDetails(null==n?null:n.leadId)}),m.Xb(19,"span"),m.Xc(20),m.jc(21,"date"),m.Wb(),m.Wb(),m.Xb(22,"td",24),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().showDetails(null==n?null:n.leadId)}),m.Xb(23,"span"),m.Xc(24),m.jc(25,"language"),m.Wb(),m.Wb(),m.Vc(26,el,3,3,"td",11),m.Xb(27,"td",24),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().showDetails(null==n?null:n.leadId)}),m.Xb(28,"span"),m.Xc(29),m.jc(30,"date"),m.Wb(),m.Wb(),m.Vc(31,nl,3,2,"td",29),m.Vc(32,ol,3,2,"td",29),m.Xb(33,"td"),m.Vc(34,al,2,0,"ng-container",13),m.Xb(35,"app-icons",30),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().deleteLead(null==n?null:n.leadId)}),m.Wb(),m.Xb(36,"a",31),m.Sb(37,"app-icons",32),m.Wb(),m.Xb(38,"nz-dropdown-menu",null,33),m.Xb(40,"ul",34),m.Xb(41,"li",35),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().runInsuranceTiering(null==n?null:n.leadId)}),m.Xc(42," Run insurance tiering "),m.Wb(),m.Xb(43,"li",35),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().queryCCDA(null==n?null:n.leadId,"PatientQuery")}),m.Xc(44," Pull Lead Summary "),m.Wb(),m.Xb(45,"li",35),m.ec("click",function(){m.Lc(e);const n=t.$implicit;return m.ic().queryCCDA(null==n?null:n.leadId,"VisitQuery")}),m.Xc(46," Pull Visit Summary "),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,n=m.Ic(39),i=m.ic();m.Db(1),m.rc("isFeaturePermitted",m.xc(28,ll)),m.Db(3),m.Zc("",null==e||null==e.patientInfo?null:e.patientInfo.firstName,"\xa0"),m.Db(2),m.Yc(null==e||null==e.patientInfo?null:e.patientInfo.lastName),m.Db(2),m.rc("nzCount",i.iconTemplate),m.Db(1),m.rc("leadStatus",null==e||null==e.leadStatusInfo?null:e.leadStatusInfo.overAllStatus),m.Db(2),m.rc("ngIf",e.leadContactPushedToGenesys),m.Db(2),m.rc("leadId",null==e?null:e.leadId)("context",i.context)("phoneNumbers",null==e||null==e.patientInfo?null:e.patientInfo.phoneNumbers),m.Db(3),m.Yc(m.lc(17,17,null==e||null==e.patientInfo?null:e.patientInfo.externalSources,"HOSPITAL_INTERNAL_ID")),m.Db(4),m.Yc(m.lc(21,20,null==e||null==e.patientInfo?null:e.patientInfo.dateOfBirth,"mediumDate")),m.Db(4),m.Yc(m.kc(25,23,null==e||null==e.patientInfo||null==e.patientInfo.language?null:e.patientInfo.language.locale)),m.Db(5),m.Yc(m.lc(30,25,null==e?null:e.createdOn,"mediumDate")),m.Db(2),m.rc("ngIf","ACTIVE"==i.selectedType),m.Db(1),m.rc("ngIf","ACTIVE"==i.selectedType),m.Db(2),m.rc("ngIf",!1),m.Db(2),m.rc("nzDropdownMenu",n)}}function rl(e,t){1&e&&(m.Xb(0,"nz-tag",40),m.Xc(1," No Follow-ups "),m.Wb()),2&e&&m.rc("nzColor","magenta")}function sl(e,t){1&e&&(m.Xb(0,"span"),m.Xc(1," - "),m.Wb())}function dl(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"selected-patient-action",44),m.ec("onPrimaryActionButtonClicked",function(t){return m.Lc(e),m.ic(2).primaryButtonClick(t)})("onSecondaryActionButtonClicked",function(t){return m.Lc(e),m.ic(2).reset(t)}),m.Wb(),m.Ub()}if(2&e){const e=m.ic(2);m.Db(1),m.rc("primaryActionText",e.primaryActionText)("primaryButtonLoading",e.primaryButttonloading)("secondaryActionText",e.secondaryActionText)("totalPatientsSelected",e.totalLeadsSelected)("totalCount",e.totalCount)}}const bl=function(){return["PUSH_CONTACT_TO_CAMPAIGN_MANUAL"]};function ul(e,t){1&e&&(m.Vb(0),m.Vc(1,dl,2,5,"ng-container",9),m.Ub()),2&e&&(m.Db(1),m.rc("isFeaturePermitted",m.xc(1,bl)))}function pl(e,t){if(1&e){const e=m.Yb();m.Vb(0),m.Xb(1,"selected-patient-action",44),m.ec("onPrimaryActionButtonClicked",function(t){return m.Lc(e),m.ic().primaryButtonClick(t)})("onSecondaryActionButtonClicked",function(t){return m.Lc(e),m.ic().reset(t)}),m.Wb(),m.Ub()}if(2&e){const e=m.ic();m.Db(1),m.rc("primaryActionText",e.primaryActionText)("primaryButtonLoading",e.primaryButttonloading)("secondaryActionText",e.secondaryActionText)("totalPatientsSelected",e.totalLeadsSelected)("totalCount",e.totalCount)}}function hl(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.Yc(e.pageIndex*e.pageSize)}}function gl(e,t){if(1&e&&(m.Vb(0),m.Xc(1),m.Ub()),2&e){const e=m.ic(2);m.Db(1),m.Yc(e.totalCount)}}function ml(e,t){if(1&e&&(m.Xb(0,"h5",45),m.Xc(1),m.jc(2,"translate"),m.jc(3,"translate"),m.Vc(4,hl,2,1,"ng-container",13),m.Vc(5,gl,2,1,"ng-container",13),m.Xc(6),m.Wb()),2&e){const e=m.ic();m.Db(1),m.bd(" ",m.kc(2,6,"COMMON.SHOWING")," ",(e.pageIndex-1)*e.pageSize+1," ",m.kc(3,8,"TABLEHEADER.TO")," "),m.Db(3),m.rc("ngIf",e.pageIndex*e.pageSize<e.totalCount),m.Db(1),m.rc("ngIf",e.pageIndex*e.pageSize>=e.totalCount),m.Db(1),m.Zc(" of ",e.totalCount," ")}}function fl(e,t){1&e&&(m.Xb(0,"div",46),m.Xb(1,"div",47),m.Xb(2,"div",48),m.Xb(3,"div"),m.Sb(4,"app-icons",49),m.Wb(),m.Xb(5,"div",50),m.Xb(6,"span"),m.Xc(7," There are no leads who match the filter criteria "),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb())}const vl=function(){return[10,20,30,50,100,200]};let Cl=(()=>{class e extends r.a{constructor(e,t,n,i,o,a,l,c,r,s,d,b,u,p,h,g,f,v,C){super(),this.router=e,this._location=t,this.clipboard=n,this._urlService=i,this.message=o,this._leadsService=a,this._modalService=l,this._drawerService=c,this._campaignService=r,this._followUpService=s,this._patientsService=d,this._leadsEventLogger=b,this._insuranceService=u,this._enrolmentService=p,this.translationService=h,this._dataSharingService=g,this.followUpModalService=f,this._notificationsService=v,this._letterService=C,this.searchKey="",this.checked=!1,this.order="ASC",this.leads=[],this.pageIndex=1,this.dataSourceLength=0,this.indeterminate=!1,this.loading=!0,this.languages=[],this.isReportEnabled=!1,this.pageSize=50,this.secondaryActionText="Reset",this.primaryActionText="Start Enrollment",this.context=la.a.LEAD,this.firstLoad=!0,this.refresh=new m.n,this._routeHelperService.getSearch().pipe(Object(Uo.a)(e=>!this.firstLoad&&null!==e),Object(Q.a)(this.unsubscribed)).subscribe(e=>this.applyFilter(e)),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Uo.a)(e=>!!e),Object(Q.a)(this.unsubscribed)).subscribe(()=>this.router.navigate(["leads/bulk-upload"])),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(Uo.a)(e=>!!e),Object(Q.a)(this.unsubscribed)).subscribe(()=>this.runQualification()),this._routeHelperService.setSidebarCollapsed(!1),this.activatedRoute.params.subscribe(()=>{this.searchKey=void 0})}set type(e){this.selectedType=e,this.initStatus(e)}ngOnInit(){this.initData(),this.initConfig(),this.initTranslation(),this._dataSharingService.onSubTenantChange().pipe(Object(Q.a)(this.unsubscribed)).subscribe(e=>{this.onSubTenantChange(e)})}initData(){this.leads=[...new Array],this.setOfCheckedId=new Set,this.totalCount=0,this.totalLeadsSelected=0,this.showDefaultText=!0,this.refreshCheckedStatus()}initStatus(e){e&&(this.selectedType=e,this.statuses="ALL"==e?De.e.NOT_ELIGIBLE+","+De.e.NEW+","+De.e.LOST+","+De.e.FLAGGED_FOR_ELIGIBILITY_RECHECK+","+De.e.CONVERTED+","+De.e.ACTIVE+","+De.e.ELIGIBLE:De.e[e],"ELIGIBLE"==e?this.primaryActionText="Start Enrollment":"ACTIVE"==e&&(this.primaryActionText="Add to campaign"),this.tab=e,this.filterRequest=new aa,this.filterRequest.status=this.statuses,this._urlService.setParameter(this.filterRequest))}initConfig(){this._dataSharingService.tenantSettings.subscribe(e=>{e&&(this.tenantConfig=e,this.isReportEnabled=e.reportConfig.leadsReportEnabled)})}initTranslation(){let e=new Array("LEADS.CLIPBOARD_MESSAGE","LEADS.DELETE_LEAD_TITLE","LEADS.DELETE_LEAD_DESC","COMMON.SOMETHING_WENT_WRONG","MENU.LEADS","LEADS.NO_ACTIVE_LEADS","LEADS.NO_LEADS");this.translationService.getMultiple(...e).subscribe(e=>this.translatedStrings=e)}copyToClipboard(){let e=localStorage.getItem("loggedInTenant"),t=localStorage.getItem("loggedInUser"),n=p.g.webFormRootURL+"register/"+btoa(e)+"?referredBy="+btoa(t);this.clipboard.copy(n),this._leadsEventLogger.leadsLinkFetchEvent(n),this.message.create("success",this.translatedStrings.get("LEADS.CLIPBOARD_MESSAGE"))}getOffset(e){return 1!==e?(e-1)*this.pageSize:0}applyFilter(e){this.searchKey=e,this.getData()}onSubTenantChange(e){this.requestTenantIds=e,this.getData(1)}showStatusDescription(e){e.stopPropagation(),this._modalService.create({nzContent:Ta,nzWidth:500,nzTitle:"Lead Status Description",nzFooter:null,nzKeyboard:!0})}getLeads(e=1){this.loading=!0,this._leadsService.getLeads("0","0",["NEW","ACTIVE"],this.getOffset(e)).subscribe(e=>{e?(this.leads=e.result,this.dataSourceLength=e.totalCount):(this.leads=[],this.dataSourceLength=0,this._notificationsService.info(this.translatedStrings.get("MENU.LEADS"),this.translatedStrings.get("LEADS.NO_ACTIVE_LEADS"))),this.loading=!1},()=>this.loading=!1)}showDetails(e){this._leadsEventLogger.leadsActionEvent(e,"view"),this.router.navigate(["leads/details",e])}gotoCreateLead(){this._leadsEventLogger.leadsActionEvent("","create"),this.router.navigate(["leads/create"])}gotoEditLead(e){this._leadsEventLogger.leadsActionEvent(e,"edit"),this.router.navigate(["leads/edit/",e])}gotoFollowUps(){this.router.navigate(["followups"])}goBack(){this._location.back()}deleteLead(e){this._modalService.create({nzTitle:this.translatedStrings.get("LEADS.DELETE_LEAD_TITLE"),nzContent:this.translatedStrings.get("LEADS.DELETE_LEAD_DESC"),nzClosable:!0,nzOnCancel:()=>{},nzOnOk:()=>{this._leadsService.deleteSpecificLead(e).subscribe(t=>{this._leadsEventLogger.leadsActionEvent(e,"delete"),200===t.status?this.getData():this._notificationsService.error(this.translatedStrings.get("MENU.LEADS"),this.translatedStrings.get("COMMON.SOMETHING_WENT_WRONG"))})}})}refreshPage(){this.ngOnInit()}initCall(e){this._leadsEventLogger.leadsActionEvent(e,"audioCall"),this._leadsService.getSpecificLeadForUser(e).subscribe(t=>{this._dataSharingService.setVoiceCallInitiated({patient:{id:e,mobile:t.personInfo.phoneNumber,countryCode:t.personInfo.countryCode,firstName:t.personInfo.firstName,lastName:t.personInfo.lastName},enableRecording:!1,context:la.a.LEAD})})}downloadReports(){this._modalService.create({nzContent:La,nzClosable:!0,nzMaskClosable:!0,nzMask:!0,nzOkText:null,nzCancelText:null,nzFooter:null})}getNextFollowupDate(e){return e?e.map(e=>e.scheduledOn).sort().reverse().shift():"-"}initEnrolment(e=!1,t=De.c.LETTER,n,i=!1){this.followUpModalService.initEnrolment(Array.from(this.setOfCheckedId),e,t,n,i).afterClose.subscribe(e=>{e&&this.initBulkEnrolment(e.templateId)})}updateCheckedSet(e,t){t?this.setOfCheckedId.add(e):this.setOfCheckedId.delete(e),this.totalLeadsSelected=this.setOfCheckedId.size}refreshCheckedStatus(){this.checked=this.setOfCheckedId.size>0&&this.leads.length==this.setOfCheckedId.size,this.indeterminate=!this.checked&&this.setOfCheckedId.size>0}onItemChecked(e,t){this.updateCheckedSet(e,t),this.refreshCheckedStatus()}onAllChecked(e){this.leads.forEach(({leadId:t})=>this.updateCheckedSet(t,e)),this.refreshCheckedStatus()}reset(e){this.onAllChecked(!1)}primaryButtonClick(e){switch(this.tab){case"ELIGIBLE":this.startBulkEnrolment(e);break;case"ACTIVE":this.pushLeadToCampaign(e)}}pushLeadToCampaign(e){this.primaryButttonloading=!0;const t={userIds:Array.from(this.setOfCheckedId),forceUpdate:!0};this._campaignService.addLeadToCampaign(t).subscribe(e=>{this.primaryButttonloading=!1})}startBulkEnrolment(e){this._letterService.fetchAnnouncementLetterTemplate("en").subscribe(e=>{var t,n;if(0==(null==e?void 0:e.length))return void this._notificationsService.error("Letter Template","No announcement letter template was found");const i={type:De.c.LETTER,leadIds:Array.from(this.setOfCheckedId),templateId:null===(t=e[0])||void 0===t?void 0:t.id};this.initBulkEnrolment(null===(n=e[0])||void 0===n?void 0:n.id),this._followUpService.createBulkFollowUp(i).subscribe(e=>{this.refreshPage(),this.getData(),this._notificationsService.success("Enrollment","We will be sending Announcement letters shortly.")})})}showTimeline(e,t){e.stopPropagation(),this._drawerService.create({nzContent:Ui,nzContentParams:{leadId:t.leadId,loadFullLead:!0},nzWidth:500,nzTitle:"Follow-Up History | "+t.patientInfo.firstName+" "+t.patientInfo.lastName})}onQueryParamsChange(e){const{pageIndex:t,pageSize:n}=e;this.pageSize=n,this.getData(t,n)}setSortKey(e){this.order="ascend"===e?"ASC":"DESC",this.getData()}getData(e=1,t=this.pageSize){this.loading=!0,this.filterRequest||(this.filterRequest=new aa),this.pageIndex=e,this.filterRequest.offset=(e-1)*t,this.filterRequest.limit=t,this.filterRequest.order=this.order,this.filterRequest.query=this.searchKey,this.filterRequest.requestTenantIds=this.requestTenantIds,this._leadsService.searchLeads(this.filterRequest).subscribe(e=>{e?(this.leads=e.result,this.loading=!1,this.showDefaultText=!1,this.setOfCheckedId=new Set,this.totalLeadsSelected=0,this.totalCount=e.totalCount,this.refreshCheckedStatus()):(this.leads=[],this.totalCount=0,this._notificationsService.info(this.translatedStrings.get("MENU.LEADS"),this.translatedStrings.get("LEADS.NO_ACTIVE_LEADS"))),this.loading=!1,this.firstLoad=!1},()=>this.loading=!1)}showFiltersModal(){const e=this._urlService.getParameterValue("status");this._modalService.create({nzContent:Wa,nzClosable:!0,nzMaskClosable:!0,nzFooter:null,nzWidth:700,nzTitle:"Leads Filter",nzBodyStyle:{paddingTop:"0px"},nzComponentParams:{status:{statuses:e,tab:this.tab},filterRequest:this.filterRequest},nzWrapClassName:"vertical-center-modal"}).afterClose.subscribe(e=>{e&&(this.filterRequest=e,this.selectedType=e.allSelected?"ALL":"CUSTOM",this.getData())})}initBulkEnrolment(e){this._enrolmentService.initBulkEnrolment(Array.from(this.setOfCheckedId),e).subscribe(e=>{this.getData()})}runInsuranceTiering(e){this._insuranceService.applyInsuranceTierRulesToLead(e).subscribe(()=>{this._notificationsService.success("Leads","Insurance tiering completed")})}runQualification(){var e;const t={userIds:Array.from(this.setOfCheckedId)};this.qualificationState||(this.qualificationState={}),this.qualificationState.running=!0,this.qualificationState.numberOfUsers=null===(e=null==t?void 0:t.userIds)||void 0===e?void 0:e.length,this._leadsService.qualifyLeads(t).subscribe(()=>this.refresh.emit()),this._notificationsService.success("Leads","Qualification initiated, please wait for a few minutes...")}queryCCDA(e,t){this._patientsService.queryCCDA(e,t).subscribe(()=>{this._notificationsService.success("Clinical Summary","Information queried successfully")},e=>{var t;this._notificationsService.error("Clinical Summary",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Error querying information, please try again later")})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(l.g),m.Rb(o.l),m.Rb(Oa),m.Rb(ia),m.Rb(_a.e),m.Rb(d.a),m.Rb(E.f),m.Rb(Na.d),m.Rb(ni.a),m.Rb(Te),m.Rb(oa.a),m.Rb(g.a),m.Rb(ca.a),m.Rb(pt),m.Rb(h.a),m.Rb(ne.a),m.Rb(nt),m.Rb(f.b),m.Rb(ye.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-leads"]],inputs:{type:"type",qualificationState:"qualificationState"},outputs:{refresh:"refresh"},features:[m.Ab],decls:46,vars:27,consts:[["nz-row","","class","container",4,"ngIf"],["qualificationMessage",""],[1,"lead-filter-container"],[1,"filter-component"],["nz-button","","nzType","primary",3,"click"],["size","12px","color","#ffffff","altColor","#ffffff","name","filter"],[1,"container"],[3,"nzLoading","nzData","nzFrontPagination","nzPageIndex","nzTotal","nzPageSizeOptions","nzShowSizeChanger","nzPageSize","nzShowPagination","nzShowTotal","nzNoResult","nzQueryParams"],["leadsTable",""],[4,"isFeaturePermitted"],["nzWidth","60px"],[4,"isAccessAcrossTenantEnabled"],[3,"nzSortFn","nzSortOrderChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],["noFollowUps",""],["noFollowUpDate",""],["totalPatientsCount",""],["noResultTemplate",""],["nz-row","",1,"container"],["nz-col","","nzOffset","6","nzSpan","18"],["nzType","warning",3,"nzMessage"],["name","reload","size","14px",3,"click"],["nzWidth","30px",3,"nzShowCheckbox","nzChecked","nzIndeterminate","nzCheckedChange"],[3,"click"],[2,"margin","10px",3,"nzCount"],["isToolTipEnabled","true",3,"leadStatus"],["class","push-to-genesys","nz-tooltip","","nzTooltipTitle","Contact pushed to Genesys",4,"ngIf"],[3,"leadId","context","phoneNumbers"],[3,"click",4,"ngIf"],["name","delete",3,"click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","26px"],["actionsSubMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[3,"nzChecked","nzCheckedChange"],["nz-tooltip","","nzTooltipTitle","Contact pushed to Genesys",1,"push-to-genesys"],["nz-icon","","nzType","cloud-upload"],[3,"nzColor",4,"ngIf","ngIfElse"],[3,"nzColor"],["nz-icon","",3,"nzType"],[4,"ngIf","ngIfElse"],["name","edit",3,"click"],["userType","LEAD",3,"primaryActionText","primaryButtonLoading","secondaryActionText","totalPatientsSelected","totalCount","onPrimaryActionButtonClicked","onSecondaryActionButtonClicked"],["nz-typography","",1,"totalCount"],["nz-row","","nzJustify","center","nzAlign","middle",1,"no-result"],["nz-col",""],["nz-col","","nzJustify","center","nzAlign","middle"],["name","icBlank","size","80"],[1,"no-results-text"]],template:function(e,t){if(1&e&&(m.Vc(0,ja,3,1,"div",0),m.Vc(1,Ha,4,2,"ng-template",null,1,m.Wc),m.Xb(3,"div",2),m.Xb(4,"span",3),m.Xb(5,"button",4),m.ec("click",function(){return t.showFiltersModal()}),m.Sb(6,"app-icons",5),m.Xc(7," Filters "),m.Wb(),m.Wb(),m.Wb(),m.Xb(8,"div",6),m.Xb(9,"nz-table",7,8),m.ec("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),m.Xb(11,"thead"),m.Xb(12,"tr"),m.Vc(13,Za,2,3,"ng-container",9),m.Xb(14,"th"),m.Xc(15),m.jc(16,"translate"),m.Wb(),m.Sb(17,"th",10),m.Sb(18,"th",10),m.Sb(19,"th",10),m.Xb(20,"th"),m.Xc(21,"MR Number"),m.Wb(),m.Xb(22,"th"),m.Xc(23,"Date of Birth"),m.Wb(),m.Xb(24,"th"),m.Xc(25,"Language"),m.Wb(),m.Vc(26,Ya,2,0,"th",11),m.Xb(27,"th",12),m.ec("nzSortOrderChange",function(e){return t.setSortKey(e)}),m.Xc(28,"Added On"),m.Wb(),m.Vc(29,$a,2,0,"th",13),m.Vc(30,Ka,2,0,"th",13),m.Xb(31,"th"),m.Xc(32),m.jc(33,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(34,"tbody"),m.Vc(35,cl,47,29,"tr",14),m.Wb(),m.Wb(),m.Wb(),m.Vc(36,rl,2,1,"ng-template",null,15,m.Wc),m.Vc(38,sl,2,0,"ng-template",null,16,m.Wc),m.Vc(40,ul,2,2,"ng-container",13),m.Vc(41,pl,2,5,"ng-container",13),m.Vc(42,ml,7,10,"ng-template",null,17,m.Wc),m.Vc(44,fl,8,0,"ng-template",null,18,m.Wc)),2&e){const e=m.Ic(10),n=m.Ic(43),i=m.Ic(45);m.rc("ngIf",null==t.qualificationState?null:t.qualificationState.running),m.Db(9),m.rc("nzLoading",t.loading)("nzData",t.leads)("nzFrontPagination",!1)("nzPageIndex",t.pageIndex)("nzTotal",t.totalCount)("nzPageSizeOptions",m.xc(25,vl))("nzShowSizeChanger",!0)("nzPageSize",t.pageSize)("nzShowPagination",!0)("nzShowTotal",n)("nzNoResult",i),m.Db(4),m.rc("isFeaturePermitted",m.xc(26,ll)),m.Db(2),m.Yc(m.kc(16,21,"COMMON.NAME")),m.Db(12),m.rc("nzSortFn",!0),m.Db(2),m.rc("ngIf","ACTIVE"==t.selectedType),m.Db(1),m.rc("ngIf","ACTIVE"==t.selectedType),m.Db(2),m.Yc(m.kc(33,23,"TABLEHEADER.ACTIONS")),m.Db(3),m.rc("ngForOf",null==e?null:e.data),m.Db(5),m.rc("ngIf",t.totalLeadsSelected>0&&"ACTIVE"===t.selectedType),m.Db(1),m.rc("ngIf",t.totalLeadsSelected>0&&"ELIGIBLE"===t.selectedType)}},directives:[o.q,M.a,O.a,k.a,Le.a,Bo.f,Bo.n,Bo.o,ji.a,Bo.e,Bo.l,xa.a,Bo.k,Bo.i,o.p,z.c,z.a,Bi.a,Bo.m,Aa.a,Bn.a,Pa.a,Ra.a,Ra.b,Ra.e,Ua.c,Ua.e,Bo.j,N.d,_.a,Ne.a,Va.a,w.a],pipes:[X.a,qn.a,o.e,ra.a,Fa.a,Ba],styles:["nz-alert[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.space-filler[_ngcontent-%COMP%]{flex:1 1 auto}input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px!important}input[_ngcontent-%COMP%]:-moz-placeholder, input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px!important}input[_ngcontent-%COMP%]:-ms-input-placeholder{font-size:14px!important}#menu-button[_ngcontent-%COMP%]{background:transparent;border:none}table[_ngcontent-%COMP%]{width:100%;margin:auto}td[_ngcontent-%COMP%]{color:grey}.lead-data[_ngcontent-%COMP%]{padding:20px 10px;font-size:12px}.lead[_ngcontent-%COMP%]{border-radius:50%;border:2px outset;font-size:10px;width:40px;text-align:center;line-height:4;height:40px;font-weight:800;text-transform:uppercase;background-color:#f0f8ff}.lead-headers[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;color:#7e87a0;font-size:12px;font-weight:bolder}.lead-name[_ngcontent-%COMP%]{color:#000;font-weight:700;text-transform:lowercase;text-transform:capitalize}.lead-email[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-color);text-transform:lowercase}.paginator[_ngcontent-%COMP%]{width:100%;margin:0 auto 2%}.reg-requests[_ngcontent-%COMP%]{margin:0 20px}[_nghost-%COMP%]     .ant-input-affix-wrapper .ant-input-suffix{right:0!important}[_nghost-%COMP%]     .ant-pagination{float:right;margin-bottom:20px}span[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]     .ant-checkbox-wrapper{padding-left:16px;padding-right:8px;border-spacing:0!important}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}.lead-filter-container[_ngcontent-%COMP%]{position:absolute;top:100px;right:0;display:flex;flex-direction:row;margin:10px 15px 15px;align-items:flex-end}.filter-component[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}app-icons[_ngcontent-%COMP%]{vertical-align:middle!important;margin-right:10px}.push-to-genesys[_ngcontent-%COMP%]{font-size:20px;color:var(--primary-color)}.totalCount[_ngcontent-%COMP%]{margin-top:5px}"]}),e})();const zl=function(){return["."]},Sl=function(){return{tab:"ALL"}};function Il(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," All Leads "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,Sl))}function Xl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",10),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}const yl=function(){return{tab:"NEW"}};function Dl(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," New "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,yl))}function Wl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",11),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}const Tl=function(){return{tab:"ELIGIBLE"}};function El(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," Eligible "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,Tl))}function wl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",12),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}const Ll=function(){return{tab:"ACTIVE"}};function Ml(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," Active "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,Ll))}function Ol(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",13),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}const kl=function(){return{tab:"CONVERTED"}};function _l(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," Converted "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,kl))}function Nl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",14),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}const xl=function(){return{tab:"NOT_ELIGIBLE"}};function Al(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," Not Eligible "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,xl))}function Pl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",15),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}const Rl=function(){return{tab:"LOST"}};function Ul(e,t){1&e&&(m.Xb(0,"a",9),m.Xc(1," Lost "),m.Wb()),2&e&&m.rc("routerLink",m.xc(2,zl))("queryParams",m.xc(3,Rl))}function Vl(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-leads",16),m.ec("refresh",function(){return m.Lc(e),m.ic().getStaffDetails()}),m.Wb()}if(2&e){const e=m.ic();m.rc("qualificationState",e.qualificationState)}}let Fl=(()=>{class e extends r.a{constructor(e,t,n){super(),this._activatedRoute=e,this._staffService=t,this._router=n}ngOnInit(){this._activatedRoute.queryParams.pipe(Object(Q.a)(this.unsubscribed)).subscribe(e=>{this.tab=e.tab||"ACTIVE"}),this.getStaffDetails()}getStaffDetails(){const e=localStorage.getItem("loggedInUser");this._staffService.getStaffByUserId(e).subscribe(e=>{var t,n,i,o,a,l;(null===(t=this.qualificationState)||void 0===t?void 0:t.running)&&!(null===(i=null===(n=null==e?void 0:e.clinicianState)||void 0===n?void 0:n.qualificationState)||void 0===i?void 0:i.running)&&this._router.navigate(["leads"],{queryParams:{tab:"ELIGIBLE"}}),this.qualificationState=null===(o=null==e?void 0:e.clinicianState)||void 0===o?void 0:o.qualificationState,(null===(a=this.qualificationState)||void 0===a?void 0:a.dateTime)&&30<=Object(ta.a)(Object(na.a)((null===(l=this.qualificationState)||void 0===l?void 0:l.dateTime)+"Z"),new Date)&&(this.qualificationState.running=!1)})}clear(){this._routeHelperService.resetSearch(!0),this._routeHelperService.setSearch(null)}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(l.a),m.Rb(st.a),m.Rb(l.g))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-lead-tab"]],features:[m.Ab],decls:22,vars:7,consts:[["nzLinkRouter","",3,"nzSelectedIndexChange"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],["type","ALL",3,"qualificationState","refresh",4,"ngIf"],["type","NEW",3,"qualificationState","refresh",4,"ngIf"],["type","ELIGIBLE",3,"qualificationState","refresh",4,"ngIf"],["type","ACTIVE",3,"qualificationState","refresh",4,"ngIf"],["type","CONVERTED",3,"qualificationState","refresh",4,"ngIf"],["type","NOT_ELIGIBLE",3,"qualificationState","refresh",4,"ngIf"],["type","LOST",3,"qualificationState","refresh",4,"ngIf"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],["type","ALL",3,"qualificationState","refresh"],["type","NEW",3,"qualificationState","refresh"],["type","ELIGIBLE",3,"qualificationState","refresh"],["type","ACTIVE",3,"qualificationState","refresh"],["type","CONVERTED",3,"qualificationState","refresh"],["type","NOT_ELIGIBLE",3,"qualificationState","refresh"],["type","LOST",3,"qualificationState","refresh"]],template:function(e,t){1&e&&(m.Xb(0,"nz-tabset",0),m.ec("nzSelectedIndexChange",function(){return t.clear()}),m.Xb(1,"nz-tab"),m.Vc(2,Il,2,4,"a",1),m.Vc(3,Xl,1,1,"app-leads",2),m.Wb(),m.Xb(4,"nz-tab"),m.Vc(5,Dl,2,4,"a",1),m.Vc(6,Wl,1,1,"app-leads",3),m.Wb(),m.Xb(7,"nz-tab"),m.Vc(8,El,2,4,"a",1),m.Vc(9,wl,1,1,"app-leads",4),m.Wb(),m.Xb(10,"nz-tab"),m.Vc(11,Ml,2,4,"a",1),m.Vc(12,Ol,1,1,"app-leads",5),m.Wb(),m.Xb(13,"nz-tab"),m.Vc(14,_l,2,4,"a",1),m.Vc(15,Nl,1,1,"app-leads",6),m.Wb(),m.Xb(16,"nz-tab"),m.Vc(17,Al,2,4,"a",1),m.Vc(18,Pl,1,1,"app-leads",7),m.Wb(),m.Xb(19,"nz-tab"),m.Vc(20,Ul,2,4,"a",1),m.Vc(21,Vl,1,1,"app-leads",8),m.Wb(),m.Wb()),2&e&&(m.Db(3),m.rc("ngIf","ALL"===t.tab),m.Db(3),m.rc("ngIf","NEW"===t.tab),m.Db(3),m.rc("ngIf","ELIGIBLE"===t.tab),m.Db(3),m.rc("ngIf","ACTIVE"===t.tab),m.Db(3),m.rc("ngIf","CONVERTED"===t.tab),m.Db(3),m.rc("ngIf","NOT_ELIGIBLE"===t.tab),m.Db(3),m.rc("ngIf","LOST"===t.tab))},directives:[gi.d,gi.a,gi.c,o.q,gi.b,l.j,Cl],styles:["a[_ngcontent-%COMP%]{color:var(--black)}"]}),e})();class Bl{constructor(){this.createLetterFollowUp=!0,this.createDummyAudioCallFollowUp=!0,this.hideAudioCallFollowUps=!0}}const jl=[{path:"",component:Fl,pathMatch:"full",data:Ao.Listing,canActivate:[c.a,xo.a]},{path:"details/:id",component:_o,data:{privileges:[No.a.VIEW_LEAD],showTenantToggle:!1},canActivate:[c.a,xo.a]},{path:"create",component:D,data:{privileges:[No.a.ADD_LEAD]},canActivate:[c.a,xo.a]},{path:"bulk-upload",component:ea,data:Ao.BulkUpload,canActivate:[c.a,xo.a]},{path:"lead-contact-bulk-upload",component:(()=>{class e extends r.a{constructor(e,t,n){super(),this._http=e,this._genesysService=t,this._notificationsService=n,this.createLetterFollowUp=!0,this.createDummyAudioCallFollowUp=!0,this.request=new Bl,this.handleUpload=e=>{const t=new We.g({bypass:"yes"});this._http.post(this.uploadURL,e.file,{headers:t,observe:"response",responseType:"text"}).subscribe(e=>{if(200==e.status){const t=e.body;this.request.mrnColumn=this.mrnColumn,this.request.attemptCountColumn=this.attemptCountColumn,this.request.totalColumns=this.totalColumns,this.request.genesysContactIdColumn=this.genesysContactIdColumn,this.request.tenantId=this.requestTenantId,this._genesysService.bulkUploadGenesysContact(t,this.request).subscribe(()=>{this._notificationsService.success("Lead Contacts","Contactlist mapping is in progress...")})}else this._notificationsService.error("Bulk Upload","Something went wrong, please try again!")})},this.uploadURL=p.g.url+"/v2/media/upload/"+Math.random().toString(10).substring(7)+".xlsx",this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Uo.a)(e=>!!e),Object(Q.a)(this.unsubscribed)).subscribe(()=>this.downloadTemplate())}onSubTenantChange(e){"object"==typeof e&&""!=e&&null!=e&&null!=e&&(this.requestTenantId=e)}downloadTemplate(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=bulk-upload-appointments-template.xlsx","_blank")}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(We.c),m.Rb(ni.a),m.Rb(f.b))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-bulk-upload"]],features:[m.Ab],decls:16,vars:9,consts:[[1,"container"],["title","Genesys Contactlist Migration","defaultTitle","Genesys Contactlist Migration",3,"isSearchEnabled","isSecondaryActionEnabled","isActionEnabled"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","6","nzOffset","18"],["mode","SINGLE",3,"onSubTenantSelected"],["nz-row","","nzGutter","16",2,"margin-top","20px"],["nz-col","","nzSpan","24"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList"],["nz-button","","nzType","primary","nzSize","large"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Sb(1,"app-header",1),m.Xb(2,"nz-card"),m.Xb(3,"div",2),m.Xb(4,"div",3),m.Xb(5,"sub-tenant-select",4),m.ec("onSubTenantSelected",function(e){return t.onSubTenantChange(e)}),m.Wb(),m.Wb(),m.Wb(),m.Xb(6,"div",5),m.Xb(7,"div",6),m.Xb(8,"nz-upload",7),m.Xb(9,"button",8),m.Xc(10," BROWSE / DRAG "),m.Wb(),m.Xb(11,"p"),m.Sb(12,"br"),m.Xc(13),m.jc(14,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Sb(15,"br"),m.Wb(),m.Wb()),2&e&&(m.Db(1),m.rc("isSearchEnabled",!1)("isSecondaryActionEnabled",!1)("isActionEnabled",!1),m.Db(7),m.rc("nzCustomRequest",t.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1),m.Db(5),m.Zc(" ",m.kc(14,7,"COMMON.DRAG_AND_UPLOAD")," "))},directives:[C.a,ke.a,z.c,z.a,Vo.a,Fo.a,M.a,O.a,k.a],pipes:[X.a],styles:[""]}),e})(),canActivate:[c.a,xo.a]},{path:"edit/:id",component:D,data:{privileges:[No.a.VIEW_LEAD,No.a.EDIT_LEAD],showTenantToggle:!1},canActivate:[c.a,xo.a]},{path:"add-followup/:id",component:R,data:{privileges:[No.a.ADD_LEAD_FOLLOW_UPS,No.a.VIEW_LEAD_FOLLOW_UPS,No.a.CONVERT_LEAD]},canActivate:[c.a,xo.a]},{path:"followups",component:j,data:Ao.FollowUp,canActivate:[c.a,xo.a]}];let ql=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},imports:[[l.k.forChild(jl)],l.k]}),e})();var Gl=n("SHZf"),Hl=n("UFn0"),Zl=n("KZX/");n("mrSG"),n("/KA4"),n("XNiG"),n("JMSK");let Yl=(()=>{class e{}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)},imports:[[o.c]]}),e})();var $l=n("rbUg"),Kl=n("AMsP");let Ql=(()=>{class e{constructor(e){this.translationService=e,e.setLanguage()}}return e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({factory:function(t){return new(t||e)(m.bc(h.a))},providers:[],imports:[[Zl.a,Hl.a,o.c,ql,a.o,a.B,Gl.a.forRoot(),ka,i.a,Z.b,Yl,$l.a,Kl.PatientModule]]}),e})()}}]);