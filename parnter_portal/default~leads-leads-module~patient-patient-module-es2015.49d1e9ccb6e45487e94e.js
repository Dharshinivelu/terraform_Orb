(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3+Kf":function(t,e,n){"use strict";n.d(e,"a",function(){return _});var i=n("pJ0c"),a=n("fXoL"),s=n("ofXK"),o=n("xB20"),l=n("nJia");function r(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"nz-descriptions"),a.Xb(2,"nz-descriptions-item",5),a.Xc(3),a.Wb(),a.Xb(4,"nz-descriptions-item",3),a.Xc(5),a.Wb(),a.Wb(),a.Ub()),2&t){const t=e.$implicit;a.Db(3),a.Yc(null==t?null:t.id),a.Db(2),a.Yc(null==t?null:t.idType)}}function c(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){const t=a.ic().$implicit;a.Db(1),a.Zc(" ",null==t||null==t.address?null:t.address.line1,",\xa0 ")}}function d(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){const t=a.ic().$implicit;a.Db(1),a.Zc(" ",null==t||null==t.address?null:t.address.line2,",\xa0 ")}}function b(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){const t=a.ic().$implicit;a.Db(1),a.Zc(" ",null==t||null==t.address?null:t.address.city,",\xa0 ")}}function u(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){const t=a.ic().$implicit;a.Db(1),a.Zc(" ",null==t||null==t.address?null:t.address.state,"\xa0 ")}}function p(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){const t=a.ic().$implicit;a.Db(1),a.Zc(" -\xa0",null==t||null==t.address?null:t.address.country," ")}}function h(t,e){if(1&t&&(a.Vb(0),a.Xc(1),a.Ub()),2&t){const t=a.ic().$implicit;a.Db(1),a.Zc(" -\xa0",null==t||null==t.address?null:t.address.pin," ")}}function g(t,e){1&t&&(a.Xb(0,"span"),a.Xc(1," N/A "),a.Wb())}function f(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"nz-descriptions"),a.Xb(2,"nz-descriptions-item",6),a.Xc(3),a.Wb(),a.Xb(4,"nz-descriptions-item",3),a.Xc(5),a.Wb(),a.Xb(6,"nz-descriptions-item",4),a.Xc(7),a.Wb(),a.Xb(8,"nz-descriptions-item",7),a.Xb(9,"span",8),a.Xb(10,"span",9),a.Vc(11,c,2,1,"ng-container",10),a.Vc(12,d,2,1,"ng-container",10),a.Vc(13,b,2,1,"ng-container",10),a.Vc(14,u,2,1,"ng-container",10),a.Vc(15,p,2,1,"ng-container",10),a.Vc(16,h,2,1,"ng-container",10),a.Wb(),a.Vc(17,g,2,0,"span",10),a.Wb(),a.Wb(),a.Wb(),a.Ub()),2&t){const t=e.$implicit;a.Db(3),a.Yc(null==t?null:t.name),a.Db(2),a.Yc(null==t||null==t.type?null:t.type.name),a.Db(2),a.Yc(null==t||null==t.type?null:t.type.code),a.Db(3),a.wc("nzTooltipTitle","",null==t||null==t.address?null:t.address.line1,"\n                         ",null==t||null==t.address?null:t.address.line2," ",null==t||null==t.address?null:t.address.city,"\n                         ",null==t||null==t.address?null:t.address.state," ",null==t||null==t.address?null:t.address.country,"\n                         ",null==t||null==t.address?null:t.address.pin,""),a.Db(1),a.rc("ngIf",null==t||null==t.address?null:t.address.line1),a.Db(1),a.rc("ngIf",null==t||null==t.address?null:t.address.line2),a.Db(1),a.rc("ngIf",null==t||null==t.address?null:t.address.city),a.Db(1),a.rc("ngIf",null==t||null==t.address?null:t.address.state),a.Db(1),a.rc("ngIf",null==t||null==t.address?null:t.address.country),a.Db(1),a.rc("ngIf",null==t||null==t.address?null:t.address.pin),a.Db(1),a.rc("ngIf",!(null!=t&&null!=t.address&&t.address.line1||null!=t&&null!=t.address&&t.address.line2||null!=t&&null!=t.address&&t.address.city||null!=t&&null!=t.address&&t.address.state||null!=t&&null!=t.address&&t.address.country||null!=t&&null!=t.address&&t.address.pin))}}function m(t,e){if(1&t&&(a.Vb(0),a.Xb(1,"nz-descriptions"),a.Xb(2,"nz-descriptions-item",3),a.Xc(3),a.Wb(),a.Xb(4,"nz-descriptions-item",4),a.Xc(5),a.Wb(),a.Wb(),a.Ub()),2&t){const t=e.$implicit;a.Db(3),a.Yc(null==t?null:t.name),a.Db(2),a.Yc(null==t?null:t.code)}}function v(t,e){if(1&t&&(a.Xb(0,"div",1),a.Xb(1,"strong"),a.Xc(2,"Identifiers"),a.Wb(),a.Sb(3,"br"),a.Vc(4,r,6,2,"ng-container",2),a.Sb(5,"br"),a.Xb(6,"strong"),a.Xc(7,"Locations"),a.Wb(),a.Sb(8,"br"),a.Vc(9,f,18,16,"ng-container",2),a.Sb(10,"br"),a.Xb(11,"strong"),a.Xc(12,"Reasons"),a.Wb(),a.Sb(13,"br"),a.Vc(14,m,6,2,"ng-container",2),a.Sb(15,"br"),a.Xb(16,"strong"),a.Xc(17,"Type"),a.Wb(),a.Sb(18,"br"),a.Xb(19,"nz-descriptions"),a.Xb(20,"nz-descriptions-item",3),a.Xc(21),a.Wb(),a.Xb(22,"nz-descriptions-item",4),a.Xc(23),a.Wb(),a.Wb(),a.Wb()),2&t){const t=a.ic();a.Db(4),a.rc("ngForOf",null==t.encounter?null:t.encounter.identifiers),a.Db(5),a.rc("ngForOf",null==t.encounter?null:t.encounter.locations),a.Db(5),a.rc("ngForOf",null==t.encounter?null:t.encounter.reason),a.Db(7),a.Yc(null==t.encounter||null==t.encounter.type?null:t.encounter.type.name),a.Db(2),a.Yc(null==t.encounter||null==t.encounter.type?null:t.encounter.type.code)}}let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Lb({type:t,selectors:[["app-encounter"]],inputs:{encounter:"encounter"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],["nzTitle","Type"],["nzTitle","Code"],["nzTitle","Id"],["nzTitle","Name"],["nzTitle","Address"],["id","address"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"]],template:function(t,e){1&t&&a.Vc(0,v,24,5,"div",0),2&t&&a.rc("ngIf",e.encounter)},directives:[s.q,s.p,o.a,o.b,l.d],styles:[".container[_ngcontent-%COMP%]{margin-top:-15px!important;padding:0 20px 0 0!important}"]}),t})();var I=n("dEAy");let D=(()=>{class t{constructor(t){this._modalService=t}showEncounterModal(t){return this._modalService.create({nzContent:S,nzComponentParams:{encounter:t},nzTitle:"Encounter",nzWidth:"700px",nzFooter:null})}}return t.\u0275fac=function(e){return new(e||t)(a.bc(I.f))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=n("rMZv"),X=n("OrU2"),E=n("fhRi");function T(t,e){if(1&t&&a.Sb(0,"app-patient-status-notification",5),2&t){const t=a.ic();a.rc("patientInfo",t.patientInfo)}}function z(t,e){if(1&t){const t=a.Yb();a.Xb(0,"tr",6),a.ec("click",function(){a.Lc(t);const n=e.$implicit;return a.ic().showEncounter(n)}),a.Xb(1,"td"),a.Xc(2),a.jc(3,"utcToLocalTime"),a.Wb(),a.Xb(4,"td"),a.Xc(5),a.Wb(),a.Xb(6,"td"),a.Xc(7),a.Wb(),a.Wb()}if(2&t){const t=e.$implicit;a.Db(2),a.Yc(a.kc(3,3,null==t?null:t.dateTime)),a.Db(3),a.Yc(null==t||null==t.type?null:t.type.name),a.Db(2),a.Yc(null==t||null==t.type?null:t.type.code)}}let _=(()=>{class t{constructor(t,e){this._visitsEncountersService=t,this._visitsEncountersModalService=e}ngOnInit(){this.getEncounters()}getEncounters(){this._visitsEncountersService.fetchEncountersByUserId(this.patientId).subscribe(t=>{this.encounters=t})}showEncounter(t){this._visitsEncountersModalService.showEncounterModal(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(i.a),a.Rb(D))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-encounters"]],inputs:{patientInfo:"patientInfo",patientId:"patientId"},decls:14,vars:4,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],["nzFrontPagination","true",3,"nzData","nzTotal"],["encountersTable",""],[3,"click",4,"ngFor","ngForOf"],[3,"patientInfo"],[3,"click"]],template:function(t,e){if(1&t&&(a.Xb(0,"div",0),a.Vc(1,T,1,1,"app-patient-status-notification",1),a.Xb(2,"nz-table",2,3),a.Xb(4,"thead"),a.Xb(5,"tr"),a.Xb(6,"th"),a.Xc(7,"Date Time"),a.Wb(),a.Xb(8,"th"),a.Xc(9,"Type"),a.Wb(),a.Xb(10,"th"),a.Xc(11,"Code"),a.Wb(),a.Wb(),a.Wb(),a.Xb(12,"tbody"),a.Vc(13,z,8,5,"tr",4),a.Wb(),a.Wb(),a.Wb()),2&t){const t=a.Ic(3);a.Db(1),a.rc("ngIf",e.patientInfo&&("FLAGGED_FOR_DISQUALIFICATION"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"SUSPENDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus))),a.Db(1),a.rc("nzData",e.encounters)("nzTotal",null==e.encounters?null:e.encounters.length),a.Db(11),a.rc("ngForOf",null==t?null:t.data)}},directives:[s.q,C.f,C.n,C.o,C.e,C.l,C.i,s.p,X.a],pipes:[E.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),t})()},AMsP:function(t,e,n){"use strict";n.r(e),n.d(e,"PatientModule",function(){return mv});var i=n("ZlwT"),a=n("4AsR"),s=n("bKRa"),o=n("icpI"),l=n("rbUg"),r=n("KZX/"),c=n("ofXK"),d=n("3Pt+"),b=n("tyNb"),u=n("SHZf"),p=n("UFn0"),h=n("qQcL"),g=n("geco"),f=n("tk/3"),m=n("AytR"),v=n("HZ0a"),S=n("2lmJ");let I=(()=>{class t{}return t.SUCCESS="Success",t.EMAIL_FORMAT_ERROR="Email Format Error",t.DOB_FORMAT_ERROR="DOB Format Error",t.UNIT_NOT_IDENTIFIED="Unit Not Identified",t.ROW_PARSE_ERROR="Row Parse Error",t.INVALID_MONITORING_IDS="Monitoring Staff Id is invalid",t.EMPTY_CONTACT_NUMBERS="Empty contact numbers",t.EMPTY_FIRST_NAMES="Empty First names",t.EMPTY_LAST_NAMES="Empty Last names",t.EMPTY_DOB="Empty Date of Births",t.EMPTY_INCOMPLETE_PRIMARY_INSURANCE="Empty or Incomplete Insurance Details",t.EMPTY_PHYSICIAN_ID="Physician Id cannot be blank",t.DUPLICATE_PHONE_NUMBERS_IN_SHEET="Duplicate phone numbers in sheet",t.DUPLICATE_EMAIL_IDS_IN_SHEET="Duplicate Email IDs in sheet",t.DUPLICATE_MEDICAL_RECORDS_IN_SHEET="Duplicate Medical Records or Patient ID in sheet",t.DUPLICATE_USERNAMES_IN_SHEET="Duplicate Usernames in sheet",t.DUPLICATE_INSURANCE_DETAILS_IN_SHEET="Duplicate Insurance Details in sheet",t.PRE_EXISTING_EMAILS="Pre Existing Email IDs in database",t.PRE_EXISTING_PHONE_NUMBERS="Pre Existing phone numbers in database",t.PRE_EXISTING_MEDICAL_RECORDS="Pre Existing Medical Records or Patient ID in database",t.PRE_EXISTING_USERNAMES="Pre Existing usernames in database",t.PRE_EXISTING_INSURANCES="Pre Existing insurances in database",t.USERS_CREATED="Users created",t})();var D=n("fXoL"),C=n("dEAy"),X=n("OzZK"),E=n("RwU8"),T=n("C2AL");function z(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1,"/ you can either proceed to go with the entries"),D.Wb())}function _(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",4),D.ec("click",function(){return D.Lc(t),D.ic().proceed()}),D.Xc(1," Proceed "),D.Wb()}}let y=(()=>{class t{constructor(t){this._modalRef=t}ngOnInit(){}goBack(){this._modalRef.close("go_back")}openLogs(){this._modalRef.close("open_logs")}proceed(){this._modalRef.close("proceed_with_create")}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.e))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-conflicts-popup"]],inputs:{message:"message",hasSuccessEntries:"hasSuccessEntries"},decls:12,vars:3,consts:[[2,"color","red"],[4,"ngIf"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(D.Xc(0,"There are some conflicts in your file related to "),D.Xb(1,"span",0),D.Xc(2),D.Wb(),D.Xc(3,". You can go back to correct and re-upload the file / you can download error logs\n"),D.Vc(4,z,2,0,"span",1),D.Xc(5,". "),D.Xb(6,"div"),D.Xb(7,"button",2),D.ec("click",function(){return e.goBack()}),D.Xc(8," Go back "),D.Wb(),D.Xb(9,"button",2),D.ec("click",function(){return e.openLogs()}),D.Xc(10," Open Logs "),D.Wb(),D.Vc(11,_,2,0,"button",3),D.Wb()),2&t&&(D.Db(2),D.Yc(e.message),D.Db(2),D.rc("ngIf",e.hasSuccessEntries),D.Db(7),D.rc("ngIf",e.hasSuccessEntries))},directives:[c.q,X.a,E.a,T.a],styles:["div[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:flex-end}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:130px;margin-left:15px}"]}),t})();var O=n("KqfI"),M=n("nLCl"),A=n("bNXi"),P=n("S5rh"),N=n("bE2y"),W=n("D9mS"),R=n("FwiY"),x=n("zAKX"),w=n("Szod"),V=n("eHCX"),L=n("5vDB"),k=n("B+r4"),F=n("MZxW"),U=n("TaO5"),j=n("oyxB"),Y=n("rMZv");function B(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.email)}}function H(t,e){if(1&t&&(D.Xb(0,"nz-table",1,2),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"Email"),D.Wb(),D.Wb(),D.Wb(),D.Xb(12,"tbody"),D.Vc(13,B,9,4,"tr",3),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersCreated),D.Db(13),D.rc("ngForOf",t.data)}}let G=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-successful-entries"]],inputs:{usersCreated:"usersCreated"},decls:1,vars:1,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzData"],["usersCreatedTable",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&D.Vc(0,H,14,2,"nz-table",0),2&t&&D.rc("ngIf",(null==e.usersCreated?null:e.usersCreated.length)>0)},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p],styles:[""]}),t})();function $(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName)}}function Z(t,e){if(1&t&&(D.Xb(0,"nz-table",6,7),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"tbody"),D.Vc(11,$,7,3,"tr",8),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithEmptyContactNumbers),D.Db(11),D.rc("ngForOf",t.data)}}function q(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.email)}}function K(t,e){if(1&t&&(D.Xb(0,"nz-table",9,10),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"Last Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Email"),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"tbody"),D.Vc(11,q,7,3,"tr",8),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithEmptyFirstNames),D.Db(11),D.rc("ngForOf",t.data)}}function Q(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.email)}}function J(t,e){if(1&t&&(D.Xb(0,"nz-table",11,12),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Email"),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"tbody"),D.Vc(11,Q,7,3,"tr",8),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithEmptyLastNames),D.Db(11),D.rc("ngForOf",t.data)}}function tt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName)}}function et(t,e){if(1&t&&(D.Xb(0,"nz-table",13,14),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"tbody"),D.Vc(11,tt,7,3,"tr",8),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithEmptyDob),D.Db(11),D.rc("ngForOf",t.data)}}function nt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName)}}function it(t,e){if(1&t&&(D.Xb(0,"nz-table",15,16),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"tbody"),D.Vc(11,nt,7,3,"tr",8),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithEmptyInsurance),D.Db(11),D.rc("ngForOf",t.data)}}function at(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName)}}function st(t,e){if(1&t&&(D.Xb(0,"nz-table",17,18),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"tbody"),D.Vc(11,at,7,3,"tr",8),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithEmptyPhysician),D.Db(11),D.rc("ngForOf",t.data)}}let ot=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-empty-entries"]],inputs:{usersWithEmptyContactNumbers:"usersWithEmptyContactNumbers",usersWithEmptyFirstNames:"usersWithEmptyFirstNames",usersWithEmptyLastNames:"usersWithEmptyLastNames",usersWithEmptyDob:"usersWithEmptyDob",usersWithEmptyInsurance:"usersWithEmptyInsurance",usersWithEmptyPhysician:"usersWithEmptyPhysician"},decls:6,vars:6,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty phone numbers",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty first names",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Last Names",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty DOBs",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Insurance Details",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty PCP Staff Ids",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty phone numbers",3,"nzData"],["usersWithEmptyContactNumbersTable",""],[4,"ngFor","ngForOf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with empty first names",3,"nzData"],["usersWithEmptyFirstNamesTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Last Names",3,"nzData"],["usersWithEmptyLastNamesTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty DOBs",3,"nzData"],["usersWithEmptyDobTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty Insurance Details",3,"nzData"],["usersWithEmptyInsuranceTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Empty PCP Staff Ids",3,"nzData"],["usersWithEmptyPhysicianTable",""]],template:function(t,e){1&t&&(D.Vc(0,Z,12,2,"nz-table",0),D.Vc(1,K,12,2,"nz-table",1),D.Vc(2,J,12,2,"nz-table",2),D.Vc(3,et,12,2,"nz-table",3),D.Vc(4,it,12,2,"nz-table",4),D.Vc(5,st,12,2,"nz-table",5)),2&t&&(D.rc("ngIf",(null==e.usersWithEmptyContactNumbers?null:e.usersWithEmptyContactNumbers.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithEmptyFirstNames?null:e.usersWithEmptyFirstNames.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithEmptyLastNames?null:e.usersWithEmptyLastNames.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithEmptyDob?null:e.usersWithEmptyDob.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithEmptyInsurance?null:e.usersWithEmptyInsurance.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithEmptyPhysician?null:e.usersWithEmptyPhysician.length)>0))},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p],styles:[""]}),t})();function lt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.contactNumber)}}function rt(t,e){if(1&t&&(D.Xb(0,"nz-table",4,5),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"Duplicate Phone Numbers"),D.Wb(),D.Wb(),D.Wb(),D.Xb(12,"tbody"),D.Vc(13,lt,9,4,"tr",6),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithDuplicatePhoneNumbers),D.Db(13),D.rc("ngForOf",t.data)}}function ct(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.email)}}function dt(t,e){if(1&t&&(D.Xb(0,"nz-table",7,8),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"Duplicate Emails"),D.Wb(),D.Wb(),D.Wb(),D.Xb(12,"tbody"),D.Vc(13,ct,9,4,"tr",6),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithDuplicateEmails),D.Db(13),D.rc("ngForOf",t.data)}}function bt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.patientId)}}function ut(t,e){if(1&t&&(D.Xb(0,"nz-table",9,10),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"Duplicate medical records"),D.Wb(),D.Wb(),D.Wb(),D.Xb(12,"tbody"),D.Vc(13,bt,9,4,"tr",6),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithDuplicateMedicalRecords),D.Db(13),D.rc("ngForOf",t.data)}}function pt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td"),D.Xc(10),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.primaryInsurance),D.Db(2),D.Yc(t.primaryInsuranceNumber)}}function ht(t,e){if(1&t&&(D.Xb(0,"nz-table",11,12),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"Insurance provider"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"Insurance number"),D.Wb(),D.Wb(),D.Wb(),D.Xb(14,"tbody"),D.Vc(15,pt,11,5,"tr",6),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic();D.rc("nzData",e.usersWithDuplicateInsurances),D.Db(15),D.rc("ngForOf",t.data)}}let gt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-duplicate-entries"]],inputs:{usersWithDuplicatePhoneNumbers:"usersWithDuplicatePhoneNumbers",usersWithDuplicateEmails:"usersWithDuplicateEmails",usersWithDuplicateMedicalRecords:"usersWithDuplicateMedicalRecords",usersWithDuplicateInsurances:"usersWithDuplicateInsurances"},decls:4,vars:4,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate phone numbers",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate emails",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Medical Records",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Insurances",3,"nzData",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate phone numbers",3,"nzData"],["usersWithDuplicatePhoneNumbersTable",""],[4,"ngFor","ngForOf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with duplicate emails",3,"nzData"],["usersWithDuplicateEmailsTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Medical Records",3,"nzData"],["usersWithDuplicateMedicalRecordsTable",""],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false","nzTitle","Users with Duplicate Insurances",3,"nzData"],["usersWithDuplicateInsurancesTable",""]],template:function(t,e){1&t&&(D.Vc(0,rt,14,2,"nz-table",0),D.Vc(1,dt,14,2,"nz-table",1),D.Vc(2,ut,14,2,"nz-table",2),D.Vc(3,ht,16,2,"nz-table",3)),2&t&&(D.rc("ngIf",(null==e.usersWithDuplicatePhoneNumbers?null:e.usersWithDuplicatePhoneNumbers.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithDuplicateEmails?null:e.usersWithDuplicateEmails.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithDuplicateMedicalRecords?null:e.usersWithDuplicateMedicalRecords.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithDuplicateInsurances?null:e.usersWithDuplicateInsurances.length)>0))},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p],styles:[""]}),t})();function ft(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.email)}}function mt(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"h4"),D.Xc(2,"Pre Existing "),D.Xb(3,"span",1),D.Xc(4),D.Wb(),D.Xc(5," in database"),D.Wb(),D.Xb(6,"nz-table",2,3),D.Xb(8,"thead"),D.Xb(9,"tr"),D.Xb(10,"th"),D.Xc(11,"Data Row Number"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"First Name"),D.Wb(),D.Xb(14,"th"),D.Xc(15,"Last Name"),D.Wb(),D.Xb(16,"th"),D.Xc(17,"Pre - existing Email"),D.Wb(),D.Wb(),D.Wb(),D.Xb(18,"tbody"),D.Vc(19,ft,9,4,"tr",4),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(7),e=D.ic();D.Db(4),D.Zc(" ",e.usersWithPreExistingEmails.length," Email IDs "),D.Db(2),D.rc("nzData",e.usersWithPreExistingEmails),D.Db(13),D.rc("ngForOf",t.data)}}function vt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.patientId)}}function St(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"h4"),D.Xc(2,"Pre Existing "),D.Xb(3,"span",1),D.Xc(4),D.Wb(),D.Xc(5," in database"),D.Wb(),D.Xb(6,"nz-table",2,5),D.Xb(8,"thead"),D.Xb(9,"tr"),D.Xb(10,"th"),D.Xc(11,"Data Row Number"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"First Name"),D.Wb(),D.Xb(14,"th"),D.Xc(15,"Last Name"),D.Wb(),D.Xb(16,"th"),D.Xc(17,"Pre - existing medical records"),D.Wb(),D.Wb(),D.Wb(),D.Xb(18,"tbody"),D.Vc(19,vt,9,4,"tr",4),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(7),e=D.ic();D.Db(4),D.Zc(" ",null==e.usersWithPreExistingMedicalRecords?null:e.usersWithPreExistingMedicalRecords.length," Patient IDs "),D.Db(2),D.rc("nzData",e.usersWithPreExistingMedicalRecords),D.Db(13),D.rc("ngForOf",t.data)}}function It(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.contactNumber)}}function Dt(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"h4"),D.Xc(2,"Pre Existing "),D.Xb(3,"span",1),D.Xc(4),D.Wb(),D.Xc(5," in database"),D.Wb(),D.Xb(6,"nz-table",2,6),D.Xb(8,"thead"),D.Xb(9,"tr"),D.Xb(10,"th"),D.Xc(11,"Data Row Number"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"First Name"),D.Wb(),D.Xb(14,"th"),D.Xc(15,"Last Name"),D.Wb(),D.Xb(16,"th"),D.Xc(17,"Pre-existing Phone Numbers"),D.Wb(),D.Wb(),D.Wb(),D.Xb(18,"tbody"),D.Vc(19,It,9,4,"tr",4),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(7),e=D.ic();D.Db(4),D.Zc(" ",null==e.usersWithPreExistingPhoneNumbers?null:e.usersWithPreExistingPhoneNumbers.length," Phone Numbers "),D.Db(2),D.rc("nzData",e.usersWithPreExistingPhoneNumbers),D.Db(13),D.rc("ngForOf",t.data)}}function Ct(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td"),D.Xc(10),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.primaryInsurance),D.Db(2),D.Yc(t.primaryInsuranceNumber)}}function Xt(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"h4"),D.Xc(2,"Pre Existing "),D.Xb(3,"span",1),D.Xc(4),D.Wb(),D.Xc(5," in database"),D.Wb(),D.Xb(6,"nz-table",2,7),D.Xb(8,"thead"),D.Xb(9,"tr"),D.Xb(10,"th"),D.Xc(11,"Data Row Number"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"First Name"),D.Wb(),D.Xb(14,"th"),D.Xc(15,"Last Name"),D.Wb(),D.Xb(16,"th"),D.Xc(17,"Insurance provider"),D.Wb(),D.Xb(18,"th"),D.Xc(19,"Insurance number"),D.Wb(),D.Wb(),D.Wb(),D.Xb(20,"tbody"),D.Vc(21,Ct,11,5,"tr",4),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(7),e=D.ic();D.Db(4),D.Zc(" ",null==e.usersWithPreExistingInsurances?null:e.usersWithPreExistingInsurances.length," Insurances "),D.Db(2),D.rc("nzData",e.usersWithPreExistingInsurances),D.Db(15),D.rc("ngForOf",t.data)}}let Et=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-existing-entries"]],inputs:{usersWithPreExistingPhoneNumbers:"usersWithPreExistingPhoneNumbers",usersWithPreExistingEmails:"usersWithPreExistingEmails",usersWithPreExistingMedicalRecords:"usersWithPreExistingMedicalRecords",usersWithPreExistingInsurances:"usersWithPreExistingInsurances"},decls:4,vars:4,consts:[[4,"ngIf"],[1,"error-data"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzData"],["usersWithPreExistingEmailsTable",""],[4,"ngFor","ngForOf"],["usersWithPreExistingMedicalRecordsTable",""],["usersWithPreExistingPhoneNumbersTable",""],["usersWithPreExistingInsurancesTable",""]],template:function(t,e){1&t&&(D.Vc(0,mt,20,3,"div",0),D.Vc(1,St,20,3,"div",0),D.Vc(2,Dt,20,3,"div",0),D.Vc(3,Xt,22,3,"div",0)),2&t&&(D.rc("ngIf",(null==e.usersWithPreExistingEmails?null:e.usersWithPreExistingEmails.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithPreExistingMedicalRecords?null:e.usersWithPreExistingMedicalRecords.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithPreExistingPhoneNumbers?null:e.usersWithPreExistingPhoneNumbers.length)>0),D.Db(1),D.rc("ngIf",(null==e.usersWithPreExistingInsurances?null:e.usersWithPreExistingInsurances.length)>0))},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p],styles:[".error-data[_ngcontent-%COMP%]{color:red}h4[_ngcontent-%COMP%]{font-weight:600;margin-bottom:0}div[_ngcontent-%COMP%]{margin:20px 0}"]}),t})();function Tt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td",4),D.Xc(10,"Email error"),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.email)}}function zt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td",4),D.Xc(10,"DOB error"),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.contactNumber)}}function _t(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td",4),D.Xc(10,"Row Format error"),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.contactNumber)}}function yt(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td",4),D.Xc(10,"Height/Weight unit errors"),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.contactNumber)}}function Ot(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td",4),D.Xc(10,"Monitoring Staff Id is invalid"),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.rowId),D.Db(2),D.Yc(t.firstName),D.Db(2),D.Yc(t.lastName),D.Db(2),D.Yc(t.contactNumber)}}function Mt(t,e){if(1&t&&(D.Xb(0,"nz-table",1,2),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5,"Data Row Number"),D.Wb(),D.Xb(6,"th"),D.Xc(7,"First Name"),D.Wb(),D.Xb(8,"th"),D.Xc(9,"Last Name"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"Email"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"Format Error Type"),D.Wb(),D.Wb(),D.Wb(),D.Xb(14,"tbody"),D.Vc(15,Tt,11,4,"tr",3),D.Vc(16,zt,11,4,"tr",3),D.Vc(17,_t,11,4,"tr",3),D.Vc(18,yt,11,4,"tr",3),D.Vc(19,Ot,11,4,"tr",3),D.Wb(),D.Wb()),2&t){const t=D.ic();D.rc("nzTemplateMode",!0),D.Db(15),D.rc("ngForOf",t.usersWithEmailFormatError),D.Db(1),D.rc("ngForOf",t.usersWithDobFormatError),D.Db(1),D.rc("ngForOf",t.usersWithRowFormatError),D.Db(1),D.rc("ngForOf",t.usersWithUnitFormatError),D.Db(1),D.rc("ngForOf",t.usersWithInvalidMonitoringStaffError)}}let At=(()=>{class t{constructor(){this.usersWithFormatErrors=new Array}ngOnInit(){this.usersWithFormatErrors.concat(this.usersWithEmailFormatError),this.usersWithFormatErrors.concat(this.usersWithDobFormatError),this.usersWithFormatErrors.concat(this.usersWithUnitFormatError),this.usersWithFormatErrors.concat(this.usersWithRowFormatError),this.usersWithFormatErrors.concat(this.usersWithInvalidMonitoringStaffError)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-format-error-entries"]],inputs:{usersWithEmailFormatError:"usersWithEmailFormatError",usersWithDobFormatError:"usersWithDobFormatError",usersWithUnitFormatError:"usersWithUnitFormatError",usersWithRowFormatError:"usersWithRowFormatError",usersWithInvalidMonitoringStaffError:"usersWithInvalidMonitoringStaffError"},decls:1,vars:1,consts:[["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzTemplateMode",4,"ngIf"],["nzShowPagination","false","nzSize","small","nzSimple","true","nzFrontPagination","false",3,"nzTemplateMode"],["usersWithFormatErrors",""],[4,"ngFor","ngForOf"],[1,"error-data"]],template:function(t,e){1&t&&D.Vc(0,Mt,20,6,"nz-table",0),2&t&&D.rc("ngIf",(null==e.usersWithEmailFormatError?null:e.usersWithEmailFormatError.length)>0||(null==e.usersWithDobFormatError?null:e.usersWithDobFormatError.length)>0||(null==e.usersWithRowFormatError?null:e.usersWithRowFormatError.length)>0||(null==e.usersWithUnitFormatError?null:e.usersWithUnitFormatError.length)>0||(null==e.usersWithInvalidMonitoringStaffError?null:e.usersWithInvalidMonitoringStaffError.length)>0)},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p],styles:[".error-data[_ngcontent-%COMP%]{color:red}"]}),t})();function Pt(t,e){if(1&t&&(D.Xb(0,"nz-tab",5),D.Sb(1,"app-successful-entries",6),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("usersCreated",t.usersCreated)}}function Nt(t,e){if(1&t&&(D.Xb(0,"nz-tab",7),D.Sb(1,"app-empty-entries",8),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("usersWithEmptyContactNumbers",t.usersWithEmptyContactNumbers)("usersWithEmptyFirstNames",t.usersWithEmptyFirstNames)("usersWithEmptyLastNames",t.usersWithEmptyLastNames)("usersWithEmptyDob",t.usersWithEmptyDob)("usersWithEmptyInsurance",t.usersWithEmptyInsurance)("usersWithEmptyPhysician",t.usersWithEmptyPhysician)}}function Wt(t,e){if(1&t&&(D.Xb(0,"nz-tab",9),D.Sb(1,"app-duplicate-entries",10),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("usersWithDuplicatePhoneNumbers",t.usersWithDuplicatePhoneNumbers)("usersWithDuplicateEmails",t.usersWithDuplicateEmails)("usersWithDuplicateMedicalRecords",t.usersWithDuplicateMedicalRecords)("usersWithDuplicateInsurances",t.usersWithDuplicateInsurances)}}function Rt(t,e){if(1&t&&(D.Xb(0,"nz-tab",11),D.Sb(1,"app-existing-entries",12),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("usersWithPreExistingPhoneNumbers",t.usersWithPreExistingPhoneNumbers)("usersWithPreExistingEmails",t.usersWithPreExistingEmails)("usersWithPreExistingMedicalRecords",t.usersWithPreExistingMedicalRecords)("usersWithPreExistingInsurances",t.usersWithPreExistingInsurances)}}function xt(t,e){if(1&t&&(D.Xb(0,"nz-tab",13),D.Sb(1,"app-format-error-entries",14),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("usersWithEmailFormatError",t.usersWithEmailFormatError)("usersWithDobFormatError",t.usersWithDobFormatError)("usersWithUnitFormatError",t.usersWithUnitFormatError)("usersWithRowFormatError",t.usersWithRowFormatError)("usersWithInvalidMonitoringStaffError",t.usersWithInvalidMonitoringStaffError)}}let wt=(()=>{class t{constructor(){}ngOnInit(){this.processResultsOfEmptyEntriesInSheet(),this.processResultsOfDuplicateEntriesInSheet(),this.processResultsOfExistingEntriesInSheet(),this.processResultsOfFormatErrorEntriesInSheet(),this.processResultsOfCreatedUsersInSheet()}processResultsOfEmptyEntriesInSheet(){var t,e,n,i,a,s;this.usersWithEmptyContactNumbers=this.userActionsPerformedAndReasons[I.EMPTY_CONTACT_NUMBERS],this.usersWithEmptyFirstNames=this.userActionsPerformedAndReasons[I.EMPTY_FIRST_NAMES],this.usersWithEmptyLastNames=this.userActionsPerformedAndReasons[I.EMPTY_LAST_NAMES],this.usersWithEmptyDob=this.userActionsPerformedAndReasons[I.EMPTY_DOB],this.usersWithEmptyInsurance=this.userActionsPerformedAndReasons[I.EMPTY_INCOMPLETE_PRIMARY_INSURANCE],this.usersWithEmptyPhysician=this.userActionsPerformedAndReasons[I.EMPTY_PHYSICIAN_ID],this.hasEmptyEntries=(null===(t=this.usersWithEmptyContactNumbers)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithEmptyFirstNames)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithEmptyLastNames)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithEmptyDob)||void 0===i?void 0:i.length)>0||(null===(a=this.usersWithEmptyInsurance)||void 0===a?void 0:a.length)>0||(null===(s=this.usersWithEmptyPhysician)||void 0===s?void 0:s.length)>0}processResultsOfDuplicateEntriesInSheet(){var t,e,n,i;this.usersWithDuplicatePhoneNumbers=this.userActionsPerformedAndReasons[I.DUPLICATE_PHONE_NUMBERS_IN_SHEET],this.usersWithDuplicateEmails=this.userActionsPerformedAndReasons[I.DUPLICATE_EMAIL_IDS_IN_SHEET],this.usersWithDuplicateMedicalRecords=this.userActionsPerformedAndReasons[I.DUPLICATE_MEDICAL_RECORDS_IN_SHEET],this.usersWithDuplicateInsurances=this.userActionsPerformedAndReasons[I.DUPLICATE_INSURANCE_DETAILS_IN_SHEET],this.hasDuplicateEntries=(null===(t=this.usersWithDuplicatePhoneNumbers)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithDuplicateEmails)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithDuplicateMedicalRecords)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithDuplicateInsurances)||void 0===i?void 0:i.length)>0}processResultsOfExistingEntriesInSheet(){var t,e,n,i;this.usersWithPreExistingPhoneNumbers=this.userActionsPerformedAndReasons[I.PRE_EXISTING_PHONE_NUMBERS],this.usersWithPreExistingEmails=this.userActionsPerformedAndReasons[I.PRE_EXISTING_EMAILS],this.usersWithPreExistingMedicalRecords=this.userActionsPerformedAndReasons[I.PRE_EXISTING_MEDICAL_RECORDS],this.usersWithPreExistingInsurances=this.userActionsPerformedAndReasons[I.PRE_EXISTING_INSURANCES],this.hasExistingEntries=(null===(t=this.usersWithPreExistingPhoneNumbers)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithPreExistingEmails)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithPreExistingMedicalRecords)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithPreExistingInsurances)||void 0===i?void 0:i.length)>0}processResultsOfFormatErrorEntriesInSheet(){var t,e,n,i,a;this.usersWithEmailFormatError=this.userActionsPerformedAndReasons[I.EMAIL_FORMAT_ERROR],this.usersWithDobFormatError=this.userActionsPerformedAndReasons[I.DOB_FORMAT_ERROR],this.usersWithUnitFormatError=this.userActionsPerformedAndReasons[I.UNIT_NOT_IDENTIFIED],this.usersWithRowFormatError=this.userActionsPerformedAndReasons[I.ROW_PARSE_ERROR],this.usersWithInvalidMonitoringStaffError=this.userActionsPerformedAndReasons[I.INVALID_MONITORING_IDS],this.hasFormatErrors=(null===(t=this.usersWithEmailFormatError)||void 0===t?void 0:t.length)>0||(null===(e=this.usersWithDobFormatError)||void 0===e?void 0:e.length)>0||(null===(n=this.usersWithUnitFormatError)||void 0===n?void 0:n.length)>0||(null===(i=this.usersWithRowFormatError)||void 0===i?void 0:i.length)>0||(null===(a=this.usersWithInvalidMonitoringStaffError)||void 0===a?void 0:a.length)>0}processResultsOfCreatedUsersInSheet(){var t;this.usersCreated=this.userActionsPerformedAndReasons[I.USERS_CREATED],this.hasSuccessEntries=(null===(t=this.usersCreated)||void 0===t?void 0:t.length)>0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-bulk-add-results"]],inputs:{userActionsPerformedAndReasons:"userActionsPerformedAndReasons"},decls:6,vars:5,consts:[["nzTitle","Successful Entries",4,"ngIf"],["nzTitle","Empty Entries",4,"ngIf"],["nzTitle","Duplicate Entries",4,"ngIf"],["nzTitle","Existing Entries",4,"ngIf"],["nzTitle","Format Error entries",4,"ngIf"],["nzTitle","Successful Entries"],[3,"usersCreated"],["nzTitle","Empty Entries"],[3,"usersWithEmptyContactNumbers","usersWithEmptyFirstNames","usersWithEmptyLastNames","usersWithEmptyDob","usersWithEmptyInsurance","usersWithEmptyPhysician"],["nzTitle","Duplicate Entries"],[3,"usersWithDuplicatePhoneNumbers","usersWithDuplicateEmails","usersWithDuplicateMedicalRecords","usersWithDuplicateInsurances"],["nzTitle","Existing Entries"],[3,"usersWithPreExistingPhoneNumbers","usersWithPreExistingEmails","usersWithPreExistingMedicalRecords","usersWithPreExistingInsurances"],["nzTitle","Format Error entries"],[3,"usersWithEmailFormatError","usersWithDobFormatError","usersWithUnitFormatError","usersWithRowFormatError","usersWithInvalidMonitoringStaffError"]],template:function(t,e){1&t&&(D.Xb(0,"nz-tabset"),D.Vc(1,Pt,2,1,"nz-tab",0),D.Vc(2,Nt,2,6,"nz-tab",1),D.Vc(3,Wt,2,4,"nz-tab",2),D.Vc(4,Rt,2,4,"nz-tab",3),D.Vc(5,xt,2,5,"nz-tab",4),D.Wb()),2&t&&(D.Db(1),D.rc("ngIf",e.hasSuccessEntries),D.Db(1),D.rc("ngIf",e.hasEmptyEntries),D.Db(1),D.rc("ngIf",e.hasDuplicateEntries),D.Db(1),D.rc("ngIf",e.hasExistingEntries),D.Db(1),D.rc("ngIf",e.hasFormatErrors))},directives:[j.d,c.q,j.a,G,ot,gt,Et,At],styles:[""]}),t})();var Vt=n("dRHE"),Lt=n("t2pg");function kt(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"span",28),D.Xb(2,"span",29),D.Xc(3),D.jc(4,"tenantName"),D.Wb(),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(3),D.Yc(D.kc(4,1,null==t?null:t.tenantId))}}function Ft(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"nz-option",24),D.Xb(2,"span",25),D.Xb(3,"span",26),D.Xc(4),D.Wb(),D.Vc(5,kt,5,3,"ng-container",27),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzLabel",null==t?null:t.name)("nzValue",null==t?null:t.id),D.Db(3),D.Zc(" ",null==t?null:t.name," ")}}function Ut(t,e){if(1&t&&D.Sb(0,"nz-option",30),2&t){const t=e.$implicit;D.rc("nzLabel",null==t?null:t.fullName)("nzValue",null==t?null:t.id)}}function jt(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"nz-option",31),D.Xc(2),D.Sb(3,"nz-divider",32),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",t)("nzLabel",t.label),D.Db(1),D.Zc(" ",t.label," ")}}function Yt(t,e){1&t&&(D.Xb(0,"nz-option",33),D.Xb(1,"div",34),D.Sb(2,"i",35),D.Wb(),D.Wb())}function Bt(t,e){if(1&t){const t=D.Yb();D.Xb(0,"span",36),D.ec("click",function(e){D.Lc(t);const n=D.ic(3),i=D.Ic(2);return n.showSelectedMonitoringStaffs(e,i)}),D.Xc(1),D.Wb()}if(2&t){const t=e.$implicit;D.Db(1),D.Zc("+ ",t.length," more \xa0\xa0")}}function Ht(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"label",5),D.Xc(2,"Select a Site "),D.Wb(),D.Xb(3,"nz-select",17),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic(2).selectedSiteId=e})("ngModelChange",function(e){return D.Lc(t),D.ic(2).onSelectedSiteChange(e)}),D.Vc(4,Ft,6,3,"ng-container",18),D.Wb(),D.Xb(5,"label",9),D.Xc(6,"This site will be assigned for all the uploaded users."),D.Wb(),D.Xb(7,"label",5),D.Xc(8,"Select a Physician "),D.Wb(),D.Xb(9,"nz-select",19),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic(2).selectedPhysicianId=e})("ngModelChange",function(e){D.Lc(t);const n=D.ic(2);return n.onSelectedPhysicianChange(n.selectedSiteId,e)}),D.Vc(10,Ut,1,2,"nz-option",20),D.Wb(),D.Xb(11,"label",9),D.Xc(12,"Physicians assigned to this site are shown in the above list."),D.Wb(),D.Xb(13,"label",5),D.Xc(14,"Select Monitoring staff to assign patients "),D.Wb(),D.Xb(15,"nz-select",21),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic(2).selectedStaffs=e})("ngModelChange",function(e){return D.Lc(t),D.ic(2).updateCheckedFlagOfSelectedStaff(e)}),D.Vc(16,jt,4,3,"ng-container",18),D.Vc(17,Yt,3,0,"nz-option",22),D.Wb(),D.Xb(18,"label",9),D.Xc(19,"Monitoring staffs assigned to this physician are shown in this list."),D.Wb(),D.Vc(20,Bt,2,1,"ng-template",null,23,D.Wc),D.Ub()}if(2&t){const t=D.Ic(21),e=D.ic(2);D.Db(3),D.rc("ngModel",e.selectedSiteId)("nzDisabled",e.disableSite)("nzLoading",e.loadingSite),D.Db(1),D.rc("ngForOf",e.listOfAllSites),D.Db(5),D.rc("ngModel",e.selectedPhysicianId)("nzDisabled",e.disablePhysician)("nzLoading",e.loadingPhysician),D.Db(1),D.rc("ngForOf",e.listOfAllPhysicians),D.Db(5),D.rc("ngModel",e.selectedStaffs)("nzMaxTagCount",6)("nzMaxTagPlaceholder",t)("nzDisabled",e.disableStaff)("nzLoading",e.loadingMonitoringStaff),D.Db(1),D.rc("ngForOf",e.listOfAllMonitoringStaffs),D.Db(1),D.rc("ngIf",e.loadingMonitoringStaff)}}function Gt(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",37),D.Xb(2,"div",38),D.Xb(3,"sub-tenant-select",39),D.ec("onSubTenantSelected",function(e){return D.Lc(t),D.ic(2).onSubTenantChange(e)}),D.Wb(),D.Wb(),D.Sb(4,"nz-divider"),D.Wb(),D.Ub()}2&t&&(D.Db(3),D.rc("persist",!1))}function $t(t,e){if(1&t){const t=D.Yb();D.Xb(0,"h5"),D.Xb(1,"span",40),D.Sb(2,"i",41),D.Xc(3),D.Wb(),D.Xc(4," \xa0 "),D.Xb(5,"span",42),D.ec("click",function(e){return D.Lc(t),D.ic(2).removeFile(e)}),D.Sb(6,"i",43),D.Xc(7," Delete"),D.Wb(),D.Wb()}if(2&t){const t=D.ic(2);D.Db(3),D.Zc(" Successfully uploaded: ",t.uploadedFile.file.name,"")}}function Zt(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Sb(1,"app-header",3),D.jc(2,"translate"),D.Xb(3,"div",4),D.Xb(4,"h3"),D.Xc(5,"You can upload bulk list of patients to the system and can assign them easily."),D.Wb(),D.Xb(6,"label",5),D.Xc(7,"Add patients to"),D.Wb(),D.Xb(8,"nz-radio-group",6),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().uploadType=e}),D.Xb(9,"label",7),D.Xc(10),D.jc(11,"translate"),D.Wb(),D.Xb(12,"label",8),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Wb(),D.Sb(15,"label",9),D.Vc(16,Ht,22,15,"ng-container",10),D.Sb(17,"br"),D.Vc(18,Gt,5,1,"ng-container",10),D.Xb(19,"div",11),D.Xb(20,"button",12),D.ec("click",function(){return D.Lc(t),D.ic().downloadSampleSheet()}),D.Xc(21),D.jc(22,"translate"),D.Wb(),D.Xb(23,"ul"),D.Xb(24,"li"),D.Xc(25),D.jc(26,"translate"),D.Wb(),D.Xb(27,"li"),D.Xc(28),D.jc(29,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(30,"nz-upload",13),D.Vc(31,$t,8,1,"h5",10),D.Xb(32,"button",14),D.Xc(33,"BROWSE / DRAG"),D.Wb(),D.Xb(34,"p"),D.Xc(35),D.jc(36,"translate"),D.Wb(),D.Wb(),D.Xb(37,"button",15),D.ec("click",function(){return D.Lc(t),D.ic().processUploadedFile()}),D.Xc(38," UPLOAD "),D.Sb(39,"i",16),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(1),D.sc("defaultTitle",D.kc(2,19,"BULK_ADD.BULK_ADD_PATIENTS")),D.rc("isSearchEnabled",!1)("isActionEnabled",!1),D.Db(7),D.rc("ngModel",t.uploadType),D.Db(2),D.Yc(D.kc(11,21,"REPORT.SERVICE_REPORT.ALL_PHYSICIANS")),D.Db(3),D.Yc(D.kc(14,23,"REPORT.SERVICE_REPORT.SELECT_PHYSICIAN")),D.Db(3),D.rc("ngIf","selectPhysician"===t.uploadType),D.Db(2),D.rc("ngIf","allPhysicians"===t.uploadType),D.Db(3),D.Zc(" ",D.kc(22,25,"BULK_ADD.DOWNLOAD_SAMPLE_FILE")," "),D.Db(4),D.Yc(D.kc(26,27,"BULK_ADD.GUIDELINE.PROPER_DATA_FORMAT")),D.Db(3),D.Yc(D.kc(29,29,"BULK_ADD.GUIDELINE.UNIQUE_FIELDS")),D.Db(2),D.rc("nzCustomRequest",t.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1)("nzDisabled",t.uploadedFileName),D.Db(1),D.rc("ngIf",t.uploadedFileName),D.Db(1),D.rc("disabled",t.uploadedFileName),D.Db(3),D.Yc(D.kc(36,31,"COMMON.DRAG_AND_UPLOAD")),D.Db(2),D.rc("disabled","selectPhysician"===t.uploadType&&(null==t.selectedSiteId||null==t.selectedPhysicianId||null==t.selectedStaffs||0==(null==t.selectedStaffs?null:t.selectedStaffs.length))||null==t.uploadedFileName)}}function qt(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",44),D.Xb(1,"nz-checkbox-group",6),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().selectedStaffs=e}),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(1),D.rc("ngModel",t.selectedStaffs)}}function Kt(t,e){if(1&t){const t=D.Yb();D.Xb(0,"app-header",45),D.ec("action",function(){return D.Lc(t),D.ic().downloadErrorLogs()})("secondaryAction",function(){return D.Lc(t),D.ic().uploadAnotherFile()}),D.Wb(),D.Xb(1,"div",46),D.Sb(2,"app-bulk-add-results",47),D.Wb()}if(2&t){const t=D.ic();D.rc("isSearchEnabled",!1),D.Db(2),D.rc("userActionsPerformedAndReasons",t.userActionsPerformedAndReasons)}}let Qt=(()=>{class t extends h.a{constructor(t,e,n,i,a,s){super(),this._http=t,this._notificationsService=e,this._patientsService=n,this._staffService=i,this._patientsEventLogger=a,this.modal=s,this.userType="PATIENT",this.disableSite=!1,this.disablePhysician=!1,this.disableStaff=!1,this.userRole=localStorage.getItem("loggedInUserRole"),this.userId=localStorage.getItem("loggedInUser"),this.userName=localStorage.getItem("loggedInUserName"),this.uploadType="selectPhysician",this.siteTenantMap=new Map,this.handleUpload=t=>{this.uploadedFile=t,this._patientsEventLogger.patientActionEvent("","bulk_patient_add_upload_start");const e=new f.g({bypass:"yes"});return this._http.post(this.uploadURL,t.file,{headers:e,observe:"response",responseType:"text"}).subscribe(t=>200==t.status?(this._patientsEventLogger.patientActionEvent("","bulk_patient_add_upload_success"),this.uploadedFileName=t.body,void this.uploadedFile.onSuccess(t)):(this._patientsEventLogger.patientActionEvent("","bulk_patient_add_upload_fail"),void this._notificationsService.error("Bulk Upload","Something went wrong, please try again!")),t=>{this.uploadedFile.onError(t,this.uploadedFile.file)},()=>{this._patientsEventLogger.patientActionEvent("","bulk_patient_report_upload_fail"),this._notificationsService.error("Bulk Upload","Something went wrong, please try again!")})}}ngOnInit(){this._patientsEventLogger.patientActionEvent("","patient_bulk_add_dropdown"),this.uploadURL=m.g.url+"/v2/media/upload/"+Math.random().toString(10).substring(7)+".xlsx",this.loadingSite=!0,this._staffService.fetchSitesForStaff().subscribe(t=>{this.listOfAllSites=t,this.listOfAllSites.forEach(t=>this.siteTenantMap.set(t.id,t.tenantId)),this.updatePhysicianOrStaff(),this.loadingSite=!1},t=>{this._notificationsService.error("Site","Loading sites failed"),this.loadingSite=!1})}updatePhysicianOrStaff(){if(this.userRole===M.a.PHYSICIAN){this.selectedSiteId=this.listOfAllSites[0].id;const t=this.getCurrentPhysician(this.userId,this.userName);this.onSelectedSiteChange(this.selectedSiteId,t),this.selectedPhysicianId=this.userId,this.onSelectedPhysicianChange(this.selectedSiteId,this.selectedPhysicianId),this.disableSite=!0,this.disablePhysician=!0}else this.userRole==M.a.MONITORING_STAFF&&(this.listOfAllMonitoringStaffs=[{label:this.userName,value:this.userId,checked:!0}],this.selectedStaffs=this.listOfAllMonitoringStaffs,this.disableStaff=!0)}removeFile(t){return this.uploadedFile=null,this.uploadedFileName=null,t.stopPropagation(),!1}processUploadedFile(t=!1){var e;this.userActionsPerformedAndReasons=null;const n={tenantId:this.siteTenantMap.get(this.selectedSiteId),fileName:this.uploadedFileName,userType:"PATIENT",siteId:this.selectedSiteId,physicianId:this.selectedPhysicianId,monitoringStaffIds:null===(e=this.selectedStaffs)||void 0===e?void 0:e.filter(t=>t.checked).map(t=>t.value)};return this._patientsService.bulkUploadUsers(n,t,"allPhysicians"===this.uploadType).subscribe(e=>{null!=e&&(this.userActionsPerformedAndReasons=e,this.processUserCreationResults(t))},t=>{var e;this._notificationsService.error("Bulk Upload Unsuccessful",null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)})}downloadSampleSheet(){var t="Bulk_Upload_Sheet_Updated_For_Site.xlsx";"allPhysicians"===this.uploadType&&(t="Bulk_Upload_Sheet_Updated_With_PCP.xlsx"),window.open("https://api.cooeyhealth.com/v2/media/"+t,"_blank")}onSelectedSiteChange(t,e){if(this.userActionsPerformedAndReasons=null,this.userRole!=M.a.MONITORING_STAFF&&(this.listOfAllMonitoringStaffs=null,this.selectedStaffs=null,this.monitoringStaffSelected=!1),this.listOfAllPhysicians=null,this.selectedPhysicianId=null,this.loadingPhysician=!0,null!=t)return e?(this.listOfAllPhysicians=[e],void(this.loadingPhysician=!1)):void this._staffService.fetchAllPhysiciansBySiteId(t).subscribe(t=>{this.loadingPhysician=!1,null==t||0===t.totalCount?this.noPhysiciansAvailable=!0:this.listOfAllPhysicians=t.result.map(t=>t.user)},t=>{this.loadingPhysician=!1,this._notificationsService.error("Physicians","Loading physicians failed"),this.noPhysiciansAvailable=!0})}onSelectedPhysicianChange(t,e){this.userActionsPerformedAndReasons=null,this.userRole!=M.a.MONITORING_STAFF&&(this.listOfAllMonitoringStaffs=null,this.loadingMonitoringStaff=!0,this.monitoringStaffSelected=!1,this.selectedStaffs=null,null!=e&&this._staffService.fetchAllMonitoringStaffBySiteIdAndPhysicianId(t,e).subscribe(t=>{let e=null==t?void 0:t.result;this.loadingMonitoringStaff=!1,null!=e&&0!=e.length&&(this.listOfAllMonitoringStaffs=e.map(t=>t.user).map(t=>({label:t.fullName,value:t.id,checked:!1})))},t=>{this.loadingMonitoringStaff=!1,this._notificationsService.error("Monitoring staff","Loading monitoring staffs failed")}))}onMonitoringStaffSelected(t){this.userActionsPerformedAndReasons=null}showSelectedMonitoringStaffs(t,e){return t.stopPropagation(),this.modal.create({nzBodyStyle:{padding:"0px 24px 14px 24px"},nzWidth:"350px",nzTitle:"Selected Monitoring Staff",nzContent:e,nzFooter:null}).afterClose.subscribe(()=>{this.selectedStaffs=this.selectedStaffs.filter(t=>t.checked)}),!1}updateCheckedFlagOfSelectedStaff(t){this.selectedStaffs.forEach(e=>e.checked=t.some(t=>t.value===e.value))}downloadErrorLogs(){let t="";for(let a in this.userActionsPerformedAndReasons)if(this.userActionsPerformedAndReasons.hasOwnProperty(a)){t=t.concat("\r\n").concat(a).concat("\r\n");for(let e of this.userActionsPerformedAndReasons[a]){for(let n in e)e.hasOwnProperty(n)&&(t=t.concat(e[n]).concat(","));t=t.concat("\r\n")}}const e=document.createElement("a"),n=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(n);e.href=i,e.download="myFile.csv",e.click(),window.URL.revokeObjectURL(i),e.remove()}uploadAnotherFile(){this.userActionsPerformedAndReasons=null,this.showResults=!1}processUserCreationResults(t=!1){var e,n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v,S,D;if(this.userActionsPerformedAndReasons){this.hasEmptyEntries=(null===(e=this.userActionsPerformedAndReasons[I.EMPTY_CONTACT_NUMBERS])||void 0===e?void 0:e.length)>0||(null===(n=this.userActionsPerformedAndReasons[I.EMPTY_FIRST_NAMES])||void 0===n?void 0:n.length)>0||(null===(i=this.userActionsPerformedAndReasons[I.EMPTY_LAST_NAMES])||void 0===i?void 0:i.length)>0||(null===(a=this.userActionsPerformedAndReasons[I.EMPTY_DOB])||void 0===a?void 0:a.length)>0||(null===(s=this.userActionsPerformedAndReasons[I.EMPTY_INCOMPLETE_PRIMARY_INSURANCE])||void 0===s?void 0:s.length)>0||(null===(o=this.userActionsPerformedAndReasons[I.EMPTY_PHYSICIAN_ID])||void 0===o?void 0:o.length)>0,this.hasDuplicateEntries=(null===(l=this.userActionsPerformedAndReasons[I.DUPLICATE_PHONE_NUMBERS_IN_SHEET])||void 0===l?void 0:l.length)>0||(null===(r=this.userActionsPerformedAndReasons[I.DUPLICATE_EMAIL_IDS_IN_SHEET])||void 0===r?void 0:r.length)>0||(null===(c=this.userActionsPerformedAndReasons[I.DUPLICATE_MEDICAL_RECORDS_IN_SHEET])||void 0===c?void 0:c.length)>0||(null===(d=this.userActionsPerformedAndReasons[I.DUPLICATE_INSURANCE_DETAILS_IN_SHEET])||void 0===d?void 0:d.length)>0,this.hasExistingEntries=(null===(b=this.userActionsPerformedAndReasons[I.PRE_EXISTING_PHONE_NUMBERS])||void 0===b?void 0:b.length)>0||(null===(u=this.userActionsPerformedAndReasons[I.PRE_EXISTING_EMAILS])||void 0===u?void 0:u.length)>0||(null===(p=this.userActionsPerformedAndReasons[I.PRE_EXISTING_MEDICAL_RECORDS])||void 0===p?void 0:p.length)>0||(null===(h=this.userActionsPerformedAndReasons[I.PRE_EXISTING_INSURANCES])||void 0===h?void 0:h.length)>0,this.hasFormatErrors=(null===(g=this.userActionsPerformedAndReasons[I.EMAIL_FORMAT_ERROR])||void 0===g?void 0:g.length)>0||(null===(f=this.userActionsPerformedAndReasons[I.DOB_FORMAT_ERROR])||void 0===f?void 0:f.length)>0||(null===(m=this.userActionsPerformedAndReasons[I.UNIT_NOT_IDENTIFIED])||void 0===m?void 0:m.length)>0||(null===(v=this.userActionsPerformedAndReasons[I.ROW_PARSE_ERROR])||void 0===v?void 0:v.length)>0||(null===(S=this.userActionsPerformedAndReasons[I.INVALID_MONITORING_IDS])||void 0===S?void 0:S.length)>0,this.hasSuccessEntries=(null===(D=this.userActionsPerformedAndReasons[I.SUCCESS])||void 0===D?void 0:D.length)>0;let C=new Array;this.showResults=t||!(this.hasEmptyEntries||this.hasDuplicateEntries||this.hasExistingEntries||this.hasFormatErrors),this.showResults||(this.hasEmptyEntries&&C.push("empty entries"),this.hasDuplicateEntries&&C.push("duplicate entries"),this.hasExistingEntries&&C.push("existing entries"),this.hasFormatErrors&&C.push("format error"),this.modal.create({nzTitle:"Conflicts",nzContent:y,nzComponentParams:{message:C.join(" / "),hasSuccessEntries:this.hasSuccessEntries},nzBodyStyle:{padding:"0px 24px 14px 24px"},nzWidth:"700px",nzClosable:!1,nzFooter:null}).afterClose.subscribe(t=>{switch(t){case"go_back":this.userActionsPerformedAndReasons=null,this.showResults=!1;break;case"open_logs":this.showResults=!0;break;case"proceed_with_create":this.processUploadedFile(!0);break;default:Object(O.a)()}}))}}getCurrentPhysician(t,e){return{id:t,firstName:null,middleName:null,lastName:null,fullName:e,dateOfBirth:null,language:null,email:null,username:null,country:null,mobile:null,gender:null,userSettings:null,locationId:null,type:null,address:null,zipCode:null,profilePhotoURL:null,profilePicture:null,timeZone:null,countryCode:null,internalId:null,site:null,otherSites:null,locations:null,clinicianState:null,tenantId:null,role:null,roles:null,profileTags:null,programs:null,programChangeHistory:[],programEnrollments:new Map,healthInfo:null,externalSources:null,credentials:null,selected:null,assigned:null,active:!0,assignedStaffs:[],assignedStaffIds:[],assignedTenants:[],assignedTenantIds:[]}}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(f.c),D.Rb(A.b),D.Rb(g.a),D.Rb(S.a),D.Rb(v.a),D.Rb(C.f))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-bulk-add"]],features:[D.Ab],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectedMonitoringStaffs",""],["resultsContainer",""],[3,"defaultTitle","isSearchEnabled","isActionEnabled"],[1,"container"],[1,"input-heading"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","allPhysicians"],["nz-radio","","nzValue","selectPhysician"],[1,"input-desc"],[4,"ngIf"],[1,"file-details-container"],["nz-button","","nzSize","large",3,"click"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList","nzDisabled"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-button","","nzType","primary","nzSize","large","id","upload-btn",3,"disabled","click"],["nz-icon","","nzType","arrow-up","nzTheme","outline"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a site",3,"ngModel","nzDisabled","nzLoading","ngModelChange"],[4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a Physician",3,"ngModel","nzDisabled","nzLoading","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["id","multiple-select","nzPlaceHolder","Search Monitoring Staff","nzShowSearch","","nzMode","multiple","nzDropdownClassName","monitoring-staff-options",3,"ngModel","nzMaxTagCount","nzMaxTagPlaceholder","nzDisabled","nzLoading","ngModelChange"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["selectedStaffsTagPlaceHolder",""],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"display","flex"],[2,"width","70%"],[4,"isAccessAcrossTenantEnabled"],[2,"width","30%"],["nz-typography","","nzType","secondary",2,"color","var(--primary-color)"],[3,"nzLabel","nzValue"],["nzCustomContent","",3,"nzValue","nzLabel"],[1,"options-divider"],["nzDisabled","","nzCustomContent",""],[1,"loading-option"],["nz-icon","","nzType","loading",2,"font-size","20px","color","#8BC34A"],[1,"max-tag-placeholder",3,"click"],["nz-row",""],["nz-col","","nzSpan","6"],["mode","SINGLE",3,"persist","onSubTenantSelected"],[2,"color","#8BC34A"],["nz-icon","","nzType","paper-clip","nzTheme","outline"],[2,"color","#FF0000","cursor","pointer",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"monitoring-staff-selection"],["defaultTitle","Bulk Add Patient list","isActionEnabled","true","actionTitle","Download logs","isSecondaryActionEnabled","true","secondaryActionTitle","+ Upload another file",3,"isSearchEnabled","action","secondaryAction"],[1,"results-container","container"],[3,"userActionsPerformedAndReasons"]],template:function(t,e){if(1&t&&(D.Vc(0,Zt,40,33,"ng-container",0),D.Vc(1,qt,2,1,"ng-template",null,1,D.Wc),D.Vc(3,Kt,3,2,"ng-template",null,2,D.Wc)),2&t){const t=D.Ic(4);D.rc("ngIf",!e.showResults)("ngIfElse",t)}},directives:[c.q,P.a,N.c,d.u,d.x,N.b,X.a,E.a,T.a,W.a,R.a,x.d,c.p,x.a,w.a,V.a,L.a,k.c,k.a,F.a,U.b,wt],pipes:[Vt.a,Lt.a],styles:[".container[_ngcontent-%COMP%]{width:70%}.results-container[_ngcontent-%COMP%]{width:100%!important}button[_ngcontent-%COMP%]{margin-bottom:10px;border-width:1px}ul[_ngcontent-%COMP%]{text-align:left;list-style-type:none}nz-table[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]     .ant-table-title{font-weight:700}nz-select[_ngcontent-%COMP%]{width:300px}nz-select[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin-top:10px}nz-checkbox-group[_ngcontent-%COMP%]{margin-bottom:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}nz-upload[_ngcontent-%COMP%]{display:block}  .monitoring-staff-selection [nz-checkbox]{display:block;margin-bottom:3px}[_nghost-%COMP%]     .ant-upload.ant-upload-drag{border-style:solid;border-radius:13px;border-color:#000;height:150px;margin-bottom:5px}#upload-btn[_ngcontent-%COMP%]{margin-top:15px}button[disabled][_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%]:active, button[disabled][_ngcontent-%COMP%]:focus, button[disabled][_ngcontent-%COMP%]:hover{color:var(--neutral-color)!important;background-color:#dbdbdb!important;border-style:none}nz-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}#multiple-select[_ngcontent-%COMP%]{min-width:300px;width:auto;display:inline-block}#multiple-select[_ngcontent-%COMP%]     nz-select-item{border:1px solid #adadad;border-radius:12px;background:transparent}#multiple-select[_ngcontent-%COMP%]     nz-select-top-control{padding-left:20px}nz-tag[_ngcontent-%COMP%]{color:var(--primary-color)}  .monitoring-staff-options nz-option-item{line-height:32px;padding:0 12px}  .monitoring-staff-options .options-divider{margin:0!important}  .monitoring-staff-options .loading-option{text-align:center;vertical-align:middle}.input-desc[_ngcontent-%COMP%]{display:block;color:#0f2015;margin-bottom:25px}.input-heading[_ngcontent-%COMP%]{display:block;color:var(--tertiary-color);margin-bottom:3px}.file-details-container[_ngcontent-%COMP%]{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.max-tag-placeholder[_ngcontent-%COMP%]{color:var(--primary-color);cursor:pointer}"]}),t})();class Jt{}var te=n("0lU3"),ee=n("glKu");function ne(t,e){if(1&t){const t=D.Yb();D.Xb(0,"google-chart",11,12),D.ec("select",function(e){return D.Lc(t),D.ic(2).dataPointClicked(e)}),D.Wb()}if(2&t){const t=D.ic(2);D.rc("data",t.data)("columns",t.columnNames)("options",t.options)}}function ie(t,e){if(1&t&&(D.Xb(0,"div",9),D.Vc(1,ne,2,3,"google-chart",10),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",!t.isChartLoading)}}function ae(t,e){if(1&t&&(D.Xb(0,"th"),D.Xc(1),D.jc(2,"date"),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",D.lc(2,1,t,"MMM d, y, h:mm")," ")}}function se(t,e){if(1&t&&(D.Vb(0),D.Vc(1,ae,3,4,"th",15),D.Ub()),2&t){const t=e.index,n=D.ic(2);D.Db(1),D.rc("ngIf",-1!=n.dataPoint.indexOf(t))}}function oe(t,e){if(1&t&&(D.Xb(0,"td"),D.Xc(1),D.Wb()),2&t){const t=D.ic().index,e=D.ic().index,n=D.ic(2);D.Db(1),D.Zc(" ",n.vitalObject[n.vitalObjectKeys[e]][t]," ")}}function le(t,e){if(1&t&&(D.Vb(0),D.Vc(1,oe,2,1,"td",15),D.Ub()),2&t){const t=e.index,n=D.ic(3);D.Db(1),D.rc("ngIf",-1!=n.dataPoint.indexOf(t))}}function re(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Vc(3,le,2,1,"ng-container",14),D.Wb()),2&t){const t=e.index,n=D.ic(2);D.Db(2),D.Yc(n.vitalObjectKeys[t]),D.Db(1),D.rc("ngForOf",n.parameterDates)}}function ce(t,e){if(1&t&&(D.Xb(0,"div",13),D.Xb(1,"nz-table"),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Vc(7,se,2,1,"ng-container",14),D.Wb(),D.Wb(),D.Xb(8,"tbody"),D.Vc(9,re,4,2,"tr",14),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.ic();D.Db(5),D.Yc(D.kc(6,3,"PARAMETERS.TITLE")),D.Db(2),D.rc("ngForOf",t.parameterDates),D.Db(2),D.rc("ngForOf",t.vitalObjectLength)}}function de(t,e){if(1&t&&(D.Xb(0,"th"),D.Xc(1),D.jc(2,"date"),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",D.lc(2,1,t,"MMM d, y, h:mm")," ")}}function be(t,e){if(1&t&&(D.Vb(0),D.Vc(1,de,3,4,"th",15),D.Ub()),2&t){const t=e.index,n=D.ic(2);D.Db(1),D.rc("ngIf",-1!=n.dataPoint.indexOf(t))}}function ue(t,e){1&t&&D.Sb(0,"app-icons",18)}function pe(t,e){1&t&&D.Sb(0,"app-icons",19)}function he(t,e){if(1&t&&(D.Xb(0,"td"),D.Vc(1,ue,1,0,"app-icons",16),D.Vc(2,pe,1,0,"app-icons",17),D.Wb()),2&t){const t=D.ic().index,e=D.ic().index,n=D.ic(2);D.Db(1),D.rc("ngIf","Yes"===n.assessmentsObject[n.assessmentsObjectKeys[e]][t]),D.Db(1),D.rc("ngIf","No"===n.assessmentsObject[n.assessmentsObjectKeys[e]][t])}}function ge(t,e){if(1&t&&(D.Vb(0),D.Vc(1,he,3,2,"td",15),D.Ub()),2&t){const t=e.index,n=D.ic(3);D.Db(1),D.rc("ngIf",-1!=n.dataPoint.indexOf(t))}}function fe(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Vc(3,ge,2,1,"ng-container",14),D.Wb()),2&t){const t=e.index,n=D.ic(2);D.Db(2),D.Yc(n.assessmentsObjectKeys[t]),D.Db(1),D.rc("ngForOf",n.parameterDates)}}function me(t,e){if(1&t&&(D.Xb(0,"div",13),D.Xb(1,"nz-table"),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th"),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Vc(7,be,2,1,"ng-container",14),D.Wb(),D.Wb(),D.Xb(8,"tbody"),D.Vc(9,fe,4,2,"tr",14),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.ic();D.Db(5),D.Yc(D.kc(6,3,"ASSESSMENT.TITLE")),D.Db(2),D.rc("ngForOf",t.parameterDates),D.Db(2),D.rc("ngForOf",t.assessmentsObjectLength)}}function ve(t,e){1&t&&(D.Xb(0,"div",21),D.Xb(1,"strong"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"HEALTHSCORE.CHARTMSG")))}function Se(t,e){if(1&t&&D.Vc(0,ve,4,3,"div",20),2&t){const t=D.ic();D.rc("ngIf",!t.isChartLoading)}}let Ie=(()=>{class t extends h.a{constructor(t,e,n,i){super(),this._location=t,this._patientsService=e,this._notificationsService=n,this._activatedRoute=i,this.isChartLoading=!0,this.patientName="",this.parameterDates=[],this.dataPoint=[],this.dateRange=[],this.dateRanges={Today:[new Date,new Date],Yesterday:[new Date((new Date).getTime()-864e5),new Date((new Date).getTime()-864e5)],"Last 7 Days":[new Date((new Date).getTime()-6048e5),new Date],"Last 30 Days":[new Date((new Date).getTime()-2592e6),new Date]}}ngOnInit(){this.getPatientIdFromURL(),this.getPatientInfo(),this.getHealthScore(),this.presetDateRange()}presetDateRange(){this.dateRange[0]=new Date((new Date).getTime()-2592e6),this.dateRange[1]=new Date}getPatientIdFromURL(){this._activatedRoute.params.forEach(t=>{this.patientId=t.id})}getPatientInfo(){this._patientsService.getSpecificUser(this.patientId).subscribe(t=>{this.patientName=t.firstName+" "+t.lastName})}getHealthScore(){this._patientsService.fetchHealthScore(this.patientId).subscribe(t=>{try{if(this.healthScore=new Jt,this.healthScore=t,this.healthScore||this._notificationsService.error("Health Scores","No health scores were measured during these dates"),!this.healthScore.scoreCalculationHistory.length)return void this._notificationsService.error("Health Scores","Health Score Data Not Available For Last 30 Days!");this.generateDataForChart(),this.generateDataForTable()}catch(e){}})}generateDataForChart(){const t=[];this.healthScore.scoreCalculationHistory.forEach(e=>{const n=[],i=new c.e("en-US").transform(e.calculatedOn,"MMM d");n.push(i),n.push(e.score),t.push(n)}),this.getBaseLineHealthScore().subscribe(e=>{this.baseValue=e.baseValue,this.initializeChart(t)})}getBaseLineHealthScore(){return this._patientsService.fetchBaseLineHealthScore(this.patientId)}initializeChart(t){this.data=t,this.columnNames=["Dates - Measured On","Health Score"],this.options={hAxis:{title:"Dates - Measured On",slantedText:!0,textStyle:{fontSize:10},format:"MMM, d"},vAxis:{title:"Health Score",viewWindow:{max:100,min:0},baseline:this.baseValue,baselineColor:"#ff0000"},selectionMode:"multiple",pointSize:8,colors:["#00ff00"],width:window.innerWidth-150,height:window.innerHeight/2.5},this.isChartLoading=!1}dataPointClicked(t){var e;this.dataPoint=[],null===(e=null==t?void 0:t.selection)||void 0===e||e.forEach(t=>{this.dataPoint.push(t.row)})}generateDataForTable(){const t=[],e=[],n=[];this.vitalObject=[],this.assessmentsObject=[],this.parameterDates=[],this.healthScore.scoreCalculationHistory.forEach(e=>{this.parameterDates.push(e.calculatedOn),t.push(e.scoreParametersSections)}),t.forEach(t=>{e.push(t[0].scoreParameters),n.push(t[1].scoreParameters)}),n[0].forEach(t=>{this.vitalObject[t.prompt]=new Array}),e[0].forEach(t=>{this.assessmentsObject[t.prompt]=new Array}),n.forEach(t=>{t.forEach(t=>{this.vitalObject[t.prompt].push(t.value)})}),e.forEach(t=>{t.forEach(t=>{this.assessmentsObject[t.prompt].push(t.value)})}),this.vitalObjectKeys=Object.keys(this.vitalObject),this.vitalObjectLength=new Array(this.vitalObjectKeys.length),this.assessmentsObjectKeys=Object.keys(this.assessmentsObject),this.assessmentsObjectLength=new Array(this.assessmentsObjectKeys.length)}goBack(){this._location.back()}getHealthScoreForDateRange(){if(this.isChartLoading=!0,this.dataPoint=[],!this.dateRange||!this.dateRange.length)return void this._notificationsService.error("Health Scores","Please Select A Date-Range To Get Health Scores!");let t=this.dateRange[0].setHours(0,0,0,0),e=this.dateRange[1].setHours(23,59,59,999);this._patientsService.fetchHealthScore(this.patientId,t,e).subscribe(t=>{try{if(this.healthScore=new Jt,this.healthScore=t,!this.healthScore||!this.healthScore.scoreCalculationHistory.length)return void this._notificationsService.error("Health Scores","No health scores were measured during these dates");this.generateDataForChart(),this.generateDataForTable()}catch(e){this._notificationsService.error("Health Scores","Health Score Data Not Available!")}})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(c.l),D.Rb(g.a),D.Rb(A.b),D.Rb(b.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-healthscore"]],features:[D.Ab],decls:14,vars:15,consts:[[3,"defaultTitle","isSearchEnabled","isActionEnabled"],[1,"container"],[1,"date-selector"],["nzFormat","MMM d, y",3,"ngModel","nzRanges","ngModelChange"],["nz-button","",3,"click"],["class","graph-container",4,"ngIf"],["class","data-table-container",4,"ngIf","ngIfElse"],["class","data-table-container",4,"ngIf"],["msg",""],[1,"graph-container"],["title","RI Score","type","AreaChart",3,"data","columns","options","select",4,"ngIf"],["title","RI Score","type","AreaChart",3,"data","columns","options","select"],["healthscorechart",""],[1,"data-table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["name","check",4,"ngIf"],["name","close",4,"ngIf"],["name","check"],["name","close"],["class","msg",4,"ngIf"],[1,"msg"]],template:function(t,e){if(1&t&&(D.Sb(0,"app-header",0),D.jc(1,"translate"),D.Xb(2,"div",1),D.Xb(3,"div",2),D.Xb(4,"nz-range-picker",3),D.ec("ngModelChange",function(t){return e.dateRange=t}),D.Wb(),D.Xc(5," \xa0\xa0 "),D.Xb(6,"button",4),D.ec("click",function(){return e.getHealthScoreForDateRange()}),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Wb(),D.Vc(9,ie,2,1,"div",5),D.Vc(10,ce,10,5,"div",6),D.Vc(11,me,10,5,"div",7),D.Vc(12,Se,1,1,"ng-template",null,8,D.Wc),D.Wb()),2&t){const t=D.Ic(13);D.uc("defaultTitle","",D.kc(1,11,"HEALTHSCORE.TITLE")," For ",e.patientName,""),D.rc("isSearchEnabled",!1)("isActionEnabled",!1),D.Db(4),D.rc("ngModel",e.dateRange)("nzRanges",e.dateRanges),D.Db(3),D.Yc(D.kc(8,13,"HEALTHSCORE.GET")),D.Db(2),D.rc("ngIf",(null==e.healthScore?null:e.healthScore.scoreCalculationHistory)&&(null==e.healthScore||null==e.healthScore.scoreCalculationHistory?null:e.healthScore.scoreCalculationHistory.length)),D.Db(1),D.rc("ngIf",(null==e.healthScore?null:e.healthScore.scoreCalculationHistory)&&e.dataPoint.length)("ngIfElse",t),D.Db(1),D.rc("ngIf",(null==e.healthScore?null:e.healthScore.scoreCalculationHistory)&&e.dataPoint.length)}},directives:[P.a,te.a,te.c,d.u,d.x,X.a,E.a,T.a,c.q,o.a,Y.f,Y.n,Y.o,Y.e,Y.l,c.p,Y.i,ee.a],pipes:[Vt.a,c.e],styles:[".container[_ngcontent-%COMP%]{width:100%;min-height:100vh;background-color:var(--neutral-color)}.date-selector[_ngcontent-%COMP%]{margin:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:2%}[_nghost-%COMP%]     .ant-picker{width:60%}.graph-container[_ngcontent-%COMP%]{border:1px solid #d3d3d3;padding:1% 0}.data-table-container[_ngcontent-%COMP%]{margin:2% 0}[_nghost-%COMP%]     .ant-table-placeholder{display:none}.ant-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-table-thead>tr>th{text-align:center}[_nghost-%COMP%]     .ant-table-title{font-size:16px;font-weight:700}th[_ngcontent-%COMP%]{width:20%}.met[_ngcontent-%COMP%]{color:var(--primary-color)}.unmet[_ngcontent-%COMP%]{color:var(--error-color)}.msg[_ngcontent-%COMP%]{color:#a9a9a9;padding:2%;text-align:center}.initialDateRange[_ngcontent-%COMP%]{text-align:center;padding:5%;font-weight:bolder}"]}),t})();var De=n("bA1+"),Ce=n("T5gh"),Xe=n("1G5W"),Ee=n("eIep"),Te=n("fQ3Y"),ze=n("LZn6"),_e=n("OTIt"),ye=n("c/Vb"),Oe=n("igu/"),Me=n("S9gE"),Ae=n("IQJ1"),Pe=n("WoUL");let Ne=(()=>{class t{}return t.STRINGS=new Array("MENU.PATIENTS","PATIENT_LISTING.WITHOUT_CAREPLAN","PATIENT_LISTING.CAREPLAN_UNASSIGNED","PATIENT_LISTING.PATIENTS_WITHOUT_GROUP","ROTHMAN_INDEX","PATIENT_NOT_MEASURED_HEALTH_SCORE","VIEW_VITALS","ASSIGN_CAREPLAN_TO_PATIENT_ERROR","UNABLE_TO_DOWNLOAD_REPORT","VITAL_VALUE_NOT_AVAILABLE","NOTE_ADDED_SUCCESSFULLY","PATIENT_LISTING.CUSTOM_FILTER","NAME_CANNOT_BE_EMPTY","SAVED_FILTER","DUPLICATE_FILTER_NAME","PATIENT_ALREADY_IN_ANOTHER_CALL","YOU_ARE_ALREADY_IN_CALL","VIDEOCALL.VIDEOCALL","COMMON.INVALID_SESSION","COMMON.SESSION_EXPIRED","DELETE_CUSTOM_FILTER_MESSAGE","TMS","TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED","TMS.TWENTY_MINS_RECORDED_ADD_ADDITIONAL_TMS","TMS.TMS_TIME_INCOMPLETE","EPISODE.REPEAT_EPISODE"),t})();var We=n("d+1G"),Re=n("fEa1"),xe=n("o3v3"),we=n("vj4F"),Ve=n("q7YW"),Le=n("Kj3r"),ke=n("SP7D"),Fe=n("4RGM"),Ue=n("H9Vc"),je=n("PTRe"),Ye=n("ZKr6"),Be=n("Nqz0"),He=n("Q8cG");const Ge=["filterTab"];function $e(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-tab",1,2),D.ec("nzSelect",function(){D.Lc(t);const n=e.$implicit;return D.ic(3).emitEvent(["EPISODES",n],n)})("nzClick",function(){D.Lc(t);const n=e.$implicit;return D.ic(3).emitEvent(["EPISODES",n],n,!0)}),D.Wb()}if(2&t){const t=e.$implicit;D.rc("nzTitle","GENERAL"===t?"BHI":t),D.Eb("data-filter","EPISODES")("data-subFilter",t)("data-id",t)}}function Ze(t,e){if(1&t){const t=D.Yb();D.Vb(0,null,6),D.Vc(2,$e,2,4,"nz-tab",7),D.Xb(3,"nz-tab",1,2),D.ec("nzSelect",function(){return D.Lc(t),D.ic(2).emitEvent(["NO_ACTIVE_EPISODES"])})("nzClick",function(){return D.Lc(t),D.ic(2).emitEvent(["NO_ACTIVE_EPISODES"],null,!0)}),D.jc(5,"translate"),D.Wb(),D.Ub()}if(2&t){const t=D.ic(2);D.Db(2),D.rc("ngForOf",t.episodeBlueprintTypes),D.Db(1),D.sc("nzTitle",D.kc(5,3,"FILTER.NO_ACTIVE_EPISODES")),D.Eb("data-filter","NO_ACTIVE_EPISODES")}}function qe(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Ze,6,5,"ng-container",3),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",null==t.episodeBlueprints?null:t.episodeBlueprints.length)}}function Ke(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-tab",1,2),D.ec("nzSelect",function(){return D.Lc(t),D.ic(2).emitEvent(["CARE_PLANS","REMOTE_PATIENT_MONITORING"])})("nzClick",function(){return D.Lc(t),D.ic(2).emitEvent(["CARE_PLANS","REMOTE_PATIENT_MONITORING"],null,!0)}),D.jc(2,"translate"),D.Wb()}2&t&&(D.sc("nzTitle",D.kc(2,3,"FILTER.CAREPLAN.RPM")),D.Eb("data-filter","CARE_PLANS")("data-subFilter","REMOTE_PATIENT_MONITORING"))}function Qe(t,e){if(1&t){const t=D.Yb();D.Vb(0,null,8),D.Xb(2,"nz-tab",1,2),D.ec("nzSelect",function(){return D.Lc(t),D.ic().emitEvent(["CARE_PLANS","DEFAULT"])})("nzClick",function(){return D.Lc(t),D.ic().emitEvent(["CARE_PLANS","DEFAULT"],null,!0)}),D.jc(4,"translate"),D.Wb(),D.Vc(5,Ke,3,5,"nz-tab",9),D.Xb(6,"nz-tab",1,2),D.ec("nzSelect",function(){return D.Lc(t),D.ic().emitEvent(["NO_ACTIVE_CARE_PLANS"])})("nzClick",function(){return D.Lc(t),D.ic().emitEvent(["NO_ACTIVE_CARE_PLANS"],null,!0)}),D.jc(8,"translate"),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(2),D.sc("nzTitle",D.kc(4,7,"FILTER.CAREPLAN.GENERAL")),D.Eb("data-filter","CARE_PLANS")("data-subFilter","DEFAULT"),D.Db(3),D.rc("ngIf",t.rpmEnabled),D.Db(1),D.sc("nzTitle",D.kc(8,9,"FILTER.NO_ACTIVE_CAREPLANS")),D.Eb("data-filter","CARE_PLANS")("data-subFilter","NO_ACTIVE_CARE_PLANS")}}function Je(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",15),D.ec("click",function(e){return D.Lc(t),D.ic(2).emitSearchKey(e)}),D.Sb(1,"app-icons",16),D.Wb()}2&t&&(D.Db(1),D.rc("originalStyle",!0))}function tn(t,e){1&t&&(D.Xb(0,"li",24),D.Xb(1,"span"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"COMMON.BULK_ADD")))}const en=function(){return["BULK_ADD_PATIENT"]};function nn(t,e){if(1&t&&(D.Xb(0,"span",17),D.Xb(1,"button",18),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",19),D.Wb(),D.Xb(5,"nz-dropdown-menu",null,20),D.Xb(7,"ul",21),D.Xb(8,"li",22),D.Xb(9,"span"),D.Xc(10),D.jc(11,"translate"),D.Wb(),D.Wb(),D.Vc(12,tn,4,3,"li",23),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(6);D.Db(1),D.rc("nzDropdownMenu",t),D.Db(1),D.Zc(" ",D.kc(3,4,"PATIENT.ADD_A_PATIENT")," \xa0"),D.Db(8),D.Yc(D.kc(11,6,"COMMON.ADD")),D.Db(2),D.rc("isFeaturePermitted",D.xc(8,en))}}const an=function(){return["ADD_PATIENT"]};function sn(t,e){if(1&t){const t=D.Yb();D.Xb(0,"span",10),D.Xb(1,"nz-input-group",11),D.Xb(2,"input",12),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().searchKey=e})("keyup",function(e){return D.Lc(t),D.ic().emitSearchKey(e)}),D.jc(3,"translate"),D.Wb(),D.Wb(),D.Vc(4,Je,2,1,"ng-template",null,13,D.Wc),D.Wb(),D.Xc(6," \xa0\xa0 "),D.Vc(7,nn,13,9,"span",14)}if(2&t){const t=D.Ic(5),e=D.ic();D.Db(1),D.rc("nzAddOnAfter",t),D.Db(1),D.sc("placeholder",D.kc(3,4,"COMMON.SEARCH")),D.rc("ngModel",e.searchKey),D.Db(5),D.rc("isFeaturePermitted",D.xc(6,an))}}const on=function(t){return{left:t}};let ln=(()=>{class t{constructor(t,e,n,i,a,s,o){this._router=t,this._routeHelperService=e,this._dataSharingService=n,this._patientsEventLogger=i,this._patientUrlService=a,this._patientStatusFilterHelperService=s,this._episodeStatusFilterHelperService=o,this.episodeBlueprintTypes=new Set,this.search=new D.n,this.filterType=new D.n,this.selectedTabHeader=new D.n,this.selectedTabIndex=0,this.rpmEnabled=!1,this._routeHelperService.isSidebarCollapsed().subscribe(t=>{this.sidebarCollapsed=t,this.resizeHeader()}),Object(Ve.fromEvent)(window,"sidebar").pipe(Object(Le.a)(50)).subscribe(t=>{var e;this.sidebarCollapsed=null===(e=null==t?void 0:t.detail)||void 0===e?void 0:e.state,this.resizeHeader()})}ngOnInit(){this.getBlueprints(),this.filter=this._patientUrlService.getParameterValue("filter"),this.subscribeToRouteChange(),this._dataSharingService.onSubTenantChange().subscribe(t=>{this.getBlueprints()})}ngOnDestroy(){var t,e;null===(t=this.$tenantConfig)||void 0===t||t.unsubscribe(),null===(e=this.header$)||void 0===e||e.unsubscribe()}resizeHeader(){this.headerLeft=this.sidebarCollapsed?"0":"150px"}subscribeToRouteChange(){this._router.events.subscribe(()=>{this.setActiveTab(),this.getBlueprints()})}refreshTabState(t,e){this.setURLParams(t,e),this.setActiveTab()}getEpisodeBlueprints(){var t;let e=new Array;return null===(t=this.tenantConfigMap)||void 0===t||t.forEach((t,n)=>{var i,a;(null===(i=this.getSelectedTenants())||void 0===i?void 0:i.includes(n))&&(null===(a=null==t?void 0:t.episodeBlueprints)||void 0===a||a.forEach(t=>{(null==t?void 0:t.archived)||e.push(t)}))}),e}setActiveTab(){var t,e,n,i,a;this.filter=this._patientUrlService.getParameterValue("filter"),this.searchKey=this._patientUrlService.getParameterValue("search");const s=this._patientUrlService.getParameterValue("sub-filter");if(this.filter&&"ALL_PATIENTS"!==this.filter&&"CONSENT_FORM"!==this.filter&&"PHYSICIAN_ORDER"!==this.filter)if("CMT"!==this.filter&&"ASSESSMENT_ACTIVITY"!==this.filter&&"ASSESSMENT_COMPLIANCE"!==this.filter)if(-1===["ON_BOARDING","DST","VITAL_DAYS_REMAINING","TMS_REMAINING","INACTIVE_PATIENTS","RPM_VITAL_COMPLIANCE"].indexOf(this.filter))if(-1===["CCM_CMT_REMAINING"].indexOf(this.filter))null===(a=this.tabs)||void 0===a||a.forEach((t,e)=>{t.nativeElement.dataset.filter===this.filter&&t.nativeElement.dataset.subfilter===s&&(this.selectedTabIndex=e)});else{const t=Object(We.b)().map(t=>t.id),e=this.getEpisodeBlueprints().filter(e=>!e.archived&&(null==e?void 0:e.enabledServiceCodes.some(e=>t.indexOf(e)>=0)));null===(i=this.tabs)||void 0===i||i.forEach((t,n)=>{t.nativeElement.dataset.id===e[0].type&&(this.selectedTabIndex=n)})}else{const t=Object(We.c)().map(t=>t.id),e=this.getEpisodeBlueprints().filter(e=>!e.archived&&(null==e?void 0:e.enabledServiceCodes.some(e=>t.indexOf(e)>=0)));null===(n=this.tabs)||void 0===n||n.forEach((t,n)=>{t.nativeElement.dataset.id===e[0].type&&(this.selectedTabIndex=n)})}else{const n=Object(We.a)().map(t=>t.id),i=null===(t=this.getEpisodeBlueprints())||void 0===t?void 0:t.filter(t=>!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(t=>n.indexOf(t)>=0)));null===(e=this.tabs)||void 0===e||e.forEach((t,e)=>{t.nativeElement.dataset.id===i[0].type&&(this.selectedTabIndex=e)})}else this.selectedTabIndex=0}getBlueprints(){this.updatingConfig=!0,this.$tenantConfigMap=this._dataSharingService.assignedTenantSettings.subscribe(t=>{var e,n;if(this.episodeBlueprints=[],this.episodeBlueprintTypes=new Set,!(null==t?void 0:t.size))return;this.tenantConfigMap=t,null==t||t.forEach((t,e)=>{var n,i;(null===(n=this.getSelectedTenants())||void 0===n?void 0:n.includes(e))&&(null===(i=null==t?void 0:t.episodeBlueprints)||void 0===i||i.forEach(t=>{(null==t?void 0:t.archived)||(this.episodeBlueprints.push(t),this.episodeBlueprintTypes.add(t.type))}))}),this.tabNames=this.createIndexAndTabNameMap(),setTimeout(()=>this.setActiveTab(),100);const i=this.episodeBlueprints.filter(t=>!t.archived&&"RPM"==t.type);this.rpmEnabled=(null==i?void 0:i.length)>0,this.consentFormEnabled=null===(e=this.episodeBlueprints)||void 0===e?void 0:e.some(t=>{var e;return null===(e=null==t?void 0:t.episodeComponent)||void 0===e?void 0:e.enableConsentForm}),this.physicianOrderEnabled=null===(n=this.episodeBlueprints)||void 0===n?void 0:n.some(t=>{var e;return null===(e=null==t?void 0:t.episodeComponent)||void 0===e?void 0:e.physicianOrderEnabled}),this.updatingConfig=!1})}getSelectedTenants(){var t;const e=localStorage.getItem(Fe.a.REQUEST_TENANT_IDS);let n;return n=Array.from(e&&""!=e&&null!=e?null==e?void 0:e.split(","):null===(t=localStorage.getItem(Fe.a.LOGGED_IN_USER_ASSIGNED_TENANTS))||void 0===t?void 0:t.split(",")),n}emitSearchKey(t){""===this.searchKey&&(this.searchKey=null),"keyup"!==t.type||this.searchKey||setTimeout(()=>this.search.emit(this.searchKey),10),"keyup"===t.type&&13!==t.keyCode||(this._patientsEventLogger.patientSearchEvent(this.searchKey),setTimeout(()=>this.search.emit(this.searchKey),10))}emitEvent(t,e,n=!1){"PHYSICIAN_ORDER"!==this.filter&&"CONSENT_FORM"!==this.filter||!t||"ALL_PATIENTS"!==t[0]||(t=[this.filter]),"PATIENT_NOT_SERVICED"===this.filter&&t&&"EPISODES"===t[0]&&"CCM"===t[1]&&(t=[this.filter,"CCM"]),"PATIENT_NOT_SERVICED"===this.filter&&t&&"EPISODES"===t[0]&&"RPM"===t[1]&&(t=[this.filter,"RPM"]),this._patientsEventLogger.patientFilterActionEvent(t,"patient_listing_tab_filter"),this.setURLParams(t,null,n),setTimeout(()=>this.filterType.emit({filterType:t,blueprintId:e}),10)}setURLParams(t,e,n=!1){const i=this._patientUrlService.getParameterValue("filter"),a=this._patientUrlService.getParameterValue("sub-filter"),s=this._patientUrlService.getParameterValue("staffId"),o=this._patientUrlService.getParameterValue("staffName"),l=this._patientUrlService.getParameterValue("physicians"),r=this._patientUrlService.getParameterValue("physiciansName"),c=this._patientUrlService.getParameterValue("search");this.searchKey=c,-1!==["ON_BOARDING","DST","VITAL_DAYS_REMAINING","TMS_REMAINING","INACTIVE_PATIENTS","RPM_VITAL_COMPLIANCE"].indexOf(i)&&a===t[1]&&(t[0]=i),-1!==["CMT","ASSESSMENT_ACTIVITY","ASSESSMENT_COMPLIANCE"].indexOf(i)&&a===t[1]&&(t[0]=i);const d={};d.filter=t[0],d.selectedEpisodeType=t[1],d["sub-filter"]=t[1],d.savedFilter=e,d.assignedStaffType=this._patientUrlService.getParameterValue("assignedStaffType"),["PHYSICIAN_ORDER","CONSENT_FORM"].some(t=>t===i)&&(d.selectedEpisodeType=this._patientUrlService.getParameterValue("selectedEpisodeType")),null!=s&&(d.staffId=s),null!=o&&(d.staffName=o),null!=l&&(d.physicians=l),null!=r&&(d.physiciansName=r),null!=c&&(d.search=c),"CONSENT_FORM"!==d.filter&&(d.consentFormStatus=null),"PHYSICIAN_ORDER"!==d.filter&&(d.physicianOrderStatus=null),d.patientStatus=this._patientStatusFilterHelperService.filterInvalidParamsForPatientStatus(this._patientUrlService.getParameterValue("patientStatus"),this.tabNames[this.selectedTabIndex]),d.episodeStatus=this._episodeStatusFilterHelperService.filterInvalidParamsForEpisodeStatus(this._patientUrlService.getParameterValue("episodeStatus"),this.tabNames[this.selectedTabIndex]);const b=this._patientUrlService.getParameterValue("physicians");null!=b&&(d.physicians=b);const u=this._patientUrlService.getParameterValue("physiciansName");null!=u&&(d.physiciansName=u);const p=this._patientUrlService.getParameterValue("siteId");null!=p&&(d.siteId=p);const h=this._patientUrlService.getParameterValue("siteName");null!=h&&(d.siteName=h),this._patientUrlService.setParameter(d,n)}createIndexAndTabNameMap(){let t=[];if(t.push("ALL_PATIENTS"),this.episodeBlueprints&&this.episodeBlueprints.length)for(let e of this.episodeBlueprints)t.push(e.type);return t.push("NO_ACTIVE_EPISODES"),t}onSelectedTabIndexChange(t){this.currentTabName=this.tabNames[t],this.selectedTabHeader.emit(this.currentTabName)}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(ke.a),D.Rb(Oe.a),D.Rb(v.a),D.Rb(Re.a),D.Rb(xe.a),D.Rb(we.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-header"]],viewQuery:function(t,e){if(1&t&&D.ed(Ge,1,D.l),2&t){let t;D.Hc(t=D.fc())&&(e.tabs=t)}},outputs:{search:"search",filterType:"filterType",selectedTabHeader:"selectedTabHeader",filtersCount:"filtersCount"},decls:9,vars:11,consts:[["ngTour","patientListHeaders",3,"nzTabBarExtraContent","nzSelectedIndex","ngStyle","nzSelectedIndexChange"],[3,"nzTitle","nzSelect","nzClick"],["filterTab",""],[4,"ngIf"],["tabExtra",""],[1,"header-spacer"],["episodes",""],[3,"nzTitle","nzSelect","nzClick",4,"ngFor","ngForOf"],["careplans",""],[3,"nzTitle","nzSelect","nzClick",4,"ngIf"],["ngTour","patientSearch"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange","keyup"],["searchIconButton",""],["ngTour","patienAddNew",4,"isFeaturePermitted"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],["ngTour","patienAddNew"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzDropdownMenu"],["stroke","2px","size","10px","color","#ffffff","name","down"],["patientExtras","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","routerLink","/patient/add"],["nz-menu-item","","routerLink","/patient/bulk-add",4,"isFeaturePermitted"],["nz-menu-item","","routerLink","/patient/bulk-add"]],template:function(t,e){if(1&t&&(D.Xb(0,"nz-tabset",0),D.ec("nzSelectedIndexChange",function(t){return e.onSelectedTabIndexChange(t)}),D.Xb(1,"nz-tab",1,2),D.ec("nzSelect",function(){return e.emitEvent(["ALL_PATIENTS"])})("nzClick",function(){return e.emitEvent(["ALL_PATIENTS"],null,!0)}),D.jc(3,"translate"),D.Wb(),D.Vc(4,qe,2,1,"ng-container",3),D.Vc(5,Qe,9,11,"ng-container",3),D.Vc(6,sn,8,7,"ng-template",null,4,D.Wc),D.Wb(),D.Sb(8,"div",5)),2&t){const t=D.Ic(7);D.rc("nzTabBarExtraContent",t)("nzSelectedIndex",e.selectedTabIndex)("ngStyle",D.yc(9,on,e.headerLeft)),D.Db(1),D.sc("nzTitle",D.kc(3,7,"FILTER.ALL_PATIENTS")),D.Eb("data-filter","ALL_PATIENTS"),D.Db(3),D.rc("ngIf",!e.updatingConfig),D.Db(1),D.rc("ngIf",!(null!=e.episodeBlueprints&&e.episodeBlueprints.length))}},directives:[j.d,Ue.e,c.r,j.a,c.q,c.p,T.a,je.c,je.b,d.d,d.u,d.x,Ye.a,X.a,E.a,ee.a,Be.d,Be.b,Be.e,He.c,He.e,b.h],pipes:[Vt.a],styles:[".search[_ngcontent-%COMP%]{background:#393939;color:var(--neutral-color);border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-tabs-tab{height:unset}[_nghost-%COMP%]     .ant-tabs-tab-active{border-bottom:4px solid var(--primary-color)!important}[_nghost-%COMP%]     .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:var(--neutral-color)}[_nghost-%COMP%]     .ant-input-group-wrapper{width:inherit}[_nghost-%COMP%]     .ant-tabs{z-index:998;position:fixed;right:0}.header-spacer[_ngcontent-%COMP%]{height:55px}a[_ngcontent-%COMP%]{float:right;color:var(--neutral-color);font-weight:700;height:30px;margin:0 15px}#username[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:3}app-icons[_ngcontent-%COMP%]{vertical-align:middle}"]}),t})();var rn=n("ds6q"),cn=n("fjzP"),dn=n("Pd5/"),bn=n.n(dn),un=n("gXqy"),pn=n("9ig3"),hn=n("5S6W"),gn=n("pe0G"),fn=n("Gskk"),mn=n("qAZ0"),vn=n("JA5x");const Sn=["chart"];function In(t,e){if(1&t&&(D.Xb(0,"h2"),D.Xc(1),D.jc(2,"date"),D.Wb()),2&t){const t=D.ic();D.Db(1),D.cd("",null==t.assessmentTrend||null==t.assessmentTrend.metaData?null:t.assessmentTrend.metaData.patient," | ",t.getAge(null==t.assessmentTrend||null==t.assessmentTrend.metaData?null:t.assessmentTrend.metaData.dateOfBirth)||""," years (",D.lc(2,4,null==t.assessmentTrend||null==t.assessmentTrend.metaData?null:t.assessmentTrend.metaData.dateOfBirth,"longDate"),"), ",null==t.assessmentTrend||null==t.assessmentTrend.metaData?null:t.assessmentTrend.metaData.gender.substring(0,1),"")}}function Dn(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-option",13),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",null==t?null:t.formId)("nzLabel",null==t?null:t.formName)}}const Cn=function(){return[16,16]};function Xn(t,e){1&t&&(D.Xb(0,"div",16),D.Xb(1,"div",25),D.Xb(2,"label",38),D.Xc(3,"Required"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Cn))}const En=function(t){return{abnormal:t}};function Tn(t,e){if(1&t&&(D.Xb(0,"span",39),D.Xc(1),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2);D.rc("ngClass",D.yc(2,En,n.validateEmail(t.nzLabel))),D.Db(1),D.Zc(" ",t.nzLabel," ")}}function zn(t,e){1&t&&(D.Xb(0,"div",16),D.Xb(1,"div",25),D.Xb(2,"label",38),D.Xc(3,"Required"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Cn))}function _n(t,e){1&t&&(D.Xb(0,"div",16),D.Xb(1,"div",25),D.Xb(2,"label",38),D.Xc(3,"A valid email address looks like example@email.com"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Cn))}function yn(t,e){1&t&&(D.Xb(0,"div",16),D.Xb(1,"div",25),D.Xb(2,"label",38),D.Xc(3,"Required"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Cn))}const On=function(t){return{error:t}};function Mn(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",14),D.Xb(2,"label",15),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().includeCMT=e}),D.Xc(3,"Include CMT Notes"),D.Wb(),D.Wb(),D.Xb(4,"div",16),D.Xb(5,"div",17),D.Xb(6,"nz-select",18),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().subjectType=e})("ngModelChange",function(e){return D.Lc(t),D.ic().subject=e}),D.Sb(7,"nz-option",19),D.Sb(8,"nz-option",20),D.Sb(9,"nz-option",21),D.Sb(10,"nz-option",22),D.Wb(),D.Wb(),D.Wb(),D.Xb(11,"div",23),D.Xb(12,"div",24),D.Xb(13,"div",25),D.Xb(14,"input",26,27),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().subject=e}),D.Wb(),D.Wb(),D.Wb(),D.Vc(16,Xn,4,2,"div",28),D.Xb(17,"div",16),D.Xb(18,"div",25),D.Xb(19,"nz-select",29,30),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().emailIds=e})("ngModelChange",function(){return D.Lc(t),D.ic().validate()}),D.Wb(),D.Vc(21,Tn,2,4,"ng-template",null,31,D.Wc),D.Wb(),D.Wb(),D.Vc(23,zn,4,2,"div",28),D.Vc(24,_n,4,2,"div",28),D.Wb(),D.Xb(25,"div",32),D.Xb(26,"div",16),D.Xb(27,"div",25),D.Xb(28,"textarea",33,34),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().note=e}),D.jc(30,"translate"),D.Wb(),D.Wb(),D.Xb(31,"div",35),D.Xb(32,"button",36),D.ec("click",function(){return D.Lc(t),D.ic().getReport()}),D.Xc(33,"Preview"),D.Wb(),D.Xc(34," \xa0 "),D.Xb(35,"button",37),D.ec("click",function(){return D.Lc(t),D.ic().sendMail()}),D.Xc(36),D.jc(37,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Vc(38,yn,4,2,"div",28),D.Ub()}if(2&t){const t=D.Ic(15),e=D.Ic(22),n=D.Ic(29),i=D.ic();D.Db(2),D.rc("ngModel",i.includeCMT),D.Db(2),D.rc("nzGutter",D.xc(24,Cn)),D.Db(2),D.rc("ngModel",i.subjectType)("ngClass",D.yc(25,On,(null==t?null:t.invalid)&&!(null==t||!t.errors.required))),D.Db(6),D.rc("nzGutter",D.xc(27,Cn))("hidden","CUSTOM"!==i.subjectType),D.Db(2),D.rc("ngModel",i.subject)("ngClass",D.yc(28,On,((null==t?null:t.dirty)||(null==t?null:t.touched))&&(null==t?null:t.invalid)&&!(null==t||!t.errors.required))),D.Db(2),D.rc("ngIf",(null==t?null:t.invalid)&&((null==t?null:t.dirty)||(null==t?null:t.touched))&&(null==t?null:t.errors.required)),D.Db(1),D.rc("nzGutter",D.xc(30,Cn)),D.Db(2),D.rc("ngModel",i.emailIds)("nzCustomTemplate",e),D.Db(4),D.rc("ngIf",!!i.errors.includes("INVALID_EMAIL")),D.Db(1),D.rc("ngIf",!!i.errors.includes("INVALID_EMAIL_FORMAT")),D.Db(2),D.rc("nzGutter",D.xc(31,Cn)),D.Db(2),D.sc("placeholder",D.kc(30,20,"ASSESSMENT.TYPE_MSG")),D.rc("ngModel",i.note)("ngClass",D.yc(32,On,((null==n?null:n.dirty)||(null==n?null:n.touched))&&(null==n?null:n.invalid)&&!(null==n||!n.errors.required))),D.Db(8),D.Yc(D.kc(37,22,"COMMON.SEND")),D.Db(2),D.rc("ngIf",(null==n?null:n.invalid)&&((null==n?null:n.dirty)||(null==n?null:n.touched))&&(null==n?null:n.errors.required))}}function An(t,e){1&t&&(D.Xb(0,"h2"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc("",D.kc(2,1,"FORMS_TREND.NO_DATA_AVAILABLE")," !!!"))}function Pn(t,e){if(1&t&&(D.Xb(0,"div",51),D.Xb(1,"h2"),D.Xc(2),D.jc(3,"formName"),D.Wb(),D.Xb(4,"h2"),D.Xc(5),D.Wb(),D.Wb(),D.Xb(6,"div",51),D.Xb(7,"label"),D.Xc(8),D.jc(9,"date"),D.Wb(),D.Xb(10,"label"),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Wb()),2&t){const t=D.ic(3);D.Db(2),D.Yc(D.kc(3,4,null==t.assessmentTrend||null==t.assessmentTrend.snapshot?null:t.assessmentTrend.snapshot.assessment)),D.Db(3),D.Yc(null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].score),D.Db(3),D.Yc(D.lc(9,6,null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].assessedOn,"d MMMM, y")),D.Db(3),D.Yc(D.kc(12,9,"FORMS_TREND.TOTAL_ASSESSMENT_SCORE"))}}function Nn(t,e){1&t&&(D.Xb(0,"h3"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"FORMS_TREND.VIEW_HISTORY")))}function Wn(t,e){1&t&&(D.Xb(0,"h3"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"FORMS_TREND.REFERENCE_RANGE")))}function Rn(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.ad("",null==t?null:t.startRange," - ",null==t?null:t.endRange,""),D.Db(2),D.Yc(null==t?null:t.identification)}}const xn=function(){return[48,16]};function wn(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",43),D.Xb(1,"div",44),D.Xb(2,"nz-card",45),D.Sb(3,"nz-card-meta",46),D.jc(4,"translate"),D.Xb(5,"nz-divider",47),D.Vc(6,Pn,13,11,"ng-template",null,48,D.Wc),D.Wb(),D.Wb(),D.Xb(8,"div",49),D.Xb(9,"nz-divider",47),D.Vc(10,Nn,3,3,"ng-template",null,50,D.Wc),D.Wb(),D.Xb(12,"div",51),D.Xb(13,"button",52),D.ec("click",function(){D.Lc(t);const e=D.ic(2);return e.clickedViewHistoryButton=1,e.getReportForLastNDays(30)}),D.Xc(14),D.jc(15,"translate"),D.Wb(),D.Xb(16,"button",52),D.ec("click",function(){D.Lc(t);const e=D.ic(2);return e.clickedViewHistoryButton=2,e.getReportForLastNDays(60)}),D.Xc(17),D.jc(18,"translate"),D.Wb(),D.Wb(),D.Xb(19,"div",51),D.Xb(20,"button",52),D.ec("click",function(){D.Lc(t);const e=D.ic(2);return e.clickedViewHistoryButton=3,e.getReportForLastNDays(90)}),D.Xc(21),D.jc(22,"translate"),D.Wb(),D.Xb(23,"button",52),D.ec("click",function(){D.Lc(t);const e=D.ic(2);return e.clickedViewHistoryButton=4,e.enableDateRangePicker=!0}),D.Xc(24),D.jc(25,"translate"),D.Wb(),D.Wb(),D.Xb(26,"div",51),D.Xb(27,"nz-range-picker",53),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic(2).dateRange=e})("ngModelChange",function(){return D.Lc(t),D.ic(2).getReportForLastNDays(0,!0)}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(28,"nz-card",54),D.Xb(29,"nz-divider",47),D.Vc(30,Wn,3,3,"ng-template",null,55,D.Wc),D.Wb(),D.Xb(32,"nz-table",56,57),D.Xb(34,"thead"),D.Xb(35,"tr"),D.Xb(36,"th"),D.Xc(37),D.jc(38,"translate"),D.Wb(),D.Xb(39,"th"),D.Xc(40),D.jc(41,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(42,"tbody"),D.Vc(43,Rn,5,3,"tr",12),D.Wb(),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=D.Ic(7),e=D.Ic(11),n=D.Ic(31),i=D.Ic(33),a=D.ic(2);D.rc("nzGutter",D.xc(35,xn)),D.Db(3),D.sc("nzTitle",D.kc(4,21,"FORMS_TREND.LAST_MEASURED")),D.Db(2),D.rc("nzText",t),D.Db(4),D.rc("nzText",e),D.Db(4),D.rc("nzType",1===a.clickedViewHistoryButton?"primary":"default"),D.Db(1),D.Yc(D.kc(15,23,"FORMS_TREND.LAST_THIRTY_DAYS")),D.Db(2),D.rc("nzType",2===a.clickedViewHistoryButton?"primary":"default"),D.Db(1),D.Yc(D.kc(18,25,"FORMS_TREND.LAST_SIXTY_DAYS")),D.Db(3),D.rc("nzType",3===a.clickedViewHistoryButton?"primary":"default"),D.Db(1),D.Yc(D.kc(22,27,"FORMS_TREND.LAST_NINETY_DAYS")),D.Db(2),D.rc("nzType",4===a.clickedViewHistoryButton?"primary":"default"),D.Db(1),D.Yc(D.kc(25,29,"FORMS_TREND.CUSTOM_RANGE")),D.Db(3),D.rc("nzAllowClear",!1)("nzDisabledDate",a.disabledEndDate)("ngModel",a.dateRange)("nzDisabled",!a.enableDateRangePicker),D.Db(2),D.rc("nzText",n),D.Db(3),D.rc("nzData",null==a.assessmentTrend||null==a.assessmentTrend.snapshot?null:a.assessmentTrend.snapshot.referenceRange),D.Db(5),D.Yc(D.kc(38,31,"FORMS_TREND.SCORE_RANGE")),D.Db(3),D.Yc(D.kc(41,33,"FORMS_TREND.RISK_CATEGORY")),D.Db(3),D.rc("ngForOf",i.data)}}function Vn(t,e){if(1&t&&(D.Xb(0,"h3"),D.Xb(1,"strong"),D.Xc(2),D.Wb(),D.Wb()),2&t){const t=D.ic(3);D.Db(2),D.Yc(t.graphTitle)}}function Ln(t,e){if(1&t){const t=D.Yb();D.Xb(0,"google-chart",62,63),D.ec("select",function(e){return D.Lc(t),D.ic(3).onGraphPointSelect(e)})("ready",function(e){return D.Lc(t),D.ic(3).onGraphReady(e)}),D.Wb()}if(2&t){const t=D.ic(3);D.rc("data",t.graphData)("options",t.graphOptions)("columns",t.columnNames)}}function kn(t,e){if(1&t&&(D.Xb(0,"div",64),D.Xb(1,"label",65),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"strong",66),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Xb(7,"label",67),D.Xc(8),D.jc(9,"translate"),D.Wb(),D.Xb(10,"strong",68),D.Xc(11),D.Wb(),D.Wb()),2&t){const t=D.ic(3);D.Db(2),D.Zc(" ",D.kc(3,4,"FORMS_TREND.ASSESSED_ON")," "),D.Db(3),D.Zc(" ",D.lc(6,6,t.currentAssessedOn,"d MMMM, y")," "),D.Db(3),D.Zc(" ",D.kc(9,9,"FORMS_TREND.TOTAL_ASSESSMENT_SCORE")," "),D.Db(3),D.Zc(" ",t.totalScoreOfQuestionnaire," ")}}function Fn(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td",74),D.Xc(6),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(t.question),D.Db(2),D.Yc(t.answer),D.Db(2),D.Yc(t.score)}}function Un(t,e){if(1&t&&(D.Xb(0,"nz-table",69,70),D.Xb(2,"thead"),D.Xb(3,"tr"),D.Xb(4,"th",71),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xb(7,"th",72),D.Xc(8),D.jc(9,"translate"),D.Wb(),D.Xb(10,"th",73),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(13,"tbody"),D.Vc(14,Fn,7,3,"tr",12),D.Wb(),D.Wb()),2&t){const t=D.Ic(1),e=D.ic(3);D.rc("nzData",e.questionnaireData)("nzShowPagination",!1)("nzFrontPagination",!1),D.Db(5),D.Yc(D.kc(6,7,"FORMS_TREND.ASSESSMENT_QUESTION")),D.Db(3),D.Yc(D.kc(9,9,"FORMS_TREND.ANSWER")),D.Db(3),D.Yc(D.kc(12,11,"FORMS_TREND.SCORE")),D.Db(3),D.rc("ngForOf",t.data)}}function jn(t,e){if(1&t&&(D.Xb(0,"nz-card"),D.Vc(1,Vn,3,1,"h3",3),D.Xb(2,"div",58),D.Vc(3,Ln,2,3,"google-chart",59),D.Wb(),D.Sb(4,"br"),D.Vc(5,kn,12,11,"div",60),D.Sb(6,"br"),D.Vc(7,Un,15,13,"nz-table",61),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf",t.graphTitle),D.Db(2),D.rc("ngIf",t.graphData),D.Db(2),D.rc("ngIf",t.questionnaireData&&t.questionnaireData.length>0),D.Db(2),D.rc("ngIf",t.questionnaireData&&t.questionnaireData.length>0)}}function Yn(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"h6",77),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Xb(4,"p",78),D.Xc(5),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(D.lc(3,2,null==t?null:t.date,"MMM-dd-yyyy HH:mm")),D.Db(3),D.Yc((null==t?null:t.notes)||"")}}function Bn(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",75),D.Xb(2,"h3",76),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Wb(),D.Vc(5,Yn,6,5,"div",12),D.Ub()),2&t){const t=D.ic(2);D.Db(3),D.Yc(D.kc(4,2,"COMMON.CMT_LOGS")),D.Db(2),D.rc("ngForOf",t.cmtDetails)}}function Hn(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",5),D.ec("click",function(){return D.Lc(t),D.ic(2).onCMTClick()}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.rc("nzSize","middle"),D.Db(1),D.Zc(" ",D.kc(2,2,"CMT.ADD")," "))}function Gn(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"br"),D.Vc(2,An,3,3,"ng-template",null,40,D.Wc),D.Vc(4,wn,44,36,"div",41),D.Sb(5,"br"),D.Vc(6,jn,8,4,"nz-card",3),D.Vc(7,Bn,6,4,"ng-container",3),D.Vc(8,Hn,3,4,"button",42),D.Ub()),2&t){const t=D.Ic(3),e=D.ic();D.Db(4),D.rc("ngIf",null==e.assessmentTrend||null==e.assessmentTrend.snapshot?null:e.assessmentTrend.snapshot.forms)("ngIfElse",t),D.Db(2),D.rc("ngIf",e.graphData),D.Db(1),D.rc("ngIf",e.cmtDetails&&e.cmtDetails.length),D.Db(1),D.rc("ngIf",e.isEpisodeIdAlreadyPresent||e.patientStatus&&"IN_PROGRESS"==e.patientStatus&&e.episodeType&&"GENERAL"==e.episodeType)}}let $n=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r,c,d,b){super(),this._patientsEventLogger=t,this._patientCommunicationModalService=e,this._formTrendService=n,this._formNewService=i,this._datePipe=a,this._notificationsService=s,this.translationService=o,this._formNamePipe=l,this._dataSharingService=r,this._router=c,this.datePipe=d,this._episodesService=b,this.strings=["FORMS_TREND.ASSESSED_ON","FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE","FORMS_TREND.ERROR_FETCHING_REPORT"],this.subjectType="Assessment Trend Report",this.subject="Assessment Trend Report",this.errors=[],this.note="",this.vitals=[],this.vitalsOriginal=[],this.listOfForms=[],this.loadingAllForms=!1,this.isEpisodeIdAlreadyPresent=!0,this.isChartLoading=!0,this.columnNames=[],this.options={hAxis:{title:"Dates - Measured On",textStyle:{fontSize:12},direction:-1},curveType:"function",pointSize:5,width:(window.innerWidth-.25*window.innerWidth).toString(),height:450,legend:{position:"bottom"},selectionMode:"multiple",animation:{startup:!0,duration:1e3}},this.cmtDetails=[],this.disabledEndDate=t=>Object(un.a)(new Date,t)<0,this.validateEmail=t=>!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),this.dateRange=[],this.enableDateRangePicker=!1,this.includeVitals=!0,this.includeCMT=!0}ngOnInit(){this.clickedViewHistoryButton=4,this.enableDateRangePicker=!0,this.dateRange[0]=Object(pn.a)(new Date),this.dateRange[1]=new Date,this.initTranslationStrings(),this.loadAllForms(),this.episodeId||(this.isEpisodeIdAlreadyPresent=!1,this.getEpisodesData())}initTranslationStrings(){this.translationService.getMultiple(...this.strings).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.translatedStrings=t})}getEpisodesData(){this._episodesService.getActiveEpisode(this.patientId,"GENERAL").subscribe(t=>{var e;(null==t?void 0:t.length)&&(this.episodeId=null===(e=t[0])||void 0===e?void 0:e.id,this.episodeType=t[0].episodeType,this.patientStatus=t[0].status)})}getFormTrend(){this.loading=!0,this.graphTitle=null;const t=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),e=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._formTrendService.getFormScoresTrend(this.patientId,this.formBlueprintId,this.formId,this.scoredAssessmentType,t,e).subscribe(t=>{this.formTrend=t,(null==t?void 0:t.graphData)?(this.loading=!1,this.populateGraphData()):this._notificationsService.error("Form Trend Report",this.translatedStrings.get("FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE"))},t=>{this.loading=!1,this._notificationsService.error("Form Trend Report",this.translatedStrings.get("FORMS_TREND.ERROR_FETCHING_REPORT"))})}getFormAssessmentTrend(){this.loading=!0,this.graphTitle=null,this.graphData=null;const t=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),e=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._formTrendService.getAssessmentReport(this.patientId,this.formBlueprintId,t,e).subscribe(t=>{var e;if(this.assessmentTrend=t,this.updateCMT(),0==(null===(e=null==t?void 0:t.snapshot)||void 0===e?void 0:e.forms.length))return this._notificationsService.error("Form Trend Report",this.translatedStrings.get("FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE")),void(this.loading=!1);this.populateGraphData(),this.loading=!1},t=>{this.loading=!1,this._notificationsService.error("Form Trend Report",this.translatedStrings.get("FORMS_TREND.ERROR_FETCHING_REPORT"))})}updateCMT(){var t;this.cmtDetails=(null===(t=this.assessmentTrend)||void 0===t?void 0:t.patientCommunications)||[]}populateGraphData(){var t,e,n,i,a,s,o,l,r;this.graphData=null===(n=null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.snapshot)||void 0===e?void 0:e.forms)||void 0===n?void 0:n.map(t=>[this._datePipe.transform(t.assessedOn,"MMM d"),t.score]),this.graphTitle=this._datePipe.transform(null===(a=null===(i=this.assessmentTrend)||void 0===i?void 0:i.metaData)||void 0===a?void 0:a.startDate,"mediumDate")+" - "+this._datePipe.transform(null===(o=null===(s=this.assessmentTrend)||void 0===s?void 0:s.metaData)||void 0===o?void 0:o.endDate,"mediumDate"),this.columnNames=["Assessed On","Assessment Score"],this.graphOptions={titlePosition:"none",hAxis:{title:this.translatedStrings.get("FORMS_TREND.ASSESSED_ON"),titleTextStyle:{bold:!0,italic:!1},direction:-1},vAxis:{title:this._formNamePipe.transform(null===(r=null===(l=this.assessmentTrend)||void 0===l?void 0:l.snapshot)||void 0===r?void 0:r.assessment),titleTextStyle:{bold:!0,italic:!1},gridlines:{count:this.graphData.size}},legend:{position:"none"},pointSize:3,interpolateNulls:!0}}onGraphReady(t){var e,n,i,a,s,o,l;null===(n=null===(e=this.chart)||void 0===e?void 0:e.chart)||void 0===n||n.setSelection([{row:0,column:1}]),this.currentAssessedOn=null===(a=null===(i=this.formTrend)||void 0===i?void 0:i.graphData[0])||void 0===a?void 0:a.assessedOn,this.showAssessmentQuestions(null===(l=null===(o=null===(s=this.formTrend)||void 0===s?void 0:s.graphData)||void 0===o?void 0:o[0])||void 0===l?void 0:l.formId)}onGraphPointSelect(t){var e,n,i,a,s,o,l,r,c,d,b;let u=null===(n=null===(e=null==t?void 0:t.selection)||void 0===e?void 0:e[0])||void 0===n?void 0:n.row;this.currentAssessedOn=null===(s=null===(a=null===(i=this.assessmentTrend)||void 0===i?void 0:i.snapshot)||void 0===a?void 0:a.forms[u])||void 0===s?void 0:s.assessedOn,this.questionnaireData=null===(r=null===(l=null===(o=this.assessmentTrend)||void 0===o?void 0:o.snapshot)||void 0===l?void 0:l.forms[u])||void 0===r?void 0:r.questions,this.totalScoreOfQuestionnaire=null===(b=null===(d=null===(c=this.assessmentTrend)||void 0===c?void 0:c.snapshot)||void 0===d?void 0:d.forms[u])||void 0===b?void 0:b.score}getReportForLastNDays(t,e){this.graphData=null,e||(this.enableDateRangePicker=!1,this.dateRange[0]=bn()(new Date,t-1),this.dateRange[1]=new Date),this.getFormAssessmentTrend()}getAge(t){const e=Date.now()-new Date(t).getTime(),n=new Date(e);return Math.abs(n.getUTCFullYear()-1970)}showAssessmentQuestions(t){var e,n,i;t?(this.formId=t,this.questionnaireData=null===(e=this.formTrend)||void 0===e?void 0:e.formQuestionnaireDataMap[t],this.totalScoreOfQuestionnaire=null===(i=null===(n=this.formTrend)||void 0===n?void 0:n.form)||void 0===i?void 0:i.assessmentScore):(this.questionnaireData=[],this.totalScoreOfQuestionnaire=0)}showEmailInput(){this.includeVitals=!this.includeVitals,this.includeCMT=!this.includeCMT,this._dataSharingService.tenantSettings.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e;t&&((null===(e=null==t?void 0:t.tenantSupport)||void 0===e?void 0:e.internalEmail)&&(this.emailIds||(this.emailIds=[]),this.emailIds.push(t.tenantSupport.internalEmail)),this.isEmailVisible=!this.isEmailVisible)}),this.initialiseNoteString()}initialiseNoteString(){const t=localStorage.getItem("loggedInUserName");this.note=`Hi,\n\nPlease find attached the assessment report for patient: ${this.patientName}\n\nThe report has been shared with you by ${t}`}validate(){var t,e,n,i,a;this.errors=[];const s=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return(null===(t=this.emailIds)||void 0===t?void 0:t.length)||this.errors.push("INVALID_EMAIL"),null===(e=this.emailIds)||void 0===e||e.forEach(t=>{var e;s.test(t)||-1!==(null===(e=this.errors)||void 0===e?void 0:e.findIndex(t=>"INVALID_EMAIL_FORMAT"===t))||this.errors.push("INVALID_EMAIL_FORMAT")}),(null===(n=this.subject)||void 0===n?void 0:n.length)||this.errors.push("INVALID_SUBJECT"),(null===(i=this.note)||void 0===i?void 0:i.length)||this.errors.push("INVALID_NOTE"),!(null===(a=this.errors)||void 0===a?void 0:a.length)}sendMail(){this.validate()&&this.getReport("share")}createGenerateVitalHistoryReportRequest(t,e,n,i,a,s,o){return{patientId:t,vitalType:e,startDate:this._datePipe.transform(n,"yyyy-MM-dd"),endDate:this._datePipe.transform(i,"yyyy-MM-dd"),emailIds:a,subject:s,note:o}}getDateForReport(t){return this._datePipe.transform(t,"yyyy-MM-dd")}getReport(t="preview"){var e;const n=this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/printable/bhi-snapshot/"+this.patientId],{queryParams:{startDate:this.getDateForReport(this.dateRange[0]),endDate:this.getDateForReport(this.dateRange[1]),action:t,email:null===(e=this.emailIds)||void 0===e?void 0:e.join(","),subject:this.subject,note:this.note,includeCMT:this.includeCMT,formId:this.formId,formBlueprintId:this.formBlueprintId,scoredAssessmentType:this.scoredAssessmentType,episodeId:this.episodeId,cmtStart:this.dateRange[0].getTime(),cmtEnd:this.dateRange[1].getTime()}}));window.open(n,"_blank"),"preview"!==t&&(this.emailIds=[])}loadAllForms(){this.loadingAllForms=!0,this._formNewService.getForms(0,100,"").subscribe(t=>{var e;let n=[];t.data.forms.obj.forEach(t=>{"SMS_ASSESSMENT"!=t.type&&n.push({formId:t._id,formName:t.title})}),this.listOfForms=n.sort((t,e)=>t.formName.localeCompare(e.formName)),this.formBlueprintId=this.formBlueprintId||(null===(e=this.listOfForms)||void 0===e?void 0:e[0].formId),this.loadingAllForms=!1,this.refresh()},t=>{this.loadingAllForms=!1})}getFullDate(t){const e=new Date(t);return this.datePipe.transform(e,"MMM d, h:mm a")}refresh(){this.formId=null,this.getFormAssessmentTrend()}onCMTClick(){var t,e,n,i;this._patientsEventLogger.patientActionEvent(this.patientId,"add_cmt"),this._patientCommunicationModalService.createCMTModal(null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData)||void 0===e?void 0:e.patient,this.patientId,this.episodeId,ye.a.CARE_MANAGEMENT_TIME,null,null,new Date(null===(i=null===(n=this.assessmentTrend)||void 0===n?void 0:n.metaData)||void 0===i?void 0:i.endDate).getTime()).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.refresh()})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(v.a),D.Rb(_e.a),D.Rb(cn.a),D.Rb(gn.a),D.Rb(c.e),D.Rb(A.b),D.Rb(Pe.a),D.Rb(hn.a),D.Rb(Oe.a),D.Rb(b.g),D.Rb(c.e),D.Rb(fn.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-form-trend"]],viewQuery:function(t,e){if(1&t&&D.ed(Sn,1),2&t){let t;D.Hc(t=D.fc())&&(e.chart=t.first)}},inputs:{patientId:"patientId",formBlueprintId:"formBlueprintId",formId:"formId",patientName:"patientName",vitalType:"vitalType",episodeId:"episodeId"},features:[D.Cb([c.e,hn.a]),D.Ab],decls:21,vars:17,consts:[[3,"nzSpinning"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","14"],[4,"ngIf"],["nz-col","","id","header-actions",3,"nzSpan"],["nz-button","","nzType","primary",1,"report-actions",3,"nzSize","click"],["size","10px","color","#ffffff","name","download"],["nz-button","","nzType","primary",1,"actions",3,"nzSize","click"],["size","10px","color","#ffffff","name","share",1,"share-icon",3,"originalStyle"],["nz-col","","nzSpan","5"],["nz-typography","",1,"minor-headings"],["id","blueprint-selector",3,"ngModel","nzLoading","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-col","","nzSpan","14","id","shareOptions"],["nz-checkbox","",2,"margin-left","8px",3,"ngModel","ngModelChange"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","18",1,"custom-dropdown"],["nzPlaceHolder","Subject",3,"ngModel","ngClass","ngModelChange"],["nzValue","Assessment Trend Report","nzLabel","Assessment Trend Report"],["nzValue","Notification from Cooey Health","nzLabel","Notification from Cooey Health"],["nzValue","Escalation from Cooey Health","nzLabel","Escalation from Cooey Health"],["nzValue","CUSTOM","nzLabel","Custom"],[1,"mail"],["nz-row","",3,"nzGutter","hidden"],["nz-col","","nzSpan","18"],["required","","nz-input","","placeholder","Subject","id","subjectModel","name","subjectModel",3,"ngModel","ngClass","ngModelChange"],["subjectModel","ngModel"],["nz-row","",3,"nzGutter",4,"ngIf"],["id","emailModel","name","emailModel","nzMode","tags","nzPlaceHolder","Email IDs",3,"ngModel","nzCustomTemplate","ngModelChange"],["emailModel","ngModel"],["defaultTemplate",""],[1,"preview-area"],["required","","rows","6","nz-input","","id","noteModel","name","noteModel",3,"placeholder","ngModel","ngClass","ngModelChange"],["noteModel","ngModel"],["nz-col","","nzSpan","6","id","share"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-typography","","nzType","danger"],[3,"ngClass"],["noDataAvailable",""],["class","parent-div","nz-row","",3,"nzGutter",4,"ngIf","ngIfElse"],["nz-button","","nzType","primary","class","report-actions",3,"nzSize","click",4,"ngIf"],["nz-row","",1,"parent-div",3,"nzGutter"],["nz-col","","nzSpan","12"],[1,"last-measured-card"],[3,"nzTitle"],["nzType","vertical",3,"nzText"],["text",""],[1,"view-history-div"],["viewHistory",""],[1,"card-data"],["nz-button","",3,"nzType","click"],["nzFormat","MMM d, y",3,"nzAllowClear","nzDisabledDate","ngModel","nzDisabled","ngModelChange"],["nz-col","","nzOffset","1","nzSpan","10"],["heading",""],["nzSize","small","nzShowPagination","false",3,"nzData"],["referenceRangeTable",""],["id","curve_chart"],["style","width: 100%;","type","LineChart","dynamicResize","true",3,"data","options","columns","select","ready",4,"ngIf"],["nz-row","",4,"ngIf"],["width","100%","nzSize","middle",3,"nzData","nzShowPagination","nzFrontPagination",4,"ngIf"],["type","LineChart","dynamicResize","true",2,"width","100%",3,"data","options","columns","select","ready"],["chart",""],["nz-row",""],["nz-col","","nzOffset","1","nzSpan","4"],["nz-col","","nzSpan","6"],["nz-col","","nzOffset","4","nzSpan","6"],["nz-col","","nzSpan","3"],["width","100%","nzSize","middle",3,"nzData","nzShowPagination","nzFrontPagination"],["assessmentDataTable",""],["nzWidth","60%"],["nzWidth","25%"],["nzWidth","15%",2,"text-align","center !important"],[2,"text-align","center"],["id","heading-wrapper"],["id","heading"],["nz-typography","",1,"sub-heading"],[1,"content"]],template:function(t,e){1&t&&(D.Xb(0,"nz-spin",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Vc(3,In,3,7,"h2",3),D.Wb(),D.Xb(4,"div",4),D.Xb(5,"button",5),D.ec("click",function(){return e.getReport("download")}),D.Sb(6,"app-icons",6),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Xb(9,"button",7),D.ec("click",function(){return e.showEmailInput()}),D.Sb(10,"app-icons",8),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Xc(13," \xa0\xa0 "),D.Wb(),D.Wb(),D.Xb(14,"div",9),D.Xb(15,"h5",10),D.Xc(16,"Assessment Forms:"),D.Wb(),D.Xb(17,"nz-select",11),D.ec("ngModelChange",function(t){return e.formBlueprintId=t})("ngModelChange",function(){return e.refresh()}),D.Vc(18,Dn,2,2,"ng-container",12),D.Wb(),D.Wb(),D.Vc(19,Mn,39,34,"ng-container",3),D.Vc(20,Gn,9,5,"ng-container",3),D.Wb()),2&t&&(D.rc("nzSpinning",e.loading),D.Db(3),D.rc("ngIf",null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient),D.Db(1),D.rc("nzSpan",10),D.Db(1),D.rc("nzSize","middle"),D.Db(2),D.Zc(" \xa0 ",D.kc(8,13,"PATIENTS.REPORTDOWNLOAD")," "),D.Db(2),D.rc("nzSize","middle"),D.Db(1),D.rc("originalStyle",!0),D.Db(1),D.Zc(" \xa0 ",D.kc(12,15,"PATIENTS.REPORTSHARE")," "),D.Db(6),D.rc("ngModel",e.formBlueprintId)("nzLoading",e.loadingAllForms),D.Db(1),D.rc("ngForOf",e.listOfForms),D.Db(1),D.rc("ngIf",e.isEmailVisible),D.Db(1),D.rc("ngIf",e.assessmentTrend))},directives:[mn.a,k.c,k.a,c.q,X.a,E.a,T.a,ee.a,V.a,x.d,d.u,d.x,c.p,x.a,U.a,c.o,je.b,d.d,d.C,vn.a,vn.c,L.a,te.a,te.c,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,o.a],pipes:[Vt.a,c.e,hn.a],styles:[".card-data[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.card-data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2px}.ant-card-meta-title[_ngcontent-%COMP%]{margin-left:10px}nz-divider[_ngcontent-%COMP%]{border-left:2px solid var(--primary-color);width:100%;display:block}[_nghost-%COMP%]     .ant-divider-inner-text{display:block}nz-card-meta[_ngcontent-%COMP%]{margin:0 0 10px 10px}[_nghost-%COMP%]     d .ant-card-body{padding:7px;width:100%;height:100px}nz-card[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:30px;padding:0!important}.last-measured-card[_ngcontent-%COMP%]{height:110px;padding:7px 17px!important}.last-measured-card[_ngcontent-%COMP%]     .ant-card-body{padding:0}nz-divider[_ngcontent-%COMP%]{height:1.5em;padding-left:3px}[_nghost-%COMP%]     .ant-divider-inner-text{padding-left:2px}.last-measured-card[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{height:4em}nz-table[_ngcontent-%COMP%]{font-weight:700;border:none;border-spacing:0;border-collapse:collapse}[_nghost-%COMP%]     .ant-table table{border-spacing:0;border-collapse:collapse}.view-history-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-content:space-between;height:150px;width:80%;margin-left:5%}.view-history-div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:120px;border-radius:50px;overflow:hidden}[_nghost-%COMP%]     .ant-table-tbody>tr{border-spacing:0}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border:none}[_nghost-%COMP%]     .ant-table-thead>tr>th{height:auto!important}[_nghost-%COMP%]     .ant-table-small .ant-table-thead>tr>th{background-color:transparent!important;color:#000;border:none}[_nghost-%COMP%]     .ant-table-middle .ant-table-thead>tr>th{padding:4px 8px}[_nghost-%COMP%]     .ant-table-container table>thead>tr:first-child th:last-child, [_nghost-%COMP%]     .ant-table-thead>tr>th:first-child{border-radius:0!important}[_nghost-%COMP%]     .ant-col{padding-top:0!important}.parent-div[_ngcontent-%COMP%]{height:300px}.parent-div[_ngcontent-%COMP%] > nz-card[_ngcontent-%COMP%]{overflow-y:auto;max-height:96%}.report-actions[_ngcontent-%COMP%]{font-size:12px}#header-actions[_ngcontent-%COMP%]{text-align:center}.custom-dropdown[_ngcontent-%COMP%]{margin-top:23px}.mail[_ngcontent-%COMP%], .preview-area[_ngcontent-%COMP%]{margin-top:12px}#share[_ngcontent-%COMP%]{margin-top:100px}.actions[_ngcontent-%COMP%]{margin-left:16px}#shareOptions[_ngcontent-%COMP%]{margin-left:60%;position:relative;bottom:29px}#heading-wrapper[_ngcontent-%COMP%]{border-left:2px solid var(--primary-color);padding-left:2.5%}#heading[_ngcontent-%COMP%]{font-size:16px}.sub-heading[_ngcontent-%COMP%]{font-size:12px;color:#949494}.content[_ngcontent-%COMP%]{font-size:12px;color:var(--light-black)}.share-icon[_ngcontent-%COMP%]{position:relative;top:1px}"]}),t})(),Zn=(()=>{class t{constructor(t){this._modalService=t}createModal(t,e,n,i,a){return this._modalService.create({nzContent:$n,nzComponentParams:{patientId:t,formBlueprintId:e,formId:n,patientName:i,episodeId:a},nzWidth:"900px",nzBodyStyle:{padding:"35px",borderRadius:"15px",backgroundColor:"#f2f2f2"},nzFooter:null})}}return t.\u0275fac=function(e){return new(e||t)(D.bc(C.f))},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var qn=n("5mgp");const Kn={steps:[{stepName:"patientListHeaders",title:"Patient Header",description:"Find all patients categorized under different types of episodes and statuses.",options:{smoothScroll:!0,placement:"right",className:"left-aligned-center"}},{stepName:"patientSearch",title:"Search",description:"Searching for a specific patient? Try searching here using Name, Phone number or E-mail.",options:{smoothScroll:!0,placement:"left",className:"right-aligned-center"}},{stepName:"patienAddNew",title:"Add New Patient",description:"Use this to on-board a new patient into the system.",options:{smoothScroll:!0,placement:"left",continueIfTargetAbsent:!0,className:"right-aligned"}},{stepName:"patientFilterDesc",title:"Applied Filters",description:"Applied a filter? The descriptions are here!",options:{smoothScroll:!0,placement:"right",continueIfTargetAbsent:!0,className:"left-aligned-center"}},{stepName:"patientList",title:"Patients Info",description:"Find all the info related to patients in this table - Vitals, TMS, Assessment, Reports etc.",options:{smoothScroll:!0,placement:"right",className:"right-aligned"},showHelpRedirect:!0}],tourOptions:{backdrop:!0,customTemplate:!0}};var Qn=n("MXg9"),Jn=n("eJ3O"),ti=n("wpKq"),ei=n("iCh7"),ni=n("zM63"),ii=n("jPNr"),ai=n("mrSG");let si=(()=>{class t{constructor(t,e){this._modalRef=t,this._translationService=e}ngOnInit(){this._translationService.get(this.message).subscribe(t=>{this.translatedMessage=t})}viewed(){this._modalRef.close()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.e),D.Rb(Pe.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-feature-popup"]],inputs:{message:"message",featureName:"featureName"},decls:3,vars:1,consts:[["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(D.Xc(0),D.Xb(1,"button",0),D.ec("click",function(){return e.viewed()}),D.Xc(2,"Okay, got it"),D.Wb()),2&t&&D.Zc("",e.translatedMessage,"\n")},directives:[X.a,E.a,T.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto;text-align:left;font-size:12px;line-height:1.25}button[_ngcontent-%COMP%]{margin:7px auto}"]}),t})();var oi=n("9/EM"),li=n("EhJz"),ri=n("/KA4"),ci=n("cA1j");let di=(()=>{class t{constructor(t,e,n,i){this.elementRef=t,this.renderer=e,this._modalService=n,this.featureHighlightService=i,this.hideElement=!1,this.cacheIdentifier="_popup"}ngAfterViewInit(){var t,e,n,i,a;let s=this.featureHighlightService.getFeatureHighlightConfig(this.featureKey);if(!s||s.disabled)return void this.hide();if("true"!==localStorage.getItem(this.featureKey+this.cacheIdentifier)){let t=Object(oi.a)(new Date(s.releaseDate),s.expiresInDays);Object(li.a)(new Date,t)&&(localStorage.setItem(this.featureKey+this.cacheIdentifier,"true"),this.hide())}if("true"===localStorage.getItem(this.featureKey+this.cacheIdentifier))return void this.hide();let o=this.elementRef.nativeElement;this.renderer.setStyle(o,"z-index",1001),this.renderer.setStyle(o,"pointer-events","none"),this._modalService.create({nzContent:si,nzComponentParams:{message:s.message,featureName:this.featureKey},nzClosable:!1,nzFooter:null,nzWidth:"230px",nzBodyStyle:{padding:"12px"},nzMaskClosable:!1,nzStyle:{position:(null===(t=this.position)||void 0===t?void 0:t.position)||"relative",top:null===(e=this.position)||void 0===e?void 0:e.top,left:null===(n=this.position)||void 0===n?void 0:n.left,right:null===(i=this.position)||void 0===i?void 0:i.right,bottom:null===(a=this.position)||void 0===a?void 0:a.bottom}}).afterClose.subscribe(()=>{localStorage.setItem(this.featureKey+this.cacheIdentifier,"true"),this.renderer.removeStyle(o,"z-index"),this.renderer.removeStyle(o,"pointer-events"),this.hide()})}hide(){this.hideElement&&this.renderer.setStyle(this.elementRef.nativeElement,"display","none")}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(D.l),D.Rb(D.F),D.Rb(C.f),D.Rb(ci.a))},t.\u0275dir=D.Mb({type:t,selectors:[["","featureHighlight",""]],inputs:{position:"position",featureKey:"featureKey",hideElement:"hideElement"}}),Object(ai.b)([Object(ri.a)(),Object(ai.c)("design:type",Boolean)],t.prototype,"hideElement",void 0),t})();var bi=n("SKKP"),ui=n("Beax"),pi=n("U2hf"),hi=n("vduv");let gi=(()=>{class t{constructor(t){this._element=t,this.checkLastMeasuredVitalsWidget=t=>{var e,n;(null===(e=this.episodeBlueprints)||void 0===e?void 0:e.length)||"CARE_PLANS"!==this.selectedFilterTab[0]?this.selectedEpisodeBlueprint&&(null===(n=this.selectedEpisodeBlueprint)||void 0===n?void 0:n.filter(e=>-1!==e.enabledServiceCodes.findIndex(e=>e===t))).length>0?this.enableFeature():this.disableFeature():this.enableFeature()},this.checkByEpisodeBlueprint=t=>{var e;this.selectedEpisodeBlueprint&&(null===(e=this.selectedEpisodeBlueprint)||void 0===e?void 0:e.filter(e=>-1!==e.enabledServiceCodes.findIndex(e=>e===t))).length>0?this.enableFeature():this.disableFeature()},this.selectedFilterTab=[]}set widget(t){this.widgetEnabled=t,this.checkState()}set selectedFilter(t){this.selectedFilterTab=t,this.checkState()}set blueprints(t){var e;this.episodeBlueprints=t,this.setSelectedBlueprint(),(null===(e=this.episodeBlueprints)||void 0===e?void 0:e.length)||this.checkState()}set episodeType(t){this.selectedEpisodeType=t,this.setSelectedBlueprint(),this.checkState()}setSelectedBlueprint(){var t,e;this.selectedEpisodeBlueprint=null===(e=null===(t=this.episodeBlueprints)||void 0===t?void 0:t.filter(t=>!t.archived))||void 0===e?void 0:e.filter(t=>t.type===this.selectedEpisodeType)}checkState(){switch(this.widgetEnabled){case"VITAL_ADHERENCE":this.checkByEpisodeBlueprint("99454");break;case"TMS_ADHERENCE":this.checkByEpisodeBlueprint("99457");break;case"ADDITIONAL_TMS_ADHERENCE":this.checkByEpisodeBlueprint("99458");break;case"ADDITIONAL_TMS_B_ADHERENCE":this.checkByEpisodeBlueprint("99458B");break;case"CMT_ADHERENCE":this.checkByEpisodeBlueprint("99484");break;case"LAST_MEASURED_VITALS":this.checkLastMeasuredVitalsWidget("99454");break;case"NON_COMPLEX_TMS":this.checkByEpisodeBlueprint("99490");break;case"NON_COMPLEX_TMS_PHYSICIAN":this.checkByEpisodeBlueprint("99491");break;case"NON_COMPLEX_ADDITIONAL_TMS":this.checkByEpisodeBlueprint("99439");break;case"NON_COMPLEX_ADDITIONAL_TMS_B":this.checkByEpisodeBlueprint("99439B");break;case"COMPLEX_TMS":this.checkByEpisodeBlueprint("99487");break;case"COMPLEX_ADDITIONAL_TMS":this.checkByEpisodeBlueprint("99489")}}enableFeature(){this._element.nativeElement.style.display="revert"}disableFeature(){this._element.nativeElement.style.display="none"}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(D.l))},t.\u0275dir=D.Mb({type:t,selectors:[["","episodeWidgetEnabled",""]],inputs:{widget:["episodeWidgetEnabled","widget"],selectedFilter:"selectedFilter",blueprints:"blueprints",episodeType:"episodeType"}}),t})();var fi=n("nJia"),mi=n("wjar"),vi=n("0zwC"),Si=n("Edj7"),Ii=n("Ujc4"),Di=n("FVa/"),Ci=n("GSAy"),Xi=n("QlLE");const Ei=["conversationContainer"];function Ti(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"SMS.NO_MESSAGES")," "))}function zi(t,e){}function _i(t,e){if(1&t&&(D.Xb(0,"nz-empty",14),D.Vc(1,Ti,3,3,"ng-template",null,15,D.Wc),D.Vc(3,zi,0,0,"ng-template",null,16,D.Wc),D.Wb()),2&t){const t=D.Ic(2),e=D.Ic(4);D.rc("nzNotFoundContent",t)("nzNotFoundFooter",e)}}function yi(t,e){if(1&t&&(D.Xb(0,"div",19),D.Sb(1,"nz-badge",20),D.Xb(2,"p",21),D.Xc(3),D.Wb(),D.Xb(4,"p",22),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("nzDot",!t.read),D.Db(2),D.Zc(" ",null==t?null:t.message," "),D.Db(2),D.Zc(" ",D.lc(6,3,null==t?null:t.createdOn,"medium")," ")}}function Oi(t,e){if(1&t&&(D.Xb(0,"div",23),D.Sb(1,"nz-badge",24),D.Xb(2,"p",25),D.Xc(3),D.Wb(),D.Xb(4,"p",26),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("nzDot",!t.read),D.Db(2),D.Zc(" ",null==t?null:t.message," "),D.Db(2),D.Zc(" ",D.lc(6,3,null==t?null:t.createdOn,"medium")," ")}}function Mi(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"div",3),D.Xb(2,"div",4),D.Vc(3,yi,7,6,"div",17),D.Sb(4,"div"),D.Vc(5,Oi,7,6,"div",18),D.Wb(),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(3),D.rc("ngIf","SENT"==t.status),D.Db(2),D.rc("ngIf","RECEIVED"==t.status)}}function Ai(t,e){if(1&t&&(D.Xb(0,"div"),D.Vc(1,_i,5,2,"nz-empty",12),D.Vc(2,Mi,6,2,"div",13),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",null!=t.conversations&&0==t.conversations.length),D.Db(1),D.rc("ngForOf",t.conversations)}}let Pi=(()=>{class t{constructor(t,e,n,i,a){this.smsService=t,this._modalService=e,this._modalRef=n,this.translationService=i,this._notificationsService=a,this.conversations=new Array,this.page=1,this.strings=["MENU.PATIENTS","SMS.SMS_SENT_SUCCESSFULLY"],this.refresh=!1,this.unReadMessagesPresent=!0,this.translationService.getMultiple(...this.strings).subscribe(t=>{this.translatedStrings=t})}ngOnDestroy(){this.close()}ngOnInit(){this.loadingConversation=!0,this.userId=localStorage.getItem("loggedInUser"),this.getConversations()}ngAfterViewChecked(){this.scrollToBottom()}onScroll(){let t=this.conversationContainer.nativeElement;this.disableScrollDown=!(this.disableScrollDown&&t.scrollHeight-t.scrollTop===t.clientHeight)}scrollToBottom(){if(!this.disableScrollDown)try{this.conversationContainer.nativeElement.scrollTop=this.conversationContainer.nativeElement.scrollHeight}catch(t){}}getConversations(){this.smsService.getConversations(this.patientId,0,100).subscribe(t=>{this.conversations=[...t].reverse(),this.loadingConversation=!1;const e=t.filter(t=>!t.read);this.unReadMessagesPresent=0!=e.length})}sendSMS(){this._modalService.create({nzContent:Ci.a,nzComponentParams:{patientList:[this.patient],showFilter:!1,usePrimaryNumber:this.usePrimaryNumber},nzStyle:{width:"800px"},nzBodyStyle:{background:"rgb(239, 242, 240)"},nzClosable:!0,nzFooter:null}).afterClose.subscribe(t=>{t.smsSent&&(this._notificationsService.success(this.translatedStrings.get("MENU.PATIENTS"),this.translatedStrings.get("SMS.SMS_SENT_SUCCESSFULLY")),this.conversations.push(t))})}markasRead(){const t=this.getMessageIds();this.smsService.markAsRead({messageIds:t}).subscribe(t=>{this.getConversations(),this.refresh=!0})}getMessageIds(){const t=new Array;return this.conversations.forEach(e=>t.push(e.id)),t}close(t=!0){this._modalRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(Di.a),D.Rb(C.f),D.Rb(C.e),D.Rb(Pe.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-conversations"]],viewQuery:function(t,e){if(1&t&&D.ed(Ei,1),2&t){let t;D.Hc(t=D.fc())&&(e.conversationContainer=t.first)}},inputs:{patientId:"patientId",patientName:"patientName",patient:"patient",usePrimaryNumber:"usePrimaryNumber"},decls:21,vars:14,consts:[["id","wrapper","cdkDrag","","cdkDragRootElement",".ant-modal-content","cdkDragHandle",""],["id","heading"],["size","16px","name","reload",1,"refresh-btn",3,"click"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","24"],[1,"conversation-layout",3,"scroll"],["conversationContainer",""],[4,"ngIf"],["nz-row","","nzGutter","16",1,"footer"],["nz-col","","nzSpan","12"],["nz-button","","nzType","default","nzShape","round",1,"sms-actions",3,"nzSize","disabled","click"],["nz-button","","nzType","primary","nzShape","round",1,"sms-actions",3,"nzSize","click"],["class","no-data","nzNotFoundImage","https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",3,"nzNotFoundContent","nzNotFoundFooter",4,"ngIf"],[4,"ngFor","ngForOf"],["nzNotFoundImage","https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",1,"no-data",3,"nzNotFoundContent","nzNotFoundFooter"],["contentTpl",""],["footerTpl",""],["class","message-box right-message-box",4,"ngIf"],["class","message-box left-message-box",4,"ngIf"],[1,"message-box","right-message-box"],[1,"badge","right-badge",3,"nzDot"],[1,"conversation-message","right-message"],[1,"conversation-time","conversation-time-right"],[1,"message-box","left-message-box"],[1,"badge","left-badge",3,"nzDot"],[1,"conversation-message","left-message"],[1,"conversation-time","conversation-time-left"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"strong",1),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"app-icons",2),D.ec("click",function(){return e.getConversations()}),D.Wb(),D.Sb(5,"br"),D.Sb(6,"br"),D.Xb(7,"div",3),D.Xb(8,"div",4),D.Xb(9,"div",5,6),D.ec("scroll",function(){return e.onScroll()}),D.Vc(11,Ai,3,2,"div",7),D.Wb(),D.Wb(),D.Wb(),D.Xb(12,"div",8),D.Xb(13,"div",9),D.Xb(14,"button",10),D.ec("click",function(){return e.markasRead()}),D.Xc(15),D.jc(16,"translate"),D.Wb(),D.Wb(),D.Xb(17,"div",9),D.Xb(18,"button",11),D.ec("click",function(){return e.sendSMS()}),D.Xc(19),D.jc(20,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.ad(" ",D.kc(3,8,"SMS.MESSAGE_HISTORY")," : ",e.patientName," "),D.Db(9),D.rc("ngIf",!e.loadingConversation),D.Db(3),D.rc("nzSize","medium")("disabled",!e.unReadMessagesPresent),D.Db(1),D.Zc(" ",D.kc(16,10,"SMS.MARK_AS_READ")," "),D.Db(3),D.rc("nzSize","medium"),D.Db(1),D.Zc(" ",D.kc(20,12,"SMS.RESPOND")," "))},directives:[ee.a,k.c,k.a,c.q,X.a,E.a,T.a,c.p,Xi.b,bi.a],pipes:[Vt.a,c.e],styles:["[_nghost-%COMP%]     .ant-modal-content{background-color:#eff2f0 0 0 no-repeat padding-box}#wrapper[_ngcontent-%COMP%]{font-size:12px}#heading[_ngcontent-%COMP%]{padding-left:1%;font-size:14px;font-weight:600;border-left:3px solid var(--primary-color)}strong[_ngcontent-%COMP%]{font-size:12px}.conversation-layout[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:6px;opacity:1;width:100%;height:400px;padding:1px 20px 20px;overflow:scroll}.message-box[_ngcontent-%COMP%]{opacity:1;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:60%;margin-top:20px}.right-message-box[_ngcontent-%COMP%]{float:right;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid #dbdbdb;border-radius:15px 15px 0 15px;padding:10px}.right-message[_ngcontent-%COMP%]{color:var(--light-black)}.conversation-message[_ngcontent-%COMP%]{text-align:left;font:normal normal normal 12px/18px Nunito;letter-spacing:0;opacity:1;margin-bottom:0}.left-message[_ngcontent-%COMP%]{color:var(--neutral-color);flex:1}.left-message-box[_ngcontent-%COMP%]{float:left;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:15px 15px 15px 0;padding:10px}.conversation-time[_ngcontent-%COMP%]{font:normal normal 600 8px/18px Nunito;letter-spacing:0;opacity:1;margin-bottom:0}.conversation-time-left[_ngcontent-%COMP%]{text-align:right;color:var(--neutral-color)}.conversation-time-right[_ngcontent-%COMP%]{text-align:right;color:#969494;margin-bottom:0}.footer[_ngcontent-%COMP%]{padding:20px;text-align:center}.badge[_ngcontent-%COMP%]{margin:4px;padding-top:4px}.left-badge[_ngcontent-%COMP%]{float:right}.right-badge[_ngcontent-%COMP%]{float:left}.refresh-btn[_ngcontent-%COMP%]{float:right;margin-right:30px;margin-top:-5px}.no-data[_ngcontent-%COMP%]{margin-top:17%}"]}),t})();var Ni=n("6i1W");function Wi(t,e){1&t&&(D.Vb(0),D.Xc(1," | Preferred"),D.Ub())}function Ri(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",10),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic(4).showConversations(null==e?null:e.preferred)}),D.Xb(1,"label",11),D.Xc(2),D.jc(3,"titlecase"),D.Vc(4,Wi,2,0,"ng-container",0),D.Wb(),D.Sb(5,"br"),D.Xb(6,"span",12),D.Xc(7),D.Wb(),D.Xc(8,": "),D.Xb(9,"span"),D.Xc(10),D.Wb(),D.Wb()}if(2&t){const t=D.ic().$implicit;D.Db(2),D.Zc(" ",D.kc(3,5,(null==t?null:t.label)||"Phone Number")," "),D.Db(2),D.rc("ngIf",null==t?null:t.preferred),D.Db(3),D.Yc("MOBILE"===(null==t?null:t.type)?"M":"L"),D.Db(3),D.ad("",null==t?null:t.countryCode," ",null==t?null:t.number,"")}}function xi(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Ri,11,7,"li",9),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf",!(null==t||null==t.number||!t.number.length))}}const wi=function(t){return{disabled:t}};function Vi(t,e){if(1&t&&(D.Xb(0,"nz-badge",3),D.Xb(1,"a",4),D.Sb(2,"app-icons",5),D.Wb(),D.Xb(3,"nz-dropdown-menu",null,6),D.Xb(5,"ul",7),D.Vc(6,xi,2,1,"ng-container",8),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(4),e=D.ic(3);D.rc("nzCount",e.unreadMessageCount)("ngClass",D.yc(6,wi,!(null!=e.numbers&&e.numbers.length))),D.Db(1),D.rc("nzDropdownMenu",t)("nzDisabled",!(null!=e.numbers&&e.numbers.length)),D.Db(1),D.rc("color",null!=e.numbers&&e.numbers.length?"rgb(138, 138, 138)":"#d8d8d8"),D.Db(4),D.rc("ngForOf",e.numbers)}}const Li=function(){return["VIEW_CONVERSATION"]};function ki(t,e){1&t&&(D.Vb(0),D.Vc(1,Vi,7,8,"nz-badge",2),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,Li)))}function Fi(t,e){1&t&&(D.Vb(0),D.Vc(1,ki,2,2,"ng-container",1),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,Li)))}let Ui=(()=>{class t{constructor(t,e){this._modalService=t,this._dataSharingService=e,this.onClose=new D.n}set phoneNumbers(t){t||(t=[]),t=null==t?void 0:t.filter(t=>{var e;return null===(e=null==t?void 0:t.notificationConfig[Ni.b.SMS])||void 0===e?void 0:e.enabled}),this.numbers=t}ngOnInit(){this._tenantConfigObserver=this._dataSharingService.tenantSettings}showConversations(t){this.conversationDialog||(this.conversationDialog=this._modalService.create({nzContent:Pi,nzComponentParams:{patientId:this.patientId,patientName:this.patientName,patient:this.patient,usePrimaryNumber:t},nzBodyStyle:{background:"#EFF2F0"},nzStyle:{width:"800px"},nzClosable:!0,nzFooter:null}),this.conversationDialog.afterClose.subscribe(()=>{this.onClose.emit(),this.conversationDialog=null}))}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.f),D.Rb(Oe.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-conversation-widget"]],inputs:{patientId:"patientId",patientName:"patientName",patient:"patient",unreadMessageCount:"unreadMessageCount",phoneNumbers:"phoneNumbers"},outputs:{onClose:"onClose"},decls:2,vars:3,consts:[[4,"ngIf"],[4,"isFeaturePermitted"],[3,"nzCount","ngClass",4,"isFeaturePermitted"],[3,"nzCount","ngClass"],["nz-dropdown","",3,"nzDropdownMenu","nzDisabled"],["name","sms","size","20px",3,"color"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],[4,"ngFor","ngForOf"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-item","",3,"click"],["nz-typography","","nzType","secondary"],["nz-typography","","nzType","success"]],template:function(t,e){if(1&t&&(D.Vc(0,Fi,2,2,"ng-container",0),D.jc(1,"async")),2&t){let t=null;D.rc("ngIf",null==(t=D.kc(1,1,e._tenantConfigObserver))||null==t.smsConfig?null:t.smsConfig.enableConversation)}},directives:[c.q,Ye.a,bi.a,c.o,Be.a,Be.b,ee.a,Be.e,He.c,c.p,T.a,He.e,V.a],pipes:[c.b,c.A],styles:["app-icons[_ngcontent-%COMP%]{margin:0 10px}label[_ngcontent-%COMP%]{font-size:11px}span[_ngcontent-%COMP%]{font-size:12px}"]}),t})(),ji=(()=>{class t{constructor(t,e,n,i){this._dataSharingService=t,this._cdRef=e,this._templateRef=n,this._viewContainerRef=i}ngOnInit(){this.getTenantSettings()}ngOnDestroy(){this.$tenantSettings.unsubscribe()}getTenantSettings(){this.$tenantSettings=this._dataSharingService.tenantSettings.subscribe(t=>{t&&!this.tenantSettings&&(this.tenantSettings=t,this.checkStatus())})}checkStatus(){switch(this.isPatientComponentEnabled){case"APPOINTMENT":this.isAppointmentEnabled();break;default:this.disableFeature()}}enableFeature(){this._viewContainerRef.createEmbeddedView(this._templateRef),this._cdRef.detectChanges()}disableFeature(){this._viewContainerRef.clear(),this._cdRef.detectChanges()}isAppointmentEnabled(){var t,e;(null===(e=null===(t=this.tenantSettings)||void 0===t?void 0:t.appointmentConfig)||void 0===e?void 0:e.appointmentEnabled)?this.enableFeature():this.disableFeature()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(Oe.a),D.Rb(D.h),D.Rb(D.N),D.Rb(D.R))},t.\u0275dir=D.Mb({type:t,selectors:[["","isPatientComponentEnabled",""]],inputs:{isPatientComponentEnabled:"isPatientComponentEnabled"}}),t})();var Yi=n("W9fG"),Bi=n("BQXE");function Hi(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"nz-progress",1),D.ec("click",function(){return D.Lc(t),D.ic().showTMS()}),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(1),D.rc("nzWidth",30)("nzPercent",t.percent)("nzFormat",t.format)("nzStrokeColor","#a7c853")("nzStrokeWidth",8)}}function Gi(t,e){1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2,"N/A"),D.Wb(),D.Ub())}let $i=(()=>{class t{constructor(t){this._patientCommunicationModalService=t,this.serviceCodes=new Map([["NON_COMPLEX_TMS","99490"],["NON_COMPLEX_TMS_PHYSICIAN","99491"],["NON_COMPLEX_ADDITIONAL_TMS","99439"],["NON_COMPLEX_ADDITIONAL_TMS_B","99439B"],["COMPLEX_TMS","99487"],["COMPLEX_ADDITIONAL_TMS","99489"]]),this.serviceCodesCount=new Map([["NON_COMPLEX_TMS","totalNonComplexTMSCompleted"],["NON_COMPLEX_ADDITIONAL_TMS","totalNonComplexAdditionalTMSCompleted"],["NON_COMPLEX_ADDITIONAL_TMS_B","totalNonComplexAdditionalTMSBCompleted"],["NON_COMPLEX_TMS_PHYSICIAN","totalNonComplexTMSPhysicianCompleted"],["COMPLEX_TMS","totalComplexTMSCompleted"],["COMPLEX_ADDITIONAL_TMS","totalComplexAdditionalTMSCompleted"]]),this.format=t=>{var e,n,i,a,s,o,l;if(!this.cptCode||!(null===(e=this.patient)||void 0===e?void 0:e.episode))return;const r=Math.floor((null===(n=this.patient)||void 0===n?void 0:n.episode[null===(i=this.serviceCodesCount)||void 0===i?void 0:i.get(this.cptCode)])/20*100);return null===(a=this.patient)||void 0===a||null===(s=this.serviceCodesCount)||void 0===s||s.get(this.cptCode),this.percent=r,null===(o=this.patient)||void 0===o?void 0:o.episode[null===(l=this.serviceCodesCount)||void 0===l?void 0:l.get(this.cptCode)]},this.onSave=new D.n}set patientData(t){this.patient=t,this.format(void 0)}ngOnInit(){this.checkIfTMSAdditionPossible()}showTMS(){var t;if(!this.canAddTMS)return;const e=this._patientCommunicationModalService.createCCMTMS(this.patient,null===(t=this.patient)||void 0===t?void 0:t.episode.blueprintId,this.cptCode,this.referrer);this.subscription$=e.afterClose.subscribe(t=>{t&&this.onSave.emit()})}checkIfTMSAdditionPossible(){var t,e,n,i,a,s,o;if(!this.cptCode||!(null===(t=this.patient)||void 0===t?void 0:t.episode))return;let l=!1;ye.a.NON_COMPLEX_TMS===this.cptCode&&(l=!0),ye.a.NON_COMPLEX_ADDITIONAL_TMS===this.cptCode&&(null===(e=this.patient)||void 0===e?void 0:e.episode[null===(n=this.serviceCodesCount)||void 0===n?void 0:n.get(ye.a.NON_COMPLEX_TMS)])>=20&&(null===(i=this.patient)||void 0===i?void 0:i.episode[null===(a=this.serviceCodesCount)||void 0===a?void 0:a.get(this.cptCode)])<20&&(l=!0),ye.a.NON_COMPLEX_ADDITIONAL_TMS_B===this.cptCode&&(null===(s=this.patient)||void 0===s?void 0:s.episode[null===(o=this.serviceCodesCount)||void 0===o?void 0:o.get(ye.a.NON_COMPLEX_ADDITIONAL_TMS)])>=20&&(l=!0),ye.a.NON_COMPLEX_TMS_PHYSICIAN===this.cptCode&&(l=!0),this.canAddTMS=l}ngOnDestroy(){var t;null===(t=this.subscription$)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(_e.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-non-complex-tms"]],inputs:{blueprint:"blueprint",cptCode:"cptCode",referrer:"referrer",patientData:["patient","patientData"]},outputs:{onSave:"onSave"},decls:4,vars:8,consts:[[4,"ngIf"],["nzType","circle",3,"nzWidth","nzPercent","nzFormat","nzStrokeColor","nzStrokeWidth","click"]],template:function(t,e){1&t&&(D.Vc(0,Hi,2,5,"ng-container",0),D.jc(1,"filterList"),D.Vc(2,Gi,3,0,"ng-container",0),D.jc(3,"filterList")),2&t&&(D.rc("ngIf",D.lc(1,2,null==e.serviceCodes?null:e.serviceCodes.get(e.cptCode),null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)),D.Db(2),D.rc("ngIf",!D.lc(3,5,null==e.serviceCodes?null:e.serviceCodes.get(e.cptCode),null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)))},directives:[c.q,Yi.a],pipes:[Bi.a],styles:["[_nghost-%COMP%]     .ant-progress-inner{background-color:unset;display:inherit;overflow:unset}[_nghost-%COMP%]     .ant-progress-text{margin-top:unset}strong[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-progress-status-success .ant-progress-text{margin-top:unset!important;font-size:9px}"]}),t})();function Zi(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"nz-progress",1),D.ec("click",function(){return D.Lc(t),D.ic().showTMS()}),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(1),D.rc("nzWidth",30)("nzPercent",t.percent)("nzFormat",t.format)("nzStrokeColor","#a7c853")("nzStrokeWidth",8)}}function qi(t,e){1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2,"N/A"),D.Wb(),D.Ub())}let Ki=(()=>{class t{constructor(t){this._patientCommunicationModalService=t,this.format=t=>{var e,n,i,a;const s=Math.floor((null===(n=null===(e=this.patient)||void 0===e?void 0:e.episode)||void 0===n?void 0:n.totalComplexTMSCompleted)/60*100);return this.patient,this.percent=s,null===(a=null===(i=this.patient)||void 0===i?void 0:i.episode)||void 0===a?void 0:a.totalComplexTMSCompleted},this.canAddTMS=!0,this.onSave=new D.n}set patientData(t){this.patient=t,this.format(void 0)}showTMS(){var t;if(!this.canAddTMS)return;const e=this._patientCommunicationModalService.createCCMTMS(this.patient,null===(t=this.patient)||void 0===t?void 0:t.episode.blueprintId,ye.a.COMPLEX_TMS);this.subscription$=e.afterClose.subscribe(t=>{t&&this.onSave.emit()})}ngOnDestroy(){var t;null===(t=this.subscription$)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(_e.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-complex-tms"]],inputs:{blueprint:"blueprint",patientData:["patient","patientData"]},outputs:{onSave:"onSave"},decls:4,vars:8,consts:[[4,"ngIf"],["nzType","circle",3,"nzWidth","nzPercent","nzFormat","nzStrokeColor","nzStrokeWidth","click"]],template:function(t,e){1&t&&(D.Vc(0,Zi,2,5,"ng-container",0),D.jc(1,"filterList"),D.Vc(2,qi,3,0,"ng-container",0),D.jc(3,"filterList")),2&t&&(D.rc("ngIf",D.lc(1,2,"99487",null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)),D.Db(2),D.rc("ngIf",!D.lc(3,5,"99487",null==e.patient||null==e.patient.episode?null:e.patient.episode.serviceCodes)))},directives:[c.q,Yi.a],pipes:[Bi.a],styles:["[_nghost-%COMP%]     .ant-progress-inner{background-color:unset;display:inherit;overflow:unset}[_nghost-%COMP%]     .ant-progress-text{margin-top:unset}strong[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-progress-status-success .ant-progress-text{margin-top:unset!important;font-size:9px}"]}),t})();var Qi=n("ZyQt"),Ji=n("A07A"),ta=n("fgTL"),ea=function(t){return t.TO_BE_OBTAINED="TO_BE_OBTAINED",t.EXPIRING_THIS_MONTH="EXPIRING_THIS_MONTH",t.EXPIRED_LAST_MONTH="EXPIRED_LAST_MONTH",t}({});let na=(()=>{class t{transform(t,e,n,i,a,s,o,l){return n?window.innerWidth<1400?this.widthForSmallerScreens(t,e,n,i,a,s,o,l):this.widthForLargerScreens(t,e,n,i,a,s,o,l):t}widthForLargerScreens(t,e,n,i,a,s,o,l){switch(n){case ta.a.ALL_PATIENTS:t=e?["14%","3%","15%","25%","25%","20%"]:["14%","3%","15%","50%","20%"];break;case ta.a.NO_ACTIVE_EPISODES:t=["15%","5%","15%","15%","20%"];break;case ta.a.CARE_PLANS:case ta.a.NO_ACTIVE_CARE_PLANS:t=["14%","3%","15%","10%","10%","10%"];break;case ta.a.EPISODES:case ta.a.DST:case ta.a.VITAL_DAYS_REMAINING:case ta.a.TMS_REMAINING:case ta.a.INACTIVE_PATIENTS:case ta.a.RPM_VITAL_COMPLIANCE:case ta.a.ASSESSMENT_COMPLIANCE:case ta.a.ON_BOARDING:if("GENERAL"===i){t=this.checkIfBHIEnabled(a,s)?["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"]:["5%","15%","3%","15%","8%","8%","10%","10%","10%","10%","10%","10%"];break}if("CCM"===i){this.checkIfCCMEnabled(a,s),t=["5%","12%","5%","12%","10%","10%","10%"];break}if("TOC"===i){t=["5%","15%","3%","15%","17%","17%","17%","11%"];break}t=["5%","12%","3%","15%","10%","8%","12%","10%","8%","8%","8%"];break;case ta.a.CMT:t=["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"];break;case ta.a.CONSENT_FORM:switch(o){case ea.TO_BE_OBTAINED:t=["14%","3%","15%","10%","15%","15%","15%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case ta.a.PHYSICIAN_ORDER:switch(l){case ea.TO_BE_OBTAINED:t=["14%","3%","15%","15%","20%","20%","15%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case ta.a.PATIENT_NOT_SERVICED:t=["5%","12%","5%","12%","10%","10%","10%","10%"];break;case ta.a.CCM_CMT_REMAINING:t=["5%","12%","5%","12%","10%","10%","10%"]}return t}widthForSmallerScreens(t,e,n,i,a,s,o,l){switch(n){case ta.a.ALL_PATIENTS:t=e?["14%","3%","15%","25%","25%","20%"]:["14%","3%","15%","50%","20%"];break;case ta.a.NO_ACTIVE_EPISODES:t=e?["15%","5%","15%","15%","20%"]:["20%","5%","20%","25%","10%"];break;case ta.a.CARE_PLANS:case ta.a.NO_ACTIVE_CARE_PLANS:t=["14%","3%","15%","10%","10%","10%"];break;case ta.a.EPISODES:case ta.a.DST:case ta.a.VITAL_DAYS_REMAINING:case ta.a.TMS_REMAINING:case ta.a.INACTIVE_PATIENTS:case ta.a.RPM_VITAL_COMPLIANCE:case ta.a.ASSESSMENT_COMPLIANCE:case ta.a.ON_BOARDING:if("GENERAL"===i){t=this.checkIfBHIEnabled(a,s)?e?["5%","15%","3%","10%","15%","8%","12%","10%","10%","10%"]:["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"]:["5%","15%","3%","15%","8%","8%","10%","10%","10%","10%","10%","10%"];break}if("CCM"===i){this.checkIfCCMEnabled(a,s),t=["5%","12%","5%","12%","10%","10%","10%"];break}if("TOC"===i){t=["5%","15%","3%","15%","17%","17%","17%","11%"];break}t=["5%","12%","3%","15%","10%","8%","12%","10%","8%","8%","8%"];break;case ta.a.CMT:t=["5%","15%","3%","15%","15%","8%","12%","10%","10%","10%"];break;case ta.a.CONSENT_FORM:switch(o){case ea.TO_BE_OBTAINED:t=["14%","3%","15%","15%","20%","20%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case ta.a.PHYSICIAN_ORDER:switch(l){case ea.TO_BE_OBTAINED:t=e?["14%","3%","15%","15%","20%","15%","15%","20%","15%"]:["14%","3%","15%","20%","20%","15%","20%","15%"];break;default:t=["14%","3%","15%","10%","15%","15%","20%","10%"]}break;case ta.a.CCM_CMT_REMAINING:t=["5%","12%","5%","12%","10%","10%","10%"]}return t}checkIfBHIEnabled(t,e){if(!(null==t?void 0:t.length)||!e)return;const n=Object(We.a)().map(t=>t.id);return!!(null==t?void 0:t.filter(t=>t.type===e&&!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(t=>n.indexOf(t)>=0))))}checkIfCCMEnabled(t,e){if(!(null==t?void 0:t.length)||!e)return;const n=Object(We.b)().map(t=>t.id);return!!(null==t?void 0:t.filter(t=>t.type===e&&!t.archived&&(null==t?void 0:t.enabledServiceCodes.some(t=>n.indexOf(t)>=0))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=D.Qb({name:"tableWidth",type:t,pure:!0}),t})();var ia=n("m3lz"),aa=n("vDSh"),sa=n("CRwX");let oa=(()=>{class t{constructor(){this.value=0,this.parameters=[],this.keys=[]}transform(t){return t&&(null==t?void 0:t.value)?"BLOOD_PRESSURE"===t.vitalType?this.getBloodPressureValue(t):this.getOtherVitalValue(t):""}getBloodPressureValue(t){let e=null==t?void 0:t.value.SYSTOLIC,n=null==t?void 0:t.value.DIASTOLIC;return e&&n?`${e}/${n}`:"N/A"}getOtherVitalValue(t){return t.value[Object.keys(t.value)[0]]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=D.Qb({name:"vital",type:t,pure:!0}),t})();var la=n("wsR7"),ra=n("mLmo");function ca(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",21),D.Xb(2,"div",22),D.Xb(3,"div",23),D.Xb(4,"label",24),D.Xc(5,"Patient Type"),D.Wb(),D.Wb(),D.Xb(6,"div",25),D.Xb(7,"nz-select",26),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().assignedStaffType=e})("ngModelChange",function(){return D.Lc(t),D.ic().onAssignedStaffChange()}),D.Sb(8,"nz-option",27),D.Sb(9,"nz-option",28),D.Sb(10,"nz-option",29),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(7),D.rc("ngModel",t.assignedStaffType)}}function da(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",31),D.ec("click",function(){return D.Lc(t),D.ic(2).repeatEpisodes()}),D.Sb(1,"app-icons",32),D.Xc(2),D.jc(3,"translate"),D.Wb()}2&t&&(D.Db(2),D.Zc("\xa0\xa0 ",D.kc(3,1,"COMMON.REPEATTYPE")," "))}function ba(t,e){if(1&t&&(D.Vb(0),D.Vc(1,da,4,3,"button",30),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf","NO_ACTIVE_EPISODES"===t.selectedFilterData[0])}}function ua(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",34),D.ec("click",function(){return D.Lc(t),D.ic(2).getPatientsList(1,!1,"XLS")}),D.Sb(1,"app-icons",35),D.Xc(2),D.jc(3,"translate"),D.Wb()}2&t&&(D.Db(2),D.Zc("\xa0\xa0 ",D.kc(3,1,"COMMON.DOWNLOAD")," "))}function pa(t,e){if(1&t&&(D.Xb(0,"span"),D.Vc(1,ua,4,3,"button",33),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",t.selectedFilterData.length||t.selectedCaretakerId||t.selectedGroupId)}}function ha(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"li",44),D.ec("click",function(){return D.Lc(t),D.ic(2).generateVitalReport()}),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Sb(4,"li",42),D.Ub()}2&t&&(D.Db(2),D.Yc(D.kc(3,1,"BULK_ACTION.GENERATE_VITAL_REPORT")))}function ga(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"li",44),D.ec("click",function(){return D.Lc(t),D.ic(2).generateAssessmentReport()}),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Sb(4,"li",42),D.Ub()}2&t&&(D.Db(2),D.Yc(D.kc(3,1,"BULK_ACTION.GENERATE_ASSESSMENT_REPORT")))}function fa(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){return D.Lc(t),D.ic(2).assignStaff()}),D.Xc(1," Assign Monitoring Staff "),D.Wb()}}function ma(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){return D.Lc(t),D.ic(3).assignPrimaryStaff()}),D.Xc(1," Assign Primary Monitoring Staff "),D.Wb()}}function va(t,e){if(1&t&&(D.Vb(0),D.Vc(1,ma,2,0,"li",41),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf","TENANT_ADMIN"===t.activeRoleType)}}function Sa(t,e){1&t&&(D.Xb(0,"li",45),D.Xb(1,"span"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Zc("",D.kc(3,1,"COMMON.BULK_ADD")," Notes"))}const Ia=function(){return{feature:"vitalConfig?.enabled"}},Da=function(){return{feature:"featureConfigs?.formsEnabled"}},Ca=function(){return["MARK_AS_PRIMARY_MONITORING_STAFF"]},Xa=function(){return["BULK_ADD_PATIENT"]};function Ea(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"button",36),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",37),D.Wb(),D.Xb(5,"nz-dropdown-menu",null,38),D.Xb(7,"ul",39),D.Vc(8,ha,5,3,"ng-container",40),D.Vc(9,ga,5,3,"ng-container",40),D.Vc(10,fa,2,0,"li",41),D.Vc(11,va,2,1,"ng-container",5),D.Sb(12,"li",42),D.Vc(13,Sa,4,3,"li",43),D.Wb(),D.Wb(),D.Ub()),2&t){const t=D.Ic(6),e=D.ic();D.Db(1),D.rc("nzDropdownMenu",t),D.Db(1),D.Zc(" ",D.kc(3,7,"BULK_ACTION.BULK_ACTIONS")," \xa0"),D.Db(6),D.rc("isTenantFeatureEnabled",D.xc(9,Ia)),D.Db(1),D.rc("isTenantFeatureEnabled",D.xc(10,Da)),D.Db(1),D.rc("ngIf","TENANT_ADMIN"===e.activeRoleType),D.Db(1),D.rc("isFeaturePermitted",D.xc(11,Ca)),D.Db(2),D.rc("isFeaturePermitted",D.xc(12,Xa))}}function Ta(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",47),D.ec("click",function(){return D.Lc(t),D.ic(2).onSendSMSClick()}),D.Sb(1,"app-icons",48),D.Xc(2),D.jc(3,"translate"),D.Wb()}if(2&t){const t=D.ic(2);D.rc("disabled",t.loading),D.Db(2),D.Zc(" \xa0\xa0",D.kc(3,2,"SMS.SEND_SMS")," ")}}function za(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Ta,4,4,"button",46),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",t.conversationEnabled)}}function _a(t,e){1&t&&D.Sb(0,"th")}function ya(t,e){1&t&&(D.Xb(0,"th",49),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"SITE")," "))}function Oa(t,e){1&t&&(D.Xb(0,"th"),D.Xc(1," Sub tenant "),D.Wb())}function Ma(t,e){1&t&&(D.Vb(0),D.Xb(1,"th",50),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Ub()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"COMMON.CAREPLAN")))}function Aa(t,e){1&t&&(D.Vb(0),D.Xb(1,"th",50),D.Xc(2,"Plan of Care"),D.Wb(),D.Ub())}function Pa(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"th",51),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("CMT",e)}),D.Xc(2," CMT "),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(1),D.rc("episodeWidgetEnabled","CMT_ADHERENCE")("blueprints",t.enabledEpisodeBlueprints)("selectedFilter",t.selectedFilterData)("episodeType",t.selectedEpisodeType)("nzSortFn",!0)}}function Na(t,e){1&t&&(D.Vb(0),D.Xb(1,"th",52),D.Xc(2," Non-complex CMT "),D.Wb(),D.Xb(3,"th",52),D.Xc(4," Complex CMT "),D.Wb(),D.Ub())}function Wa(t,e){1&t&&(D.Vb(0),D.Xb(1,"th",52),D.Xc(2," SMS Sent "),D.Wb(),D.Xb(3,"th",52),D.Xc(4," Attempt Count "),D.Wb(),D.Xb(5,"th",52),D.Xc(6," CMT "),D.Wb(),D.Ub())}function Ra(t,e){1&t&&(D.Vb(0),D.Xb(1,"th"),D.Xc(2,"Last Serviced Date"),D.Wb(),D.Ub())}function xa(t,e){1&t&&(D.Vb(0),D.Xb(1,"th",53),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Ub()),2&t&&(D.Db(2),D.Zc(" ",D.kc(3,1,"PATIENT.LAST_MEASURED_ASSESSMENTS")," "))}function wa(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"th",54),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("VITAL_DAYS_REMAINING",e)}),D.Xb(2,"div",55),D.Xb(3,"span",56),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(6,"th",57),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("TMS",e)}),D.Xb(7,"div",55),D.Xb(8,"span",56),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"span",58),D.Sb(12,"app-icons",59),D.Wb(),D.Wb(),D.Wb(),D.Xb(13,"th",60),D.Xc(14),D.jc(15,"translate"),D.Wb(),D.Ub()}if(2&t){D.ic();const t=D.Ic(54);D.Db(1),D.rc("nzSortFn",!0)("nzTooltipTitle","Vital Days Remaining"),D.Db(3),D.Yc(D.kc(5,9,"PATIENT.VITALS_REM")),D.Db(2),D.rc("nzSortFn",!0)("nzBreakWord",!0),D.Db(3),D.Yc(D.kc(10,11,"PATIENT.TMS_COMPLETED")),D.Db(2),D.rc("nzTooltipTitle",t),D.Db(1),D.rc("originalStyle",!0),D.Db(2),D.Zc(" ",D.kc(15,13,"PATIENT.LAST_MEASURED_VITALSIGNS")," ")}}function Va(t,e){1&t&&(D.Vb(0),D.Xb(1,"th"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Ub()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"EPISODE.EPISODE_HISTORY")))}function La(t,e){1&t&&(D.Vb(0),D.Xb(1,"th"),D.Xc(2,"Episode"),D.Wb(),D.Ub())}function ka(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"th",61),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("EPISODE_START_DATE",e)}),D.Xc(2,"Starting From"),D.Wb(),D.Xb(3,"th",61),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("EPISODE_END_DATE",e)}),D.Xc(4,"To"),D.Wb(),D.Ub()}2&t&&(D.Db(1),D.rc("nzSortFn",!0),D.Db(2),D.rc("nzSortFn",!0))}function Fa(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"th",61),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("CONSENT_VALID_UPTO",e)}),D.Xc(2,"Consent Form Valid Upto "),D.Wb(),D.Ub()}2&t&&(D.Db(1),D.rc("nzSortFn",!0))}function Ua(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"th",61),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("PHYSICIAN_ORDER_VALID_UPTO",e)}),D.Xc(2,"Physician Order Valid Upto"),D.Wb(),D.Ub()}2&t&&(D.Db(1),D.rc("nzSortFn",!0))}function ja(t,e){if(1&t){const t=D.Yb();D.Xb(0,"th",62),D.ec("nzSortOrderChange",function(e){return D.Lc(t),D.ic().setSortKey("ALERTS",e)}),D.Wb()}2&t&&D.rc("nzSortFn",!0)}function Ya(t,e){if(1&t){const t=D.Yb();D.Xb(0,"app-icons",86),D.ec("click",function(){D.Lc(t);const e=D.ic(3).$implicit;return D.ic().startTimer(e)}),D.Wb()}if(2&t){const t=D.ic(4);D.rc("nzTooltipTitle",t.timerRunning?"End Timer":"Start Timer")}}function Ba(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Ya,1,1,"app-icons",85),D.Ub()),2&t){const t=D.ic(3);D.Db(1),D.rc("ngIf",!(t.timerRunning||null!=t.timedPatient&&t.timedPatient.id))}}function Ha(t,e){if(1&t&&(D.Xb(0,"td"),D.Vc(1,Ba,2,1,"ng-container",4),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("ngIf","IN_PROGRESS"===(null==t||null==t.episode?null:t.episode.episodeStatus))}}function Ga(t,e){if(1&t&&(D.Xb(0,"td"),D.Vb(1),D.Xb(2,"div",87),D.Xb(3,"span",88),D.jc(4,"userLocations"),D.Xc(5),D.jc(6,"titlecase"),D.jc(7,"userLocations"),D.Wb(),D.Wb(),D.Ub(),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(3),D.rc("nzTooltipTitle",D.kc(4,2,null==t?null:t.sites)||"-"),D.Db(2),D.Zc(" ",D.kc(6,4,D.kc(7,6,null==t?null:t.sites))," ")}}function $a(t,e){if(1&t&&(D.Xb(0,"td"),D.Xc(1),D.jc(2,"tenantName"),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",D.kc(2,1,null==t?null:t.tenantId)," ")}}function Za(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",89),D.Xb(2,"span",88),D.jc(3,"careplanName"),D.Xc(4),D.jc(5,"careplanName"),D.Wb(),D.Wb(),D.Ub()),2&t){const t=D.ic(3).$implicit;D.Db(2),D.rc("nzTooltipTitle",D.kc(3,2,null==t||null==t.carePlan?null:t.carePlan.blueprintId)),D.Db(2),D.Zc(" ",D.kc(5,4,null==t||null==t.carePlan?null:t.carePlan.blueprintId)," ")}}function qa(t,e){1&t&&(D.Vb(0),D.Xb(1,"div",89),D.Xb(2,"span",88),D.jc(3,"translate"),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Ub()),2&t&&(D.Db(2),D.sc("nzTooltipTitle",D.kc(3,2,"CAREPLAN_EXPIRED")),D.Db(2),D.Zc(" ",D.kc(5,4,"CAREPLAN_EXPIRED")," "))}function Ka(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Za,6,6,"ng-container",4),D.jc(2,"dateCompare"),D.Vc(3,qa,6,6,"ng-container",4),D.jc(4,"dateCompare"),D.Ub()),2&t){const t=D.ic(2).$implicit;D.Db(1),D.rc("ngIf",D.kc(2,2,null==t||null==t.carePlan?null:t.carePlan.endDate)),D.Db(2),D.rc("ngIf",!D.kc(4,4,null==t||null==t.carePlan?null:t.carePlan.endDate))}}function Qa(t,e){1&t&&(D.Vb(0),D.Xb(1,"div",89),D.Xb(2,"span",88),D.Xc(3," No Care Plan Assigned "),D.Wb(),D.Wb(),D.Ub()),2&t&&(D.Db(2),D.rc("nzTooltipTitle","No Care Plan Assigned"))}function Ja(t,e){if(1&t){const t=D.Yb();D.Xb(0,"td",63),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().viewCareplanActionItems(null==e?null:e.id,null==e||null==e.carePlan?null:e.carePlan.id)}),D.Vc(1,Ka,5,6,"ng-container",4),D.Vc(2,Qa,4,1,"ng-container",4),D.Wb()}if(2&t){const t=D.ic().$implicit;D.Db(1),D.rc("ngIf",null==t||null==t.carePlan?null:t.carePlan.careplanType),D.Db(1),D.rc("ngIf",!(null!=t&&null!=t.carePlan&&t.carePlan.careplanType))}}function ts(t,e){if(1&t){const t=D.Yb();D.Xb(0,"td",91),D.ec("click",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic().gotoPlanOfCareHistory(e,null==e||null==e.episode?null:e.episode.id)}),D.Xc(1," Assigned "),D.Wb()}if(2&t){const t=D.ic(2).$implicit;D.tc("nzTooltipTitle","",null==t?null:t.assignedPlanOfCare," plan of care assigned")}}function es(t,e){1&t&&(D.Xb(0,"td"),D.Xc(1,"Not Assigned"),D.Wb())}function ns(t,e){if(1&t&&(D.Vb(0),D.Vc(1,ts,2,1,"td",90),D.Vc(2,es,2,0,"td",4),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("ngIf",0<(null==t?null:t.assignedPlanOfCare)),D.Db(1),D.rc("ngIf",0===(null==t?null:t.assignedPlanOfCare))}}function is(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"td",92),D.Xb(2,"nz-progress",93),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().onCMTClick(e)}),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic().$implicit,e=D.ic();D.Db(1),D.rc("episodeWidgetEnabled","CMT_ADHERENCE")("blueprints",e.enabledEpisodeBlueprints)("episodeType",e.selectedEpisodeType)("selectedFilter",e.selectedFilterData),D.Db(1),D.sc("nzPercent",(null==t||null==t.episode?null:t.episode.totalCMTCompleted)/20*100),D.rc("nzFormat",e.cmtFormat)}}function as(t,e){if(1&t){const t=D.Yb();D.Xb(0,"app-non-complex-tms",97),D.ec("onSave",function(){return D.Lc(t),D.ic(3).getPatientsList()}),D.Wb()}if(2&t){const t=D.ic(2).$implicit,e=D.ic();D.rc("blueprint",e.selectedBlueprintId)("patient",t)("cptCode","NON_COMPLEX_TMS")}}function ss(t,e){1&t&&(D.Xb(0,"span",98),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"NA"),""))}function os(t,e){if(1&t){const t=D.Yb();D.Xb(0,"app-complex-tms",99),D.ec("onSave",function(){return D.Lc(t),D.ic(3).getPatientsList()}),D.Wb()}if(2&t){const t=D.ic(2).$implicit,e=D.ic();D.rc("blueprint",e.selectedBlueprintId)("patient",t)}}function ls(t,e){1&t&&(D.Xb(0,"span",98),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"NA"),""))}function rs(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td",52),D.Vc(2,as,1,3,"app-non-complex-tms",94),D.Vc(3,ss,3,3,"span",95),D.Wb(),D.Xb(4,"td",52),D.Vc(5,os,1,2,"app-complex-tms",96),D.Vc(6,ls,3,3,"span",95),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.rc("ngIf","SUSPENDED"!==(null==t||null==t.episode?null:t.episode.episodeStatus)),D.Db(1),D.rc("ngIf","SUSPENDED"===(null==t||null==t.episode?null:t.episode.episodeStatus)),D.Db(2),D.rc("ngIf","SUSPENDED"!==(null==t||null==t.episode?null:t.episode.episodeStatus)),D.Db(1),D.rc("ngIf","SUSPENDED"===(null==t||null==t.episode?null:t.episode.episodeStatus))}}function cs(t,e){1&t&&(D.Xb(0,"nz-tag",105),D.Xc(1,"Yes"),D.Wb())}function ds(t,e){1&t&&(D.Xb(0,"nz-tag",106),D.Xc(1,"No"),D.Wb())}function bs(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"td",52),D.Vc(2,cs,2,0,"nz-tag",100),D.Vc(3,ds,2,0,"nz-tag",101),D.Wb(),D.Xb(4,"td",52),D.Xb(5,"nz-tag",102),D.Xc(6),D.Wb(),D.Wb(),D.Xb(7,"td",52),D.Xb(8,"div",103),D.Xb(9,"div",104),D.Xb(10,"nz-progress",93),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().onToCCMTClick(e)}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic().$implicit,e=D.ic();D.Db(2),D.rc("ngIf",!(null==t||null==t.episode||null==t.episode.eventState||!t.episode.eventState.lastSMSDateTime)),D.Db(1),D.rc("ngIf",!(null!=t&&null!=t.episode&&null!=t.episode.eventState&&t.episode.eventState.lastSMSDateTime)),D.Db(3),D.Zc("Attempt ",(null==t||null==t.episode||null==t.episode.eventState?null:t.episode.eventState.totalContactAttempts)||0,""),D.Db(4),D.sc("nzPercent",null==t||null==t.episode?null:t.episode.totalCMTCompleted),D.rc("nzFormat",e.tocFormat)}}function us(t,e){if(1&t&&(D.Xb(0,"td",88),D.jc(1,"dateCompare"),D.Xc(2),D.jc(3,"date"),D.Wb()),2&t){const t=D.ic(2).$implicit;D.tc("nzTooltipTitle","Serviced ",D.lc(1,2,null==t||null==t.lastServiceDates?null:t.lastServiceDates.CCM,"DAYS")," days ago"),D.Db(2),D.Zc(" ",D.lc(3,5,null==t||null==t.lastServiceDates?null:t.lastServiceDates.CCM,"d MMMM, y")," ")}}function ps(t,e){if(1&t&&(D.Xb(0,"td",88),D.jc(1,"dateCompare"),D.Xc(2),D.jc(3,"date"),D.Wb()),2&t){const t=D.ic(2).$implicit;D.tc("nzTooltipTitle","Serviced ",D.lc(1,2,null==t||null==t.lastServiceDates?null:t.lastServiceDates.RPM,"DAYS")," days ago"),D.Db(2),D.Zc(" ",D.lc(3,5,null==t||null==t.lastServiceDates?null:t.lastServiceDates.RPM,"d MMMM, y")," ")}}function hs(t,e){if(1&t&&(D.Vb(0),D.Vc(1,us,4,8,"td",107),D.Vc(2,ps,4,8,"td",107),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf","CCM"===t.selectedEpisodeType),D.Db(1),D.rc("ngIf","RPM"===t.selectedEpisodeType)}}function gs(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-statistic",111),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit,n=D.ic(2).$implicit;return D.ic().navigateGeneral(n,null==n||null==n.assessmentScores[e]?null:n.assessmentScores[e].parentFormId,null==n||null==n.assessmentScores[e]?null:n.assessmentScores[e].id,null==n?null:n.id,null==n?null:n.phoneNumbers)}),D.jc(1,"formName"),D.Wb()}if(2&t){const t=D.ic().$implicit,e=D.ic(2).$implicit;D.sc("nzTitle",null==e||null==e.assessmentScores[t]?null:e.assessmentScores[t].score),D.sc("nzValue",D.kc(1,2,null==e||null==e.assessmentScores[t]?null:e.assessmentScores[t].name))}}function fs(t,e){1&t&&(D.Xb(0,"span",98),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"NA"),""))}function ms(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td",109),D.Vc(2,gs,2,4,"nz-statistic",110),D.Vc(3,fs,3,3,"span",95),D.Wb(),D.Ub()),2&t){const t=e.$implicit,n=D.ic(2).$implicit;D.Db(2),D.rc("ngIf",null==n?null:n.assessmentScores),D.Db(1),D.rc("ngIf",!(null!=n&&n.assessmentScores&&null!=n&&n.assessmentScores[t]))}}const vs=function(){return[2,1,0]};function Ss(t,e){1&t&&(D.Vb(0),D.Vc(1,ms,4,2,"ng-container",108),D.Ub()),2&t&&(D.Db(1),D.rc("ngForOf",D.xc(1,vs)))}function Is(t,e){if(1&t&&(D.Xb(0,"div",121),D.Xb(1,"p",122),D.Xc(2),D.Wb(),D.Wb()),2&t){const t=D.ic(2).$implicit,e=D.ic();D.Db(2),D.Zc(" ",e.vitalsFormat((null==t||null==t.vitalState?null:t.vitalState.compliantForDays)/16*100)," ")}}function Ds(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-progress",123),D.ec("click",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic().viewCareplanActionItems(null==e?null:e.id,null==e||null==e.carePlan?null:e.carePlan.id)}),D.Wb()}if(2&t){const t=D.ic(2).$implicit;D.sc("nzSuccessPercent",(null==t||null==t.vitalState?null:t.vitalState.compliantForDays)/16*100),D.rc("nzShowInfo",!1)("nzPercent",100)}}function Cs(t,e){if(1&t&&(D.Xb(0,"p",122),D.Xc(1),D.Wb()),2&t){const t=D.ic(3).$implicit;D.Db(1),D.Zc(" ",null==t||null==t.episode?null:t.episode.totalTMSCompleted," ")}}function Xs(t,e){1&t&&(D.Xb(0,"p",122),D.Xc(1," Completed "),D.Wb())}function Es(t,e){if(1&t&&(D.Xb(0,"div",121),D.Vc(1,Cs,2,1,"p",124),D.Vc(2,Xs,2,0,"p",124),D.Wb()),2&t){const t=D.ic(2).$implicit;D.Db(1),D.rc("ngIf",(null==t||null==t.episode?null:t.episode.totalTMSCompleted)<60),D.Db(1),D.rc("ngIf",(null==t||null==t.episode?null:t.episode.totalTMSCompleted)>=60)}}function Ts(t,e){if(1&t&&D.Sb(0,"nz-progress",125),2&t){const t=D.ic(2).$implicit;D.sc("nzSuccessPercent",(null==t||null==t.episode?null:t.episode.totalTMSCompleted)/20*100),D.rc("nzPercent",100)("nzShowInfo",!1)}}function zs(t,e){if(1&t&&D.Sb(0,"nz-progress",125),2&t){const t=D.ic(2).$implicit;D.sc("nzSuccessPercent",100*((null==t||null==t.episode?null:t.episode.totalTMSCompleted)>20&&(null==t||null==t.episode?null:t.episode.totalTMSCompleted)/40)),D.rc("nzPercent",100)("nzShowInfo",!1)}}function _s(t,e){if(1&t&&D.Sb(0,"nz-progress",126),2&t){const t=D.ic(2).$implicit;D.sc("nzSuccessPercent",100*((null==t||null==t.episode?null:t.episode.totalTMSCompleted)>40&&(null==t||null==t.episode?null:t.episode.totalTMSCompleted)/60)),D.rc("nzShowInfo",!1)}}function ys(t,e){if(1&t&&(D.Sb(0,"nz-statistic",129),D.jc(1,"vital"),D.jc(2,"vitalName")),2&t){const t=D.ic().$implicit,e=D.ic(2).$implicit;D.sc("nzTitle",D.kc(1,2,null==e||null==e.vitalState?null:e.vitalState.latestVitals[t])),D.sc("nzValue",null!=e&&null!=e.vitalState&&null!=e.vitalState.latestVitals[t]&&e.vitalState.latestVitals[t].id?D.kc(2,4,null==e||null==e.vitalState||null==e.vitalState.latestVitals[t]?null:e.vitalState.latestVitals[t].vitalType):"")}}function Os(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"td",127),D.ec("click",function(){D.Lc(t);const n=e.$implicit,i=D.ic(2),a=i.index,s=i.$implicit;return D.ic().navigate(a,"vital-trend",null==s?null:s.id,null==s?null:s.name,null==s?null:s.gender,null==s?null:s.dateOfBirth,null==s?null:s.patientStatus,null==s||null==s.episode?null:s.episode.id,null==s||null==s.carePlan?null:s.carePlan.id,null==s||null==s.carePlan?null:s.carePlan.startDate,null==s||null==s.assessmentScores[n]?null:s.assessmentScores[n].id,null==s||null==s.episode?null:s.episode.totalTMSCompleted,null==s||null==s.episode?null:s.episode.totalAdditionalTMSCompleted,null==s?null:s.phoneNumbers,null==s||null==s.vitalState?null:s.vitalState.latestVitals[n],null==s?null:s.tenantId)}),D.Vc(2,ys,3,6,"nz-statistic",128),D.Wb(),D.Ub()}if(2&t){const t=D.ic(2).$implicit,e=D.ic();D.Db(2),D.rc("ngIf",e.selectedEpisodeType&&(null==t||null==t.vitalState||null==t.vitalState.latestVitals?null:t.vitalState.latestVitals.length))}}const Ms=function(){return[0,1,2]};function As(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"td",112),D.Vc(2,Is,3,1,"div",113),D.jc(3,"dateCompare"),D.Xb(4,"div",114),D.Vc(5,Ds,1,3,"nz-progress",115),D.jc(6,"dateCompare"),D.Wb(),D.Wb(),D.Xb(7,"td",116),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().onTMSClick(e,"TMS","TREATMENT_MANAGEMENT_SERVICE")}),D.Vc(8,Es,3,2,"div",117),D.jc(9,"dateCompare"),D.Xb(10,"div",114),D.Xb(11,"div",118),D.Vc(12,Ts,1,3,"nz-progress",119),D.jc(13,"dateCompare"),D.Wb(),D.Xb(14,"div",118),D.Vc(15,zs,1,3,"nz-progress",119),D.jc(16,"dateCompare"),D.Wb(),D.Xb(17,"div",118),D.Vc(18,_s,1,2,"nz-progress",120),D.jc(19,"dateCompare"),D.Wb(),D.Wb(),D.Wb(),D.Vc(20,Os,3,1,"ng-container",108),D.Ub()}if(2&t){const t=D.ic().$implicit;D.Db(2),D.rc("ngIf",D.kc(3,7,(null==t||null==t.carePlan?null:t.carePlan.id)&&(null==t||null==t.carePlan?null:t.carePlan.endDate))),D.Db(3),D.rc("ngIf",D.kc(6,9,(null==t||null==t.carePlan?null:t.carePlan.id)&&(null==t||null==t.carePlan?null:t.carePlan.endDate))),D.Db(3),D.rc("ngIf",D.kc(9,11,(null==t||null==t.carePlan?null:t.carePlan.id)&&(null==t||null==t.carePlan?null:t.carePlan.endDate))),D.Db(4),D.rc("ngIf",D.kc(13,13,(null==t||null==t.carePlan?null:t.carePlan.id)&&(null==t||null==t.carePlan?null:t.carePlan.endDate))),D.Db(3),D.rc("ngIf",D.kc(16,15,(null==t||null==t.carePlan?null:t.carePlan.id)&&(null==t||null==t.carePlan?null:t.carePlan.endDate))),D.Db(3),D.rc("ngIf",D.kc(19,17,(null==t||null==t.carePlan?null:t.carePlan.id)&&(null==t||null==t.carePlan?null:t.carePlan.endDate))),D.Db(2),D.rc("ngForOf",D.xc(19,Ms))}}function Ps(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.jc(3,"date"),D.Ub()),2&t){const t=D.ic(2).$implicit;D.Db(1),D.ad(" ",D.kc(2,2,"PREVIOUS_EPISODE_ENDED_ON"),": ",D.lc(3,4,null==t||null==t.previousEpisodes[0]?null:t.previousEpisodes[0].endDate,"mediumDate")," ")}}function Ns(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PREVIOUS_EPISODE_SUSPENDED")," "))}function Ws(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc("",D.kc(2,1,"NO_PREVIOUS_EPISODE")," "))}function Rs(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td",130),D.Vc(2,Ps,4,7,"ng-container",4),D.Vc(3,Ns,3,3,"ng-container",4),D.Vc(4,Ws,3,3,"ng-container",4),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.rc("ngIf",(null==t||null==t.previousEpisodes?null:t.previousEpisodes.length)&&"SUSPENDED"!==(null==t||null==t.previousEpisodes[0]?null:t.previousEpisodes[0].status)),D.Db(1),D.rc("ngIf",(null==t||null==t.previousEpisodes?null:t.previousEpisodes.length)&&"SUSPENDED"===(null==t||null==t.previousEpisodes[0]?null:t.previousEpisodes[0].status)),D.Db(1),D.rc("ngIf",!(null!=t&&null!=t.previousEpisodes&&t.previousEpisodes.length))}}function xs(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td"),D.Xc(2),D.jc(3,"episodeName"),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.Zc(" ",D.kc(3,1,null==t.episode?null:t.episode.episodeType)," ")}}function ws(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td"),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Xb(4,"td"),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.Zc(" ",D.lc(3,2,null==t.episode?null:t.episode.startDate,"d MMMM, y")," "),D.Db(3),D.Zc(" ",D.lc(6,5,null==t.episode?null:t.episode.endDate,"d MMMM, y")," ")}}function Vs(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td"),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.Zc(" ",D.lc(3,1,t.expirationDate,"d MMMM, y")," ")}}function Ls(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"td"),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.Zc(" ",D.lc(3,1,t.expirationDate,"d MMMM, y")," ")}}function ks(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-badge",131),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().showAlertDrawer(null==e?null:e.id,null==e?null:e.name,!1,null==e||null==e.episode?null:e.episode.id,null==e||null==e.carePlan?null:e.carePlan.id,null==e||null==e.carePlan?null:e.carePlan.startDate,null==e||null==e.episode?null:e.episode.totalTMSCompleted,null==e||null==e.episode?null:e.episode.totalAdditionalTMSCompleted,null==e?null:e.phoneNumbers)}),D.Sb(1,"app-icons",132),D.Wb()}if(2&t){const t=D.ic().$implicit;D.rc("nzCount",null==t?null:t.pendingAlertsCount),D.Db(1),D.rc("originalStyle",!0)}}function Fs(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(),n=e.index,i=e.$implicit;return D.ic().navigate(n,"view",null==i?null:i.id)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PATIENT.VIEW_PATIENT_DETAILS"),""))}function Us(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(),n=e.index,i=e.$implicit;return D.ic().navigate(n,"edit",null==i?null:i.id,null==i?null:i.name)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}if(2&t){const t=D.ic().$implicit;D.Jb("disabled","DISCHARGED"===(null==t?null:t.patientStatus)||"NOT_ONBOARDED"===(null==t?null:t.patientStatus)),D.Db(1),D.Zc(" ",D.kc(2,3,"PATIENT.EDIT_PATIENT_DETAILS"),"")}}function js(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().runInsuranceTiering(null==e?null:e.id)}),D.Xc(1," Run Insurance Tiering "),D.Wb()}}function Ys(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().runQualification(null==e?null:e.id)}),D.Xc(1," Run Qualification "),D.Wb()}}function Bs(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().queryCCDA(null==e?null:e.id,"PatientQuery")}),D.Xc(1," Pull Patient Summary "),D.Wb()}}function Hs(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().queryCCDA(null==e?null:e.id,"VisitQuery")}),D.Xc(1," Pull Visit Summary "),D.Wb()}}function Gs(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(),n=e.index,i=e.$implicit,a=D.ic();return a.navigate(n,"vital-trend",null==i?null:i.id,null==i?null:i.name,null==i?null:i.gender,null==i?null:i.dateOfBirth,null==i?null:i.patientStatus,null==i||null==i.episode?null:i.episode.id,null==i||null==i.carePlan?null:i.carePlan.id,null==i||null==i.carePlan?null:i.carePlan.startDate,null==i||null==i.assessmentScores[a.index]?null:i.assessmentScores[a.index].id,null==i||null==i.episode?null:i.episode.totalTMSCompleted,null==i||null==i.episode?null:i.episode.totalAdditionalTMSCompleted,null==i?null:i.phoneNumbers)}),D.Xc(1," Vital Trend Menu "),D.Wb()}}function $s(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic().navigateAssessment(e,null==e||null==e.assessmentScores[0]?null:e.assessmentScores[0].parentFormId,null==e||null==e.assessmentScores[0]?null:e.assessmentScores[0].id,null==e?null:e.id,null==e?null:e.phoneNumbers)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PATIENT.VIEW_ASSESSMENT_TREND")," "))}const Zs=function(){return["VIEW_PATIENT_DETAILS"]};function qs(t,e){1&t&&(D.Vb(0),D.Vc(1,$s,3,3,"li",80),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,Zs)))}function Ks(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic().showAssessmentDetails(e)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PATIENT.VIEW_ASSESSMENT")," "))}const Qs=function(){return["VIEW_ASSESSMENT"]};function Js(t,e){1&t&&(D.Vb(0),D.Vc(1,Ks,3,3,"li",80),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,Qs)))}function to(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic().showBHIAssessmentDetails(e)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PATIENT.VIEW_BHI_ASSESSMENT")," "))}function eo(t,e){1&t&&(D.Vb(0),D.Vc(1,to,3,3,"li",80),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,Qs)))}function no(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic(2),n=e.index,i=e.$implicit;return D.ic().navigate(n,"appointment",null==i?null:i.id)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}if(2&t){const t=D.ic(2).$implicit;D.Jb("disabled","DISCHARGED"===(null==t?null:t.patientStatus)||"NOT_ONBOARDED"===(null==t?null:t.patientStatus)),D.Db(1),D.Zc(" ",D.kc(2,3,"COMMON.ADDAPPOINTMENT"),"")}}const io=function(){return["ADD_APPOINTMENT"]};function ao(t,e){1&t&&(D.Vb(0),D.Vc(1,no,3,5,"li",81),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,io)))}function so(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().showNotes(null==e?null:e.id,null==e?null:e.name,null==e?null:e.tenantId)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}if(2&t){const t=D.ic().$implicit;D.Jb("disabled","DISCHARGED"===(null==t?null:t.patientStatus)||"NOT_ONBOARDED"===(null==t?null:t.patientStatus)),D.Db(1),D.Yc(D.kc(2,3,"LEADS.ADDNOTE"))}}function oo(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit,n=D.ic();return n.showHistory(null==e?null:e.id,null==e?null:e.name,n.selectedEpisodeType)}),D.Xc(1,"Communication History"),D.Wb()}if(2&t){const t=D.ic().$implicit;D.Jb("disabled","DISCHARGED"===(null==t?null:t.patientStatus)||"NOT_ONBOARDED"===(null==t?null:t.patientStatus))}}function lo(t,e){if(1&t){const t=D.Yb();D.Xb(0,"li",44),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().suspendEpisode(null==e||null==e.episode?null:e.episode.id)}),D.Xc(1,"Suspend Episode"),D.Wb()}if(2&t){const t=D.ic().$implicit;D.Jb("disabled","COMPLETED"===(null==t||null==t.episode?null:t.episode.episodeStatus)||"SUSPENDED"===(null==t||null==t.episode?null:t.episode.episodeStatus))}}const ro=function(t){return{disabled:t}},co=function(){return["VIEW_PATIENT_ALERT"]},bo=function(){return["VIEW_PATIENT"]},uo=function(){return["EDIT_PATIENT"]},po=function(){return{feature:"redoxConfig?.enabled",tenantId:"data?.tenantId"}},ho=function(){return["VIEW_PATIENT","EDIT_PATIENT"]},go=function(){return{feature:"featureConfigs?.formsEnabled",tenantId:"data?.tenantId"}},fo=function(){return["VIEW_PATIENT_NOTES"]};function mo(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"tr"),D.Vc(2,Ha,2,1,"td",4),D.Xb(3,"td",63),D.ec("click",function(){D.Lc(t);const n=e.index,i=e.$implicit;return D.ic().navigate(n,"view",null==i?null:i.id)}),D.Xb(4,"div",64),D.Xc(5),D.jc(6,"titlecase"),D.Wb(),D.Wb(),D.Xb(7,"td",65),D.Sb(8,"app-patient-status-tag",66),D.Wb(),D.Xb(9,"td",67),D.Xb(10,"app-video-call-widget",68),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic().logAction("video_call",null==n?null:n.id)}),D.Wb(),D.Xb(11,"app-audio-call-widget",69),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic().logAction("audio_call",null==n?null:n.id)}),D.Wb(),D.Xb(12,"app-conversation-widget",70),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic().logAction("sms",null==n?null:n.id)})("onClose",function(){D.Lc(t);const e=D.ic();return e.getPatientsList(e.pageIndex)}),D.Wb(),D.Wb(),D.Vc(13,Ga,8,8,"td",4),D.Vc(14,$a,3,3,"td",16),D.Vc(15,Ja,3,2,"td",71),D.Vc(16,ns,3,2,"ng-container",4),D.Vc(17,is,3,6,"ng-container",4),D.Vc(18,rs,7,4,"ng-container",4),D.Vc(19,bs,11,5,"ng-container",4),D.Vc(20,hs,3,2,"ng-container",4),D.Vc(21,Ss,2,2,"ng-container",4),D.Vc(22,As,21,20,"ng-container",4),D.Vc(23,Rs,5,3,"ng-container",4),D.Vc(24,xs,4,3,"ng-container",4),D.Vc(25,ws,7,8,"ng-container",4),D.Vc(26,Vs,4,4,"ng-container",4),D.Vc(27,Ls,4,4,"ng-container",4),D.Xb(28,"td"),D.Xb(29,"div",72),D.Xb(30,"div",73),D.Vc(31,ks,2,2,"nz-badge",74),D.Wb(),D.Xb(32,"div",73),D.Xb(33,"app-icons",75),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic().showDetails(null==n?null:n.id,"BASIC_DETAILS",null==n||null==n.episode?null:n.episode.id)}),D.Wb(),D.Wb(),D.Xb(34,"div",73),D.Xb(35,"a",76),D.Sb(36,"app-icons",77),D.Wb(),D.Wb(),D.Wb(),D.Xb(37,"nz-dropdown-menu",null,78),D.Xb(39,"ul",79),D.Vc(40,Fs,3,3,"li",80),D.Vc(41,Us,3,5,"li",81),D.Vc(42,js,2,0,"li",82),D.Vc(43,Ys,2,0,"li",82),D.Vc(44,Bs,2,0,"li",80),D.Vc(45,Hs,2,0,"li",80),D.Vc(46,Gs,2,0,"li",41),D.Vc(47,qs,2,2,"ng-container",40),D.Vc(48,Js,2,2,"ng-container",4),D.Vc(49,eo,2,2,"ng-container",4),D.Vc(50,ao,2,2,"ng-container",83),D.Vc(51,so,3,5,"li",81),D.Vc(52,oo,2,2,"li",84),D.Vc(53,lo,2,2,"li",84),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit,n=D.Ic(38),i=D.ic();D.Db(2),D.rc("ngIf",i.selectedFilterData[0]&&"ALL_PATIENTS"!==i.selectedFilterData[0]&&"CONSENT_FORM"!==i.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==i.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==i.selectedFilterData[0]),D.Db(2),D.rc("nzTooltipTitle",null==t?null:t.name)("nzTooltipVisible",i.tooltipState),D.Db(1),D.Zc(" ",D.kc(6,46,null==t?null:t.name)," "),D.Db(3),D.rc("patientStatus",null==t?null:t.patientStatus),D.Db(1),D.rc("ngClass",D.yc(48,ro,"DISCHARGED"===(null==t?null:t.patientStatus)||"NOT_ONBOARDED"===(null==t?null:t.patientStatus))),D.Db(1),D.rc("userId",null==t?null:t.id),D.Db(1),D.rc("userId",null==t?null:t.id)("phoneNumbers",null==t?null:t.phoneNumbers)("tenantId",null==t?null:t.tenantId),D.Db(1),D.rc("patientId",null==t?null:t.id)("patientName",null==t?null:t.name)("patient",t)("unreadMessageCount",null==t?null:t.unreadMessagesCount)("phoneNumbers",null==t?null:t.phoneNumbers),D.Db(1),D.rc("ngIf","ALL_PATIENTS"===i.selectedFilterData[0]&&"CONSENT_FORM"!==i.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==i.selectedFilterData[0]||"NO_ACTIVE_EPISODES"===i.selectedFilterData[0]),D.Db(2),D.rc("ngIf","ALL_PATIENTS"!==i.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==i.selectedFilterData[0]&&"CCM"!==i.selectedEpisodeType&&"TOC"!==i.selectedEpisodeType),D.Db(1),D.rc("ngIf","ALL_PATIENTS"!==i.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==i.selectedFilterData[0]&&"CCM"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf","GENERAL"===i.selectedEpisodeType||"BHI"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf","CCM"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf","TOC"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf",i.selectedFilterData&&"PATIENT_NOT_SERVICED"===i.selectedFilterData[0]),D.Db(1),D.rc("ngIf","GENERAL"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf","RPM"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf","NO_ACTIVE_EPISODES"===i.selectedFilterData[0]),D.Db(1),D.rc("ngIf",i.selectedFilterData&&("CONSENT_FORM"===i.selectedFilterData[0]||"PHYSICIAN_ORDER"===i.selectedFilterData[0])),D.Db(1),D.rc("ngIf",i.selectedFilterData&&("CONSENT_FORM"===i.selectedFilterData[0]||"PHYSICIAN_ORDER"===i.selectedFilterData[0])),D.Db(1),D.rc("ngIf",i.selectedFilterData&&"CONSENT_FORM"===i.selectedFilterData[0]&&"TO_BE_OBTAINED"!==i.consentFormStatus),D.Db(1),D.rc("ngIf",i.selectedFilterData&&"PHYSICIAN_ORDER"===i.selectedFilterData[0]&&"TO_BE_OBTAINED"!==i.physicianOrderStatus),D.Db(4),D.rc("isFeaturePermitted",D.xc(50,co)),D.Db(2),D.rc("originalStyle",!0),D.Db(2),D.rc("nzDropdownMenu",n),D.Db(5),D.rc("isFeaturePermitted",D.xc(51,bo)),D.Db(1),D.rc("isFeaturePermitted",D.xc(52,uo)),D.Db(1),D.rc("isTenantFeatureEnabled",D.xc(53,po)),D.Db(1),D.rc("isTenantFeatureEnabled",D.xc(54,po)),D.Db(1),D.rc("isFeaturePermitted",D.xc(55,ho)),D.Db(1),D.rc("isFeaturePermitted",D.xc(56,ho)),D.Db(1),D.rc("ngIf","RPM"===i.selectedEpisodeType),D.Db(1),D.rc("isTenantFeatureEnabled",D.xc(57,go)),D.Db(1),D.rc("ngIf","GENERAL"===i.selectedEpisodeType),D.Db(1),D.rc("ngIf","GENERAL"===i.selectedEpisodeType),D.Db(1),D.rc("isPatientComponentEnabled","APPOINTMENT"),D.Db(1),D.rc("isFeaturePermitted",D.xc(58,fo)),D.Db(1),D.rc("ngIf","ALL_PATIENTS"!==i.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==i.selectedFilterData[0]),D.Db(1),D.rc("ngIf",i.selectedFilterData&&"PATIENT_NOT_SERVICED"===i.selectedFilterData[0])}}function vo(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.Yc(t.pageIndex*t.pageSize)}}function So(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.Yc(t.totalCount)}}function Io(t,e){if(1&t&&(D.Xb(0,"h5",133),D.Xc(1),D.jc(2,"translate"),D.jc(3,"translate"),D.Vc(4,vo,2,1,"ng-container",4),D.Vc(5,So,2,1,"ng-container",4),D.Xc(6),D.Wb()),2&t){const t=D.ic();D.Db(1),D.bd(" ",D.kc(2,6,"COMMON.SHOWING")," ",(t.pageIndex-1)*t.pageSize+1," ",D.kc(3,8,"TABLEHEADER.TO")," "),D.Db(3),D.rc("ngIf",t.pageIndex*t.pageSize<t.totalCount),D.Db(1),D.rc("ngIf",t.pageIndex*t.pageSize>=t.totalCount),D.Db(1),D.Zc(" of ",t.totalCount," ")}}function Do(t,e){1&t&&(D.Xb(0,"div"),D.Xb(1,"p",134),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"p",134),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xb(7,"p",134),D.Xc(8),D.jc(9,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Zc(" - ",D.kc(3,3,"TMS.PATIENT_LISTING_SCREEN_TOOLTIP.TMS"),""),D.Db(3),D.Zc(" - ",D.kc(6,5,"TMS.PATIENT_LISTING_SCREEN_TOOLTIP.ADDITIONAL_TMS_A"),""),D.Db(3),D.Zc(" - ",D.kc(9,7,"TMS.PATIENT_LISTING_SCREEN_TOOLTIP.ADDITIONAL_TMS_B"),""))}const Co=function(){return["REPEAT_EPISODE"]},Xo=function(){return["DOWNLOAD_PATIENT_REPORT"]},Eo=function(){return{top:"150px",left:"36%"}},To=function(){return{right:"-6px !important",top:"-1px !important",backgroundColor:"#ff3939",boxShadow:"-1px -1px 0 1px #ff3939",color:"white",padding:"0px"}},zo=function(){return["VIEW_CONVERSATION"]},_o=function(t,e,n,i,a,s,o,l){return[t,e,n,i,a,s,o,l]},yo=function(){return[25,50,75,100]},Oo=function(){return{x:"1150px"}};let Mo=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r,c,d,b,u,p,h,g){super(),this._patientsService=t,this._router=e,this._dataSharingService=n,this._notificationsService=i,this._translationService=a,this._patientCommunicationModalService=s,this._patientsModalsService=o,this._patientsDrawerService=l,this._formsTrendModalService=r,this._progress=c,this._patientsEventLogger=d,this._patientUrlService=b,this._patientFilterCountService=u,this._guidedTourService=p,this._episodeModalService=h,this._insuranceService=g,this.TASK_REFRESH_INTERVAL_MS=6e4,this.autoRefresh$=Object(Jn.timer)(this.TASK_REFRESH_INTERVAL_MS,this.TASK_REFRESH_INTERVAL_MS),this.trackById=(t,e)=>null==e?void 0:e.id,this.assignedStaffType="ALL",this.listOfAllPatients=[],this.loading=!1,this.selectedFilter=["ALL_PATIENTS"],this.selectedFilterData=["ALL_PATIENTS"],this.dateRange=[],this.pageIndex=1,this.widthConfig=["14%","3%","15%","25%","25%","20%"],this.showAllAlerts=!1,this.patientRequests$=new rn.Subject,this.patientComponentIsActive=!0,this.patientHeaderTabName="ALL_PATIENTS",this.episodeBlueprintTypes=new Set,this.episodeBlueprintTypeBlueprintIdMap=new Map,this.vitalsFormat=t=>{const e=Math.ceil(16*t/100),n=16-e;return 16>e?n<10?`0${n}`:`${n}`:"Completed"},this.tmsFormat=t=>{const e=Math.floor(60*t/100),n=60-e;return 60>e?n<10?`0${n}\n Minutes`:`${n}\n Minutes`:"Completed"},this.cmtFormat=t=>{const e=Math.floor(20*t/100),n=20-e;return 20>e?n<10?`0${n}\n Minutes`:`${n}\n Minutes`:"Completed"},this.tocFormat=t=>t<10?`0${t}\n Minutes`:`${t}\n Minutes`,this.primaryToggleText="TOOLTIP.PRIMARY_STAFF_TOGGLE.PRIMARY",this._dataSharingService.getTimer().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&("COMPLETED"===(null==t?void 0:t.state)||"END"===(null==t?void 0:t.state)?(this.timerRunning=!1,this.timedPatient=void 0,this.patientRequests$.next()):this.timerRunning=!0)})}ngOnInit(){this.activeRoleType=localStorage.getItem("loggedInUserRole"),this._patientUrlService.getParameterValue("requestTenantIds")&&(this.selectedTenantIds=this._patientUrlService.getParameterValue("requestTenantIds").split(","),localStorage.setItem(Fe.a.REQUEST_TENANT_IDS,this._patientUrlService.getParameterValue("requestTenantIds"))),this.activeRoleType=localStorage.getItem("loggedInUserRole"),"MONITORING_STAFF"==this.activeRoleType&&(this.isPrimary=!0,this._patientUrlService.setParameter({assignedStaffType:"PRIMARY"})),this._translationService.getMultiple(...Ne.STRINGS).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.translatedStrings=t}),this.clearInfoDrawerState(),this.subscribeToActivatedRoute(),this.getTenantConfig(),this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied(),this._dataSharingService.onSubTenantChange().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.onSubTenantChange(t)})}subscribeToActivatedRoute(){this._router.events.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n;t instanceof b.d&&(this.patientComponentIsActive="/patient"===t.url||(null===(e=t.url)||void 0===e?void 0:e.startsWith("/patient?"))),"popstate"!==t.navigationTrigger||"/patient"!==t.url&&!(null===(n=t.url)||void 0===n?void 0:n.startsWith("/patient?"))||this.checkIfInfoDrawerStateAvailable(),t instanceof b.d&&(this.drawer=null)}),this.activatedRoute.queryParams.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e;if(!this.patientComponentIsActive)return;if(this.activeRoleType=localStorage.getItem("loggedInUserRole"),this.assignedStaffType=this._patientUrlService.getParameterValue("assignedStaffType"),void 0===this.assignedStaffType)return this.assignedStaffType=sessionStorage.getItem("patientType"),void this._patientUrlService.setParameter({assignedStaffType:this.assignedStaffType});this.selectedCaretakerId=this._patientUrlService.getParameterValue("staffId"),this.selectedPhysicianId=this._patientUrlService.getParameterValue("physicians"),this.selectedSiteId=this._patientUrlService.getParameterValue("siteId");const n=this._patientUrlService.getParameterValue("d1"),i=this._patientUrlService.getParameterValue("d2");n&&i&&(this.dateRange=[n,i]);const a=this._patientUrlService.getParameterValue("filter"),s=this._patientUrlService.getParameterValue("sub-filter");this.consentFormStatus=this._patientUrlService.getParameterValue("consentFormStatus"),this.physicianOrderStatus=this._patientUrlService.getParameterValue("physicianOrderStatus"),this.selectedEpisodeType=s,this._patientUrlService.setParameter({selectedEpisodeType:this.selectedEpisodeType}),this.selectedFilterData=[a,s],this.selectedFilter=JSON.parse(JSON.stringify(this.selectedFilterData)),this.sort=this._patientUrlService.getParameterValue("sort"),this.order=this._patientUrlService.getParameterValue("order"),this.selectedEpisodeType=this._patientUrlService.getParameterValue("selectedEpisodeType"),null===(e=this.headerComponent)||void 0===e||e.setActiveTab(),this.getPatientsList()})}onPatientHeaderTabChange(t){const{blueprintId:e}=t;this.selectedBlueprintId=e}onHeaderTabNameChange(t){this.patientHeaderTabName=t,this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied()}getOffset(t){return 1!==t?(t-1)*this.pageSize:0}clearFilters(){var t;null===(t=this.headerComponent)||void 0===t||t.setActiveTab(),this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied()}showHistory(t,e,n){this._patientsModalsService.showCommunicationHistory(t,e,n)}initPatientRequestObservable(){const t=this._patientUrlService.getParameterValue("d1"),e=this._patientUrlService.getParameterValue("d2");this.dateRange=null,t&&e&&(this.dateRange=[t,e]),this.patientRequests$.pipe(Object(Ee.a)(()=>this._patientsService.fetchPatientsList(this.getOffset(this.pageIndex),this.pageSize,this._patientUrlService.getParameterValue("staffId"),this._patientUrlService.getParameterValue("physicians"),this.sort,this.order,this._patientUrlService.getParameterValue("filter"),this._patientUrlService.getParameterValue("episodeBlueprint"),this._patientUrlService.getParameterValue("selectedEpisodeType"),this._patientUrlService.getParameterValue("siteId"),this.dateRange,this._patientUrlService.getParameterValue("search"),this._patientUrlService.getParameterValue("carePlanId"),this._patientUrlService.getParameterValue("v1"),this._patientUrlService.getParameterValue("v2"),this._patientUrlService.getParameterValue("op"),this._patientUrlService.getParameterValue("dstFilterType"),this._patientUrlService.getParameterValue("tms"),this._patientUrlService.getParameterValue("cmt"),this._patientUrlService.getParameterValue("ccmCmt"),this.responseType,this.smsPatientListLoading,this._patientUrlService.getParameterValue("consentFormStatus"),this._patientUrlService.getParameterValue("physicianOrderStatus"),this._patientUrlService.getParameterValue("patientStatus"),this._patientUrlService.getParameterValue("episodeStatus"),this._patientUrlService.getParameterValue("vitalFilter"),this._patientUrlService.getParameterValue("assessmentFilter"),this._patientUrlService.getParameterValue("assessment"),this._patientUrlService.getParameterValue("rpmVitalCompliance"),this._patientUrlService.getParameterValue("onBoardingFilter"),this._patientUrlService.getParameterValue("languages"),this._patientUrlService.getParameterValue("assignedStaffType"),this._patientUrlService.getParameterValue("patientCreationStartDate"),this._patientUrlService.getParameterValue("patientCreationEndDate")))).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied(),this.smsPatientListLoading?(this.listOfAllPatientsForSMS=t.result.filter(t=>t.patientStatus!==Qn.a.NOT_ONBOARDED&&t.patientStatus!==Qn.a.DISCHARGED),this.smsPatientListLoading=!1,this.loading=!1,this.showSendSmsModal()):("XLS"===this.responseType&&this.downloadExcelReport(t.filename),this.totalCount=t.metaData.totalCount,this.listOfAllPatients=t.result,this.loading=!1,this._progress.ref().complete())},t=>{var e;this._notificationsService.error(this.translatedStrings.get("MENU.PATIENTS"),null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message),this._progress.ref().complete()})}onAssignedStaffChange(){sessionStorage.setItem("patientType",this.assignedStaffType),this._patientUrlService.setParameter({assignedStaffType:this.assignedStaffType}),this._dataSharingService.triggerAlertRefresh()}getPatientsList(t=1,e=!1,n){e||(this.pageIndex=t),this.loading=!0,this.smsPatientListLoading=e,this.responseType=n,this.assignCaretakerIdIfStaffLoggedIn(),this.patientRequests$.next()}downloadExcelReport(t){if(this._patientsEventLogger.downloadStartReportEvent("",t,"patients","patient_list_excel"),!t)return this._notificationsService.error(this.translatedStrings.get("MENU.PATIENTS"),this.translatedStrings.get("UNABLE_TO_DOWNLOAD_REPORT")),void this._patientsEventLogger.downloadFailReportEvent("",t,"Filename not provided","patients","patient_list_excel");const e=`${m.g.url}/v2/media/${t}`;this._patientsEventLogger.downloadSuccessReportEvent("",t,"patients","patient_list_excel"),window.open(e),this.getPatientsList()}applyFilter(t){this._patientUrlService.setParameter({search:t}),this.searchKey=t}changePageSize(t){this.pageIndex=1,this.pageSize=t,this.getPatientsList()}setSortKey(t,e){this.sort=t,this.order="ascend"===e?"ASC":"DESC",this.getPatientsList()}assignCaretakerIdIfStaffLoggedIn(){"CARE_TAKER"===localStorage.getItem("loggedInUserAccountType")&&(this.selectedCaretakerId=localStorage.getItem("loggedInUser"))}showAlertDrawer(t,e,n,i,a,s,o,l,r){this._patientsEventLogger.patientActionEvent(t,"open_alert_drawer"),this._patientsDrawerService.alerts(t,e,n,i,a,s,o,l,r).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t||(this.clearInfoDrawerState(),this.getPatientsList(this.pageIndex))})}showDetails(t,e,n){e===Me.a.BASIC_DETAILS&&n&&(e=Me.a.EPISODE_DETAILS),this._patientsService.fetchPatientDetails(t,e,n).subscribe(t=>{this._dataSharingService.patientDetails.next(t),this.setInfoDrawerState(e,t,n),this.showInfoDrawerBasedOnType(e,t)})}showBasicInfo(t){this.drawer||(this.drawer=this._patientsDrawerService.basicInfo(t),this.drawer.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t||this.clearInfoDrawerState()}))}showHealthScoreDetails(t){var e,n;if(this._patientsEventLogger.patientActionEvent(t.id,"show_health_score_details"),this.drawer)return;if(!(null===(e=null==t?void 0:t.userHealthScores)||void 0===e?void 0:e.length))return void this._notificationsService.error(this.translatedStrings.get("ROTHMAN_INDEX"),this.translatedStrings.get("PATIENT_NOT_MEASURED_HEALTH_SCORE"));const i=null===(n=null==t?void 0:t.episode)||void 0===n?void 0:n.id;this.setInfoDrawerState(Me.a.HEALTH_SCORE,t,i),this.drawer=this._patientsDrawerService.healthScoreDetails(t.id,t.name,t.userHealthScores[0]),this.drawer.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t||this.clearInfoDrawerState()})}showAssessmentDetails(t){this._patientsEventLogger.patientActionEvent(t.id,"show_assessment_details"),this._patientsModalsService.assessmentDetails(t)}showBHIAssessmentDetails(t){this._patientsEventLogger.patientActionEvent(t.id,"show_bhi_details"),this._router.navigate(["analytics/bhi-assessment-report",t.id],{queryParams:{patientId:t.id,episodeBlueprintId:this.selectedBlueprintId}})}showVitalDetails(t,e,n,i,a,s,o,l,r,c,d){if(this._patientsEventLogger.patientActionEvent(e,"show_vitals_details"),!e)return;let b="";t&&(b=null==t?void 0:t.vitalType),this._patientsModalsService.vitalDetails(b,e,n,a,i,s,o,l,this.selectedEpisodeType,r,c,d).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getPatientsList()})}showNotes(t,e,n){this._patientsModalsService.notes(t,e,n).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{null!=t&&this._notificationsService.success(this.translatedStrings.get("MENU.PATIENTS"),this.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY"))})}showFiltersModal(){var t;this._patientsEventLogger.patientActionEvent("","show_filter_dialog"),this._patientsModalsService.filters(this.enabledEpisodeBlueprints,this.selectedBlueprintId,this.patientHeaderTabName,null===(t=this.tenantConfig)||void 0===t?void 0:t.tenantId).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&(this.totalFiltersApplied=this._patientFilterCountService.calculateTotalNumberOfFiltersApplied(),this._patientsEventLogger.patientFilterActionEvent(this.selectedFilterData,"patient_list_filter"))})}getTenantConfig(){this._dataSharingService.assignedTenantSettings.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.enabledEpisodeBlueprints=[],t.forEach((t,e)=>{var n;null===(n=null==t?void 0:t.episodeBlueprints)||void 0===n||n.forEach(t=>{(null==t?void 0:t.archived)||(this.enabledEpisodeBlueprints.push(t),this.episodeBlueprintTypes.add(t.type),null!=this._patientUrlService.getParameterValue("episodeBlueprint")&&null!=this._patientUrlService.getParameterValue("episodeBlueprint")&&t.id==this._patientUrlService.getParameterValue("episodeBlueprint")&&(this.selectedEpisodeType=t.type),this._patientUrlService.setParameter({selectedEpisodeType:this.selectedEpisodeType}))})})}),this._dataSharingService.tenantSettings.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n,i;t&&(this.tenantConfig=t,this.conversationEnabled=null===(e=null==t?void 0:t.smsConfig)||void 0===e?void 0:e.enableConversation,this.pageSize=(null===(i=null===(n=null==t?void 0:t.featureConfigs)||void 0===n?void 0:n.patientsModule)||void 0===i?void 0:i.patientsListPerPage)||50,this.initPatientRequestObservable(),this.getPatientsList())})}viewCareplanActionItems(t,e){this._router.navigate([`careplanassignments/patient/${t}/actionitems`],{queryParams:{careplanId:e}})}logAction(t,e){this._patientsEventLogger.patientActionEvent(e,t)}onSubTenantChange(t){"object"!=typeof t||""==t||null==t||null==t||(null==t?void 0:t.length)||(this.requestTenantIds=t.join()),this._patientUrlService.setParameter({requestTenantIds:this.requestTenantIds}),this.getPatientsList()}onTMSClick(t,e,n){var i,a,s,o,l,r,c;this._patientsEventLogger.patientActionEvent(t.id,"add_TMS");const d=(null===(i=null==t?void 0:t.episode)||void 0===i?void 0:i.totalTMSCompleted)?(null===(a=null==t?void 0:t.episode)||void 0===a?void 0:a.totalTMSCompleted)/20*100:0,b=(null===(s=null==t?void 0:t.episode)||void 0===s?void 0:s.totalAdditionalTMSCompleted)?(null===(o=null==t?void 0:t.episode)||void 0===o?void 0:o.totalAdditionalTMSCompleted)/20*100:0;e=d<100?"TMS":b<100?"ADDITIONAL_TMS":"ADDITIONAL_TMS_B";const u=new Date(null===(l=null==t?void 0:t.carePlan)||void 0===l?void 0:l.startDate);(null===(r=null==t?void 0:t.carePlan)||void 0===r?void 0:r.id)?this._patientCommunicationModalService.createTMSModal(t,null===(c=null==t?void 0:t.episode)||void 0===c?void 0:c.id,e,n,u).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getPatientsList()}):this._notificationsService.error(this.translatedStrings.get("TMS"),this.translatedStrings.get("TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED"))}onCMTClick(t){var e,n;this._patientsEventLogger.patientActionEvent(t.id,"add_cmt"),this._patientCommunicationModalService.createCMTModal(t.name,null==t?void 0:t.id,null===(e=null==t?void 0:t.episode)||void 0===e?void 0:e.id,ye.a.CARE_MANAGEMENT_TIME,null,null,new Date(null===(n=null==t?void 0:t.episode)||void 0===n?void 0:n.endDate).getTime()).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getPatientsList()})}onToCCMTClick(t){this._patientCommunicationModalService.createTOCTMS(t).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getPatientsList()})}clearInfoDrawerState(){this.drawer=null,sessionStorage.removeItem("infoDrawer")}setInfoDrawerState(t,e,n){sessionStorage.setItem("infoDrawer",JSON.stringify({type:t,patientDetails:e,episodeId:n}))}checkIfInfoDrawerStateAvailable(){const t=JSON.parse(sessionStorage.getItem("infoDrawer"));t&&this.showInfoDrawerBasedOnType(t.type,t.patientDetails)}showInfoDrawerBasedOnType(t,e){switch(t){case Me.a.BASIC_DETAILS:case Me.a.EPISODE_DETAILS:this.showBasicInfo(e);break;case Me.a.HEALTH_SCORE:this.showHealthScoreDetails(e)}}navigate(t,e,n,i,a,s,o,l,r,c,d,b,u,p,h,g){this.tooltipState=!1,this._patientsEventLogger.patientActionEvent(n,e),setTimeout(()=>{switch(e){case"add":this._router.navigate(["patient/add/"]);break;case"bulk-add":this._router.navigate(["patient/bulk-add/"]);break;case"view":this._router.navigate(["patient/view/",n]);break;case"edit":this._router.navigate(["patient/edit/",n],{queryParams:{patientName:i}});break;case"healthscore":this._router.navigate(["patient/healthscore/",n]);break;case"appointment":this._router.navigate(["appointments/create",n]);break;case"vital-trend":this._router.navigate(["patient/vital-trend",n],{queryParams:{patientName:i,patientId:n,gender:a,dob:s,patientStatus:o,episodeId:l,careplanId:r,carePlanstartDate:c,blueprintId:this.selectedBlueprintId,formId:d,tmsPercent:b,additionalTMSPercent:u,phoneNumbers:JSON.stringify(p),latestVital:JSON.stringify(h),tenantId:g}})}})}onSendSMSClick(){this._patientsEventLogger.patientActionEvent("","send_sms_box");const t=localStorage.getItem(Fe.a.REQUEST_TENANT_IDS).split(",");this.isAccessAcrossSubTenants&&t.length>1?this._notificationsService.info("SMS","Please choose only one tenant to send SMS"):this.getPatientsList(1,!0,Ae.a.JSON)}showSendSmsModal(){this._patientsModalsService.sendSms(this.listOfAllPatientsForSMS,this.selectedEpisodeType,this.dateRange,this.totalFiltersApplied).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(()=>{this.getPatientsList()})}repeatEpisodes(){this._patientsEventLogger.patientActionEvent("","repeat_episode"),this._patientsModalsService.repeatEpisode(this.translatedStrings.get("EPISODE.REPEAT_EPISODE"),Array.from(this.episodeBlueprintTypes)).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t||this.getPatientsList()})}showFormTrend(t,e,n){var i,a,s,o;this._patientsEventLogger.patientActionEvent(null==t?void 0:t.id,"show_form_trend_modal"),e&&n?this._formsTrendModalService.createModal(null==t?void 0:t.id,e,n,null==t?void 0:t.name,null===(i=t.episode)||void 0===i?void 0:i.id):this._formsTrendModalService.createModal(null==t?void 0:t.id,null===(a=null==t?void 0:t.assessmentScores[0])||void 0===a?void 0:a.parentFormId,null===(s=null==t?void 0:t.assessmentScores[0])||void 0===s?void 0:s.id,null==t?void 0:t.name,null===(o=t.episode)||void 0===o?void 0:o.id)}tutorialViewed(){this.featureIntroduced=!0}startFiltersTour(){this._guidedTourService.startTour(Kn)}generateVitalReport(){this._router.navigate(["patient/bulk-trend-report/vital"],{queryParams:this.activatedRoute.snapshot.queryParams})}generateAssessmentReport(){this._router.navigate(["patient/bulk-trend-report/assessment"],{queryParams:this.activatedRoute.snapshot.queryParams})}assignStaff(){this._router.navigate(["bulk/assign/monitoring-staff"])}assignPrimaryStaff(){this._router.navigate(["bulk/assign/monitoring-staff"],{queryParams:{assign:"PRIMARY"}})}navigateAssessment(t,e,n,i,a){var s;this._router.navigate(["patient/assessment-trend",i],{queryParams:{patientId:i,blueprintId:e,episodeId:null===(s=null==t?void 0:t.episode)||void 0===s?void 0:s.id,phoneNumbers:JSON.stringify(a)}})}navigateGeneral(t,e,n,i,a){var s;this._router.navigate(["patient/assessment-trend",i],{queryParams:{patientId:i,blueprintId:e,episodeId:null===(s=null==t?void 0:t.episode)||void 0===s?void 0:s.id,fromGeneral:!0,phoneNumbers:JSON.stringify(a)}})}gotoPlanOfCareHistory(t,e){this._router.navigate(["episodes/plan-of-care/details",null==t?void 0:t.id,e],{queryParams:{tab:"history",patientName:null==t?void 0:t.name}})}startTimer(t){var e;this.timerRunning=!0,this.timedPatient=t;const n=localStorage.getItem("loggedInUserAccountType"),i=localStorage.getItem("loggedInUser"),a={attendeeId:null==t?void 0:t.id,attendeeName:null==t?void 0:t.name,tenantId:null==t?void 0:t.tenantId,attenderId:"CARE_TAKER"===n?i:null,episodeId:null===(e=null==t?void 0:t.episode)||void 0===e?void 0:e.id};this._dataSharingService.setTimer({state:"START",data:a,showStickyNote:!0})}runInsuranceTiering(t){this._insuranceService.applyInsuranceTierRulesToPatient(t).subscribe(()=>{this._notificationsService.success("Patients","Insurance tiering completed")})}runQualification(t){this._patientsService.qualifyPatients({userIds:[t]}).subscribe(()=>{this._notificationsService.success("Patients","Qualification in progress...")})}queryCCDA(t,e){this._patientsService.queryCCDA(t,e).subscribe(()=>{this._notificationsService.success("Clinical Summary","Information queried successfully")},t=>{var e;this._notificationsService.error("Clinical Summary",(null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)||"Error querying information, please try again later")})}suspendEpisode(t){this._episodeModalService.createSuspendModal(t).afterClose.subscribe(t=>{t&&this.getPatientsList()})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(b.g),D.Rb(Oe.a),D.Rb(A.b),D.Rb(Pe.a),D.Rb(_e.a),D.Rb(ze.a),D.Rb(Te.a),D.Rb(Zn),D.Rb(ni.a),D.Rb(v.a),D.Rb(Re.a),D.Rb(qn.a),D.Rb(Ue.c),D.Rb(ti.a),D.Rb(ei.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patients"]],viewQuery:function(t,e){if(1&t&&D.ed(ln,1),2&t){let t;D.Hc(t=D.fc())&&(e.headerComponent=t.first)}},features:[D.Ab],decls:55,vars:82,consts:[[3,"filterType","search","selectedTabHeader"],["id","sub-header"],["nz-button","","nzShape","circle",3,"click"],["size","14px","name","reload",3,"altColorScheme"],[4,"ngIf"],[4,"isFeaturePermitted"],["nz-button","","nzType","primary","id","filters-button","featureHighlight","","featureKey","sites_filter",3,"position","click"],["size","12px","color","#ffffff","altColor","#ffffff","name","filter"],["nzStandalone","",3,"nzOverflowCount","nzShowDot","nzCount","nzStyle"],[1,"container"],["ngTour","patientFilterDesc",3,"clear"],["nzSize","middle","ngTour","patientList",3,"nzShowPagination","nzShowSizeChanger","nzData","nzPageIndex","nzPageSize","nzFrontPagination","nzTotal","nzLoading","nzWidthConfig","nzShowTotal","nzNoResult","nzVirtualForTrackBy","nzPageSizeOptions","nzScroll","nzPageIndexChange","nzPageSizeChange"],["patientsTable",""],["id","name",1,"align-left",3,"nzSortFn","nzSortOrderChange"],["id","communication",1,"align-center","table-column-contact"],["id","location",4,"ngIf"],[4,"isAccessAcrossTenantEnabled"],["id","alerts",3,"nzSortFn","nzSortOrderChange",4,"isFeaturePermitted"],[4,"ngFor","ngForOf","ngForTrackBy"],["totalPatientsCount",""],["titleTemplate",""],[2,"display","inline-block","min-width","230px"],["nz-row","","nzAlign","middle","nzGutter","12"],["nz-col",""],["nz-typography","","nzType","secondary"],["nz-col","","nzFlex","150px"],["nzPlaceHolder","Select patient type",3,"ngModel","ngModelChange"],["nzValue","ALL","nzLabel","All"],["nzValue","PRIMARY","nzLabel","Primary"],["nzValue","OTHER","nzLabel","Secondary"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["size","12px","color","#ffffff","altColor","#ffffff","name","retweet"],["nz-button","","class","secondary-actions",3,"click",4,"ngIf"],["nz-button","",1,"secondary-actions",3,"click"],["size","12px","color","#ffffff","altColor","#ffffff","name","download"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzDropdownMenu"],["color","#ffffff","stroke","2px","size","10px","altColor","#ffffff","name","down"],["bulkActionMenu","nzDropdownMenu"],["nz-menu",""],[4,"isTenantFeatureEnabled"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider","",1,"menu-divider"],["nz-menu-item","","routerLink","/patient/bulk-add-notes",4,"isFeaturePermitted"],["nz-menu-item","",3,"click"],["nz-menu-item","","routerLink","/patient/bulk-add-notes"],["nz-button","","nzType","primary","id","filters-button",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary","id","filters-button",3,"disabled","click"],["size","12px","color","#ffffff","altColor","#ffffff","name","sms"],["id","location"],["id","careplan"],["id","cmt-recorded",1,"align-center","wrap-text","table-column-progress",3,"episodeWidgetEnabled","blueprints","selectedFilter","episodeType","nzSortFn","nzSortOrderChange"],[1,"align-center"],["colspan","3",1,"align-center","table-column-last-vital"],["id","vital-days-remaining","nz-tooltip","",1,"align-center",3,"nzSortFn","nzTooltipTitle","nzSortOrderChange"],[1,"header-word-wrap"],[1,"header-word-wrap-text"],["id","tms-remaining",1,"align-center","table-column-tms",3,"nzSortFn","nzBreakWord","nzSortOrderChange"],["nz-tooltip","","nzTooltipPlacement","right",1,"tms-more-details-icon",3,"nzTooltipTitle"],["color","#000","name","infoCircle","size","12px",3,"originalStyle"],["id","vitals","colspan","3",1,"align-center","table-column-last-vital"],[3,"nzSortFn","nzSortOrderChange"],["id","alerts",3,"nzSortFn","nzSortOrderChange"],["actionable","",3,"click"],["nz-tooltip","",1,"ellipsis-text","char-limit",3,"nzTooltipTitle","nzTooltipVisible"],["nzAlign","right"],["isToolTipEnabled","true",3,"patientStatus"],[1,"align-center",3,"ngClass"],[3,"userId","click"],[3,"userId","phoneNumbers","tenantId","click"],[3,"patientId","patientName","patient","unreadMessageCount","phoneNumbers","click","onClose"],["actionable","",3,"click",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","8",1,"actions"],[3,"nzCount","click",4,"isFeaturePermitted"],["name","profile","size","22px",3,"originalStyle","click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","28px"],["patientSubMenu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click",4,"isFeaturePermitted"],["nz-menu-item","",3,"disabled","click",4,"isFeaturePermitted"],["nz-menu-item","",3,"click",4,"isTenantFeatureEnabled"],[4,"isPatientComponentEnabled"],["nz-menu-item","",3,"disabled","click",4,"ngIf"],["nz-tooltip","","name","play",3,"nzTooltipTitle","click",4,"ngIf"],["nz-tooltip","","name","play",3,"nzTooltipTitle","click"],[1,"ellipsis-text"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ellipsis-text","char-limit"],["actionable","","nz-tooltip","",3,"nzTooltipTitle","click",4,"ngIf"],["actionable","","nz-tooltip","",3,"nzTooltipTitle","click"],[1,"align-center",3,"episodeWidgetEnabled","blueprints","episodeType","selectedFilter"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add CMT","nzStrokeColor","#a9cc54","nzStrokeWidth","4",1,"line-progress",3,"nzFormat","nzPercent","click"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","cptCode","onSave",4,"ngIf"],["class","ant-statistic-title",4,"ngIf"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","onSave",4,"ngIf"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","cptCode","onSave"],[1,"ant-statistic-title"],["referrer","PATIENT_LISTING_SCREEN",3,"blueprint","patient","onSave"],["nzColor","success",4,"ngIf"],["nzColor","danger",4,"ngIf"],["nzColor","warning"],["nz-row","",1,"step-progress","step-progress-inner"],["nz-col","","nzSpan","24"],["nzColor","success"],["nzColor","danger"],["nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[4,"ngFor","ngForOf"],["actionable","",1,"align-center","table-data-assessment"],[3,"nzTitle","nzValue","click",4,"ngIf"],[3,"nzTitle","nzValue","click"],["nzAlign","center"],["class","step-progress","nz-row","","nzJustify","center","nzAlign","center",4,"ngIf"],["nz-row","","nzJustify","center","nzAlign","center","nzGutter","4",1,"step-progress","step-progress-inner"],["nzStrokeColor","#BEBEBE","nzStrokeWidth","4",3,"nzSuccessPercent","nzShowInfo","nzPercent","click",4,"ngIf"],["nzAlign","center",3,"click"],["nz-row","","class","step-progress","nzJustify","center","nzAlign","center",4,"ngIf"],["nz-col","","nzSpan","8"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4","class","line-progress",3,"nzPercent","nzSuccessPercent","nzShowInfo",4,"ngIf"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4","class","line-progress",3,"nzSuccessPercent","nzShowInfo",4,"ngIf"],["nz-row","","nzJustify","center","nzAlign","center",1,"step-progress"],[1,"completed-label"],["nzStrokeColor","#BEBEBE","nzStrokeWidth","4",3,"nzSuccessPercent","nzShowInfo","nzPercent","click"],["class","completed-label",4,"ngIf"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4",1,"line-progress",3,"nzPercent","nzSuccessPercent","nzShowInfo"],["nz-tooltip","","nzPlacement","topCenter","nzTitle","Click to add TMS","nzStrokeColor","#BEBEBE","nzStrokeWidth","4",1,"line-progress",3,"nzSuccessPercent","nzShowInfo"],["nzAlign","center","actionable","",3,"click"],[3,"nzTitle","nzValue",4,"ngIf"],[3,"nzTitle","nzValue"],["actionable",""],[3,"nzCount","click"],["name","notification","size","20px",3,"originalStyle"],["nz-typography",""],[1,"title-template-text"]],template:function(t,e){if(1&t&&(D.Xb(0,"app-patient-header",0),D.ec("filterType",function(t){return e.onPatientHeaderTabChange(t)})("search",function(t){return e.applyFilter(t)})("selectedTabHeader",function(t){return e.onHeaderTabNameChange(t)}),D.Wb(),D.Xb(1,"nz-page-header",1),D.Xb(2,"nz-page-header-extra"),D.Xb(3,"button",2),D.ec("click",function(){return e.getPatientsList(e.pageIndex)}),D.Sb(4,"app-icons",3),D.Wb(),D.Vc(5,ca,11,1,"ng-container",4),D.Vc(6,ba,2,1,"ng-container",5),D.Vc(7,pa,2,1,"span",5),D.Vc(8,Ea,14,13,"ng-container",5),D.Xb(9,"button",6),D.ec("click",function(){return e.showFiltersModal()}),D.Sb(10,"app-icons",7),D.Xc(11),D.jc(12,"translate"),D.Sb(13,"nz-badge",8),D.Wb(),D.Vc(14,za,2,1,"ng-container",5),D.Wb(),D.Wb(),D.Xb(15,"div",9),D.Xb(16,"app-filter-desc",10),D.ec("clear",function(){return e.clearFilters()}),D.Wb(),D.Xb(17,"nz-table",11,12),D.ec("nzPageIndexChange",function(t){return e.getPatientsList(t)})("nzPageSizeChange",function(t){return e.changePageSize(t)}),D.jc(19,"tableWidth"),D.jc(20,"translate"),D.Xb(21,"thead"),D.Xb(22,"tr"),D.Vc(23,_a,1,0,"th",4),D.Xb(24,"th",13),D.ec("nzSortOrderChange",function(t){return e.setSortKey("NAME",t)}),D.Xc(25),D.jc(26,"translate"),D.Wb(),D.Sb(27,"th"),D.Xb(28,"th",14),D.Xc(29),D.jc(30,"translate"),D.Wb(),D.Vc(31,ya,3,3,"th",15),D.Vc(32,Oa,2,0,"th",16),D.Vc(33,Ma,4,3,"ng-container",4),D.Vc(34,Aa,3,0,"ng-container",4),D.Vc(35,Pa,3,5,"ng-container",4),D.Vc(36,Na,5,0,"ng-container",4),D.Vc(37,Wa,7,0,"ng-container",4),D.Vc(38,Ra,3,0,"ng-container",4),D.Vc(39,xa,4,3,"ng-container",4),D.Vc(40,wa,16,15,"ng-container",4),D.Vc(41,Va,4,3,"ng-container",4),D.Vc(42,La,3,0,"ng-container",4),D.Vc(43,ka,5,2,"ng-container",4),D.Vc(44,Fa,3,1,"ng-container",4),D.Vc(45,Ua,3,1,"ng-container",4),D.Vc(46,ja,1,1,"th",17),D.Wb(),D.Wb(),D.Xb(47,"tbody"),D.Vc(48,mo,54,59,"ng-container",18),D.Wb(),D.Wb(),D.Vc(49,Io,7,10,"ng-template",null,19,D.Wc),D.Sb(51,"br"),D.Sb(52,"br"),D.Wb(),D.Vc(53,Do,10,9,"ng-template",null,20,D.Wc)),2&t){const t=D.Ic(18),n=D.Ic(50);D.Db(4),D.rc("altColorScheme",!0),D.Db(1),D.rc("ngIf",!("TENANT_ADMIN"==e.activeRoleType||"PHYSICIAN"==e.activeRoleType)),D.Db(1),D.rc("isFeaturePermitted",D.xc(64,Co)),D.Db(1),D.rc("isFeaturePermitted",D.xc(65,Xo)),D.Db(1),D.rc("isFeaturePermitted",D.xc(66,Xo)),D.Db(1),D.rc("position",D.xc(67,Eo)),D.Db(2),D.Zc(" \xa0\xa0",D.kc(12,47,"PATIENT.FILTERS")," "),D.Db(2),D.rc("nzOverflowCount",9)("nzShowDot",!1)("nzCount",e.totalFiltersApplied)("nzStyle",D.xc(68,To)),D.Db(1),D.rc("isFeaturePermitted",D.xc(69,zo)),D.Db(3),D.sc("nzNoResult",D.kc(20,58,"PATIENT_LISTING_SCREEN_NO_DATA_MESSAGE")),D.rc("nzShowPagination",!0)("nzShowSizeChanger",!0)("nzData",e.listOfAllPatients)("nzPageIndex",e.pageIndex)("nzPageSize",e.pageSize)("nzFrontPagination",!1)("nzTotal",e.totalCount)("nzLoading",e.loading)("nzWidthConfig",D.oc(19,49,D.Fc(70,_o,e.widthConfig,e.isAccessAcrossSubTenants,e.selectedFilterData[0],e.selectedFilterData[1],e.enabledEpisodeBlueprints,e.selectedEpisodeType,e.consentFormStatus,e.physicianOrderStatus)))("nzShowTotal",n)("nzVirtualForTrackBy",e.trackById)("nzPageSizeOptions",D.xc(79,yo))("nzScroll",D.xc(80,Oo)),D.Db(6),D.rc("ngIf",e.selectedFilterData[0]&&"ALL_PATIENTS"!==e.selectedFilterData[0]&&"CONSENT_FORM"!==e.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==e.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==e.selectedFilterData[0]),D.Db(1),D.rc("nzSortFn",!0),D.Db(1),D.Zc(" ",D.kc(26,60,"COMMON.NAME")," "),D.Db(4),D.Yc(D.kc(30,62,"TABLEHEADER.CONTACT")),D.Db(2),D.rc("ngIf","ALL_PATIENTS"===e.selectedFilterData[0]&&"CONSENT_FORM"!==e.selectedFilterData[0]&&"PHYSICIAN_ORDER"!==e.selectedFilterData[0]||"NO_ACTIVE_EPISODES"===e.selectedFilterData[0]),D.Db(2),D.rc("ngIf","ALL_PATIENTS"!==e.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==e.selectedFilterData[0]&&"CCM"!==e.selectedEpisodeType&&"TOC"!==e.selectedEpisodeType),D.Db(1),D.rc("ngIf","ALL_PATIENTS"!==e.selectedFilterData[0]&&"NO_ACTIVE_EPISODES"!==e.selectedFilterData[0]&&"CCM"===e.selectedEpisodeType),D.Db(1),D.rc("ngIf","GENERAL"===e.selectedEpisodeType||"BHI"===e.selectedEpisodeType),D.Db(1),D.rc("ngIf","CCM"===e.selectedEpisodeType),D.Db(1),D.rc("ngIf","TOC"===e.selectedEpisodeType),D.Db(1),D.rc("ngIf",e.selectedFilterData&&"PATIENT_NOT_SERVICED"===e.selectedFilterData[0]),D.Db(1),D.rc("ngIf","GENERAL"===e.selectedEpisodeType),D.Db(1),D.rc("ngIf","RPM"===e.selectedEpisodeType),D.Db(1),D.rc("ngIf","NO_ACTIVE_EPISODES"===e.selectedFilterData[0]),D.Db(1),D.rc("ngIf",e.selectedFilterData&&("CONSENT_FORM"===e.selectedFilterData[0]||"PHYSICIAN_ORDER"===e.selectedFilterData[0])),D.Db(1),D.rc("ngIf",e.selectedFilterData&&("CONSENT_FORM"===e.selectedFilterData[0]||"PHYSICIAN_ORDER"===e.selectedFilterData[0])),D.Db(1),D.rc("ngIf",e.selectedFilterData&&"CONSENT_FORM"===e.selectedFilterData[0]&&"TO_BE_OBTAINED"!==e.consentFormStatus),D.Db(1),D.rc("ngIf",e.selectedFilterData&&"PHYSICIAN_ORDER"===e.selectedFilterData[0]&&"TO_BE_OBTAINED"!==e.physicianOrderStatus),D.Db(1),D.rc("isFeaturePermitted",D.xc(81,co)),D.Db(2),D.rc("ngForOf",null==t?null:t.data)("ngForTrackBy",e.trackById)}},directives:[ln,ii.b,ii.d,X.a,E.a,T.a,ee.a,c.q,Ye.a,di,bi.a,ui.a,Ue.e,Y.f,Y.n,Y.o,Y.e,Y.l,Y.k,w.a,Y.i,c.p,k.c,k.a,V.a,x.d,d.u,d.x,x.a,Be.d,Be.b,Be.e,He.c,pi.a,hi.a,He.d,He.e,b.h,gi,fi.d,Y.b,mi.a,Y.a,vi.a,c.o,Si.a,Ii.a,Ui,Be.a,ji,Yi.a,$i,Ki,Qi.a,Ji.a],pipes:[Vt.a,na,c.A,ia.a,Lt.a,aa.a,sa.a,c.e,hn.a,oa,la.a,ra.a],styles:["[_nghost-%COMP%]     .ant-tabs{height:55px}[_nghost-%COMP%]     .ant-tabs-nav{background:var(--light-black)}[_nghost-%COMP%]     .ant-tabs-tab{color:var(--neutral-color)}#sub-header[_ngcontent-%COMP%]{background:transparent;padding:0 20px}.container[_ngcontent-%COMP%]{padding:0 20px!important}.strong[_ngcontent-%COMP%]{font-weight:bolder}[_nghost-%COMP%]     .ant-table-column-sorter-down, [_nghost-%COMP%]     .ant-table-column-sorter-up{color:var(--light-black)}[_nghost-%COMP%]     .ant-progress-steps-item{min-width:40px;border-radius:9px}[_nghost-%COMP%]     .ant-statistic-title{font-size:13px!important;font-weight:700;margin-bottom:0;color:#0f2015}[_nghost-%COMP%]     .ant-statistic-content{font-size:10px!important;font-weight:700;color:#8a8a8a}[_nghost-%COMP%]     .ant-badge-count{min-width:15px!important;height:15px!important;font-size:10px!important;line-height:15px!important;top:-10px!important;right:-5px!important;transform:none!important}.ant-btn-circle-outline[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-btn-circle{border:none}.secondary-actions[_ngcontent-%COMP%]{background-color:var(--medium-grey);color:var(--neutral-color);border:none}.secondary-actions[_ngcontent-%COMP%]:hover{background-color:#919191}#filters-button[_ngcontent-%COMP%]{width:120px}#alerts[_ngcontent-%COMP%]{padding-right:125px!important}.align-left[_ngcontent-%COMP%]{text-align:left!important}.align-center[_ngcontent-%COMP%]{text-align:center!important}.score-value[_ngcontent-%COMP%]{color:var(--primary-color);font-size:15px;font-weight:400}.health-score-baseline[_ngcontent-%COMP%]{font-size:12px;color:var(--dark-grey)}.danger[_ngcontent-%COMP%]{color:#d81b60}.average[_ngcontent-%COMP%], .warning[_ngcontent-%COMP%]{color:orange}.good[_ngcontent-%COMP%]{color:var(--primary-color)}.very-good[_ngcontent-%COMP%]{color:var(--primary-color-dark)}[_nghost-%COMP%]     .ant-badge-dot{margin-top:5px;width:10px;height:10px}[_nghost-%COMP%]     .ant-statistic-content-value:empty{display:none!important}.ellipsis-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.char-limit[_ngcontent-%COMP%]{max-width:18ch}td[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:13.5px}td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{padding-left:20px!important}td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{text-align:right!important;padding-right:25px!important;word-spacing:5px;width:15%}.line-progress[_ngcontent-%COMP%]{line-height:1.2}[_nghost-%COMP%]     .ant-progress-outer{display:flex;align-content:center;flex-direction:column;padding-right:0!important;align-items:center;margin:auto!important}[_nghost-%COMP%]     .ant-progress-inner{display:block;max-width:40px;min-width:20px;margin:auto;background-color:var(--grey)}[_nghost-%COMP%]     .ant-progress-success-bg{background-color:var(--primary-color)}[_nghost-%COMP%]     .ant-progress-text{text-align:center;margin:-30px auto auto;display:block;width:unset;white-space:pre;color:var(--light-black)}[_nghost-%COMP%]     .ant-progress-status-success .ant-progress-text{margin-top:-20px!important}[_nghost-%COMP%]     .ant-progress-line{font-size:11px}li.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.disabled[_ngcontent-%COMP%], li.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.completed-label[_ngcontent-%COMP%]{margin-bottom:0;text-align:center;font-size:12px}.tms-adherence-container[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;align-items:center;justify-content:center}.wrap-text[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.step-progress[_ngcontent-%COMP%]{width:70px;margin-left:auto!important;margin-right:auto!important}.step-progress-inner[_ngcontent-%COMP%]{margin-top:-8px}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:0 solid #f0f0f0}.header-word-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.header-word-wrap-text[_ngcontent-%COMP%]{box-sizing:border-box;white-space:pre-line;word-wrap:break-word;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;max-width:91px}.title-template-text[_ngcontent-%COMP%]{font-size:10px}.table-column-progress[_ngcontent-%COMP%]{width:175px;min-width:136px}.table-column-contact[_ngcontent-%COMP%]{min-width:136px}.table-column-last-vital[_ngcontent-%COMP%]{width:270px}.table-column-tms[_ngcontent-%COMP%]{width:150px}.table-data-assessment[_ngcontent-%COMP%]{min-width:90px;width:120px}.table-column-health-score[_ngcontent-%COMP%]{min-width:100px;width:150px}.tms-more-details-icon[_ngcontent-%COMP%] > app-icons[_ngcontent-%COMP%]{display:block;margin-left:5px}.actions[_ngcontent-%COMP%]{bottom:-5px}.name[_ngcontent-%COMP%]{background-color:var(--primary-color);height:30px;padding-top:5px;margin-top:0;border-radius:3px}.download[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{color:var(--neutral-color)}.download[_ngcontent-%COMP%]{position:absolute;right:50px}.line[_ngcontent-%COMP%]{opacity:.2;border:1px solid #707070;width:85%;margin-left:15px}.menu-divider[_ngcontent-%COMP%]{margin-left:8px!important;margin-right:8px!important}  .ant-dropdown-menu{right:60px}"]}),t})();var Ao=n("0W7X"),Po=n("2sp+"),No=n("4ik+"),Wo=n("1jOk"),Ro=n("5Qfn"),xo=n("mfqL"),wo=n("IVUT"),Vo=function(t){return t[t.LEAD=0]="LEAD",t[t.DEFAULT=1]="DEFAULT",t}({}),Lo=function(t){return t.DIABETIC="DIABETIC",t.HYPERTENSION="HYPERTENSION",t.HYPOTENSION="HYPOTENSION",t}({}),ko=n("sWYD"),Fo=n("NFKh");const Uo=t=>{if(t)return Object(ko.a)(t,"yyyy-MM-dd")},jo=t=>{var e,n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v,S,I;return{line1:null===(n=null===(e=null==t?void 0:t.controls)||void 0===e?void 0:e.streetAddress)||void 0===n?void 0:n.value,line2:null===(a=null===(i=null==t?void 0:t.controls)||void 0===i?void 0:i.streetAddress2)||void 0===a?void 0:a.value,city:null===(o=null===(s=null==t?void 0:t.controls)||void 0===s?void 0:s.city)||void 0===o?void 0:o.value,state:null===(r=null===(l=null==t?void 0:t.controls)||void 0===l?void 0:l.state)||void 0===r?void 0:r.value,country:null===(d=null===(c=null==t?void 0:t.controls)||void 0===c?void 0:c.country)||void 0===d?void 0:d.value,pin:null===(u=null===(b=null==t?void 0:t.controls)||void 0===b?void 0:b.zipCode)||void 0===u?void 0:u.value,zipCode:null===(h=null===(p=null==t?void 0:t.controls)||void 0===p?void 0:p.zipCode)||void 0===h?void 0:h.value,poBox:null===(f=null===(g=null==t?void 0:t.controls)||void 0===g?void 0:g.poBox)||void 0===f?void 0:f.value,lat:null===(v=null===(m=null==t?void 0:t.controls)||void 0===m?void 0:m.lat)||void 0===v?void 0:v.value,lng:null===(I=null===(S=null==t?void 0:t.controls)||void 0===S?void 0:S.lng)||void 0===I?void 0:I.value}},Yo=t=>{var e,n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v;const S={height:(I=null===(n=null===(e=null==t?void 0:t.controls)||void 0===e?void 0:e.height)||void 0===n?void 0:n.value,"FEET"===I.unit?{unit:I.unit,value:12*I.value1+ +I.value2}:{unit:I.unit,value:I.value1}),weight:null===(a=null===(i=null==t?void 0:t.controls)||void 0===i?void 0:i.weight)||void 0===a?void 0:a.value,waistSize:null===(o=null===(s=null==t?void 0:t.controls)||void 0===s?void 0:s.waist)||void 0===o?void 0:o.value,hipSize:null===(r=null===(l=null==t?void 0:t.controls)||void 0===l?void 0:l.hip)||void 0===r?void 0:r.value,bloodGroup:null===(d=null===(c=null==t?void 0:t.controls)||void 0===c?void 0:c.bloodGroup)||void 0===d?void 0:d.value};var I;S.habits=(null===(u=null===(b=null==t?void 0:t.controls)||void 0===b?void 0:b.smoking)||void 0===u?void 0:u.value)?[{habitType:"SMOKING"}]:null;let D=[{condition:"DIABETIC",haveMedication:!1},{condition:"HYPERTENSION",haveMedication:!!(null===(h=null===(p=null==t?void 0:t.controls)||void 0===p?void 0:p.hypertensionMedication)||void 0===h?void 0:h.value)}];return(null===(f=null===(g=null==t?void 0:t.controls)||void 0===g?void 0:g.diabetic)||void 0===f?void 0:f.value)||(D=D.filter(t=>t.condition!==Lo.DIABETIC)),(null===(v=null===(m=null==t?void 0:t.controls)||void 0===m?void 0:m.hypertension)||void 0===v?void 0:v.value)||(D=D.filter(t=>t.condition!==Lo.HYPERTENSION)),S.healthConditions=D,S},Bo=(t,e,n)=>{var i,a,s,o,l,r,c,d,b,u,p,h,g,f;const m={CALL:{enabled:null!==(i=null==e?void 0:e.audioCallNotification)&&void 0!==i&&i},SMS:{enabled:null!==(a=null==e?void 0:e.smsNotification)&&void 0!==a&&a},REMINDER_SMS:{enabled:null!==(s=null==e?void 0:e.reminderSMSNotification)&&void 0!==s&&s},VIDEO_CALL:{enabled:null!==(o=null==e?void 0:e.videoCallNotification)&&void 0!==o&&o}},v={label:null==e?void 0:e.label,number:null===(l=null==e?void 0:e.number)||void 0===l?void 0:l.trim(),type:null!==(r=null==e?void 0:e.type)&&void 0!==r?r:Ni.c.MOBILE,preferred:null===(c=null==e?void 0:e.preferred)||void 0===c||c,notificationConfig:m,countryCode:t};if(!(null==n?void 0:n.number))return[v];const S={CALL:{enabled:null!==(d=null==n?void 0:n.audioCallNotification)&&void 0!==d&&d},SMS:{enabled:null!==(b=null==n?void 0:n.smsNotification)&&void 0!==b&&b},REMINDER_SMS:{enabled:null!==(u=null==n?void 0:n.reminderSMSNotification)&&void 0!==u&&u},VIDEO_CALL:{enabled:null!==(p=null==e?void 0:e.videoCallNotification)&&void 0!==p&&p}};return[v,{label:null==n?void 0:n.label,number:null===(h=null==n?void 0:n.number)||void 0===h?void 0:h.trim(),type:null!==(g=null==n?void 0:n.type)&&void 0!==g?g:Ni.c.MOBILE,preferred:null!==(f=null==n?void 0:n.preferred)&&void 0!==f&&f,notificationConfig:S,countryCode:t}]},Ho=(t,e)=>{var n;16<=(null==t?void 0:t.length)?t=null==t?void 0:t.substring(0,16):15>(null==t?void 0:t.length)?t+="1234567891234567".substring(0,16-(null==t?void 0:t.length)):t||(t="1234567891234567");const i=Fo.enc.Latin1.parse(t),a=Fo.enc.Latin1.parse(t);return null===(n=Fo.AES.encrypt(e,i,{iv:a,mode:Fo.mode.CBC,padding:Fo.pad.ZeroPadding}))||void 0===n?void 0:n.toString()};var Go=n("/uUt"),$o=n("rzIX"),Zo=n("4+6U");class qo{constructor(){this.firstName=new d.i(null,d.D.required),this.lastName=new d.i(null,d.D.required),this.username=new d.i,this.email=new d.i(null,d.D.email),this.notes=new d.i,this.password=new d.i(null,d.D.minLength(8)),this.dateOfBirth=new d.i(null,d.D.required),this.timeZone=new d.i(null,d.D.required),this.gender=new d.i(null,d.D.required),this.language=new d.i(null,d.D.required),this.streetAddress=new d.i,this.streetAddress2=new d.i,this.city=new d.i,this.state=new d.i,this.country=new d.i,this.zipCode=new d.i,this.poBox=new d.i,this.lat=new d.i,this.lng=new d.i,this.primaryNumber=new d.l({number:new d.i(null,[d.D.required,d.D.minLength(6),d.D.pattern(/^[0-9 -]\d*$/)]),preferred:new d.i(!0),label:new d.i("Primary Number",[d.D.required]),type:new d.i(Ni.c.MOBILE),audioCallNotification:new d.i,smsNotification:new d.i,reminderSMSNotification:new d.i,videoCallNotification:new d.i}),this.secondaryNumber=new d.l({number:new d.i(null,[d.D.minLength(6),d.D.pattern(/^[0-9 -]\d*$/)]),preferred:new d.i,label:new d.i("Secondary Number"),type:new d.i,audioCallNotification:new d.i,smsNotification:new d.i,reminderSMSNotification:new d.i,videoCallNotification:new d.i(Ni.c.LANDLINE)}),this.location=new d.i(null,d.D.required),this.profileTags=new d.i,this.height=new d.i,this.weight=new d.l({unit:new d.i,value:new d.i}),this.waist=new d.l({unit:new d.i,value:new d.i}),this.hip=new d.l({unit:new d.i,value:new d.i}),this.bloodGroup=new d.i,this.smoking=new d.i,this.diabetic=new d.i,this.hypertension=new d.i,this.hypertensionMedication=new d.i,this.insurance=new d.i,this.hospitalId=new d.i,this.availableHours=new d.l({days:new d.i([]),fromTime:new d.i,toTime:new d.i}),this.patientConsent=new d.l({vmConsent:new d.i,hipaaConsent:new d.i})}}var Ko=n("RKSz");const Qo=(t,e,n,i)=>{const a=new qo;return"en"===i&&(i="en_US"),il(a),a.timeZone.setValue(null!=t?t:"Canada/Eastern"),a.language.setValue(null!=i?i:"en_US"),a.height.setValue({unit:null!=e?e:"FEET",value1:null,value2:null}),a.weight.setValue({unit:null!=n?n:"LBS",value:null}),a.waist.setValue({unit:"CMS",value:null}),a.hip.setValue({unit:"CMS",value:null}),a},Jo=(t,e)=>{t.streetAddress.setValue(null==e?void 0:e.line1),t.streetAddress2.setValue(null==e?void 0:e.line2),t.city.setValue(null==e?void 0:e.city),t.state.setValue(null==e?void 0:e.state),t.country.setValue(null==e?void 0:e.country),t.zipCode.setValue(null==e?void 0:e.pin),t.poBox.setValue(null==e?void 0:e.poBox)},tl=(t,e)=>{(null==e?void 0:e.length)&&e.forEach(e=>{"SMOKING"===e.habitType&&t.smoking.setValue({input:!0})})},el=(t,e)=>{var n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m;e&&t.insurance.setValue({primaryCarrierName:null===(n=null==e?void 0:e.primaryInsuranceDetails)||void 0===n?void 0:n.carrierName,primaryMemberId:null===(i=null==e?void 0:e.primaryInsuranceDetails)||void 0===i?void 0:i.insuranceId,primaryEffectiveDate:null===(a=null==e?void 0:e.primaryInsuranceDetails)||void 0===a?void 0:a.effectiveDate,primaryExpirationDate:null===(s=null==e?void 0:e.primaryInsuranceDetails)||void 0===s?void 0:s.expirationDate,primaryPlanId:null===(o=null==e?void 0:e.primaryInsuranceDetails)||void 0===o?void 0:o.planId,secondaryInsured:(null==e?void 0:e.secondaryInsured)||!!(null===(l=null==e?void 0:e.secondaryInsuranceDetails)||void 0===l?void 0:l.insuranceId),secondaryCarrierName:null===(r=null==e?void 0:e.secondaryInsuranceDetails)||void 0===r?void 0:r.carrierName,secondaryMemberId:null===(c=null==e?void 0:e.secondaryInsuranceDetails)||void 0===c?void 0:c.insuranceId,secondaryEffectiveDate:null===(d=null==e?void 0:e.secondaryInsuranceDetails)||void 0===d?void 0:d.effectiveDate,secondaryExpirationDate:null===(b=null==e?void 0:e.secondaryInsuranceDetails)||void 0===b?void 0:b.expirationDate,secondaryPlanId:null===(u=null==e?void 0:e.secondaryInsuranceDetails)||void 0===u?void 0:u.planId,tertiaryCarrierName:null===(p=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===p?void 0:p.carrierName,tertiaryMemberId:null===(h=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===h?void 0:h.insuranceId,tertiaryEffectiveDate:null===(g=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===g?void 0:g.effectiveDate,tertiaryExpirationDate:null===(f=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===f?void 0:f.expirationDate,tertiaryPlanId:null===(m=null==e?void 0:e.tertiaryInsuranceDetails)||void 0===m?void 0:m.planId,tier:null==e?void 0:e.tier})},nl=(t,e)=>{const n=null==e?void 0:e.find(t=>t.source===Ko.a.HOSPITAL_INTERNAL_ID);t.hospitalId.setValue(null==n?void 0:n.sourceId)},il=t=>{t.primaryNumber.setValue({label:"Primary Number",number:"",type:"MOBILE",preferred:!0,audioCallNotification:!0,smsNotification:!0,reminderSMSNotification:!1,videoCallNotification:!0}),t.secondaryNumber.setValue({label:"Secondary Number",number:"",type:"MOBILE",preferred:!1,audioCallNotification:!0,smsNotification:!0,reminderSMSNotification:!1,videoCallNotification:!0})},al=(t,e)=>{var n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v,S,I,D,C,X,E,T,z,_,y,O;if(!(null==e?void 0:e.length))return;const M=e[0];t.primaryNumber.setValue({label:(null==M?void 0:M.label)||"Primary Number",number:null===(n=null==M?void 0:M.number)||void 0===n?void 0:n.trim(),type:(null==M?void 0:M.type)||"MOBILE",preferred:null==M?void 0:M.preferred,audioCallNotification:null===(a=null===(i=null==M?void 0:M.notificationConfig[Ni.b.CALL])||void 0===i?void 0:i.enabled)||void 0===a||a,smsNotification:null===(o=null===(s=null==M?void 0:M.notificationConfig[Ni.b.SMS])||void 0===s?void 0:s.enabled)||void 0===o||o,reminderSMSNotification:null!==(r=null===(l=null==M?void 0:M.notificationConfig[Ni.b.REMINDER_SMS])||void 0===l?void 0:l.enabled)&&void 0!==r&&r,videoCallNotification:null===(d=null===(c=null==M?void 0:M.notificationConfig[Ni.b.VIDEO_CALL])||void 0===c?void 0:c.enabled)||void 0===d||d}),t.secondaryNumber.setValue({label:(null===(b=e[1])||void 0===b?void 0:b.label)||"Secondary Number",number:null!==(h=null===(p=null===(u=e[1])||void 0===u?void 0:u.number)||void 0===p?void 0:p.trim())&&void 0!==h?h:"",type:(null===(g=e[1])||void 0===g?void 0:g.type)||"MOBILE",preferred:null!==(m=null===(f=e[1])||void 0===f?void 0:f.preferred)&&void 0!==m&&m,audioCallNotification:null===(I=null===(S=null===(v=e[1])||void 0===v?void 0:v.notificationConfig[Ni.b.CALL])||void 0===S?void 0:S.enabled)||void 0===I||I,smsNotification:null===(X=null===(C=null===(D=e[1])||void 0===D?void 0:D.notificationConfig[Ni.b.SMS])||void 0===C?void 0:C.enabled)||void 0===X||X,reminderSMSNotification:null!==(z=null===(T=null===(E=e[1])||void 0===E?void 0:E.notificationConfig[Ni.b.REMINDER_SMS])||void 0===T?void 0:T.enabled)&&void 0!==z&&z,videoCallNotification:null===(O=null===(y=null===(_=e[1])||void 0===_?void 0:_.notificationConfig[Ni.b.VIDEO_CALL])||void 0===y?void 0:y.enabled)||void 0===O||O})},sl=(t,e)=>{t.availableHours.setValue({days:(null==e?void 0:e.days)||[],fromTime:(null==e?void 0:e.fromTime)||null,toTime:(null==e?void 0:e.toTime)||null})},ol=(t,e)=>{var n,i;t.patientConsent.setValue({vmConsent:null!==(n=null==e?void 0:e.vmConsent)&&void 0!==n&&n,hipaaConsent:null!==(i=null==e?void 0:e.hipaaConsent)&&void 0!==i&&i})};var ll=n("h51P"),rl=n("bnsq");let cl=(()=>{class t{constructor(t){this._permissionsService=t}isPrivileged(t){const e=this._permissionsService.getPermissionsForUser();let n=!1;return localStorage.getItem("loggedInUserRole")==M.a.TENANT_ADMIN||!!(null==e?void 0:e.length)&&(t.forEach(t=>{-1!==e.findIndex(e=>e===t)&&(n=!0)}),n)}}return t.\u0275fac=function(e){return new(e||t)(D.bc(rl.a))},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var dl=n("pxUr"),bl=n("PScX"),ul=n("ocnv"),pl=n("5iDH"),hl=n("EGpF"),gl=n("ix5O"),fl=n("Zy1z"),ml=n("z4wI");let vl=(()=>{class t extends h.a{constructor(t){super(),this.fb=t,this.onChange=()=>{},this.onTouched=()=>{},this.form=this.fb.group({unit:new d.i,value1:new d.i,value2:new d.i}),this.form.valueChanges.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.onChange(t),this.onTouched()}),this.form.controls.unit.valueChanges.pipe(Object(fl.a)()).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(([t,e])=>this.convertValuesAccordingToUnit(t,e))}get value(){return this.form.value}set value(t){this.form.setValue(t),this.onChange(t),this.onTouched()}get heightControl(){return this.form.controls}registerOnChange(t){this.onChange=t}writeValue(t){t&&(this.value=t),null===t&&this.form.reset()}registerOnTouched(t){this.onTouched=t}validate(t){return this.form.valid?null:{input:{valid:!1}}}convertValuesAccordingToUnit(t,e){"IN"===t&&"FEET"===e&&this.convertInchesToFeet(this.form.controls.value1.value),"IN"===t&&"CMS"===e&&(this.form.controls.value1.setValue(2.54*this.form.controls.value1.value),this.form.controls.value2.setValue(null)),"CMS"===t&&"FEET"===e&&this.convertInchesToFeet(this.form.controls.value1.value/2.54),"CMS"===t&&"IN"===e&&(this.form.controls.value1.setValue(this.form.controls.value1.value/2.54),this.form.controls.value2.setValue(null)),"FEET"===t&&"IN"===e&&this.convertFeetToInches(),"FEET"===t&&"CMS"===e&&this.convertFeetToCms()}convertInchesToFeet(t){const e=Math.floor(t/12),n=t-12*e;this.form.controls.value1.setValue(e),this.form.controls.value2.setValue(n)}convertFeetToInches(){this.form.controls.value1.setValue(12*this.form.controls.value1.value+this.form.controls.value2.value),this.form.controls.value2.setValue(null)}convertFeetToCms(){this.form.controls.value1.setValue(2.54*(12*this.form.controls.value1.value+this.form.controls.value2.value)),this.form.controls.value2.setValue(null)}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(d.h))},t.\u0275cmp=D.Lb({type:t,selectors:[["user-height"]],features:[D.Cb([{provide:d.s,useExisting:Object(D.W)(()=>t),multi:!0},{provide:d.r,useExisting:Object(D.W)(()=>t),multi:!0}]),D.Ab],decls:17,vars:4,consts:[["nz-form","",3,"formGroup"],["nz-row","","nzGutter","8"],["nz-col","","nzSpan","8"],["formControlName","unit"],["nzValue","FEET","nzLabel","Feet"],["nzValue","CMS","nzLabel","Cms"],["nzValue","IN","nzLabel","Inches"],["formControlName","value1",3,"nzMin"],["nz-col","","nzSpan","8",3,"hidden"],["formControlName","value2",3,"nzMin"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"nz-form-item"),D.Xb(4,"nz-form-control"),D.Xb(5,"nz-select",3),D.Sb(6,"nz-option",4),D.Sb(7,"nz-option",5),D.Sb(8,"nz-option",6),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(9,"div",2),D.Xb(10,"nz-form-item"),D.Xb(11,"nz-form-control"),D.Sb(12,"nz-input-number",7),D.Wb(),D.Wb(),D.Wb(),D.Xb(13,"div",8),D.Xb(14,"nz-form-item"),D.Xb(15,"nz-form-control"),D.Sb(16,"nz-input-number",9),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.rc("formGroup",e.form),D.Db(12),D.rc("nzMin",1),D.Db(1),D.rc("hidden","FEET"!=(null==e.form||null==e.form.value?null:e.form.value.unit)),D.Db(3),D.rc("nzMin",1))},directives:[ul.b,d.v,d.m,k.c,k.a,ul.c,ul.a,x.d,d.u,d.k,x.a,ml.a],styles:["[_nghost-%COMP%]     .ant-select {\n\t\t\t\tfont: normal normal normal 10px/14px 'Nunito';\n\t\t\t\tcolor: #8a8a8a;\n\t\t\t\tborder: 1px solid #e8e8e8 !important;\n\t\t\t}\n\n\t\t\t[_nghost-%COMP%]     .ant-select-selector {\n\t\t\t\tborder: 1px solid #e8e8e8 !important;\n\t\t\t\tbackground: #dbdbdb 0% 0% no-repeat padding-box !important;\n\t\t\t}\n\n\t\t\t[_nghost-%COMP%]     .ant-input-number {\n\t\t\t\twidth: 100%;\n\t\t\t\tbackground: #fbfbfb 0% 0% no-repeat padding-box;\n\t\t\t\tborder: 1px solid #e8e8e8 !important;\n\t\t\t}\n\n\t\t\t[_nghost-%COMP%]     .anticon svg {\n\t\t\t\tcolor: black;\n\t\t\t\tfont-size: 10px;\n\t\t\t}"]}),t})(),Sl=(()=>{class t extends h.a{constructor(t){super(),this.fb=t,this.onChange=()=>{},this.onTouched=()=>{},this.form=this.fb.group({primaryCarrierName:new d.i,primaryMemberId:new d.i,secondaryInsured:new d.i,secondaryCarrierName:new d.i,secondaryMemberId:new d.i}),this.form.valueChanges.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.onChange(t),this.onTouched()}),this.form.controls.secondaryInsured.valueChanges.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t?(this.form.controls.secondaryCarrierName.enable(),this.form.controls.secondaryMemberId.enable()):(this.form.controls.secondaryCarrierName.disable(),this.form.controls.secondaryMemberId.disable())})}get value(){return this.form.value}set value(t){this.form.patchValue(t),this.onChange(t),this.onTouched()}get insuranceControl(){return this.form.controls}registerOnChange(t){this.onChange=t}writeValue(t){t&&(this.value=t),null===t&&this.form.reset()}registerOnTouched(t){this.onTouched=t}validate(t){return this.form.valid?null:{input:{valid:!1}}}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(d.h))},t.\u0275cmp=D.Lb({type:t,selectors:[["user-insurance"]],features:[D.Cb([{provide:d.s,useExisting:Object(D.W)(()=>t),multi:!0},{provide:d.r,useExisting:Object(D.W)(()=>t),multi:!0}]),D.Ab],decls:50,vars:19,consts:[["nz-form","",3,"formGroup"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-typography",""],["nz-col","","nzSpan","6","id","top-left",1,"shaded"],["id","multiple"],["nz-col","","nzSpan","6","id","top-right",1,"shaded"],["nzSize","small","formControlName","secondaryInsured"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","6",1,"shaded"],["formControlName","primaryCarrierName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","primaryMemberId","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-col","","nzSpan","6","id","bottom-left",1,"shaded"],["formControlName","secondaryCarrierName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-col","","nzSpan","6","id","bottom-right",1,"shaded"],["formControlName","secondaryMemberId","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"h3",3),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Xb(6,"div",4),D.Xb(7,"label",5),D.Xc(8),D.jc(9,"translate"),D.Wb(),D.Wb(),D.Xb(10,"div",6),D.Sb(11,"nz-switch",7),D.Wb(),D.Wb(),D.Xb(12,"div",1),D.Xb(13,"div",8),D.Xb(14,"label"),D.Xc(15),D.jc(16,"translate"),D.Wb(),D.Wb(),D.Xb(17,"div",8),D.Xb(18,"label"),D.Xc(19),D.jc(20,"translate"),D.Wb(),D.Wb(),D.Xb(21,"div",9),D.Xb(22,"label"),D.Xc(23),D.jc(24,"translate"),D.Wb(),D.Wb(),D.Xb(25,"div",9),D.Xb(26,"label"),D.Xc(27),D.jc(28,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(29,"div",1),D.Xb(30,"div",8),D.Xb(31,"nz-form-item"),D.Xb(32,"nz-form-control"),D.Xb(33,"nz-input-group"),D.Sb(34,"input",10),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(35,"div",8),D.Xb(36,"nz-form-item"),D.Xb(37,"nz-form-control"),D.Xb(38,"nz-input-group"),D.Sb(39,"input",11),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(40,"div",12),D.Xb(41,"nz-form-item"),D.Xb(42,"nz-form-control"),D.Xb(43,"nz-input-group"),D.Sb(44,"input",13),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(45,"div",14),D.Xb(46,"nz-form-item"),D.Xb(47,"nz-form-control"),D.Xb(48,"nz-input-group"),D.Sb(49,"input",15),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.rc("formGroup",e.form),D.Db(4),D.Yc(D.kc(5,7,"PATIENT.INSURANCE_INFORMATION")),D.Db(4),D.Yc(D.kc(9,9,"PATIENT.DOES_PATIENT_HAVE_SECONDARY_INSURANCE")),D.Db(7),D.Yc(D.kc(16,11,"INSURANCE.PRIMARY_INSURANCE_CARRIER_NAME")),D.Db(4),D.Yc(D.kc(20,13,"INSURANCE.INSURER_MEMBER_ID")),D.Db(4),D.Yc(D.kc(24,15,"INSURANCE.SECONDARY_INSURANCE_CARRIER_NAME")),D.Db(4),D.Yc(D.kc(28,17,"INSURANCE.INSURER_MEMBER_ID")))},directives:[ul.b,d.v,d.m,k.c,k.a,V.a,hl.a,d.u,d.k,ul.c,ul.a,T.a,je.c,d.d,je.b],pipes:[Vt.a],styles:["[_nghost-%COMP%]     .ant-input-group-addon:empty{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid #e8e8e8}[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px!important}input[_ngcontent-%COMP%]{border:1px solid #e8e8e8}[_nghost-%COMP%]     .ant-select-selector{background:inherit!important}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:#262626}[_nghost-%COMP%]     .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form label{font:normal normal normal 12px/16px Nunito;color:#2f4f4f;flex-direction:row-reverse}[_nghost-%COMP%]     .ant-checkbox-wrapper{display:inline-flex}[_nghost-%COMP%]     .ant-checkbox-checked{border:none}nz-spin[_ngcontent-%COMP%]{display:inline-block;margin-right:10px}","h3[_ngcontent-%COMP%] {\n\t\t\t\tmargin-left: 5px;\n\t\t\t\tmargin-top: 5px;\n\t\t\t}\n\n\t\t\t#multiple[_ngcontent-%COMP%] {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\tlabel[_ngcontent-%COMP%] {\n\t\t\t\tfont: normal normal normal 12px/16px 'Nunito';\n\t\t\t\tcolor: var(--tertiary-color);\n\t\t\t\tmargin-left: 5px;\n\t\t\t\tmargin-bottom: 5px;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.shaded[_ngcontent-%COMP%] {\n\t\t\t\tbackground: #dbdbdb 0% 0% no-repeat padding-box;\n\t\t\t}\n\n\t\t\t#top-left[_ngcontent-%COMP%] {\n\t\t\t\tpadding-top: 15px;\n\t\t\t\tpadding-bottom: 10px;\n\t\t\t\tborder-top-left-radius: 5px;\n\t\t\t}\n\n\t\t\t#top-right[_ngcontent-%COMP%] {\n\t\t\t\tpadding-top: 15px;\n\t\t\t\tborder-top-right-radius: 5px;\n\t\t\t}\n\n\t\t\t#bottom-left[_ngcontent-%COMP%] {\n\t\t\t\tborder-bottom-left-radius: 5px;\n\t\t\t}\n\n\t\t\t#bottom-right[_ngcontent-%COMP%] {\n\t\t\t\tborder-bottom-right-radius: 5px;\n\t\t\t}"]}),t})();const Il=["patientFormEl"],Dl=["searchAddress"];function Cl(t,e){if(1&t){const t=D.Yb();D.Xb(0,"app-icons",94),D.ec("click",function(){D.Lc(t);const e=D.ic(2);return e.passwordVisible=!e.passwordVisible}),D.Wb()}if(2&t){const t=D.ic(2);D.rc("color",t.passwordVisible?"#a7c853":"#8A8A8A")}}function Xl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"COMMON.REQUIRED")," "))}function El(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"RESET_PASSWORD.MINIMUM_LENGTH_ALERT_MESSAGE")," "))}function Tl(t,e){if(1&t&&(D.Vc(0,Xl,3,3,"ng-container",95),D.Vc(1,El,3,3,"ng-container",95)),2&t){const t=e.$implicit;D.rc("ngIf",t.hasError("required")),D.Db(1),D.rc("ngIf",t.hasError("minlength"))}}function zl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"COMMON.REQUIRED")," "))}function _l(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function yl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PATIENT.EMAIL_ALREADY_ASSIGNED_TO_USER")," "))}function Ol(t,e){if(1&t&&(D.Vc(0,zl,3,3,"ng-container",95),D.Vc(1,_l,3,3,"ng-container",95),D.Vc(2,yl,3,3,"ng-container",95)),2&t){const t=e.$implicit;D.rc("ngIf",t.hasError("required")),D.Db(1),D.rc("ngIf",t.hasError("email")),D.Db(1),D.rc("ngIf",t.hasError("notUnique"))}}function Ml(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Al(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Pl(t,e){if(1&t&&(D.Xb(0,"label",97),D.Xc(1),D.Wb()),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key),D.Db(1),D.Zc(" ",null==t?null:t.value," ")}}function Nl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"COMMON.REQUIRED")," "))}function Wl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function Rl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function xl(t,e){if(1&t&&(D.Xb(0,"div",98),D.Vc(1,Nl,3,3,"ng-container",95),D.Vc(2,Wl,3,3,"ng-container",95),D.Vc(3,Rl,3,3,"ng-container",95),D.Wb()),2&t){const t=D.ic(2);let e=null,n=null,i=null,a=null,s=null,o=null;D.Db(1),D.rc("ngIf",null==t.patientForm||null==(e=t.patientForm.get("primaryNumber"))||null==(n=e.get("number"))?null:n.errors.required),D.Db(1),D.rc("ngIf",null==t.patientForm||null==(i=t.patientForm.get("primaryNumber"))||null==(a=i.get("number"))?null:a.errors.minlength),D.Db(1),D.rc("ngIf",null==t.patientForm||null==(s=t.patientForm.get("primaryNumber"))||null==(o=s.get("number"))?null:o.errors.pattern)}}function wl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"COMMON.REQUIRED")," "))}function Vl(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function Ll(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function kl(t,e){if(1&t&&(D.Xb(0,"div",98),D.Vc(1,wl,3,3,"ng-container",95),D.Vc(2,Vl,3,3,"ng-container",95),D.Vc(3,Ll,3,3,"ng-container",95),D.Wb()),2&t){const t=D.ic(2);let e=null,n=null,i=null,a=null,s=null,o=null;D.Db(1),D.rc("ngIf",null==t.patientForm||null==(e=t.patientForm.get("secondaryNumber"))||null==(n=e.get("number"))?null:n.errors.required),D.Db(1),D.rc("ngIf",null==t.patientForm||null==(i=t.patientForm.get("secondaryNumber"))||null==(a=i.get("number"))?null:a.errors.minlength),D.Db(1),D.rc("ngIf",null==t.patientForm||null==(s=t.patientForm.get("secondaryNumber"))||null==(o=s.get("number"))?null:o.errors.pattern)}}function Fl(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"span",103),D.Xb(2,"span",104),D.jc(3,"tenantName"),D.Xc(4),D.jc(5,"tenantName"),D.Wb(),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(2),D.rc("nzTooltipTitle",D.kc(3,2,null==t?null:t.tenantId)),D.Db(2),D.Zc(" ",D.kc(5,4,null==t?null:t.tenantId)," ")}}const Ul=function(){return["topLeft","leftTop"]};function jl(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"nz-option",99),D.Xb(2,"span",100),D.Xb(3,"span",101),D.Xc(4),D.Wb(),D.Vc(5,Fl,6,6,"ng-container",102),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.sc("nzLabel",null==t?null:t.value),D.rc("nzValue",null==t?null:t.key),D.Db(2),D.rc("nzTooltipTitle",null==t?null:t.value)("nzTooltipPlacement",D.xc(5,Ul)),D.Db(1),D.Zc(" ",null==t?null:t.value," ")}}function Yl(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Bl(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Hl(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function Gl(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}function $l(t,e){if(1&t&&D.Sb(0,"nz-option",96),2&t){const t=e.$implicit;D.rc("nzValue",null==t?null:t.key)("nzLabel",null==t?null:t.value)}}const Zl=function(){return{standalone:!0}},ql=function(){return[48,0]},Kl=function(){return[56,0]},Ql=function(t){return{"disabled-text":t}};function Jl(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",1),D.Xb(1,"form",2,3),D.ec("ngSubmit",function(){return D.Lc(t),D.ic().submit()})("keydown.enter",function(t){return t.preventDefault()}),D.Xb(3,"h3",4),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Sb(6,"div",5),D.Xb(7,"div",6),D.Xb(8,"div",7),D.Xb(9,"nz-form-item"),D.Xb(10,"nz-form-control",8),D.jc(11,"translate"),D.Xb(12,"label"),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Sb(15,"input",9),D.Wb(),D.Wb(),D.Wb(),D.Xb(16,"div",7),D.Xb(17,"nz-form-item"),D.Xb(18,"nz-form-control",8),D.jc(19,"translate"),D.Xb(20,"label"),D.Xc(21),D.jc(22,"translate"),D.Wb(),D.Sb(23,"input",10),D.Wb(),D.Wb(),D.Wb(),D.Xb(24,"div",7),D.Xb(25,"nz-form-item"),D.Xb(26,"nz-form-control",8),D.jc(27,"translate"),D.Xb(28,"label"),D.Xc(29),D.jc(30,"translate"),D.Wb(),D.Sb(31,"input",11),D.Wb(),D.Wb(),D.Wb(),D.Xb(32,"div",7),D.Xb(33,"nz-form-item"),D.Xb(34,"nz-form-control",8),D.Xb(35,"label"),D.Xc(36),D.jc(37,"translate"),D.Wb(),D.Xb(38,"nz-input-group",12),D.Sb(39,"input",13),D.Wb(),D.Wb(),D.Vc(40,Cl,1,1,"ng-template",null,14,D.Wc),D.Vc(42,Tl,2,2,"ng-template",null,15,D.Wc),D.Wb(),D.Wb(),D.Wb(),D.Sb(44,"div",5),D.Xb(45,"div",6),D.Xb(46,"div",7),D.Xb(47,"nz-form-item"),D.Xb(48,"nz-form-control",8),D.Xb(49,"nz-input-group"),D.Xb(50,"label"),D.Xc(51),D.jc(52,"translate"),D.Wb(),D.Sb(53,"input",16),D.Wb(),D.Wb(),D.Vc(54,Ol,3,3,"ng-template",null,17,D.Wc),D.Wb(),D.Wb(),D.Xb(56,"div",7),D.Xb(57,"nz-form-item"),D.Xb(58,"nz-form-control",8),D.jc(59,"translate"),D.Xb(60,"label"),D.Xc(61),D.jc(62,"translate"),D.Wb(),D.Sb(63,"nz-date-picker",18),D.Wb(),D.Wb(),D.Wb(),D.Xb(64,"div",7),D.Xb(65,"nz-form-item"),D.Xb(66,"nz-form-control",8),D.jc(67,"translate"),D.Xb(68,"label"),D.Xc(69),D.jc(70,"translate"),D.Wb(),D.Xb(71,"nz-select",19),D.Vc(72,Ml,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(73,"div",7),D.Xb(74,"nz-form-item"),D.Xb(75,"nz-form-control",8),D.jc(76,"translate"),D.Xb(77,"label"),D.Xc(78),D.jc(79,"translate"),D.Wb(),D.Xb(80,"nz-select",21),D.Vc(81,Al,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(82,"div",5),D.Xb(83,"div",6),D.Xb(84,"div",22),D.Xb(85,"nz-form-item"),D.Xb(86,"nz-form-control"),D.Xb(87,"label"),D.Xc(88),D.jc(89,"translate"),D.Wb(),D.Sb(90,"textarea",23),D.Wb(),D.Wb(),D.Wb(),D.Xb(91,"div",7),D.Xb(92,"nz-form-item"),D.Xb(93,"nz-form-control",8),D.jc(94,"translate"),D.Xb(95,"label"),D.Xc(96),D.jc(97,"translate"),D.Wb(),D.Xb(98,"nz-radio-group",24),D.Vc(99,Pl,2,2,"label",25),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(100,"div",26),D.Xb(101,"div",7),D.Xb(102,"nz-form-item"),D.Xb(103,"nz-form-control"),D.Sb(104,"nz-switch",27),D.Xb(105,"label",28),D.Xc(106),D.jc(107,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(108,"div",7),D.Xb(109,"nz-form-item"),D.Xb(110,"nz-form-control",8),D.jc(111,"translate"),D.Sb(112,"nz-switch",29),D.Xb(113,"label",28),D.Xc(114),D.jc(115,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(116,"nz-divider"),D.Xb(117,"div"),D.Xb(118,"h4",4),D.Xc(119),D.jc(120,"translate"),D.Wb(),D.Xb(121,"div",30),D.Xb(122,"div",31),D.Xb(123,"div",32),D.Xb(124,"label",33),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().daysAllChecked=e})("ngModelChange",function(){return D.Lc(t),D.ic().updateAllChecked()}),D.Xc(125," Check all "),D.Wb(),D.Wb(),D.Xb(126,"div",34),D.Xb(127,"nz-checkbox-group",35),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().daysOptions=e})("ngModelChange",function(){return D.Lc(t),D.ic().updateSingleChecked()}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(128,"div",36),D.Xb(129,"div",30),D.Xb(130,"div",37),D.Xc(131," Available from: "),D.Wb(),D.Xb(132,"div",38),D.Xc(133," Available till: "),D.Wb(),D.Wb(),D.Xb(134,"div",30),D.Xb(135,"div",39),D.Xb(136,"nz-time-picker",40),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().onTimeChange(e,"FROM")}),D.Wb(),D.Wb(),D.Xb(137,"div",41),D.Xb(138,"nz-time-picker",42),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().onTimeChange(e,"TO")}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(139,"nz-divider"),D.Xb(140,"div",43),D.Xb(141,"div",44),D.Xb(142,"div",45),D.Xb(143,"div",22),D.Xb(144,"label"),D.Xc(145,"Primary Contact Number*"),D.Wb(),D.Wb(),D.Wb(),D.Xb(146,"div",43),D.Xb(147,"div",46),D.Xb(148,"nz-form-item"),D.Xb(149,"nz-form-control",8),D.Xb(150,"nz-input-group",47),D.Sb(151,"input",48),D.Wb(),D.Wb(),D.Vc(152,xl,4,3,"div",49),D.Wb(),D.Wb(),D.Xb(153,"div",46),D.Xb(154,"nz-form-item"),D.Xb(155,"nz-form-control"),D.Xb(156,"label",50),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().resetPreferredSecondaryNumber(e)}),D.Xc(157," Mark as preferred "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(158,"div",43),D.Xb(159,"div",51),D.Xb(160,"label"),D.Xc(161,"Type"),D.Wb(),D.Wb(),D.Xb(162,"div",51),D.Xb(163,"label"),D.Xc(164,"Preferences"),D.Wb(),D.Wb(),D.Wb(),D.Xb(165,"div",43),D.Xb(166,"div",51),D.Xb(167,"nz-form-item"),D.Xb(168,"nz-form-control"),D.Xb(169,"nz-select",52),D.Sb(170,"nz-option",53),D.Sb(171,"nz-option",54),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(172,"div",51),D.Xb(173,"nz-form-item"),D.Xb(174,"nz-form-control"),D.Sb(175,"nz-switch",55),D.Xb(176,"label",56),D.Xc(177," Contact via Audio Call "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(178,"div",43),D.Xb(179,"div",51),D.Xb(180,"div"),D.Xb(181,"label"),D.Xc(182,"Label"),D.Wb(),D.Wb(),D.Xb(183,"nz-form-item"),D.Xb(184,"nz-form-control",8),D.jc(185,"translate"),D.Xb(186,"nz-input-group"),D.Sb(187,"input",57),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(188,"div",51),D.Xb(189,"nz-form-item"),D.Xb(190,"nz-form-control"),D.Sb(191,"nz-switch",58),D.Xb(192,"label",56),D.Xc(193," Contact via SMS "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(194,"div",45),D.Xb(195,"div",51),D.Xb(196,"label"),D.Xc(197,"Other Preferences"),D.Wb(),D.Wb(),D.Wb(),D.Xb(198,"div",45),D.Xb(199,"div",51),D.Xb(200,"nz-form-item"),D.Xb(201,"nz-form-control"),D.Sb(202,"nz-switch",59),D.Xb(203,"label",56),D.Xc(204," Prefers Reminder SMS "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(205,"div",51),D.Xb(206,"nz-form-item"),D.Xb(207,"nz-form-control"),D.Sb(208,"nz-switch",60),D.Xb(209,"label",56),D.Xc(210," Contact via Video Call "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(211,"div",61),D.Xb(212,"div",45),D.Xb(213,"div",22),D.Xb(214,"label"),D.Xc(215,"Secondary Contact Number"),D.Wb(),D.Wb(),D.Wb(),D.Xb(216,"div",43),D.Xb(217,"div",46),D.Xb(218,"nz-form-item"),D.Xb(219,"nz-form-control"),D.Xb(220,"nz-input-group",47),D.Sb(221,"input",48),D.Wb(),D.Wb(),D.Vc(222,kl,4,3,"div",49),D.Wb(),D.Wb(),D.Xb(223,"div",46),D.Xb(224,"nz-form-item"),D.Xb(225,"nz-form-control"),D.Xb(226,"label",50),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().resetPreferredPrimaryNumber(e)}),D.Xc(227," Mark as preferred "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(228,"div",43),D.Xb(229,"div",51),D.Xb(230,"label"),D.Xc(231,"Type"),D.Wb(),D.Wb(),D.Xb(232,"div",51),D.Xb(233,"label"),D.Xc(234,"Preferences"),D.Wb(),D.Wb(),D.Wb(),D.Xb(235,"div",43),D.Xb(236,"div",51),D.Xb(237,"nz-form-item"),D.Xb(238,"nz-form-control"),D.Xb(239,"nz-select",52),D.Sb(240,"nz-option",53),D.Sb(241,"nz-option",54),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(242,"div",51),D.Xb(243,"nz-form-item"),D.Xb(244,"nz-form-control"),D.Sb(245,"nz-switch",55),D.Xb(246,"label",56),D.Xc(247," Contact via Audio Call "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(248,"div",43),D.Xb(249,"div",51),D.Xb(250,"div"),D.Xb(251,"label"),D.Xc(252,"Label"),D.Wb(),D.Wb(),D.Xb(253,"nz-form-item"),D.Xb(254,"nz-form-control",8),D.jc(255,"translate"),D.Xb(256,"nz-input-group"),D.Sb(257,"input",57),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(258,"div",51),D.Xb(259,"nz-form-item"),D.Xb(260,"nz-form-control"),D.Sb(261,"nz-switch",58),D.Xb(262,"label",56),D.Xc(263," Contact via SMS "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(264,"div",45),D.Xb(265,"div",51),D.Xb(266,"label"),D.Xc(267,"Other Preferences"),D.Wb(),D.Wb(),D.Wb(),D.Xb(268,"div",45),D.Xb(269,"div",51),D.Xb(270,"nz-form-item"),D.Xb(271,"nz-form-control"),D.Sb(272,"nz-switch",59),D.Xb(273,"label",56),D.Xc(274," Prefers Reminder SMS "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(275,"nz-divider"),D.Xb(276,"div",6),D.Xb(277,"div",51),D.Xb(278,"label"),D.Xc(279),D.jc(280,"translate"),D.Wb(),D.Wb(),D.Xb(281,"div",62),D.Xb(282,"label"),D.Xc(283),D.jc(284,"translate"),D.Wb(),D.Wb(),D.Xb(285,"div",63),D.Xb(286,"label"),D.Xc(287,"PO Box #"),D.Wb(),D.Wb(),D.Wb(),D.Xb(288,"div",6),D.Xb(289,"div",51),D.Xb(290,"nz-form-item"),D.Xb(291,"nz-form-control",8),D.jc(292,"translate"),D.Sb(293,"input",64,65),D.jc(295,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(296,"div",62),D.Xb(297,"nz-form-item"),D.Xb(298,"nz-form-control",8),D.jc(299,"translate"),D.Sb(300,"input",66),D.Wb(),D.Wb(),D.Wb(),D.Xb(301,"div",63),D.Xb(302,"nz-form-item"),D.Xb(303,"nz-form-control",8),D.jc(304,"translate"),D.Sb(305,"input",67),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(306,"div",5),D.Xb(307,"div",6),D.Xb(308,"div",68),D.Xb(309,"label"),D.Xc(310),D.jc(311,"translate"),D.Wb(),D.Wb(),D.Xb(312,"div",68),D.Xb(313,"label"),D.Xc(314),D.jc(315,"translate"),D.Wb(),D.Wb(),D.Xb(316,"div",68),D.Xb(317,"label"),D.Xc(318),D.jc(319,"translate"),D.Wb(),D.Wb(),D.Xb(320,"div",68),D.Xb(321,"label"),D.Xc(322),D.jc(323,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(324,"div",6),D.Xb(325,"div",68),D.Xb(326,"nz-form-item"),D.Xb(327,"nz-form-control",8),D.jc(328,"translate"),D.Sb(329,"input",69),D.Wb(),D.Wb(),D.Wb(),D.Xb(330,"div",68),D.Xb(331,"nz-form-item"),D.Xb(332,"nz-form-control",8),D.jc(333,"translate"),D.Sb(334,"input",70),D.Wb(),D.Wb(),D.Wb(),D.Xb(335,"div",68),D.Xb(336,"nz-form-item"),D.Xb(337,"nz-form-control",8),D.jc(338,"translate"),D.Sb(339,"input",71),D.Wb(),D.Wb(),D.Wb(),D.Xb(340,"div",68),D.Xb(341,"nz-form-item"),D.Xb(342,"nz-form-control",8),D.jc(343,"translate"),D.Sb(344,"input",72),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(345,"nz-divider"),D.Sb(346,"div",5),D.Sb(347,"div",5),D.Xb(348,"h3",4),D.Xc(349),D.jc(350,"translate"),D.Wb(),D.Sb(351,"div",5),D.Xb(352,"div",6),D.Xb(353,"div",68),D.Xb(354,"label"),D.Xc(355,"Site*"),D.Wb(),D.Wb(),D.Xb(356,"div",68),D.Xb(357,"label"),D.Xc(358),D.jc(359,"translate"),D.Wb(),D.Wb(),D.Xb(360,"div",68),D.Xb(361,"label"),D.Xc(362),D.jc(363,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(364,"div",6),D.Xb(365,"div",68),D.Xb(366,"nz-form-item"),D.Xb(367,"nz-form-control",8),D.jc(368,"translate"),D.Xb(369,"nz-select",73),D.Vc(370,jl,6,6,"ng-container",74),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(371,"div",68),D.Xb(372,"nz-form-item"),D.Xb(373,"nz-form-control",8),D.jc(374,"translate"),D.Xb(375,"nz-select",75),D.Vc(376,Yl,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(377,"div",68),D.Xb(378,"nz-form-item"),D.Xb(379,"nz-form-control"),D.Sb(380,"input",76),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(381,"div",5),D.Sb(382,"div",5),D.Sb(383,"div",5),D.Sb(384,"nz-divider"),D.Xb(385,"h3",4),D.Xc(386),D.jc(387,"translate"),D.Wb(),D.Sb(388,"div",5),D.Xb(389,"div",6),D.Xb(390,"div",7),D.Xb(391,"label"),D.Xc(392),D.jc(393,"translate"),D.Wb(),D.Wb(),D.Xb(394,"div",7),D.Xb(395,"label"),D.Xc(396),D.jc(397,"translate"),D.Wb(),D.Wb(),D.Xb(398,"div",7),D.Xb(399,"label"),D.Xc(400),D.jc(401,"translate"),D.Wb(),D.Wb(),D.Xb(402,"div",7),D.Xb(403,"label"),D.Xc(404),D.jc(405,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(406,"div",6),D.Xb(407,"div",7),D.Sb(408,"user-height",77),D.Wb(),D.Xb(409,"div",78),D.Xb(410,"div",79),D.Xb(411,"div",62),D.Xb(412,"nz-form-item"),D.Xb(413,"nz-form-control",8),D.jc(414,"translate"),D.Xb(415,"nz-select",80),D.Vc(416,Bl,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(417,"div",81),D.Xb(418,"nz-form-item"),D.Xb(419,"nz-form-control",8),D.jc(420,"translate"),D.Sb(421,"nz-input-number",82),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(422,"div",83),D.Xb(423,"div",79),D.Xb(424,"div",62),D.Xb(425,"nz-form-item"),D.Xb(426,"nz-form-control",8),D.jc(427,"translate"),D.Xb(428,"nz-select",80),D.Vc(429,Hl,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(430,"div",81),D.Xb(431,"nz-form-item"),D.Xb(432,"nz-form-control",8),D.jc(433,"translate"),D.Sb(434,"nz-input-number",82),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(435,"div",84),D.Xb(436,"div",79),D.Xb(437,"div",62),D.Xb(438,"nz-form-item"),D.Xb(439,"nz-form-control",8),D.jc(440,"translate"),D.Xb(441,"nz-select",80),D.Vc(442,Gl,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(443,"div",81),D.Xb(444,"nz-form-item"),D.Xb(445,"nz-form-control",8),D.jc(446,"translate"),D.Sb(447,"nz-input-number",82),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(448,"div",5),D.Xb(449,"div",6),D.Xb(450,"div",85),D.Xb(451,"nz-form-item"),D.Xb(452,"nz-form-control",8),D.jc(453,"translate"),D.Xb(454,"label"),D.Xc(455),D.jc(456,"translate"),D.Wb(),D.Xb(457,"nz-select",86),D.Vc(458,$l,1,2,"nz-option",20),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(459,"div",87),D.Xb(460,"div",88),D.Xb(461,"div",7),D.Xb(462,"nz-form-item"),D.Xb(463,"nz-form-control",8),D.jc(464,"translate"),D.Xb(465,"label"),D.Xc(466),D.jc(467,"translate"),D.Wb(),D.Xb(468,"label",89),D.Xc(469),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(470,"div",7),D.Xb(471,"nz-form-item"),D.Xb(472,"nz-form-control",8),D.jc(473,"translate"),D.Xb(474,"label"),D.Xc(475,"\xa0"),D.Wb(),D.Xb(476,"label",90),D.Xc(477),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(478,"div",7),D.Xb(479,"nz-form-item"),D.Xb(480,"nz-form-control",8),D.jc(481,"translate"),D.Xb(482,"label"),D.Xc(483,"\xa0"),D.Wb(),D.Xb(484,"label",91),D.Xc(485),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(486,"div",7),D.Xb(487,"nz-form-item"),D.Xb(488,"nz-form-control",8),D.jc(489,"translate"),D.Xb(490,"label"),D.Xc(491,"\xa0"),D.Wb(),D.Xb(492,"label",92),D.Xc(493),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(494,"div",5),D.Sb(495,"div",5),D.Sb(496,"div",5),D.Sb(497,"nz-divider"),D.Xb(498,"div",6),D.Xb(499,"div",31);D.Sb(500,"user-insurance",93),D.Wb(),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=D.Ic(41),e=D.Ic(43),n=D.Ic(55),i=D.ic();let a=null,s=null,o=null,l=null,r=null,c=null,d=null,b=null,u=null,p=null,h=null,g=null,f=null,m=null,v=null,S=null,I=null,C=null;D.Db(1),D.rc("formGroup",i.patientForm),D.Db(3),D.Yc(D.kc(5,120,"PATIENT.BASIC_PATIENT_INFORMATION")),D.Db(6),D.sc("nzErrorTip",D.kc(11,122,"COMMON.REQUIRED")),D.Db(3),D.Zc("",D.kc(14,124,"COMMON.FIRSTNAME"),"*"),D.Db(5),D.sc("nzErrorTip",D.kc(19,126,"COMMON.REQUIRED")),D.Db(3),D.Zc("",D.kc(22,128,"COMMON.LASTNAME"),"*"),D.Db(5),D.sc("nzErrorTip",D.kc(27,130,"COMMON.REQUIRED")),D.Db(3),D.Yc(D.kc(30,132,"COMMON.USERNAME")),D.Db(5),D.rc("nzErrorTip",e),D.Db(2),D.Yc(D.kc(37,134,"COMMON.PASSWORD")),D.Db(2),D.rc("nzSuffix",t),D.Db(1),D.rc("type",i.passwordVisible?"text":"password"),D.Db(9),D.rc("nzErrorTip",n),D.Db(3),D.Yc(D.kc(52,136,"COMMON.EMAIL")),D.Db(7),D.sc("nzErrorTip",D.kc(59,138,"COMMON.REQUIRED")),D.Db(3),D.Zc("",D.kc(62,140,"COMMON.DOB"),"*"),D.Db(2),D.rc("nzFormat","MM-dd-yyyy")("nzDisabledDate",i.disabledDate),D.Db(3),D.sc("nzErrorTip",D.kc(67,142,"COMMON.REQUIRED")),D.Db(3),D.Zc("",D.kc(70,144,"PATIENT.TIME_ZONE"),"*"),D.Db(3),D.rc("ngForOf",i.timezones),D.Db(3),D.sc("nzErrorTip",D.kc(76,146,"COMMON.REQUIRED")),D.Db(3),D.Zc("",D.kc(79,148,"PATIENT.PREFERRED_COMMUNICATION_LANGUAGE"),"*"),D.Db(3),D.rc("ngForOf",i.languages),D.Db(7),D.Yc(D.kc(89,150,"PATIENT.NOTES")),D.Db(5),D.sc("nzErrorTip",D.kc(94,152,"COMMON.REQUIRED")),D.Db(3),D.Zc("",D.kc(97,154,"PATIENT.GENDER"),"*"),D.Db(3),D.rc("ngForOf",i.genders),D.Db(7),D.Yc(D.kc(107,156,"PATIENT.VM_CONSENT")),D.Db(4),D.sc("nzErrorTip",D.kc(111,158,"COMMON.REQUIRED")),D.Db(4),D.Yc(D.kc(115,160,"PATIENT.HIPAA_CONSENT")),D.Db(5),D.Yc(D.kc(120,162,"PATIENT.AVAILABLE_HOURS")),D.Db(5),D.rc("ngModel",i.daysAllChecked)("nzIndeterminate",i.daysIndeterminate)("ngModelOptions",D.xc(242,Zl)),D.Db(3),D.rc("ngModel",i.daysOptions)("ngModelOptions",D.xc(243,Zl)),D.Db(9),D.rc("nzUse12Hours",!0),D.Db(2),D.rc("nzUse12Hours",!0),D.Db(2),D.rc("nzGutter",D.xc(244,ql)),D.Db(6),D.rc("nzGutter",D.xc(245,Kl)),D.Db(3),D.rc("nzErrorTip",i.mobileErrors),D.Db(1),D.tc("nzAddOnBefore","[",i.countryCode,"]"),D.Db(2),D.rc("ngIf",(null==i.patientForm||null==(a=i.patientForm.get("primaryNumber"))?null:a.get("number").dirty)&&(null==i.patientForm||null==(a=i.patientForm.get("primaryNumber"))||null==(s=a.get("number"))?null:s.errors)),D.Db(4),D.rc("nzValue",i.preferred),D.Db(2),D.rc("nzGutter",D.xc(246,Kl)),D.Db(7),D.rc("nzGutter",D.xc(247,Kl)),D.Db(11),D.rc("ngClass",D.yc(248,Ql,!(null!=i.patientForm&&null!=(o=i.patientForm.get("primaryNumber"))&&null!=(l=o.get("audioCallNotification"))&&l.value))),D.Db(2),D.rc("nzGutter",D.xc(250,Kl)),D.Db(6),D.sc("nzErrorTip",D.kc(185,164,"COMMON.REQUIRED")),D.Db(8),D.rc("ngClass",D.yc(251,Ql,!(null!=i.patientForm&&null!=(r=i.patientForm.get("primaryNumber"))&&null!=(c=r.get("smsNotification"))&&c.value))),D.Db(11),D.rc("ngClass",D.yc(253,Ql,!(null!=i.patientForm&&null!=(d=i.patientForm.get("primaryNumber"))&&null!=(b=d.get("reminderSMSNotification"))&&b.value))),D.Db(6),D.rc("ngClass",D.yc(255,Ql,!(null!=i.patientForm&&null!=(u=i.patientForm.get("primaryNumber"))&&null!=(p=u.get("videoCallNotification"))&&p.value))),D.Db(7),D.rc("nzGutter",D.xc(257,Kl)),D.Db(4),D.tc("nzAddOnBefore","[",i.countryCode,"]"),D.Db(2),D.rc("ngIf",(null==i.patientForm||null==(h=i.patientForm.get("secondaryNumber"))?null:h.get("number").dirty)&&(null==i.patientForm||null==(h=i.patientForm.get("secondaryNumber"))||null==(g=h.get("number"))?null:g.errors)),D.Db(4),D.rc("nzValue",i.preferred),D.Db(2),D.rc("nzGutter",D.xc(258,Kl)),D.Db(7),D.rc("nzGutter",D.xc(259,Kl)),D.Db(11),D.rc("ngClass",D.yc(260,Ql,!(null!=i.patientForm&&null!=(f=i.patientForm.get("secondaryNumber"))&&null!=(m=f.get("audioCallNotification"))&&m.value))),D.Db(2),D.rc("nzGutter",D.xc(262,Kl)),D.Db(6),D.sc("nzErrorTip",D.kc(255,166,"COMMON.REQUIRED")),D.Db(8),D.rc("ngClass",D.yc(263,Ql,!(null!=i.patientForm&&null!=(v=i.patientForm.get("secondaryNumber"))&&null!=(S=v.get("smsNotification"))&&S.value))),D.Db(11),D.rc("ngClass",D.yc(265,Ql,!(null!=i.patientForm&&null!=(I=i.patientForm.get("secondaryNumber"))&&null!=(C=I.get("reminderSMSNotification"))&&C.value))),D.Db(6),D.Yc(D.kc(280,168,"PATIENT.HOME_ADDRESS_LINE_1")),D.Db(4),D.Yc(D.kc(284,170,"PATIENT.ADDRESS_LINE_2")),D.Db(8),D.sc("nzErrorTip",D.kc(292,172,"COMMON.REQUIRED")),D.Db(2),D.sc("placeholder",D.kc(295,174,"PATIENT.SEARCH_OR_ENTER_PATIENT_RESIDENTIAL_ADDRESS")),D.Db(5),D.sc("nzErrorTip",D.kc(299,176,"COMMON.REQUIRED")),D.Db(5),D.sc("nzErrorTip",D.kc(304,178,"COMMON.REQUIRED")),D.Db(7),D.Yc(D.kc(311,180,"ZIP_CODE")),D.Db(4),D.Yc(D.kc(315,182,"COMMON.COUNTRY")),D.Db(4),D.Yc(D.kc(319,184,"COMMON.STATE")),D.Db(4),D.Yc(D.kc(323,186,"COMMON.CITY")),D.Db(5),D.sc("nzErrorTip",D.kc(328,188,"COMMON.REQUIRED")),D.Db(5),D.sc("nzErrorTip",D.kc(333,190,"COMMON.REQUIRED")),D.Db(5),D.sc("nzErrorTip",D.kc(338,192,"COMMON.REQUIRED")),D.Db(5),D.sc("nzErrorTip",D.kc(343,194,"COMMON.REQUIRED")),D.Db(7),D.Yc(D.kc(350,196,"PATIENT.ORGANIZATIONAL_INFORMATION")),D.Db(9),D.Yc(D.kc(359,198,"COMMON.PROFILETAG")),D.Db(4),D.Yc(D.kc(363,200,"PATIENT.ID")),D.Db(5),D.sc("nzErrorTip",D.kc(368,202,"COMMON.REQUIRED")),D.Db(3),D.rc("ngForOf",i.locations),D.Db(3),D.sc("nzErrorTip",D.kc(374,204,"COMMON.REQUIRED")),D.Db(2),D.rc("nzMode","multiple"),D.Db(1),D.rc("ngForOf",i.tags),D.Db(10),D.Yc(D.kc(387,206,"PATIENT.HEALTH_INFORMATION")),D.Db(6),D.Yc(D.kc(393,208,"COMMON.HEIGHT")),D.Db(4),D.Yc(D.kc(397,210,"COMMON.WEIGHT")),D.Db(4),D.Yc(D.kc(401,212,"PATIENT.WAIST_SIZE")),D.Db(4),D.Yc(D.kc(405,214,"PATIENT.HIP_SIZE")),D.Db(9),D.sc("nzErrorTip",D.kc(414,216,"COMMON.REQUIRED")),D.Db(3),D.rc("ngForOf",i.weightUnits),D.Db(3),D.sc("nzErrorTip",D.kc(420,218,"COMMON.REQUIRED")),D.Db(2),D.rc("nzMin",1),D.Db(5),D.sc("nzErrorTip",D.kc(427,220,"COMMON.REQUIRED")),D.Db(3),D.rc("ngForOf",i.waistHipUnits),D.Db(3),D.sc("nzErrorTip",D.kc(433,222,"COMMON.REQUIRED")),D.Db(2),D.rc("nzMin",1),D.Db(5),D.sc("nzErrorTip",D.kc(440,224,"COMMON.REQUIRED")),D.Db(3),D.rc("ngForOf",i.waistHipUnits),D.Db(3),D.sc("nzErrorTip",D.kc(446,226,"COMMON.REQUIRED")),D.Db(2),D.rc("nzMin",1),D.Db(5),D.sc("nzErrorTip",D.kc(453,228,"COMMON.REQUIRED")),D.Db(3),D.Yc(D.kc(456,230,"COMMON.BLOODGROUP")),D.Db(3),D.rc("ngForOf",i.bloodGroups),D.Db(5),D.sc("nzErrorTip",D.kc(464,232,"COMMON.REQUIRED")),D.Db(3),D.Yc(D.kc(467,234,"PATIENT.SELECT_IF_YES")),D.Db(2),D.rc("nzValue",null==i.healthQuestions[0]?null:i.healthQuestions[0].key),D.Db(1),D.Zc(" ",null==i.healthQuestions[0]?null:i.healthQuestions[0].value," "),D.Db(3),D.sc("nzErrorTip",D.kc(473,236,"COMMON.REQUIRED")),D.Db(4),D.rc("nzValue",null==i.healthQuestions[1]?null:i.healthQuestions[1].key),D.Db(1),D.Zc(" ",null==i.healthQuestions[1]?null:i.healthQuestions[1].value," "),D.Db(3),D.sc("nzErrorTip",D.kc(481,238,"COMMON.REQUIRED")),D.Db(4),D.rc("nzValue",null==i.healthQuestions[2]?null:i.healthQuestions[2].key),D.Db(1),D.Zc(" ",null==i.healthQuestions[2]?null:i.healthQuestions[2].value," "),D.Db(3),D.sc("nzErrorTip",D.kc(489,240,"COMMON.REQUIRED")),D.Db(4),D.rc("nzValue",null==i.healthQuestions[3]?null:i.healthQuestions[3].key)("nzDisabled",!(null!=i.patientForm&&null!=i.patientForm.controls.hypertension&&i.patientForm.controls.hypertension.value)),D.Db(1),D.Zc(" ",null==i.healthQuestions[3]?null:i.healthQuestions[3].value," ")}}let tr=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r,c,d,b,u,p,h,g){var f;super(),this._fb=t,this._router=e,this._tagsService=n,this._leadsService=i,this.mapsAPILoader=a,this._staffService=s,this._messageService=o,this._patientsService=l,this._emailValidator=r,this._dataSharingService=c,this._notificationsService=d,this._patientsEventLogger=b,this._activatedRoute=u,this._translationsService=p,this._googleLocationService=h,this._privilegeUtil=g,this.timezones=Object(Wo.e)(),this.genders=Object(Wo.b)(),this.languages=Object(Wo.d)(),this.weightUnits=Object(Wo.g)(),this.waistHipUnits=Object(Wo.f)(),this.bloodGroups=Object(Wo.a)(),this.healthQuestions=Object(Wo.c)(),this.disabledDate=t=>(t=>Object(un.a)(t,new Date)>0)(t),this.daysOptions=[{label:"Mondays",value:"Mondays",checked:!1},{label:"Tuesdays",value:"Tuesdays",checked:!1},{label:"Wednesdays",value:"Wednesdays",checked:!1},{label:"Thursdays",value:"Thursdays",checked:!1},{label:"Fridays",value:"Fridays",checked:!1}],this.daysIndeterminate=!1,this.daysAllChecked=!1;const m=this._activatedRoute.snapshot.queryParamMap.get("patientName")||"Add a patient";this.patientId=this._activatedRoute.snapshot.paramMap.get("id"),this.mode=this._activatedRoute.snapshot.paramMap.get("mode")||"add",this.siteId=this._activatedRoute.snapshot.queryParamMap.get("siteId"),this.physicianId=this._activatedRoute.snapshot.queryParamMap.get("physicianId"),null===(f=this._dataSharingService.tenantSettings)||void 0===f||f.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e;t&&(this.tenantConfig=t,this.countryCode=null===(e=this.tenantConfig)||void 0===e?void 0:e.countryCode,this.initializeForm())}),this._translationsService.getMultiple("PATIENT","PATIENT.SAVED_SUCCESSFULLY").pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>this.translatedStrings=t),this._routeHelperService.setTitleForRoute(m),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(No.filter)(t=>!!t),Object(Xe.a)(this.unsubscribed)).subscribe(()=>{var t,e;"PENDING"!==this.patientForm.status&&(null===(e=null===(t=this.patientFormEl)||void 0===t?void 0:t.ngSubmit)||void 0===e||e.next())})}initializeForm(){({add:()=>this.newFormInitializer(),edit:()=>this.existingPatientFormInitializer(),lead:()=>this.leadFormInitializer()})[this.mode]()}newFormInitializer(){var t,e,n,i,a,s,o,l,r;const c=null===(t=this.tenantConfig)||void 0===t?void 0:t.timeZone,d=null===(e=this.tenantConfig)||void 0===e?void 0:e.language,b=null===(i=null===(n=this.tenantConfig)||void 0===n?void 0:n.usersBodyMeasurementUnits)||void 0===i?void 0:i.heightUnit,u=null===(s=null===(a=this.tenantConfig)||void 0===a?void 0:a.usersBodyMeasurementUnits)||void 0===s?void 0:s.weightUnit;this.patientForm=this._fb.group(Qo(c,b,u,d)),null===(r=null===(l=null===(o=this.patientForm)||void 0===o?void 0:o.controls)||void 0===l?void 0:l.email)||void 0===r||r.setAsyncValidators(this._emailValidator.uniqueEmailValidator()),setTimeout(()=>this.searchAddress()),this.getLocationFromZipcode(),this.validatePhoneNumberType()}existingPatientFormInitializer(){this._patientsService.fetchPatientById(this.patientId).subscribe(t=>{var e,n,i;this.patientForm=this._fb.group((t=>{var e,n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v,S,I,D,C,X,E,T,z,_,y;const O=new qo;null==t.availableHours&&(t.availableHours={days:[],fromTime:null,toTime:null}),null==t.patientConsent&&(t.patientConsent={vmConsent:!1,hipaaConsent:!1});for(const M in t)null===(e=O[M])||void 0===e||e.setValue(t[M]);return O.notes.setValue(null===(n=null==t?void 0:t.quickNote)||void 0===n?void 0:n.content),O.dateOfBirth.setValue(Object(Zo.a)(t.dateOfBirth)),O.location.setValue(t.locationId),O.language.setValue(null===(i=null==t?void 0:t.language)||void 0===i?void 0:i.locale),O.bloodGroup.setValue(null===(a=null==t?void 0:t.healthInfo)||void 0===a?void 0:a.bloodGroup),null===(s=O.weight)||void 0===s||s.setValue({unit:null!==(r=null===(l=null===(o=null==t?void 0:t.healthInfo)||void 0===o?void 0:o.weight)||void 0===l?void 0:l.unit)&&void 0!==r?r:"LBS",value:null!==(b=null===(d=null===(c=null==t?void 0:t.healthInfo)||void 0===c?void 0:c.weight)||void 0===d?void 0:d.value)&&void 0!==b?b:null}),null===(u=O.waist)||void 0===u||u.setValue({unit:null!==(g=null===(h=null===(p=null==t?void 0:t.healthInfo)||void 0===p?void 0:p.waistSize)||void 0===h?void 0:h.unit)&&void 0!==g?g:"CMS",value:null!==(v=null===(m=null===(f=null==t?void 0:t.healthInfo)||void 0===f?void 0:f.waistSize)||void 0===m?void 0:m.value)&&void 0!==v?v:null}),null===(S=O.hip)||void 0===S||S.setValue({unit:null!==(C=null===(D=null===(I=null==t?void 0:t.healthInfo)||void 0===I?void 0:I.hipSize)||void 0===D?void 0:D.unit)&&void 0!==C?C:"CMS",value:null!==(T=null===(E=null===(X=null==t?void 0:t.healthInfo)||void 0===X?void 0:X.hipSize)||void 0===E?void 0:E.value)&&void 0!==T?T:null}),al(O,null==t?void 0:t.phoneNumbers),nl(O,null==t?void 0:t.externalSources),((t,e)=>{var n,i,a;if((null==e?void 0:e.unit)&&"FEET"!==(null==e?void 0:e.unit))return void(null===(n=t.height)||void 0===n||n.setValue({unit:null==e?void 0:e.unit,value1:null!==(i=null==e?void 0:e.value)&&void 0!==i?i:null,value2:null}));const s=Math.floor((null==e?void 0:e.value)/12);null===(a=t.height)||void 0===a||a.setValue({unit:(null==e?void 0:e.unit)||"FEET",value1:s,value2:(null==e?void 0:e.value)-12*s})})(O,null===(z=null==t?void 0:t.healthInfo)||void 0===z?void 0:z.height),Jo(O,null==t?void 0:t.address),tl(O,null===(_=null==t?void 0:t.healthInfo)||void 0===_?void 0:_.habits),((t,e)=>{(null==e?void 0:e.length)&&e.forEach(e=>{Lo.DIABETIC===e.condition&&t.diabetic.setValue({input:!0}),Lo.HYPERTENSION===e.condition&&t.hypertension.setValue({input:!0}),Lo.HYPERTENSION===e.condition&&e.haveMedication&&t.hypertensionMedication.setValue({input:!0})})})(O,null===(y=null==t?void 0:t.healthInfo)||void 0===y?void 0:y.healthConditions),el(O,null==t?void 0:t.insuranceInformation),ol(O,null==t?void 0:t.patientConsent),sl(O,null==t?void 0:t.availableHours),O})(t)),null===(i=null===(n=null===(e=this.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.email)||void 0===i||i.setAsyncValidators(this._emailValidator.uniqueEmailValidator(this.patientId)),setTimeout(()=>{var e,n;return null===(n=null===(e=this.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.email.setValue(null==t?void 0:t.email)}),setTimeout(()=>this.searchAddress()),this.getLocationFromZipcode(),this.validatePhoneNumberType(),this.daysOptions.forEach(e=>{var n,i;return e.checked=null===(i=null===(n=null==t?void 0:t.availableHours)||void 0===n?void 0:n.days)||void 0===i?void 0:i.includes(e.value)})})}leadFormInitializer(){this._leadsService.getSpecificLeadForUser(this.patientId).subscribe(t=>{var e,n,i,a,s,o,l,r,c,d,b;const u=null===(e=this.tenantConfig)||void 0===e?void 0:e.timeZone,p=null===(n=this.tenantConfig)||void 0===n?void 0:n.language,h=null===(a=null===(i=this.tenantConfig)||void 0===i?void 0:i.usersBodyMeasurementUnits)||void 0===a?void 0:a.heightUnit,g=null===(o=null===(s=this.tenantConfig)||void 0===s?void 0:s.usersBodyMeasurementUnits)||void 0===o?void 0:o.weightUnit;this.patientForm=this._fb.group(((t,e,n,i,a,s)=>{var o,l,r,c,d,b,u,p,h,g,f,m,v,S,I,D,C,X,E,T;const z=Qo(e,n,i,a);return null===(o=null==z?void 0:z.firstName)||void 0===o||o.setValue(null===(l=null==t?void 0:t.patientInfo)||void 0===l?void 0:l.firstName),null===(r=null==z?void 0:z.lastName)||void 0===r||r.setValue(null===(c=null==t?void 0:t.patientInfo)||void 0===c?void 0:c.lastName),z.dateOfBirth.setValue(Object(Zo.a)(null===(d=null==t?void 0:t.patientInfo)||void 0===d?void 0:d.dateOfBirth)),null===(b=null==z?void 0:z.email)||void 0===b||b.setValue(null===(u=null==t?void 0:t.patientInfo)||void 0===u?void 0:u.email),null===(p=null==z?void 0:z.gender)||void 0===p||p.setValue(null===(h=null==t?void 0:t.patientInfo)||void 0===h?void 0:h.gender),s&&z.location.setValue(s),(null===(f=null===(g=null==t?void 0:t.patientInfo)||void 0===g?void 0:g.locations)||void 0===f?void 0:f.length)&&z.location.setValue(null===(v=null===(m=null==t?void 0:t.patientInfo)||void 0===m?void 0:m.locations[0])||void 0===v?void 0:v.id),Jo(z,null===(S=null==t?void 0:t.patientInfo)||void 0===S?void 0:S.address),tl(z,null===(I=null==t?void 0:t.patientInfo)||void 0===I?void 0:I.habits),al(z,null===(D=null==t?void 0:t.patientInfo)||void 0===D?void 0:D.phoneNumbers),nl(z,null===(C=null==t?void 0:t.patientInfo)||void 0===C?void 0:C.externalSources),el(z,null===(X=null==t?void 0:t.patientInfo)||void 0===X?void 0:X.insuranceInformation),ol(z,null===(E=null==t?void 0:t.patientInfo)||void 0===E?void 0:E.patientConsent),sl(z,null===(T=null==t?void 0:t.patientInfo)||void 0===T?void 0:T.availableHours),z})(t,u,h,g,p,this.siteId)),null===(c=null===(r=null===(l=this.patientForm)||void 0===l?void 0:l.controls)||void 0===r?void 0:r.email)||void 0===c||c.setAsyncValidators(this._emailValidator.uniqueEmailValidator(this.patientId)),this.countryCode=null===(b=null===(d=null==t?void 0:t.patientInfo)||void 0===d?void 0:d.phoneNumbers[0])||void 0===b?void 0:b.countryCode,setTimeout(()=>{var e,n,i;return null===(n=null===(e=this.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.email.setValue(null===(i=null==t?void 0:t.patientInfo)||void 0===i?void 0:i.email)}),setTimeout(()=>this.searchAddress()),this.getLocationFromZipcode(),this.validatePhoneNumberType(),this.daysOptions.forEach(e=>{var n,i,a;return e.checked=null===(a=null===(i=null===(n=null==t?void 0:t.patientInfo)||void 0===n?void 0:n.availableHours)||void 0===i?void 0:i.days)||void 0===a?void 0:a.includes(e.value)})})}validatePhoneNumberType(){var t,e,n,i,a,s,o,l,r,c;null===(a=null===(i=null===(n=null===(e=null===(t=this.patientForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.primaryNumber)||void 0===n?void 0:n.valueChanges)||void 0===i?void 0:i.pipe(Object(Xe.a)(this.unsubscribed)))||void 0===a||a.subscribe(t=>{var e,n,i,a,s,o;if("LANDLINE"===(null==t?void 0:t.type)){const t=null===(i=null===(n=null===(e=this.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.primaryNumber)||void 0===i?void 0:i.value;t.smsNotification=!1,t.reminderSMSNotification=!1,null===(o=null===(s=null===(a=this.patientForm)||void 0===a?void 0:a.controls)||void 0===s?void 0:s.primaryNumber)||void 0===o||o.patchValue(t,{emitEvent:!1})}}),null===(c=null===(r=null===(l=null===(o=null===(s=this.patientForm)||void 0===s?void 0:s.controls)||void 0===o?void 0:o.secondaryNumber)||void 0===l?void 0:l.valueChanges)||void 0===r?void 0:r.pipe(Object(Xe.a)(this.unsubscribed)))||void 0===c||c.subscribe(t=>{var e,n,i,a,s,o,l,r,c,b,u,p,h,g,f,m,v,S,I,D,C,X,E,T,z,_;if("LANDLINE"===(null==t?void 0:t.type)){const t=null===(i=null===(n=null===(e=this.patientForm)||void 0===e?void 0:e.controls)||void 0===n?void 0:n.secondaryNumber)||void 0===i?void 0:i.value;t.smsNotification=!1,t.reminderSMSNotification=!1,null===(o=null===(s=null===(a=this.patientForm)||void 0===a?void 0:a.controls)||void 0===s?void 0:s.secondaryNumber)||void 0===o||o.patchValue(t,{emitEvent:!1})}(null===(b=null===(c=null===(r=null===(l=this.patientForm)||void 0===l?void 0:l.controls)||void 0===r?void 0:r.secondaryNumber)||void 0===c?void 0:c.value.number)||void 0===b?void 0:b.length)?null===(g=null===(h=null===(p=null===(u=this.patientForm)||void 0===u?void 0:u.controls)||void 0===p?void 0:p.secondaryNumber)||void 0===h?void 0:h.get("label"))||void 0===g||g.setValidators([d.D.required,d.D.minLength(1)]):null===(S=null===(v=null===(m=null===(f=this.patientForm)||void 0===f?void 0:f.controls)||void 0===m?void 0:m.secondaryNumber)||void 0===v?void 0:v.get("label"))||void 0===S||S.clearValidators(),null===(X=null===(C=null===(D=null===(I=this.patientForm)||void 0===I?void 0:I.controls)||void 0===D?void 0:D.secondaryNumber)||void 0===C?void 0:C.get("label"))||void 0===X||X.markAsDirty({onlySelf:!0}),null===(_=null===(z=null===(T=null===(E=this.patientForm)||void 0===E?void 0:E.controls)||void 0===T?void 0:T.secondaryNumber)||void 0===z?void 0:z.get("label"))||void 0===_||_.updateValueAndValidity({onlySelf:!0})})}ngOnInit(){this._patientsEventLogger.patientActionEvent("","add_patient_dropdown"),this.getAllTags(),this.getAllLocations()}getAllTags(){this._tagsService.getTags("PATIENT",-1,0).subscribe(t=>{var e;this.tags=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.map(t=>({key:null==t?void 0:t.name,value:null==t?void 0:t.name}))})}getAllLocations(){this._staffService.fetchSitesForStaff().subscribe(t=>{this.locations=null==t?void 0:t.map(t=>({key:null==t?void 0:t.id,value:null==t?void 0:t.name,tenantId:null==t?void 0:t.tenantId}))})}searchAddress(){this.mapsAPILoader.load().then(()=>{var t;const e=new google.maps.places.Autocomplete(null===(t=this.searchElementRef)||void 0===t?void 0:t.nativeElement);e.addListener("place_changed",()=>{const t=Po.a.mapAddress(e);["streetAddress","streetAddress2","city","state","country","zipCode","lat","lng"].forEach(e=>{var n,i;null===(i=null===(n=this.patientForm)||void 0===n?void 0:n.controls[e])||void 0===i||i.patchValue(t[e],{emitEvent:!1})})})})}getLocationFromZipcode(){var t,e,n;null===(n=null===(e=null===(t=this.patientForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.zipCode)||void 0===n||n.valueChanges.pipe(Object(Le.a)(500),Object(Go.a)(),Object(No.filter)(t=>(null==t?void 0:t.length)>4),Object(Ee.a)(t=>this._googleLocationService.fetchLocationFromZipCode(t))).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n,i,a,s,o,l;let r,c,d;null===(e=null==t?void 0:t.results)||void 0===e||e.forEach(t=>{var e;null===(e=null==t?void 0:t.address_components)||void 0===e||e.forEach(t=>{var e,n,i;-1!==(null===(e=null==t?void 0:t.types)||void 0===e?void 0:e.findIndex(t=>"country"===t))&&(r=t.long_name),-1!==(null===(n=null==t?void 0:t.types)||void 0===n?void 0:n.findIndex(t=>"administrative_area_level_1"===t))&&(c=t.long_name),-1!==(null===(i=null==t?void 0:t.types)||void 0===i?void 0:i.findIndex(t=>"locality"===t))&&(d=t.long_name)})}),null===(i=null===(n=this.patientForm)||void 0===n?void 0:n.controls)||void 0===i||i.city.setValue(d),null===(s=null===(a=this.patientForm)||void 0===a?void 0:a.controls)||void 0===s||s.state.setValue(c),null===(l=null===(o=this.patientForm)||void 0===o?void 0:o.controls)||void 0===l||l.country.setValue(r)})}submit(){var t;for(const s in this.patientForm.controls)if("email"!==s){if("primaryNumber"===s||"secondaryNumber"===s)for(const t in this.patientForm.controls[s].controls)this.patientForm.controls[s].controls[t].markAsDirty(),this.patientForm.controls[s].controls[t].updateValueAndValidity();this.patientForm.controls[s].markAsDirty(),this.patientForm.controls[s].updateValueAndValidity()}const e=((t,e,n,i,a=Vo.DEFAULT,s)=>{var o,l,r,c,d,b,u,p,h,g,f,m,v,S,I,D,C,X,E,T,z,_,y,O,M,A,P,N,W,R,x,w,V,L,k,F,U,j,Y,B,H,G,$,Z,q,K,Q,J;return{id:this.patientId,firstName:null===(l=null===(o=null==t?void 0:t.controls)||void 0===o?void 0:o.firstName)||void 0===l?void 0:l.value,lastName:null===(c=null===(r=null==t?void 0:t.controls)||void 0===r?void 0:r.lastName)||void 0===c?void 0:c.value,dateOfBirth:Uo(null===(b=null===(d=null==t?void 0:t.controls)||void 0===d?void 0:d.dateOfBirth)||void 0===b?void 0:b.value),language:{locale:(null===(p=null===(u=null==t?void 0:t.controls)||void 0===u?void 0:u.language)||void 0===p?void 0:p.value)||"en_US"},email:null===(g=null===(h=null==t?void 0:t.controls)||void 0===h?void 0:h.email)||void 0===g?void 0:g.value,username:null===(m=null===(f=null==t?void 0:t.controls)||void 0===f?void 0:f.username)||void 0===m?void 0:m.value,quickNote:null===(S=null===(v=null==t?void 0:t.controls)||void 0===v?void 0:v.notes)||void 0===S?void 0:S.value,encryptedPassword:Ho(null===(D=null===(I=null==t?void 0:t.controls)||void 0===I?void 0:I.email)||void 0===D?void 0:D.value,null===(X=null===(C=null==t?void 0:t.controls)||void 0===C?void 0:C.password)||void 0===X?void 0:X.value),country:null===(T=null===(E=null==t?void 0:t.controls)||void 0===E?void 0:E.country)||void 0===T?void 0:T.value,phoneNumbers:Bo(n,null===(_=null===(z=null==t?void 0:t.controls)||void 0===z?void 0:z.primaryNumber)||void 0===_?void 0:_.value,null===(O=null===(y=null==t?void 0:t.controls)||void 0===y?void 0:y.secondaryNumber)||void 0===O?void 0:O.value),gender:null===(A=null===(M=null==t?void 0:t.controls)||void 0===M?void 0:M.gender)||void 0===A?void 0:A.value,groupId:null!==(R=null===(W=null===(N=null===(P=null==t?void 0:t.controls)||void 0===P?void 0:P.groupId)||void 0===N?void 0:N.value)||void 0===W?void 0:W.subGroup)&&void 0!==R?R:null===(V=null===(w=null===(x=null==t?void 0:t.controls)||void 0===x?void 0:x.groupId)||void 0===w?void 0:w.value)||void 0===V?void 0:V.group,address:jo(t),timeZone:null===(k=null===(L=null==t?void 0:t.controls)||void 0===L?void 0:L.timeZone)||void 0===k?void 0:k.value,profileTags:null===(U=null===(F=null==t?void 0:t.controls)||void 0===F?void 0:F.profileTags)||void 0===U?void 0:U.value,countryCode:n,locationId:null===(Y=null===(j=null==t?void 0:t.controls)||void 0===j?void 0:j.location)||void 0===Y?void 0:Y.value,hospitalId:null===(H=null===(B=null==t?void 0:t.controls)||void 0===B?void 0:B.hospitalId)||void 0===H?void 0:H.value,insuranceInformation:(J=null===($=null===(G=null==t?void 0:t.controls)||void 0===G?void 0:G.insurance)||void 0===$?void 0:$.value,{primaryInsuranceDetails:{carrierName:null==J?void 0:J.primaryCarrierName,insuranceId:null==J?void 0:J.primaryMemberId,effectiveDate:null==J?void 0:J.primaryEffectiveDate,expirationDate:null==J?void 0:J.primaryExpirationDate,planId:null==J?void 0:J.primaryPlanId},secondaryInsuranceDetails:{carrierName:null==J?void 0:J.secondaryCarrierName,insuranceId:null==J?void 0:J.secondaryMemberId,effectiveDate:null==J?void 0:J.secondaryEffectiveDate,expirationDate:null==J?void 0:J.secondaryExpirationDate,planId:null==J?void 0:J.secondaryPlanId},tertiaryInsuranceDetails:{carrierName:null==J?void 0:J.tertiaryCarrierName,insuranceId:null==J?void 0:J.tertiaryMemberId,effectiveDate:null==J?void 0:J.tertiaryEffectiveDate,expirationDate:null==J?void 0:J.tertiaryExpirationDate,planId:null==J?void 0:J.tertiaryPlanId},secondaryInsured:null==J?void 0:J.secondaryInsured,tier:null==J?void 0:J.tier}),healthInfo:Yo(t),tenantId:i,onboardingType:a,physicianId:s,availableHours:null===(q=null===(Z=null==t?void 0:t.controls)||void 0===Z?void 0:Z.availableHours)||void 0===q?void 0:q.value,patientConsent:null===(Q=null===(K=null==t?void 0:t.controls)||void 0===K?void 0:K.patientConsent)||void 0===Q?void 0:Q.value}})(this.patientForm,0,this.countryCode,null===(t=this.tenantConfig)||void 0===t?void 0:t.tenantId);if("VALID"!==this.patientForm.status)return;"lead"===this.mode&&(e.id=void 0,e.onboardingType=Vo.LEAD,e.physicianId=this.physicianId);const n=this.activatedRoute.snapshot.queryParamMap.get("context");this._patientsEventLogger.patientAddActionEvent("",e.firstName+" "+e.lastName,"add_new_patient");const i=this._patientsService.savePatient(e),a=this._patientsService.updatePatient(e);Object(Ro.iif)(()=>!!e.id,a,i).subscribe(t=>{var i,a;if("lead"!==this.mode)if(this._notificationsService.success(this.translatedStrings.get("PATIENT"),this.translatedStrings.get("PATIENT.SAVED_SUCCESSFULLY")),"episode-creation"===n)this._router.navigate([`/patient/view/${t.id}`],{queryParams:{tab:"episodes"}});else if(e.id)this._router.navigate([`/patient/view/${t.id}`]);else if(this._privilegeUtil.isPrivileged(new Array(Ao.a.ASSIGN_PHYSICIAN_TO_PATIENT))){const e={role:M.a.PHYSICIAN};"lead"===this.mode&&(null===(a=null===(i=this.tenantConfig)||void 0===i?void 0:i.redoxConfig)||void 0===a?void 0:a.enabled)&&(e.context="EPISODE_AUTO_CREATION",e.contextMode="lead"),this._router.navigate([`/patient/assign/physician/${t.id}`],{queryParams:e})}else this._router.navigate([`/patient/view/${t.id}`]);else{const e=this._messageService.loading("Please wait while we create the patient profile..",{nzDuration:0}).messageId;this.convertLead(this.patientId,t.id).subscribe(n=>{var i,a;if(this._messageService.remove(e),this._privilegeUtil.isPrivileged(new Array(Ao.a.ASSIGN_PHYSICIAN_TO_PATIENT))){const e={role:M.a.PHYSICIAN};"lead"===this.mode&&(null===(a=null===(i=this.tenantConfig)||void 0===i?void 0:i.redoxConfig)||void 0===a?void 0:a.enabled)&&(e.context="EPISODE_AUTO_CREATION",e.contextMode="lead"),this._router.navigate([`/patient/assign/physician/${t.id}`],{queryParams:e})}else this._router.navigate([`/patient/view/${t.id}`])})}})}convertLead(t,e){return this._leadsService.convertLeadToPatient(t,e)}resetPreferredPrimaryNumber(t){if(!t)return;const e=this.patientForm.controls.primaryNumber.value;e.preferred=!1,this.patientForm.controls.primaryNumber.patchValue(e,{emitEvent:!1})}resetPreferredSecondaryNumber(t){if(!t)return;const e=this.patientForm.controls.secondaryNumber.value;e.preferred=!1,this.patientForm.controls.secondaryNumber.patchValue(e,{emitEvent:!1})}updateAllChecked(){this.daysIndeterminate=!1,this.daysOptions=this.daysOptions.map(this.daysAllChecked?t=>Object.assign(Object.assign({},t),{checked:!0}):t=>Object.assign(Object.assign({},t),{checked:!1})),this.updateAvailableHours()}updateSingleChecked(){this.daysOptions.every(t=>!t.checked)?(this.daysAllChecked=!1,this.daysIndeterminate=!1):this.daysOptions.every(t=>t.checked)?(this.daysAllChecked=!0,this.daysIndeterminate=!1):this.daysIndeterminate=!0,this.updateAvailableHours()}updateAvailableHours(){const t=this.daysOptions.filter(t=>t.checked).map(t=>t.value);this.patientForm.controls.availableHours.get("days").setValue(t)}onTimeChange(t,e){}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(d.h),D.Rb(b.g),D.Rb(xo.a),D.Rb(wo.a),D.Rb(dl.b),D.Rb(S.a),D.Rb(bl.e),D.Rb(g.a),D.Rb($o.a),D.Rb(Oe.a),D.Rb(A.b),D.Rb(v.a),D.Rb(b.a),D.Rb(Pe.a),D.Rb(ll.a),D.Rb(cl))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-form"]],viewQuery:function(t,e){if(1&t&&(D.ed(Il,1),D.ed(Dl,1)),2&t){let t;D.Hc(t=D.fc())&&(e.patientFormEl=t.first),D.Hc(t=D.fc())&&(e.searchElementRef=t.first)}},features:[D.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["ngNoForm","","id","patientsForm","nz-form","","appScrollToFirstInvalid","",3,"formGroup","ngSubmit","keydown.enter"],["patientFormEl","ngForm"],["nz-typography",""],[1,"divider"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],[3,"nzErrorTip"],["formControlName","firstName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","lastName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","username","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],[3,"nzSuffix"],["nz-input","","formControlName","password","readonly","","onfocus","this.removeAttribute('readonly')",3,"type"],["passwordSuffix",""],["passwordErrors",""],["formControlName","email","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["emailErrors",""],["formControlName","dateOfBirth","nzPlaceHolder","MM-DD-YYYY",3,"nzFormat","nzDisabledDate"],["formControlName","timeZone","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","language","nzPlaceHolder","Select a language"],["nz-col","","nzXs","24","nzSm","12","nzMd","18"],["rows","3","nz-input","","formControlName","notes","placeholder","Patient preferences/conditions etc"],["formControlName","gender"],["nz-radio","","class","radio-label",3,"nzValue",4,"ngFor","ngForOf"],["nz-row","","nzGutter","16","formGroupName","patientConsent"],["nzSize","small","formControlName","vmConsent"],[1,"radio-label"],["nzSize","small","formControlName","hipaaConsent"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","24"],[2,"border-bottom","1px solid rgb(233, 233, 233)","padding-bottom","10px"],["nz-checkbox","",3,"ngModel","nzIndeterminate","ngModelOptions","ngModelChange"],["nz-col","","nzSpan","24",2,"margin-top","20px","padding-left","0px !important"],[3,"ngModel","ngModelOptions","ngModelChange"],["formGroupName","availableHours"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%","margin-left","32px"],["nz-col","","nzSpan","11","nz-typography","","nzType","secondary",2,"margin-top","20px","width","100%"],["nz-col","","nzSpan","11",2,"width","100%","margin-left","32px"],["formControlName","fromTime","nzFormat","h:mm a",3,"nzUse12Hours","ngModelChange"],["nz-col","","nzSpan","11",2,"width","100%"],["formControlName","toTime","nzFormat","h:mm a",3,"nzUse12Hours","ngModelChange"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","formGroupName","primaryNumber",1,"phone-number-divider"],["nz-row",""],["nz-col","","nzXs","24","nzSm","12","nzMd","12"],[3,"nzAddOnBefore"],["formControlName","number","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-typography","","nzType","danger","class","errors",4,"ngIf"],["formControlName","preferred","nz-radio","",3,"nzValue","ngModelChange"],["nz-col","","nzSpan","12"],["formControlName","type"],["nzValue","MOBILE","nzLabel","Mobile"],["nzValue","LANDLINE","nzLabel","Landline"],["nzSize","small","formControlName","audioCallNotification"],[1,"radio-label",3,"ngClass"],["formControlName","label","nz-input",""],["nzSize","small","formControlName","smsNotification"],["nzSize","small","formControlName","reminderSMSNotification"],["nzSize","small","formControlName","videoCallNotification"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","formGroupName","secondaryNumber"],["nz-col","","nzSpan","8"],["nz-col","","nzSpan","4"],["formControlName","streetAddress","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"placeholder"],["searchAddress",""],["formControlName","streetAddress2","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","poBox","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["nz-col","","nzSpan","6"],["formControlName","zipCode","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","country","nz-input","","readonly",""],["formControlName","state","nz-input","","readonly",""],["formControlName","city","nz-input","","readonly",""],["formControlName","location","nzShowSearch",""],[4,"ngFor","ngForOf"],["formControlName","profileTags","nzShowSearch","","nzAllowClear","",3,"nzMode"],["formControlName","hospitalId","nz-input",""],["formControlName","height"],["nz-col","","nzXs","24","nzSm","12","nzMd","6","formGroupName","weight"],["nz-row","","nzGutter","8"],["formControlName","unit",1,"measurement-units"],["nz-col","","nzSpan","16"],["formControlName","value",3,"nzMin"],["nz-col","","nzXs","24","nzSm","12","nzMd","6","formGroupName","waist"],["nz-col","","nzXs","24","nzSm","12","nzMd","6","formGroupName","hip"],["nz-col","","nzXs","24","nzSm","8","nzMd","6"],["formControlName","bloodGroup"],["nz-col","","nzXs","24","nzSm","16","nzMd","18"],["nz-row","","nzGutter","24"],["formControlName","smoking","nz-checkbox","",1,"health-label",3,"nzValue"],["formControlName","diabetic","nz-checkbox","",1,"health-label",3,"nzValue"],["formControlName","hypertension","nz-checkbox","",1,"health-label",3,"nzValue"],["formControlName","hypertensionMedication","nz-checkbox","",1,"health-label",3,"nzValue","nzDisabled"],["formControlName","insurance"],["name","view","size","14px",3,"color","click"],[4,"ngIf"],[3,"nzValue","nzLabel"],["nz-radio","",1,"radio-label",3,"nzValue"],["nz-typography","","nzType","danger",1,"errors"],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"display","flex"],["nz-tooltip","",2,"width","70%",3,"nzTooltipTitle","nzTooltipPlacement"],[4,"isAccessAcrossTenantEnabled"],[2,"width","30%"],["nz-typography","","nzType","secondary","nz-tooltip","",2,"color","var(--primary-color)",3,"nzTooltipTitle"]],template:function(t,e){1&t&&D.Vc(0,Jl,501,267,"div",0),2&t&&D.rc("ngIf",e.patientForm)},directives:[c.q,ul.b,pl.a,d.v,d.m,V.a,k.c,k.a,ul.c,ul.a,d.d,je.b,d.u,d.k,T.a,je.c,je.d,te.a,x.d,c.p,N.c,d.n,hl.a,L.a,U.a,d.x,U.b,gl.a,N.b,x.a,c.o,vl,ml.a,Sl,ee.a,fi.d,w.a],pipes:[Vt.a,Lt.a],styles:[".container[_ngcontent-%COMP%]{padding:40px 100px 100px 60px!important}label[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);margin-left:5px;margin-bottom:5px;display:block}.radio-label[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-input-group-addon:empty{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px!important}input[_ngcontent-%COMP%]{border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-select-selector{background:inherit!important}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:var(--light-black)}[_nghost-%COMP%]     .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form label{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);flex-direction:row-reverse}[_nghost-%COMP%]     .ant-checkbox-wrapper{display:inline-flex}[_nghost-%COMP%]     .ant-checkbox-checked{border:none}.measurement-units[_ngcontent-%COMP%]{font:normal normal normal 10px/14px Nunito;color:#8a8a8a;border:1px solid var(--grey)!important}[_nghost-%COMP%]     .measurement-units .ant-select-selector{border:1px solid var(--grey)!important;background:#dbdbdb 0 0 no-repeat padding-box!important}[_nghost-%COMP%]     .ant-input-number{width:100%;background:#fbfbfb 0 0 no-repeat padding-box!important;border:1px solid var(--grey)!important}[_nghost-%COMP%]     .measurement-units .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form-item-explain-error{text-align:right}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.divider[_ngcontent-%COMP%]{height:10px}.health-label[_ngcontent-%COMP%]{display:block;width:100%}[_nghost-%COMP%]     .ant-checkbox{float:right}[_nghost-%COMP%]     .ant-checkbox+span{padding-left:0}[_nghost-%COMP%]     span.ant-radio+*{padding-right:0;padding-left:4px}textarea[_ngcontent-%COMP%]{resize:none;padding:15px;background:#fbfbfb}.phone-number-divider[_ngcontent-%COMP%]{border-right:1px solid #d8d8d8}.errors[_ngcontent-%COMP%]{width:100%;text-align:end}.disabled-text[_ngcontent-%COMP%]{color:#8a8a8a!important}"]}),t})();var er=n("IW2O"),nr=n("VGjC"),ir=n("UpsY");function ar(t,e){if(1&t&&(D.Xb(0,"strong",12),D.Xc(1),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.Zc(" ",null==t.assignedPhysicians[0]?null:t.assignedPhysicians[0].fullName," ")}}function sr(t,e){if(1&t&&(D.Vb(0),D.Xc(1," You can assign / un-assign one or multiple monitoring staff for this patient from the "),D.Xb(2,"strong",12),D.Xc(3),D.jc(4,"userLocation"),D.Wb(),D.Xc(5," site who is assigned to "),D.Vc(6,ar,2,1,"strong",13),D.Ub()),2&t){const t=D.ic();D.Db(3),D.Yc(D.kc(4,2,t.patientLocation)),D.Db(3),D.rc("ngIf",null==t.assignedPhysicians?null:t.assignedPhysicians.length)}}function or(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",14),D.ec("click",function(e){return D.Lc(t),D.ic().search(e)}),D.Sb(1,"app-icons",15),D.Wb()}2&t&&(D.Db(1),D.rc("originalStyle",!0))}function lr(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-empty",16),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("nzNotFoundContent",t.searchKey?"No monitoring staff available matching your search":"No monitoring staff found")}}function rr(t,e){if(1&t&&D.Sb(0,"nz-ribbon",30),2&t){D.ic(2);const t=D.Ic(23);D.rc("nzText",t)}}function cr(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",32),D.ec("click",function(){D.Lc(t);const e=D.ic(3).$implicit;return D.ic().assignPrimaryStaff(e.id)}),D.Sb(1,"span",33),D.Wb()}}function dr(t,e){if(1&t&&(D.Vb(0),D.Vc(1,cr,2,0,"button",31),D.Ub()),2&t){const t=D.ic(2).$implicit,e=D.ic();D.Db(1),D.rc("ngIf",!e.primaryStaffs.has(t.id))}}function br(t,e){if(1&t&&(D.Vb(0),D.Vc(1,dr,2,1,"ng-container",4),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("ngIf",null==t?null:t.selected)}}function ur(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" 0",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0," ")}}function pr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount," ")}}function hr(t,e){1&t&&(D.Vb(0),D.Xc(1," Physician "),D.Ub())}function gr(t,e){1&t&&(D.Vb(0),D.Xc(1," Physicians "),D.Ub())}function fr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" 0",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0," ")}}function mr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount," ")}}function vr(t,e){1&t&&(D.Vb(0),D.Xc(1," Active Patient "),D.Ub())}function Sr(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" Active ",D.kc(2,1,"COMMON.PATIENTS")," "))}const Ir=function(t){return{border:t}},Dr=function(){return["MARK_AS_PRIMARY_MONITORING_STAFF"]},Cr=function(t){return[t]};function Xr(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",17),D.Vc(2,rr,1,1,"nz-ribbon",18),D.Xb(3,"div",19),D.Xb(4,"div",20),D.Xb(5,"label",21),D.ec("ngModelChange",function(t){return e.$implicit.selected=t})("ngModelChange",function(n){D.Lc(t);const i=e.$implicit;return D.ic().onStaffSelected(n,i.id)}),D.Wb(),D.Wb(),D.Wb(),D.Xb(6,"h5",22),D.Xb(7,"strong",23),D.Xb(8,"span",24),D.Xc(9),D.jc(10,"titlecase"),D.Wb(),D.Vc(11,br,2,1,"ng-container",25),D.Wb(),D.Wb(),D.Xb(12,"h5",26),D.Xc(13),D.Wb(),D.Xb(14,"h5",26),D.jc(15,"userLocations"),D.Xc(16),D.jc(17,"userLocations"),D.Wb(),D.Xb(18,"div",27),D.Xb(19,"div",2),D.Xb(20,"span",28),D.Vc(21,ur,2,1,"ng-container",4),D.Vc(22,pr,2,1,"ng-container",4),D.Wb(),D.Xb(23,"span",29),D.Vc(24,hr,2,0,"ng-container",4),D.Vc(25,gr,2,0,"ng-container",4),D.Wb(),D.Wb(),D.Xb(26,"div",2),D.Xb(27,"span",28),D.Vc(28,fr,2,1,"ng-container",4),D.Vc(29,mr,2,1,"ng-container",4),D.Wb(),D.Xb(30,"span",29),D.Vc(31,vr,2,0,"ng-container",4),D.Vc(32,Sr,3,3,"ng-container",4),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit,n=D.ic();D.Db(1),D.rc("ngClass",null!=t&&t.assigned?"assigned shadowed":"")("ngStyle",D.yc(33,Ir,null!=t&&t.selected?"2px solid #a7c853":"2px solid #ffffff")),D.Db(1),D.rc("ngIf",n.primaryStaffs.has(null==t?null:t.id)),D.Db(3),D.rc("ngModel",t.selected)("nzValue",t.id),D.Db(2),D.rc("ngClass",null!=t&&t.assigned?"assigned":""),D.Db(1),D.rc("nzTooltipTitle",(null==t?null:t.fullName)||"N/A"),D.Db(1),D.Zc(" ",D.kc(10,27,null==t?null:t.fullName)||"N/A"," "),D.Db(2),D.rc("isFeaturePermitted",D.xc(35,Dr)),D.Db(1),D.sc("nzTooltipTitle",null==t||null==t.roles[0]?null:t.roles[0].name),D.rc("ngClass",D.yc(36,Cr,null!=t&&t.assigned?"assigned":"")),D.Db(1),D.Zc(" ",null==t||null==t.roles[0]?null:t.roles[0].name," "),D.Db(1),D.sc("nzTooltipTitle",D.kc(15,29,null==t?null:t.locations)),D.rc("ngClass",D.yc(38,Cr,null!=t&&t.assigned?"assigned":"")),D.Db(2),D.Zc(" ",D.kc(17,31,null==t?null:t.locations)," "),D.Db(4),D.rc("ngClass",null!=t&&t.assigned?"assigned":""),D.Db(1),D.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)<10),D.Db(1),D.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)>=10),D.Db(1),D.rc("ngClass",null!=t&&t.assigned?"assigned":""),D.Db(1),D.rc("ngIf",1===((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)),D.Db(1),D.rc("ngIf",1!==((null==t||null==t.clinicianState?null:t.clinicianState.assignedPhysicianCount)||0)),D.Db(2),D.rc("ngClass",null!=t&&t.assigned?"assigned":""),D.Db(1),D.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)<10),D.Db(1),D.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)>=10),D.Db(1),D.rc("ngClass",null!=t&&t.assigned?"assigned":""),D.Db(1),D.rc("ngIf",1===((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)),D.Db(1),D.rc("ngIf",1!==((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0))}}function Er(t,e){1&t&&(D.Xb(0,"span"),D.Sb(1,"span",34),D.Xc(2," Primary "),D.Wb())}let Tr=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r){super(),this._router=t,this._patientsService=e,this._activatedRoute=n,this._patientsEventLogger=i,this._modalService=a,this._staffService=s,this._dataSharingService=o,this._notificationsService=l,this._userService=r,this.primaryStaffs=new Set,this.patientId=this._activatedRoute.snapshot.params.id,this.patientName=this._activatedRoute.snapshot.params.patientName,this.patientLocation=this._activatedRoute.snapshot.params.location,this.staff=[],this.filteredStaff=[],this.selectedStaffIds=new Set,this.loggedInUser=localStorage.getItem("loggedInUser"),this.loggedInUserRole=localStorage.getItem("loggedInUserRole"),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(No.filter)(t=>!!t),Object(er.takeUntil)(this.unsubscribed)).subscribe(()=>this.assignStaff()),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(No.filter)(t=>!!t),Object(er.takeUntil)(this.unsubscribed)).subscribe(()=>this.viewPatient()),this._dataSharingService.tenantSettings.pipe(Object(No.filter)(t=>!!t),Object(er.takeUntil)(this.unsubscribed)).subscribe(t=>this.tenantConfig=t)}ngOnInit(){M.a.MONITORING_STAFF===this.loggedInUserRole?this._patientsService.bulkAssignStaff(this.patientId,[this.loggedInUser]).subscribe(()=>this.getDetailsById()):this.getDetailsById()}getPatientDetails(t){this._patientsService.fetchPatientById(t).subscribe(t=>{this.patientInfo=t,this.patientInfo.monitoringStaffs.primaryStaff.forEach(t=>this.primaryStaffs.add(t))})}getDetailsById(){const t=this._activatedRoute.snapshot.params.id;this.getPatientDetails(t),this._staffService.fetchStaffMemberById(t).subscribe(t=>{this.assignedPhysicians=null==t?void 0:t.assignedUsers[M.a.PHYSICIAN],this.getAllStaff()})}getAllStaff(){var t;this._staffService.fetchStaffMemberById(null===(t=this.assignedPhysicians[0])||void 0===t?void 0:t.id).subscribe(t=>{let e=null==t?void 0:t.assignedUsers[M.a.MONITORING_STAFF];M.a.MONITORING_STAFF===this.loggedInUserRole&&(e=null==e?void 0:e.filter(t=>t.id===this.loggedInUser),this._userService.getUser(this.loggedInUser).subscribe(t=>{this.loggedInUserPriviliges=t.role.privileges,this.loggedInUserPriviliges.includes("MARK_AS_PRIMARY_MONITORING_STAFF")&&this.primaryStaffs.add(this.loggedInUser)})),this.staff=[...e],this.filteredStaff=[...e],this.prevPrimaryStaff=Array.from(this.primaryStaffs)[0],this.getStaffForPatient()})}getStaffForPatient(){this._patientsService.fetchCaretakersForPatient(this.patientId).subscribe(t=>{t.forEach(t=>{const e=this.staff.find(e=>e.id===t.id);e&&(e.selected=!0,e.assigned=!0)}),this.assignedStaff=[...t]})}onStaffSelected(t,e){let n=this.staff.filter(t=>1==t.selected).map(t=>t.id);n.length||this.primaryStaffs.clear(),!this.primaryStaffs.size&&t?this.primaryStaffs.add(e):this.primaryStaffs.size&&!t&&null!=this.prevPrimaryStaff?(this.primaryStaffs.delete(e),this.primaryStaffs.add(this.prevPrimaryStaff)):this.prevPrimaryStaff||!this.primaryStaffs.size||t||(this.primaryStaffs.delete(e),this.primaryStaffs.size||this.primaryStaffs.add(n[0]))}filterStaff(t){this.filteredStaff=t?this.staff.filter(e=>{var n,i;return null===(i=null===(n=null==e?void 0:e.fullName)||void 0===n?void 0:n.toLowerCase())||void 0===i?void 0:i.includes(null==t?void 0:t.toLowerCase())}):[...this.staff]}assignStaff(){let t=this.staff.filter(t=>t.selected).map(t=>t.id),e=this.staff.filter(t=>t.selected).map(t=>t.firstName+t.lastName);M.a.MONITORING_STAFF===this.loggedInUserRole?(this._userService.getUser(this.loggedInUser).subscribe(t=>{}),t=[this.loggedInUser]):t=t.filter(t=>t!==this.loggedInUser),t.length?this.assignStaffToPatient(t,e):this._modalService.confirm({nzTitle:"Skip assigning monitoring staff?",nzContent:"To save and proceed, at least one clinician must be assigned",nzOkText:"Skip for now",nzOnOk:()=>{this.assignStaffToPatient(t,e)}})}assignStaffToPatient(t,e){this._patientsService.bulkAssignStaff(this.patientId,t).subscribe(()=>{this._patientsEventLogger.staffAssignEvent(this.patientId,this.patientName,e,"assign_staff"),this.primaryStaffs.size>0?this._patientsService.markPrimaryMonitoringStaff(this.patientId,Array.from(this.primaryStaffs.values()).pop()).subscribe(()=>{this.postStaffAssign(t,e)}):this.postStaffAssign(t,e)})}postStaffAssign(t,e){var n,i,a,s;let o=`${null==t?void 0:t.length} staff assigned`;if(t.length||(o="No staff selected!"),t.length||(o="No monitoring staff selected!"),(null==t?void 0:t.length)<(null===(n=this.assignedStaff)||void 0===n?void 0:n.length)&&(o=`${Math.abs((null==t?void 0:t.length)-(null===(i=this.assignedStaff)||void 0===i?void 0:i.length))} staff unassigned`),this._notificationsService.info("Monitoring Staff",o),"EPISODE_AUTO_CREATION"===this._activatedRoute.snapshot.queryParams.context){const t=null===(s=null===(a=this.tenantConfig)||void 0===a?void 0:a.episodeBlueprints)||void 0===s?void 0:s.find(t=>"CCM"===t.type),e={context:"AUTO_CREATION",contextMode:this._activatedRoute.snapshot.queryParams.contextMode};return(null==t?void 0:t.id)&&(e.blueprintId=null==t?void 0:t.id),void this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:e})}"lead"===this._activatedRoute.snapshot.queryParams.contextMode?this._router.navigate(["/leads"],{queryParams:{tab:"ACTIVE",status:"ACTIVE"}}):this.viewPatient()}viewPatient(){this._router.navigate(["patient/view/",this.patientId])}assignPrimaryStaff(t){this.primaryStaffs.clear(),this.primaryStaffs.add(t)}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(g.a),D.Rb(b.a),D.Rb(v.a),D.Rb(C.f),D.Rb(S.a),D.Rb(Oe.a),D.Rb(A.b),D.Rb(nr.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-staff-assigner"]],features:[D.Ab],decls:24,vars:17,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-typography",""],[4,"ngIf"],["nz-col","","nzOffset","5","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngFor","ngForOf"],["primary",""],[1,"bold"],["class","bold",4,"ngIf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nzStandalone","","class","primary-ribbon",3,"nzText",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-checkbox","",3,"ngModel","nzValue","ngModelChange"],["nz-typography","",1,"name"],[3,"ngClass"],["nz-tooltip","",2,"pointer-events","auto !important",3,"nzTooltipTitle"],[4,"isFeaturePermitted"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"],["nzStandalone","",1,"primary-ribbon",3,"nzText"],["nz-button","","nzType","text",3,"click",4,"ngIf"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","crown","nzTheme","outline","nz-tooltip","","nzTooltipTitle","Primary Monitoring Staff",2,"font-size","16px","pointer-events","auto !important"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"]],template:function(t,e){if(1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"h4",3),D.Xc(4),D.jc(5,"translate"),D.jc(6,"titlecase"),D.Wb(),D.Xb(7,"p",3),D.Xc(8),D.jc(9,"translate"),D.Sb(10,"br"),D.Sb(11,"br"),D.Vc(12,sr,7,4,"ng-container",4),D.Wb(),D.Wb(),D.Xb(13,"div",5),D.Xb(14,"nz-input-group",6),D.Xb(15,"input",7),D.ec("ngModelChange",function(t){return e.searchKey=t})("ngModelChange",function(t){return e.filterStaff(t)}),D.jc(16,"translate"),D.Wb(),D.Wb(),D.Vc(17,or,2,1,"ng-template",null,8,D.Wc),D.Wb(),D.Wb(),D.Xb(19,"div",9),D.Vc(20,lr,2,1,"ng-container",4),D.Vc(21,Xr,33,40,"ng-container",10),D.Wb(),D.Wb(),D.Vc(22,Er,3,0,"ng-template",null,11,D.Wc)),2&t){const t=D.Ic(18);D.Db(4),D.ad("",D.kc(5,9,"PATIENT.ASSIGN_STAFF")," ",D.kc(6,11,e.patientName),""),D.Db(4),D.Zc(" ",D.kc(9,13,"PATIENT.ASSIGN_STAFF_DESC")," "),D.Db(4),D.rc("ngIf",e.patientLocation),D.Db(2),D.rc("nzAddOnAfter",t),D.Db(1),D.sc("placeholder",D.kc(16,15,"COMMON.SEARCH")),D.rc("ngModel",e.searchKey),D.Db(5),D.rc("ngIf",!(null!=e.filteredStaff&&e.filteredStaff.length)),D.Db(1),D.rc("ngForOf",e.filteredStaff)}},directives:[k.c,k.a,V.a,c.q,T.a,je.c,je.b,d.d,d.u,d.x,c.p,X.a,E.a,ee.a,Xi.b,c.o,c.r,U.a,fi.d,Ye.a,bi.c,R.a],pipes:[Vt.a,c.A,ir.a,ia.a],styles:[".search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}#self-assign[_ngcontent-%COMP%]{line-height:2.5}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-26px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}.bold[_ngcontent-%COMP%]{font-weight:bolder}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}.primary-ribbon[_ngcontent-%COMP%]{top:-10px;right:-5px}"]}),t})();var zr=n("YRM7"),_r=n("ZE2D");function yr(t,e){if(1&t&&D.Sb(0,"img",22),2&t){const t=D.ic();D.rc("src",null==t.patientInfo?null:t.patientInfo.profilePhotoURL,D.Oc)}}function Or(t,e){1&t&&D.Sb(0,"nz-avatar",23),2&t&&D.rc("nzShape","square")("nzSize",150)("nzIcon","user")}function Mr(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.MALE")))}function Ar(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.FEMALE")))}function Pr(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"GENDER.OTHER")))}function Nr(t,e){1&t&&(D.Vb(0),D.Xc(1,"English (United States)"),D.Ub())}function Wr(t,e){1&t&&(D.Vb(0),D.Xc(1,"Spanish (United States)"),D.Ub())}function Rr(t,e){1&t&&(D.Vb(0),D.Xc(1,"Japanese (Japan)"),D.Ub())}function xr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ",null==t.patientInfo||null==t.patientInfo.address?null:t.patientInfo.address.line1,",\xa0 ")}}function wr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ",null==t.patientInfo||null==t.patientInfo.address?null:t.patientInfo.address.line2,",\xa0 ")}}function Vr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ",null==t.patientInfo||null==t.patientInfo.address?null:t.patientInfo.address.city,",\xa0 ")}}function Lr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ",null==t.patientInfo||null==t.patientInfo.address?null:t.patientInfo.address.state,"\xa0 ")}}function kr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" -\xa0",null==t.patientInfo||null==t.patientInfo.address?null:t.patientInfo.address.country," ")}}function Fr(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" -\xa0",null==t.patientInfo||null==t.patientInfo.address?null:t.patientInfo.address.pin," ")}}function Ur(t,e){1&t&&(D.Xb(0,"p"),D.Xc(1," N/A "),D.Wb())}function jr(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1," | Preferred"),D.Wb())}function Yr(t,e){1&t&&(D.Vb(0),D.Sb(1,"app-icons",24),D.Xc(2," \xa0 "),D.Ub()),2&t&&(D.Db(1),D.rc("originalStyle",!0))}function Br(t,e){1&t&&(D.Vb(0),D.Sb(1,"app-icons",25),D.Xc(2," \xa0 "),D.Ub()),2&t&&(D.Db(1),D.rc("originalStyle",!0))}function Hr(t,e){1&t&&(D.Vb(0),D.Sb(1,"app-icons",26),D.Ub()),2&t&&(D.Db(1),D.rc("originalStyle",!0))}function Gr(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1," | Preferred"),D.Wb())}function $r(t,e){1&t&&(D.Vb(0),D.Sb(1,"app-icons",24),D.Xc(2," \xa0 "),D.Ub()),2&t&&(D.Db(1),D.rc("originalStyle",!0))}function Zr(t,e){1&t&&(D.Vb(0),D.Sb(1,"app-icons",26),D.Ub()),2&t&&(D.Db(1),D.rc("originalStyle",!0))}function qr(t,e){if(1&t&&(D.Xb(0,"div",9),D.Xb(1,"label"),D.Xc(2),D.jc(3,"titlecase"),D.Vc(4,Gr,2,0,"span",16),D.Xc(5," \xa0\xa0 "),D.Vc(6,$r,3,1,"ng-container",16),D.Vc(7,Zr,2,1,"ng-container",16),D.Wb(),D.Sb(8,"br"),D.Xb(9,"strong"),D.Xc(10),D.Wb(),D.Wb()),2&t){const t=D.ic();D.Db(2),D.Zc(" ",D.kc(3,7,(null==t.patientInfo||null==t.patientInfo.phoneNumbers[1]?null:t.patientInfo.phoneNumbers[1].label)||"Phone Number")," "),D.Db(2),D.rc("ngIf",null==t.patientInfo||null==t.patientInfo.phoneNumbers[1]?null:t.patientInfo.phoneNumbers[1].preferred),D.Db(2),D.rc("ngIf",!(null!=t.patientInfo&&null!=t.patientInfo.phoneNumbers[1]&&null!=t.patientInfo.phoneNumbers[1].notificationConfig.SMS&&t.patientInfo.phoneNumbers[1].notificationConfig.SMS.enabled)),D.Db(1),D.rc("ngIf",!(null!=t.patientInfo&&null!=t.patientInfo.phoneNumbers[1]&&null!=t.patientInfo.phoneNumbers[1].notificationConfig.CALL&&t.patientInfo.phoneNumbers[1].notificationConfig.CALL.enabled)),D.Db(3),D.bd(" ","MOBILE"===(null==t.patientInfo||null==t.patientInfo.phoneNumbers[1]?null:t.patientInfo.phoneNumbers[1].type)?"Mobile":"Landline",": [",null==t.patientInfo||null==t.patientInfo.phoneNumbers[1]?null:t.patientInfo.phoneNumbers[1].countryCode,"] ",null==t.patientInfo||null==t.patientInfo.phoneNumbers[1]?null:t.patientInfo.phoneNumbers[1].number," ")}}function Kr(t,e){1&t&&(D.Xb(0,"div",9),D.Xb(1,"strong"),D.Xc(2,"N/A"),D.Wb(),D.Wb())}function Qr(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",21),D.Xb(2,"label",10),D.Xc(3),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(3),D.Zc("",t.label," ")}}const Jr=function(t){return{color:t}};function tc(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",21),D.Xb(2,"strong",27),D.Xc(3),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(2),D.rc("ngStyle",D.yc(2,Jr,t.checked?"var(--primary-color)":"var(--error-color)")),D.Db(1),D.Yc(t.checked?"Available":"Not Available")}}const ec=function(){return[32,8]};let nc=(()=>{class t{constructor(){this.daysOptions=[{label:"Mondays",value:"Mondays",checked:!1},{label:"Tuesdays",value:"Tuesdays",checked:!1},{label:"Wednesdays",value:"Wednesdays",checked:!1},{label:"Thursdays",value:"Thursdays",checked:!1},{label:"Fridays",value:"Fridays",checked:!1}]}ngOnInit(){this.daysOptions.forEach(t=>{var e,n,i;return t.checked=null===(i=null===(n=null===(e=this.patientInfo)||void 0===e?void 0:e.availableHours)||void 0===n?void 0:n.days)||void 0===i?void 0:i.includes(t.value)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-basic-information"]],inputs:{patientInfo:"patientInfo"},decls:159,vars:113,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","8","nzMd","6"],["alt","user-profile",3,"src",4,"ngIf"],[3,"nzShape","nzSize","nzIcon",4,"ngIf"],[1,"patient-status-div"],["isFullName","true",3,"patientStatus"],["nz-col","","nzXs","24","nzSm","16","nzMd","18"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","secondary"],[3,"ngSwitch"],[4,"ngSwitchCase"],["nzDisabled","","nzSize","small",3,"ngModel"],["id","address"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"],["nz-col","","nzSpan","6",4,"ngIf"],["nz-col","","nzSpan","12"],["nz-col","","nzSpan","6","nzOffset","6"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","4"],["alt","user-profile",3,"src"],[3,"nzShape","nzSize","nzIcon"],["name","disabledSms",1,"disabled-icons",3,"originalStyle"],["name","disabledVideo",1,"disabled-icons",3,"originalStyle"],["name","disabledAudio",1,"disabled-icons",3,"originalStyle"],[3,"ngStyle"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"div"),D.Vc(4,yr,1,1,"img",3),D.Vc(5,Or,1,3,"nz-avatar",4),D.Xb(6,"div",5),D.Xc(7),D.jc(8,"translate"),D.Sb(9,"app-patient-status-tag",6),D.Wb(),D.Wb(),D.Wb(),D.Xb(10,"div",7),D.Xb(11,"div",8),D.Xb(12,"div",9),D.Xb(13,"label",10),D.Xc(14),D.jc(15,"translate"),D.Wb(),D.Wb(),D.Xb(16,"div",9),D.Xb(17,"label",10),D.Xc(18),D.jc(19,"translate"),D.Wb(),D.Wb(),D.Xb(20,"div",9),D.Xb(21,"label",10),D.Xc(22),D.jc(23,"translate"),D.Wb(),D.Wb(),D.Xb(24,"div",9),D.Xb(25,"label",10),D.Xc(26,"Patient Insurance Tier"),D.Wb(),D.Wb(),D.Wb(),D.Xb(27,"div",8),D.Xb(28,"div",9),D.Xb(29,"strong"),D.Xc(30),D.Wb(),D.Wb(),D.Xb(31,"div",9),D.Xb(32,"strong",11),D.Vc(33,Mr,3,3,"ng-container",12),D.Vc(34,Ar,3,3,"ng-container",12),D.Vc(35,Pr,3,3,"ng-container",12),D.Wb(),D.Wb(),D.Xb(36,"div",9),D.Xb(37,"strong"),D.Xc(38),D.jc(39,"date"),D.Wb(),D.Wb(),D.Xb(40,"div",9),D.Xb(41,"strong"),D.Xc(42),D.Wb(),D.Wb(),D.Wb(),D.Sb(43,"br"),D.Xb(44,"div",8),D.Xb(45,"div",9),D.Xb(46,"label",10),D.Xc(47),D.jc(48,"translate"),D.Wb(),D.Wb(),D.Xb(49,"div",9),D.Xb(50,"label",10),D.Xc(51),D.jc(52,"translate"),D.Wb(),D.Wb(),D.Xb(53,"div",9),D.Xb(54,"label",10),D.Xc(55),D.jc(56,"translate"),D.Wb(),D.Wb(),D.Xb(57,"div",9),D.Xb(58,"label",10),D.Xc(59),D.jc(60,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(61,"div",8),D.Xb(62,"div",9),D.Xb(63,"strong"),D.Xc(64),D.Wb(),D.Wb(),D.Xb(65,"div",9),D.Xb(66,"strong"),D.Xc(67),D.Wb(),D.Wb(),D.Xb(68,"div",9),D.Xb(69,"strong",11),D.Vc(70,Nr,2,0,"ng-container",12),D.Vc(71,Wr,2,0,"ng-container",12),D.Vc(72,Rr,2,0,"ng-container",12),D.Wb(),D.Wb(),D.Xb(73,"div",9),D.Sb(74,"nz-switch",13),D.Wb(),D.Wb(),D.Sb(75,"br"),D.Xb(76,"div",8),D.Xb(77,"div",9),D.Xb(78,"label",10),D.Xc(79),D.jc(80,"translate"),D.Wb(),D.Wb(),D.Xb(81,"div",9),D.Xb(82,"label",10),D.Xc(83,"Primary Contact Number"),D.Wb(),D.Wb(),D.Xb(84,"div",9),D.Xb(85,"label",10),D.Xc(86,"Secondary Contact Number"),D.Wb(),D.Wb(),D.Xb(87,"div",9),D.Xb(88,"label",10),D.Xc(89),D.jc(90,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(91,"div",8),D.Xb(92,"div",9),D.Xb(93,"strong",14),D.Xb(94,"p",15),D.Vc(95,xr,2,1,"ng-container",16),D.Vc(96,wr,2,1,"ng-container",16),D.Vc(97,Vr,2,1,"ng-container",16),D.Vc(98,Lr,2,1,"ng-container",16),D.Vc(99,kr,2,1,"ng-container",16),D.Vc(100,Fr,2,1,"ng-container",16),D.Wb(),D.Vc(101,Ur,2,0,"p",16),D.Wb(),D.Wb(),D.Xb(102,"div",9),D.Xb(103,"label"),D.Xc(104),D.jc(105,"titlecase"),D.Vc(106,jr,2,0,"span",16),D.Xc(107," \xa0\xa0 "),D.Vc(108,Yr,3,1,"ng-container",16),D.Vc(109,Br,3,1,"ng-container",16),D.Vc(110,Hr,2,1,"ng-container",16),D.Wb(),D.Sb(111,"br"),D.Xb(112,"strong"),D.Xc(113),D.Wb(),D.Wb(),D.Vc(114,qr,11,9,"div",17),D.Vc(115,Kr,3,0,"div",17),D.Xb(116,"div",9),D.Sb(117,"nz-switch",13),D.Wb(),D.Wb(),D.Xb(118,"div",8),D.Xb(119,"div",18),D.Xb(120,"label",10),D.Xc(121),D.jc(122,"translate"),D.Wb(),D.Wb(),D.Xb(123,"div",19),D.Xb(124,"label",10),D.Xc(125),D.jc(126,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(127,"div",8),D.Xb(128,"div",18),D.Xb(129,"strong"),D.Xc(130),D.Wb(),D.Wb(),D.Xb(131,"div",19),D.Sb(132,"nz-switch",13),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(133,"nz-divider"),D.Xb(134,"div",1),D.Xb(135,"h4"),D.Xc(136),D.jc(137,"translate"),D.Wb(),D.Wb(),D.Xb(138,"div",1),D.Vc(139,Qr,4,1,"ng-container",20),D.Wb(),D.Xb(140,"div",1),D.Vc(141,tc,4,4,"ng-container",20),D.Wb(),D.Sb(142,"br"),D.Xb(143,"div",1),D.Xb(144,"div",21),D.Xb(145,"label",10),D.Xc(146,"Available from:"),D.Wb(),D.Wb(),D.Xb(147,"div",21),D.Xb(148,"label",10),D.Xc(149,"Available till:"),D.Wb(),D.Wb(),D.Wb(),D.Xb(150,"div",1),D.Xb(151,"div",21),D.Xb(152,"strong"),D.Xc(153),D.jc(154,"date"),D.Wb(),D.Wb(),D.Xb(155,"div",21),D.Xb(156,"strong"),D.Xc(157),D.jc(158,"date"),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.Db(4),D.rc("ngIf",null==e.patientInfo?null:e.patientInfo.profilePhotoURL),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&e.patientInfo.profilePhotoURL)),D.Db(2),D.Zc(" ",D.kc(8,68,"COMMON.STATUS")," "),D.Db(2),D.rc("patientStatus",null==e.patientInfo?null:e.patientInfo.patientStatus),D.Db(2),D.rc("nzGutter",D.xc(105,ec)),D.Db(3),D.Yc(D.kc(15,70,"PATIENT.FULL_NAME")),D.Db(4),D.Yc(D.kc(19,72,"PATIENT.GENDER")),D.Db(4),D.Yc(D.kc(23,74,"COMMON.DOB")),D.Db(5),D.rc("nzGutter",D.xc(106,ec)),D.Db(3),D.Yc((null==e.patientInfo?null:e.patientInfo.fullName)||"N/A"),D.Db(2),D.rc("ngSwitch",null==e.patientInfo?null:e.patientInfo.gender),D.Db(1),D.rc("ngSwitchCase","MALE"),D.Db(1),D.rc("ngSwitchCase","FEMALE"),D.Db(1),D.rc("ngSwitchCase","OTHER"),D.Db(3),D.Yc(D.lc(39,76,null==e.patientInfo?null:e.patientInfo.dateOfBirth,"MM/dd/yyyy")),D.Db(4),D.Yc(null==e.patientInfo||null==e.patientInfo.insuranceInformation?null:e.patientInfo.insuranceInformation.tier),D.Db(2),D.rc("nzGutter",D.xc(107,ec)),D.Db(3),D.Yc(D.kc(48,79,"COMMON.E-MAIL")),D.Db(4),D.Yc(D.kc(52,81,"COMMON.USERNAME")),D.Db(4),D.Yc(D.kc(56,83,"PATIENT.PREFERRED_LANGUAGE")),D.Db(4),D.Yc(D.kc(60,85,"PATIENT.SMS_CONSENT")),D.Db(2),D.rc("nzGutter",D.xc(108,ec)),D.Db(3),D.Yc((null==e.patientInfo?null:e.patientInfo.email)||"N/A"),D.Db(3),D.Yc((null==e.patientInfo?null:e.patientInfo.username)||"N/A"),D.Db(2),D.rc("ngSwitch",null==e.patientInfo||null==e.patientInfo.language?null:e.patientInfo.language.locale),D.Db(1),D.rc("ngSwitchCase","en_US"),D.Db(1),D.rc("ngSwitchCase","es_US"),D.Db(1),D.rc("ngSwitchCase","ja_JP"),D.Db(2),D.rc("ngModel",null==e.patientInfo||null==e.patientInfo.patientConsent?null:e.patientInfo.patientConsent.vmConsent),D.Db(2),D.rc("nzGutter",D.xc(109,ec)),D.Db(3),D.Yc(D.kc(80,87,"PATIENT.HOME_ADDRESS")),D.Db(10),D.Yc(D.kc(90,89,"PATIENT.VM_CONSENT")),D.Db(2),D.rc("nzGutter",D.xc(110,ec)),D.Db(3),D.wc("nzTooltipTitle","",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line1,"\n                             ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line2," ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.city,"\n                             ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.state," ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.country,"\n                             ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.pin,""),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line1),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line2),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.city),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.state),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.country),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.pin),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.line1||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.line2||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.city||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.state||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.country||null!=e.patientInfo&&null!=e.patientInfo.address&&e.patientInfo.address.pin)),D.Db(3),D.Zc(" ",D.kc(105,91,(null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].label)||"Phone Number")," "),D.Db(2),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].preferred),D.Db(2),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[0]&&null!=e.patientInfo.phoneNumbers[0].notificationConfig.SMS&&e.patientInfo.phoneNumbers[0].notificationConfig.SMS.enabled)),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[0]&&null!=e.patientInfo.phoneNumbers[0].notificationConfig.VIDEO_CALL&&e.patientInfo.phoneNumbers[0].notificationConfig.VIDEO_CALL.enabled)),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[0]&&null!=e.patientInfo.phoneNumbers[0].notificationConfig.CALL&&e.patientInfo.phoneNumbers[0].notificationConfig.CALL.enabled)),D.Db(3),D.bd(" ","MOBILE"===(null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].type)?"Mobile":"Landline",": [",null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].countryCode,"] ",null==e.patientInfo||null==e.patientInfo.phoneNumbers[0]?null:e.patientInfo.phoneNumbers[0].number," "),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.phoneNumbers[1]?null:e.patientInfo.phoneNumbers[1].number),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.phoneNumbers[1]&&e.patientInfo.phoneNumbers[1].number)),D.Db(2),D.rc("ngModel",null==e.patientInfo||null==e.patientInfo.patientConsent?null:e.patientInfo.patientConsent.vmConsent),D.Db(1),D.rc("nzGutter",D.xc(111,ec)),D.Db(3),D.Yc(D.kc(122,93,"PATIENT.NOTES")),D.Db(4),D.Yc(D.kc(126,95,"PATIENT.HIPAA_CONSENT")),D.Db(2),D.rc("nzGutter",D.xc(112,ec)),D.Db(3),D.Yc((null==e.patientInfo||null==e.patientInfo.quickNote?null:e.patientInfo.quickNote.content)||"N/A"),D.Db(2),D.rc("ngModel",null==e.patientInfo||null==e.patientInfo.patientConsent?null:e.patientInfo.patientConsent.hipaaConsent),D.Db(4),D.Yc(D.kc(137,97,"PATIENT.AVAILABLE_HOURS")),D.Db(3),D.rc("ngForOf",e.daysOptions),D.Db(2),D.rc("ngForOf",e.daysOptions),D.Db(12),D.Yc(D.lc(154,99,null==e.patientInfo||null==e.patientInfo.availableHours?null:e.patientInfo.availableHours.fromTime,"HH:mm a")||"N/A"),D.Db(4),D.Yc(D.lc(158,102,null==e.patientInfo||null==e.patientInfo.availableHours?null:e.patientInfo.availableHours.toTime,"HH:mm a")||"N/A"))},directives:[k.c,k.a,c.q,vi.a,V.a,c.s,c.t,hl.a,d.u,d.x,fi.d,L.a,c.p,_r.a,ee.a,c.r],pipes:[Vt.a,c.e,c.A],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}[_nghost-%COMP%]     .ant-avatar{background:#dddfe1}img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:5px}#address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.patient-status-div[_ngcontent-%COMP%]{margin-top:12px;width:150px;text-align:center;padding:5px}.patient-status-div[_ngcontent-%COMP%]   app-patient-status-tag[_ngcontent-%COMP%]{margin-left:3px}app-icons[_ngcontent-%COMP%]{vertical-align:middle}.disabled-icons[_ngcontent-%COMP%]{pointer-events:none}"]}),t})();function ic(t,e){if(1&t&&(D.Xb(0,"span"),D.Xc(1),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.Yc((null==t?null:t.sourceId)||"N/A")}}function ac(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xb(1,"span",6),D.Vc(2,ic,2,1,"span",7),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngSwitch",null==t?null:t.source),D.Db(1),D.rc("ngSwitchCase","HOSPITAL_INTERNAL_ID")}}function sc(t,e){1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2,"N/A"),D.Wb(),D.Ub())}function oc(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"nz-tag",8),D.Xc(2),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzColor","green"),D.Db(1),D.Yc(t)}}function lc(t,e){1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2,"N/A"),D.Wb(),D.Ub())}const rc=function(){return[32,8]};let cc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-organisation-information"]],inputs:{patientInfo:"patientInfo"},decls:25,vars:17,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"nzColor"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"label",3),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Xb(6,"div",2),D.Xb(7,"label",3),D.Xc(8,"Site"),D.Wb(),D.Wb(),D.Xb(9,"div",2),D.Xb(10,"label",3),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(13,"div",1),D.Xb(14,"div",2),D.Vc(15,ac,3,2,"strong",4),D.Vc(16,sc,3,0,"ng-container",5),D.Wb(),D.Xb(17,"div",2),D.Xb(18,"strong"),D.Xc(19),D.jc(20,"userLocations"),D.Wb(),D.Wb(),D.Xb(21,"div",2),D.Vc(22,oc,3,2,"ng-container",4),D.Vc(23,lc,3,0,"ng-container",5),D.Wb(),D.Wb(),D.Wb(),D.Sb(24,"br")),2&t&&(D.Db(1),D.rc("nzGutter",D.xc(15,rc)),D.Db(3),D.Yc(D.kc(5,9,"PATIENT.ID")),D.Db(7),D.Yc(D.kc(12,11,"COMMON.PROFILETAG")),D.Db(2),D.rc("nzGutter",D.xc(16,rc)),D.Db(2),D.rc("ngForOf",null==e.patientInfo?null:e.patientInfo.externalSources),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.externalSources&&e.patientInfo.externalSources.length)),D.Db(3),D.Yc(D.kc(20,13,null==e.patientInfo?null:e.patientInfo.locations)),D.Db(3),D.rc("ngForOf",null==e.patientInfo?null:e.patientInfo.profileTags),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.profileTags&&e.patientInfo.profileTags.length)))},directives:[k.c,k.a,V.a,c.p,c.q,c.s,c.t,Qi.a],pipes:[Vt.a,ia.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}"]}),t})();var dc=n("3CdQ");function bc(t,e){1&t&&(D.Xb(0,"button",10),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc("+ ",D.kc(2,1,"COMMON.ADD"),""))}function uc(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.Zc(" ",null==t?null:t.name," \xa0 ")}}function pc(t,e){1&t&&(D.Vb(0),D.Xc(1,", "),D.Ub())}function hc(t,e){if(1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"titlecase"),D.jc(3,"userLocation"),D.Vc(4,pc,2,0,"ng-container",18),D.Wb()),2&t){const t=D.ic(),e=t.$implicit,n=t.index,i=D.ic().$implicit;D.Db(1),D.Zc(" ",D.kc(2,2,D.kc(3,4,null==e?null:e.id)),""),D.Db(3),D.rc("ngIf",n!==(null==i||null==i.locations?null:i.locations.length)-1)}}function gc(t,e){if(1&t&&(D.Xb(0,"strong"),D.Vc(1,hc,5,6,"span",18),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf",null==t?null:t.defaultLocation)}}function fc(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",11),D.Xb(1,"nz-card",12),D.Xb(2,"div",13),D.Xb(3,"nz-tag",14),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic().showPhysicianUnassignModal(n)}),D.Xc(4),D.jc(5,"translate"),D.Sb(6,"app-icons",15),D.Wb(),D.Wb(),D.Xb(7,"div"),D.Xb(8,"strong"),D.Xc(9),D.Wb(),D.Xb(10,"p",16),D.Vc(11,uc,2,1,"ng-container",17),D.Wb(),D.Xb(12,"p"),D.Sb(13,"br"),D.Xb(14,"label"),D.Xc(15,"Site: "),D.Wb(),D.Vc(16,gc,2,1,"strong",17),D.Wb(),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=e.$implicit;D.Db(1),D.rc("nzHoverable",!0),D.Db(2),D.rc("nzColor","red"),D.Db(1),D.Zc(" ",D.kc(5,6,"COMMON.REMOVE")," "),D.Db(5),D.Yc(null==t?null:t.fullName),D.Db(2),D.rc("ngForOf",null==t?null:t.roles),D.Db(5),D.rc("ngForOf",null==t?null:t.locations)}}function mc(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"h3",19),D.Xc(2,"Un-assign physician"),D.Wb(),D.Xb(3,"p"),D.Xb(4,"strong"),D.Xc(5),D.jc(6,"titlecase"),D.Wb(),D.Xc(7," is registered under "),D.Xb(8,"strong"),D.Xc(9),D.Wb(),D.Xc(10,". "),D.Wb(),D.Xb(11,"p"),D.Xc(12),D.jc(13,"titlecase"),D.Wb(),D.Xb(14,"p"),D.Xc(15," You can then proceed to assign another physician. "),D.Wb(),D.Xb(16,"button",20),D.ec("click",function(){return D.Lc(t),D.ic().isUnassignerVisible=!1}),D.Xc(17,"Okay"),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(5),D.Yc(D.kc(6,3,null==t.patientInfo?null:t.patientInfo.fullName)),D.Db(4),D.Yc(null==t.selectedPhysician?null:t.selectedPhysician.fullName),D.Db(3),D.Zc(" If ",D.kc(13,5,null==t.patientInfo?null:t.patientInfo.fullName)," is not onboarded by this physician and the status is marked as 'Not Onboarded', the physician and all of the current monitoring staff will be unassigned. ")}}const vc=function(){return[32,8]};let Sc=(()=>{class t{constructor(t,e){this._staffService=t,this._physiciansService=e}ngOnInit(){this.getPhysiciansForPatient()}getPhysiciansForPatient(){this._staffService.fetchStaffByPatientId(this.patientInfo.id).subscribe(t=>{this.physicians=null==t?void 0:t.assignedToUsers.PHYSICIAN,this.physicians&&this._physiciansService.setPhysicianName(JSON.stringify(this.physicians[0].fullName))})}showPhysicianUnassignModal(t){this.selectedPhysician=t,this.isUnassignerVisible=!0}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(S.a),D.Rb(dc.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-physicians"]],inputs:{patientInfo:"patientInfo"},decls:13,vars:9,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","7","nzSm","5","nzMd","3"],[1,"physician-action"],[3,"routerLink"],["nz-button","","nzType","primary",4,"ngIf"],["nz-col","","nzXs","17","nzSm","19","nzMd","21"],["nz-col","","nzXs","24","nzSm","12","nzMd","7","class","physician",4,"ngFor","ngForOf"],["nzWidth","330px",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["nz-button","","nzType","primary"],["nz-col","","nzXs","24","nzSm","12","nzMd","7",1,"physician"],[3,"nzHoverable"],[1,"staff-remover"],[3,"nzColor","click"],["name","delete","size","10px","color","red","altColor","red"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-typography",""],["id","modal-cancel","nz-button","","nzType","primary","nzSize","large",3,"click"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"div",3),D.Xb(4,"strong"),D.Xc(5,"Physicians"),D.Wb(),D.Xb(6,"span",4),D.Vc(7,bc,3,3,"button",5),D.Wb(),D.Wb(),D.Wb(),D.Xb(8,"div",6),D.Xb(9,"div",1),D.Vc(10,fc,17,8,"div",7),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(11,"nz-modal",8),D.ec("nzVisibleChange",function(t){return e.isUnassignerVisible=t})("nzOnCancel",function(){return e.isUnassignerVisible=!1}),D.Vc(12,mc,18,7,"ng-container",9),D.Wb()),2&t&&(D.Db(1),D.rc("nzGutter",D.xc(7,vc)),D.Db(5),D.tc("routerLink","/patient/assign/physician/",null==e.patientInfo?null:e.patientInfo.id,""),D.Db(1),D.rc("ngIf",!(null!=e.physicians&&e.physicians.length)),D.Db(2),D.rc("nzGutter",D.xc(8,vc)),D.Db(1),D.rc("ngForOf",e.physicians),D.Db(1),D.rc("nzVisible",e.isUnassignerVisible)("nzFooter",null))},directives:[k.c,k.a,b.h,c.q,c.p,C.a,C.b,X.a,E.a,T.a,vn.a,Qi.a,ee.a,V.a],pipes:[Vt.a,c.A,ir.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}.container[_ngcontent-%COMP%]{padding:2% 10px!important;background:#e6e8eb 0 0 no-repeat padding-box;border:1px solid #e6e8eb;border-radius:15px}nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:16px 0 16px 16px}.physician-action[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.physician-action[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px;display:block}.physician-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:23px;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:5px;line-height:0}nz-tag[_ngcontent-%COMP%]{width:60px;height:16px;cursor:pointer;font:normal normal 600 8px/11px Nunito}.physician[_ngcontent-%COMP%]   .staff-remover[_ngcontent-%COMP%]{visibility:hidden;float:right}.physician[_ngcontent-%COMP%]:hover   .staff-remover[_ngcontent-%COMP%]{visibility:visible}h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}#modal-cancel[_ngcontent-%COMP%]{width:80%;margin:20px auto 0;display:block}"]}),t})(),Ic=(()=>{class t{constructor(t,e){this._modalRef=t,this._router=e}cancel(){this._modalRef.destroy()}assignPhysician(){var t;this._router.navigate([`/patient/assign/physician/${null===(t=this.patientInfo)||void 0===t?void 0:t.id}`]),this._modalRef.destroy()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.e),D.Rb(b.g))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-assign-physician-alert"]],inputs:{patientInfo:"patientInfo"},decls:10,vars:1,consts:[[1,"btn-container"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",2,"margin-left","10px",3,"click"]],template:function(t,e){1&t&&(D.Vb(0),D.Xb(1,"h3"),D.Xc(2,"Assign Physician"),D.Wb(),D.Xb(3,"p"),D.Xc(4),D.Wb(),D.Xb(5,"div",0),D.Xb(6,"button",1),D.ec("click",function(){return e.cancel()}),D.Xc(7,"Cancel "),D.Wb(),D.Xb(8,"button",2),D.ec("click",function(){return e.assignPhysician()}),D.Xc(9,"Assign "),D.Wb(),D.Wb(),D.Ub()),2&t&&(D.Db(4),D.Zc(" Please assign a physician to ",null==e.patientInfo?null:e.patientInfo.fullName,". Once a physician is assigned, you can proceed to assign one or more monitoring staff. "))},directives:[X.a,E.a,T.a],styles:[".btn-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end}"]}),t})();var Dc=n("KupA");function Cc(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",8),D.ec("click",function(){D.Lc(t);const e=D.ic();return e.assignClinicianForPatientEvent(null==e.patientInfo?null:e.patientInfo.id)}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc("+ ",D.kc(2,1,"COMMON.ADD"),""))}function Xc(t,e){if(1&t&&D.Sb(0,"nz-ribbon",19),2&t){D.ic(3);const t=D.Ic(11);D.rc("nzText",t)}}function Ec(t,e){if(1&t){const t=D.Yb();D.Xb(0,"a",21),D.ec("nzOnConfirm",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic(2).unassignClinicianForPatient(null==e?null:e.id)}),D.Xb(1,"nz-tag",22),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",23),D.Wb(),D.Wb()}2&t&&(D.Db(1),D.rc("nzColor","red"),D.Db(1),D.Zc(" ",D.kc(3,2,"COMMON.REMOVE")," "))}const Tc=function(){return["DELETE_STAFF"]};function zc(t,e){1&t&&(D.Vb(0),D.Vc(1,Ec,5,4,"a",20),D.Ub()),2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,Tc)))}function _c(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"button",24),D.ec("click",function(){D.Lc(t);const e=D.ic(2).$implicit;return D.ic(2).markAsPrimary(null==e?null:e.id,null==e?null:e.fullName)}),D.Sb(2,"span",25),D.Wb(),D.Ub()}}function yc(t,e){if(1&t&&(D.Vb(0),D.Vc(1,_c,3,0,"ng-container",14),D.Ub()),2&t){const t=D.ic().$implicit,e=D.ic(2);D.Db(1),D.rc("ngIf",!e.primaryMonitoringStaffs.has(null==t?null:t.id))}}function Oc(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.Zc(" ",null==t?null:t.name," \xa0 ")}}function Mc(t,e){if(1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"titlecase"),D.jc(3,"userLocation"),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",D.kc(2,1,D.kc(3,3,null==t?null:t.id))," ")}}function Ac(t,e){if(1&t&&(D.Xb(0,"strong"),D.Vc(1,Mc,4,5,"span",14),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf",null==t?null:t.defaultLocation)}}const Pc=function(){return["MARK_AS_PRIMARY_MONITORING_STAFF"]};function Nc(t,e){if(1&t&&(D.Xb(0,"div",10),D.Vc(1,Xc,1,1,"nz-ribbon",11),D.Xb(2,"nz-card",12),D.Xb(3,"div",13),D.Vc(4,zc,2,2,"ng-container",14),D.Wb(),D.Xb(5,"div"),D.Xb(6,"strong"),D.Xb(7,"span",15),D.Xc(8),D.jc(9,"titlecase"),D.Wb(),D.Vc(10,yc,2,1,"ng-container",16),D.Wb(),D.Xb(11,"p",17),D.Vc(12,Oc,2,1,"ng-container",18),D.Wb(),D.Xb(13,"p"),D.Sb(14,"br"),D.Xb(15,"label"),D.Xc(16,"Site: "),D.Wb(),D.Xc(17," \xa0 "),D.Vc(18,Ac,2,1,"strong",18),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(1),D.rc("ngIf",n.primaryMonitoringStaffs.has(null==t?null:t.id)),D.Db(1),D.rc("nzHoverable",!0),D.Db(2),D.rc("ngIf",!n.primaryMonitoringStaffs.has(null==t?null:t.id)),D.Db(3),D.rc("nzTooltipTitle",(null==t?null:t.fullName)||"N/A"),D.Db(1),D.Zc(" ",D.kc(9,8,null==t?null:t.fullName)||"N/A"," "),D.Db(2),D.rc("isFeaturePermitted",D.xc(10,Pc)),D.Db(2),D.rc("ngForOf",null==t?null:t.roles),D.Db(6),D.rc("ngForOf",null==t?null:t.locations)}}const Wc=function(){return[32,8]};function Rc(t,e){if(1&t&&(D.Xb(0,"div",1),D.Vc(1,Nc,19,11,"div",9),D.Wb()),2&t){const t=D.ic();D.rc("nzGutter",D.xc(2,Wc)),D.Db(1),D.rc("ngForOf",t.clinicians)}}function xc(t,e){1&t&&(D.Xb(0,"span"),D.Sb(1,"span",26),D.Xc(2," Primary "),D.Wb())}let wc=(()=>{class t{constructor(t,e,n,i,a){this._patientsService=t,this._notificationsService=e,this._patientsEventLogger=n,this._modalService=i,this._router=a,this.primaryMonitoringStaffs=new Set,this.refresh=new D.n}ngOnInit(){this.getCliniciansForPatient(),this.patientInfo.monitoringStaffs.primaryStaff.forEach(t=>this.primaryMonitoringStaffs.add(t))}getCliniciansForPatient(){this._patientsService.fetchCaretakersForPatient(this.patientInfo.id).subscribe(t=>{this.clinicians=null==t?void 0:t.filter(t=>{var e;return-1!==(null===(e=null==t?void 0:t.roles)||void 0===e?void 0:e.findIndex(t=>t.type===M.a.MONITORING_STAFF))})})}assignClinicianForPatientEvent(t){var e,n,i;Array.from(this.patientInfo.physicianStaffs.primaryStaff.values()).length?(this._router.navigate([`/patient/assign-staff/${null===(e=this.patientInfo)||void 0===e?void 0:e.id}/${null===(n=this.patientInfo)||void 0===n?void 0:n.locationId}/${null===(i=this.patientInfo)||void 0===i?void 0:i.fullName}`]),this._patientsEventLogger.patientDetailsActionEvent(t,"add_monitoring_staff")):this._modalService.create({nzContent:Ic,nzComponentParams:{patientInfo:this.patientInfo},nzFooter:null,nzMaskClosable:!1})}unassignClinicianForPatient(t){this._patientsEventLogger.patientDetailsActionEvent(this.patientInfo.id,"remove_monitoring_staff"),this._patientsService.unAssignClinician(this.patientInfo.id,t).subscribe(()=>{this.getCliniciansForPatient(),this._notificationsService.success("Patient","1 staff member unassigned!")})}markAsPrimary(t,e){this._modalService.confirm({nzTitle:"Are you sure you want to assign "+e+" as the new primary monitoring staff?",nzContent:"<i>Note: A patient can have only one primary monitoring staff. </i>",nzOkText:"I'm sure",nzOnOk:()=>{this._patientsService.markPrimaryMonitoringStaff(this.patientInfo.id,t).subscribe(()=>{this._notificationsService.success("Patient","Assigned "+e+" as primary monitoring staff."),this.refresh.emit(!0)})}})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(A.b),D.Rb(v.a),D.Rb(C.f),D.Rb(b.g))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-clinicians-information"]],inputs:{patientInfo:"patientInfo"},outputs:{refresh:"refresh"},decls:12,vars:7,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","7","nzSm","5","nzMd","3"],[1,"staff-action"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-col","","nzXs","17","nzSm","19","nzMd","21"],["nz-row","",3,"nzGutter",4,"ngIf"],["primary",""],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","7","class","staff",4,"ngFor","ngForOf"],["nz-col","","nzXs","24","nzSm","12","nzMd","7",1,"staff"],["nzStandalone","","style","top: 0%;",3,"nzText",4,"ngIf"],[2,"height","150px",3,"nzHoverable"],[1,"staff-remover"],[4,"ngIf"],["nz-tooltip","",2,"pointer-events","auto !important",3,"nzTooltipTitle"],[4,"isFeaturePermitted"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],["nzStandalone","",2,"top","0%",3,"nzText"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to un-assign this staff member?",3,"nzOnConfirm",4,"isFeaturePermitted"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to un-assign this staff member?",3,"nzOnConfirm"],[3,"nzColor"],["name","delete","size","10px","color","red","altColor","red"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","crown","nzTheme","outline","nz-tooltip","","nzTooltipTitle","Primary Monitoring Staff",2,"font-size","16px","pointer-events","auto !important"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"div",3),D.Xb(4,"strong"),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Vc(7,Cc,3,3,"button",4),D.Wb(),D.Wb(),D.Xb(8,"div",5),D.Vc(9,Rc,2,3,"div",6),D.Wb(),D.Wb(),D.Wb(),D.Vc(10,xc,3,0,"ng-template",null,7,D.Wc)),2&t&&(D.Db(1),D.rc("nzGutter",D.xc(6,Wc)),D.Db(4),D.Yc(D.kc(6,4,"PATIENT.MONITORING_STAFF")),D.Db(2),D.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(2),D.rc("ngIf",!e.loadComponent))},directives:[k.c,k.a,c.q,X.a,E.a,T.a,c.p,vn.a,fi.d,Ye.a,V.a,bi.c,Dc.a,Qi.a,ee.a,R.a],pipes:[Vt.a,c.A,ir.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}.container[_ngcontent-%COMP%]{padding:2% 10px!important;background:#e6e8eb 0 0 no-repeat padding-box;border:1px solid #e6e8eb;border-radius:15px}nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:16px 0 16px 16px}nz-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{text-align:right}.staff-action[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.staff-action[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px;display:block}.staff-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:23px;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:5px;line-height:0}nz-tag[_ngcontent-%COMP%]{width:60px;height:16px;cursor:pointer;font:normal normal 600 8px/11px Nunito}app-icons[_ngcontent-%COMP%]{vertical-align:text-bottom}.staff[_ngcontent-%COMP%]   .staff-remover[_ngcontent-%COMP%]{visibility:hidden}.staff[_ngcontent-%COMP%]:hover   .staff-remover[_ngcontent-%COMP%]{visibility:visible}"]}),t})();var Vc=n("8VAF");function Lc(t,e){if(1&t&&D.Sb(0,"nz-option",10),2&t){const t=e.$implicit;D.sc("nzLabel",(null==t?null:t.code)+" "+(null==t?null:t.description)),D.rc("nzValue",t)}}function kc(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Lc,1,2,"nz-option",9),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngForOf",t.options)}}function Fc(t,e){1&t&&(D.Xb(0,"nz-option",11),D.Sb(1,"nz-spin",12),D.Xc(2," Loading codes based on input... "),D.Wb())}function Uc(t,e){1&t&&(D.Xb(0,"nz-option",11),D.Xc(1," Enter few characters to search... "),D.Wb())}function jc(t,e){if(1&t&&(D.Xb(0,"nz-card"),D.Xb(1,"div",1),D.Xb(2,"div",13),D.Xb(3,"strong"),D.Xc(4,"Code:"),D.Wb(),D.Xb(5,"input",14),D.ec("ngModelChange",function(t){return e.$implicit.code=t}),D.Wb(),D.Wb(),D.Xb(6,"div",15),D.Xb(7,"strong"),D.Xc(8,"Description:"),D.Wb(),D.Xb(9,"input",16),D.ec("ngModelChange",function(t){return e.$implicit.description=t}),D.Wb(),D.Wb(),D.Xb(10,"div",17),D.Xb(11,"strong"),D.Xc(12,"Type:"),D.Wb(),D.Xb(13,"nz-select",18),D.ec("ngModelChange",function(t){return e.$implicit.type=t}),D.Sb(14,"nz-option",19),D.Sb(15,"nz-option",20),D.Sb(16,"nz-option",21),D.Wb(),D.Wb(),D.Xb(17,"div",17),D.Xb(18,"strong"),D.Xc(19,"Status:"),D.Wb(),D.Xb(20,"nz-select",22),D.ec("ngModelChange",function(t){return e.$implicit.status=t}),D.Sb(21,"nz-option",23),D.Sb(22,"nz-option",24),D.Sb(23,"nz-option",25),D.Wb(),D.Wb(),D.Wb(),D.Sb(24,"br"),D.Xb(25,"div",1),D.Xb(26,"div",13),D.Xb(27,"strong"),D.Xc(28,"Category:"),D.Wb(),D.Xb(29,"input",26),D.ec("ngModelChange",function(t){return e.$implicit.category=t}),D.Wb(),D.Wb(),D.Xb(30,"div",15),D.Xb(31,"strong"),D.Xc(32,"Health Status:"),D.Wb(),D.Xb(33,"input",27),D.ec("ngModelChange",function(t){return e.$implicit.healthStatus=t}),D.Wb(),D.Wb(),D.Xb(34,"div",17),D.Xb(35,"strong"),D.Xc(36,"Start Date:"),D.Wb(),D.Xb(37,"nz-date-picker",28),D.ec("ngModelChange",function(t){return e.$implicit.startDateTime=t}),D.Wb(),D.Wb(),D.Xb(38,"div",17),D.Xb(39,"strong"),D.Xc(40,"End Date:"),D.Wb(),D.Xb(41,"nz-date-picker",29),D.ec("ngModelChange",function(t){return e.$implicit.endDateTime=t}),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(5),D.rc("ngModel",t.code),D.Db(4),D.rc("ngModel",t.description),D.Db(4),D.rc("ngModel",t.type),D.Db(7),D.rc("ngModel",t.status),D.Db(9),D.rc("ngModel",t.category),D.Db(4),D.rc("ngModel",t.healthStatus),D.Db(4),D.rc("ngModel",t.startDateTime),D.Db(4),D.rc("ngModel",t.endDateTime)}}let Yc=(()=>{class t{constructor(t,e,n,i,a){this._icdCodesService=t,this._patientService=e,this._dataSharingService=n,this._notificationService=i,this._modalRef=a,this.dxCodes=[],this.options=[],this.initialState=!0,this._dataSharingService.tenantSettings.subscribe(t=>{var e;t&&(this.redoxEnabled=null===(e=null==t?void 0:t.redoxConfig)||void 0===e?void 0:e.enabled)})}search(t){t?(this.isLoading=!0,this.initialState=!1,this._icdCodesService.getICDCodes(t).subscribe(t=>{(null==t?void 0:t.length)&&(this.options=[],t[3].forEach(t=>{this.options.push({code:t[0],description:t[1],type:Ni.a.UNDETERMINED,status:"Active"})})),this.isLoading=!1})):this.initialState=!0}addNewCode(t){-1===this.dxCodes.findIndex(e=>(null==e?void 0:e.code)===(null==t?void 0:t.code))&&this.dxCodes.push(t),this.options=[]}save(){this._patientService.updatePatientDxCodes(this.patientId,this.dxCodes).subscribe(()=>{this._notificationService.success("Diagnosis Codes","Codes updated successfully!"),this._modalRef.close(this.dxCodes)})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(Vc.a),D.Rb(g.a),D.Rb(Oe.a),D.Rb(A.b),D.Rb(C.e))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-diagnosis-codes"]],inputs:{patientId:"patientId",dxCodes:"dxCodes"},decls:14,vars:6,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","20"],["nzShowSearch","","nzServerSearch","true","nzNotFoundContent","No ICD codes found matching input...","nzPlaceHolder","Search Diagnosis Code","ngModel","",3,"nzMode","nzDisabled","nzOnSearch","ngModelChange"],[4,"ngIf"],["nzDisabled","","nzCustomContent","",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nzDisabled","","nzCustomContent",""],["nzSimple","","nzSize","small"],["nz-col","","nzSpan","6"],["nz-input","","placeholder","Code","disabled","",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","8"],["nz-input","","placeholder","Description","disabled","",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","5"],["nzPlaceHolder","Type",3,"ngModel","ngModelChange"],["nzValue","CHRONIC","nzLabel","Chronic"],["nzValue","NON_CHRONIC","nzLabel","Non-Chronic"],["nzValue","UNDETERMINED","nzLabel","Undetermined"],["nzPlaceHolder","Status",3,"ngModel","ngModelChange"],["nzValue","Active","nzLabel","Active"],["nzValue","Inactive","nzLabel","Inactive"],["nzValue","Resolved","nzLabel","Resolved"],["nz-input","","placeholder","Category",3,"ngModel","ngModelChange"],["nz-input","","placeholder","Health Status",3,"ngModel","ngModelChange"],["nzPlaceHolder","Start Date",3,"ngModel","ngModelChange"],["nzPlaceHolder","End Date",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"strong"),D.Xc(4,"Search Diagnosis Code"),D.Wb(),D.Xb(5,"nz-select",3),D.ec("nzOnSearch",function(t){return e.search(t)})("ngModelChange",function(t){return e.addNewCode(t)}),D.Vc(6,kc,2,1,"ng-container",4),D.Vc(7,Fc,3,0,"nz-option",5),D.Vc(8,Uc,2,0,"nz-option",5),D.Wb(),D.Wb(),D.Xb(9,"div",6),D.Xb(10,"button",7),D.ec("click",function(){return e.save()}),D.Xc(11,"Save"),D.Wb(),D.Wb(),D.Wb(),D.Sb(12,"nz-divider"),D.Vc(13,jc,42,8,"nz-card",8),D.Wb()),2&t){let t=null;D.Db(5),D.rc("nzMode","default")("nzDisabled",e.redoxEnabled),D.Db(1),D.rc("ngIf",!e.isLoading),D.Db(1),D.rc("ngIf",e.isLoading),D.Db(1),D.rc("ngIf",e.initialState&&!(null!=e.options&&e.options.length)),D.Db(5),D.rc("ngForOf",null==e.dxCodes||null==(t=e.dxCodes.slice())?null:t.reverse())}},directives:[k.c,k.a,x.d,d.u,d.x,c.q,X.a,E.a,T.a,L.a,c.p,x.a,mn.a,vn.a,je.b,d.d,te.a],styles:["nz-card[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%]{width:100%;bottom:-20px}"]}),t})(),Bc=(()=>{class t{transform(t,e){return t&&e?"FEET"===e?this.convertInchesToFeet(+t):`${t} ${e}`:"N/A"}convertInchesToFeet(t){const e=Math.floor(t/12);return`${e} feet ${t-12*e} inches`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=D.Qb({name:"height",type:t,pure:!0}),t})();function Hc(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ","IN"===(null==t.patientInfo||null==t.patientInfo.healthInfo||null==t.patientInfo.healthInfo.hipSize?null:t.patientInfo.healthInfo.hipSize.unit)?"inches":null==t.patientInfo||null==t.patientInfo.healthInfo||null==t.patientInfo.healthInfo.hipSize?null:t.patientInfo.healthInfo.hipSize.unit," ")}}function Gc(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ","IN"===(null==t.patientInfo||null==t.patientInfo.healthInfo||null==t.patientInfo.healthInfo.waistSize?null:t.patientInfo.healthInfo.waistSize.unit)?"inches":null==t.patientInfo||null==t.patientInfo.healthInfo||null==t.patientInfo.healthInfo.waistSize?null:t.patientInfo.healthInfo.waistSize.unit," ")}}function $c(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic();D.Db(1),D.Zc(" ",null==t.patientInfo||null==t.patientInfo.healthInfo||null==t.patientInfo.healthInfo.weight?null:t.patientInfo.healthInfo.weight.unit," ")}}function Zc(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.YES")))}function qc(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xb(1,"span",9),D.Vc(2,Zc,3,3,"span",10),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngSwitch",null==t?null:t.habitType),D.Db(1),D.rc("ngSwitchCase","SMOKING")}}function Kc(t,e){1&t&&(D.Xb(0,"strong"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.NO")))}function Qc(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.YES")))}function Jc(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xb(1,"span",9),D.Vc(2,Qc,3,3,"span",10),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngSwitch",null==t?null:t.condition),D.Db(1),D.rc("ngSwitchCase","DIABETIC")}}function td(t,e){1&t&&(D.Xb(0,"strong"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.NO")))}function ed(t,e){1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.YES")))}function nd(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xb(1,"span",9),D.Vc(2,ed,3,3,"span",10),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngSwitch",null==t?null:t.condition),D.Db(1),D.rc("ngSwitchCase","HYPERTENSION")}}function id(t,e){1&t&&(D.Xb(0,"strong"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"COMMON.NO")))}function ad(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"nz-tag",11),D.Xc(2),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzColor","green"),D.Db(1),D.ad(" ",null==t?null:t.code,", ",null==t?null:t.description," ")}}function sd(t,e){1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2,"N/A"),D.Wb(),D.Ub())}const od=function(){return[32,8]};let ld=(()=>{class t{constructor(t,e){this._modalService=t,this._patientViewModalService=e}ngAfterViewInit(){var t,e;let n=null===(e=null===(t=this.patientInfo)||void 0===t?void 0:t.healthInfo)||void 0===e?void 0:e.bloodGroup;n&&(n=n.replace("_POSITIVE","+"),n=n.replace("_NEGATIVE","-"),this.patientInfo.healthInfo.bloodGroup=n)}showDiagnosisCodesModal(t){var e;const n=this._modalService.create({nzContent:Yc,nzComponentParams:{patientId:null===(e=this.patientInfo)||void 0===e?void 0:e.id,dxCodes:t},nzBodyStyle:{maxHeight:"600px",overflow:"scroll"},nzWidth:"750px",nzFooter:null});null==n||n.afterClose.subscribe(t=>{var e;t&&(this.patientInfo.healthInfo.dxCodes=t);let n={dxCodes:t,patientId:null===(e=this.patientInfo)||void 0===e?void 0:e.id};this._patientViewModalService.updateProfileReadinessModal(n)})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.f),D.Rb(zr.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-health-information"]],inputs:{patientInfo:"patientInfo"},decls:81,vars:61,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","secondary"],[4,"ngIf"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","24"],[1,"action"],["nz-button","","nzType","link","id","icd-button",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"nzColor"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"label",3),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Xb(6,"div",2),D.Xb(7,"label",3),D.Xc(8),D.jc(9,"translate"),D.Wb(),D.Wb(),D.Xb(10,"div",2),D.Xb(11,"label",3),D.Xc(12),D.jc(13,"translate"),D.Wb(),D.Wb(),D.Xb(14,"div",2),D.Xb(15,"label",3),D.Xc(16),D.jc(17,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(18,"div",1),D.Xb(19,"div",2),D.Xb(20,"strong"),D.Xc(21),D.Vc(22,Hc,2,1,"ng-container",4),D.Wb(),D.Wb(),D.Xb(23,"div",2),D.Xb(24,"strong"),D.Xc(25),D.Vc(26,Gc,2,1,"ng-container",4),D.Wb(),D.Wb(),D.Xb(27,"div",2),D.Xb(28,"strong"),D.Xc(29),D.jc(30,"height"),D.Wb(),D.Wb(),D.Xb(31,"div",2),D.Xb(32,"strong"),D.Xc(33),D.Vc(34,$c,2,1,"ng-container",4),D.Wb(),D.Wb(),D.Wb(),D.Sb(35,"br"),D.Xb(36,"div",1),D.Xb(37,"div",2),D.Xb(38,"label",3),D.Xc(39),D.jc(40,"translate"),D.Wb(),D.Wb(),D.Xb(41,"div",2),D.Xb(42,"label",3),D.Xc(43),D.jc(44,"translate"),D.Wb(),D.Wb(),D.Xb(45,"div",2),D.Xb(46,"label",3),D.Xc(47),D.jc(48,"translate"),D.Wb(),D.Wb(),D.Xb(49,"div",2),D.Xb(50,"label",3),D.Xc(51),D.jc(52,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(53,"div",1),D.Xb(54,"div",2),D.Xb(55,"strong"),D.Xc(56),D.Wb(),D.Wb(),D.Xb(57,"div",2),D.Vc(58,qc,3,2,"strong",5),D.Vc(59,Kc,3,3,"strong",4),D.Wb(),D.Xb(60,"div",2),D.Vc(61,Jc,3,2,"strong",5),D.Vc(62,td,3,3,"strong",4),D.Wb(),D.Xb(63,"div",2),D.Vc(64,nd,3,2,"strong",5),D.Vc(65,id,3,3,"strong",4),D.Wb(),D.Wb(),D.Sb(66,"br"),D.Xb(67,"div",1),D.Xb(68,"div",6),D.Xb(69,"div",7),D.Xb(70,"strong"),D.Xc(71),D.jc(72,"translate"),D.Wb(),D.Xb(73,"button",8),D.ec("click",function(){return e.showDiagnosisCodesModal(null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.dxCodes)}),D.Xc(74),D.jc(75,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(76,"div",1),D.Xb(77,"div",6),D.Vc(78,ad,3,3,"ng-container",5),D.Vc(79,sd,3,0,"ng-container",4),D.Wb(),D.Wb(),D.Wb(),D.Sb(80,"br")),2&t&&(D.Db(1),D.rc("nzGutter",D.xc(55,od)),D.Db(3),D.Yc(D.kc(5,32,"PATIENT.HIP_SIZE")),D.Db(4),D.Yc(D.kc(9,34,"PATIENT.WAIST_SIZE")),D.Db(4),D.Yc(D.kc(13,36,"COMMON.HEIGHT")),D.Db(4),D.Yc(D.kc(17,38,"COMMON.WEIGHT")),D.Db(2),D.rc("nzGutter",D.xc(56,od)),D.Db(3),D.Zc(" ",(null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.hipSize?null:e.patientInfo.healthInfo.hipSize.value)||"N/A"," "),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.hipSize?null:e.patientInfo.healthInfo.hipSize.value),D.Db(3),D.Zc(" ",(null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.waistSize?null:e.patientInfo.healthInfo.waistSize.value)||"N/A"," "),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.waistSize?null:e.patientInfo.healthInfo.waistSize.value),D.Db(3),D.Zc(" ",D.lc(30,40,null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.height?null:e.patientInfo.healthInfo.height.value,null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.height?null:e.patientInfo.healthInfo.height.unit)||"N/A"," "),D.Db(4),D.Zc(" ",(null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.weight?null:e.patientInfo.healthInfo.weight.value)||"N/A"," "),D.Db(1),D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.weight?null:e.patientInfo.healthInfo.weight.value),D.Db(2),D.rc("nzGutter",D.xc(57,od)),D.Db(3),D.Yc(D.kc(40,43,"COMMON.BLOODGROUP")),D.Db(4),D.Yc(D.kc(44,45,"PATIENT.SMOKING_HABIT")),D.Db(4),D.Yc(D.kc(48,47,"PATIENT.DIABETIC")),D.Db(4),D.Yc(D.kc(52,49,"PATIENT.HYPERTENSION")),D.Db(2),D.rc("nzGutter",D.xc(58,od)),D.Db(3),D.Yc((null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.bloodGroup)||"N/A"),D.Db(2),D.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.habits),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.habits&&e.patientInfo.healthInfo.habits.length)),D.Db(2),D.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.healthConditions),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.healthConditions&&e.patientInfo.healthInfo.healthConditions.length)),D.Db(2),D.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.healthConditions),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.healthConditions&&e.patientInfo.healthInfo.healthConditions.length)),D.Db(2),D.rc("nzGutter",D.xc(59,od)),D.Db(4),D.Yc(D.kc(72,51,"COMMON.ICD_CODES")),D.Db(3),D.Zc(" ",D.kc(75,53,"COMMON.ADD")," / Update "),D.Db(2),D.rc("nzGutter",D.xc(60,od)),D.Db(2),D.rc("ngForOf",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.dxCodes),D.Db(1),D.rc("ngIf",!(null!=e.patientInfo&&null!=e.patientInfo.healthInfo&&null!=e.patientInfo.healthInfo.dxCodes&&e.patientInfo.healthInfo.dxCodes.length)))},directives:[k.c,k.a,V.a,c.q,c.p,X.a,T.a,c.s,c.t,Qi.a],pipes:[Vt.a,Bc],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}#icd-button[_ngcontent-%COMP%]:focus{color:var(--primary-color)}"]}),t})();const rd=function(){return[32,8]};let cd=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-insurance-information"]],inputs:{patientInfo:"patientInfo"},decls:36,vars:24,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","secondary"],["nz-tooltip","",3,"nzTooltipTitle"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"div",2),D.Xb(3,"label",3),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Xb(6,"div",2),D.Xb(7,"label",3),D.Xc(8),D.jc(9,"translate"),D.Wb(),D.Wb(),D.Xb(10,"div",2),D.Xb(11,"label",3),D.Xc(12),D.jc(13,"translate"),D.Wb(),D.Wb(),D.Xb(14,"div",2),D.Xb(15,"label",3),D.Xc(16),D.jc(17,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(18,"div",1),D.Xb(19,"div",2),D.Xb(20,"strong",4),D.Xb(21,"span"),D.Xc(22),D.Wb(),D.Wb(),D.Wb(),D.Xb(23,"div",2),D.Xb(24,"strong",4),D.Xb(25,"span"),D.Xc(26),D.Wb(),D.Wb(),D.Wb(),D.Xb(27,"div",2),D.Xb(28,"strong",4),D.Xb(29,"span"),D.Xc(30),D.Wb(),D.Wb(),D.Wb(),D.Xb(31,"div",2),D.Xb(32,"strong",4),D.Xb(33,"span"),D.Xc(34),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(35,"br")),2&t&&(D.Db(1),D.rc("nzGutter",D.xc(22,rd)),D.Db(3),D.Yc(D.kc(5,14,"INSURANCE.PRIMARY_INSURANCE_CARRIER_NAME")),D.Db(4),D.Yc(D.kc(9,16,"INSURANCE.INSURER_MEMBER_ID")),D.Db(4),D.Yc(D.kc(13,18,"INSURANCE.SECONDARY_INSURANCE_CARRIER_NAME")),D.Db(4),D.Yc(D.kc(17,20,"INSURANCE.INSURER_MEMBER_ID")),D.Db(2),D.rc("nzGutter",D.xc(23,rd)),D.Db(2),D.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName),D.Db(2),D.Zc(" ",(null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.carrierName)||"N/A"," "),D.Db(2),D.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId),D.Db(2),D.Yc((null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.primaryInsuranceDetails?null:e.patientInfo.insuranceInformation.primaryInsuranceDetails.insuranceId)||"N/A"),D.Db(2),D.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName),D.Db(2),D.Yc((null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.carrierName)||"N/A"),D.Db(2),D.rc("nzTooltipTitle",null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId),D.Db(2),D.Yc((null==e.patientInfo||null==e.patientInfo.insuranceInformation||null==e.patientInfo.insuranceInformation.secondaryInsuranceDetails?null:e.patientInfo.insuranceInformation.secondaryInsuranceDetails.insuranceId)||"N/A"))},directives:[k.c,k.a,V.a,fi.d],pipes:[Vt.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}strong[_ngcontent-%COMP%]{overflow:hidden;display:grid}strong[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),t})();var dd=n("gDH+"),bd=n("N+jK"),ud=n("uA0X"),pd=n("2hFh"),hd=n("IIEM");function gd(t,e){if(1&t&&(D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.jc(3,"deviceName"),D.Wb(),D.Xb(4,"td"),D.Xc(5),D.Wb(),D.Xb(6,"td"),D.Xc(7,"Unassigned"),D.Wb(),D.Xb(8,"td"),D.Xc(9),D.Wb(),D.Xb(10,"td"),D.Xc(11),D.jc(12,"date"),D.Wb(),D.Xb(13,"td"),D.Xc(14),D.Wb(),D.Wb()),2&t){const t=D.ic().$implicit,e=D.ic();D.Db(2),D.Yc(D.kc(3,6,t.type)),D.Db(3),D.Yc(t.imei),D.Db(4),D.Yc(t.changedBy),D.Db(2),D.ad("",D.lc(12,8,t.updatedAt+"Z","MMM dd yyyy, hh:mm a")," ",e.standardTimeZone,""),D.Db(3),D.Yc(e.CONTEXT_NAME_MAP.get(t.unAssignmentContext))}}function fd(t,e){if(1&t&&(D.Vb(0),D.Vc(1,gd,15,11,"tr",3),D.Xb(2,"tr"),D.Xb(3,"td"),D.Xc(4),D.jc(5,"deviceName"),D.Wb(),D.Xb(6,"td"),D.Xc(7),D.Wb(),D.Xb(8,"td"),D.Xc(9,"Assigned"),D.Wb(),D.Xb(10,"td"),D.Xc(11),D.Wb(),D.Xb(12,"td"),D.Xc(13),D.jc(14,"date"),D.Wb(),D.Xb(15,"td"),D.Xc(16,"NA"),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit,n=D.ic();D.Db(1),D.rc("ngIf",t.unAssignmentContext),D.Db(3),D.Yc(D.kc(5,6,t.type)),D.Db(3),D.Yc(t.imei),D.Db(4),D.Yc(t.createdBy),D.Db(2),D.ad("",D.lc(14,8,t.createdAt+"Z","MMM dd yyyy, hh:mm a")," ",n.standardTimeZone,"")}}let md=(()=>{class t{constructor(t){this._timezoneService=t,this.CONTEXT_NAME_MAP=new Map([["FAULTY_DEVICE","Faulty Device"],["PATIENT_DISCHARGE","Patient Discharged"],["DEVICE_RE_ASSIGNMENT","Device Reassignment"],["INCORRECT_INFORMATION","Incorrect Information"]]),this.standardTimeZone=this._timezoneService.getTimeZone()}ngOnInit(){this.deviceHistoryList=[...this.deviceList],this.deviceHistoryList.reverse()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(pd.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-device-history"]],inputs:{deviceList:"deviceList"},decls:21,vars:2,consts:[[3,"nzData"],["deviceHistoryTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"h3"),D.Xb(2,"strong"),D.Xc(3," Device Assignment History "),D.Wb(),D.Wb(),D.Xb(4,"nz-table",0,1),D.Xb(6,"thead"),D.Xb(7,"tr"),D.Xb(8,"th"),D.Xc(9,"Device"),D.Wb(),D.Xb(10,"th"),D.Xc(11,"IMEI"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"Status"),D.Wb(),D.Xb(14,"th"),D.Xc(15,"Staff"),D.Wb(),D.Xb(16,"th"),D.Xc(17,"Date"),D.Wb(),D.Xb(18,"th"),D.Xc(19,"Reason"),D.Wb(),D.Wb(),D.Wb(),D.Vc(20,fd,17,11,"ng-container",2),D.Wb(),D.Ub()),2&t){const t=D.Ic(5);D.Db(4),D.rc("nzData",e.deviceHistoryList),D.Db(16),D.rc("ngForOf",null==t?null:t.data)}},directives:[Y.f,Y.n,Y.o,Y.e,Y.l,c.p,c.q],pipes:[hd.a,c.e],styles:[".title[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-table-thead>tr>th, td[_ngcontent-%COMP%]{text-align:center!important}[_nghost-%COMP%]     .ant-table-thead>tr>th{height:50px!important}[_nghost-%COMP%]     tr.ant-table-placeholder{display:none}"]}),t})();function vd(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",11),D.ec("click",function(){return D.Lc(t),D.ic(2).showBodyTraceBT105Dialog()}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" + ",D.kc(2,1,"COMMON.ADD")," "))}function Sd(t,e){if(1&t&&(D.Vb(0),D.Vc(1,vd,3,3,"button",10),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf","DISCHARGED"!==(null==t.patientInfo?null:t.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==t.patientInfo?null:t.patientInfo.patientStatus))}}function Id(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"nz-tag",16),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic().unassignDevice(null==e?null:e.imei)}),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",17),D.Wb(),D.Ub()}2&t&&(D.Db(1),D.rc("nzColor","red"),D.Db(1),D.Zc(" ",D.kc(3,2,"COMMON.REMOVE")," "))}const Dd=function(){return["REMOVE_DEVICES"]};function Cd(t,e){if(1&t&&(D.Xb(0,"div",12),D.Xb(1,"nz-card",13),D.Xb(2,"div",14),D.Vc(3,Id,5,4,"ng-container",7),D.Wb(),D.Xb(4,"div"),D.Xb(5,"strong"),D.Xc(6),D.jc(7,"deviceName"),D.Wb(),D.Xb(8,"p",15),D.Xc(9),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzHoverable",!0),D.Db(2),D.rc("isFeaturePermitted",D.xc(6,Dd)),D.Db(3),D.Yc(D.kc(7,4,t.type)),D.Db(3),D.Zc("IMEI: ",null==t?null:t.imei,"")}}const Xd=function(){return[32,8]},Ed=function(){return["ADD_DEVICES"]};let Td=(()=>{class t{constructor(t,e,n){this.devicesService=t,this._bt105CreateModalService=e,this._modalService=n}ngOnInit(){this.loadDevices(),this.fetchDeviceHistory()}loadDevices(){this.devicesService.getDevicesForUser(this.patientInfo.id).subscribe(t=>{this.devices=t,this.fetchDeviceHistory()})}showBodyTraceBT105Dialog(){this._bt105CreateModalService.showModal(this.patientInfo.id).afterClose.subscribe(t=>{t&&this.loadDevices()})}fetchDeviceHistory(){this.devicesService.getDeviceHistoryForuser(this.patientInfo.id).subscribe(t=>{this.deviceHistoryList=t})}unassignDevice(t){this._modalService.create({nzContent:ud.a,nzComponentParams:{deviceId:t},nzFooter:null,nzWidth:"500px",nzClosable:!1}).afterClose.subscribe(t=>{t&&this.loadDevices()})}viewDeviceHistory(){this._modalService.create({nzContent:md,nzComponentParams:{deviceList:this.deviceHistoryList},nzFooter:null,nzWidth:"1280px",nzClosable:!0})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(bd.a),D.Rb(dd.a),D.Rb(C.f))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-assigned-devices"]],inputs:{patientInfo:"patientInfo"},decls:16,vars:11,consts:[[1,"container"],[3,"ngClass"],[3,"click"],["name","arrowRight","size","15px"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","7","nzSm","5","nzMd","3"],[1,"device-action"],[4,"isFeaturePermitted"],["nz-col","","nzXs","17","nzSm","19","nzMd","21"],["nz-col","","nzXs","24","nzSm","12","nzMd","7","class","device",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","7",1,"device"],[3,"nzHoverable"],[1,"device-remover"],["nz-typography","","nzType","secondary"],[3,"nzColor","click"],["name","delete","size","10px","color","red","altColor","red"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div",1),D.Xb(2,"span",2),D.ec("click",function(){return(null==e.deviceHistoryList?null:e.deviceHistoryList.length)>0?e.viewDeviceHistory():null}),D.Xc(3," View History \xa0 "),D.Sb(4,"app-icons",3),D.Wb(),D.Wb(),D.Xb(5,"div",4),D.Xb(6,"div",5),D.Xb(7,"div",6),D.Xb(8,"strong"),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Vc(11,Sd,2,1,"ng-container",7),D.Wb(),D.Wb(),D.Xb(12,"div",8),D.Xb(13,"div",4),D.Vc(14,Cd,10,7,"div",9),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(15,"br")),2&t&&(D.Db(1),D.rc("ngClass",(null==e.deviceHistoryList?null:e.deviceHistoryList.length)>0?"view-history":"view-history-absent"),D.Db(4),D.rc("nzGutter",D.xc(8,Xd)),D.Db(4),D.Yc(D.kc(10,6,"COMMON.DEVICES")),D.Db(2),D.rc("isFeaturePermitted",D.xc(9,Ed)),D.Db(2),D.rc("nzGutter",D.xc(10,Xd)),D.Db(1),D.rc("ngForOf",e.devices))},directives:[c.o,ee.a,k.c,k.a,Ye.a,c.p,c.q,X.a,E.a,T.a,vn.a,V.a,Qi.a],pipes:[Vt.a,hd.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}.container[_ngcontent-%COMP%]{padding:2% 10px!important;background:#e6e8eb 0 0 no-repeat padding-box;border:1px solid #e6e8eb;border-radius:15px}nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:8px 0 16px 16px}nz-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{text-align:right}.device-action[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.device-action[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;margin-bottom:5px;display:block}.device-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;height:23px;background:var(--primary-color) 0 0 no-repeat padding-box;border-radius:5px;line-height:0}nz-tag[_ngcontent-%COMP%]{width:60px;height:16px;cursor:pointer;font:normal normal 600 8px/11px Nunito}app-icons[_ngcontent-%COMP%]{vertical-align:text-bottom}.device[_ngcontent-%COMP%]   .device-remover[_ngcontent-%COMP%]{visibility:hidden}.device[_ngcontent-%COMP%]:hover   .device-remover[_ngcontent-%COMP%]{visibility:visible}.view-history[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;cursor:pointer}.view-history[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .view-history-absent[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.view-history[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%], .view-history-absent[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:middle}.view-history-absent[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;color:gray;cursor:not-allowed}"]}),t})();var zd=n("YPQb");const _d=function(t){return{disabled:t}};function yd(t,e){if(1&t){const t=D.Yb();D.Xb(0,"tr"),D.Xb(1,"td"),D.Xb(2,"strong"),D.Xc(3),D.Wb(),D.Wb(),D.Xb(4,"td"),D.Xc(5),D.Wb(),D.Xb(6,"td"),D.Xc(7),D.Wb(),D.Xb(8,"td"),D.Xc(9),D.Wb(),D.Xb(10,"td",4),D.Xb(11,"app-icons",5),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).editGuardian(n)}),D.Wb(),D.Xc(12," \xa0 "),D.Xb(13,"a",6),D.ec("nzOnConfirm",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).deletePatientsGuardian(null==n?null:n.id)}),D.Sb(14,"app-icons",7),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=e.$implicit,n=D.ic(2);D.Db(3),D.Yc((null==t?null:t.fullName)||"N/A"),D.Db(2),D.Yc((null==t?null:t.relationship)||"N/A"),D.Db(2),D.Yc((null==t?null:t.email)||"N/A"),D.Db(2),D.Yc((null==t?null:t.mobile)||"N/A"),D.Db(1),D.rc("ngClass",D.yc(5,_d,"DISCHARGED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)))}}const Od=function(){return["20%","20%","20%","25%","15%"]},Md=function(){return{x:"1250px"}};function Ad(t,e){if(1&t&&(D.Xb(0,"div"),D.Sb(1,"nz-divider"),D.Xb(2,"h4"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"nz-table",1,2),D.Xb(7,"tbody"),D.Vc(8,yd,15,7,"tr",3),D.Wb(),D.Wb(),D.Sb(9,"br"),D.Wb()),2&t){const t=D.Ic(6),e=D.ic();D.Db(3),D.Yc(D.kc(4,6,"PATIENT.GURADIANS")),D.Db(2),D.rc("nzData",e.guardians)("nzShowPagination",!1)("nzWidthConfig",D.xc(8,Od))("nzScroll",D.xc(9,Md)),D.Db(3),D.rc("ngForOf",null==t?null:t.data)}}let Pd=(()=>{class t extends h.a{constructor(t,e,n,i){super(),this._patientsService=t,this._patientsViewService=e,this._patientViewRefreshService=n,this._notificationsService=i,this._patientViewRefreshService.observeGuardians().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getAllGuardiansForPatient()})}ngOnInit(){this.getAllGuardiansForPatient()}getAllGuardiansForPatient(){this._patientsService.fetchGuardiansForPatient(this.patientInfo.id).subscribe(t=>this.guardians=t)}editGuardian(t){this._patientsViewService.showGuardianModal(this.patientInfo.id,t).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this._patientViewRefreshService.refreshGuardians()})}deletePatientsGuardian(t){this._patientsService.deleteGuardian(t).subscribe(()=>{this._notificationsService.success("Guardians","Guardian removed successfully!"),this.getAllGuardiansForPatient()})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(zr.a),D.Rb(zd.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-guardians-information"]],inputs:{patientInfo:"patientInfo"},features:[D.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination","nzWidthConfig","nzScroll"],["guardiansTable",""],[4,"ngFor","ngForOf"],[3,"ngClass"],["name","edit","strokeWidth","0px",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to delete this guardian?",3,"nzOnConfirm"],["name","delete"]],template:function(t,e){1&t&&D.Vc(0,Ad,10,10,"div",0),2&t&&D.rc("ngIf",null==e.guardians?null:e.guardians.length)},directives:[c.q,L.a,Y.f,Y.i,c.p,Y.o,Y.e,c.o,ee.a,Dc.a],pipes:[Vt.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}td[_ngcontent-%COMP%]:last-child{text-align:center}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"]}),t})();function Nd(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.Zc(" ",t," ")}}function Wd(t,e){1&t&&(D.Vb(0),D.Xc(1,"N/A"),D.Ub())}const Rd=function(t){return{disabled:t}};function xd(t,e){if(1&t){const t=D.Yb();D.Xb(0,"tr"),D.Xb(1,"td"),D.Xb(2,"strong"),D.Xc(3),D.Wb(),D.Wb(),D.Xb(4,"td"),D.Xc(5),D.Wb(),D.Xb(6,"td"),D.Vc(7,Nd,2,1,"ng-container",3),D.Vc(8,Wd,2,0,"ng-container",0),D.Wb(),D.Xb(9,"td",4),D.Xb(10,"app-icons",5),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).editPatientsAlergies(n)}),D.Wb(),D.Xc(11," \xa0 "),D.Xb(12,"a",6),D.ec("nzOnConfirm",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).deletePatientsAllergy(n)}),D.Sb(13,"app-icons",7),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=e.$implicit,n=D.ic(2);D.Db(3),D.Yc((null==t?null:t.name)||"N/A"),D.Db(2),D.Yc((null==t?null:t.level)||"N/A"),D.Db(2),D.rc("ngForOf",null==t?null:t.symptoms),D.Db(1),D.rc("ngIf",!(null!=t&&null!=t.symptoms&&t.symptoms.length)),D.Db(1),D.rc("ngClass",D.yc(5,Rd,"DISCHARGED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)))}}const wd=function(){return["28%","28%","28%","16%"]},Vd=function(){return{x:"1250px"}};function Ld(t,e){if(1&t&&(D.Xb(0,"div"),D.Sb(1,"nz-divider"),D.Xb(2,"h4"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"nz-table",1,2),D.Xb(7,"tbody"),D.Vc(8,xd,14,7,"tr",3),D.Wb(),D.Wb(),D.Sb(9,"br"),D.Wb()),2&t){const t=D.Ic(6),e=D.ic();D.Db(3),D.Yc(D.kc(4,6,"COMMON.ALLERGY")),D.Db(2),D.rc("nzData",null==e.patientInfo||null==e.patientInfo.healthInfo?null:e.patientInfo.healthInfo.allergies)("nzShowPagination",!1)("nzWidthConfig",D.xc(8,wd))("nzScroll",D.xc(9,Vd)),D.Db(3),D.rc("ngForOf",null==t?null:t.data)}}let kd=(()=>{class t extends h.a{constructor(t,e,n,i){super(),this._patientsService=t,this._patientsViewService=e,this._patientViewRefreshService=n,this._notificationsService=i,this._patientViewRefreshService.observeAllergies().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n;t&&((null===(n=null===(e=this.patientInfo)||void 0===e?void 0:e.healthInfo)||void 0===n?void 0:n.allergies)||(this.patientInfo.healthInfo.allergies=[]),this.patientInfo.healthInfo.allergies=[...this.patientInfo.healthInfo.allergies,t])})}editPatientsAlergies(t){var e;this._patientsViewService.showAllergyModal(null===(e=this.patientInfo)||void 0===e?void 0:e.id,t).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n,i,a,s;t&&(null===(i=null===(n=null===(e=this.patientInfo)||void 0===e?void 0:e.healthInfo)||void 0===n?void 0:n.allergies)||void 0===i||i.forEach(e=>{e.name===(null==t?void 0:t.name)&&(e=t)}),this.updateAllergies(null===(s=null===(a=this.patientInfo)||void 0===a?void 0:a.healthInfo)||void 0===s?void 0:s.allergies))})}updateAllergies(t){this._patientsService.updateAllergiesForPatient(this.patientInfo.id,t).subscribe(()=>{this._notificationsService.success("Allergies","Allergy updated successfully!")})}deletePatientsAllergy(t){var e,n,i;const a=null===(i=null===(n=null===(e=this.patientInfo)||void 0===e?void 0:e.healthInfo)||void 0===n?void 0:n.allergies)||void 0===i?void 0:i.filter(e=>e.name!==t.name);this._patientsService.updateAllergiesForPatient(this.patientInfo.id,a).subscribe(()=>{this.patientInfo.healthInfo.allergies=a,this._notificationsService.success("Allergies","Allergy removed successfully!")})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(zr.a),D.Rb(zd.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-allergies-information"]],inputs:{patientInfo:"patientInfo"},features:[D.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination","nzWidthConfig","nzScroll"],["allergiesTable",""],[4,"ngFor","ngForOf"],[3,"ngClass"],["name","edit","strokeWidth","0px",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to delete this allergy?",3,"nzOnConfirm"],["name","delete"]],template:function(t,e){1&t&&D.Vc(0,Ld,10,10,"div",0),2&t&&D.rc("ngIf",null==e.patientInfo||null==e.patientInfo.healthInfo||null==e.patientInfo.healthInfo.allergies?null:e.patientInfo.healthInfo.allergies.length)},directives:[c.q,L.a,Y.f,Y.i,c.p,Y.o,Y.e,c.o,ee.a,Dc.a],pipes:[Vt.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}td[_ngcontent-%COMP%]:last-child{text-align:center}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"]}),t})();const Fd=function(t){return{disabled:t}};function Ud(t,e){if(1&t){const t=D.Yb();D.Xb(0,"tr"),D.Xb(1,"td"),D.Xb(2,"strong"),D.Xc(3),D.Wb(),D.Wb(),D.Xb(4,"td"),D.Xc(5),D.Wb(),D.Xb(6,"td"),D.Xc(7),D.Wb(),D.Xb(8,"td"),D.Xc(9),D.Wb(),D.Xb(10,"td"),D.Xc(11),D.Wb(),D.Xb(12,"td",4),D.Xb(13,"app-icons",5),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).editContact(n)}),D.Wb(),D.Xc(14," \xa0 "),D.Xb(15,"a",6),D.ec("nzOnConfirm",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).deletePatientsContact(null==n?null:n.id)}),D.Sb(16,"app-icons",7),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=e.$implicit,n=D.ic(2);D.Db(3),D.Yc((null==t?null:t.name)||"N/A"),D.Db(2),D.Yc((null==t?null:t.relationship)||"N/A"),D.Db(2),D.Yc((null==t?null:t.email)||"N/A"),D.Db(2),D.Yc((null==t?null:t.type)||"N/A"),D.Db(2),D.Yc((null==t?null:t.mobile)||"N/A"),D.Db(1),D.rc("ngClass",D.yc(6,Fd,"DISCHARGED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)))}}const jd=function(){return["20%","15%","15%","15%","15%","15%"]},Yd=function(){return{x:"1250px"}};function Bd(t,e){if(1&t&&(D.Xb(0,"div"),D.Sb(1,"nz-divider"),D.Xb(2,"h4"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"nz-table",1,2),D.Xb(7,"tbody"),D.Vc(8,Ud,17,8,"tr",3),D.Wb(),D.Wb(),D.Sb(9,"br"),D.Sb(10,"br"),D.Wb()),2&t){const t=D.Ic(6),e=D.ic();D.Db(3),D.Yc(D.kc(4,6,"PATIENT.CONTACTS")),D.Db(2),D.rc("nzData",e.contacts)("nzShowPagination",!1)("nzWidthConfig",D.xc(8,jd))("nzScroll",D.xc(9,Yd)),D.Db(3),D.rc("ngForOf",null==t?null:t.data)}}let Hd=(()=>{class t extends h.a{constructor(t,e,n,i){super(),this._patientsService=t,this._patientsViewService=e,this._patientViewRefreshService=n,this._notificationsService=i,this._patientViewRefreshService.observeContacts().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getAllContactsForPatient()})}ngOnInit(){this.getAllContactsForPatient()}getAllContactsForPatient(){this.patientInfo.id&&this._patientsService.fetchEmergencyContactsForPatient(this.patientInfo.id).subscribe(t=>this.contacts=t)}editContact(t){this._patientsViewService.showContactModal(this.patientInfo.id,t).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this._patientViewRefreshService.refreshContacts()})}deletePatientsContact(t){this._patientsService.deleteContact(this.patientInfo.id,t).subscribe(()=>{this._notificationsService.success("Contacts","Contact removed successfully!"),this.getAllContactsForPatient()})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(zr.a),D.Rb(zd.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-contacts-information"]],inputs:{patientInfo:"patientInfo"},features:[D.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination","nzWidthConfig","nzScroll"],["contactsTable",""],[4,"ngFor","ngForOf"],[3,"ngClass"],["name","edit","strokeWidth","0px",3,"click"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to delete this contact?",3,"nzOnConfirm"],["name","delete"]],template:function(t,e){1&t&&D.Vc(0,Bd,11,10,"div",0),2&t&&D.rc("ngIf",null==e.contacts?null:e.contacts.length)},directives:[c.q,L.a,Y.f,Y.i,c.p,Y.o,Y.e,c.o,ee.a,Dc.a],pipes:[Vt.a],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}td[_ngcontent-%COMP%]:last-child{text-align:center}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"]}),t})();var Gd=n("vDMs"),$d=n("ncdi");function Zd(t,e){1&t&&(D.Xb(0,"strong"),D.Xc(1," No notes have been added yet. "),D.Wb())}function qd(t,e){if(1&t&&(D.Xb(0,"nz-timeline-item"),D.Xc(1),D.jc(2,"titlecase"),D.Sb(3,"br"),D.Xb(4,"em",9),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2).$implicit;D.Db(1),D.Zc(" ",D.kc(2,4,null==t?null:t.note)," "),D.Db(4),D.bd(" ",(null==t?null:t.note)==(null==n||null==n.notes[0]?null:n.notes[0].note)?"Added ":"Edited ","",null!=t&&t.context?"by "+(null==t?null:t.context):""," on ",D.lc(6,6,null==t?null:t.createdAt,"mediumDate")," ")}}function Kd(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2,"Notes:"),D.Wb(),D.Sb(3,"br"),D.Sb(4,"br"),D.Xb(5,"nz-timeline"),D.Vc(6,qd,7,9,"nz-timeline-item",5),D.Wb(),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(6),D.rc("ngForOf",null==t?null:t.notes)}}function Qd(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"tr"),D.Xb(2,"td",6),D.ec("nzExpandChange",function(n){D.Lc(t);const i=e.$implicit;return D.ic(2).onExpandChange(i.id,n)}),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.Wb(),D.Xb(5,"td"),D.Xc(6),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td"),D.Xc(10),D.Wb(),D.Xb(11,"td"),D.Xc(12),D.jc(13,"date"),D.Wb(),D.Xb(14,"td"),D.Xb(15,"app-icons",7),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).addResource(n)}),D.Wb(),D.Wb(),D.Wb(),D.Xb(16,"tr",8),D.Vc(17,Zd,2,0,"strong",0),D.Vc(18,Kd,7,1,"ng-container",0),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit,n=D.ic(2);D.Db(2),D.rc("nzExpand",n.expandSet.has(t.id)),D.Db(2),D.Yc(null==t?null:t.name),D.Db(2),D.Yc((null==t?null:t.resourceType)||"N/A"),D.Db(2),D.Yc((null==t?null:t.contactNumber)||"N/A"),D.Db(2),D.Yc((null==t?null:t.status)||"N/A"),D.Db(2),D.Yc(null!=t&&t.dateRequested?D.lc(13,9,null==t?null:t.dateRequested,"MM/dd/yyyy"):"N/A"),D.Db(4),D.rc("nzExpand",n.expandSet.has(t.id)),D.Db(1),D.rc("ngIf",!(null!=t&&null!=t.notes&&t.notes.length)),D.Db(1),D.rc("ngIf",null==t||null==t.notes?null:t.notes.length)}}function Jd(t,e){if(1&t&&(D.Xb(0,"div"),D.Sb(1,"nz-divider"),D.Xb(2,"h4"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"nz-table",1,2),D.Xb(7,"thead"),D.Xb(8,"tr",3),D.Sb(9,"th",4),D.Xb(10,"th"),D.Xc(11,"Name"),D.Wb(),D.Xb(12,"th"),D.Xc(13,"Resource Type"),D.Wb(),D.Xb(14,"th"),D.Xc(15,"Contact Number"),D.Wb(),D.Xb(16,"th"),D.Xc(17,"Status"),D.Wb(),D.Xb(18,"th"),D.Xc(19,"Date Requested"),D.Wb(),D.Xb(20,"th"),D.Xc(21,"Action"),D.Wb(),D.Wb(),D.Wb(),D.Xb(22,"tbody"),D.Vc(23,Qd,19,12,"ng-container",5),D.Wb(),D.Wb(),D.Sb(24,"br"),D.Sb(25,"br"),D.Wb()),2&t){const t=D.Ic(6),e=D.ic();D.Db(3),D.Yc(D.kc(4,4,"COMMON.HOME_COMMUNITY_RESOURCE")),D.Db(2),D.rc("nzData",e.resources)("nzShowPagination",!1),D.Db(18),D.rc("ngForOf",null==t?null:t.data)}}let tb=(()=>{class t extends h.a{constructor(t,e,n){super(),this._homeCommunityResourceService=t,this._patientViewModalService=e,this._patientViewRefreshService=n,this.resources=[],this.expandSet=new Set,this._patientViewRefreshService.observeCommunityResources().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this.getData()})}ngOnInit(){this.getData()}getData(){this._homeCommunityResourceService.fetchHomeCommunityResources(this.patientId).subscribe(t=>this.resources=t)}onExpandChange(t,e){e?this.expandSet.add(t):this.expandSet.delete(t)}addResource(t){this._patientViewModalService.showResourceModal(this.patientId,t).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.getData()})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(Gd.a),D.Rb(zr.a),D.Rb(zd.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-home-community"]],inputs:{patientId:"patientId"},features:[D.Ab],decls:1,vars:1,consts:[[4,"ngIf"],["nzSize","small",3,"nzData","nzShowPagination"],["basicTable",""],["hidden",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],["strokeWidth","0px","name","edit",3,"click"],[3,"nzExpand"],["nz-typography","","nzType","secondary"]],template:function(t,e){1&t&&D.Vc(0,Jd,26,6,"div",0),2&t&&D.rc("ngIf",null==e.resources?null:e.resources.length)},directives:[c.q,L.a,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p,Y.j,ee.a,Y.p,Y.g,$d.a,$d.b,V.a],pipes:[Vt.a,c.e,c.A],styles:["*[_ngcontent-%COMP%]{font-size:11px}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;font-size:13px}"]}),t})();var eb=n("OrU2"),nb=n("isHH"),ib=n("/XTn"),ab=n("Ljqs"),sb=n("gSz3"),ob=n("OG+h"),lb=n("IvDN");function rb(t,e){1&t&&(D.Xb(0,"div",8),D.Xb(1,"h5",9),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"PATIENT.ASSIGN_MONITORING_STAFF")))}function cb(t,e){if(1&t&&(D.Vb(0),D.Vc(1,rb,4,3,"div",5),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf",!(null!=t.clinicians&&t.clinicians.length))}}function db(t,e){1&t&&(D.Xb(0,"div",8),D.Xb(1,"h5",9),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"PATIENT.CREATE_EPISODE")))}function bb(t,e){1&t&&(D.Xb(0,"div",8),D.Xb(1,"h5",9),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"PATIENT.ASSIGN_CAREPLAN")))}function ub(t,e){1&t&&(D.Xb(0,"div",8),D.Xb(1,"h5",9),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,1,"PATIENT.SET_VITAL_RANGE_FOR_ALERT_NOTIFICATIONS")))}function pb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",8),D.Xb(1,"a",10),D.ec("click",function(){return D.Lc(t),D.ic(3).redirectToStaffAssigner()}),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",11),D.Wb(),D.Wb()}2&t&&(D.Db(2),D.Zc(" ",D.kc(3,1,"PATIENT.ASSIGN_NOW")," "))}function hb(t,e){if(1&t&&(D.Vb(0),D.Vc(1,pb,5,3,"div",5),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf",!(null!=t.clinicians&&t.clinicians.length))}}function gb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",8),D.Xb(1,"a",10),D.ec("click",function(){return D.Lc(t),D.ic(2).validateProfileReadiness()}),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",11),D.Wb(),D.Wb()}2&t&&(D.Db(2),D.Zc(" ",D.kc(3,1,"PATIENT.CREATE_NOW")," "))}function fb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",8),D.Xb(1,"a",10),D.ec("click",function(){return D.Lc(t),D.ic(2).showCarePlanTemplates()}),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",11),D.Wb(),D.Wb()}2&t&&(D.Db(2),D.Zc(" ",D.kc(3,1,"PATIENT.ASSIGN_NOW")," "))}const mb=function(){return{tab:"alerts"}};function vb(t,e){if(1&t&&(D.Xb(0,"div",8),D.Xb(1,"a",12),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",11),D.Wb(),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.tc("routerLink","/patient/view/",null==t.patientInfo?null:t.patientInfo.id,""),D.rc("queryParams",D.xc(5,mb)),D.Db(1),D.Zc(" ",D.kc(3,3,"PATIENT.GO_TO_ALERT_SETTINGS")," ")}}function Sb(t,e){1&t&&(D.Xb(0,"h4",9),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"PATIENT.PENDING_ACTIONS")))}const Ib=function(){return{color:"#DEDEDE"}};function Db(t,e){1&t&&(D.Xb(0,"label",16),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.rc("ngStyle",D.xc(4,Ib)),D.Db(1),D.Zc(" ",D.kc(2,2,"PATIENT.PENDING_ACTIONS.HIDE"),""))}function Cb(t,e){1&t&&(D.Xb(0,"label",17),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"PATIENT.PENDING_ACTIONS.SHOW"),""))}function Xb(t,e){if(1&t&&(D.Xb(0,"button",13),D.Vc(1,Db,3,5,"label",14),D.Vc(2,Cb,3,3,"label",15),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf",t.state),D.Db(1),D.rc("ngIf",!t.state)}}const Eb=function(){return["ASSIGN_MONITORING_STAFF_TO_PATIENT"]};function Tb(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"nz-collapse",1),D.Xb(2,"nz-collapse-panel",2),D.ec("nzActiveChange",function(e){return D.Lc(t),D.ic().state=e}),D.Xb(3,"div",3),D.Vc(4,cb,2,1,"ng-container",4),D.Vc(5,db,4,3,"div",5),D.Vc(6,bb,4,3,"div",5),D.Vc(7,ub,4,3,"div",5),D.Wb(),D.Xb(8,"div",3),D.Vc(9,hb,2,1,"ng-container",4),D.Vc(10,gb,5,3,"div",5),D.Vc(11,fb,5,3,"div",5),D.Vc(12,vb,5,6,"div",5),D.Wb(),D.Wb(),D.Vc(13,Sb,3,3,"ng-template",null,6,D.Wc),D.Vc(15,Xb,3,2,"ng-template",null,7,D.Wc),D.Wb(),D.Sb(17,"br"),D.Ub()}if(2&t){const t=D.Ic(14),e=D.Ic(16),n=D.ic();D.Db(1),D.rc("nzGhost",!0)("nzExpandIconPosition","right"),D.Db(1),D.rc("nzHeader",t)("nzActive",n.state)("nzExpandedIcon",e),D.Db(2),D.rc("isFeaturePermitted",D.xc(13,Eb)),D.Db(1),D.rc("ngIf",(null==n.tenantConfig||null==n.tenantConfig.episodeBlueprints?null:n.tenantConfig.episodeBlueprints.length)&&!(null!=n.episodes&&n.episodes.totalCount)),D.Db(1),D.rc("ngIf",!(null!=n.tenantConfig&&null!=n.tenantConfig.episodeBlueprints&&n.tenantConfig.episodeBlueprints.length||null!=n.careplans&&n.careplans.length)),D.Db(1),D.rc("ngIf",(null==n.tenantConfig||null==n.tenantConfig.vitalConfig?null:n.tenantConfig.vitalConfig.enabled)&&!(null!=n.userVitalAlerts&&n.userVitalAlerts.length)),D.Db(2),D.rc("isFeaturePermitted",D.xc(14,Eb)),D.Db(1),D.rc("ngIf",(null==n.tenantConfig||null==n.tenantConfig.episodeBlueprints?null:n.tenantConfig.episodeBlueprints.length)&&!(null!=n.episodes&&n.episodes.totalCount)),D.Db(1),D.rc("ngIf",!(null!=n.tenantConfig&&null!=n.tenantConfig.episodeBlueprints&&n.tenantConfig.episodeBlueprints.length||null!=n.careplans&&n.careplans.length)),D.Db(1),D.rc("ngIf",(null==n.tenantConfig||null==n.tenantConfig.vitalConfig?null:n.tenantConfig.vitalConfig.enabled)&&!(null!=n.userVitalAlerts&&n.userVitalAlerts.length))}}let zb=(()=>{class t{constructor(t,e,n,i,a,s,o,l){this._router=t,this._patientsService=e,this._episodesService=n,this._userVitalAlertService=i,this._dataSharingService=a,this._careplanService=s,this._modalService=o,this._patientViewModalService=l,this.state=!0,this.loading=!0,this._dataSharingService.tenantSettings.subscribe(t=>{var e;t&&(this.tenantConfig=t,t.episodeBlueprints=null===(e=null==t?void 0:t.episodeBlueprints)||void 0===e?void 0:e.filter(t=>!t.archived))})}ngOnInit(){this.loadPendingActions()}showCarePlanTemplates(){this._modalService.create({nzContent:ob.a,nzComponentParams:{patientId:this.patientInfo.id,tenantId:this.patientInfo.tenantId},nzFooter:null})}loadPendingActions(){const t=this._patientsService.fetchCaretakersForPatient(this.patientInfo.id),e=this._episodesService.getEpisodes(this.patientInfo.id,1,0,void 0,[ib.a.IN_PROGRESS,ib.a.SCHEDULED]),n=this._careplanService.getActiveCareplansForAPatient(this.patientInfo.id,null),i=this._userVitalAlertService.fetchVitalBlueprintsOfUser(this.patientInfo.id);Object(ab.forkJoin)([t,e,n,i]).subscribe(t=>{var e;this.loading=!1,this.clinicians=null===(e=t[0])||void 0===e?void 0:e.filter(t=>{var e;return-1!==(null===(e=null==t?void 0:t.roles)||void 0===e?void 0:e.findIndex(t=>t.type===M.a.MONITORING_STAFF))}),this.episodes=t[1],this.careplans=t[2],this.userVitalAlerts=t[3]})}validateProfileReadiness(){this._router.navigate([],{queryParams:{tab:"episodes"},queryParamsHandling:"merge"}),this._patientViewModalService.showProfileReadinessModal()}redirectToStaffAssigner(){var t,e,n;Array.from(this.patientInfo.physicianStaffs.primaryStaff.values()).length?this._router.navigate([`/patient/assign-staff/${null===(t=this.patientInfo)||void 0===t?void 0:t.id}/${null===(e=this.patientInfo)||void 0===e?void 0:e.locationId}/${null===(n=this.patientInfo)||void 0===n?void 0:n.fullName}`]):this._modalService.create({nzContent:Ic,nzComponentParams:{patientInfo:this.patientInfo},nzFooter:null,nzMaskClosable:!1})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(g.a),D.Rb(fn.a),D.Rb(sb.a),D.Rb(Oe.a),D.Rb(nb.a),D.Rb(C.f),D.Rb(zr.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-pending-actions"]],inputs:{patientInfo:"patientInfo"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"nzGhost","nzExpandIconPosition"],[3,"nzHeader","nzActive","nzExpandedIcon","nzActiveChange"],["nz-row",""],[4,"isFeaturePermitted"],["nz-col","","nzSpan","8",4,"ngIf"],["header",""],["toggle",""],["nz-col","","nzSpan","8"],["nz-typography",""],["nz-button","","nzType","link",3,"click"],["name","arrowRight","size","12px"],["nz-button","","nzType","link",3,"routerLink","queryParams"],["id","toggle","nz-button","","nzType","text"],["nz-typography","",3,"ngStyle",4,"ngIf"],["nz-typography","","nzType","success",4,"ngIf"],["nz-typography","",3,"ngStyle"],["nz-typography","","nzType","success"]],template:function(t,e){1&t&&D.Vc(0,Tb,18,15,"ng-container",0),2&t&&D.rc("ngIf",!e.loading&&(!(null!=e.clinicians&&e.clinicians.length)||!(null!=e.episodes&&e.episodes.totalCount)||(null==e.tenantConfig||null==e.tenantConfig.vitalConfig?null:e.tenantConfig.vitalConfig.enabled)&&!(null!=e.userVitalAlerts&&e.userVitalAlerts.length)))},directives:[c.q,lb.a,lb.c,k.c,Ye.a,k.a,V.a,X.a,T.a,ee.a,b.j,c.r],pipes:[Vt.a],styles:["[_nghost-%COMP%]     .ant-collapse{width:100%;border-radius:15px;margin:15px 0;border:1px solid #dedede;background:#393939 0 0 no-repeat padding-box}nz-collapse-panel[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]     .ant-collapse-header{padding:12px 16px 0!important}#toggle[_ngcontent-%COMP%]{float:right;cursor:pointer}h4[_ngcontent-%COMP%]{color:var(--neutral-color)!important}h5[_ngcontent-%COMP%]{color:#dedede!important;font-size:12px!important}[_nghost-%COMP%]     .ant-btn-link{padding:unset;margin-top:-5px;margin-left:-2px}[_nghost-%COMP%]     .ant-btn{border:0}app-icons[_ngcontent-%COMP%]{margin:5px;vertical-align:middle}"]}),t})();class _b{constructor(){}}const yb=function(t){return{patientName:t}};function Ob(t,e){if(1&t&&(D.Xb(0,"div",5),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()),2&t){const t=D.ic();D.tc("routerLink","/patient/edit/",null==t.patientInfo?null:t.patientInfo.id,""),D.rc("queryParams",D.yc(6,yb,null==t.patientInfo?null:t.patientInfo.fullName)),D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,4,"PATIENT.EDIT_PROFILE"))}}function Mb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().addGuardian()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"PATIENT.ADD_GUARDIAN")))}function Ab(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().addAllergy()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"PATIENT.ADD_ALLERGIES")))}function Pb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().addContact()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"COMMON.ADD_CONTACT")))}function Nb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().addResource()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"COMMON.ADD_HOME_COMMUNITY_RESOURCE")))}function Wb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",11),D.Xb(1,"a",12),D.ec("nzOnConfirm",function(){return D.Lc(t),D.ic().disableUser()}),D.Xb(2,"div",6),D.Sb(3,"app-icons",13),D.Wb(),D.Xc(4," \xa0 "),D.Xb(5,"strong",14),D.Xb(6,"label",15),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Wb(),D.Xc(9," \xa0 "),D.Sb(10,"app-icons",9),D.Wb(),D.Wb()}2&t&&(D.Db(3),D.rc("originalStyle",!0),D.Db(4),D.Yc(D.kc(8,2,"PATIENT.DEACTIVATE_PROFILE")))}function Rb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().dischargePatient()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"PATIENT.DISCHARGE_PATIENT")))}function xb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().markPatientAsNotOnboarded()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"PATIENT.NOT_ONBOARDED_REASON.MARK_AS_NOT_ONBOARDED")))}function wb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",10),D.ec("click",function(){return D.Lc(t),D.ic().assignSiteAndPhysician()}),D.Xb(1,"div",6),D.Sb(2,"app-icons",7),D.Wb(),D.Xc(3," \xa0 "),D.Xb(4,"strong",8),D.Xc(5),D.jc(6,"translate"),D.Wb(),D.Xc(7," \xa0 "),D.Sb(8,"app-icons",9),D.Wb()}2&t&&(D.Db(2),D.rc("originalStyle",!0),D.Db(3),D.Yc(D.kc(6,2,"STAFF.ASSIGN_PHYSICIAN")))}const Vb=function(){return[32,32]},Lb=function(){return["DELETE_PATIENT"]};let kb=(()=>{class t extends h.a{constructor(t,e,n,i,a,s){super(),this._patientsService=t,this._notificationsService=e,this._patientsViewService=n,this._patientViewRefreshService=i,this._patientsEventLogger=a,this._router=s}ngOnInit(){this.activeRoleType=localStorage.getItem("loggedInUserRole")}recoverPassword(){var t,e,n;(null===(t=this.patientInfo)||void 0===t?void 0:t.email)&&(this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_recover_password"),this._patientsService.resetPassword(null===(n=this.patientInfo)||void 0===n?void 0:n.email).subscribe(()=>{this._notificationsService.success("Password Recovery","Password has been sent to the registered e-mail address!")}))}disableUser(){var t,e;const n=new _b;n.op="replace",n.path="/isActive",n.value="false",this._patientsEventLogger.patientDetailsDisableActionEvent(null===(t=this.patientInfo)||void 0===t?void 0:t.id,null===(e=this.patientInfo)||void 0===e?void 0:e.fullName,"quick_action_disable_user"),this._patientsService.disableUser(this.patientInfo.id,n).subscribe(()=>{this._notificationsService.success("Deactivation","Patient deactivated successfully!"),this._router.navigate(["patient"])})}addGuardian(){var t,e;const n=this._patientsViewService.showGuardianModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id);this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_add_guardian"),n.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this._patientViewRefreshService.refreshGuardians()})}addContact(){var t,e;const n=this._patientsViewService.showContactModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id);this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_add_contact"),n.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this._patientViewRefreshService.refreshContacts()})}addResource(){var t;this._patientsViewService.showResourceModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this._patientViewRefreshService.refreshCommunityResources()})}addAllergy(){var t,e;const n=this._patientsViewService.showAllergyModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id);this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"quick_action_add_allergy"),n.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&this._patientViewRefreshService.refreshAllergies(t)})}dischargePatient(){var t,e,n;const i=this._patientsViewService.showDischargePatientModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id,null===(e=this.patientInfo)||void 0===e?void 0:e.fullName);this._patientsEventLogger.patientDetailsActionEvent(null===(n=this.patientInfo)||void 0===n?void 0:n.id,"quick_action_discharge_patient"),i.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e;this._router.navigate(["patient/view/",null===(e=this.patientInfo)||void 0===e?void 0:e.id]),window.location.reload()})}markPatientAsNotOnboarded(){var t,e,n;const i=this._patientsViewService.showPatientNotOnboardedModal(null===(t=this.patientInfo)||void 0===t?void 0:t.id,null===(e=this.patientInfo)||void 0===e?void 0:e.fullName);this._patientsEventLogger.patientDetailsActionEvent(null===(n=this.patientInfo)||void 0===n?void 0:n.id,"quick_action_mark_patient_as_not_onboarded"),i.afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e;this._router.navigate(["patient/view/",null===(e=this.patientInfo)||void 0===e?void 0:e.id]),t&&window.location.reload()})}assignSiteAndPhysician(){var t,e,n;const i=null===(t=this.patientInfo)||void 0===t?void 0:t.locations[0].id;this._patientsViewService.showSiteAndPhysicianUpdate(null===(e=this.patientInfo)||void 0===e?void 0:e.id,null===(n=this.patientInfo)||void 0===n?void 0:n.fullName,i).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n;t&&(this._patientsEventLogger.patientDetailsActionEvent(null===(e=this.patientInfo)||void 0===e?void 0:e.id,"assign_site_physician_for_discharged_or_not_onboarded_patient"),this._router.navigate([`/patient/assign/physician/${null===(n=this.patientInfo)||void 0===n?void 0:n.id}`],{queryParams:{role:M.a.PHYSICIAN}}))})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(A.b),D.Rb(zr.a),D.Rb(zd.a),D.Rb(v.a),D.Rb(b.g))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-quick-actions"]],inputs:{patientInfo:"patientInfo"},features:[D.Ab],decls:14,vars:15,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"click",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",4,"isFeaturePermitted"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams"],[1,"profile-icon"],["name","profileEdit","size","32px",3,"originalStyle"],[1,"action-button"],["name","arrowRight"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","8"],["nz-popconfirm","","nzPopconfirmTitle","Do you want to disable this patient?",3,"nzOnConfirm"],["name","profileDelete","size","32px",3,"originalStyle"],["nz-typography","","nzType","danger",1,"action-button"],["nz-typography","","nzType","danger"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"h4"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"div",1),D.Vc(5,Ob,9,8,"div",2),D.Vc(6,Mb,9,4,"div",3),D.Vc(7,Ab,9,4,"div",3),D.Vc(8,Pb,9,4,"div",3),D.Vc(9,Nb,9,4,"div",3),D.Vc(10,Wb,11,4,"div",4),D.Vc(11,Rb,9,4,"div",3),D.Vc(12,xb,9,4,"div",3),D.Vc(13,wb,9,4,"div",3),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,11,"PATIENT.OTHER_ACCOUNT_ACTIONS")),D.Db(2),D.rc("nzGutter",D.xc(13,Vb)),D.Db(1),D.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","DISCHARGED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)&&"NOT_ONBOARDED"!==(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("isFeaturePermitted",D.xc(14,Lb)),D.Db(1),D.rc("ngIf","ACTIVE"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"SUSPENDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"FLAGGED_FOR_DISQUALIFICATION"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","REGISTERED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","TENANT_ADMIN"==e.activeRoleType&&"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)))},directives:[k.c,c.q,Ye.a,k.a,b.h,ee.a,Dc.a,V.a],pipes:[Vt.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{width:100%;padding-bottom:32px!important;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey)}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700;margin-bottom:15px}[_nghost-%COMP%]     .ant-col-6{cursor:pointer}.profile-icon[_ngcontent-%COMP%]{padding:8px;background-color:#e9e9e9;border-radius:50%;height:50px;width:50px;text-align:center;display:inline-block}strong[_ngcontent-%COMP%]{line-height:40px}app-icons[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{vertical-align:text-bottom;display:inline-block;height:70%}app-icons[_ngcontent-%COMP%]{line-height:50px}.profile-icon[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:unset}@media screen and (orientation:portrait){.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;height:-webkit-fit-content}}.action-button[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function Fb(t,e){if(1&t&&D.Sb(0,"app-patient-status-notification",3),2&t){const t=D.ic(2);D.rc("patientInfo",t.patientInfo)}}function Ub(t,e){if(1&t&&D.Sb(0,"app-patient-pending-actions",3),2&t){const t=D.ic(2);D.rc("patientInfo",t.patientInfo)}}function jb(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",2),D.Vc(1,Fb,1,1,"app-patient-status-notification",1),D.Vc(2,Ub,1,1,"app-patient-pending-actions",1),D.Xb(3,"h4"),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Sb(6,"app-patient-basic-information",3),D.Sb(7,"nz-divider"),D.Xb(8,"h4"),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Sb(11,"app-patient-organisation-information",3),D.Sb(12,"app-patient-physicians",3),D.Sb(13,"nz-divider"),D.Xb(14,"app-patient-clinicians-information",4),D.ec("refresh",function(e){return D.Lc(t),D.ic().onRefresh(e)}),D.Wb(),D.Sb(15,"nz-divider"),D.Xb(16,"h4"),D.Xc(17),D.jc(18,"translate"),D.Wb(),D.Sb(19,"app-patient-health-information",3),D.Xb(20,"h4"),D.Xc(21),D.jc(22,"translate"),D.Wb(),D.Sb(23,"app-patient-insurance-information",3),D.Sb(24,"app-patient-assigned-devices",3),D.Sb(25,"app-patient-guardians-information",3),D.Sb(26,"app-patient-allergies-information",3),D.Sb(27,"app-patient-contacts-information",3),D.Sb(28,"app-home-community",5),D.Wb()}if(2&t){const t=D.ic();D.Db(1),D.rc("ngIf","FLAGGED_FOR_DISQUALIFICATION"===(null==t.patientInfo?null:t.patientInfo.patientStatus)||"SUSPENDED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)||"DISCHARGED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf","ACTIVE"===(null==t.patientInfo?null:t.patientInfo.patientStatus)||"REGISTERED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)),D.Db(2),D.Yc(D.kc(5,17,"COMMON.BASICINFO")),D.Db(2),D.rc("patientInfo",t.patientInfo),D.Db(3),D.Yc(D.kc(10,19,"PATIENT.ORGANIZATIONAL_INFORMATION")),D.Db(2),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("patientInfo",t.patientInfo),D.Db(2),D.rc("patientInfo",t.patientInfo),D.Db(3),D.Yc(D.kc(18,21,"PATIENT.HEALTH_INFORMATION")),D.Db(2),D.rc("patientInfo",t.patientInfo),D.Db(2),D.Yc(D.kc(22,23,"PATIENT.INSURANCE_INFORMATION")),D.Db(2),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("patientId",null==t.patientInfo?null:t.patientInfo.id)}}function Yb(t,e){if(1&t&&D.Sb(0,"app-patient-quick-actions",3),2&t){const t=D.ic();D.rc("patientInfo",t.patientInfo)}}let Bb=(()=>{class t{constructor(){this.refresh=new D.n,this.onRefresh=t=>{this.refresh.emit(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-information"]],inputs:{patientInfo:"patientInfo"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],[3,"patientInfo",4,"ngIf"],[1,"container"],[3,"patientInfo"],[3,"patientInfo","refresh"],[3,"patientId"]],template:function(t,e){1&t&&(D.Vc(0,jb,29,25,"div",0),D.Vc(1,Yb,1,1,"app-patient-quick-actions",1)),2&t&&(D.rc("ngIf",e.patientInfo),D.Db(1),D.rc("ngIf",e.patientInfo))},directives:[c.q,nc,L.a,cc,Sc,wc,ld,cd,Td,Pd,kd,Hd,tb,eb.a,zb,kb],pipes:[Vt.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}"]}),t})();var Hb=n("sG7K"),Gb=n("i7mu"),$b=n("IZEq"),Zb=n("2Vo4");let qb=(()=>{class t{constructor(){this.showAlertHistory$=new Zb.a(!1)}getShowAlertHistoryObservable(){return this.showAlertHistory$.asObservable()}setShowAlertHistoryObservable(t){this.showAlertHistory$.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Kb=n("7Xlp"),Qb=n("SxV6");let Jb=(()=>{class t{constructor(t){this._http=t,this.rootUrl=`${m.g.url}/v3/almanac/alerts-preference-history`}getPatientAlertHistory(t){return this._http.get(`${this.rootUrl}/${t}`).pipe(Object(Qb.a)())}}return t.\u0275fac=function(e){return new(e||t)(D.bc(f.c))},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var tu=n("Ff2k");let eu=(()=>{class t{constructor(){this.limitTypeMap=new Map([["limit.min","Min Limit"],["limit.max","Max Limit"]])}transform(t){return this.limitTypeMap.get(t)||""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=D.Qb({name:"vitalLimitTypeName",type:t,pure:!0}),t})();function nu(t,e){if(1&t&&(D.Xb(0,"li"),D.Xc(1),D.jc(2,"vitalLimitTypeName"),D.Xb(3,"strong"),D.Xc(4),D.jc(5,"number"),D.jc(6,"lowercase"),D.Wb(),D.Wb()),2&t){const t=D.ic().$implicit,e=D.ic().$implicit,n=D.ic(4);D.Db(1),D.bd(" Changed ",e.parameterType," ",t.context?t.context:""," ",D.kc(2,5,t.name)," to "),D.Db(3),D.ad("",D.lc(5,7,t.currentValue,"1.0-0")," ",D.kc(6,10,n.vitalAndUnits.get(e.parameterType)),"")}}function iu(t,e){if(1&t&&(D.Xb(0,"li"),D.Xc(1," Changed "),D.Xb(2,"strong"),D.Xc(3),D.Wb(),D.Xc(4," max and min limits back to the default values "),D.Wb()),2&t){const t=D.ic(2).$implicit;D.Db(3),D.Yc(t.parameterType)}}function au(t,e){if(1&t&&(D.Vb(0),D.Vc(1,nu,7,12,"li",0),D.Vc(2,iu,5,1,"li",0),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf","limit.min"===t.name||"limit.max"===t.name),D.Db(1),D.rc("ngIf","enabled"===t.name&&"false"===t.currentValue)}}function su(t,e){if(1&t&&(D.Xb(0,"nz-list-item"),D.Xb(1,"p"),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Xb(4,"ul"),D.Vc(5,au,3,2,"ng-container",5),D.Wb(),D.Xb(6,"p"),D.Xc(7,"Modified by "),D.Xb(8,"strong"),D.Xc(9),D.Wb(),D.Wb(),D.Xb(10,"p"),D.Xc(11),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Yc(D.lc(3,4,t.dateOfChange+"Z","dd MMMM Y, hh:mm a")),D.Db(3),D.rc("ngForOf",null==t?null:t.changes),D.Db(4),D.Yc(t.author),D.Db(2),D.Yc(null==t?null:t.reason)}}function ou(t,e){if(1&t&&(D.Xb(0,"nz-list"),D.Vc(1,su,12,7,"nz-list-item",5),D.Wb()),2&t){const t=D.ic(3);D.Db(1),D.rc("ngForOf",null==t.alertHistory?null:t.alertHistory.vitalAlertPreferenceHistory)}}function lu(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"h3"),D.Xc(2),D.Wb(),D.Vc(3,ou,2,1,"nz-list",2),D.Sb(4,"nz-divider"),D.Ub()),2&t){D.ic();const t=D.Ic(3),e=D.ic();D.Db(2),D.Zc("Log for ",e.alertHistory.patient,""),D.Db(1),D.rc("ngIf",(null==e.alertHistory||null==e.alertHistory.vitalAlertPreferenceHistory?null:e.alertHistory.vitalAlertPreferenceHistory.length)>0)("ngIfElse",t)}}function ru(t,e){1&t&&(D.Xb(0,"p"),D.Xc(1,"No modifications have been made to the alerts configuration yet."),D.Wb())}function cu(t,e){1&t&&(D.Xb(0,"h3"),D.Xc(1,"No History Found."),D.Wb())}function du(t,e){if(1&t&&(D.Vb(0),D.Vc(1,lu,5,3,"ng-container",2),D.Vc(2,ru,2,0,"ng-template",null,3,D.Wc),D.Vc(4,cu,2,0,"ng-template",null,4,D.Wc),D.Ub()),2&t){const t=D.Ic(5),e=D.ic();D.Db(1),D.rc("ngIf",e.alertHistory)("ngIfElse",t)}}function bu(t,e){1&t&&D.Sb(0,"nz-spin",6)}let uu=(()=>{class t{constructor(t,e,n){this.alertHistoryDrawerService=t,this.alertHistoryService=e,this.appInsightsService=n}ngOnInit(){this.loading=!0,this.alertHistoryDrawerService.setShowAlertHistoryObservable(!0),this.populateAlertHistory();const t=new Map([["USER_ID",localStorage.getItem("loggedInUser")],["TENANT_ID",localStorage.getItem("loggedInTenant")],["USER_ACCOUNT_TYPE",localStorage.getItem("loggedInUserAccountType")],["PATIENT_ID",this.patientId]]);this.appInsightsService.logEvent("SHOW_VITAL_ALERT_HISTORY",t)}ngOnDestroy(){this.alertHistoryDrawerService.setShowAlertHistoryObservable(!1)}populateAlertHistory(){this.alertHistoryService.getPatientAlertHistory(this.patientId).subscribe(t=>{var e,n;this.alertHistory=t,(null===(n=null===(e=this.alertHistory)||void 0===e?void 0:e.vitalAlertPreferenceHistory)||void 0===n?void 0:n.length)>0&&(this.alertHistory.vitalAlertPreferenceHistory.sort((t,e)=>new Date(e.dateOfChange).getTime()-new Date(t.dateOfChange).getTime()),this.alertHistory.vitalAlertPreferenceHistory.forEach(t=>{var e,n;t.reason=null===(n=null===(e=null==t?void 0:t.changes)||void 0===e?void 0:e.find(t=>"reason"===t.name))||void 0===n?void 0:n.currentValue})),this.loading=!1},t=>{this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(qb),D.Rb(Jb),D.Rb(Kb.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-alert-history"]],inputs:{patientId:"patientId",vitalAndUnits:"vitalAndUnits"},decls:2,vars:2,consts:[[4,"ngIf"],["nzSimple","",4,"ngIf"],[4,"ngIf","ngIfElse"],["noModifications",""],["noHistory",""],[4,"ngFor","ngForOf"],["nzSimple",""]],template:function(t,e){1&t&&(D.Vc(0,du,6,2,"ng-container",0),D.Vc(1,bu,1,0,"nz-spin",1)),2&t&&(D.rc("ngIf",!e.loading),D.Db(1),D.rc("ngIf",e.loading))},directives:[c.q,L.a,tu.a,c.p,tu.e,mn.a],pipes:[c.e,eu,c.f,c.n],styles:["p[_ngcontent-%COMP%]{color:#888;font-size:12px;margin-bottom:0}h3[_ngcontent-%COMP%]{font-weight:700}ul[_ngcontent-%COMP%]{padding-left:0;font-size:14px}li[_ngcontent-%COMP%]::marker{color:var(--primary-color)}[_nghost-%COMP%]     .ant-list-item{display:block}nz-spin[_ngcontent-%COMP%]{margin-top:2%;text-align:center}nz-divider[_ngcontent-%COMP%]{border-width:1px;border-style:inset}"]}),t})();var pu=n("1MPZ");class hu{constructor(t){var e;if(t&&(this.limitType=t.limitType,this.limit=Object.assign({},t.limit),this.notifyPatient=t.notifyPatient,this.notifyCaretaker=t.notifyCaretaker,this.notifyGuardian=t.notifyGuardian,this.tags=Object.assign({},t.tags),(null===(e=t.contexts)||void 0===e?void 0:e.length)>0)){this.contexts=new Array;for(let e of t.contexts){let t=new pu.a;t.answer=e.answer,t.title=e.title,t.limitType=e.limitType,t.limit=Object.assign({},e.limit),this.contexts.push(t)}}}}var gu=function(t){return t.MIN_MAX="MIN_MAX",t.INCREASE_DECREASE="INCREASE_DECREASE",t.INCREASE_DECREASE_IN_PERCENTAGE="INCREASE_DECREASE_IN_PERCENTAGE",t}({});class fu{}class mu{constructor(t){var e;if(t){if(this.patientId=t.patientId,this.label=t.label,this.unit=t.unit,this.vital=t.vital,this.parameter=t.parameter,this.limitType=t.limitType,this.limit=Object.assign({},t.limit),this.validRange=Object.assign({},t.validRange),this.enabled=t.enabled,this.notifyPatient=t.notifyPatient,this.notifyCaretaker=t.notifyCaretaker,this.notifyGuardian=t.notifyGuardian,this.tags=Object.assign({},t.tags),this.reason=t.reason,(null===(e=t.contexts)||void 0===e?void 0:e.length)>0){this.contexts=new Array;for(let e of t.contexts){let t=new pu.a;t.answer=e.answer,t.title=e.title,t.limitType=e.limitType,t.limit=Object.assign({},e.limit),this.contexts.push(t)}}t.defaultVitalAlert&&(this.defaultVitalAlert=new hu(t.defaultVitalAlert))}}}class vu{constructor(){}}let Su=(()=>{class t{constructor(){}createDefaultVitalAlertForTenantVitalWithContext(t){var e,n;let i=new hu;if(t&&(i.limitType=gu.MIN_MAX,i.limit=new fu,this.populateVitalNotificationsFromTenantVitalBlueprint(i,t),i.tags=this.createVitalTagsFromTenantVitalBlueprint(t),(null===(e=t.contexts)||void 0===e?void 0:e.length)>0)){i.contexts=new Array;for(let e of t.contexts)if((null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.length)>0)for(let t of e.options)i.contexts.push(this.createAlertContextFromOptions(t))}return i}createAlertContextFromOptions(t){let e=new pu.a;return e.answer=t.label,e.limitType=gu.MIN_MAX,e.limit=new fu,e.limit.min=t.limit.minimum,e.limit.max=t.limit.maximum,e}createVitalTagsFromTenantVitalBlueprint(t){let e=new vu;return e.active=t.active,e.notesEnabled=t.notesEnabled,e.graphEnabled=t.graphEnabled,e}populateVitalNotificationsFromTenantVitalBlueprint(t,e){e.notify&&(t.notifyPatient=e.notify.patient,t.notifyCaretaker=e.notify.caretaker,t.notifyGuardian=e.notify.guardian)}createVitalAlertForTenantVitalWithContext(t,e){var n,i,a,s;let o;if(e)o=e;else{o=new mu,o.enabled=!1,o.vital=t.type,o.parameter=t.parameters[0].type,o.limitType=gu.MIN_MAX,o.limit=new fu,o.contexts=new Array;for(let e of t.contexts)for(let t of e.options)o.contexts.push(this.createAlertContextFromOptions(t));this.populateVitalNotificationsFromTenantVitalBlueprint(o,t)}return o.validRange=new fu,o.validRange.max=null===(n=t.parameters[0])||void 0===n?void 0:n.validLimit.maximum,o.validRange.min=null===(i=t.parameters[0])||void 0===i?void 0:i.validLimit.minimum,o.defaultVitalAlert=this.createDefaultVitalAlertForTenantVitalWithContext(t),this.populateVitalNotificationsFromTenantVitalBlueprint(o.defaultVitalAlert,t),o.label=(null===(a=t.parameters[0])||void 0===a?void 0:a.label)||t.label,o.unit=(null===(s=t.parameters[0])||void 0===s?void 0:s.unit.toLowerCase())||"",o.tags=this.createVitalTagsFromTenantVitalBlueprint(t),o}createDefaultVitalAlertFromTenantVitalParameter(t){let e=new hu;return t&&(e.contexts=[],e.limitType=gu.MIN_MAX,e.limit=new fu,e.limit.max=t.globalLimit.maximum,e.limit.min=t.globalLimit.minimum),e}createVitalAlertFromTenantVitalParameter(t,e){var n,i,a,s;let o;return e?o=e:(o=new mu,o.parameter=t.type,o.contexts=[],o.limitType=gu.MIN_MAX,o.limit=new fu,o.limit.max=null===(n=t.globalLimit)||void 0===n?void 0:n.maximum,o.limit.min=null===(i=t.globalLimit)||void 0===i?void 0:i.minimum,o.enabled=!1),o.validRange=new fu,o.validRange.max=null===(a=null==t?void 0:t.validLimit)||void 0===a?void 0:a.maximum,o.validRange.min=null===(s=null==t?void 0:t.validLimit)||void 0===s?void 0:s.minimum,o.defaultVitalAlert=this.createDefaultVitalAlertFromTenantVitalParameter(t),o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Iu=n("F6ss"),Du=n("s/pX"),Cu=n("Z8/p");function Xu(t,e){if(1&t&&(D.Xb(0,"nz-tag",1),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t){const t=D.ic();D.rc("ngClass",t.enabled?"enabled-tag":"disabled-tag"),D.Db(1),D.Yc(D.kc(2,2,"VITAL.GRAPH"))}}function Eu(t,e){if(1&t&&(D.Xb(0,"nz-tag",1),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t){const t=D.ic();D.rc("ngClass",t.enabled?"enabled-tag":"disabled-tag"),D.Db(1),D.Yc(D.kc(2,2,"VITAL.NOTES"))}}function Tu(t,e){if(1&t&&(D.Xb(0,"nz-tag",1),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t){const t=D.ic();D.rc("ngClass",t.enabled?"enabled-tag":"disabled-tag"),D.Db(1),D.Yc(D.kc(2,2,"VITAL.ACTIVE"))}}let zu=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-vital-tags"]],inputs:{vitalTags:"vitalTags",enabled:"enabled"},decls:3,vars:3,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(t,e){1&t&&(D.Vc(0,Xu,3,4,"nz-tag",0),D.Vc(1,Eu,3,4,"nz-tag",0),D.Vc(2,Tu,3,4,"nz-tag",0)),2&t&&(D.rc("ngIf",null==e.vitalTags?null:e.vitalTags.graphEnabled),D.Db(1),D.rc("ngIf",null==e.vitalTags?null:e.vitalTags.notesEnabled),D.Db(1),D.rc("ngIf",null==e.vitalTags?null:e.vitalTags.active))},directives:[c.q,Qi.a,c.o],pipes:[Vt.a],styles:["nz-tag[_ngcontent-%COMP%]{border-radius:2px;border-style:none;width:36px;height:18px;font-size:10px;line-height:14px;letter-spacing:0;padding:2px 0 0 4px}.enabled-tag[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--neutral-color)}.disabled-tag[_ngcontent-%COMP%]{background-color:var(--light-grey);color:#888;opacity:.4}"]}),t})();function _u(t,e){if(1&t){const t=D.Yb();D.Xb(0,"span"),D.Xb(1,"p",13),D.Xc(2),D.Wb(),D.Xb(3,"div",14),D.Xb(4,"label",15),D.Xb(5,"strong"),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Sb(8,"br"),D.Xb(9,"span"),D.Xc(10),D.Wb(),D.Wb(),D.Xb(11,"nz-input-number",16),D.ec("ngModelChange",function(t){return e.$implicit.limit.max=t})("ngModelChange",function(e){return D.Lc(t),D.ic(2).onVitalLimitChange(e,"max")}),D.Wb(),D.Wb(),D.Xb(12,"div",14),D.Xb(13,"label",17),D.Xb(14,"strong"),D.Xc(15),D.jc(16,"translate"),D.Wb(),D.Sb(17,"br"),D.Xb(18,"span"),D.Xc(19),D.Wb(),D.Wb(),D.Xb(20,"nz-input-number",18),D.ec("ngModelChange",function(t){return e.$implicit.limit.min=t})("ngModelChange",function(e){return D.Lc(t),D.ic(2).onVitalLimitChange(e,"min")}),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=e.$implicit,n=D.ic(2);D.Db(2),D.Zc(" ",null==t?null:t.answer," "),D.Db(4),D.Yc(D.kc(7,13,"VITAL.MAX_LIMIT")),D.Db(4),D.Yc(n.vitalAlert.unit),D.Db(1),D.rc("ngModel",t.limit.max)("nzMin",n.vitalAlert.validRange.min)("nzMax",n.vitalAlert.validRange.max)("nzStep",1),D.Db(4),D.Yc(D.kc(16,15,"VITAL.MIN_LIMIT")),D.Db(4),D.Yc(n.vitalAlert.unit),D.Db(1),D.rc("ngModel",t.limit.min)("nzMin",n.vitalAlert.validRange.min)("nzMax",n.vitalAlert.validRange.max)("nzStep",1)}}function yu(t,e){if(1&t&&(D.Xb(0,"div",11),D.Vc(1,_u,21,17,"span",12),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngForOf",null==t.vitalAlert?null:t.vitalAlert.contexts)}}function Ou(t,e){1&t&&(D.Xb(0,"label",19),D.Xc(1,"Required"),D.Wb())}function Mu(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",11),D.Xb(1,"span",14),D.Xb(2,"label",15),D.Xb(3,"strong"),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Sb(6,"br"),D.Xb(7,"span"),D.Xc(8),D.Wb(),D.Wb(),D.Xb(9,"nz-input-number",16),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().vitalAlert.limit.max=e})("ngModelChange",function(e){return D.Lc(t),D.ic().onVitalLimitChange(e,"max")}),D.Wb(),D.Wb(),D.Xb(10,"span",14),D.Xb(11,"label",17),D.Xb(12,"strong"),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Sb(15,"br"),D.Xb(16,"span"),D.Xc(17),D.Wb(),D.Wb(),D.Xb(18,"nz-input-number",18),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().vitalAlert.limit.min=e})("ngModelChange",function(e){return D.Lc(t),D.ic().onVitalLimitChange(e,"min")}),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(4),D.Yc(D.kc(5,12,"VITAL.MAX_LIMIT")),D.Db(4),D.Yc(null==t.vitalAlert?null:t.vitalAlert.unit),D.Db(1),D.rc("ngModel",t.vitalAlert.limit.max)("nzMin",t.vitalAlert.validRange.min)("nzMax",t.vitalAlert.validRange.max)("nzStep",1),D.Db(4),D.Yc(D.kc(14,14,"VITAL.MIN_LIMIT")),D.Db(4),D.Yc(t.vitalAlert.unit),D.Db(1),D.rc("ngModel",t.vitalAlert.limit.min)("nzMin",t.vitalAlert.validRange.min)("nzMax",t.vitalAlert.validRange.max)("nzStep",1)}}const Au=function(){return{minRows:4,maxRows:4}},Pu=function(t){return{border:t}};let Nu=(()=>{class t{constructor(t,e,n,i,a){this._modalRef=t,this.userVitalAlertService=e,this._notificationsService=n,this.appInsightsService=i,this._translationsService=a,this.loadingSave=!1,this.telemetryProperties=new Map}ngOnInit(){this.existingVitalAlert=new mu(this.vitalAlert),this.$translationSubscription=this._translationsService.getMultiple("VITAL.DEFINE_LIMITS","VITAL.DEFINE_DIFFERENT_LIMITS","VITAL.SET_NEW_LIMITS").subscribe(t=>{this.translatedStrings=t,this.title=this.translatedStrings.get("VITAL.SET_NEW_LIMITS").replace("{VITAL}",this.vitalAlert.label)}),this.vitalAlert.reason=""}areNotifyUsersChanged(){return this.vitalAlert.notifyPatient!==this.existingVitalAlert.notifyPatient||this.vitalAlert.notifyCaretaker!==this.existingVitalAlert.notifyCaretaker||this.vitalAlert.notifyGuardian!==this.existingVitalAlert.notifyGuardian}onNotifyUsersChange(){this.notifyUserChanged=this.areNotifyUsersChanged()}isVitalAlertChanged(){var t;if(this.notifyUserChanged)return!0;if(!((null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0))return this.vitalAlert.limit&&(this.vitalAlert.limit.min!==this.existingVitalAlert.limit.min||this.vitalAlert.limit.max!==this.existingVitalAlert.limit.max);for(let e of this.vitalAlert.contexts){let t=this.existingVitalAlert.contexts.filter(t=>t.answer===e.answer);if(e.limit.max!==t[0].limit.max||e.limit.min!==t[0].limit.min)return!0}return!1}areValidMinAndMaxValues(){var t;if(!((null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0))return this.vitalAlert.limit&&this.vitalAlert.limit.max>this.vitalAlert.limit.min;for(let e of this.vitalAlert.contexts)if(!(e.limit.max>e.limit.min))return!1;return!0}saveUserVitalAlert(){if(this.saveButtonClicked=!0,this.vitalAlert.reason.trim())if(this.populateAppInsights(),this.loadingSave=!0,this.isVitalAlertChanged()){if(!this.areValidMinAndMaxValues())return this.loadingSave=!1,this.validLimits=!1,this._notificationsService.error("Invalid Min Max Values!!!","Minimum should not be equal to or greater than Maximum value"),void this.appInsightsService.logEvent("INVALID_VITAL_ALERT_VALUES",this.telemetryProperties);this.vitalAlert.enabled=!0;let t=new Cu.a(this.vitalAlert);this.userVitalAlertService.editVitalBlueprintsOfUser(t).subscribe(t=>{this.loadingSave=!1,this.appInsightsService.logEvent("VITAL_ALERT_SAVE_SUCCESS",this.telemetryProperties),this.close(this.vitalAlert)},t=>{this.appInsightsService.logEvent(t),this.appInsightsService.logEvent("VITAL_ALERT_SAVE_ERROR",this.telemetryProperties),this._notificationsService.error("Operation failed!!!","Vital Could not be saved. Please try again later"),this.loadingSave=!1})}else this.appInsightsService.logEvent("VITAL_ALERT_SAVE_LIMIT_VALUE_DUPLICATE",this.telemetryProperties),this._notificationsService.error(this.translatedStrings.get("VITAL.DEFINE_LIMITS"),this.translatedStrings.get("VITAL.DEFINE_DIFFERENT_LIMITS")),this.loadingSave=!1;else this.vitalAlert.reason=""}populateAppInsights(){this.telemetryProperties.set("VITAL_ALERT_ENABLED",this.vitalAlert.enabled?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_NOTIFY_PATIENT",this.vitalAlert.notifyPatient?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_NOTIFY_CARETAKER",this.vitalAlert.notifyCaretaker?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_NOTIFY_GUARDIAN",this.vitalAlert.notifyGuardian?"YES":"NO"),this.telemetryProperties.set("VITAL_ALERT_PARAMETER",this.vitalAlert.parameter),this.telemetryProperties.set("VITAL_ALERT_VITAL",this.vitalAlert.vital),this.telemetryProperties.set("PATIENT_ID",this.vitalAlert.patientId),this.telemetryProperties.set("VITAL_ALERT_LIMIT_TYPE",this.vitalAlert.limitType),this.telemetryProperties.set("VITAL_ALERT_LIMIT",null!=this.vitalAlert.contexts&&0!=this.vitalAlert.contexts.length?this.vitalAlert.contexts.toString():this.vitalAlert.limit.toString())}resetToDefault(){this.appInsightsService.logEvent("VITAL_ALERT_RESET_TO_DEFAULT_CLICKED",this.telemetryProperties),this.userVitalAlertService.deleteVitalBlueprintOfUser(this.vitalAlert.patientId,this.vitalAlert.parameter).subscribe(t=>{this.reset(),this.appInsightsService.logEvent("VITAL_ALERT_RESET_TO_DEFAULT_SUCCESS",this.telemetryProperties),this.close(this.vitalAlert)},t=>{this.appInsightsService.logEvent(t),this.appInsightsService.logEvent("VITAL_ALERT_RESET_TO_DEFAULT_FAILURE",this.telemetryProperties),this._notificationsService.error("Operation failed!!!","Vital Could not be reset to default. Please try again later")})}close(t){this._modalRef.destroy(t)}reset(){var t;if(this.vitalAlert.defaultVitalAlert&&(this.vitalAlert.limitType=this.vitalAlert.defaultVitalAlert.limitType,this.vitalAlert.limit=Object.assign({},this.vitalAlert.defaultVitalAlert.limit),this.vitalAlert.notifyPatient=this.vitalAlert.defaultVitalAlert.notifyPatient,this.vitalAlert.notifyCaretaker=this.vitalAlert.defaultVitalAlert.notifyCaretaker,this.vitalAlert.notifyGuardian=this.vitalAlert.defaultVitalAlert.notifyGuardian,this.vitalAlert.tags=Object.assign({},this.vitalAlert.defaultVitalAlert.tags),(null===(t=this.vitalAlert.defaultVitalAlert.contexts)||void 0===t?void 0:t.length)>0)){this.vitalAlert.contexts=new Array;for(let t of this.vitalAlert.defaultVitalAlert.contexts){let e=new pu.a;e.answer=t.answer,e.title=t.title,e.limitType=t.limitType,e.limit=Object.assign({},t.limit),this.vitalAlert.contexts.push(e)}}this.vitalAlert.enabled=!1}onVitalLimitChange(t,e){t?"min"===e?this.validLimits=t>=this.vitalAlert.validRange.min:"max"===e&&(this.validLimits=t<=this.vitalAlert.validRange.max):this.validLimits=!1}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.e),D.Rb(sb.a),D.Rb(A.b),D.Rb(Kb.a),D.Rb(Pe.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-vital-alert-edit"]],inputs:{vitalAlert:"vitalAlert"},decls:35,vars:38,consts:[["class","max-min-limits-div",4,"ngIf","ngIfElse"],["enabled","true",3,"vitalTags"],[1,"notify-div"],["nz-checkbox","",3,"ngModel","ngModelChange"],["nz-checkbox","","nz-tooltip","",3,"nzTooltipTitle","ngModel","ngModelChange"],["rows","4","nz-input","","required","",3,"nzAutosize","placeholder","ngModel","ngStyle","ngModelChange"],["nz-typography","","nzType","danger","style","text-align: right;",4,"ngIf"],[1,"buttons"],["nz-button","","nzSize","large","nzType","default",3,"disabled","click"],["nz-button","","nzSize","large","nzType","primary",3,"nzLoading","disabled","click"],["normalVitalLimit",""],[1,"max-min-limits-div"],[4,"ngFor","ngForOf"],["nz-typography",""],[1,"min-max-limit"],["for","max-limit"],["id","max-limit",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange"],["for","min-limit"],["id","min-limit",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange"],["nz-typography","","nzType","danger",2,"text-align","right"]],template:function(t,e){if(1&t&&(D.Xb(0,"h3"),D.Xc(1,"Set new "),D.Xb(2,"strong"),D.Xc(3),D.Wb(),D.Xc(4," limits"),D.Wb(),D.Vc(5,yu,2,1,"div",0),D.Sb(6,"app-vital-tags",1),D.Xb(7,"div",2),D.Xb(8,"strong"),D.Xc(9,"Notify:"),D.Wb(),D.Xb(10,"label",3),D.ec("ngModelChange",function(t){return e.vitalAlert.notifyPatient=t})("ngModelChange",function(){return e.onNotifyUsersChange()}),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Xb(13,"label",3),D.ec("ngModelChange",function(t){return e.vitalAlert.notifyCaretaker=t})("ngModelChange",function(){return e.onNotifyUsersChange()}),D.Xc(14),D.jc(15,"translate"),D.Wb(),D.Xb(16,"label",4),D.ec("ngModelChange",function(t){return e.vitalAlert.notifyGuardian=t})("ngModelChange",function(){return e.onNotifyUsersChange()}),D.jc(17,"translate"),D.Xc(18),D.jc(19,"translate"),D.Wb(),D.Wb(),D.Xb(20,"label"),D.Xb(21,"strong"),D.Xc(22,"Notes *"),D.Wb(),D.Wb(),D.Xb(23,"textarea",5),D.ec("ngModelChange",function(t){return e.vitalAlert.reason=t}),D.jc(24,"translate"),D.Wb(),D.Vc(25,Ou,2,0,"label",6),D.Xb(26,"span",7),D.Xb(27,"button",8),D.ec("click",function(){return e.resetToDefault()}),D.Xc(28),D.jc(29,"translate"),D.Wb(),D.Xb(30,"button",9),D.ec("click",function(){return e.saveUserVitalAlert()}),D.Xc(31),D.jc(32,"translate"),D.Wb(),D.Wb(),D.Vc(33,Mu,19,16,"ng-template",null,10,D.Wc)),2&t){const t=D.Ic(34);D.Db(3),D.Yc(e.vitalAlert.label),D.Db(2),D.rc("ngIf",(null==e.vitalAlert.contexts?null:e.vitalAlert.contexts.length)>0)("ngIfElse",t),D.Db(1),D.rc("vitalTags",null==e.vitalAlert?null:e.vitalAlert.tags),D.Db(4),D.rc("ngModel",e.vitalAlert.notifyPatient),D.Db(1),D.Yc(D.kc(12,21,"PATIENT")),D.Db(2),D.rc("ngModel",e.vitalAlert.notifyCaretaker),D.Db(1),D.Yc(D.kc(15,23,"CARETAKER")),D.Db(2),D.sc("nzTooltipTitle",D.kc(17,25,"VITAL.NOTIFICATION_GUARDIAN_APP")),D.rc("ngModel",e.vitalAlert.notifyGuardian),D.Db(2),D.Yc(D.kc(19,27,"GUARDIAN")),D.Db(5),D.sc("placeholder",D.kc(24,29,"VITAL.ALERT_CHANGE_EXPLANATION_NOTE")),D.rc("nzAutosize",D.xc(35,Au))("ngModel",e.vitalAlert.reason)("ngStyle",D.yc(36,Pu,e.saveButtonClicked&&!e.vitalAlert.reason?"1px solid red":"")),D.Db(2),D.rc("ngIf",e.saveButtonClicked&&!e.vitalAlert.reason),D.Db(2),D.rc("disabled",!e.existingVitalAlert.enabled),D.Db(1),D.Zc(" ",D.kc(29,31,"VITAL.RESET_TO_DEFAULT"),""),D.Db(2),D.rc("nzLoading",e.loadingSave)("disabled",!(e.validLimits||e.notifyUserChanged)),D.Db(1),D.Zc(" ",D.kc(32,33,"VITAL.SAVE"),"")}},directives:[c.q,zu,U.a,d.u,d.x,fi.d,je.b,je.a,d.d,d.C,c.r,X.a,E.a,T.a,c.p,V.a,ml.a],pipes:[Vt.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start}nz-input-number[_ngcontent-%COMP%]{width:84px;height:40px;margin-left:15px;padding-top:4px}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:12px;color:#bababa;line-height:1}.max-min-limits-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-content:flex-start;margin-bottom:10px}.min-max-limit[_ngcontent-%COMP%]{display:flex;height:40px;margin-bottom:10px}.min-max-limit[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:block;margin-top:5px;line-height:1;width:60px;padding-top:4px}textarea[_ngcontent-%COMP%]{margin-top:5px}button[_ngcontent-%COMP%]{width:150px;margin:10px}.buttons[_ngcontent-%COMP%]{margin-top:15px;align-self:center}app-vital-tags[_ngcontent-%COMP%]{margin-bottom:20px}app-vital-tags[_ngcontent-%COMP%] nz-tag{width:47px;height:20px;font-size:12px;line-height:16px;padding:2px 7px}.notify-div[_ngcontent-%COMP%]{margin-bottom:10px}.notify-div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]     .ant-modal-title{border-left:none;padding-left:0;margin-top:15px}p[_ngcontent-%COMP%]{margin-bottom:0;font-weight:700}h3[_ngcontent-%COMP%]{margin-bottom:25px}"]}),t})();function Wu(t,e){1&t&&D.Sb(0,"app-icons",3)}function Ru(t,e){1&t&&D.Sb(0,"app-icons",4)}function xu(t,e){1&t&&D.Sb(0,"app-icons",3)}function wu(t,e){1&t&&D.Sb(0,"app-icons",4)}function Vu(t,e){1&t&&D.Sb(0,"app-icons",3)}function Lu(t,e){1&t&&D.Sb(0,"app-icons",4)}const ku=function(t){return{"disabled-notify":t}};let Fu=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-notify-users"]],inputs:{notifyPatient:"notifyPatient",notifyCaretaker:"notifyCaretaker",notifyGuardian:"notifyGuardian",enabled:"enabled"},decls:16,vars:18,consts:[[3,"ngClass"],["name","check","size","12px","color","#a7c853","strokeColor","#a7c853","strokeWidth","120px",4,"ngIf"],["name","close","size","12px","color","#888888","strokeColor","#888888","strokeWidth","120px",4,"ngIf"],["name","check","size","12px","color","#a7c853","strokeColor","#a7c853","strokeWidth","120px"],["name","close","size","12px","color","#888888","strokeColor","#888888","strokeWidth","120px"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"div"),D.Vc(2,Wu,1,0,"app-icons",1),D.Vc(3,Ru,1,0,"app-icons",2),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Xb(6,"div"),D.Vc(7,xu,1,0,"app-icons",1),D.Vc(8,wu,1,0,"app-icons",2),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"div"),D.Vc(12,Vu,1,0,"app-icons",1),D.Vc(13,Lu,1,0,"app-icons",2),D.Xc(14),D.jc(15,"translate"),D.Wb(),D.Wb()),2&t&&(D.rc("ngClass",D.yc(16,ku,!1===e.enabled)),D.Db(2),D.rc("ngIf",e.notifyPatient),D.Db(1),D.rc("ngIf",!e.notifyPatient),D.Db(1),D.Zc(" ",D.kc(5,10,"VITAL.NOTIFY_PATIENT")," "),D.Db(3),D.rc("ngIf",e.notifyCaretaker),D.Db(1),D.rc("ngIf",!e.notifyCaretaker),D.Db(1),D.Zc(" ",D.kc(10,12,"VITAL.NOTIFY_CLINICIAN")," "),D.Db(3),D.rc("ngIf",e.notifyGuardian),D.Db(1),D.rc("ngIf",!e.notifyGuardian),D.Db(1),D.Zc(" ",D.kc(15,14,"VITAL.NOTIFY_GUARDIAN")," "))},directives:[c.o,c.q,ee.a],pipes:[Vt.a],styles:["[_nghost-%COMP%]{font-size:10px;line-height:14px;display:block;margin-top:5px}app-icons[_ngcontent-%COMP%]{margin-right:3px;pointer-events:none}.disabled-notify[_ngcontent-%COMP%]{pointer-events:none;opacity:.4;color:#888}"]}),t})();const Uu=function(t){return{"disabled-card":t}};let ju=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-max-min-limit"]],inputs:{unit:"unit",minLimit:"minLimit",maxLimit:"maxLimit",enabled:"enabled"},decls:6,vars:14,consts:[[3,"ngClass"],["nzTitle","Max Limit",3,"nzValue","nzSuffix"],["nzTitle","Min Limit",3,"nzValue","nzSuffix"]],template:function(t,e){1&t&&(D.Xb(0,"nz-card",0),D.Sb(1,"nz-statistic",1),D.jc(2,"lowercase"),D.Wb(),D.Xb(3,"nz-card",0),D.Sb(4,"nz-statistic",2),D.jc(5,"lowercase"),D.Wb()),2&t&&(D.rc("ngClass",D.yc(10,Uu,!1===e.enabled)),D.Db(1),D.rc("nzValue",e.maxLimit)("nzSuffix",D.kc(2,6,e.unit)),D.Db(2),D.rc("ngClass",D.yc(12,Uu,!1===e.enabled)),D.Db(1),D.rc("nzValue",e.minLimit)("nzSuffix",D.kc(5,8,e.unit)))},directives:[vn.a,c.o,Ji.a],pipes:[c.n],styles:["nz-card[_ngcontent-%COMP%]{height:50px;width:84px;display:inline-block;border-radius:5px;background-color:#fbfbfb;border:1px solid #2f4f4f}.disabled-card[_ngcontent-%COMP%]{pointer-events:none;opacity:.4;border:1px solid var(--grey);color:#888}nz-card[_ngcontent-%COMP%] + nz-card[_ngcontent-%COMP%]{margin-left:5px}[_nghost-%COMP%]     .ant-statistic-title{color:var(--tertiary-color);margin-bottom:0;font-weight:600}[_nghost-%COMP%]     .ant-statistic-content-suffix{font-size:12px;margin-left:0}[_nghost-%COMP%]     .ant-statistic-content-value{font-size:12px;font-weight:600}[_nghost-%COMP%]     .ant-statistic-content{font-size:12px}[_nghost-%COMP%]     .ant-card-body{padding:4px 8px}[_nghost-%COMP%]     .ant-card-head-title{padding:8px 0 0!important}"]}),t})();function Yu(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"h4"),D.Xc(2),D.Wb(),D.Sb(3,"app-max-min-limit",7),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(2),D.Yc(t.answer),D.Db(1),D.rc("minLimit",null==t.limit?null:t.limit.min)("maxLimit",null==t.limit?null:t.limit.max)("unit",n.vitalAlert.unit)}}function Bu(t,e){if(1&t&&(D.Xb(0,"div",5),D.Vc(1,Yu,4,4,"div",6),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngForOf",t.vitalAlert.defaultVitalAlert.contexts)}}function Hu(t,e){if(1&t&&D.Sb(0,"app-max-min-limit",7),2&t){const t=D.ic();D.rc("minLimit",t.vitalAlert.defaultVitalAlert.limit.min)("maxLimit",t.vitalAlert.defaultVitalAlert.limit.max)("unit",null==t.vitalAlert?null:t.vitalAlert.unit)}}let Gu=(()=>{class t{constructor(t,e,n){this._modalRef=t,this.userVitalAlertService=e,this._notificationsService=n}ngOnInit(){}resetToDefault(){this.userVitalAlertService.deleteVitalBlueprintOfUser(this.vitalAlert.patientId,this.vitalAlert.parameter).subscribe(t=>{this.reset(),this._modalRef.destroy(this.vitalAlert)},t=>{this._notificationsService.error("Operation failed!!!","Vital Could not be reset to default. Please try again later")})}reset(){var t;if(this.vitalAlert.defaultVitalAlert&&(this.vitalAlert.limitType=this.vitalAlert.defaultVitalAlert.limitType,this.vitalAlert.limit=Object.assign({},this.vitalAlert.defaultVitalAlert.limit),this.vitalAlert.notifyPatient=this.vitalAlert.defaultVitalAlert.notifyPatient,this.vitalAlert.notifyCaretaker=this.vitalAlert.defaultVitalAlert.notifyCaretaker,this.vitalAlert.notifyGuardian=this.vitalAlert.defaultVitalAlert.notifyGuardian,this.vitalAlert.tags=Object.assign({},this.vitalAlert.defaultVitalAlert.tags),(null===(t=this.vitalAlert.defaultVitalAlert.contexts)||void 0===t?void 0:t.length)>0)){this.vitalAlert.contexts=new Array;for(let t of this.vitalAlert.defaultVitalAlert.contexts){let e=new pu.a;e.answer=t.answer,e.title=t.title,e.limitType=t.limitType,e.limit=Object.assign({},t.limit),this.vitalAlert.contexts.push(e)}}this.vitalAlert.enabled=!1}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.e),D.Rb(sb.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-vital-defaults-reset"]],inputs:{vitalAlert:"vitalAlert"},decls:12,vars:8,consts:[["class","context-min-max-container",4,"ngIf","ngIfElse"],[3,"vitalTags","enabled"],["enabled","true",3,"notifyPatient","notifyCaretaker","notifyGuardian"],["nz-button","","nzType","primary",3,"click"],["normalVitalLimit",""],[1,"context-min-max-container"],[4,"ngFor","ngForOf"],["enabled","true",3,"minLimit","maxLimit","unit"]],template:function(t,e){if(1&t&&(D.Xb(0,"h3"),D.Xc(1,"Do you wish to turn off the patient level alert for "),D.Xb(2,"strong"),D.Xc(3),D.Wb(),D.Xc(4," values and receive alerts as per the default values?"),D.Wb(),D.Vc(5,Bu,2,1,"div",0),D.Sb(6,"app-vital-tags",1),D.Sb(7,"app-notify-users",2),D.Xb(8,"button",3),D.ec("click",function(){return e.resetToDefault()}),D.Xc(9,"Set to default"),D.Wb(),D.Vc(10,Hu,1,3,"ng-template",null,4,D.Wc)),2&t){const t=D.Ic(11);D.Db(3),D.Yc(e.vitalAlert.label),D.Db(2),D.rc("ngIf",(null==e.vitalAlert.defaultVitalAlert.contexts?null:e.vitalAlert.defaultVitalAlert.contexts.length)>0)("ngIfElse",t),D.Db(1),D.rc("vitalTags",null==e.vitalAlert?null:e.vitalAlert.defaultVitalAlert.tags)("enabled",!0),D.Db(1),D.rc("notifyPatient",null==e.vitalAlert||null==e.vitalAlert.defaultVitalAlert?null:e.vitalAlert.defaultVitalAlert.notifyPatient)("notifyCaretaker",null==e.vitalAlert||null==e.vitalAlert.defaultVitalAlert?null:e.vitalAlert.defaultVitalAlert.notifyCaretaker)("notifyGuardian",null==e.vitalAlert||null==e.vitalAlert.defaultVitalAlert?null:e.vitalAlert.defaultVitalAlert.notifyGuardian)}},directives:[c.q,zu,Fu,X.a,E.a,T.a,c.p,ju],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:center;padding-top:10px}.context-min-max-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:center;margin:10px 3px}app-vital-tags[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}button[_ngcontent-%COMP%]{margin-top:20px;width:201px;height:45px;border-radius:5px;font-size:15px}app-max-min-limit[_ngcontent-%COMP%]{margin-bottom:10px}app-max-min-limit[_ngcontent-%COMP%]     .ant-statistic-content-value{color:var(--primary-color)}app-max-min-limit[_ngcontent-%COMP%]     .ant-statistic-content-suffix{color:#bababa}p[_ngcontent-%COMP%]{margin-bottom:0}.context-min-max-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;margin-right:15px}.context-min-max-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > app-max-min-limit[_ngcontent-%COMP%]{display:block}h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0}"]}),t})();var $u=n("4xsP");const Zu=["appIcon"];function qu(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",11),D.ec("click",function(){return D.Lc(t),D.ic(3).editVital()})("mouseover",function(){return D.Lc(t),D.ic(3).mouseover()})("mouseout",function(){return D.Lc(t),D.ic(3).mouseout()}),D.Sb(1,"app-icons",12,13),D.Xc(3),D.jc(4,"translate"),D.Wb()}if(2&t){const t=D.ic(3);D.rc("disabled",t.disabled),D.Db(3),D.Zc("",D.kc(4,2,"VITAL.EDIT")," ")}}const Ku=function(t){return{"disabled-card":t}};function Qu(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"nz-card",5),D.Xb(2,"nz-space",6),D.Xb(3,"nz-space-item"),D.Sb(4,"app-max-min-limit",7),D.Wb(),D.Xb(5,"nz-space-item"),D.Sb(6,"app-vital-tags",8),D.Sb(7,"app-notify-users",9),D.Wb(),D.Wb(),D.Vc(8,qu,5,4,"button",10),D.Wb(),D.Ub()),2&t){const t=D.ic(2),e=D.Ic(2),n=D.Ic(4);D.Db(1),D.rc("nzTitle",e)("nzExtra",n)("ngClass",D.yc(14,Ku,!1===t.vitalAlertEnabled)),D.Db(3),D.rc("minLimit",null==t.vitalAlert||null==t.vitalAlert.limit?null:t.vitalAlert.limit.min)("maxLimit",null==t.vitalAlert||null==t.vitalAlert.limit?null:t.vitalAlert.limit.max)("unit",null==t.vitalAlert?null:t.vitalAlert.unit)("enabled",t.vitalAlertEnabled),D.Db(2),D.rc("vitalTags",null==t.vitalAlert?null:t.vitalAlert.tags)("enabled",t.vitalAlertEnabled),D.Db(1),D.rc("notifyPatient",null==t.vitalAlert?null:t.vitalAlert.notifyPatient)("notifyCaretaker",null==t.vitalAlert?null:t.vitalAlert.notifyCaretaker)("notifyGuardian",null==t.vitalAlert?null:t.vitalAlert.notifyGuardian)("enabled",t.vitalAlertEnabled),D.Db(1),D.rc("ngIf",t.vitalAlertEnabled)}}function Ju(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Qu,9,16,"ng-container",4),D.Ub()),2&t){const t=D.ic(),e=D.Ic(6);D.Db(1),D.rc("ngIf",!(null!=t.vitalAlert&&null!=t.vitalAlert.contexts&&t.vitalAlert.contexts.length)>0)("ngIfElse",e)}}function tp(t,e){if(1&t&&(D.Xb(0,"span",14),D.Xc(1),D.Wb()),2&t){const t=D.ic();D.rc("nzTooltipTitle",null==t.vitalAlert?null:t.vitalAlert.label),D.Db(1),D.Yc(null==t.vitalAlert?null:t.vitalAlert.label)}}function ep(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-switch",15),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().vitalAlertEnabled=e})("ngModelChange",function(){return D.Lc(t),D.ic().onToggleVitalAlert()}),D.jc(1,"translate"),D.jc(2,"translate"),D.Wb()}if(2&t){const t=D.ic();D.rc("ngModel",t.vitalAlertEnabled)("nzDisabled",t.disabled)("nzTooltipTitle",t.vitalAlertEnabled?D.kc(1,3,"VITAL.TOGGLE_REMOVE_VITAL_ALERT"):D.kc(2,5,"VITAL.TOGGLE_VITAL_ALERT"))}}const np=function(t){return{"disabled-label":t}};function ip(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"label",18),D.Xc(2),D.Wb(),D.Sb(3,"app-max-min-limit",7),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(1),D.rc("ngClass",D.yc(6,np,!1===n.vitalAlertEnabled)),D.Db(1),D.Zc(" ",null==t?null:t.answer," "),D.Db(1),D.rc("minLimit",null==t||null==t.limit?null:t.limit.min)("maxLimit",null==t||null==t.limit?null:t.limit.max)("unit",null==n.vitalAlert?null:n.vitalAlert.unit)("enabled",n.vitalAlertEnabled)}}function ap(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",11),D.ec("click",function(){return D.Lc(t),D.ic(2).editVital()})("mouseover",function(){return D.Lc(t),D.ic(2).mouseover()})("mouseout",function(){return D.Lc(t),D.ic(2).mouseout()}),D.Sb(1,"app-icons",12,13),D.Xc(3),D.jc(4,"translate"),D.Wb()}if(2&t){const t=D.ic(2);D.rc("disabled",t.disabled),D.Db(3),D.Zc("",D.kc(4,2,"VITAL.EDIT")," ")}}const sp=function(t){return{width:t}};function op(t,e){if(1&t&&(D.Xb(0,"nz-card",16),D.Vc(1,ip,4,8,"div",17),D.Xb(2,"div"),D.Sb(3,"app-vital-tags",8),D.Sb(4,"app-notify-users",9),D.Wb(),D.Vc(5,ap,5,4,"button",10),D.Wb()),2&t){const t=D.ic(),e=D.Ic(2),n=D.Ic(4);D.rc("ngStyle",D.yc(12,sp,"calc(218px + 218px * "+t.optionsColumn+")"))("nzTitle",e)("nzExtra",n)("ngClass",D.yc(14,Ku,!1===t.vitalAlertEnabled)),D.Db(1),D.rc("ngForOf",null==t.vitalAlert?null:t.vitalAlert.contexts),D.Db(2),D.rc("vitalTags",null==t.vitalAlert?null:t.vitalAlert.tags)("enabled",t.vitalAlertEnabled),D.Db(1),D.rc("notifyPatient",null==t.vitalAlert?null:t.vitalAlert.notifyPatient)("notifyCaretaker",null==t.vitalAlert?null:t.vitalAlert.notifyCaretaker)("notifyGuardian",null==t.vitalAlert?null:t.vitalAlert.notifyGuardian)("enabled",t.vitalAlertEnabled),D.Db(1),D.rc("ngIf",t.vitalAlertEnabled)}}let lp=(()=>{class t{constructor(t){this._modalService=t,this.optionsColumn=1}ngOnInit(){var t;(null===(t=this.vitalAlert)||void 0===t?void 0:t.contexts)&&(this.optionsColumn=Math.floor(this.vitalAlert.contexts.length/2)),this.vitalAlertEnabled=this.vitalAlert.enabled}editVital(){var t;let[e,n]=(null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0?["490px",630]:["420px",400];this._modalService.create({nzContent:Nu,nzComponentParams:{vitalAlert:new mu(this.vitalAlert)},nzBodyStyle:{"min-height":e,padding:"10px \u200b35px"},nzWidth:n,nzZIndex:1e3,nzFooter:null}).afterClose.subscribe(t=>{t?(this.vitalAlert=new mu(t),this.vitalAlertEnabled=t.enabled):this.vitalAlertEnabled=this.vitalAlert.enabled})}onToggleVitalAlert(){!this.vitalAlertEnabled&&this.vitalAlert.enabled?this.resetToDefault():this.vitalAlertEnabled&&!this.vitalAlert.enabled&&this.editVital()}resetToDefault(){var t,e;let n=(null===(t=this.vitalAlert.contexts)||void 0===t?void 0:t.length)>0?630:360,i=(null===(e=this.vitalAlert.contexts)||void 0===e?void 0:e.length)>0?380+100*(Math.ceil(this.vitalAlert.contexts.length/3)-1)+"px":"380px";this._modalService.create({nzContent:Gu,nzComponentParams:{vitalAlert:new mu(this.vitalAlert)},nzBodyStyle:{height:i,padding:"10px \u200b30px"},nzWidth:n,nzZIndex:1e3,nzFooter:null}).afterClose.subscribe(t=>{t?(this.vitalAlert=t,this.vitalAlertEnabled=this.vitalAlert.enabled):this.vitalAlertEnabled=!this.vitalAlertEnabled})}mouseover(){this.appIcon.onMouseEnter()}mouseout(){this.appIcon.onMouseLeave()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.f))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-vital-card"]],viewQuery:function(t,e){if(1&t&&D.ed(Zu,1),2&t){let t;D.Hc(t=D.fc())&&(e.appIcon=t.first)}},inputs:{vitalAlert:"vitalAlert",disabled:"disabled"},decls:7,vars:1,consts:[[4,"ngIf"],["title",""],["switchAlert",""],["cardWithContext",""],[4,"ngIf","ngIfElse"],[3,"nzTitle","nzExtra","ngClass"],["nzDirection","vertical","nzSize","middle"],[3,"minLimit","maxLimit","unit","enabled"],[3,"vitalTags","enabled"],[3,"notifyPatient","notifyCaretaker","notifyGuardian","enabled"],["nz-button","","nzType","text",3,"disabled","click","mouseover","mouseout",4,"ngIf"],["nz-button","","nzType","text",3,"disabled","click","mouseover","mouseout"],["name","edit"],["appIcon",""],["nz-tooltip","",3,"nzTooltipTitle"],["nz-tooltip","",3,"ngModel","nzDisabled","nzTooltipTitle","ngModelChange"],[1,"varying-width-card",3,"ngStyle","nzTitle","nzExtra","ngClass"],[4,"ngFor","ngForOf"],["nz-typography","",3,"ngClass"]],template:function(t,e){1&t&&(D.Vc(0,Ju,2,2,"ng-container",0),D.Vc(1,tp,2,2,"ng-template",null,1,D.Wc),D.Vc(3,ep,3,7,"ng-template",null,2,D.Wc),D.Vc(5,op,6,16,"ng-template",null,3,D.Wc)),2&t&&D.rc("ngIf",e.vitalAlert)},directives:[c.q,vn.a,c.o,$u.a,$u.b,ju,zu,Fu,X.a,T.a,ee.a,fi.d,hl.a,d.u,d.x,c.r,c.p,V.a],pipes:[Vt.a],styles:["[_nghost-%COMP%]{display:contents}.disabled-card[_ngcontent-%COMP%]{color:#888;border:none}[_nghost-%COMP%]     .ant-card-head{border-bottom:none;font-size:12px;line-height:16px;font-weight:700}[_nghost-%COMP%]     .ant-card-head-title{font-size:12px;font-weight:700}[_nghost-%COMP%]     .ant-card-body{padding:20px 20px 0}button[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;transition-duration:0s;background-color:transparent;color:#8a8a8a}nz-space-item[_ngcontent-%COMP%]:nth-child(2){margin-bottom:5px!important}nz-card[_ngcontent-%COMP%]{width:215px;min-height:250px;margin:5px 0 5px 5px;border:1px solid var(--primary-color)}.varying-width-card[_ngcontent-%COMP%] >   .ant-card-body{padding-top:3px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start}.varying-width-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:10px;line-height:14px}app-max-min-limit[_ngcontent-%COMP%]{margin-bottom:10px}p[_ngcontent-%COMP%]{margin-bottom:0}.varying-width-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;margin-right:20px;margin-bottom:10px}.varying-width-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], div[_ngcontent-%COMP%] > app-max-min-limit[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%] > app-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:3px}button[_ngcontent-%COMP%]:hover{color:var(--primary-color)}button[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:hover{background-color:transparent}button[_ngcontent-%COMP%]:hover   app-icons[_ngcontent-%COMP%]{color:var(--primary-color)}.disabled-label[_ngcontent-%COMP%]{opacity:.4}"]}),t})(),rp=(()=>{class t{constructor(t){this._http=t,this.rootUrl=`${m.g.url}/v3/user-alerts/general`}getPatientLevelGeneralAlertSettings(t){return this._http.get(`${this.rootUrl}/${t}`).pipe(Object(Qb.a)())}updatePatientLevelGeneralAlertSettings(t){return this._http.put(this.rootUrl,t).pipe(Object(Qb.a)())}}return t.\u0275fac=function(e){return new(e||t)(D.bc(f.c))},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class cp{}let dp=(()=>{class t{constructor(t,e,n){this._generalVitalAlertService=t,this._notificationsService=e,this._alertModalService=n,this.vitalLimitNotificationEnabled=!1}ngOnInit(){this.getGeneralVitalSettingsForUser()}getGeneralVitalSettingsForUser(){this._generalVitalAlertService.getPatientLevelGeneralAlertSettings(this.patientId).subscribe(t=>{this.vitalLimitNotificationEnabled=null==t?void 0:t.vitalLimitNotificationEnabled})}onVitalLimitNotificationChange(t){let e=new cp;e.patientId=this.patientId,e.vitalLimitNotificationEnabled=t,this._generalVitalAlertService.updatePatientLevelGeneralAlertSettings(e).subscribe(t=>{},t=>{this._notificationsService.error("Operation failed!!!","Vital Limit Notification could not be switched. Please try again later")})}createAlert(){this._alertModalService.showAlertRuleCreateModal(Gb.c.PATIENT_LEVEL,this.patientId).afterClose.subscribe(t=>{})}onRefresh(t){}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(rp),D.Rb(A.b),D.Rb($b.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-notification-actions"]],inputs:{patientId:"patientId",disabled:"disabled"},decls:15,vars:8,consts:[[1,"container"],[1,"action-container"],["nzSize","small",3,"ngModel","nzDisabled","ngModelChange"],[1,"quick-action"],[1,"create-alert-span",3,"click"],[1,"icon-btn"],["color","#a7c853","strokeColor","#a7c853","fill","#a7c853","size","20","name","bell",1,"app-icon",3,"click"],["nz-icon","","nzType","right-circle","nzTheme","fill",1,"right-btn"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"h2"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"div",1),D.Xb(5,"div"),D.Xc(6),D.jc(7,"translate"),D.Xb(8,"nz-switch",2),D.ec("ngModelChange",function(t){return e.vitalLimitNotificationEnabled=t})("ngModelChange",function(t){return e.onVitalLimitNotificationChange(t)}),D.Wb(),D.Wb(),D.Xb(9,"div",3),D.Xb(10,"span",4),D.ec("click",function(){return e.createAlert()}),D.Xb(11,"span",5),D.Xb(12,"app-icons",6),D.ec("click",function(){return e.createAlert()}),D.Wb(),D.Wb(),D.Xc(13," Create an Alert "),D.Sb(14,"span",7),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Yc(D.kc(3,4,"VITAL.ALERTS_ON_PATIENT_APP")),D.Db(4),D.Zc(" ",D.kc(7,6,"VITAL.NOTIFY_WHEN_VALUES_OUT_OF_RANGE")," "),D.Db(2),D.rc("ngModel",e.vitalLimitNotificationEnabled)("nzDisabled",e.disabled))},directives:[hl.a,d.u,d.x,ee.a,T.a,R.a],pipes:[Vt.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:135px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey);margin-top:30px;padding:25px 45px!important}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}nz-switch[_ngcontent-%COMP%]{float:right;margin-left:30px}h2[_ngcontent-%COMP%]{font-weight:700}.quick-action[_ngcontent-%COMP%]{padding:20px;background:var(--neutral-color);width:100%;bottom:10px;cursor:pointer;position:absolute;right:200px}.icon-btn[_ngcontent-%COMP%], .quick-action[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-btn[_ngcontent-%COMP%]{width:50px;height:50px;background:#e9e9e9;border-radius:50%;flex-direction:column;margin:10px}.app-icon[_ngcontent-%COMP%]{margin-top:30%;margin-right:0}.right-btn[_ngcontent-%COMP%]{font-size:12px;margin-left:6px;color:var(--primary-color)}.action-container[_ngcontent-%COMP%]{display:flex}.create-alert-span[_ngcontent-%COMP%]{width:200px;display:flex;align-items:center}"]}),t})();const bp=function(t){return{"alert-history-expanded-view":t}};function up(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",4),D.ec("click",function(){return D.Lc(t),D.ic().toggleAlertHistory()}),D.Xc(1),D.jc(2,"translate"),D.Sb(3,"app-icons",5),D.Wb()}if(2&t){const t=D.ic();D.rc("ngClass",D.yc(4,bp,!0===t.historyDrawerOpened)),D.Db(1),D.Zc(" ",D.kc(2,2,"VITAL.ALERT_HISTORY")," \xa0 ")}}function pp(t,e){if(1&t&&D.Sb(0,"app-patient-status-notification",10),2&t){const t=D.ic(2);D.rc("patientInfo",t.patientInfo)}}function hp(t,e){if(1&t&&D.Sb(0,"app-vital-card",13),2&t){const t=e.$implicit,n=D.ic(3);D.rc("vitalAlert",t)("disabled","NOT_ONBOARDED"===(null==n.patientInfo?null:n.patientInfo.patientStatus)||"DISCHARGED"===(null==n.patientInfo?null:n.patientInfo.patientStatus))}}function gp(t,e){if(1&t&&(D.Xb(0,"div",11),D.Vc(1,hp,1,2,"app-vital-card",12),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngForOf",t.vitalAlerts)}}function fp(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",6),D.Vc(1,pp,1,1,"app-patient-status-notification",7),D.Xb(2,"h4"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"p"),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Vc(8,gp,2,1,"div",8),D.Xb(9,"alert-summary",9),D.ec("refresh",function(e){return D.Lc(t),D.ic().onRefresh(e)}),D.Wb(),D.Wb()}if(2&t){const t=D.ic(),e=D.Ic(4);D.Db(1),D.rc("ngIf","NOT_ONBOARDED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)||"DISCHARGED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)),D.Db(2),D.Yc(D.kc(4,7,"VITAL.PATIENT_LEVEL_ALERTS")),D.Db(3),D.Yc(D.kc(7,9,"VITAL.ALERT_TOGGLE_TOOLTIP")),D.Db(2),D.rc("ngIf",t.vitalAlerts)("ngIfElse",e),D.Db(1),D.rc("level",t.level)("patientId",t.patientId)}}function mp(t,e){if(1&t&&D.Sb(0,"app-notification-actions",14),2&t){const t=D.ic();D.rc("patientId",t.patientId)("disabled","NOT_ONBOARDED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)||"DISCHARGED"===(null==t.patientInfo?null:t.patientInfo.patientStatus))}}function vp(t,e){1&t&&(D.Xc(0),D.jc(1,"translate")),2&t&&D.Zc(" ",D.kc(1,1,"VITAL.NO_VITALS_AVAILABLE"),"\n")}let Sp=(()=>{class t{constructor(t,e,n,i,a,s,o){this._vitalBlueprintsService=t,this._userVitalAlertService=e,this._activatedRoute=n,this._drawerService=i,this._alertModalService=a,this.alertHistoryDrawerService=s,this.vitalAlertHelperService=o,this.refresh=new D.n,this.level=Gb.c.PATIENT_LEVEL,this.patientId=this._activatedRoute.snapshot.params.id}ngOnInit(){this.loading=!0,this.getAllVitalBlueprintsOfPatient(),this.alertHistoryDrawerSubscription$=this.alertHistoryDrawerService.getShowAlertHistoryObservable().subscribe(t=>t?this.showAlertHistory():this.hideAlertHistory())}toggleAlertHistory(){this.alertHistoryDrawerService.setShowAlertHistoryObservable(!this.historyDrawerOpened)}ngOnDestroy(){this.alertHistoryDrawerSubscription$.unsubscribe()}getAllVitalBlueprintsOfPatient(){this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(t=>{t&&(this.tenantVitalBlueprints=t.filter(t=>null==t?void 0:t.active),this._userVitalAlertService.fetchVitalBlueprintsOfUser(this.patientId).subscribe(t=>{this.userVitalAlerts=t,this.combineVitalAlertsForThePatient()}),this.vitalAndUnitsMap=new Map,this.tenantVitalBlueprints.forEach(t=>t.parameters.forEach(t=>this.vitalAndUnitsMap.set(t.label,t.unit))))})}getUserVitalAlertIfPresentForParameterType(t){var e;let n=null,i=null===(e=this.userVitalAlerts)||void 0===e?void 0:e.filter(e=>e.parameter===t&&!0===e.enabled);return i&&i.length>0&&(n=i[0]),n}combineVitalAlertsForThePatient(){var t;this.vitalAlerts=new Array;for(let e of this.tenantVitalBlueprints)if(e.contexts){let t=this.getUserVitalAlertIfPresentForParameterType(e.parameters[0].type),n=this.vitalAlertHelperService.createVitalAlertForTenantVitalWithContext(e,t);n.patientId=this.patientId,this.vitalAlerts.push(n)}else if(e.parameters)for(let n of e.parameters){let i=this.getUserVitalAlertIfPresentForParameterType(n.type),a=this.vitalAlertHelperService.createVitalAlertFromTenantVitalParameter(n,i);a.patientId=this.patientId,a.label=n.label||e.label,a.unit=(null===(t=null==n?void 0:n.unit)||void 0===t?void 0:t.toLowerCase())||"",a.vital=e.type,a.tags=this.vitalAlertHelperService.createVitalTagsFromTenantVitalBlueprint(e),i||this.vitalAlertHelperService.populateVitalNotificationsFromTenantVitalBlueprint(a,e),a.defaultVitalAlert.tags=this.vitalAlertHelperService.createVitalTagsFromTenantVitalBlueprint(e),this.vitalAlertHelperService.populateVitalNotificationsFromTenantVitalBlueprint(a.defaultVitalAlert,e),this.vitalAlerts.push(a)}this.vitalAlerts.sort((t,e)=>{var n,i;return(null===(n=e.contexts)||void 0===n?void 0:n.length)-(null===(i=t.contexts)||void 0===i?void 0:i.length)}),this.loading=!1}showAlertHistory(){this.historyDrawerOpened=!0,this.drawer||(this.drawer=this._drawerService.create({nzContent:uu,nzContentParams:{patientId:this.patientId,vitalAndUnits:this.vitalAndUnitsMap},nzWidth:350,nzBodyStyle:{padding:"30px"},nzMask:!0,nzMaskClosable:!1,nzZIndex:1e3}),this.drawer.afterClose.subscribe(()=>{this.drawer=null}))}hideAlertHistory(){null!=this.drawer&&(this.historyDrawerOpened=!1,this.drawer.close())}createAlert(){this._alertModalService.showAlertRuleCreateModal().afterClose.subscribe(t=>{this.refresh.emit(!0)})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(Hb.a),D.Rb(sb.a),D.Rb(b.a),D.Rb(Iu.d),D.Rb($b.a),D.Rb(qb),D.Rb(Su))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-alert-notifications"]],inputs:{patientInfo:"patientInfo"},outputs:{refresh:"refresh"},decls:5,vars:3,consts:[["nz-button","","nzType","default",3,"ngClass","click",4,"ngIf"],["class","container",4,"ngIf"],[3,"patientId","disabled",4,"ngIf"],["noData",""],["nz-button","","nzType","default",3,"ngClass","click"],["name","arrowRight","strokeColor","#a7c853","size","12"],[1,"container"],[3,"patientInfo",4,"ngIf"],["class","vital-cards",4,"ngIf","ngIfElse"],[3,"level","patientId","refresh"],[3,"patientInfo"],[1,"vital-cards"],[3,"vitalAlert","disabled",4,"ngFor","ngForOf"],[3,"vitalAlert","disabled"],[3,"patientId","disabled"]],template:function(t,e){1&t&&(D.Vc(0,up,4,6,"button",0),D.Vc(1,fp,10,11,"div",1),D.Vc(2,mp,1,2,"app-notification-actions",2),D.Vc(3,vp,2,3,"ng-template",null,3,D.Wc)),2&t&&(D.rc("ngIf",!e.loading),D.Db(1),D.rc("ngIf",!e.loading),D.Db(1),D.rc("ngIf",!e.loading))},directives:[c.q,X.a,E.a,T.a,c.o,ee.a,Du.a,eb.a,c.p,lp,dp],pipes:[Vt.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}app-notification-actions[_ngcontent-%COMP%]{display:block;margin-top:150px}app-notification-actions[_ngcontent-%COMP%] .container{position:absolute;bottom:0}button[_ngcontent-%COMP%]{position:absolute;right:0;border-radius:5px 0 0 5px;line-height:1;color:var(--black);border-left-color:var(--primary-color);border-bottom-color:var(--primary-color);border-right:none;border-right-color:var(--primary-color);border-top-color:var(--primary-color)}.alert-history-expanded-view[_ngcontent-%COMP%]{position:absolute;right:350px;z-index:1001}.vital-cards[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start}h4[_ngcontent-%COMP%]{font-weight:700;padding:8px 8px 0}p[_ngcontent-%COMP%]{margin-left:8px}app-icons[_ngcontent-%COMP%]{vertical-align:middle}"]}),t})();var Ip=n("cp0P");function Dp(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"label",11),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Sb(4,"br"),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("ngModel",!0),D.Db(1),D.Yc(D.kc(3,2,t.key))}}function Cp(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Dp,5,4,"ng-container",10),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf",t.value)}}function Xp(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"label",12),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Sb(4,"br"),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.rc("ngModel",!0),D.Db(1),D.Yc(D.kc(3,2,t.key))}}function Ep(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Xp,5,4,"ng-container",10),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf",!t.value)}}const Tp=function(t){return["PATIENT_NAME",t]},zp=function(t){return[t]};function _p(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",1),D.Xb(1,"nz-card",2),D.Xb(2,"h2"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Sb(5,"nz-progress",3),D.Xb(6,"p"),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Sb(9,"br"),D.Vc(10,Cp,2,1,"ng-container",4),D.jc(11,"keyvalue"),D.Vc(12,Ep,2,1,"ng-container",4),D.jc(13,"keyvalue"),D.Xb(14,"p"),D.Xc(15),D.jc(16,"translate"),D.jc(17,"translate"),D.Wb(),D.Sb(18,"br"),D.Xb(19,"div",5),D.Xb(20,"div",6),D.Xb(21,"button",7),D.Xc(22),D.jc(23,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(24,"div",5),D.Xb(25,"div",6),D.Xb(26,"button",8),D.ec("click",function(){return D.Lc(t),D.ic().skip()}),D.Xb(27,"label",9),D.Xc(28),D.jc(29,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(3),D.Yc(D.kc(4,12,"PATIENT.PROFILE_READINESS")),D.Db(2),D.rc("nzFormat",t.percentageFormat)("nzPercent",t.percentComplete)("nzStrokeColor","#a7c853"),D.Db(2),D.Zc(" ",D.lc(8,14,"PROFILE_VALIDATION.DESCRIPTION",D.yc(31,zp,D.yc(29,Tp,null==t.patient?null:t.patient.fullName)))," "),D.Db(3),D.rc("ngForOf",D.kc(11,17,t.validationsMap)),D.Db(2),D.rc("ngForOf",D.kc(13,19,t.validationsMap)),D.Db(3),D.ad("",D.kc(16,21,"COMMON.ADDITIONALLY"),", ",D.kc(17,23,"PATIENT.CELLULAR_DEVICE_INFO"),""),D.Db(6),D.tc("routerLink","/patient/view/",t.patientId,""),D.Db(1),D.Zc(" ",D.kc(23,25,"PATIENT.VIEW_PROFILE")," "),D.Db(6),D.Yc(D.kc(29,27,"COMMON.SKIP"))}}let yp=(()=>{class t{constructor(t,e,n){this._patientService=t,this._patientViewModalService=e,this._router=n,this.percentageFormat=t=>`${t}% Complete`,this.percentComplete=0,this.router$=this._router.events.subscribe(t=>{"popstate"!==t.navigationTrigger&&"imperative"!==t.navigationTrigger||(this.showPatientProfileReadiness=!1,this._patientViewModalService.showProfileReadiness.next(!1))}),this.showProfileReadiness$=this._patientViewModalService.showProfileReadiness.subscribe(t=>{t&&this.gotoCreateEpisode()})}ngOnInit(){this.getProfileReadinessState()}ngOnDestroy(){var t,e;null===(t=this.router$)||void 0===t||t.unsubscribe(),null===(e=this.showProfileReadiness$)||void 0===e||e.unsubscribe()}getProfileReadinessState(){this._patientService.validatePatientProfile(this.patientId).subscribe(t=>{this.patient=null==t?void 0:t.patient,this.validationsMap=(null==t?void 0:t.validations)||new Object,this._patientViewModalService.profileReadinessData$.subscribe(t=>{(null==t?void 0:t.dxCodes)&&(null==t?void 0:t.patientId)==this.patientId&&(this.validationsMap.ASSIGNED_ICD_CODES=!1),this.calculateProfileReadinessPercentage()})})}calculateProfileReadinessPercentage(){const t=Object.keys(this.validationsMap).length;let e=0;Object.keys(this.validationsMap).forEach(t=>{this.validationsMap[t]&&e++}),this.percentComplete=100*(t-e)/t}skip(){this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:{tenantId:this.patient.tenantId}})}gotoCreateEpisode(){100>this.percentComplete?this.showPatientProfileReadiness=!0:(this.showPatientProfileReadiness=!0,this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:{tenantId:this.patient.tenantId}}))}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(g.a),D.Rb(zr.a),D.Rb(b.g))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-profile-readiness"]],inputs:{patientId:"patientId"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["id","state-card"],[3,"nzFormat","nzPercent","nzStrokeColor"],[4,"ngFor","ngForOf"],["nz-row",""],["nz-col","","nzSpan","16","nzOffset","4"],["nz-button","","nzType","primary","nzSize","large",3,"routerLink"],["nz-button","","nzType","link",3,"click"],["nz-typography","","nzType","secondary"],[4,"ngIf"],["nzDisabled","","nz-checkbox","",1,"incomplete",3,"ngModel"],["nz-checkbox","",3,"ngModel"]],template:function(t,e){1&t&&D.Vc(0,_p,30,33,"div",0),2&t&&D.rc("ngIf",e.patient&&e.showPatientProfileReadiness)},directives:[c.q,vn.a,Yi.a,c.p,k.c,k.a,X.a,E.a,T.a,b.h,V.a,U.a,d.u,d.x],pipes:[Vt.a,c.j],styles:[".container[_ngcontent-%COMP%]{padding:10px!important}#state-card[_ngcontent-%COMP%]{width:60%;margin:2% 0 0 25%;min-height:400px;padding-left:40px;padding-right:40px;border-radius:6px;box-shadow:0 3px 6px #00000029;background:var(--neutral-color) 0 0 no-repeat padding-box}h2[_ngcontent-%COMP%]{font:normal normal 700 20px/27px Nunito;text-align:center;margin-bottom:20px}[_nghost-%COMP%]     .ant-progress-line{width:90%}[_nghost-%COMP%]     .ant-progress-inner{border:1px solid #a8a8a8}#state-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;font:normal normal normal 13px Nunito}[_nghost-%COMP%]     .ant-checkbox-inner{width:16px;height:16px;border-radius:50%}[_nghost-%COMP%]     .ant-checkbox-checked .ant-checkbox-inner{background-color:var(--primary-color);border:0}[_nghost-%COMP%]     .ant-checkbox-checked .ant-checkbox-inner:after{border-color:var(--neutral-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background-color:var(--neutral-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:#a8a8a8}[_nghost-%COMP%]     .ant-checkbox-disabled+span{color:unset}label[_ngcontent-%COMP%]{margin-bottom:10px;pointer-events:none}.incomplete[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{width:100%}@media screen and (orientation:portrait){#state-card[_ngcontent-%COMP%]{width:100%;margin-left:2%}}"]}),t})();var Op=n("Lrxu"),Mp=n("Etcd");let Ap=(()=>{class t{constructor(t){this._element=t,this.checkByAssignedCPTCodes=t=>{this.cptCodes.find(e=>e.id===t)?this.enableFeature():this.disableFeature()},this.cptCodes=[]}ngAfterViewInit(){this.checkState()}checkState(){switch(this.widget){case"VITAL_ADHERENCE":this.checkByAssignedCPTCodes("99454");break;case"TMS_ADHERENCE":this.checkByAssignedCPTCodes("99457");break;case"ADDITIONAL_TMS_ADHERENCE":this.checkByAssignedCPTCodes("99458");break;case"ADDITIONAL_TMS_B_ADHERENCE":this.checkByAssignedCPTCodes("99458B");break;case"CMT_ADHERENCE":this.checkByAssignedCPTCodes("99484");break;case"NON_COMPLEX_TMS":this.checkByAssignedCPTCodes("99490");break;case"NON_COMPLEX_ADDITIONAL_TMS":this.checkByAssignedCPTCodes("99439");break;case"NON_COMPLEX_ADDITIONAL_TMS_B":this.checkByAssignedCPTCodes("99439B")}}enableFeature(){this._element.nativeElement.style.display="revert"}disableFeature(){this._element.nativeElement.style.display="none"}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(D.l))},t.\u0275dir=D.Mb({type:t,selectors:[["","assignedEpisodeWidgetEnabled",""]],inputs:{widget:["assignedEpisodeWidgetEnabled","widget"],cptCodes:["episodeCPTCodes","cptCodes"]}}),t})();var Pp=n("Pp+U");function Np(t,e){if(1&t&&(D.Xb(0,"div",10),D.Xb(1,"strong",11),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xc(4),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.Zc("",D.kc(3,2,"CONSENT.CONSENT_OBTAINED")," : "),D.Db(2),D.Zc(" ",t.consentObtained?"Yes":"No"," ")}}function Wp(t,e){if(1&t&&(D.Xb(0,"div",10),D.Xb(1,"strong",11),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xc(4),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.Zc("",D.kc(3,2,"DOCTORS_ORDER.OBTAINED")," : "),D.Db(2),D.Zc(" ",t.physicianOrderObtained?"Yes":"No"," ")}}function Rp(t,e){if(1&t&&(D.Xb(0,"div",8),D.Vc(1,Np,5,4,"div",9),D.Vc(2,Wp,5,4,"div",9),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",t.consentEnabled),D.Db(1),D.rc("ngIf",t.physicianOrderEnabled)}}function xp(t,e){if(1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"translate"),D.jc(3,"date"),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.ad(" ",D.kc(2,2,"PATIENT.SECHEDULED_ON"),": ",D.lc(3,4,null==t?null:t.scheduledOn,"mediumDate")," ")}}function wp(t,e){if(1&t&&(D.Xb(0,"span"),D.Xc(1),D.jc(2,"translate"),D.jc(3,"date"),D.Wb()),2&t){const t=D.ic().$implicit;D.Db(1),D.ad(" ",D.kc(2,2,"TABLEHEADER.COMPLETEDON"),": ",D.lc(3,4,null==t?null:t.completedOn,"mediumDate")," ")}}function Vp(t,e){if(1&t&&(D.Xb(0,"div",12),D.Xb(1,"strong"),D.Xc(2),D.Wb(),D.Vc(3,xp,4,7,"span",5),D.Vc(4,wp,4,7,"span",5),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.Zc("",null==t?null:t.title,": "),D.Db(1),D.rc("ngIf",!(null!=t&&t.completed)),D.Db(1),D.rc("ngIf",null==t?null:t.completed)}}function Lp(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"h4"),D.Xc(2),D.Wb(),D.Xb(3,"div",14),D.Xb(4,"div",15),D.Xb(5,"strong",16),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"p"),D.Xc(9),D.jc(10,"date"),D.Wb(),D.Wb(),D.Xb(11,"div",15),D.Xb(12,"strong",16),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Xb(15,"p"),D.Xc(16),D.jc(17,"date"),D.Wb(),D.Wb(),D.Xb(18,"div",17),D.Xb(19,"div",14),D.Xb(20,"div",18),D.Xb(21,"strong"),D.Xc(22),D.jc(23,"translate"),D.Wb(),D.Wb(),D.Xb(24,"div",19),D.Xb(25,"div",20),D.Xb(26,"p",21),D.Xc(27),D.Wb(),D.Wb(),D.Sb(28,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Xb(29,"div",17),D.Xb(30,"div",14),D.Xb(31,"div",23),D.Xb(32,"strong"),D.Xc(33),D.jc(34,"translate"),D.Wb(),D.Wb(),D.Xb(35,"div",19),D.Xb(36,"div",20),D.Xb(37,"p",21),D.Xc(38),D.Wb(),D.Wb(),D.Sb(39,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Xb(40,"div",17),D.Xb(41,"div",14),D.Xb(42,"div",23),D.Xb(43,"strong"),D.Xc(44),D.jc(45,"translate"),D.Wb(),D.Wb(),D.Xb(46,"div",19),D.Xb(47,"div",20),D.Xb(48,"p",21),D.Xc(49),D.Wb(),D.Wb(),D.Sb(50,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Xb(51,"div",24),D.Xb(52,"div",14),D.Xb(53,"div",23),D.Xb(54,"strong"),D.Xc(55),D.jc(56,"translate"),D.Wb(),D.Wb(),D.Xb(57,"div",19),D.Xb(58,"div",20),D.Xb(59,"p",21),D.Xc(60),D.Wb(),D.Wb(),D.Sb(61,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(2),D.Yc((null==t?null:t.name)||(null==t?null:t.type)),D.Db(4),D.Yc(D.kc(7,41,"COMMON.START_DATE")),D.Db(3),D.Yc(D.lc(10,43,null==t?null:t.startDate,"mediumDate")),D.Db(4),D.Yc(D.kc(14,46,"COMMON.END_DATE")),D.Db(3),D.Yc(D.lc(17,48,null==t?null:t.endDate,"mediumDate")),D.Db(2),D.rc("assignedEpisodeWidgetEnabled","TMS_ADHERENCE")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),D.Db(4),D.Yc(D.kc(23,51,"EPISODE.TMS_REMAINING")),D.Db(4),D.rc("ngClass",100==n.tmsPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",n.patientCommunicationProgressFormat(n.tmsPercent)," "),D.Db(1),D.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.tmsPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),D.Db(1),D.rc("assignedEpisodeWidgetEnabled","ADDITIONAL_TMS_ADHERENCE")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),D.Db(4),D.Yc(D.kc(34,53,"EPISODE.ADDITIONAL_TMS_A_REMAINING")),D.Db(4),D.rc("ngClass",100==n.additionalTMSPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",n.patientCommunicationProgressFormat(n.additionalTMSPercent)," "),D.Db(1),D.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.additionalTMSPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),D.Db(1),D.rc("assignedEpisodeWidgetEnabled","ADDITIONAL_TMS_B_ADHERENCE")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),D.Db(4),D.Yc(D.kc(45,55,"EPISODE.ADDITIONAL_TMS_B_REMAINING")),D.Db(4),D.rc("ngClass",100==n.additionalTMSBPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",n.patientCommunicationProgressFormat(n.additionalTMSBPercent)," "),D.Db(1),D.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.additionalTMSBPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),D.Db(1),D.rc("assignedEpisodeWidgetEnabled","CMT_ADHERENCE")("episodeCPTCodes",null==n.episode?null:n.episode.cptCodeList),D.Db(4),D.Yc(D.kc(56,57,"EPISODE.CMT_REMAINING")),D.Db(4),D.rc("ngClass",100==n.cmtPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",n.patientCommunicationProgressFormat(n.cmtPercent)," "),D.Db(1),D.rc("nzFormat",n.patientCommunicationProgressFormat)("nzPercent",n.cmtPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1)}}function kp(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Lp,62,59,"ng-container",13),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngForOf",null==t.episode?null:t.episode.activeCareplans)}}function Fp(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"h4"),D.Xb(2,"div",14),D.Sb(3,"div",15),D.Sb(4,"div",15),D.Xb(5,"div",17),D.Xb(6,"div",14),D.Xb(7,"div",18),D.Xb(8,"strong"),D.Xc(9,"Non-complex CMT"),D.Wb(),D.Wb(),D.Xb(10,"div",19),D.Xb(11,"div",20),D.Xb(12,"p",21),D.Xc(13),D.Wb(),D.Wb(),D.Sb(14,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Xb(15,"div",17),D.Xb(16,"div",14),D.Xb(17,"div",23),D.Xb(18,"strong"),D.Xc(19,"Non-complex CMT - A"),D.Wb(),D.Wb(),D.Xb(20,"div",19),D.Xb(21,"div",20),D.Xb(22,"p",21),D.Xc(23),D.Wb(),D.Wb(),D.Sb(24,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Xb(25,"div",17),D.Xb(26,"div",14),D.Xb(27,"div",23),D.Xb(28,"strong"),D.Xc(29,"Non-complex CMT - B"),D.Wb(),D.Wb(),D.Xb(30,"div",19),D.Xb(31,"div",20),D.Xb(32,"p",21),D.Xc(33),D.Wb(),D.Wb(),D.Sb(34,"nz-progress",22),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()),2&t){const t=D.ic();D.Db(5),D.rc("assignedEpisodeWidgetEnabled","NON_COMPLEX_TMS")("episodeCPTCodes",null==t.episode?null:t.episode.cptCodeList),D.Db(7),D.rc("ngClass",100==t.ccmCMTPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",t.patientCommunicationProgressFormat(t.ccmCMTPercent)," "),D.Db(1),D.rc("nzFormat",t.patientCommunicationProgressFormat)("nzPercent",t.ccmCMTPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),D.Db(1),D.rc("assignedEpisodeWidgetEnabled","NON_COMPLEX_ADDITIONAL_TMS")("episodeCPTCodes",null==t.episode?null:t.episode.cptCodeList),D.Db(7),D.rc("ngClass",100==t.ccmAdditionalCMTPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",t.patientCommunicationProgressFormat(t.ccmAdditionalCMTPercent)," "),D.Db(1),D.rc("nzFormat",t.patientCommunicationProgressFormat)("nzPercent",t.ccmAdditionalCMTPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1),D.Db(1),D.rc("assignedEpisodeWidgetEnabled","NON_COMPLEX_ADDITIONAL_TMS_B")("episodeCPTCodes",null==t.episode?null:t.episode.cptCodeList),D.Db(7),D.rc("ngClass",100==t.ccmAdditionalCMTBPercent?"completed-label-100":"completed-label"),D.Db(1),D.Zc(" ",t.patientCommunicationProgressFormat(t.ccmAdditionalCMTBPercent)," "),D.Db(1),D.rc("nzFormat",t.patientCommunicationProgressFormat)("nzPercent",t.ccmAdditionalCMTBPercent)("nzStrokeColor","#a7c853")("nzShowInfo",!1)}}function Up(t,e){if(1&t&&(D.Xb(0,"label"),D.Xc(1),D.jc(2,"translate"),D.jc(3,"date"),D.Sb(4,"br"),D.Xc(5),D.jc(6,"translate"),D.jc(7,"date"),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.ad(" ",D.kc(2,4,"COMMON.START_DATE"),": ",D.lc(3,6,null==t.episode?null:t.episode.startDate,"mediumDate")," "),D.Db(4),D.ad(" ",D.kc(6,9,"COMMON.END_DATE"),": ",D.lc(7,11,null==t.episode?null:t.episode.endDate,"mediumDate")," ")}}function jp(t,e){1&t&&(D.Vb(0),D.Xc(1,"s"),D.Ub())}function Yp(t,e){if(1&t&&(D.Xb(0,"h3",25),D.Xb(1,"span",26),D.Xc(2),D.Vc(3,Up,8,14,"ng-template",null,27,D.Wc),D.Wb(),D.Wb(),D.Xb(5,"h5",11),D.Xc(6),D.jc(7,"episodeStatusName"),D.Wb(),D.Xb(8,"h5",11),D.Xc(9),D.jc(10,"translate"),D.Vc(11,jp,2,0,"ng-container",5),D.Wb()),2&t){const t=D.Ic(4),e=D.ic();D.Db(1),D.rc("nzTooltipTitle",t),D.Db(1),D.Zc(" ",(null==e.episode?null:e.episode.name)||(null==e.episode?null:e.episode.type)," "),D.Db(4),D.Zc("Status : ",D.kc(7,6,null==e.episode?null:e.episode.status),""),D.Db(3),D.ad(" ",e.numberOfDays," ",D.kc(10,8,"COMMON.DAY"),""),D.Db(2),D.rc("ngIf",e.numberOfDays>1)}}function Bp(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"span",30),D.ec("click",function(){return D.Lc(t),D.ic(2).editEpisode()}),D.Xc(2),D.jc(3,"translate"),D.Sb(4,"app-icons",31),D.Wb(),D.Xc(5," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),D.Ub()}2&t&&(D.Db(2),D.Zc(" ",D.kc(3,1,"EPISODE.EDIT")," \xa0 "))}function Hp(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"span",30),D.ec("click",function(){return D.Lc(t),D.ic(2).viewEpisode()}),D.Xc(2," Manage \xa0 "),D.Sb(3,"app-icons",32),D.Wb(),D.Ub()}}const Gp=function(){return["VIEW_EPISODE"]};function $p(t,e){1&t&&(D.Xb(0,"h6",28),D.Vc(1,Bp,6,3,"ng-container",5),D.Vc(2,Hp,4,0,"ng-container",29),D.Wb()),2&t&&(D.Db(1),D.rc("ngIf",!1),D.Db(1),D.rc("isFeaturePermitted",D.xc(2,Gp)))}let Zp=(()=>{class t{constructor(t,e){this._router=t,this._patientsEventLogger=e,this.patientCommunicationProgressFormat=t=>{const e=Math.floor(20*t/100),n=20-e;return 20>e?n<10?`0${n}\n Minutes`:`${n}\n Minutes`:"Completed"}}set episodeBlueprint(t){let e=null==t?void 0:t.episodeComponent;this.consentEnabled=null==e?void 0:e.enableConsentForm,this.physicianOrderEnabled=null==e?void 0:e.physicianOrderEnabled}set activeEpisode(t){var e,n,i,a;this.episode=t,this.consentObtained=null===(n=null===(e=this.episode)||void 0===e?void 0:e.availableConsents)||void 0===n?void 0:n.some(t=>Op.b.OBTAINED==(null==t?void 0:t.consentStatus)),this.physicianOrderObtained=null===(a=null===(i=this.episode)||void 0===i?void 0:i.physicianOrders)||void 0===a?void 0:a.some(t=>null==t?void 0:t.validTill),this.numberOfDays=Object(un.a)(new Date(this.episode.endDate),new Date(this.episode.startDate));const s=this.episode.patientCommunications.filter(t=>ye.a.TREATMENT_MANAGEMENT_SERVICE===t.cptCode).reduce((t,e)=>t+e.durationInMilliSeconds,0)/6e4,o=s?s-20:0,l=s?s-40:0,r=this.episode.patientCommunications.filter(t=>ye.a.CARE_MANAGEMENT_TIME===t.cptCode).reduce((t,e)=>t+e.durationInMilliSeconds,0)/6e4,c=this.episode.patientCommunications.filter(t=>ye.a.NON_COMPLEX_TMS===t.cptCode).reduce((t,e)=>t+e.durationInMilliSeconds,0)/6e4,d=r?r-20:0,b=r?r-40:0;this.tmsPercent=s/20*100,this.additionalTMSPercent=o/20*100,this.additionalTMSBPercent=l/20*100,this.cmtPercent=r/20*100,this.ccmCMTPercent=c/20*100,this.ccmAdditionalCMTPercent=d/20*100,this.ccmAdditionalCMTBPercent=b/20*100}viewEpisode(){this._patientsEventLogger.patientDetailsActionEvent(this.episode.patientId,"view_active_episode"),this._router.navigate([`episodes/details/${this.episode.patientId}/${this.episode.id}`],{queryParams:{blueprintId:this.episode.blueprintId}})}editEpisode(){this._patientsEventLogger.patientDetailsActionEvent(this.episode.patientId,"edit_active_episode"),this._router.navigate([`episodes/form/edit/${this.episode.patientId}`],{queryParams:{blueprintId:this.episode.blueprintId,episodeId:this.episode.id}})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(v.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-active-episode"]],inputs:{episodeBlueprint:"episodeBlueprint",activeEpisode:"activeEpisode"},decls:11,vars:6,consts:[[1,"container"],[3,"nzTitle","nzExtra"],["nz-row","","nzGutter","8",4,"ngIf"],["nzAutoPlay",""],["class","dst","nz-carousel-content","",4,"ngFor","ngForOf"],[4,"ngIf"],["title",""],["actions",""],["nz-row","","nzGutter","8"],["nz-col","","nzXs","24","nzSm","12","nzMd","6",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","6"],["nz-typography",""],["nz-carousel-content","",1,"dst"],[4,"ngFor","ngForOf"],["nz-row",""],["nz-col","","nzXs","24","nzSm","12","nzMd","4"],["nz-typography","","nzType","secondary"],["nz-col","","nzXs","24","nzSm","12","nzMd","5",1,"tms-adherence-container",3,"assignedEpisodeWidgetEnabled","episodeCPTCodes"],["nz-col","","nzFlex","70px",1,"patient-communication"],["nz-col","","nzFlex","70px"],["nz-row","","nzJustify","center","nzAlign","center",1,"progress-label-container"],[3,"ngClass"],["nzStrokeWidth","4",3,"nzFormat","nzPercent","nzStrokeColor","nzShowInfo"],["nz-col","","nzFlex","80px",1,"patient-communication"],["nz-col","","nzXs","24","nzSm","12","nzMd","5",3,"assignedEpisodeWidgetEnabled","episodeCPTCodes"],["nz-typography","","nzType","success"],["nz-tooltip","","nzTooltipPlacement","right",3,"nzTooltipTitle"],["episodeDates",""],["nz-typography","","nzType","success","id","actions"],[4,"isFeaturePermitted"],[3,"click"],["name","edit","strokeWidth","1px","strokeColor","#E5E5E5"],["name","arrowRight"]],template:function(t,e){if(1&t&&(D.Xb(0,"div",0),D.Xb(1,"nz-card",1),D.Vc(2,Rp,3,2,"div",2),D.Xb(3,"nz-carousel",3),D.Vc(4,Vp,5,3,"div",4),D.Wb(),D.Vc(5,kp,2,1,"ng-container",5),D.Vc(6,Fp,35,24,"ng-container",5),D.Wb(),D.Vc(7,Yp,12,10,"ng-template",null,6,D.Wc),D.Vc(9,$p,3,3,"ng-template",null,7,D.Wc),D.Wb()),2&t){const t=D.Ic(8),n=D.Ic(10);D.Db(1),D.rc("nzTitle",t)("nzExtra",n),D.Db(1),D.rc("ngIf",e.consentEnabled||e.physicianOrderEnabled),D.Db(2),D.rc("ngForOf",null==e.episode?null:e.episode.activeEducationVisits),D.Db(1),D.rc("ngIf",null==e.episode||null==e.episode.activeCareplans?null:e.episode.activeCareplans.length),D.Db(1),D.rc("ngIf",!(null!=e.episode&&null!=e.episode.activeCareplans&&e.episode.activeCareplans.length)&&"CCM"===(null==e.episode?null:e.episode.episodeType))}},directives:[vn.a,c.q,Mp.a,c.p,k.c,k.a,V.a,Mp.b,Ap,c.o,Yi.a,fi.d,Ye.a,ee.a],pipes:[Vt.a,c.e,Pp.a],styles:[".container[_ngcontent-%COMP%]{padding:0!important}.ant-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;box-shadow:0 3px 6px #00000029;border:1px solid #78952f;border-radius:15px;padding:5px 5px 0}[_nghost-%COMP%]     .ant-card-head{border-bottom:0}[_nghost-%COMP%]     .ant-card-body{padding-top:0;padding-bottom:15px}[_nghost-%COMP%]     .ant-card-extra{margin-top:-30px}h3[_ngcontent-%COMP%]{font-weight:400!important;font-size:18px!important}h4[_ngcontent-%COMP%]{font-weight:700!important}h5[_ngcontent-%COMP%]{margin-top:0!important;font:normal normal 600 13px/22px Nunito!important}#actions[_ngcontent-%COMP%]{cursor:pointer;font-size:10px}.dst[_ngcontent-%COMP%]{font-size:12px;text-align:right;line-height:0}nz-progress[_ngcontent-%COMP%]{line-height:1.5}[_nghost-%COMP%]     .ant-progress-outer{display:block;width:50%;padding-right:0!important;margin:auto!important}[_nghost-%COMP%]     .ant-progress-inner{display:block}[_nghost-%COMP%]     .ant-progress-text{text-align:center;margin:-30px auto auto;display:block;width:unset;white-space:pre}.patient-communication[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-progress-line{font-size:11px;cursor:default}[nz-carousel-content][_ngcontent-%COMP%]{height:15px;line-height:10px;overflow:hidden}app-icons[_ngcontent-%COMP%]{vertical-align:middle}.progress-label-container[_ngcontent-%COMP%]{margin-bottom:-8px}.tms-adherence-container[_ngcontent-%COMP%]{display:flex;align-content:center;flex-direction:column}.completed-label[_ngcontent-%COMP%], .completed-label-100[_ngcontent-%COMP%]{margin-bottom:0;text-align:center;font-size:12px}.completed-label-100[_ngcontent-%COMP%]{color:var(--primary-color)}"]}),t})();function qp(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"app-active-episode",2),D.Sb(2,"br"),D.Ub()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(1),D.rc("activeEpisode",t)("episodeBlueprint",null==n.episodeBlueprintMap?null:n.episodeBlueprintMap.get(t.blueprintId))}}function Kp(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"h4"),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Vc(4,qp,3,2,"ng-container",1),D.Ub()),2&t){const t=D.ic();D.Db(2),D.Yc(D.kc(3,2,"EPISODE.ACTIVE_DETAILS")),D.Db(2),D.rc("ngForOf",t.episodes)}}let Qp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Lb({type:t,selectors:[["app-active-episodes"]],inputs:{episodes:"episodes",episodeBlueprintMap:"episodeBlueprintMap"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"activeEpisode","episodeBlueprint"]],template:function(t,e){1&t&&D.Vc(0,Kp,5,4,"ng-container",0),2&t&&D.rc("ngIf",null==e.episodes?null:e.episodes.length)},directives:[c.q,c.p,Zp],pipes:[Vt.a],styles:["h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700}"]}),t})();var Jp=n("ighe");function th(t,e){1&t&&(D.Xb(0,"span",10),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"COMMON.SUSPENDED")," "))}function eh(t,e){1&t&&(D.Xb(0,"span",11),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"COMMON.COMPLETED")," "))}function nh(t,e){1&t&&D.Sb(0,"app-icons",12)}function ih(t,e){1&t&&D.Sb(0,"app-icons",14)}const ah=function(){return["EDIT_EPISODE"]};function sh(t,e){if(1&t){const t=D.Yb();D.Xb(0,"span",7),D.ec("click",function(){D.Lc(t);const e=D.ic().$implicit;return D.ic(2).reviveEpisode(null==e?null:e.id,null==e?null:e.patientId,null==e?null:e.blueprintId)}),D.Vc(1,ih,1,0,"app-icons",13),D.Wb()}2&t&&(D.Db(1),D.rc("isFeaturePermitted",D.xc(1,ah)))}const oh=function(){return["VIEW_EPISODE"]};function lh(t,e){if(1&t){const t=D.Yb();D.Xb(0,"tr"),D.Xb(1,"td"),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Xb(4,"td"),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Xb(7,"td"),D.Xc(8),D.Wb(),D.Xb(9,"td"),D.Xc(10),D.Wb(),D.Xb(11,"td",4),D.Vc(12,th,3,3,"span",5),D.Vc(13,eh,3,3,"span",6),D.Wb(),D.Xb(14,"td"),D.Xb(15,"span",7),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).viewEpisode(null==n?null:n.id,null==n?null:n.patientId,null==n?null:n.blueprintId)}),D.Vc(16,nh,1,0,"app-icons",8),D.Wb(),D.Xc(17," \xa0 "),D.Vc(18,sh,2,2,"span",9),D.Wb(),D.Wb()}if(2&t){const t=e.$implicit,n=e.index;D.Db(2),D.Yc(D.lc(3,9,null==t?null:t.startDate,"mediumDate")),D.Db(3),D.Yc(D.lc(6,12,null==t?null:t.endDate,"mediumDate")),D.Db(3),D.Yc(null==t?null:t.duration),D.Db(2),D.Yc(null==t?null:t.name),D.Db(1),D.rc("ngSwitch",null==t?null:t.status),D.Db(1),D.rc("ngSwitchCase","SUSPENDED"),D.Db(1),D.rc("ngSwitchCase","COMPLETED"),D.Db(3),D.rc("isFeaturePermitted",D.xc(15,oh)),D.Db(2),D.rc("ngIf","SUSPENDED"===(null==t?null:t.status)&&0===n)}}function rh(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"nz-table",1,2),D.ec("nzPageIndexChange",function(e){return D.Lc(t),D.ic().firePageChanged(e)}),D.Xb(3,"thead"),D.Xb(4,"tr"),D.Xb(5,"th"),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"th"),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"th"),D.Xc(12),D.jc(13,"translate"),D.Wb(),D.Xb(14,"th"),D.Xc(15),D.jc(16,"translate"),D.Wb(),D.Xb(17,"th"),D.Xc(18),D.jc(19,"translate"),D.Wb(),D.Xb(20,"th"),D.Xc(21),D.jc(22,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(23,"tbody"),D.Vc(24,lh,19,16,"tr",3),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.Ic(2),e=D.ic();D.Db(1),D.rc("nzData",e.episodes)("nzTotal",e.count)("nzPageIndex",e.pageIndex),D.Db(5),D.Yc(D.kc(7,10,"COMMON.STARTDATE")),D.Db(3),D.Yc(D.kc(10,12,"COMMON.ENDDATE")),D.Db(3),D.Yc(D.kc(13,14,"COMMON.DURATION")),D.Db(3),D.Yc(D.kc(16,16,"COMMON.EPISODE_NAME")),D.Db(3),D.Yc(D.kc(19,18,"COMMON.STATUS")),D.Db(3),D.Yc(D.kc(22,20,"TABLEHEADER.ACTIONS")),D.Db(3),D.rc("ngForOf",null==t?null:t.data)}}let ch=(()=>{class t{constructor(t,e,n,i){this._router=t,this._episodesService=e,this._patientsEventLogger=n,this._notificationsService=i,this.pageIndex=1,this.pageChanged=new D.n}firePageChanged(t=1){this.pageIndex=t,this.pageChanged.emit(t)}viewEpisode(t,e,n){this._patientsEventLogger.patientDetailsActionEvent(e,"view_episode_from_list"),this._router.navigate([`episodes/details/${e}/${t}`],{queryParams:{blueprintId:n}})}reviveEpisode(t,e,n){this._episodesService.reviveEpisode(t).subscribe(()=>{this._notificationsService.success("Episode","Episode revived successfully!"),this._router.navigate([`episodes/details/${e}/${t}`],{queryParams:{blueprintId:n}})})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(Jp.a),D.Rb(v.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-past-episodes"]],inputs:{patientId:"patientId",episodes:"episodes",count:["episodesCount","count"]},outputs:{pageChanged:"pageChanged"},decls:1,vars:1,consts:[[4,"ngIf"],["nzTitle","Previous Episodes","nzFrontPagination","false",3,"nzData","nzTotal","nzPageIndex","nzPageIndexChange"],["episodesTable",""],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["nz-typography","","nzType","secondary",4,"ngSwitchCase"],["nz-typography","",4,"ngSwitchCase"],[3,"click"],["name","view",4,"isFeaturePermitted"],[3,"click",4,"ngIf"],["nz-typography","","nzType","secondary"],["nz-typography",""],["name","view"],["name","reload","size","16","nz-tooltip","","nzTooltipTitle","Revive Episode",4,"isFeaturePermitted"],["name","reload","size","16","nz-tooltip","","nzTooltipTitle","Revive Episode"]],template:function(t,e){1&t&&D.Vc(0,rh,25,22,"ng-container",0),2&t&&D.rc("ngIf",null==e.episodes?null:e.episodes.length)},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p,c.s,c.t,Ye.a,V.a,ee.a,fi.d],pipes:[Vt.a,c.e],styles:["tr[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]     .ant-table-title{padding:8px 8px 0;font-weight:700}[_nghost-%COMP%]     .ant-table-thead>tr>th{background-color:#dcdcdc!important}"]}),t})();function dh(t,e){if(1&t&&D.Sb(0,"app-patient-status-notification",4),2&t){const t=D.ic();D.rc("patientInfo",t.patientInfo)}}function bh(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"app-active-episodes",5),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("episodes",t.activeEpisodes)("episodeBlueprintMap",t.episodeBlueprintMap)}}function uh(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"app-past-episodes",6),D.ec("pageChanged",function(e){return D.Lc(t),D.ic().getPastEpisodes(e)}),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(1),D.rc("patientId",t.patientId)("episodes",t.pastEpisodes)("episodesCount",t.pastEpisodesCount)}}function ph(t,e){1&t&&(D.Xb(0,"p"),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.Db(1),D.Yc(D.kc(2,1,"EPISODE.NO_EPISODE")))}function hh(t,e){if(1&t&&(D.Vb(0),D.Vc(1,ph,3,3,"p",2),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",t.activeEpisodesLoaded&&t.pastEpisodesLoaded)}}function gh(t,e){1&t&&(D.Vb(0),D.Xb(1,"div",7),D.Sb(2,"nz-spin",8),D.Wb(),D.Ub())}let fh=(()=>{class t{constructor(t,e,n){this._activatedRoute=t,this._episodesService=e,this._patientViewModelService=n,this.patientId=this._activatedRoute.snapshot.params.id,this.activeEpisodes=[],this._patientViewModelService.showProfileReadiness.subscribe(t=>this.showPatientProfileReadiness=t)}ngOnInit(){this.getEpisodes(),this.createEpisodeBlueprintMap()}createEpisodeBlueprintMap(){var t;this.episodeBlueprintMap=new Map(null===(t=this.episodeBlueprints)||void 0===t?void 0:t.filter(t=>!t.archived).map(t=>[t.id,t]))}getOffset(t){return 1!==t?10*(t-1):0}getEpisodes(){const t=this._episodesService.getEpisodes(this.patientId,10,0,null,[ib.a.SCHEDULED,ib.a.IN_PROGRESS]),e=this._episodesService.getEpisodes(this.patientId,10,this.getOffset(1));Object(Ip.a)([t,e]).subscribe(t=>{var e;this.getActiveEpisodesData(null===(e=t[0])||void 0===e?void 0:e.result),this.getPastEpisodesData(t[1])})}getActiveEpisodes(){this._episodesService.getEpisodes(this.patientId,10,0,null,[ib.a.SCHEDULED,ib.a.IN_PROGRESS]).subscribe(t=>{this.getActiveEpisodesData(null==t?void 0:t.result)})}getPastEpisodes(t=1){this._episodesService.getEpisodes(this.patientId,10,this.getOffset(t)).subscribe(t=>{this.getPastEpisodesData(t)})}getActiveEpisodesData(t){(null==t?void 0:t.length)>0?Object(Ip.a)(null==t?void 0:t.map(t=>this._episodesService.getEpisodeById(t.id))).subscribe(t=>{this.activeEpisodes.push(...t),this.activeEpisodesLoaded=!0}):this.activeEpisodesLoaded=!0}getPastEpisodesData(t){var e;this.pastEpisodesCount=null==t?void 0:t.totalCount,this.pastEpisodes=[],null===(e=null==t?void 0:t.result)||void 0===e||e.forEach(t=>{t.duration=`${Object(un.a)(Object(Zo.a)(null==t?void 0:t.endDate),Object(Zo.a)(null==t?void 0:t.startDate))} days`,ib.a.SCHEDULED!==t.status&&ib.a.IN_PROGRESS!==t.status&&this.pastEpisodes.push(t)}),this.pastEpisodesLoaded=!0}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.a),D.Rb(fn.a),D.Rb(zr.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-episodes"]],inputs:{patientInfo:"patientInfo",episodeBlueprints:"episodeBlueprints"},decls:7,vars:6,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],[4,"ngIf"],[3,"patientId"],[3,"patientInfo"],[3,"episodes","episodeBlueprintMap"],[3,"patientId","episodes","episodesCount","pageChanged"],["nz-col","","nzSpan","24",2,"text-align","center","margin-top","50px"],["nzSimple","","nzTip","Loading Data..."]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Vc(1,dh,1,1,"app-patient-status-notification",1),D.Vc(2,bh,2,2,"ng-container",2),D.Vc(3,uh,2,3,"ng-container",2),D.Vc(4,hh,2,1,"ng-container",2),D.Vc(5,gh,3,0,"ng-container",2),D.Sb(6,"app-profile-readiness",3),D.Wb()),2&t&&(D.Db(1),D.rc("ngIf","NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("ngIf",!e.showPatientProfileReadiness),D.Db(1),D.rc("ngIf",!e.showPatientProfileReadiness),D.Db(1),D.rc("ngIf",!(null!=e.activeEpisodes&&e.activeEpisodes.length||null!=e.pastEpisodes&&e.pastEpisodes.length)),D.Db(1),D.rc("ngIf",!(e.activeEpisodesLoaded&&e.pastEpisodesLoaded)),D.Db(1),D.rc("patientId",e.patientId))},directives:[c.q,yp,eb.a,Qp,ch,k.a,mn.a],pipes:[Vt.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}"]}),t})();function mh(t,e){if(1&t&&D.Sb(0,"app-patient-status-notification",5),2&t){const t=D.ic();D.rc("patientInfo",t.patientInfo)}}function vh(t,e){if(1&t&&(D.Xb(0,"tr",6),D.Xb(1,"td",7),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.jc(5,"titlecase"),D.Wb(),D.Xb(6,"td"),D.Xc(7),D.Wb(),D.Xb(8,"td"),D.Xc(9),D.Wb(),D.Xb(10,"td"),D.Xc(11),D.jc(12,"date"),D.Wb(),D.Xb(13,"td"),D.Xc(14),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.tc("routerLink","/form/evalforms/view/",null==t?null:t._id,""),D.Db(1),D.sc("nzTooltipTitle",null==t||null==t.schema?null:t.schema.description),D.Db(1),D.Zc(" ",null==t||null==t.schema?null:t.schema.title," "),D.Db(2),D.Yc("SCORED_ASSESSMENT"===(null==t||null==t.schema?null:t.schema.type)?"Scored Assessment":D.kc(5,8,null==t||null==t.schema?null:t.schema.type)),D.Db(3),D.Yc("SCORED_ASSESSMENT"===(null==t||null==t.schema?null:t.schema.type)?null==t?null:t.evaluatedScore:"NA"),D.Db(2),D.Yc("SCORED_ASSESSMENT"===(null==t||null==t.schema?null:t.schema.type)?null==t?null:t.identifiedRisk:"NA"),D.Db(2),D.Yc(D.lc(12,10,null==t?null:t.assessedOn,"medium")),D.Db(3),D.Yc((null==t||null==t.careplan?null:t.careplan.name)||"N/A")}}let Sh=(()=>{class t{constructor(t,e){this._activatedRoute=t,this._formsService=e,this.patientId=this._activatedRoute.snapshot.params.id,this.forms=[]}ngOnInit(){this.getAssessedFormsForPatients()}getAssessedFormsForPatients(t=0){this._formsService.getPatientEvalForms(this.patientId,t,10).subscribe(t=>{var e,n,i,a;this.forms=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.answers)||void 0===n?void 0:n.obj,this.count=null===(a=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.answers)||void 0===a?void 0:a.total})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.a),D.Rb(gn.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-assessed-forms"]],inputs:{patientInfo:"patientInfo"},decls:26,vars:22,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],[3,"nzData","nzTotal"],["formsTable",""],[3,"routerLink",4,"ngFor","ngForOf"],[3,"patientInfo"],[3,"routerLink"],["nz-tooltip","",3,"nzTooltipTitle"]],template:function(t,e){if(1&t&&(D.Xb(0,"div",0),D.Vc(1,mh,1,1,"app-patient-status-notification",1),D.Xb(2,"nz-table",2,3),D.Xb(4,"thead"),D.Xb(5,"tr"),D.Xb(6,"th"),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Xb(9,"th"),D.Xc(10),D.jc(11,"translate"),D.Wb(),D.Xb(12,"th"),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Xb(15,"th"),D.Xc(16),D.jc(17,"translate"),D.Wb(),D.Xb(18,"th"),D.Xc(19),D.jc(20,"translate"),D.Wb(),D.Xb(21,"th"),D.Xc(22),D.jc(23,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(24,"tbody"),D.Vc(25,vh,15,13,"tr",4),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(3);D.Db(1),D.rc("ngIf","NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("nzData",e.forms)("nzTotal",e.count),D.Db(5),D.Yc(D.kc(8,10,"COMMON.NAME")),D.Db(3),D.Yc(D.kc(11,12,"PURPOSE")),D.Db(3),D.Yc(D.kc(14,14,"SCORE")),D.Db(3),D.Yc(D.kc(17,16,"RISK_CATEGORY")),D.Db(3),D.Yc(D.kc(20,18,"COMMON.DATE")),D.Db(3),D.Yc(D.kc(23,20,"CARE_PLAN")),D.Db(3),D.rc("ngForOf",null==t?null:t.data)}},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p,eb.a,b.h,fi.d],pipes:[Vt.a,c.A,c.e],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),t})();function Ih(t,e){if(1&t&&D.Sb(0,"app-patient-status-notification",5),2&t){const t=D.ic();D.rc("patientInfo",t.patientInfo)}}function Dh(t,e){if(1&t&&(D.Xb(0,"tr",6),D.Xb(1,"td",7),D.Xc(2),D.Wb(),D.Xb(3,"td"),D.Xc(4),D.jc(5,"titlecase"),D.Wb(),D.Xb(6,"td"),D.Xc(7),D.Wb(),D.Xb(8,"td"),D.Xc(9),D.Wb(),D.Xb(10,"td"),D.Xc(11),D.jc(12,"date"),D.Wb(),D.Wb()),2&t){const t=e.$implicit;D.tc("routerLink","/form/directevalforms/view/",null==t?null:t._id,""),D.Db(1),D.sc("nzTooltipTitle",null==t||null==t.schema?null:t.schema.description),D.Db(1),D.Zc(" ",null==t||null==t.schema?null:t.schema.title," "),D.Db(2),D.Yc("SCORED_ASSESSMENT"===(null==t||null==t.schema?null:t.schema.type)?"Scored Assessment":D.kc(5,7,null==t||null==t.schema?null:t.schema.type)),D.Db(3),D.Yc("SCORED_ASSESSMENT"===(null==t||null==t.schema?null:t.schema.type)?null==t?null:t.evaluatedScore:"NA"),D.Db(2),D.Yc("SCORED_ASSESSMENT"===(null==t||null==t.schema?null:t.schema.type)?null==t?null:t.identifiedRisk:"NA"),D.Db(2),D.Yc(D.lc(12,9,null==t?null:t.assessedOn,"medium"))}}let Ch=(()=>{class t{constructor(t,e){this._activatedRoute=t,this._formsService=e,this.patientId=this._activatedRoute.snapshot.params.id,this.forms=[]}ngOnInit(){this.getDirectFormsForPatients()}getDirectFormsForPatients(t=0){this._formsService.getPatientDirectForms(this.patientId,t,10).subscribe(t=>{var e,n,i,a;this.forms=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.answers)||void 0===n?void 0:n.obj,this.count=null===(a=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.answers)||void 0===a?void 0:a.total})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.a),D.Rb(gn.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-direct-forms"]],inputs:{patientInfo:"patientInfo"},decls:23,vars:19,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],[3,"nzData","nzTotal"],["formsTable",""],[3,"routerLink",4,"ngFor","ngForOf"],[3,"patientInfo"],[3,"routerLink"],["nz-tooltip","",3,"nzTooltipTitle"]],template:function(t,e){if(1&t&&(D.Xb(0,"div",0),D.Vc(1,Ih,1,1,"app-patient-status-notification",1),D.Xb(2,"nz-table",2,3),D.Xb(4,"thead"),D.Xb(5,"tr"),D.Xb(6,"th"),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Xb(9,"th"),D.Xc(10),D.jc(11,"translate"),D.Wb(),D.Xb(12,"th"),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Xb(15,"th"),D.Xc(16),D.jc(17,"translate"),D.Wb(),D.Xb(18,"th"),D.Xc(19),D.jc(20,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(21,"tbody"),D.Vc(22,Dh,13,12,"tr",4),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(3);D.Db(1),D.rc("ngIf","NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)),D.Db(1),D.rc("nzData",e.forms)("nzTotal",e.count),D.Db(5),D.Yc(D.kc(8,9,"COMMON.NAME")),D.Db(3),D.Yc(D.kc(11,11,"PURPOSE")),D.Db(3),D.Yc(D.kc(14,13,"SCORE")),D.Db(3),D.Yc(D.kc(17,15,"RISK_CATEGORY")),D.Db(3),D.Yc(D.kc(20,17,"COMMON.DATE")),D.Db(3),D.rc("ngForOf",null==t?null:t.data)}},directives:[c.q,Y.f,Y.n,Y.o,Y.e,Y.l,Y.i,c.p,eb.a,b.h,fi.d],pipes:[Vt.a,c.A,c.e],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),t})();var Xh=n("HStR"),Eh=n("3+Kf");function Th(t,e){if(1&t){const t=D.Yb();D.Vb(0,7),D.Xb(1,"button",8),D.ec("click",function(){return D.Lc(t),D.ic(3).validateProfileReadiness()}),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Ub()}2&t&&(D.Db(2),D.Zc(" + ",D.kc(3,1,"COMMON.CREATE_EPISODE")," "))}function zh(t,e){if(1&t){const t=D.Yb();D.Vb(0,7),D.Xb(1,"button",8),D.ec("click",function(){return D.Lc(t),D.ic(3).isPhysicianAssignerVisible=!0}),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Ub()}2&t&&(D.Db(2),D.Zc(" ",D.kc(3,1,"COMMON.CREATE_EPISODE")," "))}function _h(t,e){if(1&t&&(D.Vb(0),D.Vc(1,Th,4,3,"ng-container",6),D.Vc(2,zh,4,3,"ng-container",6),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngIf",null==t.patientInfo||null==t.patientInfo.assignedStaff?null:t.patientInfo.assignedStaff.length),D.Db(1),D.rc("ngIf","TENANT_ADMIN"===t.loggedInUserAccountType&&"DISCHARGED"===(null==t.patientInfo?null:t.patientInfo.patientStatus)&&!(null!=t.patientInfo&&null!=t.patientInfo.assignedStaff&&t.patientInfo.assignedStaff.length))}}function yh(t,e){if(1&t&&(D.Vb(0),D.Vc(1,_h,3,2,"ng-container",5),D.Ub()),2&t){const t=D.ic();D.Db(1),D.rc("ngIf",null==t.enabledEpisodeBlueprints?null:t.enabledEpisodeBlueprints.length)}}const Oh=function(){return["."]};function Mh(t,e){1&t&&(D.Xb(0,"a",15),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.rc("routerLink",D.xc(4,Oh)),D.Db(1),D.Zc(" ",D.kc(2,2,"COMMON.INFORMATION")," "))}function Ah(t,e){if(1&t){const t=D.Yb();D.Xb(0,"app-patient-information",16),D.ec("refresh",function(e){return D.Lc(t),D.ic(2).onRefresh(e)}),D.Wb()}if(2&t){const t=D.ic(2);D.rc("patientInfo",t.patientInfo)}}const Ph=function(){return{tab:"alerts"}};function Nh(t,e){1&t&&(D.Xb(0,"a",17),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.rc("routerLink",D.xc(5,Oh))("queryParams",D.xc(6,Ph)),D.Db(1),D.Zc(" ",D.kc(2,3,"COMMON.ALERTS")," "))}const Wh=function(){return{tab:"episodes"}};function Rh(t,e){1&t&&(D.Xb(0,"a",17),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.rc("routerLink",D.xc(5,Oh))("queryParams",D.xc(6,Wh)),D.Db(1),D.Zc(" ",D.kc(2,3,"COMMON.EPISODES")," "))}function xh(t,e){if(1&t&&(D.Xb(0,"nz-tab"),D.Vc(1,Rh,3,7,"a",13),D.Sb(2,"app-episodes",18),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.rc("patientInfo",t.patientInfo)("episodeBlueprints",t.enabledEpisodeBlueprints)}}const wh=function(){return{tab:"forms"}};function Vh(t,e){1&t&&(D.Xb(0,"a",17),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.rc("routerLink",D.xc(5,Oh))("queryParams",D.xc(6,wh)),D.Db(1),D.Zc(" ",D.kc(2,3,"COMMON.FORMS")," "))}function Lh(t,e){if(1&t&&(D.Xb(0,"nz-tab"),D.Vc(1,Vh,3,7,"a",13),D.Sb(2,"app-assessed-forms",14),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.rc("patientInfo",t.patientInfo)}}const kh=function(){return{tab:"direct-forms"}};function Fh(t,e){1&t&&(D.Xb(0,"a",17),D.Xc(1),D.jc(2,"translate"),D.Wb()),2&t&&(D.rc("routerLink",D.xc(5,Oh))("queryParams",D.xc(6,kh)),D.Db(1),D.Zc(" ",D.kc(2,3,"COMMON.DIRECT_FORMS")," "))}function Uh(t,e){if(1&t&&(D.Xb(0,"nz-tab"),D.Vc(1,Fh,3,7,"a",13),D.Sb(2,"app-direct-forms",14),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.rc("patientInfo",t.patientInfo)}}const jh=function(){return{tab:"visits"}};function Yh(t,e){1&t&&(D.Xb(0,"a",17),D.Xc(1," Visits "),D.Wb()),2&t&&D.rc("routerLink",D.xc(2,Oh))("queryParams",D.xc(3,jh))}function Bh(t,e){if(1&t&&(D.Xb(0,"nz-tab"),D.Vc(1,Yh,2,4,"a",13),D.Sb(2,"app-visits",19),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.rc("patientInfo",t.patientInfo)("patientId",null==t.patientInfo?null:t.patientInfo.id)}}const Hh=function(){return{tab:"encounters"}};function Gh(t,e){1&t&&(D.Xb(0,"a",17),D.Xc(1," Encounters "),D.Wb()),2&t&&D.rc("routerLink",D.xc(2,Oh))("queryParams",D.xc(3,Hh))}function $h(t,e){if(1&t&&(D.Xb(0,"nz-tab"),D.Vc(1,Gh,2,4,"a",13),D.Sb(2,"app-encounters",19),D.Wb()),2&t){const t=D.ic(2);D.Db(2),D.rc("patientInfo",t.patientInfo)("patientId",null==t.patientInfo?null:t.patientInfo.id)}}function Zh(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-tabset",9),D.ec("nzSelectedIndexChange",function(e){return D.Lc(t),D.ic().onTabChange(e)}),D.Xb(1,"nz-tab"),D.Vc(2,Mh,3,5,"a",10),D.Vc(3,Ah,1,1,"app-patient-information",11),D.Wb(),D.Xb(4,"nz-tab",12),D.Vc(5,Nh,3,7,"a",13),D.Sb(6,"app-alert-notifications",14),D.Wb(),D.Vc(7,xh,3,2,"nz-tab",5),D.Vc(8,Lh,3,1,"nz-tab",5),D.Vc(9,Uh,3,1,"nz-tab",5),D.Vc(10,Bh,3,2,"nz-tab",5),D.Vc(11,$h,3,2,"nz-tab",5),D.Wb()}if(2&t){const t=D.ic();D.Db(3),D.rc("ngIf",!t.loadComponent),D.Db(1),D.rc("nzDisabled",!t.showNotificationTab),D.Db(2),D.rc("patientInfo",t.patientInfo),D.Db(1),D.rc("ngIf",!(null==t.enabledEpisodeBlueprints||!t.enabledEpisodeBlueprints.length)),D.Db(1),D.rc("ngIf",null==t.tenantConfig||null==t.tenantConfig.featureConfigs?null:t.tenantConfig.featureConfigs.formsEnabled),D.Db(1),D.rc("ngIf",null==t.tenantConfig||null==t.tenantConfig.featureConfigs?null:t.tenantConfig.featureConfigs.formsEnabled),D.Db(1),D.rc("ngIf",!t.loading),D.Db(1),D.rc("ngIf",!t.loading)}}const qh=function(){return{role:"PHYSICIAN"}};function Kh(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"h3",20),D.Xc(2,"Create episode"),D.Wb(),D.Xb(3,"p"),D.Xc(4," Assign "),D.Xb(5,"strong"),D.Xc(6),D.jc(7,"titlecase"),D.Wb(),D.Xc(8," to a physician and a monitoring staff before proceeding to create an episode. "),D.Wb(),D.Xb(9,"div",21),D.Xb(10,"div",22),D.Xb(11,"button",23),D.ec("click",function(){return D.Lc(t),D.ic().isPhysicianAssignerVisible=!1}),D.Xc(12,"Cancel"),D.Wb(),D.Wb(),D.Xb(13,"div",24),D.Xb(14,"button",25),D.ec("click",function(){return D.Lc(t),D.ic().isPhysicianAssignerVisible=!1}),D.Xc(15,"Okay"),D.Wb(),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(6),D.Yc(D.kc(7,3,null==t.patientInfo?null:t.patientInfo.fullName)),D.Db(8),D.tc("routerLink","/patient/assign/physician/",null==t.patientInfo?null:t.patientInfo.id,""),D.rc("queryParams",D.xc(5,qh))}}const Qh=function(){return["ADD_EPISODE"]};let Jh=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r){super(),this._router=t,this._patientsService=e,this._modalService=n,this._dataSharingService=i,this._vitalBlueprintsService=a,this._patientsEventLogger=s,this._patientViewModalService=o,this._activatedRoute=l,this._alertModalService=r,this.showNotificationTab=!0,this.isTenantAdmin=!1,this.tab=new Map([[0,"INFO"],[1,"ALERTS"],[2,"ALERT_RULES"],[3,"EPISODES"],[4,"FORMS"],[5,"DIRECT_FORMS"]]),this.level=Gb.c.PATIENT_LEVEL,this.loading=!1,this.onRefresh=t=>this.getPatientInformation(),this.showNotificationTab=!0,this.patientId=this._activatedRoute.snapshot.params.id,this.loggedInUserRole=localStorage.getItem("loggedInUserRole"),this.isTenantAdmin=this.loggedInUserRole==M.a.TENANT_ADMIN,this._dataSharingService.tenantSettings.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n;this.tenantConfig=t,this.showNotificationTab=null===(e=null==t?void 0:t.vitalConfig)||void 0===e?void 0:e.enabled,this.enabledEpisodeBlueprints=[],null===(n=null==t?void 0:t.episodeBlueprints)||void 0===n||n.forEach(t=>{(null==t?void 0:t.archived)||this.enabledEpisodeBlueprints.push(t)})}),this.getAllVitalBlueprints(),this.loggedInUserAccountType=localStorage.getItem("loggedInUserAccountType")}ngOnInit(){this.getPatientInformation()}onTabChange(t){this.showAlertRuleCreateButton="ALERT_RULES"==this.tab.get(t)}getPatientInformation(){this.loading=!0,this.loadComponent=!0,this._patientsService.fetchPatientById(this.patientId).subscribe(t=>{this.loading=!1,this.patientInfo=t,this.loadComponent=!1,localStorage.setItem(Fe.a.REQUEST_TENANT_TEMP_IDS,this.patientInfo.tenantId)})}getAllVitalBlueprints(){this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(t=>{this.vitalBlueprints=t})}redirectToStaffAssigner(){var t,e,n,i;Array.from(this.patientInfo.physicianStaffs.primaryStaff.values()).length?(this._router.navigate([`/patient/assign-staff/${null===(t=this.patientInfo)||void 0===t?void 0:t.id}/${null===(e=this.patientInfo)||void 0===e?void 0:e.locationId}/${null===(n=this.patientInfo)||void 0===n?void 0:n.fullName}`]),this._patientsEventLogger.patientActionEvent(null===(i=this.informationComponent)||void 0===i?void 0:i.patientId,"assign_staff_click")):this._modalService.create({nzContent:Ic,nzComponentParams:{patientInfo:this.patientInfo},nzFooter:null,nzMaskClosable:!1})}showCarePlanTemplates(){var t,e;this._modalService.create({nzContent:ob.a,nzComponentParams:{patientId:this.patientId,tenantId:null===(e=null===(t=this.informationComponent)||void 0===t?void 0:t.patientInfo)||void 0===e?void 0:e.tenantId},nzFooter:null})}validateProfileReadiness(){this._router.navigate([],{queryParams:{tab:"episodes"},queryParamsHandling:"merge"}),this._patientViewModalService.showProfileReadinessModal()}createAlert(){this._alertModalService.showAlertRuleCreateModal(this.level,this.patientId,"ADD")}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(g.a),D.Rb(C.f),D.Rb(Oe.a),D.Rb(Hb.a),D.Rb(v.a),D.Rb(zr.a),D.Rb(b.a),D.Rb($b.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-view"]],viewQuery:function(t,e){if(1&t&&D.ed(Bb,1),2&t){let t;D.Hc(t=D.fc())&&(e.informationComponent=t.first)}},features:[D.Ab],decls:7,vars:14,consts:[["isSecondaryActionEnabled","'TENANT_ADMIN' === loggedInUserAccountType && patientInfo?.patientStatus !== 'DISCHARGED' && patientInfo?.patientStatus !== 'NOT_ONBOARDED'",3,"defaultTitle","isSearchEnabled","isActionEnabled","actionTitle","secondaryActionTitle","action","secondaryAction"],[4,"isFeaturePermitted"],["nzLinkRouter","",3,"nzSelectedIndexChange",4,"ngIf"],["nzWidth","450px",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[4,"ngIf"],["extra","",4,"ngIf"],["extra",""],["nz-button","","nzType","primary",3,"click"],["nzLinkRouter","",3,"nzSelectedIndexChange"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],[3,"patientInfo","refresh",4,"ngIf"],[3,"nzDisabled"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],[3,"patientInfo"],["nz-tab-link","",3,"routerLink"],[3,"patientInfo","refresh"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],[3,"patientInfo","episodeBlueprints"],[3,"patientInfo","patientId"],["nz-typography",""],["nz-row","","nzGutter","32","nzJustify","end"],["nz-col","","nzSpan","8","nzOffset","8"],["nz-button","",1,"assigner",3,"click"],["nz-col","","nzSpan","8"],["nz-button","","nzType","primary",1,"assigner",3,"routerLink","queryParams","click"]],template:function(t,e){1&t&&(D.Xb(0,"app-header",0),D.ec("action",function(){return e.showCarePlanTemplates()})("secondaryAction",function(){return e.redirectToStaffAssigner()}),D.jc(1,"translate"),D.jc(2,"translate"),D.Vc(3,yh,2,1,"ng-container",1),D.Wb(),D.Vc(4,Zh,12,8,"nz-tabset",2),D.Xb(5,"nz-modal",3),D.ec("nzVisibleChange",function(t){return e.isPhysicianAssignerVisible=t})("nzOnCancel",function(){return e.isPhysicianAssignerVisible=!1}),D.Vc(6,Kh,16,6,"ng-container",4),D.Wb()),2&t&&(D.sc("defaultTitle",null==e.informationComponent||null==e.informationComponent.patientInfo?null:e.informationComponent.patientInfo.fullName),D.sc("actionTitle",D.kc(1,9,"CAREPLAN.ASSIGN_CAREPLAN")),D.tc("secondaryActionTitle","+ ",D.kc(2,11,"COMMON.ASSIGNADMIN"),""),D.rc("isSearchEnabled",!1)("isActionEnabled",!(null!=e.enabledEpisodeBlueprints&&e.enabledEpisodeBlueprints.length)),D.Db(3),D.rc("isFeaturePermitted",D.xc(13,Qh)),D.Db(1),D.rc("ngIf",e.tenantConfig),D.Db(1),D.rc("nzVisible",e.isPhysicianAssignerVisible)("nzFooter",null))},directives:[P.a,Ye.a,c.q,C.a,C.b,X.a,E.a,T.a,j.d,j.a,j.c,Sp,j.b,b.j,Bb,fh,Sh,Ch,Xh.a,Eh.a,V.a,k.c,k.a,b.h],pipes:[Vt.a,c.A],styles:["a[_ngcontent-%COMP%]{color:unset}h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b;margin-bottom:15px}.assigner[_ngcontent-%COMP%]{width:100%;margin-top:10px}[_nghost-%COMP%]     .ant-affix{bottom:0!important;width:auto}[_nghost-%COMP%]     .ant-tabs{height:100%}.quick-action[_ngcontent-%COMP%]{padding:20px;height:100px;background:var(--neutral-color);width:100%;bottom:0;cursor:pointer}.icon-btn[_ngcontent-%COMP%], .quick-action[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-btn[_ngcontent-%COMP%]{width:50px;height:50px;background:#e9e9e9;border-radius:50%;flex-direction:column;margin:10px}.app-icon[_ngcontent-%COMP%]{margin-top:30%;margin-right:0}.right-btn[_ngcontent-%COMP%]{font-size:12px;margin-left:6px;color:var(--primary-color)}.create-alert-span[_ngcontent-%COMP%]{width:200px;display:flex;align-items:center}"]}),t})();function tg(t,e){1&t&&(D.Vb(0),D.Xc(1,", "),D.Ub())}function eg(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xc(1),D.jc(2,"titlecase"),D.jc(3,"userLocation"),D.Vc(4,tg,2,0,"ng-container",5),D.Wb()),2&t){const t=e.$implicit,n=e.index,i=D.ic(3);D.Db(1),D.Zc(" ",D.kc(2,2,D.kc(3,4,null==t?null:t.id)),""),D.Db(3),D.rc("ngIf",n!==(null==i.patient||null==i.patient.locations?null:i.patient.locations.length)-1)}}function ng(t,e){if(1&t&&(D.Vb(0),D.Xc(1," You can assign the patient to any "),D.Xb(2,"strong"),D.Xc(3,"One"),D.Wb(),D.Xc(4," physician from the "),D.Vc(5,eg,5,6,"strong",11),D.Xc(6," sites. "),D.Ub()),2&t){const t=D.ic(2);D.Db(5),D.rc("ngForOf",null==t.patient?null:t.patient.locations)}}function ig(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",12),D.ec("click",function(e){return D.Lc(t),D.ic(2).filterPhysicians(e)}),D.Sb(1,"app-icons",13),D.Wb()}2&t&&(D.Db(1),D.rc("originalStyle",!0))}function ag(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-empty",14),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("nzNotFoundContent",t.searchKey?"No physicians available matching your search":"No physicians found")}}function sg(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" 0",(null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0," ")}}function og(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount," ")}}function lg(t,e){1&t&&(D.Vb(0),D.Xc(1," Active Patient "),D.Ub())}function rg(t,e){1&t&&(D.Vb(0),D.Xc(1),D.jc(2,"translate"),D.Ub()),2&t&&(D.Db(1),D.Zc(" Active ",D.kc(2,1,"COMMON.PATIENTS")," "))}function cg(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" 0",(null==t||null==t.assignedStaff?null:t.assignedStaff.length)||0," ")}}function dg(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=D.ic().$implicit;D.Db(1),D.Zc(" ",null==t||null==t.assignedStaff?null:t.assignedStaff.length," ")}}const bg=function(t){return{border:t}},ug=function(t){return[t]};function pg(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",15),D.Xb(2,"div",16),D.Xb(3,"div",17),D.Xb(4,"label",18),D.ec("ngModelChange",function(t){return e.$implicit.selected=t})("ngModelChange",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).deselectAllPhysicians(null==n?null:n.id)}),D.Wb(),D.Wb(),D.Wb(),D.Xb(5,"h5",19),D.Xb(6,"strong",20),D.Xc(7),D.Wb(),D.Wb(),D.Xb(8,"h5",21),D.jc(9,"userLocations"),D.Xc(10),D.jc(11,"userLocations"),D.Wb(),D.Xb(12,"div",22),D.Xb(13,"div",23),D.Xb(14,"span",24),D.Vc(15,sg,2,1,"ng-container",5),D.Vc(16,og,2,1,"ng-container",5),D.Wb(),D.Xb(17,"span",25),D.Vc(18,lg,2,0,"ng-container",5),D.Vc(19,rg,3,3,"ng-container",5),D.Wb(),D.Wb(),D.Xb(20,"div",23),D.Xb(21,"span",24),D.Vc(22,cg,2,1,"ng-container",5),D.Vc(23,dg,2,1,"ng-container",5),D.Wb(),D.Xb(24,"span",25),D.Xc(25," Monitoring Staff "),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit,n=D.ic(2);D.Db(1),D.rc("ngClass",null!=t&&t.assigned?"assigned shadowed":"")("ngStyle",D.yc(25,bg,null!=t&&t.selected?"2px solid #a7c853":"2px solid #ffffff")),D.Db(3),D.rc("nzDisabled",n.physicianAlreadyAssigned)("ngModel",t.selected)("nzValue",t.id),D.Db(1),D.rc("nzTooltipTitle",(null==t?null:t.fullName)||"N/A"),D.Db(1),D.rc("ngClass",D.yc(27,ug,null!=t&&t.assigned?"assigned":"")),D.Db(1),D.Zc(" ",null==t?null:t.fullName," "),D.Db(1),D.sc("nzTooltipTitle",D.kc(9,21,null==t?null:t.locations)),D.rc("ngClass",D.yc(29,ug,null!=t&&t.assigned?"assigned":"")),D.Db(2),D.Zc(" ",D.kc(11,23,null==t?null:t.locations)," "),D.Db(4),D.rc("ngClass",D.yc(31,ug,null!=t&&t.assigned?"assigned":"")),D.Db(1),D.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)<10),D.Db(1),D.rc("ngIf",((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)>=10),D.Db(1),D.rc("ngClass",D.yc(33,ug,null!=t&&t.assigned?"assigned":"")),D.Db(1),D.rc("ngIf",1===((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)),D.Db(1),D.rc("ngIf",1!==((null==t||null==t.clinicianState?null:t.clinicianState.assignedPatientCount)||0)),D.Db(2),D.rc("ngClass",D.yc(35,ug,null!=t&&t.assigned?"assigned":"")),D.Db(1),D.rc("ngIf",((null==t||null==t.assignedStaff?null:t.assignedStaff.length)||0)<10),D.Db(1),D.rc("ngIf",((null==t||null==t.assignedStaff?null:t.assignedStaff.length)||0)>=10),D.Db(1),D.rc("ngClass",D.yc(37,ug,null!=t&&t.assigned?"assigned":""))}}function hg(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",1),D.Xb(1,"div",2),D.Xb(2,"div",3),D.Xb(3,"h4",4),D.Xc(4),D.jc(5,"titlecase"),D.Wb(),D.Xb(6,"p",4),D.Xc(7),D.jc(8,"titlecase"),D.Sb(9,"br"),D.Sb(10,"br"),D.Vc(11,ng,7,1,"ng-container",5),D.Wb(),D.Wb(),D.Xb(12,"div",6),D.Xb(13,"nz-input-group",7),D.Xb(14,"input",8),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().searchKey=e})("ngModelChange",function(e){return D.Lc(t),D.ic().filterPhysicians(e)}),D.jc(15,"translate"),D.Wb(),D.Wb(),D.Vc(16,ig,2,1,"ng-template",null,9,D.Wc),D.Wb(),D.Wb(),D.Xb(18,"div",10),D.Vc(19,ag,2,1,"ng-container",5),D.Vc(20,pg,26,39,"ng-container",11),D.Wb(),D.Wb()}if(2&t){const t=D.Ic(17),e=D.ic();D.Db(4),D.Zc("Assign ",D.kc(5,8,null==e.patient?null:e.patient.fullName)," to a physician"),D.Db(3),D.Zc(" Assigining ",D.kc(8,10,null==e.patient?null:e.patient.fullName)," to a physician will help the physician and their monitoring staff create relevant episodes and provide a suitable care program. "),D.Db(4),D.rc("ngIf","PHYSICIAN"!==e.loggedInUserRole),D.Db(2),D.rc("nzAddOnAfter",t),D.Db(1),D.sc("placeholder",D.kc(15,12,"COMMON.SEARCH")),D.rc("ngModel",e.searchKey),D.Db(5),D.rc("ngIf",!(null!=e.filteredPhysicians&&e.filteredPhysicians.length)),D.Db(1),D.rc("ngForOf",e.filteredPhysicians)}}let gg=(()=>{class t extends h.a{constructor(t,e,n,i,a,s){super(),this._router=t,this._staffService=e,this._patientsService=n,this._activatedRoute=i,this._dataSharingService=a,this._notificationsService=s,this.patientId=this._activatedRoute.snapshot.params.id,this.loggedInUser=localStorage.getItem("loggedInUser"),this.loggedInUserRole=localStorage.getItem("loggedInUserRole"),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(No.filter)(t=>!!t),Object(er.takeUntil)(this.unsubscribed)).subscribe(()=>this.assignPhysicians())}ngOnInit(){if(M.a.PHYSICIAN===this.loggedInUserRole){const t={};t[this.loggedInUser]=this.patientId,this.assignPhysicianToPatient(t).subscribe(()=>this.getPatientInformation())}else this.getPatientInformation();this.getTenantConfig()}getTenantConfig(){this._dataSharingService.tenantSettings.pipe(Object(No.filter)(t=>!!t),Object(er.takeUntil)(this.unsubscribed)).subscribe(t=>this.tenantConfig=t)}getPatientInformation(){this._patientsService.fetchPatientById(this.patientId).subscribe(t=>{var e;this.patient=t,this.assignedPhysicians=null===(e=this.patient)||void 0===e?void 0:e.assignedStaffIds,this.getAssignableStaff()})}checkIfStaffAssigned(){var t;null===(t=this.assignedPhysicians)||void 0===t||t.forEach(t=>{const e=this.filteredPhysicians.find(e=>e.id===t);e&&(e.selected=!0,e.assigned=!0,this.physicianAlreadyAssigned=!0)})}getAssignableStaff(){this._staffService.fetchAssignableStaffMembersById(this._activatedRoute.snapshot.params.id,M.a.PHYSICIAN,M.a.MONITORING_STAFF===this.loggedInUserRole?this.loggedInUser:void 0).subscribe(t=>{M.a.PHYSICIAN===this.loggedInUserRole&&(t=null==t?void 0:t.filter(t=>t.id===this.loggedInUser)),this.filteredPhysicians=t,this.physicians=JSON.parse(JSON.stringify(t)),this.checkIfStaffAssigned()})}deselectAllPhysicians(t){var e;null===(e=this.filteredPhysicians)||void 0===e||e.forEach(e=>{e.selected=t===(null==e?void 0:e.id)})}assignPhysicians(){var t,e;const n={};this.filteredPhysicians.filter(t=>t.selected).filter(t=>{var e,n;return(null===(e=this.assignedPhysicians)||void 0===e?void 0:e.length)||-1===(null===(n=this.assignedPhysicians)||void 0===n?void 0:n.findIndex(e=>e===t.id))}).forEach(t=>{var e;n[null==t?void 0:t.id]=null===(e=this.patient)||void 0===e?void 0:e.id}),(null===(t=Object.keys(n))||void 0===t?void 0:t.length)?this.assignPhysicianToPatient(n).subscribe(t=>{var e,n,i,a,s,o,l,r;if("EPISODE_AUTO_CREATION"===this._activatedRoute.snapshot.queryParams.context){this._notificationsService.success("Assignment",(null==t?void 0:t.message)||"Assigned");const o=localStorage.getItem("loggedInUserRole"),l=null===(n=null===(e=this.tenantConfig)||void 0===e?void 0:e.episodeBlueprints)||void 0===n?void 0:n.find(t=>"CCM"===t.type),r={context:"TENANT_ADMIN"===o?"EPISODE_AUTO_CREATION":"AUTO_CREATION",contextMode:this._activatedRoute.snapshot.queryParams.contextMode};if((null==l?void 0:l.id)&&(r.blueprintId=null==l?void 0:l.id),"TENANT_ADMIN"!==o)this._router.navigate(["episodes/form/add/",this.patientId],{queryParams:r});else{let t=`/patient/assign-staff/${null===(i=this.patient)||void 0===i?void 0:i.id}/${(null===(a=this.patient)||void 0===a?void 0:a.locationId)||null}/${null===(s=this.patient)||void 0===s?void 0:s.fullName}`;this._router.navigate([t],{queryParams:r})}return}let c=`/patient/assign-staff/${null===(o=this.patient)||void 0===o?void 0:o.id}/${(null===(l=this.patient)||void 0===l?void 0:l.locationId)||null}/${null===(r=this.patient)||void 0===r?void 0:r.fullName}`;this._router.navigate([c])}):this._notificationsService.warning("Assign Physician",`Assign ${null===(e=this.patient)||void 0===e?void 0:e.fullName} to a physician to proceed`)}assignPhysicianToPatient(t){return this._staffService.assignStaffMembers({assignmentMap:t,assignTo:M.a.PATIENT})}filterPhysicians(t){if(!t)return this.filteredPhysicians=[...this.physicians],void this.checkIfStaffAssigned();this.filteredPhysicians=this.physicians.filter(e=>{var n,i;return null===(i=null===(n=null==e?void 0:e.fullName)||void 0===n?void 0:n.toLowerCase())||void 0===i?void 0:i.includes(null==t?void 0:t.toLowerCase())}),this.checkIfStaffAssigned()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(S.a),D.Rb(g.a),D.Rb(b.a),D.Rb(Oe.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-physician-assigner"]],features:[D.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","17"],["nz-typography",""],[4,"ngIf"],["nz-col","","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-radio","",3,"nzDisabled","ngModel","nzValue","ngModelChange"],["nz-typography","","nz-tooltip","",1,"name",3,"nzTooltipTitle"],[3,"ngClass"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"]],template:function(t,e){1&t&&D.Vc(0,hg,21,14,"div",0),2&t&&D.rc("ngIf",e.patient)},directives:[c.q,k.c,k.a,V.a,T.a,je.c,je.b,d.d,d.u,d.x,c.p,X.a,E.a,ee.a,Xi.b,c.o,c.r,N.b,fi.d],pipes:[c.A,Vt.a,ir.a,ia.a],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);height:110px;-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-20px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-radio-checked .ant-radio-inner{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-radio-checked .ant-radio-inner:after{border-color:var(--primary-color);background-color:var(--primary-color)}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}[_nghost-%COMP%]     .ant-radio-disabled .ant-radio-inner:after{background-color:#d3d3d3}"]}),t})();const fg={Form:{header:!0,title:"Patient",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[Ao.a.ADD_PATIENT,Ao.a.EDIT_PATIENT],showTenantToggle:!1},PhysicianAssigner:{header:!0,title:"Patient actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[Ao.a.ASSIGN_PHYSICIAN_TO_PATIENT],showTenantToggle:!1},MonitoringStaffAssigner:{header:!0,title:"Patient actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{title:"Skip for now",permissions:[],enabled:!0},multiAction:{},privileges:[Ao.a.ASSIGN_MONITORING_STAFF_TO_PATIENT],showTenantToggle:!1},BulkUpload:{header:!0,title:"Bulk Upload",searchEnabled:!1,primaryAction:{title:"Download Template",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[Ao.a.ADD_PATIENT_NOTES],showTenantToggle:!0}};var mg=n("DEH1"),vg=n("a6m8"),Sg=n("piIK"),Ig=n("Q+ul"),Dg=n("l6l4"),Cg=n("k1hV"),Xg=n("2POn"),Eg=n("ua0i"),Tg=n("x6g7"),zg=n("bDfm"),_g=n("xYn2"),yg=n("Ti7L");function Og(t,e){1&t&&(D.Xb(0,"span"),D.Sb(1,"hr"),D.Wb())}const Mg=function(){return[32,6]};function Ag(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",15),D.Xb(2,"div",16),D.Sb(3,"app-icons",17),D.Xb(4,"span",18),D.Xb(5,"strong"),D.Xc(6),D.jc(7,"date"),D.Wb(),D.Wb(),D.Wb(),D.Xb(8,"div",16),D.Sb(9,"app-icons",19),D.Xb(10,"span",20),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Wb(),D.Xb(13,"div",16),D.Sb(14,"app-icons",21),D.Xb(15,"span",20),D.Xc(16),D.jc(17,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Xb(18,"div",22),D.Xb(19,"div",23),D.Sb(20,"app-icons",24),D.Xb(21,"span",20),D.Xb(22,"strong",18),D.Xc(23),D.jc(24,"patientCommunication"),D.Wb(),D.Sb(25,"span",25),D.Wb(),D.Vc(26,Og,2,0,"span",26),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit,n=e.index,i=D.ic(2);D.Db(1),D.rc("nzGutter",D.xc(21,Mg)),D.Db(5),D.ad("",D.lc(7,12,null==t?null:t.date,"MMM dd yyyy, hh:mm a")," ",i.standardTimeZone,""),D.Db(5),D.ad(" ",D.kc(12,15,"NOTES.ENTERED_BY"),": ",null==t?null:t.caretakerId," "),D.Db(3),D.rc("originalStyle",!0),D.Db(2),D.ad("",D.kc(17,17,"COMMON.DURATION"),": ",null==t?null:t.durationInMinutes," Minutes"),D.Db(4),D.rc("originalStyle",!0),D.Db(3),D.Zc("",D.kc(24,19,null==t?null:t.context),": "),D.Db(2),D.rc("innerHTML",null==t?null:t.notes,D.Mc),D.Db(1),D.rc("ngIf",n<(null==i.tmsDetails?null:i.tmsDetails.length)-1)}}function Pg(t,e){if(1&t&&(D.Xb(0,"div",1),D.Xb(1,"div",12),D.Xb(2,"div",13),D.Xb(3,"h3",4),D.Xc(4),D.jc(5,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Vc(6,Ag,27,22,"ng-container",14),D.Wb()),2&t){const t=D.ic();D.Db(4),D.Yc(D.kc(5,2,"COMMON.TMS_NOTES")),D.Db(2),D.rc("ngForOf",t.tmsDetails)}}function Ng(t,e){if(1&t&&D.Sb(0,"img",38),2&t){const t=D.ic(4);D.sc("nzTooltipTitle",t.tooltipContent)}}function Wg(t,e){1&t&&(D.Xb(0,"span"),D.Sb(1,"hr",39),D.Wb())}function Rg(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",30),D.Sb(2,"app-icons",31),D.Xb(3,"span",32),D.Xb(4,"strong"),D.Xc(5),D.jc(6,"date"),D.Wb(),D.Wb(),D.Sb(7,"span",33),D.Xb(8,"span",34),D.Xb(9,"strong"),D.Xc(10),D.Wb(),D.Vc(11,Ng,1,1,"img",35),D.Wb(),D.Xb(12,"div",36),D.Xb(13,"app-note-timeline-item",37),D.ec("edit",function(){D.Lc(t);const n=e.$implicit;return D.ic(3).editNote(n)}),D.Wb(),D.Wb(),D.Vc(14,Wg,2,0,"span",26),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit,n=e.index,i=D.ic(3);D.Db(5),D.ad(" ",D.lc(6,6,null==t?null:t.updatedOn,"MMM dd yyyy, hh:mm a")," ",i.standardTimeZone," "),D.Db(5),D.Yc(i.patientName),D.Db(1),D.rc("ngIf","IMPORTANT"==t.priority.level),D.Db(2),D.rc("note",t),D.Db(1),D.rc("ngIf",n<(null==i.allNotes?null:i.allNotes.length)-1)}}function xg(t,e){if(1&t&&(D.Xb(0,"div",29),D.Vc(1,Rg,15,9,"ng-container",14),D.Wb()),2&t){const t=D.ic(2);D.Db(1),D.rc("ngForOf",t.allNotes)}}function wg(t,e){1&t&&(D.Xb(0,"div"),D.Xb(1,"p"),D.Xc(2,"There are no important notes added for this patient in the specified date range."),D.Wb(),D.Wb())}function Vg(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"p",27),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Vc(4,xg,2,1,"div",28),D.Vc(5,wg,3,0,"div",26),D.Ub()),2&t){const t=D.ic();D.Db(2),D.Yc(D.kc(3,3,"COMMON.NOTES")),D.Db(2),D.rc("ngIf",t.allNotes&&t.allNotes.length>0),D.Db(1),D.rc("ngIf",t.allNotes&&0==t.allNotes.length)}}function Lg(t,e){1&t&&(D.Xb(0,"div",40),D.Xb(1,"p"),D.Xc(2,"There are no important notes added for this patient in the specified date range. To view all notes, click on 'View all notes'."),D.Wb(),D.Wb())}function kg(t,e){1&t&&(D.Xb(0,"span"),D.Sb(1,"hr"),D.Wb())}function Fg(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",42),D.Sb(2,"app-icons",43),D.Xb(3,"span",44),D.Xc(4),D.jc(5,"date"),D.Wb(),D.Sb(6,"span",33),D.Xb(7,"span",45),D.Xc(8),D.Wb(),D.Sb(9,"img",38),D.Xb(10,"div",46),D.Xb(11,"app-note-timeline-item",37),D.ec("edit",function(){D.Lc(t);const n=e.$implicit;return D.ic(2).editNote(n)}),D.Wb(),D.Wb(),D.Vc(12,kg,2,0,"span",26),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit,n=e.index,i=D.ic(2);D.Db(4),D.ad(" ",D.lc(5,6,null==t?null:t.updatedOn,"MMM dd yyyy, hh:mm a")," ",i.standardTimeZone," "),D.Db(4),D.Zc(" ",i.patientName," "),D.Db(1),D.sc("nzTooltipTitle",i.tooltipContent),D.Db(2),D.rc("note",t),D.Db(1),D.rc("ngIf",n<(null==i.importantNotes?null:i.importantNotes.length)-1)}}function Ug(t,e){if(1&t&&(D.Xb(0,"div",41),D.Vc(1,Fg,13,9,"ng-container",14),D.Wb()),2&t){const t=D.ic();D.Db(1),D.rc("ngForOf",t.importantNotes)}}const jg=function(){return{height:"530px",width:"800px"}};let Yg=(()=>{class t{constructor(t,e){this._modalService=t,this._timezoneService=e,this.refreshNotes=new D.n,this.tooltipContent="This note has been marked as important.",this.totalTMSDuration=0,this.totalAdditionalTMSDuration=0,this.totalAdditionalTMSBDuration=0,this.mode=new Map([["VIDEO_CALL","Video Call"],["CALL","Audio Call"],["HOME_VISIT","Home Visit"],["OTHER","Other"]]),this.isVisible=!1,this.standardTimeZone=this._timezoneService.getTimeZone()}get notes(){return this.allNotes}set notes(t){t&&(this.allNotes=[...t],this.importantNotes=[...this.allNotes.filter(t=>{var e;return"IMPORTANT"==(null===(e=t.priority)||void 0===e?void 0:e.level)})])}ngOnInit(){this.tmsDetails&&(this.totalTMSDuration=this.tmsDetails.filter(t=>"TMS"===t.type).map(t=>t.durationInMilliSeconds).reduce((t,e)=>t+e,0)),this.totalAdditionalTMSDuration=this.tmsDetails.filter(t=>"ADDITIONAL_TMS"===t.type).map(t=>t.durationInMilliSeconds).reduce((t,e)=>t+e,0),this.totalAdditionalTMSBDuration=this.tmsDetails.filter(t=>"ADDITIONAL_TMS_B"===t.type).map(t=>t.durationInMilliSeconds).reduce((t,e)=>t+e,0),this.totalTMSDuration=this.totalTMSDuration/6e4,this.totalAdditionalTMSDuration=this.totalAdditionalTMSDuration/6e4,this.totalAdditionalTMSBDuration=this.totalAdditionalTMSBDuration/6e4}showModal(){this.isVisible=!0}cancel(){this.isVisible=!1}editNote(t){this._modalService.create({nzContent:zg.a,nzComponentParams:{noteObject:t},nzWidth:"50%",nzClosable:!0,nzMaskClosable:!1,nzFooter:null}).afterClose.subscribe(t=>{t&&(this.isVisible=!1,this.refreshNotes.emit())})}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.f),D.Rb(pd.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-tms-vital-history"]],inputs:{tmsDetails:"tmsDetails",tmsType:"tmsType",patientName:"patientName",notes:"notes"},outputs:{refreshNotes:"refreshNotes"},decls:18,vars:13,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzSpan","24"],["nz-col","","nzFlex","1"],[1,"title"],["nz-col","","nzJustify","end","nzFlex","140px"],["nz-row","","nzJustify","end"],["nz-button","","nzType","primary",3,"nzSize","click"],["nzFooter","null","nzWidth","800px",3,"nzVisible","nzBodyStyle","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["nz-col","","nzSpan","24","class","bp-48",4,"ngIf"],["nz-col","","nzSpan","24",4,"ngIf"],["nz-row",""],["nz-col",""],[4,"ngFor","ngForOf"],["nz-row","",1,"p-9","pl-19","fw-600","sub-color",3,"nzGutter"],["nz-col","","nzSpan","7"],["name","clock","color","black","size","16px",1,"user"],[1,"date-size"],["name","user","color","black","size","16px",1,"user"],[1,"fs-14"],["name","duration","color","black","size","16px",1,"user",3,"originalStyle"],["nz-row","","nzGutter","32",1,"pl-19","fs-16","fw-600"],["nz-col","","nzSpan","18"],["name","form","color","black","size","16px",1,"user",3,"originalStyle"],[3,"innerHTML"],[4,"ngIf"],["id","notesTitle"],["style","height: 430px; overflow: auto;",4,"ngIf"],[2,"height","430px","overflow","auto"],[1,"fs-13","fw-600",2,"padding-top","8px"],["size","16px","name","clock","color","black",1,"user","m-0"],[1,"pr-19"],[1,"divider"],[1,"pl-19"],["src","../../../../assets/images/star.png","class","star","nzTooltipPlacement","rightBottom","nz-tooltip","",3,"nzTooltipTitle",4,"ngIf"],[1,"sub-color","note-content"],["hideFooter","",3,"note","edit"],["src","../../../../assets/images/star.png","nzTooltipPlacement","rightBottom","nz-tooltip","",1,"star",3,"nzTooltipTitle"],[1,"horizontal-line"],["nz-col","","nzSpan","24",1,"bp-48"],["nz-col","","nzSpan","24"],[1,"fs-16","fw-600","p-12","pb-0"],["name","clock","size","16px","color","black",1,"user","m-0"],[1,"pr-19","date-size","fs-14"],[1,"pl-19","date-size","fs-14"],[1,"notes","fs-14"]],template:function(t,e){1&t&&(D.Vc(0,Pg,7,4,"div",0),D.Sb(1,"br"),D.Xb(2,"div",1),D.Xb(3,"div",2),D.Xb(4,"div",3),D.Xb(5,"h3",4),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Wb(),D.Xb(8,"div",5),D.Xb(9,"div",6),D.Xb(10,"button",7),D.ec("click",function(){return e.showModal()}),D.Xc(11),D.jc(12,"translate"),D.Wb(),D.Wb(),D.Xb(13,"nz-modal",8),D.ec("nzVisibleChange",function(t){return e.isVisible=t})("nzOnCancel",function(){return e.cancel()}),D.Vc(14,Vg,6,5,"ng-container",9),D.Wb(),D.Wb(),D.Wb(),D.Xb(15,"div",2),D.Vc(16,Lg,3,0,"div",10),D.Vc(17,Ug,2,1,"div",11),D.Wb(),D.Wb()),2&t&&(D.rc("ngIf",e.tmsDetails&&e.tmsDetails.length>0),D.Db(6),D.Yc(D.kc(7,8,"COMMON.NOTES")),D.Db(4),D.rc("nzSize","large"),D.Db(1),D.Zc(" ",D.kc(12,10,"VIEW_ALL_NOTES")," "),D.Db(2),D.rc("nzVisible",e.isVisible)("nzBodyStyle",D.xc(12,jg)),D.Db(3),D.rc("ngIf",e.importantNotes&&0==e.importantNotes.length),D.Db(1),D.rc("ngIf",e.importantNotes&&e.importantNotes.length>0))},directives:[c.q,k.c,k.a,X.a,E.a,T.a,C.a,C.b,c.p,ee.a,_g.a,fi.d],pipes:[Vt.a,c.e,yg.a],styles:[".container[_ngcontent-%COMP%]{padding:10px 35px!important}.title[_ngcontent-%COMP%]{color:#0b2240;font-weight:900;font-family:Nunito;font-size:18px;border-left:4px solid var(--primary-color);padding-left:12px}.fs-16[_ngcontent-%COMP%]{font-size:16px}.fs-13[_ngcontent-%COMP%]{font-size:13px}.fs-14[_ngcontent-%COMP%]{font-size:14px}.p-9[_ngcontent-%COMP%]{padding:9px}.p-12[_ngcontent-%COMP%]{padding:12px}.pl-19[_ngcontent-%COMP%]{padding-left:19px}.pr-19[_ngcontent-%COMP%]{padding-right:19px}.fw-600[_ngcontent-%COMP%]{font-weight:600}.sub-color[_ngcontent-%COMP%]{color:#666}.date-size[_ngcontent-%COMP%]{color:#000;font-size:13px}.divider[_ngcontent-%COMP%]{border:1px solid #000}.notes[_ngcontent-%COMP%]{padding-top:4px;padding-left:22px}.user[_ngcontent-%COMP%]{padding-right:4px;position:relative;top:2px}.star[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:10px;margin-bottom:2px}#notesTitle[_ngcontent-%COMP%]{border-left:2px solid var(--primary-color);padding-left:10px;font:normal normal 700 16px/19px Nunito;margin-bottom:17px;margin-top:-3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1 em}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.horizontal-line[_ngcontent-%COMP%]{width:93%;margin-right:49px}.m-0[_ngcontent-%COMP%]{margin:0}.note-content[_ngcontent-%COMP%]{padding-left:23px;padding-top:8px}.bp-48[_ngcontent-%COMP%]{padding-bottom:48px}[_nghost-%COMP%]     .ant-col-18{margin-top:0}"]}),t})();var Bg=n("KAwd"),Hg=n("w0ih"),Gg=n("k90p"),$g=n("sUbP"),Zg=n("WbwM"),qg=n("+GkE"),Kg=n("rdiT"),Qg=n("Sv5b"),Jg=n("G1GC"),tf=n("1KKy"),ef=n("jWZy");function nf(t,e){1&t&&D.Sb(0,"app-icons",62)}function af(t,e){if(1&t&&(D.Xb(0,"strong",63),D.Xc(1),D.Wb()),2&t){const t=D.ic();D.Db(1),D.Zc("Showing alert raised for ",t.vitalLabel," parameter in this vital signs recording")}}function sf(t,e){if(1&t&&(D.Xb(0,"strong",63),D.Xc(1),D.Wb()),2&t){const t=D.ic();D.Db(1),D.Yc(t.alertMessage)}}function of(t,e){if(1&t&&(D.Xb(0,"nz-table",64),D.Xb(1,"tr",65),D.Xb(2,"th",66),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"th",67),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"th",67),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"th",67),D.Xc(12),D.jc(13,"vitalName"),D.Wb(),D.Wb(),D.Xb(14,"tr",68),D.Xb(15,"td",66),D.Xc(16),D.jc(17,"date"),D.Wb(),D.Xb(18,"td",67),D.Xc(19),D.jc(20,"deviceName"),D.Wb(),D.Xb(21,"td",67),D.Xc(22),D.Wb(),D.Xb(23,"td",69),D.Xc(24),D.Wb(),D.Wb(),D.Sb(25,"br"),D.Wb()),2&t){const t=D.ic();D.Db(2),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(4,17,"PARAMETERS.MEASUREDON")," "),D.Db(2),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(7,19,"COMMON.MEASURED_WITH")," "),D.Db(2),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(10,21,"COMMON.PLATFORM")," "),D.Db(2),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(13,23,t.alertParameterName)," "),D.Db(3),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-body-grey":"table-body-white"),D.Db(1),D.ad(" ",D.lc(17,25,(null==t.alertData?null:t.alertData.takenAt)+"Z","MMM dd yyyy, hh:mm a")," ",t.standardTimeZone," "),D.Db(2),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.kc(20,28,null==t.alertData?null:t.alertData.deviceType)," "),D.Db(2),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",null==t.alertData?null:t.alertData.platform," "),D.Db(1),D.rc("ngClass",null!=t.alert&&t.alert.closed?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",t.alertParameterValue," ")}}function lf(t,e){if(1&t&&(D.Xb(0,"tr",68),D.Xb(1,"td",66),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Xb(4,"td",67),D.Xc(5),D.jc(6,"deviceName"),D.Wb(),D.Xb(7,"td",67),D.Xc(8),D.Wb(),D.Xb(9,"td",69),D.Xc(10),D.Wb(),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(1),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.lc(3,8,(null==t||null==t.alertContext?null:t.alertContext.takenOn)+"Z","MMM dd yyyy, hh:mm a")," "),D.Db(2),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.kc(6,11,null==t||null==t.alertContext?null:t.alertContext.deviceType)," "),D.Db(2),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",null==t||null==t.alertContext?null:t.alertContext.platform," "),D.Db(1),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",n.getAlertParamDetail(t,null==t?null:t.alertContext)," ")}}function rf(t,e){if(1&t&&(D.Xb(0,"nz-table",64),D.Xb(1,"tr",65),D.Xb(2,"th",66),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"th",67),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"th",67),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"th",67),D.Xc(12),D.jc(13,"vitalName"),D.Wb(),D.Wb(),D.Vc(14,lf,11,13,"tr",70),D.Sb(15,"br"),D.Wb()),2&t){const t=D.ic();D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(4,9,"PARAMETERS.MEASUREDON")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(7,11,"COMMON.MEASURED_WITH")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(10,13,"COMMON.PLATFORM")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(13,15,t.alertParameterName)," "),D.Db(2),D.rc("ngForOf",null==t.prioritisedAlert?null:t.prioritisedAlert.linkedAlerts)}}function cf(t,e){if(1&t&&(D.Xb(0,"tr",68),D.Xb(1,"td",66),D.Xc(2),D.jc(3,"date"),D.Wb(),D.Xb(4,"td",67),D.Xc(5),D.jc(6,"deviceName"),D.Wb(),D.Xb(7,"td",67),D.Xc(8),D.Wb(),D.Xb(9,"td",69),D.Xc(10),D.Wb(),D.Wb()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(1),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.lc(3,8,(null==t||null==t.alertContext?null:t.alertContext.takenOn)+"Z","MMM dd yyyy, hh:mm a")," "),D.Db(2),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.kc(6,11,null==t||null==t.alertContext?null:t.alertContext.deviceType)," "),D.Db(2),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",null==t||null==t.alertContext?null:t.alertContext.platform," "),D.Db(1),D.rc("ngClass","CLOSED"==n.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",n.getAlertParamDetail(t,null==t?null:t.alertContext)," ")}}const df=function(){return{top:"65px",left:"200px",position:"absolute"}};function bf(t,e){if(1&t&&(D.Xb(0,"nz-table",71),D.Xb(1,"tr",65),D.Xb(2,"th",66),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"th",67),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"th",67),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"th",67),D.Xc(12),D.jc(13,"vitalName"),D.Wb(),D.Wb(),D.Vc(14,cf,11,13,"tr",70),D.Sb(15,"br"),D.Wb()),2&t){const t=D.ic();D.rc("position",D.xc(18,df)),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(4,10,"PARAMETERS.MEASUREDON")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(7,12,"COMMON.MEASURED_WITH")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(10,14,"COMMON.PLATFORM")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(13,16,t.alertParameterName)," "),D.Db(2),D.rc("ngForOf",null==t.prioritisedAlert?null:t.prioritisedAlert.linkedAlerts)}}function uf(t,e){if(1&t&&(D.Xb(0,"nz-table",71),D.Xb(1,"tr",65),D.Xb(2,"th",66),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"th",67),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"th",67),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Xb(11,"th",67),D.Xc(12),D.jc(13,"vitalName"),D.Wb(),D.Wb(),D.Xb(14,"tr",68),D.Xb(15,"td",66),D.Xc(16),D.jc(17,"date"),D.Wb(),D.Xb(18,"td",67),D.Xc(19),D.jc(20,"deviceName"),D.Wb(),D.Xb(21,"td",67),D.Xc(22),D.Wb(),D.Xb(23,"td",69),D.Xc(24),D.Wb(),D.Wb(),D.Sb(25,"br"),D.Wb()),2&t){const t=D.ic();D.rc("position",D.xc(30,df)),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(4,17,"PARAMETERS.MEASUREDON")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(7,19,"COMMON.MEASURED_WITH")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(10,21,"COMMON.PLATFORM")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(13,23,t.alertParameterName)," "),D.Db(3),D.rc("ngClass","CLOSED"==t.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.lc(17,25,(null==t.alertData?null:t.alertData.takenOn)+"Z","MMM dd yyyy, hh:mm a")," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.kc(20,28,null==t.alertData?null:t.alertData.deviceType)," "),D.Db(2),D.rc("ngClass","CLOSED"==t.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",null==t.alertData?null:t.alertData.platform," "),D.Db(1),D.rc("ngClass","CLOSED"==t.status?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",t.alertParameterValue," ")}}function pf(t,e){if(1&t&&(D.Xb(0,"div",72),D.Xb(1,"h2",73),D.Xb(2,"strong"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"span",74),D.Xc(6),D.jc(7,"date"),D.jc(8,"date"),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.ic();D.Db(3),D.ad("",t.vitalLabel," ",D.kc(4,4,"COMMON.TREND_REPORT"),""),D.Db(3),D.ad("(",D.lc(7,6,t.dateRange[0],"mediumDate")," - ",D.lc(8,9,t.dateRange[1],"mediumDate"),")")}}function hf(t,e){if(1&t&&(D.Xb(0,"div",72),D.Xb(1,"h2",73),D.Xb(2,"strong"),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Wb(),D.Xb(5,"h4",75),D.Xc(6),D.jc(7,"date"),D.jc(8,"date"),D.Wb(),D.Wb()),2&t){const t=D.ic();D.Db(3),D.ad("",t.vitalLabel," ",D.kc(4,4,"COMMON.TREND_REPORT"),""),D.Db(3),D.ad(" (",D.lc(7,6,t.dateRange[0],"mediumDate")," - ",D.lc(8,9,t.dateRange[1],"mediumDate"),") ")}}function gf(t,e){1&t&&(D.Xb(0,"div",72),D.Xb(1,"h2",76),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Zc("",D.kc(3,1,"COMMON_SELECT_VITAL_SIGN"),":"))}function ff(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-option",78),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",null==t?null:t.type)("nzLabel",null==t?null:t.label)}}function mf(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",72),D.Xb(1,"nz-select",77),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().vitalType=e})("ngModelChange",function(e){return D.Lc(t),D.ic().refresh(e)}),D.Vc(2,ff,2,2,"ng-container",38),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(1),D.rc("ngModel",t.vitalType),D.Db(1),D.rc("ngForOf",t.vitalBlueprints)}}function vf(t,e){1&t&&(D.Xb(0,"div",24),D.Xb(1,"h2",76),D.Xc(2,"Context:"),D.Wb(),D.Wb())}function Sf(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-option",78),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",t.label)("nzLabel",null==t?null:t.label)}}function If(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div",72),D.Xb(1,"nz-select",79),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().selectedContext=e})("ngModelChange",function(e){return D.Lc(t),D.ic().populateGraphWithContextData(null,e)}),D.Vc(2,Sf,2,2,"ng-container",38),D.Sb(3,"nz-option",80),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(1),D.rc("ngModel",t.selectedContext),D.Db(1),D.rc("ngForOf",null==t.vitalBlueprint||null==t.vitalBlueprint.contexts[0]?null:t.vitalBlueprint.contexts[0].options)}}function Df(t,e){1&t&&(D.Xb(0,"span",82),D.Xc(1," ( "),D.Sb(2,"span",83),D.Xc(3," Primary )"),D.Wb())}function Cf(t,e){1&t&&(D.Vb(0),D.Xc(1,",\xa0"),D.Ub())}function Xf(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2),D.Wb(),D.Vc(3,Df,4,0,"span",81),D.Vc(4,Cf,2,0,"ng-container",49),D.jc(5,"keyvalue"),D.Ub()),2&t){const t=e.$implicit,n=e.index,i=D.ic();let a=null;D.Db(2),D.Zc("",t.key," "),D.Db(1),D.rc("ngIf","PRIMARY"==t.value),D.Db(1),D.rc("ngIf",n!==(null==(a=D.kc(5,3,i.staffNameTypeMap))?null:a.length)-1)}}function Ef(t,e){1&t&&(D.Vb(0),D.Xc(1,"; "),D.Ub())}function Tf(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Vc(2,Ef,2,0,"ng-container",49),D.Ub()),2&t){const t=e.$implicit,n=e.index,i=D.ic();D.Db(1),D.Zc(" ",t,""),D.Db(1),D.rc("ngIf",(null==i.icdCodes?null:i.icdCodes.length)-1!==n)}}function zf(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"app-last-measured-vital",88),D.Ub()),2&t){const t=D.ic(2);D.Db(1),D.rc("vitalBlueprint",t.vitalBlueprint)("vital",t.vitals[0])("vitalLabel",t.vitalLabel)}}function _f(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",84),D.Xb(2,"div",85),D.Vc(3,zf,2,3,"ng-container",49),D.Wb(),D.Xb(4,"div",86),D.Sb(5,"app-global-and-individual-limits",87),D.Wb(),D.Wb(),D.Sb(6,"br"),D.Ub()),2&t){const t=D.ic();D.Db(3),D.rc("ngIf",t.vitals&&t.vitals.length),D.Db(2),D.rc("vitalBlueprint",t.vitalBlueprint)("patientName",t.patientName)("context",t.contextOption)("individualLimits",t.individualLimits)("showGlucose",t.showGlucoseChart)}}function yf(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",89),D.Xb(2,"div",90),D.Sb(3,"app-bp-stage-reference-range",91),D.Wb(),D.Wb(),D.Xb(4,"div",92),D.Xb(5,"div",93),D.Sb(6,"app-bp-summary",94),D.Wb(),D.Xb(7,"div",93),D.Sb(8,"app-bp-stage-distribution",95),D.Wb(),D.Wb(),D.Sb(9,"br"),D.Ub()),2&t){const t=D.ic();D.Db(3),D.rc("stageReference",null==t.vitalReport||null==t.vitalReport.snapshot?null:t.vitalReport.snapshot.limits),D.Db(3),D.rc("summary",null==t.vitalReport||null==t.vitalReport.snapshot?null:t.vitalReport.snapshot.summary)("limits",null==t.vitalReport||null==t.vitalReport.snapshot?null:t.vitalReport.snapshot.limits),D.Db(2),D.rc("distribution",null==t.vitalReport||null==t.vitalReport.snapshot?null:t.vitalReport.snapshot.distribution)}}function Of(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",96),D.Xb(2,"div",97),D.Sb(3,"app-bg-reference-chart",98),D.Wb(),D.Xb(4,"div",40),D.Sb(5,"app-bg-trend",99),D.Wb(),D.Wb(),D.Xb(6,"div",100),D.Xb(7,"div",90),D.Sb(8,"app-bg-summary-chart",101),D.Wb(),D.Wb(),D.Xb(9,"div",92),D.Xb(10,"div",90),D.Sb(11,"app-bg-modal-day",99),D.Wb(),D.Wb(),D.Sb(12,"br"),D.Ub()),2&t){const t=D.ic();D.Db(3),D.rc("snapshotData",null==t.vitalReport?null:t.vitalReport.snapshot)("patientName",t.patientName),D.Db(2),D.rc("snapshot",null==t.vitalReport?null:t.vitalReport.snapshot),D.Db(3),D.rc("reportData",t.vitalReport),D.Db(3),D.rc("snapshot",null==t.vitalReport?null:t.vitalReport.snapshot)}}function Mf(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",102),D.Xb(2,"div",103),D.Xb(3,"p",104),D.Xc(4),D.Wb(),D.Xb(5,"div",105),D.Xb(6,"div",106),D.Xb(7,"p",107),D.Xc(8,"Highest value"),D.Wb(),D.Xb(9,"p"),D.Xc(10,"Lowest value"),D.Wb(),D.Xb(11,"p"),D.Xc(12,"Average"),D.Wb(),D.Xb(13,"p"),D.Xc(14,"Out of Range"),D.Wb(),D.Wb(),D.Xb(15,"div",106),D.Xb(16,"p",107),D.Xc(17),D.jc(18,"number"),D.Wb(),D.Xb(19,"p"),D.Xc(20),D.jc(21,"number"),D.Wb(),D.Xb(22,"p"),D.Xc(23),D.jc(24,"number"),D.Wb(),D.Xb(25,"p"),D.Xc(26),D.jc(27,"number"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(28,"div",93),D.Wb(),D.Sb(29,"br"),D.Sb(30,"br"),D.Ub()),2&t){const t=D.ic();D.Db(4),D.Zc("Summary (",null==t.summary?null:t.summary.totalReadings," readings)"),D.Db(13),D.Yc(D.lc(18,5,null==t.summary?null:t.summary.highestValue,"1.1-2")),D.Db(3),D.Yc(D.lc(21,8,null==t.summary?null:t.summary.lowestValue,"1.1-2")),D.Db(3),D.Yc(D.lc(24,11,null==t.summary?null:t.summary.average,"1.1-2")),D.Db(3),D.Yc(D.lc(27,14,null==t.summary?null:t.summary.outOfRange,"1.1-2"))}}const Af=function(){return[16,16]};function Pf(t,e){1&t&&(D.Xb(0,"div",116),D.Xb(1,"div",117),D.Xb(2,"span",118),D.Xc(3,"Systolic"),D.Wb(),D.Sb(4,"span",119),D.Xb(5,"span",120),D.Xc(6,"Reference Range 90-160mm Hg"),D.Wb(),D.Wb(),D.Xb(7,"div",117),D.Xb(8,"span",118),D.Xc(9,"Diastolic"),D.Wb(),D.Sb(10,"br"),D.Sb(11,"span",121),D.Xb(12,"span",122),D.Xc(13,"Reference Range 60-90mm Hg"),D.Wb(),D.Wb(),D.Xb(14,"div",117),D.Xb(15,"span",118),D.Xc(16,"Heart Rate"),D.Wb(),D.Sb(17,"br"),D.Sb(18,"span",123),D.Xb(19,"span",122),D.Xc(20,"Reference Range 55-100bpm"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Af))}function Nf(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",102),D.Xb(2,"div",108),D.Vc(3,Pf,21,2,"div",109),D.Xb(4,"google-chart",110),D.ec("select",function(e){return D.Lc(t),D.ic().onSelect(e)}),D.Wb(),D.Xb(5,"p",111),D.Xc(6),D.jc(7,"date"),D.jc(8,"date"),D.Wb(),D.Wb(),D.Wb(),D.Xb(9,"div",112,113),D.Xb(11,"h2",114),D.Xb(12,"strong"),D.Xc(13),D.jc(14,"translate"),D.Wb(),D.Wb(),D.Xb(15,"div",90),D.Sb(16,"app-vitals-table",115),D.Wb(),D.Wb(),D.Sb(17,"br"),D.Ub()}if(2&t){const t=D.ic();D.Db(3),D.rc("ngIf",t.showBPChart),D.Db(1),D.rc("data",t.chartData)("columns",t.columnNames)("options",t.options)("dynamicResize",!0),D.Db(2),D.ad(" ",D.lc(7,13,t.dateRange[0],"MMM dd yyyy")," - ",D.lc(8,16,t.dateRange[1],"MMM dd yyyy")," "),D.Db(7),D.Yc(D.kc(14,19,"COMMON.VITAL_VALUES")),D.Db(3),D.rc("vitalBlueprint",t.vitalBlueprint)("vitals",t.vitals)("careplanId",t.careplanId)("patientId",t.patientId)("linkedVitals",t.linkedVitals)}}function Wf(t,e){1&t&&(D.Xb(0,"button",124),D.Sb(1,"app-icons",125),D.Wb())}function Rf(t,e){if(1&t&&(D.Xb(0,"div",126),D.Xb(1,"div",127),D.Xc(2),D.jc(3,"titlecase"),D.Wb(),D.Wb()),2&t){const t=D.ic();D.Db(2),D.Zc(" Based on ",D.kc(3,1,t.patientName),"'s current episodes, the time spent on reviewing this alert can be logged towards. ")}}function xf(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",128),D.ec("click",function(){return D.Lc(t),D.ic().closeAlert()}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"MARKED_AS_CLOSED")," "))}function wf(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",59),D.ec("click",function(){return D.Lc(t),D.ic().onTMSClick()}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"TMS.ADD")," "))}const Vf=function(t,e){return{disabled:t,"secondary-btn":e}},Lf=function(){return[32,6]},kf=function(){return[32,8]},Ff=function(t){return{left:t}};let Uf=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v,S,I,D){super(),this._activatedRoute=t,this._patientsService=e,this._staffService=n,this._vitalBlueprintsService=i,this._datePipe=a,this._vitalsEventLogger=s,this._userVitalAlertService=o,this._notificationsService=l,this._location=r,this._alertService=c,this.translationService=d,this._episodesService=b,this._patientComunicationModalService=u,this._analyticsService=p,this._router=h,this._shareReportModalService=g,this.scroller=f,this.alertService=m,this._patientsModalsService=v,this._patientsEventLogger=S,this._dataSharingService=I,this._timezoneService=D,this.vitals=[],this.vitalsOriginal=[],this.selectedContext="",this.isChartLoading=!0,this.dateRange=[Object(pn.a)(Date.now()),Object(Sg.a)(new Date)],this.tmsDetails=[],this.columnNames=[],this.options={hAxis:{textStyle:{fontSize:12},direction:-1},curveType:"function",pointSize:5,height:200,legend:{position:"none"},selectionMode:"multiple",animation:{startup:!0,duration:1e3},colors:["rgb(158, 205, 61)","rgb(252, 232, 0)","rgb(200, 28, 28)"],is3D:!0},this.vitalLabel="",this.showGlucoseChart=!1,this.showBPChart=!1,this.subjectType="Vital Trend Report",this.subject="Vital Trend Report",this.note="",this.includeVitals=!0,this.includeTMS=!0,this.includeNotes=!0,this.vitalType="BLOOD_PRESSURE",this.alertMessage="",this.notes=[],this.noVitals=!0,this.strings=["PATIENT_NOT_RECORDED_ANY_VITALS","TMS","TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED","TMS.TWENTY_MINS_RECORDED_ADD_ADDITIONAL_TMS","TMS.TMS_TIME_INCOMPLETE","MENU.PATIENTS","NOTE_ADDED_SUCCESSFULLY","COMMON.ALERT","ALERT.ALERT_CLOSED_SUCCESSFULLY"],this.isPrioritisedAlert=!1,this.linkedVitals=new Set,this.prioritisedAlertStatus=null,this.loading=!0,this.disabledDates=t=>Object(un.a)(new Date,t)<0,this.standardTimeZone=this._timezoneService.getTimeZone()}ngOnInit(){if(this.patientName=this._activatedRoute.snapshot.queryParams.patientName,this.dob=this._activatedRoute.snapshot.queryParams.dob,this.patientId=this._activatedRoute.snapshot.queryParams.patientId,this.episodeId=this._activatedRoute.snapshot.queryParams.episodeId,this.careplanId=this._activatedRoute.snapshot.queryParams.careplanId,this.carePlanStartDate=this._activatedRoute.snapshot.queryParams.carePlanstartDate,this._activatedRoute.snapshot.queryParams.latestVital&&(this.latestVital=JSON.parse(this._activatedRoute.snapshot.queryParams.latestVital),this.vitalType=this.latestVital.vitalType),this.alertId=this._activatedRoute.snapshot.queryParams.alertId,this.isPrioritisedAlert=/true/i.test(this._activatedRoute.snapshot.queryParams.isPrioritisedAlert),this.prioritisedAlertId=this._activatedRoute.snapshot.queryParams.prioritisedAlertId,this.prioritisedAlertStatus=this._activatedRoute.snapshot.queryParams.prioritisedAlertStatus,this.alertId){this.loading=!0;const t=this.updateAlert(this.alertId).subscribe(e=>{if(this.loading=!1,this.alert=e,this.tenantId=e.tenantId,this.isPrioritisedAlert){const t=JSON.parse(this._activatedRoute.snapshot.queryParams.linkedVitals);for(let e in t)this.linkedVitals.add(t[e]);this.updateAlert(this.prioritisedAlertId).subscribe(t=>{this.prioritisedAlert=t})}switch(this.status=this.isPrioritisedAlert?this.prioritisedAlertStatus:this.alert.status,null!=this.alert.context||null!=this.alert.context?this.vitalType=this.alert.context:null==this.alert.alertMessageParameters.VITAL_TYPE&&null==this.alert.alertMessageParameters.VITAL_TYPE||(this.vitalType=this.alert.alertMessageParameters.VITAL_TYPE),this.getIndividualLimitForSelectedVital(),this.getVitalDetails(),this.loadTenantBlueprintAndUserVitalAlerts(),this.getVitalReport(),this.vitalType){case"BLOOD_GLUCOSE":this.showGlucoseChart=!0,this.showBPChart=!1;break;case"BLOOD_PRESSURE":this.showBPChart=!0,this.showGlucoseChart=!1;break;default:this.showBPChart=!1,this.showGlucoseChart=!1}t.unsubscribe()})}else switch(this.loading=!1,this.loadTenantBlueprintAndUserVitalAlerts(),this.getVitalReport(),this.vitalType){case"BLOOD_GLUCOSE":this.showGlucoseChart=!0,this.showBPChart=!1;break;case"BLOOD_PRESSURE":this.showBPChart=!0,this.showGlucoseChart=!1;break;default:this.showBPChart=!1,this.showGlucoseChart=!1}this._activatedRoute.snapshot.queryParams.phoneNumbers&&(this.phoneNumbers=JSON.parse(this._activatedRoute.snapshot.queryParams.phoneNumbers)),this.getEpisodesData(),this.getDiagonsis(),this.getStaffResponse(),this.initTranslation(),this.getNotes()}initTranslation(){this.translationService.getMultiple(...this.strings).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.translatedStrings=t})}updateAlert(t){return this._alertService.getAlertDetail(t)}getDiagonsis(){this._patientsService.fetchPatientDetails(this.patientId,"EPISODE_DETAILS",this.episodeId).subscribe(t=>{t&&(this.episodeType=t.episodeType,this.patientStatus=null==t?void 0:t.patientStatus)})}getStaffResponse(){let t=new Map;this._staffService.fetchStaffMemberById(this.patientId).subscribe(e=>{var n,i,a,s;e&&(this.physicians=null==e?void 0:e.assignedUsers[M.a.PHYSICIAN].map(t=>t.fullName).join(", "),this.monitoringStaffs=null==e?void 0:e.assignedUsers[M.a.MONITORING_STAFF].map(t=>[t.id,t.fullName]),this.icdCodes=null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.healthInfo)||void 0===i?void 0:i.dxCodes.map(t=>(null==t?void 0:t.code)+", "+(null==t?void 0:t.description)),this.monitoringStaffType=null===(a=null==e?void 0:e.user)||void 0===a?void 0:a.assignedStaffs.filter(t=>"MONITORING_STAFF"==t.roleType).map(t=>[t.staffId,t.assignedStaffType])),null===(s=this.monitoringStaffType)||void 0===s||s.forEach(e=>{t.set(e[0],e[1])}),this.staffNameTypeMap=new Map,this.monitoringStaffs.forEach(e=>{this.staffNameTypeMap.set(e[1],t.get(e[0]))})})}scrollTo(t){"vitalTable"==t&&this.scroller.scrollToAnchor("vitalTable"),"tmsNotes"==t&&this.scroller.scrollToAnchor("tms-notes")}getVitalDetails(){let t;t=null!=this.alert.context||null!=this.alert.contextId?this.alert.contextId:this.alert.alertMessageParameters.ENTITY_ID,this.alertService.getVitalData(t).subscribe(t=>{var e,n,i,a,s,o;if(t){this.alertData=t,this.vitalKeys=Object.keys(null===(e=this.alertData)||void 0===e?void 0:e.parametersMap),this.vitalValues=[],this.alertParameterValue=this.getAlertParamDetail(this.alert,this.alertData),this.alertParameterName=this.getAlertParamDetail(this.alert,this.alertData,"NAME"),"OPEN"==(null===(n=this.alert)||void 0===n?void 0:n.status)?this.alertMessage=this.alertParameterName:"CLOSED"==(null===(i=this.alert)||void 0===i?void 0:i.status)&&(this.alertMessage="This alert has been closed"),this.threshold_level=parseInt(null===(o=null===(s=null===(a=this.alertData)||void 0===a?void 0:a.vitalstate)||void 0===s?void 0:s.parameterStates[0])||void 0===o?void 0:o.limitValue)||0;for(const t in this.alertData.parametersMap)this.vitalValues.push(Number(this.alertData.parametersMap[t]));return this.vitalValues}})}getAlertParamDetail(t,e,n="VALUE"){var i,a,s;const o=null==e?void 0:e.parametersMap;if(null!=e&&null!=t&&null!=this.vitalKeys){if(null!=t.alertMessageParameters&&null!=t.alertMessageParameters.RAISED_FOR&&null!=t.alertMessageParameters.RAISED_FOR){const n=null===(i=null==e?void 0:e.vitalstate)||void 0===i?void 0:i.parameterStates.find(e=>e.parameter==t.alertMessageParameters.RAISED_FOR),a=this.vitalKeys.filter(t=>t==n.parameter);this.alertParameterName=a[0],this.alertParameterValue=o[n.parameter]}else{const t=null===(s=null===(a=e.vitalstate)||void 0===a?void 0:a.parameterStates[0])||void 0===s?void 0:s.parameter,n=this.vitalKeys.filter(e=>e==t);this.alertParameterName=n[0],this.alertParameterValue=o[t]}return"VALUE"==n?this.alertParameterValue:this.alertParameterName}}getVitalReport(){this._analyticsService.fetchVitalSnapshot(this.patientId,mg.a[this.vitalType],this.getShortISODate(this.dateRange[0]),this.getShortISODate(this.dateRange[1])).subscribe(t=>{var e,n,i,a,s,o,l,r;this.vitalReport=t,this.tmsDetails=(null===(e=this.vitalReport)||void 0===e?void 0:e.patientCommunications)||[],this.summary=null===(i=null===(n=this.vitalReport)||void 0===n?void 0:n.snapshot)||void 0===i?void 0:i.summary[this.vitalType],this.vitalBlueprint=null===(a=this.vitalBlueprints.filter(t=>t.type==this.vitalType))||void 0===a?void 0:a[0],this.updateVitalsHistory((null===(o=null===(s=this.vitalReport)||void 0===s?void 0:s.snapshot)||void 0===o?void 0:o.vitals)||(null===(r=null===(l=this.vitalReport)||void 0===l?void 0:l.snapshot)||void 0===r?void 0:r.vitalsForSelectedDays)||[])})}refresh(t){switch(this.vitalType=t,this.vitalBlueprints.length>0&&this.vitalBlueprints.forEach(e=>{e.type==t&&(this.vitalLabel=e.label)}),t){case"BLOOD_GLUCOSE":this.showGlucoseChart=!0,this.showBPChart=!1,this.options.legend.position="bottom";break;case"BLOOD_PRESSURE":this.showBPChart=!0,this.showGlucoseChart=!1,this.options.legend.position="none";break;default:this.showBPChart=!1,this.showGlucoseChart=!1,this.options.legend.position="bottom"}this.isChartLoading=!0,this.vitalBlueprint=null,this.getIndividualLimitForSelectedVital(),this.getVitalReport()}loadTenantBlueprintAndUserVitalAlerts(){const t=this._vitalBlueprintsService.fetchVitalBlueprintsForTenant(this.tenantId),e=this._userVitalAlertService.fetchVitalBlueprintsOfUser(this.patientId);Object(Ip.a)([t,e]).subscribe(t=>{var e,n,i;this.vitalBlueprints=null===(e=t[0])||void 0===e?void 0:e.filter(t=>t.active),this.vitalType&&this.vitalBlueprints.forEach(t=>{t.type==this.vitalType&&(this.vitalLabel=t.label)}),this.userVitalAlerts=t[1],(null===(n=this.vitalBlueprints)||void 0===n?void 0:n.length)&&(this.vitalType||(this.vitalType=this.vitalBlueprints.some(t=>"BLOOD_PRESSURE"===(null==t?void 0:t.type))?mg.a.BLOOD_PRESSURE:this.vitalBlueprints[0].type),(null===(i=this.userVitalAlerts)||void 0===i?void 0:i.length)>0&&this.getIndividualLimitForSelectedVital())})}getVitalsHistory(t,e,n=10){this.isChartLoading=!0,this.noVitals=!0,this._vitalsEventLogger.vitalHistoryEvent(this.patientId,this.vitalType,"",t,e),this._patientsService.getVitalHistory(this.patientId,this.vitalType,t,e,n).subscribe(t=>{this.vitalBlueprint=t.vitalBlueprint,this.updateVitalsHistory(t.vitals)})}updateVitalsHistory(t){var e;if(this.vitals=[...t],this.noVitals=!this.vitals.length,this.vitalsOriginal=JSON.parse(JSON.stringify(this.vitals)),this.vitalBlueprint.contexts&&this.vitalBlueprint.contexts.length){if(this.selectedContext=this.vitalBlueprint.contexts[0].options[0].label,null===(e=this.vitals)||void 0===e?void 0:e.length){const t=JSON.parse(this.vitals[0].context)||"";this.selectedContext=t[Object.keys(t)[0]],this.vitalWarning=""}this.populateGraphWithContextData(this.vitalBlueprint.contexts[0].label,this.selectedContext)}else{if(!this.vitals.length)return this.vitalWarning=this.translatedStrings.get("PATIENT_NOT_RECORDED_ANY_VITALS").replace("{PATIENT_NAME}",this.patientName),void(this.isChartLoading=!0);this.vitalWarning="",this.populateChart()}}getIndividualLimitForSelectedVital(t){var e,n;this.individualLimits=new Array,t?(this.contextOption=t,null===(e=this.userVitalAlerts)||void 0===e||e.filter(t=>t.vital===this.vitalType&&t.enabled).map(e=>e.contexts.filter(e=>e.answer===t).map(t=>{let e=new Ig.a;e.label=t.answer,e.min=t.limit.min,e.max=t.limit.max,this.individualLimits.push(e)}))):this.vitalType&&(this.contextOption=null,null===(n=this.userVitalAlerts)||void 0===n||n.filter(t=>t.vital===this.vitalType&&t.enabled).map(t=>{let e=new Ig.a;e.label=t.parameter,e.min=t.limit.min,e.max=t.limit.max,this.individualLimits.push(e)}))}populateGraphWithContextData(t,e){if(t||(t=this.vitalBlueprint.contexts[0].label),this.vitals=[],this.getIndividualLimitForSelectedVital(e),this.vitalsOriginal.forEach(n=>{if(e||n.context){if(n.context)try{const i=JSON.parse(n.context);e===i[t]&&this.vitals.push(n)}catch(i){}}else this.vitals.push(n)}),!this.vitals.length)return this.vitalWarning=this.translatedStrings.get("PATIENT_NOT_RECORDED_ANY_VITALS").replace("{PATIENT_NAME}",this.patientName),void(this.isChartLoading=!0);this.vitalWarning="",this.populateChart()}populateChart(){this.chartData=this.plotDataPointsForChart(),this.isChartLoading=!1}plotDataPointsForChart(){this.columnNames=["Dates"];const t=[],e=[],n=new Map;return this.vitalBlueprint.parameters.forEach(t=>{e.push(t.type.toLowerCase()),n.set(t.type.toLowerCase(),t.label),this.columnNames.push(t.label)}),this.vitals.forEach((i,a)=>{try{const a=JSON.parse(i.parameters),s=[];let o=0;s.push(this.getFullDate(i.takenAt+"Z")),e.forEach(t=>{const e=n.get(t)||"",i=Object.keys(a).find(n=>n.toLowerCase()===t.toLowerCase()||n.toLowerCase()===e.toLowerCase()||t.toLowerCase()==="HEARTRATE".toLowerCase()&&n.toLowerCase()==="HEART_RATE".toLowerCase());o=parseFloat(a[i])||0,s.push(o)}),t.push(s)}catch(s){}}),t}getFullDate(t){const e=new Date(t);return this._datePipe.transform(e,"MMM d, h:mm a")}goBack(){this._location.back()}logAction(t,e){this._patientsEventLogger.patientActionEvent(e,t)}onDateChange(){this.dateRange[0].setHours(0,0,0,0),this.dateRange[1].setHours(23,59,59,999),this.getVitalReport(),this.getNotes()}getEpisodesData(){this._episodesService.getActiveEpisode(this.patientId,"RPM").subscribe(t=>{var e;(null==t?void 0:t.length)&&(this.episode=t[0],this.episodeId=null===(e=this.episode)||void 0===e?void 0:e.id,this.tenantId=this.episode.tenantId,this.isActiveRPMCareplan=t.some(t=>t.episodeType===Eg.a.RPM&&"IN_PROGRESS"===t.status),this.loadTenantBlueprintAndUserVitalAlerts())})}getNotes(){this._patientsService.getNotes(this.patientId).subscribe(t=>{this.notes=[],t&&t.length>0&&(this.notes=[...t.filter(t=>t.updatedOn>=this.dateRange[0].getTime()&&t.updatedOn<=this.dateRange[1].getTime())])})}onTMSClick(){let t,e;e=ye.a.TREATMENT_MANAGEMENT_SERVICE,this.tmsPercent<100?(t="TMS",e=ye.a.TREATMENT_MANAGEMENT_SERVICE):this.additionalTMSPercent<100?(t="ADDITIONAL_TMS",e=ye.a.ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE):(t="ADDITIONAL_TMS_B",e=ye.a.ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B);const n=new Date(this.carePlanStartDate);this.isActiveRPMCareplan?this._patientsService.getSpecificUser(this.patientId).subscribe(i=>{this._patientComunicationModalService.createTMSModal(i,this.episodeId,t,e,n).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.tmsAdded=t,t&&this.getVitalReport()})}):this._notificationsService.error(this.translatedStrings.get("TMS"),this.translatedStrings.get("TMS.CANNOT_ADD_TMS_CAREPLAN_NOT_ASSIGNED"))}downloadStaff(){this.includeVitals=!0,this.includeTMS=!0,this.includeNotes=!0,this.getReport("download","staff")}downloadPatient(){this.includeVitals=!0,this.includeTMS=!1,this.includeNotes=!1,this.getReport("download","patient")}getShortISODate(t){return this._datePipe.transform(t,"yyyy-MM-dd")}getBaseURLForVitalReportEmail(t,e="preview"){var n;return this._router.serializeUrl(this._router.createUrlTree([`/analytics/reports/vital-snapshots/printable/${t}/`+this.patientId],{queryParams:{startDate:this.getShortISODate(this.dateRange[0]),endDate:this.getShortISODate(this.dateRange[1]),action:e,email:null===(n=this.emailIds)||void 0===n?void 0:n.join(","),subject:this.subject,note:this.note,includeVitals:this.includeVitals,includeTMS:this.includeTMS,includeNotes:this.includeNotes,patientName:this.patientName,noteStartDate:this.dateRange[0].getTime(),noteEndDate:this.dateRange[1].getTime(),vitalLabel:this.vitalLabel,individualLimits:JSON.stringify(this.individualLimits)}}))}getBaseURLForVitalReportSMS(t="preview",e,n){return this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/patient-summary/"+this.patientId],{queryParams:{communicationMode:e,phoneNumber:n,startDate:this.getShortISODate(this.dateRange[0]),endDate:this.getShortISODate(this.dateRange[1]),action:t,subject:this.subject,note:this.note}}))}getReport(t="preview",e){const n=this.vitalType.toLowerCase().replace(/_/g,"-"),i="patient"===e?this.getBaseURLForVitalReportSMS(t,"SMS"):this.getBaseURLForVitalReportEmail(n,t);window.open(i,"_blank"),"preview"!==t&&(this.emailIds=[])}createGenerateVitalHistoryReportRequest(t,e,n,i,a,s,o){return{patientId:t,vitalType:e,startDate:this._datePipe.transform(n,"yyyy-MM-dd"),endDate:this._datePipe.transform(i,"yyyy-MM-dd"),emailIds:a,subject:s,note:o}}shareReport(){this._shareReportModalService.createModal(this.patientName,this.patientId,this.phoneNumbers,this.episodeId,this.vitalType,this.dateRange[0],this.dateRange[1],JSON.stringify(this.individualLimits),JSON.stringify(this.vitalBlueprint),"shareVital","","",this.vitalLabel).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(()=>{})}addNotes(){this._patientsModalsService.notes(this.patientId,this.patientName,this.tenantId).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{null!=t&&(this.notes=[...this.notes,t],this._notificationsService.success(this.translatedStrings.get("MENU.PATIENTS"),this.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY")))})}closeAlert(){this.alert.status="CLOSED",this.alert.closed=!0,this.alert.closedOn=(new Date).getTime(),this._alertService.closeAlert(this.isPrioritisedAlert?this.prioritisedAlertId:this.alert.id).subscribe(()=>{this._patientsEventLogger.patientAlertEvent(this.patientId,"alert_mark_as_closed"),this._notificationsService.success(this.translatedStrings.get("COMMON.ALERT"),this.translatedStrings.get("ALERT.ALERT_CLOSED_SUCCESSFULLY")),this.alertMessage="This alert has been closed",this._dataSharingService.triggerAlertRefresh(),this.goBack()})}pushToEMR(t=!1){const e=this.vitalType.toLowerCase().replace(/_/g,"-"),n=this._router.serializeUrl(this._router.createUrlTree([`/analytics/reports/vital-snapshots/printable/${e}/`+this.patientId],{queryParams:{communicationMode:"EMR",phoneNumber:void 0,startDate:this.getShortISODate(this.dateRange[0]),endDate:this.getShortISODate(this.dateRange[1]),action:"pushToEMR",includeVitals:this.includeVitals,includeTMS:this.includeTMS,includeNotes:this.includeNotes,patientName:this.patientName,noteStartDate:this.dateRange[0].getTime(),noteEndDate:this.dateRange[1].getTime(),individualLimits:this.individualLimits,vitalBlueprint:this.vitalBlueprint,vitalLabel:this.vitalLabel,isUrgent:t}}));window.open(n,"_blank")}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.a),D.Rb(g.a),D.Rb(S.a),D.Rb(Hb.a),D.Rb(c.e),D.Rb(vg.a),D.Rb(sb.a),D.Rb(A.b),D.Rb(c.l),D.Rb(Tg.a),D.Rb(Pe.a),D.Rb(fn.a),D.Rb(_e.a),D.Rb(Dg.a),D.Rb(b.g),D.Rb(Cg.a),D.Rb(c.D),D.Rb(Xg.a),D.Rb(ze.a),D.Rb(v.a),D.Rb(Oe.a),D.Rb(pd.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-vital-trend-report"]],features:[D.Cb([c.e]),D.Ab],decls:190,vars:128,consts:[[2,"background-color","#393939",3,"nzBackIcon","nzBack"],[1,"header-title"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzSize","nzDropdownMenu","disabled"],["size","13px","name","download",1,"share-icon",3,"originalStyle","color"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"download-staff"],[1,"line"],["nz-button","","nzType","primary",3,"nzSize","disabled","click"],["size","13px","name","share",1,"share-icon",3,"originalStyle","color"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzSize","nzDropdownMenu","disabled","ngClass"],["emrMenu","nzDropdownMenu"],["backIcon",""],[1,"container"],[3,"nzSpinning"],["class","alert-message",4,"ngIf"],["class","overlay-off",4,"ngIf"],["class","cdk-overlay-container alert-table","featureHighlight","","featureKey","alerts_spotlight","hideElement","",3,"position",4,"ngIf"],["nz-row","","nzSpan","24","nzGutter","24"],["nz-col","",4,"ngIf"],["nz-col","","nzFlex","1"],["nz-row","","nzJustify","end"],["nz-col","","style","padding-left:12px",4,"ngIf"],["nz-col","",2,"padding-left","12px"],["nzSize","large",3,"ngModel","nzDisabledDate","ngModelChange"],["nz-col","","nzSpan","15"],["nz-col","","nzSpan","9"],["nz-typography","","nzType","danger",3,"ngClass"],[1,"divider"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","6"],["nz-typography","",1,"midnight-green-label"],["nz-col","","nzSpan","1"],["nz-row","",1,"fs-Nunito",3,"nzGutter"],[1,"audio-call",3,"userId","phoneNumbers","renderVital","click"],[1,"fs-Nunito"],["nz-col","","nzSpan","17"],[4,"ngFor","ngForOf"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","16"],["nz-col","","nzSpan","32"],["nz-typography",""],["nz-row","","row","","nzGutter","24","nzJustify","start","nzAlign","middle",1,"pad-20"],["nz-col","",1,"vital-divider"],[1,"vital-trend"],["nz-col","",1,"vital-divider","text-center"],[1,"vital-title",3,"click"],["nz-col","",1,"text-center"],[4,"ngIf"],["id","tms-notes",3,"tmsDetails","notes","patientName","refreshNotes"],["tmsNotes",""],[3,"nzTemplate"],["backUp",""],[1,"bottom-spacer-div"],[1,"container","input-section-div",3,"ngStyle"],["nz-row","","nzAlign","middle","nzJustify","end",4,"ngIf"],["nz-row","","nzJustify","start","nzAlign","bottom"],["nz-col","","nzFlex","120px"],["nz-button","","nzType","primary",1,"footer-btn",3,"click"],["nz-button","","nzType","danger","class","footer-btn button-large","style","border:1px solid red;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","class","footer-btn",3,"click",4,"ngIf"],["name","back","altColor","#ffffff","color","#ffffff"],[1,"alert-message"],[1,"overlay-off"],["nz-row","",1,"table-height"],["nz-col","","nzSpan","6",1,"vital-parameter",2,"padding-top","9px",3,"ngClass"],["nz-col","","nzSpan","6",2,"padding-top","9px",3,"ngClass"],["nz-row","",1,"table-height","table-space"],["nz-col","","nzSpan","6",1,"vital-warn",2,"padding-top","9px",3,"ngClass"],["nz-row","","class","table-height table-space",4,"ngFor","ngForOf"],["featureHighlight","","featureKey","alerts_spotlight","hideElement","",1,"cdk-overlay-container","alert-table",3,"position"],["nz-col",""],[1,"main-title"],[1,"date-title"],[1,"date-bg-title"],["nz-typography","",1,"minor-headings"],["nzSize","large",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel"],["nzSize","large","id","context-selector",3,"ngModel","ngModelChange"],["nzValue","","nzLabel","No Context"],["style","width: 30%; text-align: right; color: var(--primary-color);",4,"ngIf"],[2,"width","30%","text-align","right","color","var(--primary-color)"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"],["nz-row","","nzGutter","16"],["nz-col","","nzFlex","10"],["nz-col","","nzFlex","14"],[3,"vitalBlueprint","patientName","context","individualLimits","showGlucose"],[3,"vitalBlueprint","vital","vitalLabel"],["nz-row","","row","","nzGutter","24",1,"pad-20"],["nz-col","","nzSpan","24"],["id","reference",3,"stageReference"],["nz-row","","nzGutter","24",1,"pad-20"],["nz-col","","nzSpan","12"],[3,"summary","limits"],[3,"distribution"],["nz-row","",1,"pad-20"],["nz-col","","nzSpan","8"],[3,"snapshotData","patientName"],[3,"snapshot"],["nz-row","","nzGutter","24",1,"pad-20",2,"padding-top","0px"],[3,"reportData"],["nz-row","","nzSpan","24",1,"pad-20"],["nz-col","","nzSpan","12",1,"summary-shade"],[1,"summary-title"],["nz-row","","nzSpan","24",1,"summary-details"],["nz-col","","nzSpan","12",1,"summary-value"],[1,"p-top"],["nz-col","","nzFlex","1",1,"graph-container"],["nz-row","","class","header",3,"nzGutter",4,"ngIf"],["type","LineChart",1,"w-100",3,"data","columns","options","dynamicResize","select"],[1,"chart-axis"],["id","vitalTable","nz-row","","nzGutter","24",1,"pad-20",2,"padding-top","0px"],["vitalTable",""],[1,"vitalLabel"],[3,"vitalBlueprint","vitals","careplanId","patientId","linkedVitals"],["nz-row","",1,"header",3,"nzGutter"],["nz-col","","nzSpan","6",1,"legend-item"],[1,"legend-name"],[1,"legend-circle",2,"background-color","#9ecd3d"],[1,"reference-name"],[1,"legend-circle","round",2,"background-color","#fce800"],[1,"sub-name"],[1,"legend-circle","round",2,"background-color","#c81c1c"],["nz-button","","nzType","primary","nzShape","circle",1,"scrollup"],["name","up","color","#ffffff","size","20",2,"margin","0px"],["nz-row","","nzAlign","middle","nzJustify","end"],["nz-col","",1,"bottom-note"],["nz-button","","nzType","danger",1,"footer-btn","button-large",2,"border","1px solid red",3,"click"]],template:function(t,e){if(1&t&&(D.Xb(0,"nz-page-header",0),D.ec("nzBack",function(){return e.goBack()}),D.Xb(1,"nz-page-header-title",1),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"nz-page-header-extra"),D.Xb(5,"button",2),D.Xb(6,"span"),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Xc(9," \xa0 "),D.Sb(10,"app-icons",3),D.Wb(),D.Xb(11,"nz-dropdown-menu",null,4),D.Xb(13,"ul",5),D.Xb(14,"li",6),D.ec("click",function(){return e.downloadStaff()}),D.Xb(15,"span",7),D.Xc(16),D.jc(17,"translate"),D.jc(18,"translate"),D.Wb(),D.Wb(),D.Sb(19,"p",8),D.Xb(20,"li",6),D.ec("click",function(){return e.downloadPatient()}),D.Xb(21,"span"),D.Xc(22),D.jc(23,"translate"),D.jc(24,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(25,"button",9),D.ec("click",function(){return e.shareReport()}),D.Xb(26,"span"),D.Xc(27),D.jc(28,"translate"),D.Wb(),D.Xc(29," \xa0 "),D.Sb(30,"app-icons",10),D.Wb(),D.Xb(31,"button",11),D.Xc(32,"Push To EMR"),D.Wb(),D.Xb(33,"nz-dropdown-menu",null,12),D.Xb(35,"ul",5),D.Xb(36,"li",6),D.ec("click",function(){return e.pushToEMR(!1)}),D.Xc(37,"Not-Urgent"),D.Wb(),D.Sb(38,"p",8),D.Xb(39,"li",6),D.ec("click",function(){return e.pushToEMR(!0)}),D.Xc(40,"Urgent"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Vc(41,nf,1,0,"ng-template",null,13,D.Wc),D.Wb(),D.Sb(43,"br"),D.Xb(44,"div",14),D.Xb(45,"nz-spin",15),D.Xb(46,"h3"),D.Vc(47,af,2,1,"strong",16),D.Wb(),D.Xb(48,"h3"),D.Vc(49,sf,2,1,"strong",16),D.Wb(),D.Vc(50,of,26,30,"nz-table",17),D.Vc(51,rf,16,17,"nz-table",17),D.Vc(52,bf,16,19,"nz-table",18),D.Vc(53,uf,26,31,"nz-table",18),D.Wb(),D.Xb(54,"div",19),D.Vc(55,pf,9,12,"div",20),D.Vc(56,hf,9,12,"div",20),D.Xb(57,"div",21),D.Xb(58,"div",22),D.Vc(59,gf,4,3,"div",20),D.Vc(60,mf,3,2,"div",20),D.Vc(61,vf,3,0,"div",23),D.Vc(62,If,4,2,"div",20),D.Xb(63,"div",24),D.Xb(64,"nz-range-picker",25),D.ec("ngModelChange",function(t){return e.dateRange=t})("ngModelChange",function(){return e.onDateChange()}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(65,"div",19),D.Sb(66,"div",26),D.Xb(67,"div",27),D.Xb(68,"p",28),D.Xc(69),D.Wb(),D.Wb(),D.Wb(),D.Sb(70,"nz-divider",29),D.Xb(71,"div",30),D.Xb(72,"div",31),D.Xb(73,"label",32),D.Xc(74),D.jc(75,"translate"),D.Wb(),D.Wb(),D.Xb(76,"div",31),D.Xb(77,"label",32),D.Xc(78,"Gender"),D.Wb(),D.Wb(),D.Xb(79,"div",31),D.Xb(80,"label",32),D.Xc(81),D.jc(82,"translate"),D.Wb(),D.Wb(),D.Sb(83,"div",33),D.Wb(),D.Xb(84,"div",34),D.Xb(85,"div",31),D.Xb(86,"strong"),D.Xc(87),D.jc(88,"titlecase"),D.Wb(),D.Vb(89),D.Xb(90,"app-audio-call-widget",35),D.ec("click",function(){return e.logAction("audio_call",e.patientId)}),D.Wb(),D.Ub(),D.Wb(),D.Xb(91,"div",31),D.Xb(92,"strong"),D.Xc(93),D.jc(94,"titlecase"),D.Wb(),D.Wb(),D.Xb(95,"div",31),D.Xb(96,"strong"),D.Xc(97),D.jc(98,"date"),D.Wb(),D.Wb(),D.Sb(99,"div",33),D.Wb(),D.Sb(100,"br"),D.Xb(101,"div",36),D.Xb(102,"div",30),D.Xb(103,"div",31),D.Xb(104,"label",32),D.Xc(105),D.jc(106,"translate"),D.Wb(),D.Wb(),D.Xb(107,"div",37),D.Xb(108,"label",32),D.Xc(109),D.jc(110,"translate"),D.Wb(),D.Wb(),D.Sb(111,"div",33),D.Wb(),D.Xb(112,"div",30),D.Xb(113,"div",31),D.Xb(114,"strong"),D.Xc(115),D.Wb(),D.Wb(),D.Xb(116,"div",37),D.Xb(117,"p"),D.Vc(118,Xf,6,5,"ng-container",38),D.jc(119,"keyvalue"),D.Wb(),D.Wb(),D.Sb(120,"div",33),D.Wb(),D.Sb(121,"br"),D.Xb(122,"div",39),D.Xb(123,"div",31),D.Xb(124,"label",32),D.Xc(125),D.jc(126,"translate"),D.Wb(),D.Wb(),D.Xb(127,"div",40),D.Xb(128,"label",32),D.Xc(129),D.jc(130,"translate"),D.Wb(),D.Wb(),D.Sb(131,"div",33),D.Wb(),D.Xb(132,"div",39),D.Xb(133,"div",31),D.Xb(134,"strong"),D.Xc(135),D.Wb(),D.Wb(),D.Xb(136,"div",41),D.Xb(137,"strong",42),D.Vc(138,Tf,3,2,"ng-container",38),D.Wb(),D.Wb(),D.Sb(139,"div",33),D.Wb(),D.Sb(140,"br"),D.Xb(141,"div",39),D.Xb(142,"div",40),D.Xb(143,"label",32),D.Xc(144,"Patient Notes"),D.Wb(),D.Wb(),D.Sb(145,"div",33),D.Wb(),D.Xb(146,"div",39),D.Xb(147,"div",41),D.Xb(148,"strong"),D.Xc(149),D.Wb(),D.Wb(),D.Sb(150,"div",33),D.Wb(),D.Wb(),D.Sb(151,"nz-divider"),D.Xb(152,"div",43),D.Xb(153,"div",44),D.Xb(154,"span",45),D.Xc(155),D.jc(156,"translate"),D.Wb(),D.Wb(),D.Xb(157,"div",46),D.Xb(158,"span",47),D.ec("click",function(){return e.scrollTo("vitalTable")}),D.Xc(159),D.jc(160,"translate"),D.Wb(),D.Wb(),D.Xb(161,"div",48),D.Xb(162,"span",47),D.ec("click",function(){return e.scrollTo("tmsNotes")}),D.Xc(163),D.jc(164,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Vc(165,_f,7,6,"ng-container",49),D.Vc(166,yf,10,4,"ng-container",49),D.Vc(167,Of,13,5,"ng-container",49),D.Vc(168,Mf,31,17,"ng-container",49),D.Vc(169,Nf,18,21,"ng-container",49),D.Wb(),D.Vb(170),D.Xb(171,"app-tms-vital-history",50,51),D.ec("refreshNotes",function(){return e.getNotes()}),D.Wb(),D.Ub(),D.Vb(173),D.Xb(174,"nz-back-top",52),D.Vc(175,Wf,2,0,"ng-template",null,53,D.Wc),D.Wb(),D.Ub(),D.Sb(177,"div",54),D.Xb(178,"div",55),D.Vc(179,Rf,4,3,"div",56),D.Xb(180,"div",57),D.Xb(181,"div",58),D.Xb(182,"button",59),D.ec("click",function(){return e.addNotes()}),D.Xc(183),D.jc(184,"translate"),D.Wb(),D.Wb(),D.Xb(185,"div",21),D.Vc(186,xf,3,3,"button",60),D.Wb(),D.Xb(187,"div",58),D.Xb(188,"div",22),D.Vc(189,wf,3,3,"button",61),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(12),n=D.Ic(34),i=D.Ic(42),a=D.Ic(176);D.rc("nzBackIcon",i),D.Db(2),D.Zc(" ",D.kc(3,76,"COMMON.VITAL_TREND_REPORT")," "),D.Db(3),D.rc("nzSize","middle")("nzDropdownMenu",t)("disabled",e.noVitals),D.Db(2),D.Zc(" ",D.kc(8,78,"PATIENTS.REPORTDOWNLOAD"),""),D.Db(3),D.rc("originalStyle",!0)("color",e.noVitals?"grey":"#ffffff"),D.Db(6),D.ad("",D.kc(17,80,"COMMON.FOR")," ",D.kc(18,82,"PATIENT.MONITORING_STAFF")," "),D.Db(6),D.ad("",D.kc(23,84,"COMMON.FOR")," ",D.kc(24,86,"PATIENT"),""),D.Db(3),D.rc("nzSize","middle")("disabled",e.noVitals),D.Db(2),D.Yc(D.kc(28,88,"PATIENTS.REPORTSHARE")),D.Db(3),D.rc("originalStyle",!0)("color",e.noVitals?"grey":"#ffffff"),D.Db(1),D.rc("nzSize","middle")("nzDropdownMenu",n)("disabled",e.noVitals)("ngClass",D.zc(119,Vf,e.noVitals,!e.noVitals)),D.Db(14),D.rc("nzSpinning",e.loading),D.Db(2),D.rc("ngIf",e.alertId&&"OPEN"==e.status),D.Db(2),D.rc("ngIf",e.alertId&&"CLOSED"==e.status),D.Db(1),D.rc("ngIf",e.alertId&&"OPEN"==e.status&&!e.isPrioritisedAlert),D.Db(1),D.rc("ngIf",e.alertId&&"OPEN"==e.status&&e.isPrioritisedAlert),D.Db(1),D.rc("ngIf",e.alertId&&"OPEN"==e.status&&e.isPrioritisedAlert),D.Db(1),D.rc("ngIf",e.alert&&"OPEN"==e.status&&!e.isPrioritisedAlert),D.Db(2),D.rc("ngIf","Blood Glucose"!=e.vitalLabel),D.Db(1),D.rc("ngIf","Blood Glucose"==e.vitalLabel),D.Db(3),D.rc("ngIf",!e.alert),D.Db(1),D.rc("ngIf",!e.alert),D.Db(1),D.rc("ngIf",null==e.vitalBlueprint||null==e.vitalBlueprint.contexts?null:e.vitalBlueprint.contexts.length),D.Db(1),D.rc("ngIf",null==e.vitalBlueprint||null==e.vitalBlueprint.contexts?null:e.vitalBlueprint.contexts.length),D.Db(2),D.rc("ngModel",e.dateRange)("nzDisabledDate",e.disabledDates),D.Db(4),D.rc("ngClass","Blood Glucose"==e.vitalLabel?"bg-warn":null),D.Db(1),D.Zc(" ",e.vitalWarning," "),D.Db(2),D.rc("nzGutter",D.xc(122,Lf)),D.Db(3),D.Yc(D.kc(75,90,"PATIENT.NAME")),D.Db(7),D.Yc(D.kc(82,92,"COMMON.DOB")),D.Db(3),D.rc("nzGutter",D.xc(123,Lf)),D.Db(3),D.Yc(D.kc(88,94,e.patientName)),D.Db(3),D.rc("userId",e.patientId)("phoneNumbers",e.phoneNumbers)("renderVital",!0),D.Db(3),D.Yc(D.kc(94,96,null==e.vitalReport||null==e.vitalReport.metaData?null:e.vitalReport.metaData.gender)),D.Db(4),D.Zc(" ",D.lc(98,98,e.dob,"mediumDate")," "),D.Db(5),D.rc("nzGutter",D.xc(124,kf)),D.Db(3),D.Yc(D.kc(106,101,"COMMON.PHYSICIAN")),D.Db(4),D.Yc(D.kc(110,103,"COMMON.MONITORED_BY")),D.Db(3),D.rc("nzGutter",D.xc(125,kf)),D.Db(3),D.Zc(" ",e.physicians,""),D.Db(3),D.rc("ngForOf",D.kc(119,105,e.staffNameTypeMap)),D.Db(7),D.Yc(D.kc(126,107,"PATIENT_ID")),D.Db(4),D.Yc(D.kc(130,109,"COMMON.DIAGNOSIS")),D.Db(6),D.Yc((null==e.vitalReport||null==e.vitalReport.metaData?null:e.vitalReport.metaData.patientInternalId)||"N/A"),D.Db(3),D.rc("ngForOf",e.icdCodes),D.Db(11),D.Yc((null==e.vitalReport||null==e.vitalReport.metaData||null==e.vitalReport.metaData.quickNote?null:e.vitalReport.metaData.quickNote.content)||"N/A"),D.Db(6),D.Yc(D.kc(156,111,"COMMON.VITAL_TRENDS")),D.Db(4),D.Yc(D.kc(160,113,"COMMON.VITAL_VALUES")),D.Db(4),D.Yc(D.kc(164,115,"COMMON.TMS_NOTES")),D.Db(2),D.rc("ngIf",!e.isChartLoading),D.Db(1),D.rc("ngIf",e.showBPChart&&!e.isChartLoading),D.Db(1),D.rc("ngIf",e.showGlucoseChart&&!e.isChartLoading),D.Db(1),D.rc("ngIf",!e.showGlucoseChart&&!e.showBPChart&&!e.isChartLoading),D.Db(1),D.rc("ngIf",!e.isChartLoading),D.Db(2),D.rc("tmsDetails",e.tmsDetails)("notes",e.notes)("patientName",e.patientName),D.Db(3),D.rc("nzTemplate",a),D.Db(4),D.rc("ngStyle",D.yc(126,Ff,e.headerLeft)),D.Db(1),D.rc("ngIf",e.alert&&"OPEN"==e.status),D.Db(4),D.Zc(" ",D.kc(184,117,"COMMON.ADD_NOTES")," "),D.Db(3),D.rc("ngIf",e.alert&&"OPEN"==e.status),D.Db(3),D.rc("ngIf",e.isActiveRPMCareplan&&e.patientStatus&&"ACTIVE"==e.patientStatus&&(!e.alert||"OPEN"==e.status))}},directives:[ii.b,ii.g,ii.d,X.a,E.a,T.a,Be.d,Be.b,ee.a,Be.e,He.c,He.e,c.o,mn.a,c.q,k.c,k.a,te.a,te.c,d.u,d.x,V.a,L.a,Ii.a,c.p,Yg,Bg.a,c.r,Y.f,Y.o,Y.e,Y.l,di,x.d,x.a,R.a,Hg.a,Gg.a,$g.a,Zg.a,qg.a,Kg.a,Qg.a,Jg.a,tf.a,o.a,ef.a],pipes:[Vt.a,c.A,c.e,c.j,la.a,hd.a,c.f],styles:['.container[_ngcontent-%COMP%]{padding:10px 35px!important}.fs-Nunito[_ngcontent-%COMP%]{font-style:"Nunito";font-size:14px}.header-title[_ngcontent-%COMP%]{color:#fff}.btn[_ngcontent-%COMP%]{position:relative;bottom:2px}nz-range-picker[_ngcontent-%COMP%]{width:260px;height:38px}.minor-headings[_ngcontent-%COMP%]{font-size:14px;color:#0f2015;padding-top:12px;padding-right:12px}.call[_ngcontent-%COMP%]{position:relative;top:3px;left:10px;padding-right:5px;color:var(--primary-color)}.call-patient[_ngcontent-%COMP%]{color:var(--primary-color)!important;font-size:14px;font-weight:700}.chart-table[_ngcontent-%COMP%]{padding-left:44px}[_nghost-%COMP%]     .ant-back-top{bottom:120px;right:32px}.scrollup[_ngcontent-%COMP%]{height:43px;width:43px;font-size:16px}.vitalLabel[_ngcontent-%COMP%]{padding-left:15px;border-left:4px solid var(--primary-color);color:#0b2240;font-size:18px;position:relative;left:22px}.vital-title[_ngcontent-%COMP%]{color:var(--primary-color);margin-left:16px}.vital-title[_ngcontent-%COMP%], .vital-trend[_ngcontent-%COMP%]{font-weight:700;font-size:14px;cursor:pointer;margin-right:16px}.vital-trend[_ngcontent-%COMP%]{color:#000}.main-title[_ngcontent-%COMP%]{color:#0b2240;font-size:20px}.date-title[_ngcontent-%COMP%]{padding-left:10px;font-size:18px}.date-bg-title[_ngcontent-%COMP%]{font-size:15px;color:#0b2240;margin-top:-10px}footer[_ngcontent-%COMP%]{background-color:#fff;height:9vh}.btn-right[_ngcontent-%COMP%]{margin-left:264px}.btn-left[_ngcontent-%COMP%], .btn-right[_ngcontent-%COMP%]{font-size:16px;margin-top:20px}.btn-left[_ngcontent-%COMP%]{margin-left:40px}.footer-Text[_ngcontent-%COMP%]{font-size:16px}.glucose-Report[_ngcontent-%COMP%], .glucose-summary[_ngcontent-%COMP%]{padding-left:20px}[_nghost-%COMP%]     .ant-page-header{padding:5px 24px}.reference-header[_ngcontent-%COMP%]{text-align:center}.glucose-header[_ngcontent-%COMP%]{color:#0b2240;border-left:4px solid #99c445;font-size:22px;font-weight:700;padding-left:12px}.pad-20[_ngcontent-%COMP%]{padding:10px 20px 15px 0}[_nghost-%COMP%]     .ant-col-18{display:block;flex:0 0 75%;max-width:75%;margin-top:-20px}.graph-container[_ngcontent-%COMP%]{border-radius:7px;overflow:hidden}.graphLabel[_ngcontent-%COMP%]{padding-left:15px;border-left:4px solid var(--primary-color);color:#0b2240;font-size:18px;margin:0}.input-section-div[_ngcontent-%COMP%]{background-color:#f8f8f8;position:fixed;bottom:1px;left:0;right:0;height:85px;padding:0}.footer-btn[_ngcontent-%COMP%]{padding:0;font-size:12px;width:110px;height:33px}[_nghost-%COMP%]     .ant-table-tbody>tr.ant-table-placeholder{text-align:center;display:none}.table-header-grey[_ngcontent-%COMP%]{background:#999!important}.table-header-green[_ngcontent-%COMP%]{background:var(--primary-color)!important}.table-body-grey[_ngcontent-%COMP%]{background:#e5e5e5!important}.table-body-white[_ngcontent-%COMP%]{background:#fff!important}.audio-call[_ngcontent-%COMP%]{position:relative;top:3px}.line[_ngcontent-%COMP%]{opacity:.2;border:1px solid #707070;width:85%;margin-left:15px;position:relative;top:8px}.download-staff[_ngcontent-%COMP%]{position:relative;top:3px}.divider[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]     .ant-select-single.ant-select-lg:not(.ant-select-customize-input) .ant-select-selector{height:37px;width:162px}.vital-divider[_ngcontent-%COMP%]{content:""}.vital-divider[_ngcontent-%COMP%]:before{border-right:2px solid #000;height:60%;position:absolute;right:0;bottom:4px;top:4px;content:""}.cdk-overlay-container[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:10px}.alert-table[_ngcontent-%COMP%]{height:100%;width:100%;padding-left:0;padding-right:0;padding-top:32px}.overlay-off[_ngcontent-%COMP%]{background-color:none;z-index:0}.chart-axis[_ngcontent-%COMP%]{font-weight:700;display:flex;margin-top:26px}.chart-axis[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{justify-content:center}.legend-item[_ngcontent-%COMP%]{display:inline-grid;align-items:center}.legend-name[_ngcontent-%COMP%]{font-size:14px;padding-left:20px;font-weight:800;color:#0b2240}.legend-circle[_ngcontent-%COMP%]{height:15px;width:15px;min-width:15px;border-radius:50%}.reference-name[_ngcontent-%COMP%]{padding-left:22px;margin-top:-26px}.round[_ngcontent-%COMP%]{position:relative;top:-9px;right:2px}.sub-name[_ngcontent-%COMP%]{padding-left:20px;margin-top:-32px;font-size:14px}.table-height[_ngcontent-%COMP%]{height:38px}.table-space[_ngcontent-%COMP%]{margin-top:10px}.vital-parameter[_ngcontent-%COMP%]{padding-left:38px}.vital-warn[_ngcontent-%COMP%]{color:#c71b1b}.text-black[_ngcontent-%COMP%]{color:#000}.share-icon[_ngcontent-%COMP%]{position:relative;top:2px}.alert-message[_ngcontent-%COMP%]{color:#0b2240}.bottom-note[_ngcontent-%COMP%]{margin-bottom:8px}.button-large[_ngcontent-%COMP%]{width:160px}.text-center[_ngcontent-%COMP%]{text-align:center}.bottom-spacer-div[_ngcontent-%COMP%]{height:85px;margin:16px}.midnight-green-label[_ngcontent-%COMP%]{color:var(--tertiary-color)!important}.w-100[_ngcontent-%COMP%]{width:100%}.summary-title[_ngcontent-%COMP%]{background:var(--primary-color);padding:10px;border-radius:5px;margin-bottom:0;font-weight:700;color:#000;font-size:15px}.summary-details[_ngcontent-%COMP%]{background:var(--neutral-color);border-radius:5px}.summary-value[_ngcontent-%COMP%]{padding-left:15px;color:#0b2240;font-weight:600}.p-top[_ngcontent-%COMP%]{padding-top:23px}.summary-shade[_ngcontent-%COMP%]{box-shadow:0 4px 8px 0 rgba(0,0,0,.2)}.bg-warn[_ngcontent-%COMP%]{padding-left:14px;margin-top:-20px}nz-select[_ngcontent-%COMP%]{font:normal normal normal 15px Nunito!important}.secondary-btn[_ngcontent-%COMP%]{background:#262626;border-width:1px;color:var(--primary-color)}.disabled[_ngcontent-%COMP%]{pointer-events:none}']}),t})();var jf=n("Xep9"),Yf=n("XNiG"),Bf=n("Osby"),Hf=n("Km6r"),Gf=n("WrBa");let $f=(()=>{class t{constructor(t){this._modalRef=t}ngOnInit(){this.successText=this.isVital?"SHARE_REPORT.SUCCESS_TEXT":"SHARE_REPORT.ASSESSMENT.SUCCESS_TEXT"}close(){this._modalRef.close()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(C.e))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-share-trend-report-success"]],inputs:{emailIds:"emailIds",isVital:"isVital"},decls:11,vars:7,consts:[[1,"success-text"],[1,"emails"],["nz-row","","nzAlign","middle","nzJustify","center",1,"buttons"],["nz-col",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(D.Xb(0,"div"),D.Xb(1,"div",0),D.Xc(2),D.jc(3,"translate"),D.Xb(4,"span",1),D.Xc(5),D.Wb(),D.Wb(),D.Xb(6,"div",2),D.Xb(7,"div",3),D.Xb(8,"button",4),D.ec("click",function(){return e.close()}),D.Xc(9),D.jc(10,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.Zc(" ",D.kc(3,3,e.successText),""),D.Db(3),D.Yc(e.emailIds.join(", ")),D.Db(4),D.Yc(D.kc(10,5,"COMMON.BTN_OK")))},directives:[k.c,k.a,X.a,E.a,T.a],pipes:[Vt.a],styles:[".success-text[_ngcontent-%COMP%]{text-align:center;font:normal normal 700 15px/23px Nunito}.emails[_ngcontent-%COMP%]{color:var(--primary-color)}.buttons[_ngcontent-%COMP%]{margin-top:16px!important}"]}),t})();function Zf(t,e){1&t&&D.Sb(0,"nz-option",25)}function qf(t,e){1&t&&D.Sb(0,"nz-option",26)}const Kf=function(){return[16,16]};function Qf(t,e){1&t&&(D.Xb(0,"div",2),D.Xb(1,"div",12),D.Xb(2,"label",27),D.Xc(3,"Required"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Kf))}const Jf=function(t){return{abnormal:t}};function tm(t,e){if(1&t&&(D.Xb(0,"span",28),D.Xc(1),D.Wb()),2&t){const t=e.$implicit,n=D.ic();D.rc("ngClass",D.yc(2,Jf,n.validateEmail(t.nzLabel))),D.Db(1),D.Zc(" ",t.nzLabel," ")}}function em(t,e){1&t&&(D.Xb(0,"div",2),D.Xb(1,"div",12),D.Xb(2,"label",27),D.Xc(3,"Required"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Kf))}function nm(t,e){1&t&&(D.Xb(0,"div",2),D.Xb(1,"div",12),D.Xb(2,"label",27),D.Xc(3,"A valid email address looks like example@email.com"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Kf))}function im(t,e){1&t&&(D.Xb(0,"div",2),D.Xb(1,"div",12),D.Xb(2,"label",27),D.Xc(3,"Required"),D.Wb(),D.Wb(),D.Wb()),2&t&&D.rc("nzGutter",D.xc(1,Kf))}const am=function(t){return{error:t}};let sm=(()=>{class t{constructor(t,e,n,i,a,s){this._translationService=t,this._analyticsService=e,this._notificationsService=n,this._modalRef=i,this._datePipe=a,this._modalService=s,this.errors=[],this.note="",this.loading=!1,this.isVital=!1,this.validateEmail=t=>!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}ngOnInit(){this.initType(),this.initialiseNoteString()}initType(){switch(null==this.type&&(this.type="vital"),this.type){case"vital":this.subjectType=this.subject="Vital Trend Report",this.reportType=Gf.a.VITAL_SNAPSHOT,this.typeTitle="Vital",this.header="BULK_ACTION.GENERATE_VITAL_REPORT",this.vitalType=this.context.toLowerCase().replace(/[\s+_]/g,"-"),this.isVital=!0;break;case"assessment":this.subjectType=this.subject="Assessment Trend Report",this.reportType=Gf.a.ASSESSMENT_SNAPSHOT,this.typeTitle="Assessment",this.header="BULK_ACTION.GENERATE_ASSESSMENT_REPORT",this.formBlueprintId=this.context,this.isVital=!1}this.fromDate=this.getShortDate(this.dateRange[0]),this.toDate=this.getShortDate(this.dateRange[1]),this.fromDateInMillis=this.dateRange[0].getTime(),this.toDateInMillis=this.dateRange[1].getTime()}initialiseNoteString(){const t=localStorage.getItem("loggedInUserName");this.note=`Hi,\n\n${this.typeTitle} trend reports for ${this.contextName} recordings between ${this.getMediumDateRange()}, have been shared with you by ${t.trim()} from ${this.tenantName}.\n\nThe reports can be downloaded from this {link}.\n\nThank you,\n${this.tenantName}`}getMediumDateRange(){return`${this.getMediumDate(this.dateRange[0])} - ${this.getMediumDate(this.dateRange[1])}`}getMediumDate(t){return this._datePipe.transform(t,"mediumDate")}validate(){var t,e,n,i,a;this.errors=[];const s=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return(null===(t=this.emailIds)||void 0===t?void 0:t.length)||this.errors.push("INVALID_EMAIL"),null===(e=this.emailIds)||void 0===e||e.forEach(t=>{var e;s.test(t)||-1!==(null===(e=this.errors)||void 0===e?void 0:e.findIndex(t=>"INVALID_EMAIL_FORMAT"===t))||this.errors.push("INVALID_EMAIL_FORMAT")}),(null===(n=this.subject)||void 0===n?void 0:n.length)||this.errors.push("INVALID_SUBJECT"),(null===(i=this.note)||void 0===i?void 0:i.length)||this.errors.push("INVALID_NOTE"),!(null===(a=this.errors)||void 0===a?void 0:a.length)}sendMail(){if(!this.validate())return;const t=this.generateShareObject();this.loading=!0,this._analyticsService.bulkExportReport(t).subscribe(()=>{this.loading=!1,this.showSuccess(),this._modalRef.destroy(!0)},t=>{this.loading=!1,this._notificationsService.error("Vital Trend Report","Error encountered while sharing report!")})}showSuccess(){return this._modalService.create({nzContent:$f,nzComponentParams:{emailIds:this.emailIds,isVital:this.isVital},nzWidth:"800px",nzBodyStyle:{padding:"30px",borderRadius:"15px",backgroundColor:"#f2f2f2"},nzFooter:null})}getShortDate(t){return this._datePipe.transform(t,"yyyy-MM-dd")}generateShareObject(){return{receiverEmailIds:this.emailIds,patientIds:this.patientIds,reportType:this.reportType,references:{startDate:this.fromDate,endDate:this.toDate,subject:this.subject,note:this.note,vitalType:this.vitalType,formBlueprintId:this.formBlueprintId,includeTMS:!0,includeVitals:!0,includeCMT:!0,includeNotes:!0,noteStartDate:this.fromDateInMillis,noteEndDate:this.toDateInMillis,cmtStart:this.fromDateInMillis,cmtEnd:this.toDateInMillis}}}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(Pe.a),D.Rb(Dg.a),D.Rb(A.b),D.Rb(C.e),D.Rb(c.e),D.Rb(C.f))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-share-trend-report"]],inputs:{dateRange:"dateRange",type:"type",tenantName:"tenantName",context:"context",contextName:"contextName",patientIds:"patientIds"},features:[D.Cb([c.e])],decls:42,vars:41,consts:[[1,"modal-title"],[1,"info"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24",1,"custom-dropdown"],["nzPlaceHolder","Subject",3,"ngModel","ngModelChange"],["nzValue","Vital Trend Report","nzLabel","Vital Trend Report",4,"ngIf"],["nzValue","Assessment Trend Report","nzLabel","Assessment Trend Report",4,"ngIf"],["nzValue","Notification from Cooey Health","nzLabel","Notification from Cooey Health"],["nzValue","Escalation from Cooey Health","nzLabel","Escalation from Cooey Health"],["nzValue","CUSTOM","nzLabel","Custom"],[1,"mail"],["nz-row","",3,"nzGutter","hidden"],["nz-col","","nzSpan","24"],["required","","nz-input","","placeholder","Subject","id","subjectModel","name","subjectModel",3,"ngModel","ngClass","ngModelChange"],["subjectModel","ngModel"],["nz-row","",3,"nzGutter",4,"ngIf"],["id","emailModel","name","emailModel","nzMode","tags","nzPlaceHolder","Email IDs",3,"ngModel","nzCustomTemplate","ngModelChange"],["emailModel","ngModel"],["defaultTemplate",""],[1,"preview-area"],["required","","rows","6","nz-input","","id","noteModel","name","noteModel",3,"placeholder","ngModel","ngClass","ngModelChange"],["noteModel","ngModel"],["nz-row","","nzAlign","middle","nzJustify","end",1,"button-area",3,"nzGutter"],["nz-col",""],["nz-button","","nzType","primary",3,"nzLoading","click"],["nzValue","Vital Trend Report","nzLabel","Vital Trend Report"],["nzValue","Assessment Trend Report","nzLabel","Assessment Trend Report"],["nz-typography","","nzType","danger"],[3,"ngClass"]],template:function(t,e){if(1&t&&(D.Xb(0,"div"),D.Xb(1,"strong",0),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"div",1),D.Xb(5,"p"),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Wb(),D.Xb(8,"div",2),D.Xb(9,"div",3),D.Xb(10,"nz-select",4),D.ec("ngModelChange",function(t){return e.subjectType=t})("ngModelChange",function(t){return e.subject=t}),D.Vc(11,Zf,1,0,"nz-option",5),D.Vc(12,qf,1,0,"nz-option",6),D.Sb(13,"nz-option",7),D.Sb(14,"nz-option",8),D.Sb(15,"nz-option",9),D.Wb(),D.Wb(),D.Wb(),D.Xb(16,"div",10),D.Xb(17,"div",11),D.Xb(18,"div",12),D.Xb(19,"input",13,14),D.ec("ngModelChange",function(t){return e.subject=t}),D.Wb(),D.Wb(),D.Wb(),D.Vc(21,Qf,4,2,"div",15),D.Xb(22,"div",2),D.Xb(23,"div",12),D.Xb(24,"nz-select",16,17),D.ec("ngModelChange",function(t){return e.emailIds=t})("ngModelChange",function(){return e.validate()}),D.Wb(),D.Vc(26,tm,2,4,"ng-template",null,18,D.Wc),D.Wb(),D.Wb(),D.Vc(28,em,4,2,"div",15),D.Vc(29,nm,4,2,"div",15),D.Wb(),D.Xb(30,"div",19),D.Xb(31,"div",2),D.Xb(32,"div",12),D.Xb(33,"textarea",20,21),D.ec("ngModelChange",function(t){return e.note=t}),D.jc(35,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Vc(36,im,4,2,"div",15),D.Xb(37,"div",22),D.Xb(38,"div",23),D.Xb(39,"button",24),D.ec("click",function(){return e.sendMail()}),D.Xc(40),D.jc(41,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(20),n=D.Ic(27),i=D.Ic(34);D.Db(2),D.Yc(D.kc(3,24,e.header)),D.Db(4),D.Yc(D.kc(7,26,"SHARE_REPORT.GENERATE_INFO")),D.Db(2),D.rc("nzGutter",D.xc(32,Kf)),D.Db(2),D.rc("ngModel",e.subjectType),D.Db(1),D.rc("ngIf","vital"==e.type),D.Db(1),D.rc("ngIf","assessment"==e.type),D.Db(5),D.rc("nzGutter",D.xc(33,Kf))("hidden","CUSTOM"!==e.subjectType),D.Db(2),D.rc("ngModel",e.subject)("ngClass",D.yc(34,am,((null==t?null:t.dirty)||(null==t?null:t.touched))&&(null==t?null:t.invalid)&&!(null==t||!t.errors.required))),D.Db(2),D.rc("ngIf",(null==t?null:t.invalid)&&((null==t?null:t.dirty)||(null==t?null:t.touched))&&(null==t?null:t.errors.required)),D.Db(1),D.rc("nzGutter",D.xc(36,Kf)),D.Db(2),D.rc("ngModel",e.emailIds)("nzCustomTemplate",n),D.Db(4),D.rc("ngIf",!!e.errors.includes("INVALID_EMAIL")),D.Db(1),D.rc("ngIf",!!e.errors.includes("INVALID_EMAIL_FORMAT")),D.Db(2),D.rc("nzGutter",D.xc(37,Kf)),D.Db(2),D.sc("placeholder",D.kc(35,28,"ASSESSMENT.TYPE_MSG")),D.rc("ngModel",e.note)("ngClass",D.yc(38,am,((null==i?null:i.dirty)||(null==i?null:i.touched))&&(null==i?null:i.invalid)&&!(null==i||!i.errors.required))),D.Db(3),D.rc("ngIf",(null==i?null:i.invalid)&&((null==i?null:i.dirty)||(null==i?null:i.touched))&&(null==i?null:i.errors.required)),D.Db(1),D.rc("nzGutter",D.xc(40,Kf)),D.Db(2),D.rc("nzLoading",e.loading),D.Db(1),D.Yc(D.kc(41,30,"PATIENTS.GENERATEREPORTSTART"))}},directives:[k.c,k.a,x.d,d.u,d.x,c.q,x.a,je.b,d.d,d.C,c.o,X.a,E.a,T.a,V.a],pipes:[Vt.a],styles:[".modal-title[_ngcontent-%COMP%]{padding-left:8px;font:normal normal 700 14px/19px Nunito;border-left:2px solid var(--primary-color)}.info[_ngcontent-%COMP%]{margin-top:8px}.button-area[_ngcontent-%COMP%]{margin-top:16px!important}"]}),t})(),om=(()=>{class t{constructor(t){this._modalService=t}createModal(t,e,n,i,a,s){return this._modalService.create({nzContent:sm,nzComponentParams:{dateRange:t,type:e,context:n,contextName:i,tenantName:a,patientIds:s},nzWidth:"800px",nzBodyStyle:{padding:"30px",borderRadius:"15px",backgroundColor:"#f2f2f2"},nzFooter:null})}}return t.\u0275fac=function(e){return new(e||t)(D.bc(C.f))},t.\u0275prov=D.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var lm=n("zgU5");function rm(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-option",16),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",t)("nzLabel",null==t?null:t.label)}}function cm(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",12),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"div",13),D.Xb(5,"nz-select",14),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().vitalFilter=e})("ngModelChange",function(){return D.Lc(t),D.ic().contextTypeChanged()}),D.jc(6,"translate"),D.Vc(7,rm,2,2,"ng-container",15),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(2),D.Zc(" ",D.kc(3,5,"PARAMETERS.TITLE")," "),D.Db(3),D.tc("nzPlaceHolder"," ",D.kc(6,7,"VITAL.SELECT_VITAL")," "),D.rc("nzLoading",t.loadingVitals)("ngModel",t.vitalFilter),D.Db(2),D.rc("ngForOf",t.vitalBlueprints)}}function dm(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-option",16),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",t)("nzLabel",null==t?null:t.title)}}function bm(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Xb(1,"div",17),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"div",13),D.Xb(5,"nz-select",14),D.ec("ngModelChange",function(e){return D.Lc(t),D.ic().formId=e})("ngModelChange",function(){return D.Lc(t),D.ic().contextTypeChanged()}),D.jc(6,"translate"),D.Vc(7,dm,2,2,"ng-container",15),D.Wb(),D.Wb(),D.Ub()}if(2&t){const t=D.ic();D.Db(2),D.Zc(" ",D.kc(3,5,"ASSESSMENT.TITLE")," "),D.Db(3),D.tc("nzPlaceHolder"," ",D.kc(6,7,"Select Assessment Type")," "),D.rc("nzLoading",t.loadingForms)("ngModel",t.formId),D.Db(2),D.rc("ngForOf",t.formblueprints)}}let um=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r){super(),this._activatedRoute=t,this._translationService=e,this._vitalBlueprintsService=n,this._patientUrlService=i,this._formsService=a,this._dataSharingService=s,this._shareTrendReportModalService=o,this._datePipe=l,this._subTenatToggleHelper=r,this.dateRange=[],this.today=new Date,this.dateFormat="dd MMM yyyy",this.listOfAllPatients=[],this.patientRequests$=new Yf.a,this.checked=!1,this.indeterminate=!1,this.listOfCurrentPageData=[],this.listOfData=[],this.setOfCheckedId=new Set,this.disableButton=!0,this.disabledDate=t=>Object(un.a)(t,this.today)>0,this.onPrimaryAction=t=>this.generateReport(),this.setupReportType()}setupReportType(){this._activatedRoute.params.forEach(t=>{this.type=t.type})}ngOnInit(){const t=Object(jf.a)(new Date,7),e=Object(jf.a)(new Date,14),n=Object(jf.a)(new Date,20),i=Object(jf.a)(new Date,30);this.ranges={"Last 7 days":[t,new Date],"Last 14 days":[e,new Date],"Last 20 days":[n,new Date],"Last 30 days":[i,new Date]},this.dateRange=[Object(jf.a)(new Date,30),new Date],this._subTenatToggleHelper.setRequestTenantId(),this.getTranslatedStrings(),this.subscribeToActivatedRoute(),this.updateContextData(),this.onSubTenantChange()}onSubTenantChange(){this._dataSharingService.onSubTenantChange().pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.updateContextData()})}subscribeToActivatedRoute(){this.activatedRoute.queryParams.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{var e,n,i;const a=this._patientUrlService.getParameterValue("d1"),s=this._patientUrlService.getParameterValue("d2");a&&s&&(this.dateRange=[a,s]),this.filter=this._patientUrlService.getParameterValue("filter"),this.vitalType=this._patientUrlService.getParameterValue("vitalFilter"),this.assessmentId=this._patientUrlService.getParameterValue("assessmentFilter"),this.vitalFilter=null===(e=this.vitalBlueprints)||void 0===e?void 0:e.find(t=>t.type===this.vitalType),this.formId=null===(n=this.formblueprints)||void 0===n?void 0:n.find(t=>t.id===this.assessmentId),this.vitalType||this.assessmentId?this.getPatientsList():null===(i=this._bulkListComponent)||void 0===i||i.clearAll()})}getTranslatedStrings(){this.LAST_DAYS_LABEL="",this._translationService.get("REPORT.META_BASE_REPORTS.SELECT_LAST_DAYS").subscribe(t=>this.LAST_DAYS_LABEL=t),this._translationService.getMultiple(...Ne.STRINGS).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.translatedStrings=t})}updateContextData(){switch(this.type){case"vital":this.title="BULK_ACTION.GENERATE_VITAL_REPORT",this.actionHint="BULK_ACTION.VITAL_ACTION_HINT",this.defaultHint="BULK_ACTION.VITAL_DEFAULT_TEXT",this.loadTenantBlueprint();break;case"assessment":this.title="BULK_ACTION.GENERATE_ASSESSMENT_REPORT",this.actionHint="BULK_ACTION.ASSESSMENT_ACTION_HINT",this.defaultHint="BULK_ACTION.ASSESSMENT_DEFAULT_TEXT",this.loadFormBlueprint()}this._dataSharingService.tenantSettings.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.tenantName=null==t?void 0:t.tenantName})}loadTenantBlueprint(){this.loadingVitals=!0,this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(t=>{var e;this.vitalBlueprints=t.filter(t=>t.active),this.vitalBlueprints.sort((t,e)=>t.label.localeCompare(e.label)),this.loadingVitals=!1,this.vitalFilter=null===(e=this.vitalBlueprints)||void 0===e?void 0:e.find(t=>t.type===this.vitalType),this.getPatientsList()})}loadFormBlueprint(){this.loadingForms=!0,this._formsService.getForms(0,100,"").subscribe(t=>{var e;this.formblueprints=[],t.data.forms.obj.forEach(t=>{t.type===Bf.e.SCORED_ASSESSMENT&&this.formblueprints.push({id:t._id,title:t.title})}),this.loadingForms=!1,this.formId=null===(e=this.formblueprints)||void 0===e?void 0:e.find(t=>t.id===this.assessmentId),this.getPatientsList()},()=>{this.loadingForms=!1})}getLastDays(t){return this.LAST_DAYS_LABEL.replace("{DAYS_COUNT}",`${t}`)}dateChanged(t){this._bulkListComponent.clearAll(),this.startDateStr=this._datePipe.transform(t[0],"yyyy-MM-dd"),this.endDateStr=this._datePipe.transform(t[1],"yyyy-MM-dd"),this.getPatientsList()}refreshCheckedStatus(){var t,e;this.checked=this.setOfCheckedId.size>0&&this.listOfAllPatients.length==this.setOfCheckedId.size,this.indeterminate=!this.checked&&this.setOfCheckedId.size>0,this.disableButton=!(((null===(t=this.vitalFilter)||void 0===t?void 0:t.type)||(null===(e=this.formId)||void 0===e?void 0:e.id))&&this.setOfCheckedId.size>0)}contextTypeChanged(){var t,e;switch(this.type){case"vital":this.filter=ta.a.VITALS_ACTIVITY,this._patientUrlService.setParameter({filter:this.filter,vitalFilter:null===(t=this.vitalFilter)||void 0===t?void 0:t.type},!1,!0);break;case"assessment":this.filter=ta.a.ASSESSMENT_ACTIVITY,this._patientUrlService.setParameter({filter:this.filter,assessmentFilter:null===(e=this.formId)||void 0===e?void 0:e.id},!1,!0)}}getPatientsList(){var t,e,n;null==this.vitalFilter&&null==this.formId||0==(null===(t=this.dateRange)||void 0===t?void 0:t.length)||this._bulkListComponent.getPatientsList({dateRange:this.dateRange,filter:this.filter,vitalFilter:null===(e=this.vitalFilter)||void 0===e?void 0:e.type,assessmentFilter:null===(n=this.formId)||void 0===n?void 0:n.id})}generateReport(){var t,e,n,i;let a=(null===(t=this.vitalFilter)||void 0===t?void 0:t.type)||(null===(e=this.formId)||void 0===e?void 0:e.id),s=(null===(n=this.vitalFilter)||void 0===n?void 0:n.label)||(null===(i=this.formId)||void 0===i?void 0:i.title);this._shareTrendReportModalService.createModal(this.dateRange,this.type,a,s,this.tenantName,Array.from(this.setOfCheckedId)).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{t&&(this.vitalFilter=null,this.formId=null,this._bulkListComponent.clearAll(),this._patientUrlService.setParameter({filter:null,vitalFilter:null,assessmentFilter:null},!0,!0))})}updateSelectedPatients(t){this.setOfCheckedId=t,this.refreshCheckedStatus()}updatePatientList(t){this.listOfAllPatients=t}onSecondaryAction(t){null!=this._bulkListComponent&&this._bulkListComponent.clearPatientSelection(),this.setOfCheckedId.clear()}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.a),D.Rb(Pe.a),D.Rb(Hb.a),D.Rb(Re.a),D.Rb(gn.a),D.Rb(Oe.a),D.Rb(om),D.Rb(c.e),D.Rb(lm.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-patient-bulk-trend-report"]],viewQuery:function(t,e){if(1&t&&D.ed(Hf.a,1),2&t){let t;D.Hc(t=D.fc())&&(e._bulkListComponent=t.first)}},features:[D.Cb([c.e,la.a]),D.Ab],decls:17,vars:22,consts:[["title","dashboard",3,"defaultTitle","isSearchEnabled","isActionEnabled"],[1,"container"],["nz-row","",1,"top-row"],["nz-col","","nzFlex","1"],["nz-row","","nzAlign","middle"],["nz-col","","nzFlex","35px"],["nz-col","","nzFlex","280px"],[3,"ngModel","nzDisabledDate","nzFormat","nzRanges","ngModelChange"],[4,"ngIf"],["nz-row","",1,"top-row",3,"nzGutter"],["nz-col","",3,"nzSpan"],["secondaryActionText","Clear Selection",3,"hideActionItems","tableActionHint","defaultHint","primaryActionText","onUserSelectionChange","onPatientListUpdated","onPrimaryAction","onSecondaryAction"],["nz-col","","nzFlex","75px"],["nz-col","","nzFlex","250px"],["id","blueprint-selector",3,"nzLoading","ngModel","nzPlaceHolder","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nz-col","","nzFlex","80px"]],template:function(t,e){1&t&&(D.Sb(0,"app-header",0),D.jc(1,"translate"),D.Xb(2,"div",1),D.Xb(3,"div",2),D.Xb(4,"div",3),D.Xb(5,"div",4),D.Xb(6,"div",5),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Xb(9,"div",6),D.Xb(10,"nz-range-picker",7),D.ec("ngModelChange",function(t){return e.dateRange=t})("ngModelChange",function(t){return e.dateChanged(t)}),D.Wb(),D.Wb(),D.Vc(11,cm,8,9,"ng-container",8),D.Vc(12,bm,8,9,"ng-container",8),D.Wb(),D.Wb(),D.Wb(),D.Xb(13,"div",9),D.Xb(14,"div",10),D.Xb(15,"app-bulk-patient-list",11),D.ec("onUserSelectionChange",function(t){return e.updateSelectedPatients(t)})("onPatientListUpdated",function(t){return e.updatePatientList(t)})("onPrimaryAction",function(t){return e.onPrimaryAction(t)})("onSecondaryAction",function(t){return e.onSecondaryAction(t)}),D.jc(16,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t&&(D.sc("defaultTitle",D.kc(1,16,e.title)),D.rc("isSearchEnabled",!1)("isActionEnabled",!1),D.Db(7),D.Zc(" ",D.kc(8,18,"COMMON.DATE")," "),D.Db(3),D.rc("ngModel",e.dateRange)("nzDisabledDate",e.disabledDate)("nzFormat",e.dateFormat)("nzRanges",e.ranges),D.Db(1),D.rc("ngIf","vital"==e.type),D.Db(1),D.rc("ngIf","assessment"==e.type),D.Db(1),D.rc("nzGutter",64),D.Db(1),D.rc("nzSpan",24),D.Db(1),D.sc("primaryActionText",D.kc(16,20,"PATIENTS.GENERATEREPORTSTART")),D.rc("hideActionItems",!0)("tableActionHint",e.actionHint)("defaultHint",e.defaultHint))},directives:[P.a,k.c,k.a,te.a,te.c,d.u,d.x,c.q,Hf.a,x.d,c.p,x.a],pipes:[Vt.a],styles:["[_nghost-%COMP%]{width:90%}h3[_ngcontent-%COMP%]{margin-bottom:10px}nz-select[_ngcontent-%COMP%]{display:block;width:250px}p[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:10px}nz-range-picker[_ngcontent-%COMP%]{width:250px}.input-label[_ngcontent-%COMP%]{display:block;color:var(--tertiary-color);line-height:2.5}app-patient-searcher[_ngcontent-%COMP%]{margin-bottom:20px}[_nghost-%COMP%]     app-patient-searcher nz-select{display:block;width:420px}.date-range-select[_ngcontent-%COMP%]{max-width:250px;display:flex;flex-direction:row;align-items:baseline;justify-content:space-between}[_nghost-%COMP%]     .ant-checkbox-wrapper{padding-left:16px;padding-right:8px;border-spacing:0!important}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}.selected-info[_ngcontent-%COMP%]{padding-left:16px}.top-row[_ngcontent-%COMP%]{margin-top:10px}"]}),t})();var pm=n("GMnC"),hm=n("M34a"),gm=n("/j2M"),fm=n("tahh"),mm=n("OEtX");const vm=["chart"];function Sm(t,e){1&t&&D.Sb(0,"app-icons",67)}function Im(t,e){1&t&&(D.Xb(0,"strong",68),D.Xc(1,"Showing alert raised for Assessment score"),D.Wb())}function Dm(t,e){1&t&&(D.Xb(0,"strong",68),D.Xc(1,"This alert has been closed"),D.Wb())}function Cm(t,e){if(1&t&&(D.Xb(0,"nz-table",69),D.Xb(1,"tr",70),D.Xb(2,"th",71),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"th",72),D.Xc(6," Assessment "),D.Wb(),D.Xb(7,"th",72),D.Xc(8," Score "),D.Wb(),D.Xb(9,"th",72),D.Xc(10," Risk "),D.Wb(),D.Wb(),D.Xb(11,"tr",73),D.Xb(12,"td",71),D.Xc(13),D.jc(14,"date"),D.Wb(),D.Xb(15,"td",72),D.Xc(16),D.Wb(),D.Xb(17,"td",74),D.Xc(18),D.Wb(),D.Xb(19,"td",72),D.Xc(20),D.Wb(),D.Wb(),D.Sb(21,"br"),D.Wb()),2&t){const t=D.ic();D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(4,13,"PARAMETERS.MEASUREDON")," "),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(3),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.lc(14,15,null==t.alertData?null:t.alertData.createdOn,"MMM dd yyyy, hh:mm a")," "),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",null==t.alertData?null:t.alertData.alertMessageParameters.FORM_NAME," "),D.Db(1),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",t.score," "),D.Db(1),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",t.risk," ")}}const Xm=function(){return{top:"270px",left:"200px",position:"absolute"}};function Em(t,e){if(1&t&&(D.Xb(0,"nz-table",75),D.Xb(1,"tr",70),D.Xb(2,"th",71),D.Xc(3),D.jc(4,"translate"),D.Wb(),D.Xb(5,"th",72),D.Xc(6," Assessment "),D.Wb(),D.Xb(7,"th",72),D.Xc(8," Score "),D.Wb(),D.Xb(9,"th",72),D.Xc(10," Risk "),D.Wb(),D.Wb(),D.Xb(11,"tr",73),D.Xb(12,"td",71),D.Xc(13),D.jc(14,"date"),D.Wb(),D.Xb(15,"td",72),D.Xc(16),D.Wb(),D.Xb(17,"td",74),D.Xc(18),D.Wb(),D.Xb(19,"td",72),D.Xc(20),D.Wb(),D.Wb(),D.Sb(21,"br"),D.Wb()),2&t){const t=D.ic();D.rc("position",D.xc(19,Xm)),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(1),D.Zc(" ",D.kc(4,14,"PARAMETERS.MEASUREDON")," "),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-header-grey":"table-header-green"),D.Db(3),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",D.lc(14,16,null==t.alertData?null:t.alertData.createdOn,"MMM dd yyyy, hh:mm a")," "),D.Db(2),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",null==t.alertData?null:t.alertData.alertMessageParameters.FORM_NAME," "),D.Db(1),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",t.score," "),D.Db(1),D.rc("ngClass","CLOSED"==(null==t.alertData?null:t.alertData.status)?"table-body-grey":"table-body-white"),D.Db(1),D.Zc(" ",t.risk," ")}}function Tm(t,e){if(1&t&&(D.Vb(0),D.Sb(1,"nz-option",76),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.rc("nzValue",null==t?null:t.formId)("nzLabel",null==t?null:t.formName)}}function zm(t,e){1&t&&(D.Xb(0,"span",78),D.Xc(1," ( "),D.Sb(2,"span",79),D.Xc(3," Primary )"),D.Wb())}function _m(t,e){1&t&&(D.Vb(0),D.Xc(1,",\xa0"),D.Ub())}function ym(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"strong"),D.Xc(2),D.Wb(),D.Vc(3,zm,4,0,"span",77),D.Vc(4,_m,2,0,"ng-container",45),D.jc(5,"keyvalue"),D.Ub()),2&t){const t=e.$implicit,n=e.index,i=D.ic();let a=null;D.Db(2),D.Zc("",t.key," "),D.Db(1),D.rc("ngIf","PRIMARY"==t.value),D.Db(1),D.rc("ngIf",n!==(null==(a=D.kc(5,3,i.staffNameTypeMap))?null:a.length)-1)}}function Om(t,e){if(1&t&&(D.Vb(0),D.Xc(1),D.Ub()),2&t){const t=e.$implicit;D.Db(1),D.Zc(" ",t,"; ")}}function Mm(t,e){if(1&t&&D.Sb(0,"nz-step",97),2&t){const t=e.index;D.ic();const n=D.Ic(3),i=D.Ic(5),a=D.ic(2);D.rc("nzDescription",t==a.riskIndex?n:null)("nzTitle",t==a.riskIndex?i:"")}}function Am(t,e){1&t&&D.Sb(0,"app-icons",98)}function Pm(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xc(1),D.Wb(),D.Xc(2)),2&t){const t=D.ic(3);D.Db(1),D.Yc(null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].score),D.Db(1),D.Zc(": ",t.lastMeasuredRisk,"")}}function Nm(t,e){if(1&t){const t=D.Yb();D.Xb(0,"nz-steps",86),D.ec("nzIndexChange",function(e){return D.Lc(t),D.ic(2).onIndexChange(e)}),D.Vc(1,Mm,1,2,"nz-step",94),D.Vc(2,Am,1,0,"ng-template",null,95,D.Wc),D.Vc(4,Pm,3,2,"ng-template",null,96,D.Wc),D.Wb()}if(2&t){const t=D.ic(2);D.rc("nzCurrent",t.index)("nzType",t.default),D.Db(1),D.rc("ngForOf",t.range)}}function Wm(t,e){if(1&t&&D.Sb(0,"nz-step",99),2&t){const t=e.$implicit;D.uc("nzTitle","",null==t?null:t.startRange," - ",null==t?null:t.endRange,"")}}function Rm(t,e){if(1&t&&(D.Xb(0,"div",91),D.Xb(1,"strong"),D.Xc(2),D.Wb(),D.Xc(3),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.ad("",t.startRange,"-",t.endRange," "),D.Db(1),D.Zc(" : ",t.identification," ")}}function xm(t,e){if(1&t&&(D.Xb(0,"div",21),D.Vc(1,Rm,4,3,"div",100),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngForOf",t)}}function wm(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div"),D.Xb(1,"div",80),D.Xb(2,"div",81),D.Xb(3,"label",82),D.Xb(4,"strong"),D.Xc(5),D.Wb(),D.Wb(),D.Xb(6,"p",83),D.Xc(7),D.jc(8,"date"),D.Wb(),D.Xb(9,"div",84),D.Vc(10,Nm,6,3,"nz-steps",85),D.Xb(11,"nz-steps",86),D.ec("nzIndexChange",function(e){return D.Lc(t),D.ic().onIndexChange(e)}),D.Vc(12,Wm,1,2,"nz-step",87),D.Wb(),D.Wb(),D.Wb(),D.Sb(13,"div",88),D.Xb(14,"div",89),D.Xb(15,"h5",90),D.Xc(16,"Reference Range"),D.Wb(),D.Xb(17,"h4"),D.Xc(18),D.Xb(19,"span",91),D.Xc(20,"Score between"),D.Wb(),D.Wb(),D.Xb(21,"div",92),D.Vc(22,xm,2,1,"div",93),D.Wb(),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(5),D.Zc("Last Assessed ",null==t.assessmentTrend||null==t.assessmentTrend.snapshot?null:t.assessmentTrend.snapshot.assessment," score "),D.Db(2),D.Yc(D.lc(8,8,null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].assessedOn,"MMMM d y")),D.Db(3),D.rc("ngIf",null!=(null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].score)),D.Db(1),D.rc("nzCurrent",t.index)("nzType",t.default),D.Db(1),D.rc("ngForOf",t.range),D.Db(6),D.Zc("",null==t.assessmentTrend||null==t.assessmentTrend.snapshot?null:t.assessmentTrend.snapshot.assessment," "),D.Db(4),D.rc("ngForOf",t.refRange)}}function Vm(t,e){if(1&t&&D.Sb(0,"nz-step",97),2&t){const t=e.index;D.ic();const n=D.Ic(12),i=D.Ic(14),a=D.ic();D.rc("nzDescription",t==a.riskIndex?n:null)("nzTitle",t==a.riskIndex?i:"")}}function Lm(t,e){1&t&&D.Sb(0,"app-icons",98)}function km(t,e){if(1&t&&(D.Xb(0,"strong"),D.Xc(1),D.Wb(),D.Xc(2)),2&t){const t=D.ic(2);D.Db(1),D.Yc(null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].score),D.Db(1),D.Zc(": ",t.lastMeasuredRisk,"")}}function Fm(t,e){if(1&t&&D.Sb(0,"nz-step",99),2&t){const t=e.$implicit;D.uc("nzTitle","",null==t?null:t.startRange," - ",null==t?null:t.endRange,"")}}function Um(t,e){if(1&t&&(D.Xb(0,"div",91),D.Xb(1,"strong"),D.Xc(2),D.Wb(),D.Xc(3),D.Wb()),2&t){const t=e.$implicit;D.Db(2),D.ad("",t.startRange,"-",t.endRange," "),D.Db(1),D.Zc(" : ",t.identification," ")}}function jm(t,e){if(1&t&&(D.Xb(0,"div",21),D.Vc(1,Um,4,3,"div",100),D.Wb()),2&t){const t=e.$implicit;D.Db(1),D.rc("ngForOf",t)}}function Ym(t,e){if(1&t){const t=D.Yb();D.Xb(0,"div"),D.Xb(1,"div",80),D.Xb(2,"div",101),D.Xb(3,"label",82),D.Xb(4,"strong"),D.Xc(5),D.Wb(),D.Wb(),D.Xb(6,"p",83),D.Xc(7),D.jc(8,"date"),D.Wb(),D.Xb(9,"nz-steps",86),D.ec("nzIndexChange",function(e){return D.Lc(t),D.ic().onIndexChange(e)}),D.Vc(10,Vm,1,2,"nz-step",94),D.Vc(11,Lm,1,0,"ng-template",null,95,D.Wc),D.Vc(13,km,3,2,"ng-template",null,96,D.Wc),D.Wb(),D.Xb(15,"nz-steps",86),D.ec("nzIndexChange",function(e){return D.Lc(t),D.ic().onIndexChange(e)}),D.Vc(16,Fm,1,2,"nz-step",87),D.Wb(),D.Wb(),D.Wb(),D.Xb(17,"div",80),D.Xb(18,"div",102),D.Xb(19,"h5",90),D.Xc(20,"Reference Range"),D.Wb(),D.Xb(21,"h4"),D.Xc(22),D.Xb(23,"span",91),D.Xc(24,"Score between"),D.Wb(),D.Wb(),D.Xb(25,"div",92),D.Vc(26,jm,2,1,"div",93),D.Wb(),D.Wb(),D.Wb(),D.Wb()}if(2&t){const t=D.ic();D.Db(5),D.Zc("Last Assessed ",null==t.assessmentTrend||null==t.assessmentTrend.snapshot?null:t.assessmentTrend.snapshot.assessment," score "),D.Db(2),D.Yc(D.lc(8,10,null==t.assessmentTrend||null==t.assessmentTrend.snapshot||null==t.assessmentTrend.snapshot.forms[0]?null:t.assessmentTrend.snapshot.forms[0].assessedOn,"MMMM d y")),D.Db(2),D.rc("nzCurrent",t.index)("nzType",t.default),D.Db(1),D.rc("ngForOf",t.range),D.Db(5),D.rc("nzCurrent",t.index)("nzType",t.default),D.Db(1),D.rc("ngForOf",t.range),D.Db(6),D.Zc("",null==t.assessmentTrend||null==t.assessmentTrend.snapshot?null:t.assessmentTrend.snapshot.assessment," "),D.Db(4),D.rc("ngForOf",t.refRange)}}function Bm(t,e){if(1&t&&(D.Xb(0,"h3",44),D.Xc(1),D.Wb()),2&t){const t=D.ic();D.Db(1),D.Yc(t.graphTitle)}}function Hm(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",21),D.Xb(2,"div",106),D.Xb(3,"div",107),D.Xb(4,"div",21),D.Xb(5,"span",108),D.Xc(6),D.jc(7,"translate"),D.Wb(),D.Xb(8,"p",109),D.Xc(9),D.jc(10,"date"),D.Wb(),D.Wb(),D.Xb(11,"div",110),D.Xb(12,"span",111),D.Xc(13),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit;D.Db(6),D.Zc("",D.kc(7,3,"FORMS_TREND.TOTAL_ASSESSMENT_SCORE")," On"),D.Db(3),D.Yc(D.lc(10,5,t.accessedOn,"d MMMM, y")),D.Db(4),D.Yc(t.score)}}function Gm(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",21),D.Xb(2,"div",112),D.Xb(3,"div",113),D.Xc(4,"Answer"),D.Wb(),D.Xb(5,"div",114),D.Xc(6,"Score"),D.Wb(),D.Wb(),D.Wb(),D.Ub()),2&t){const t=D.ic(2);D.Db(5),D.rc("nzFlex",1/t.overallAnswer.length+" 0 75px")}}function $m(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",21),D.Xb(2,"div",117),D.Xb(3,"div",113),D.Xc(4),D.Wb(),D.Xb(5,"div",118),D.Xc(6),D.Wb(),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit,n=D.ic().index,i=D.ic(2);D.Db(4),D.Yc(t[n].answer),D.Db(1),D.rc("nzFlex",1/i.overallAnswer.length+" 0 75px"),D.Db(1),D.Zc(" ",t[n].score," ")}}function Zm(t,e){if(1&t&&(D.Vb(0),D.Xb(1,"div",43),D.Xb(2,"div",103),D.Xb(3,"div",115),D.Xb(4,"p"),D.Xc(5),D.Wb(),D.Wb(),D.Wb(),D.Xb(6,"div",21),D.Xb(7,"div",116),D.Vc(8,$m,7,3,"ng-container",25),D.Wb(),D.Wb(),D.Wb(),D.Ub()),2&t){const t=e.$implicit,n=D.ic(2);D.Db(5),D.Yc(t),D.Db(3),D.rc("ngForOf",n.overallAnswer)}}function qm(t,e){if(1&t&&(D.Xb(0,"div",13),D.Xb(1,"div"),D.Xb(2,"div",43),D.Xb(3,"div",103),D.Sb(4,"br"),D.Xb(5,"div",43),D.Xb(6,"h3",44),D.Xc(7),D.jc(8,"translate"),D.jc(9,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Sb(10,"div",104),D.Xb(11,"div",21),D.Xb(12,"div",43),D.Vc(13,Hm,14,8,"ng-container",25),D.Wb(),D.Wb(),D.Wb(),D.Xb(14,"div",43),D.Xb(15,"div",105),D.Xc(16," Assessment Question "),D.Wb(),D.Xb(17,"div",21),D.Xb(18,"div",43),D.Vc(19,Gm,7,1,"ng-container",25),D.Wb(),D.Wb(),D.Wb(),D.Vc(20,Zm,9,2,"ng-container",25),D.Wb(),D.Sb(21,"br"),D.Wb()),2&t){const t=D.ic();D.Db(7),D.ad(" ",D.kc(8,5,"FORMS_TREND.ASSESSMENT_QUESTION")," and ",D.kc(9,7,"FORMS_TREND.SCORE")," "),D.Db(6),D.rc("ngForOf",t.totalAllScore),D.Db(6),D.rc("ngForOf",t.overallAnswer),D.Db(1),D.rc("ngForOf",t.onlyQuestions)}}function Km(t,e){1&t&&(D.Xb(0,"button",119),D.Sb(1,"app-icons",120),D.Wb())}function Qm(t,e){if(1&t){const t=D.Yb();D.Xb(0,"button",121),D.ec("click",function(){return D.Lc(t),D.ic().closeAlert()}),D.Xc(1),D.jc(2,"translate"),D.Wb()}2&t&&(D.Db(1),D.Zc(" ",D.kc(2,1,"MARKED_AS_CLOSED")," "))}function Jm(t,e){if(1&t&&(D.Xb(0,"button",122),D.Xc(1," Add CMT"),D.Sb(2,"i",123),D.Wb()),2&t){D.ic();const t=D.Ic(189);D.rc("nzDropdownMenu",t)("nzSize","large")}}function tv(t,e){1&t&&D.Tb(0)}function ev(t,e){1&t&&(D.Vb(0),D.Xc(1,"TMS"),D.Ub())}function nv(t,e){1&t&&(D.Vb(0),D.Xc(1,"BHI-CMT"),D.Ub())}function iv(t,e){1&t&&(D.Vb(0),D.Xc(1,"BHI-CMT"),D.Ub())}function av(t,e){1&t&&(D.Vb(0),D.Xc(1,"CCM-CMT"),D.Ub())}function sv(t,e){if(1&t){const t=D.Yb();D.Vb(0),D.Vc(1,tv,1,0,"ng-container",45),D.Xb(2,"li",124),D.ec("click",function(){D.Lc(t);const n=e.$implicit;return D.ic().onCMTClick(n)}),D.Vc(3,ev,2,0,"ng-container",125),D.Vc(4,nv,2,0,"ng-container",125),D.Vc(5,iv,2,0,"ng-container",125),D.Vc(6,av,2,0,"ng-container",125),D.Wb(),D.Ub()}if(2&t){const t=e.$implicit;D.Db(1),D.rc("ngIf",!(null!=t&&t.archived)),D.Db(1),D.rc("ngSwitch",null==t?null:t.type),D.Db(1),D.rc("ngSwitchCase","RPM"),D.Db(1),D.rc("ngSwitchCase","GENERAL"),D.Db(1),D.rc("ngSwitchCase","BHI"),D.Db(1),D.rc("ngSwitchCase","CCM")}}const ov=function(){return[32,6]},lv=function(){return[32,8]},rv=function(t){return{left:t}};let cv=(()=>{class t extends h.a{constructor(t,e,n,i,a,s,o,l,r,c,d,b,u,p,h,g,f,m,v){super(),this._datePipe=t,this._formTrendService=e,this._activatedRoute=n,this._notificationsService=i,this._episodesService=a,this._episodeService=s,this._formNamePipe=o,this._formNewService=l,this.translationService=r,this._patientsEventLogger=c,this._patientCommunicationModalService=d,this._patientsService=b,this._staffService=u,this._patientsModalsService=p,this._location=h,this._router=g,this._shareReportModalService=f,this._alertService=m,this._dataSharingServce=v,this.dateRange=[Object(pn.a)(Date.now()),new Date],this.cmtDetails=[],this.isChartLoading=!0,this.columnNames=[],this.options={hAxis:{title:"Dates - Measured On",textStyle:{fontSize:12},direction:-1},curveType:"function",pointSize:5,width:(window.innerWidth-.25*window.innerWidth).toString(),height:450,legend:{position:"bottom"},selectionMode:"multiple",animation:{startup:!0,duration:1e3}},this.loadingAllForms=!1,this.listOfForms=[],this.strings=["FORMS_TREND.ASSESSED_ON","FORMS_TREND.NO_DATA_AVAILABLE_FOR_DATE_RANGE","FORMS_TREND.ERROR_FETCHING_REPORT","MENU.PATIENTS","NOTE_ADDED_SUCCESSFULLY","COMMON.ALERT","ALERT.ALERT_CLOSED_SUCCESSFULLY"],this.notes=[],this.formName="GAD-7",this.onlyQuestions=[],this.overallQuestionanaire=[],this.answerScore=[],this.overallAnswer=[],this.finalAnswer=[],this.totalAllScore=[],this.questinarieDate=[],this.noData=!0,this.disabledDates=t=>Object(un.a)(new Date,t)<0,this.enableDateRangePicker=!1,this.includeCMT=!0,this._dataSharingServce.tenantSettings.subscribe(t=>this.tenantConfig=t)}ngOnInit(){this.patientId=this._activatedRoute.snapshot.queryParams.patientId,this.formBlueprintId=this._activatedRoute.snapshot.queryParams.blueprintId,this.formId=this._activatedRoute.snapshot.queryParams.formId,this.isGeneral=this._activatedRoute.snapshot.queryParams.fromGeneral,this._activatedRoute.snapshot.queryParams.episodeId?this.episodeId=this._activatedRoute.snapshot.queryParams.episodeId:this.getEpisodesData(),this._activatedRoute.snapshot.queryParams.alert?(this.alertId=this._activatedRoute.snapshot.queryParams.alert,this.updateAlert()):this.loadAllForms(),this.initTranslationStrings(),this.getPatientData(),this.getNotes(),this.getStaffResponse()}initTranslationStrings(){this.translationService.getMultiple(...this.strings).pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{this.translatedStrings=t})}updateAlert(){this._alertService.getAlertDetail(this.alertId).subscribe(t=>{if(this.alertData=t,this.alertFormId=null!=this.alertData.context||null!=this.alertData.contextId?this.alertData.contextId:this.alertData.alertMessageParameters.ENTITY_ID,this.alertFormId)this._formNewService.getSingleEvalForm(this.alertFormId).subscribe(t=>{const e=t.data;this.risk=e.identifiedRisk,this.score=e.evaluatedScore.toString(),this.formBlueprintId=e.parentFormId,this.loadAllForms()});else{const e=this.getAssessmentDetailsFromMessage(t.message);this.score=e.score,this.risk=e.risk,this.alertFormName=e.formName,this.loadAllForms()}},t=>{this._notificationsService.error("Error","Unable to load alert"),this.loadAllForms()})}getAssessmentDetailsFromMessage(t){const e=t.match(/(.*)\sassessment score for (.*) is (.*) and risk is (.*)/);return e?{formName:e[1],score:e[3],risk:e[4]}:null}getPatientData(){this._patientsService.fetchPatientById(this.patientId).subscribe(t=>{this.patient=t,this.tenantId=t.tenantId,this.patientStatus=null==t?void 0:t.patientStatus})}getFormAssessmentTrend(){if(!this.formBlueprintId)return;this.loading=!0,this.noData=!0,this.graphTitle=null,this.graphData=null,this.selection=null,this.riskIndex=0;const t=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),e=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._formTrendService.getAssessmentReport(this.patientId,this.formBlueprintId,t,e).subscribe(t=>{var e,n,i,a,s,o,l,r,c,d,b,u,p,h;if(this.assessmentTrend=t,this.range=null===(n=null===(e=this.assessmentTrend)||void 0===e?void 0:e.snapshot)||void 0===n?void 0:n.referenceRange,this.range.sort((t,e)=>t.startRange-e.startRange),null===(i=this.range)||void 0===i||i.forEach((t,e)=>{var n,i,a;const s=null===(a=null===(i=null===(n=this.assessmentTrend)||void 0===n?void 0:n.snapshot)||void 0===i?void 0:i.forms)||void 0===a?void 0:a[0];(null==s?void 0:s.score)>=t.startRange&&(null==s?void 0:s.score)<=t.endRange&&(this.riskIndex=e,this.lastMeasuredRisk=t.identification)}),this.rangeLength=this.range.length,this.refRange=this.range.map((t,e)=>e%4==0?this.range.slice(e,e+4):null).filter(t=>t),this.adjustRange(),this.updateCMT(),(null===(a=null==t?void 0:t.snapshot)||void 0===a?void 0:a.forms.length)&&(this.reportWarning=""),0==(null===(s=null==t?void 0:t.snapshot)||void 0===s?void 0:s.forms.length))return this.reportWarning=`${null===(l=null===(o=this.assessmentTrend)||void 0===o?void 0:o.metaData)||void 0===l?void 0:l.patient} has not completed any assessment between these dates. Please select a different date range to view the details.`,void(this.loading=!1);this.formId=null===(b=null===(d=null===(c=null===(r=this.assessmentTrend)||void 0===r?void 0:r.snapshot)||void 0===c?void 0:c.forms)||void 0===d?void 0:d[0])||void 0===b?void 0:b.id,this.populateGraphData(),this.noData=!(null===(h=null===(p=null===(u=this.assessmentTrend)||void 0===u?void 0:u.snapshot)||void 0===p?void 0:p.forms)||void 0===h?void 0:h.length),this.loading=!1},t=>{this.loading=!1,this._notificationsService.error("Form Trend Report",this.translatedStrings.get("FORMS_TREND.ERROR_FETCHING_REPORT"))})}adjustRange(){if(this.range.length>10){let t=Math.max(0,this.riskIndex-5),e=Math.min(this.range.length,this.riskIndex+5);e-t<10&&(0==t?e=t+10:t=e-10),this.range=this.range.slice(t,e),this.riskIndex=this.riskIndex-t}}updateCMT(){var t;this.cmtDetails=(null===(t=this.assessmentTrend)||void 0===t?void 0:t.patientCommunications)||[]}getEpisodesData(){this._episodesService.getActiveEpisode(this.patientId,"GENERAL").subscribe(t=>{var e;(null==t?void 0:t.length)&&(this.episodeId=null===(e=t[0])||void 0===e?void 0:e.id)})}getStaffResponse(){let t=new Map;this._staffService.fetchStaffMemberById(this.patientId).subscribe(e=>{var n,i,a,s;e&&(this.physicians=null==e?void 0:e.assignedUsers[M.a.PHYSICIAN].map(t=>t.fullName).join(", "),this.monitoringStaffs=null==e?void 0:e.assignedUsers[M.a.MONITORING_STAFF].map(t=>[t.id,t.fullName]),this.icdCodes=null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.healthInfo)||void 0===i?void 0:i.dxCodes.map(t=>(null==t?void 0:t.code)+", "+(null==t?void 0:t.description)),this.monitoringStaffType=null===(a=null==e?void 0:e.user)||void 0===a?void 0:a.assignedStaffs.filter(t=>"MONITORING_STAFF"==t.roleType).map(t=>[t.staffId,t.assignedStaffType])),null===(s=this.monitoringStaffType)||void 0===s||s.forEach(e=>{t.set(e[0],e[1])}),this.staffNameTypeMap=new Map,this.monitoringStaffs.forEach(e=>{this.staffNameTypeMap.set(e[1],t.get(e[0]))})})}onDateChange(){this.dateRange[0].setHours(0,0,0,0),this.dateRange[1].setHours(23,59,59,999),this.getFormAssessmentTrend(),this.getNotes()}populateGraphData(){var t,e,n,i,a,s,o,l,r;const c=null===(n=null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.snapshot)||void 0===e?void 0:e.forms)||void 0===n?void 0:n.map(t=>[this._datePipe.transform(t.assessedOn,"MMM d"),t.score]);this.columnNames=["Assessed On","Assessment Score"],this.graphOptions={titlePosition:"none",hAxis:{titleTextStyle:{bold:!0,italic:!1},direction:-1},vAxis:{title:this._formNamePipe.transform(null===(a=null===(i=this.assessmentTrend)||void 0===i?void 0:i.snapshot)||void 0===a?void 0:a.assessment),titleTextStyle:{bold:!0,italic:!1},gridlines:{count:c.size}},legend:{position:"none"},pointSize:10,interpolateNulls:!0,colors:["#666666"],selectionMode:"multiple"},this.graphData=c,this.graphTitle=this._datePipe.transform(null===(o=null===(s=this.assessmentTrend)||void 0===s?void 0:s.metaData)||void 0===o?void 0:o.startDate,"mediumDate")+" - "+this._datePipe.transform(null===(r=null===(l=this.assessmentTrend)||void 0===l?void 0:l.metaData)||void 0===r?void 0:r.endDate,"mediumDate")}loadAllForms(){this.loadingAllForms=!0,this._formNewService.getForms(0,100,"").subscribe(t=>{var e;let n=[];t.data.forms.obj.forEach(t=>{"SMS_ASSESSMENT"!=t.type&&n.push({formId:t._id,formName:t.title})}),this.listOfForms=n.sort((t,e)=>t.formName.localeCompare(e.formName)),this.isGeneral||this.formBlueprintId||(this.formBlueprintId=null===(e=this.listOfForms)||void 0===e?void 0:e[0].formId),this.loadingAllForms=!1,this.refresh()},t=>{this.loadingAllForms=!1})}refresh(){this.formId=null,this.getFormAssessmentTrend()}goBack(){this._location.back()}onCMTClick(t){var e,n;let i;switch(this._patientsEventLogger.patientActionEvent(this.patientId,"add_cmt"),null==t?void 0:t.type){case pm.a.GENERAL:case pm.a.BHI:i=this.showBHICMT();break;case pm.a.CCM:this.showCCMCMT(null==t?void 0:t.id);break;case pm.a.RPM:this.showRPMCMT()}null===(n=null===(e=null==i?void 0:i.afterClose)||void 0===e?void 0:e.pipe(Object(Xe.a)(this.unsubscribed)))||void 0===n||n.subscribe(t=>{t&&this.refresh()})}showBHICMT(){var t,e,n,i;return this._patientCommunicationModalService.createCMTModal(null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData)||void 0===e?void 0:e.patient,this.patientId,this.episodeId,ye.a.CARE_MANAGEMENT_TIME,null,null,new Date(null===(i=null===(n=this.assessmentTrend)||void 0===n?void 0:n.metaData)||void 0===i?void 0:i.endDate).getTime())}showCCMCMT(t){this._episodeService.fetchActiveEpisodes(this.patientId,1,0,t,[ib.a.IN_PROGRESS]).subscribe(e=>{var n,i;(null===(n=null==e?void 0:e.result)||void 0===n?void 0:n.length)?this._episodeService.fetchEpisodeDetails(null===(i=null==e?void 0:e.result[0])||void 0===i?void 0:i.id).subscribe(n=>{var i,a;const s={id:this.patientId,name:null===(i=this.patient)||void 0===i?void 0:i.fullName,episode:{id:null===(a=null==e?void 0:e.result[0])||void 0===a?void 0:a.id,startDate:n.startDate,endDate:n.endDate,blueprintId:n.blueprintId,totalNonComplexTMSCompleted:n.patientComplianceCount[99490],totalNonComplexAdditionalTMSCompleted:n.patientComplianceCount[99439],totalNonComplexTMSPhysicianCompleted:n.patientComplianceCount[99491],totalComplexTMSCompleted:n.patientComplianceCount[99487],totalComplexAdditionalTMSCompleted:n.patientComplianceCount[99489]}};return this._patientCommunicationModalService.createCCMTMS(s,t,ye.a.NON_COMPLEX_TMS)}):this._notificationsService.error("CCM Minutes","No active CCM episode found for this patient!")})}showRPMCMT(){return this._patientCommunicationModalService.createTMSModal(this.patient,"","TMS",ye.a.TREATMENT_MANAGEMENT_SERVICE,new Date)}getNotes(){this._patientsService.getNotes(this.patientId).subscribe(t=>{t&&t.length>0&&(this.notes=[...t.filter(t=>this.checkDateRange(t.updatedOn)||this.checkDateRange(t.createdOn))])})}checkDateRange(t){return t>=Object(hm.a)(this.dateRange[0]).getTime()&&t<=Object(Sg.a)(this.dateRange[1]).getTime()}onGraphReady(t){var e;(null===(e=this.graphData)||void 0===e?void 0:e.length)>0&&(null!=this.selection&&0!=this.selection.length||(this.selection=[{row:0,column:1}]),this.updateChartSelection())}onGraphPointSelect(t){var e;this.selection=null===(e=null==t?void 0:t.selection)||void 0===e?void 0:e.slice(-3),this.updateChartSelection()}updateChartSelection(){var t,e;this.onlyQuestions=[],this.overallQuestionanaire=[],this.overallAnswer=[],this.totalAllScore=[],null===(t=this.selection)||void 0===t||t.forEach(t=>{var e,n,i,a,s,o,l,r,c;const d=t.row;this.currentAssessedOn=null===(i=null===(n=null===(e=this.assessmentTrend)||void 0===e?void 0:e.snapshot)||void 0===n?void 0:n.forms[d])||void 0===i?void 0:i.assessedOn,this.questionnaireData=null===(o=null===(s=null===(a=this.assessmentTrend)||void 0===a?void 0:a.snapshot)||void 0===s?void 0:s.forms[d])||void 0===o?void 0:o.questions;const b=null===(c=null===(r=null===(l=this.assessmentTrend)||void 0===l?void 0:l.snapshot)||void 0===r?void 0:r.forms[d])||void 0===c?void 0:c.score;this.overallAnswer.push(this.questionnaireData),this.totalAllScore.push({score:b,accessedOn:this.currentAssessedOn})}),null===(e=this.questionnaireData)||void 0===e||e.forEach(t=>{this.onlyQuestions.push(t.question)}),this.finalAnswer=this.overallAnswer.slice(0,1),this.chart.chart.setSelection(this.selection)}addNotes(){var t,e;this._patientsModalsService.notes(this.patientId,null===(e=null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData)||void 0===e?void 0:e.patient,this.tenantId).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(t=>{null!=t&&(this.notes=[...this.notes,t],this._notificationsService.success(this.translatedStrings.get("MENU.PATIENTS"),this.translatedStrings.get("NOTE_ADDED_SUCCESSFULLY")))})}getDateForReport(t){return this._datePipe.transform(t,"yyyy-MM-dd")}getReport(t="preview"){var e;const n=this._router.serializeUrl(this._router.createUrlTree(["/analytics/reports/printable/bhi-snapshot/"+this.patientId],{queryParams:{startDate:this.getDateForReport(this.dateRange[0]),endDate:this.getDateForReport(this.dateRange[1]),action:t,email:null===(e=this.emailIds)||void 0===e?void 0:e.join(","),includeCMT:this.includeCMT,formId:this.formId,formBlueprintId:this.formBlueprintId,episodeId:this.episodeId,cmtStart:this.dateRange[0].getTime(),cmtEnd:this.dateRange[1].getTime(),selection:JSON.stringify(this.selection)}}));window.open(n,"_blank"),"preview"!==t&&(this.emailIds=[])}downloadStaff(){this.includeCMT=!0,this.includeNotes=!0,this.getReport("download")}downloadPatient(){this.includeCMT=!1,this.includeNotes=!1,this.getReport("download")}shareReport(){var t,e;this._shareReportModalService.createModal(null===(t=this.assessmentTrend)||void 0===t?void 0:t.metaData.patient,this.patientId,null===(e=this.patientData)||void 0===e?void 0:e.phoneNumbers,this.episodeId,"",this.dateRange[0],this.dateRange[1],"","","shareAssessment",this.formId,this.formBlueprintId,"",this.selection).afterClose.pipe(Object(Xe.a)(this.unsubscribed)).subscribe(()=>{})}closeAlert(){this.alertData.status="CLOSED",this.alertData.closed=!0,this.alertData.closedOn=(new Date).getTime(),this._alertService.closeAlert(this.alertData.id).subscribe(()=>{this._patientsEventLogger.patientAlertEvent(this.patientId,"alert_mark_as_closed"),this._notificationsService.success(this.translatedStrings.get("COMMON.ALERT"),this.translatedStrings.get("ALERT.ALERT_CLOSED_SUCCESSFULLY")),this._dataSharingServce.triggerAlertRefresh(),this.goBack()})}logAction(t,e){this._patientsEventLogger.patientActionEvent(e,t)}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(c.e),D.Rb(cn.a),D.Rb(b.a),D.Rb(A.b),D.Rb(fn.a),D.Rb(Jp.a),D.Rb(hn.a),D.Rb(gn.a),D.Rb(Pe.a),D.Rb(v.a),D.Rb(_e.a),D.Rb(g.a),D.Rb(S.a),D.Rb(ze.a),D.Rb(c.l),D.Rb(b.g),D.Rb(Cg.a),D.Rb(Tg.a),D.Rb(Oe.a))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-assessment-trend-report"]],viewQuery:function(t,e){if(1&t&&D.ed(vm,1),2&t){let t;D.Hc(t=D.fc())&&(e.chart=t.first)}},features:[D.Cb([c.e,hn.a]),D.Ab],decls:192,vars:125,consts:[[2,"background-color","#393939",3,"nzBackIcon","nzBack"],[1,"header-title"],["nz-button","","nzType","primary","nz-dropdown","",3,"nzSize","nzDropdownMenu","disabled"],[1,"btn"],["size","15px","name","download",1,"button-icon",3,"originalStyle","color"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],[1,"download-staff"],[1,"line"],["nz-button","","nzType","primary",3,"nzSize","disabled","click"],["size","15px","name","share",1,"button-icon",3,"originalStyle","color"],["backIcon",""],[1,"container"],["class","alert-message",4,"ngIf"],["class","overlay-off",4,"ngIf"],["class","cdk-overlay-container alert-table","featureHighlight","","featureKey","alerts_spotlight","hideElement","",3,"position",4,"ngIf"],["nz-row","","nzSpan","24","nzGutter","24"],["nz-col",""],[1,"main-title"],[1,"date-title"],["nz-col","","nzFlex","1"],["nz-row","","nzSpan","24","nzGutter","24","nzJustify","end"],["nz-typography","",1,"minor-headings"],["id","blueprint-selector","nzSize","large",3,"ngModel","nzLoading","ngModelChange"],[4,"ngFor","ngForOf"],[1,"date-picker"],["nzSize","large",3,"ngModel","nzDisabledDate","ngModelChange"],["nz-col","","nzSpan","18"],["nz-col","","nzSpan","6"],["nz-typography","","nzType","danger"],[1,"divider"],["nz-row","",3,"nzGutter"],["nz-typography","",1,"midnight-green-label"],["nz-col","","nzSpan","1"],["nz-row","",1,"fs-14",3,"nzGutter"],[1,"audio-call",3,"userId","phoneNumbers","renderVital","click"],["nz-col","","nzSpan","17"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","16"],["nz-row","","nzGutter","32",1,"fs-14"],["nz-typography",""],["nz-col","","nzSpan","32"],["nz-row",""],[1,"title"],[4,"ngIf"],["class","title",4,"ngIf"],["nz-row","","nzSpan","24",3,"ngClass"],[1,"graph-container"],["type","LineChart","dynamicResize","true",2,"width","100%",3,"data","options","columns","select","ready"],["chart",""],["class","container",4,"ngIf"],[1,"notes"],["id","cmtlog-notes",3,"cmtDetails","patientName"],[1,"notes","notes-section"],["id","notes",3,"notes","patientName","refreshNotes"],[3,"nzTemplate"],["backUp",""],[1,"container","input-section-div",3,"ngStyle"],["nz-row","","nzJustify","start","nzAlign","bottom"],["nz-col","","nzFlex","120px"],["nz-button","","nzType","primary",1,"footer-btn",3,"nzSize","click"],["nz-button","","nzType","danger","class","footer-btn button-large","style","border:1px solid red;",3,"click",4,"ngIf"],["nz-row","","nzJustify","end"],["nz-button","","nz-dropdown","","nzType","primary","class","footer-btn right-btn",3,"nzDropdownMenu","nzSize",4,"ngIf"],["blueprintMenu","nzDropdownMenu"],["nz-menu",""],["name","back","altColor","#ffffff","color","#ffffff"],[1,"alert-message"],[1,"overlay-off"],["nz-row","",1,"table-height"],["nz-col","","nzSpan","6",1,"assessment-parameter","pt-9",3,"ngClass"],["nz-col","","nzSpan","6",1,"pt-9",3,"ngClass"],["nz-row","",1,"table-height","table-space"],["nz-col","","nzSpan","6",1,"pt-9","text-danger",3,"ngClass"],["featureHighlight","","featureKey","alerts_spotlight","hideElement","",1,"cdk-overlay-container","alert-table",3,"position"],[3,"nzValue","nzLabel"],["style","width: 30%; text-align: right; color: var(--primary-color);",4,"ngIf"],[2,"width","30%","text-align","right","color","var(--primary-color)"],["nz-icon","","nzType","crown","nzTheme","outline",2,"font-size","14px"],["nz-row","","nzSpan","24","nzGutter","32",1,"pad-20"],["nz-col","","nzFlex","10",1,"lastAssessed"],[1,"fs-16"],[1,"assessedDate"],[1,"reference-chart"],["nzProgressDot","",3,"nzCurrent","nzType","nzIndexChange",4,"ngIf"],["nzProgressDot","",3,"nzCurrent","nzType","nzIndexChange"],[3,"nzTitle",4,"ngFor","ngForOf"],["nz-col","","nzFlex","20px",1,"p-0"],["nz-col","","nzFlex","6",1,"refRange"],["nz-typography","",1,"fw-700"],[1,"fs-14"],["nz-row","","nzSpan","24","nzGutter","32"],["nz-col","","nzFlex","1",4,"ngFor","ngForOf"],["class","step-label",3,"nzDescription","nzTitle",4,"ngFor","ngForOf"],["iconTemplate",""],["titleTemplate",""],[1,"step-label",3,"nzDescription","nzTitle"],["name","down","originalStyle","true",2,"margin-right","0px"],[3,"nzTitle"],["class","fs-14",4,"ngFor","ngForOf"],["nz-col","","nzSpan","24",1,"lastAssessed"],["nz-col","","nzSpan","24",1,"refRange"],["nz-col","","nzSpan","7"],["nz-col","","nzFlex","10px"],["nz-col","","nzSpan","7",1,"question-header"],[1,"samplequestion-header-data"],["nz-row","",1,"question-headers"],[1,"assessment-header"],[1,"assessment-date"],["nz-col","","nzFlex","40px"],[1,"assessment-totalscore"],["nz-row","",1,"question-header"],["nz-col","","nzFlex","1 0 150px"],["nz-col","",3,"nzFlex"],[1,"question-body"],["nz-row","",1,"full-height"],["nz-row","",1,"answers-body","full-height"],["nz-col","",1,"answer-score",3,"nzFlex"],["nz-button","","nzType","primary","nzShape","circle",1,"scrollup"],["name","up","color","#ffffff","size","20",2,"margin","0px"],["nz-button","","nzType","danger",1,"footer-btn","button-large",2,"border","1px solid red",3,"click"],["nz-button","","nz-dropdown","","nzType","primary",1,"footer-btn","right-btn",3,"nzDropdownMenu","nzSize"],["nz-icon","","nzType","down"],["nz-menu-item","","actionable","",3,"ngSwitch","click"],[4,"ngSwitchCase"]],template:function(t,e){if(1&t&&(D.Xb(0,"nz-page-header",0),D.ec("nzBack",function(){return e.goBack()}),D.Xb(1,"nz-page-header-title",1),D.Xc(2),D.jc(3,"translate"),D.Wb(),D.Xb(4,"nz-page-header-extra"),D.Xb(5,"button",2),D.Xb(6,"span",3),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Xc(9," \xa0 "),D.Sb(10,"app-icons",4),D.Wb(),D.Xb(11,"nz-dropdown-menu",null,5),D.Xb(13,"ul",6),D.Xb(14,"li",7),D.ec("click",function(){return e.downloadStaff()}),D.Xb(15,"span",8),D.Xc(16),D.jc(17,"translate"),D.jc(18,"translate"),D.Wb(),D.Wb(),D.Sb(19,"p",9),D.Xb(20,"li",7),D.ec("click",function(){return e.downloadPatient()}),D.Xb(21,"span"),D.Xc(22),D.jc(23,"translate"),D.jc(24,"translate"),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(25,"button",10),D.ec("click",function(){return e.shareReport()}),D.Xb(26,"span",3),D.Xc(27),D.jc(28,"translate"),D.Wb(),D.Xc(29," \xa0 "),D.Sb(30,"app-icons",11),D.Wb(),D.Wb(),D.Vc(31,Sm,1,0,"ng-template",null,12,D.Wc),D.Wb(),D.Sb(33,"br"),D.Xb(34,"div",13),D.Xb(35,"h3"),D.Vc(36,Im,2,0,"strong",14),D.Vc(37,Dm,2,0,"strong",14),D.Wb(),D.Vc(38,Cm,22,18,"nz-table",15),D.Vc(39,Em,22,20,"nz-table",16),D.Xb(40,"div",17),D.Xb(41,"div",18),D.Xb(42,"h2",19),D.Xb(43,"strong"),D.Xc(44),D.jc(45,"translate"),D.Wb(),D.Xb(46,"span",20),D.Xc(47),D.jc(48,"date"),D.jc(49,"date"),D.Wb(),D.Wb(),D.Wb(),D.Xb(50,"div",21),D.Xb(51,"div",22),D.Xb(52,"div"),D.Xb(53,"h2",23),D.Xc(54),D.jc(55,"translate"),D.Wb(),D.Wb(),D.Xb(56,"div"),D.Xb(57,"nz-select",24),D.ec("ngModelChange",function(t){return e.formBlueprintId=t})("ngModelChange",function(){return e.refresh()}),D.Vc(58,Tm,2,2,"ng-container",25),D.Wb(),D.Wb(),D.Xb(59,"div",26),D.Xb(60,"nz-range-picker",27),D.ec("ngModelChange",function(t){return e.dateRange=t})("ngModelChange",function(){return e.onDateChange()}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Xb(61,"div",17),D.Sb(62,"div",28),D.Xb(63,"div",29),D.Xb(64,"p",30),D.Xc(65),D.Wb(),D.Wb(),D.Wb(),D.Sb(66,"nz-divider",31),D.Xb(67,"div",32),D.Xb(68,"div",29),D.Xb(69,"label",33),D.Xc(70),D.jc(71,"translate"),D.Wb(),D.Wb(),D.Xb(72,"div",29),D.Xb(73,"label",33),D.Xc(74,"Gender"),D.Wb(),D.Wb(),D.Xb(75,"div",29),D.Xb(76,"label",33),D.Xc(77),D.jc(78,"translate"),D.Wb(),D.Wb(),D.Sb(79,"div",34),D.Wb(),D.Xb(80,"div",35),D.Xb(81,"div",29),D.Xb(82,"strong"),D.Xc(83),D.jc(84,"titlecase"),D.Wb(),D.Vb(85),D.Xb(86,"app-audio-call-widget",36),D.ec("click",function(){return e.logAction("audio_call",null==e.patient?null:e.patient.id)}),D.Wb(),D.Ub(),D.Wb(),D.Xb(87,"div",29),D.Xb(88,"strong"),D.Xc(89),D.jc(90,"titlecase"),D.Wb(),D.Wb(),D.Xb(91,"div",29),D.Xb(92,"strong"),D.Xc(93),D.jc(94,"date"),D.Wb(),D.Wb(),D.Sb(95,"div",34),D.Wb(),D.Sb(96,"br"),D.Xb(97,"div"),D.Xb(98,"div",32),D.Xb(99,"div",29),D.Xb(100,"label",33),D.Xc(101),D.jc(102,"translate"),D.Wb(),D.Wb(),D.Xb(103,"div",37),D.Xb(104,"label",33),D.Xc(105),D.jc(106,"translate"),D.Wb(),D.Wb(),D.Sb(107,"div",34),D.Wb(),D.Xb(108,"div",35),D.Xb(109,"div",29),D.Xb(110,"strong"),D.Xc(111),D.Wb(),D.Wb(),D.Xb(112,"div",37),D.Xb(113,"p"),D.Vc(114,ym,6,5,"ng-container",25),D.jc(115,"keyvalue"),D.Wb(),D.Wb(),D.Sb(116,"div",34),D.Wb(),D.Sb(117,"br"),D.Xb(118,"div",38),D.Xb(119,"div",29),D.Xb(120,"label",33),D.Xc(121),D.jc(122,"translate"),D.Wb(),D.Wb(),D.Xb(123,"div",39),D.Xb(124,"label",33),D.Xc(125),D.jc(126,"translate"),D.Wb(),D.Wb(),D.Sb(127,"div",34),D.Wb(),D.Xb(128,"div",40),D.Xb(129,"div",29),D.Xb(130,"strong"),D.Xc(131),D.Wb(),D.Wb(),D.Xb(132,"div",39),D.Xb(133,"strong",41),D.Vc(134,Om,2,1,"ng-container",25),D.Wb(),D.Wb(),D.Sb(135,"div",34),D.Wb(),D.Sb(136,"br"),D.Xb(137,"div",38),D.Xb(138,"div",39),D.Xb(139,"label",33),D.Xc(140,"Patient Notes"),D.Wb(),D.Wb(),D.Sb(141,"div",34),D.Wb(),D.Xb(142,"div",38),D.Xb(143,"div",42),D.Xb(144,"strong"),D.Xc(145),D.Wb(),D.Wb(),D.Sb(146,"div",34),D.Wb(),D.Wb(),D.Wb(),D.Sb(147,"br"),D.Xb(148,"div",13),D.Xb(149,"div",43),D.Xb(150,"h3",44),D.Xb(151,"strong"),D.Xc(152),D.Wb(),D.Wb(),D.Wb(),D.Vc(153,wm,23,11,"div",45),D.Vc(154,Ym,27,13,"div",45),D.Wb(),D.Xb(155,"div",13),D.Xb(156,"div",43),D.Vc(157,Bm,2,1,"h3",46),D.Wb(),D.Xb(158,"div",47),D.Xb(159,"div",48),D.Xb(160,"google-chart",49,50),D.ec("select",function(t){return e.onGraphPointSelect(t)})("ready",function(t){return e.onGraphReady(t)}),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Sb(162,"br"),D.Vc(163,qm,22,9,"div",51),D.Xb(164,"div",52),D.Sb(165,"app-common-cmt-logs",53),D.Wb(),D.Xb(166,"div",54),D.Xb(167,"app-common-notes",55),D.ec("refreshNotes",function(){return e.getNotes()}),D.Wb(),D.Wb(),D.Sb(168,"br"),D.Sb(169,"br"),D.Sb(170,"br"),D.Sb(171,"br"),D.Vb(172),D.Xb(173,"nz-back-top",56),D.Vc(174,Km,2,0,"ng-template",null,57,D.Wc),D.Wb(),D.Ub(),D.Xb(176,"div",58),D.Xb(177,"div",59),D.Xb(178,"div",60),D.Xb(179,"button",61),D.ec("click",function(){return e.addNotes()}),D.Xc(180),D.jc(181,"translate"),D.Wb(),D.Wb(),D.Xb(182,"div",21),D.Vc(183,Qm,3,3,"button",62),D.Wb(),D.Xb(184,"div",21),D.Xb(185,"div",63),D.Xb(186,"div",18),D.Vc(187,Jm,3,2,"button",64),D.Xb(188,"nz-dropdown-menu",null,65),D.Xb(190,"ul",66),D.Vc(191,sv,7,6,"ng-container",25),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb(),D.Wb()),2&t){const t=D.Ic(12),n=D.Ic(32),i=D.Ic(175);D.rc("nzBackIcon",n),D.Db(2),D.Zc(" ",D.kc(3,72,"COMMON.ASSESSMENT_TREND_REPORT")," "),D.Db(3),D.rc("nzSize","middle")("nzDropdownMenu",t)("disabled",e.noData),D.Db(2),D.Zc(" ",D.kc(8,74,"PATIENTS.REPORTDOWNLOAD"),""),D.Db(3),D.rc("originalStyle",!0)("color",e.noData?"grey":"#ffffff"),D.Db(6),D.ad("",D.kc(17,76,"COMMON.FOR")," ",D.kc(18,78,"PATIENT.MONITORING_STAFF")," "),D.Db(6),D.ad("",D.kc(23,80,"COMMON.FOR")," ",D.kc(24,82,"PATIENT"),""),D.Db(3),D.rc("nzSize","middle")("disabled",e.noData),D.Db(2),D.Yc(D.kc(28,84,"PATIENTS.REPORTSHARE")),D.Db(3),D.rc("originalStyle",!0)("color",e.noData?"grey":"#ffffff"),D.Db(6),D.rc("ngIf",e.alertData&&"CLOSED"!=(null==e.alertData?null:e.alertData.status)),D.Db(1),D.rc("ngIf",e.alertData&&"CLOSED"==(null==e.alertData?null:e.alertData.status)),D.Db(1),D.rc("ngIf",e.alertData),D.Db(1),D.rc("ngIf",e.alertData),D.Db(5),D.Zc(" ",D.kc(45,86,"COMMON.ASSESSMENT_TREND_REPORT"),""),D.Db(3),D.ad("(",D.lc(48,88,e.dateRange[0],"mediumDate")," - ",D.lc(49,91,e.dateRange[1],"mediumDate"),")"),D.Db(7),D.Zc("",D.kc(55,94,"FORMS.SCORED_ASSESSMENT"),":"),D.Db(3),D.rc("ngModel",e.formBlueprintId)("nzLoading",e.loadingAllForms),D.Db(1),D.rc("ngForOf",e.listOfForms),D.Db(2),D.rc("ngModel",e.dateRange)("nzDisabledDate",e.disabledDates),D.Db(5),D.Yc(e.reportWarning),D.Db(2),D.rc("nzGutter",D.xc(119,ov)),D.Db(3),D.Yc(D.kc(71,96,"PATIENT.NAME")),D.Db(7),D.Yc(D.kc(78,98,"COMMON.DOB")),D.Db(3),D.rc("nzGutter",D.xc(120,ov)),D.Db(3),D.Yc(D.kc(84,100,null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient)),D.Db(3),D.rc("userId",null==e.patient?null:e.patient.id)("phoneNumbers",null==e.patient?null:e.patient.phoneNumbers)("renderVital",!0),D.Db(3),D.Yc(D.kc(90,102,null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.gender)),D.Db(4),D.Zc(" ",D.lc(94,104,null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.dateOfBirth,"mediumDate")," "),D.Db(5),D.rc("nzGutter",D.xc(121,lv)),D.Db(3),D.Yc(D.kc(102,107,"COMMON.PHYSICIAN")),D.Db(4),D.Yc(D.kc(106,109,"COMMON.MONITORED_BY")),D.Db(3),D.rc("nzGutter",D.xc(122,lv)),D.Db(3),D.Zc(" ",e.physicians,""),D.Db(3),D.rc("ngForOf",D.kc(115,111,e.staffNameTypeMap)),D.Db(7),D.Yc(D.kc(122,113,"PATIENT_ID")),D.Db(4),D.Yc(D.kc(126,115,"COMMON.DIAGNOSIS")),D.Db(6),D.Yc((null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patientInternalId)||"N/A"),D.Db(3),D.rc("ngForOf",e.icdCodes),D.Db(11),D.Yc((null==e.assessmentTrend||null==e.assessmentTrend.metaData||null==e.assessmentTrend.metaData.quickNote?null:e.assessmentTrend.metaData.quickNote.content)||"N/A"),D.Db(7),D.Yc(null==e.assessmentTrend||null==e.assessmentTrend.snapshot?null:e.assessmentTrend.snapshot.assessment),D.Db(1),D.rc("ngIf",e.rangeLength<=8),D.Db(1),D.rc("ngIf",e.rangeLength>8),D.Db(3),D.rc("ngIf",e.graphTitle),D.Db(1),D.rc("ngClass",e.graphData?null:"hidden"),D.Db(2),D.rc("data",e.graphData)("options",e.graphOptions)("columns",e.columnNames),D.Db(3),D.rc("ngIf",e.totalAllScore&&e.totalAllScore.length>0),D.Db(2),D.rc("cmtDetails",e.cmtDetails)("patientName",null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient),D.Db(2),D.rc("notes",e.notes)("patientName",null==e.assessmentTrend||null==e.assessmentTrend.metaData?null:e.assessmentTrend.metaData.patient),D.Db(6),D.rc("nzTemplate",i),D.Db(3),D.rc("ngStyle",D.yc(123,rv,e.headerLeft)),D.Db(3),D.rc("nzSize","large"),D.Db(1),D.Zc(" ",D.kc(181,117,"COMMON.ADD_NOTES")," "),D.Db(3),D.rc("ngIf",e.alertData&&"OPEN"==e.alertData.status),D.Db(4),D.rc("ngIf",e.patientStatus&&"ACTIVE"==e.patientStatus&&(!e.alertData||"OPEN"==e.alertData.status)),D.Db(4),D.rc("ngForOf",null==e.tenantConfig?null:e.tenantConfig.episodeBlueprints)}},directives:[ii.b,ii.g,ii.d,X.a,E.a,T.a,Be.d,Be.b,ee.a,Be.e,He.c,He.e,c.q,k.c,k.a,V.a,x.d,d.u,d.x,c.p,te.a,te.c,L.a,Ii.a,c.o,o.a,gm.a,fm.a,Bg.a,c.r,Y.f,Y.o,Y.e,Y.l,x.a,R.a,mm.b,mm.a,mi.a,c.s,c.t],pipes:[Vt.a,c.e,c.A,c.j],styles:[".container[_ngcontent-%COMP%]{padding:10px 35px!important}.date-picker[_ngcontent-%COMP%]{padding-left:12px}.minor-headings[_ngcontent-%COMP%]{float:right}.fs-14[_ngcontent-%COMP%]{font-size:14px}.fw-700[_ngcontent-%COMP%]{font-weight:700}.graph-title[_ngcontent-%COMP%]{padding-bottom:0}.header-title[_ngcontent-%COMP%]{color:#fff}.btn[_ngcontent-%COMP%]{bottom:2px}.btn[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]{position:relative}.line[_ngcontent-%COMP%]{opacity:.2;border:1px solid #707070;width:85%;margin-left:15px;top:8px}[_nghost-%COMP%]     .ant-page-header{padding:5px 24px}.main-title[_ngcontent-%COMP%]{color:#0b2240;font-size:22px}.date-title[_ngcontent-%COMP%]{padding-left:10px;font-size:15px}.minor-headings[_ngcontent-%COMP%]{font-size:14px;color:#0f2015;padding-top:12px;padding-right:12px}.footer-btn[_ngcontent-%COMP%]{margin:8px;font-size:12px;width:140px;height:33px}.right-btn[_ngcontent-%COMP%]{margin-right:21px}.input-section-div[_ngcontent-%COMP%]{background-color:#f8f8f8;position:fixed;bottom:-1px;right:0;left:0;padding:0}.divider[_ngcontent-%COMP%]{margin-top:0}.fs-16[_ngcontent-%COMP%]{font-size:16px}.midnight-green-label[_ngcontent-%COMP%]{color:var(--tertiary-color)!important}.pad-20[_ngcontent-%COMP%]{padding:20px}.title[_ngcontent-%COMP%]{color:#0b2240;font-weight:700;font-family:Nunito;font-size:18px;border-left:4px solid var(--primary-color);padding-left:12px}.question-header[_ngcontent-%COMP%]{background:var(--primary-color);font-size:15px;font-weight:800;color:#0b2340;margin-bottom:0;padding:11px 20px}.question-header[_ngcontent-%COMP%]:first-child{border-radius:3px 0 0 0}.question-header[_ngcontent-%COMP%]:last-child{border-radius:0 1px 0 0}.question-headers[_ngcontent-%COMP%]{display:flex}.samplequestion-headers[_ngcontent-%COMP%]{border-radius:3px 3px 0 0;margin-bottom:0}.samplequestion-header-data[_ngcontent-%COMP%], .samplequestion-headers[_ngcontent-%COMP%]{background:var(--neutral-color);font-weight:800;color:#000;padding:11px;font-size:15px;height:75px}.samplequestion-header-data[_ngcontent-%COMP%]{border-radius:3px;margin-bottom:16px}.question-body[_ngcontent-%COMP%]{background:var(--neutral-color);color:#0b2240;padding:5px 20px;line-height:30px;font-weight:600;border-right:1px solid #d3d3d3}.question-body[_ngcontent-%COMP%]:last-child{border-radius:0 0 3px 3px}.answers-body[_ngcontent-%COMP%]{background:var(--neutral-color);color:#0b2340;padding:5px 20px;line-height:30px;font-weight:600;border-right:1px solid #d3d3d3}.answers-body[_ngcontent-%COMP%]:last-child{border-radius:0 0 3px 3px}.assessment-totalscore[_ngcontent-%COMP%]{font-size:30px;font-weight:bolder}.assessment-date[_ngcontent-%COMP%]{font-size:15px;color:#666;font-weight:400}.allScore[_ngcontent-%COMP%]{margin-left:33px!important}.answer-score[_ngcontent-%COMP%]{padding-left:15px!important}.ml-14[_ngcontent-%COMP%]{margin-left:14px}.ml-32[_ngcontent-%COMP%]{margin-left:32px!important}.ml-16[_ngcontent-%COMP%]{margin-left:16px!important}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.p-20[_ngcontent-%COMP%]{padding-left:20px!important;padding-right:30px!important}.refRange[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;padding:16px 36px!important}.p-0[_ngcontent-%COMP%]{padding:0!important}.lastAssessed[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;padding:16px 36px!important}.reference-chart[_ngcontent-%COMP%]{flex:1;width:100%;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-end}.graph-container[_ngcontent-%COMP%]{overflow:hidden!important;border-radius:5px;width:100%}.arrow-down[_ngcontent-%COMP%]{font-weight:700;padding-left:225px}.ml-24[_ngcontent-%COMP%]{margin-left:24px!important}#blueprint-selector[_ngcontent-%COMP%]{height:37px;width:200px}.alert-message[_ngcontent-%COMP%]{color:#0b2240}.table-height[_ngcontent-%COMP%]{height:38px}.table-space[_ngcontent-%COMP%]{margin-top:10px}.table-header-green[_ngcontent-%COMP%]{background:var(--primary-color)!important}.table-body-white[_ngcontent-%COMP%]{background:#fff!important}.assessment-parameter[_ngcontent-%COMP%]{padding-left:38px}.pt-9[_ngcontent-%COMP%]{padding-top:9px}.text-danger[_ngcontent-%COMP%]{color:#c71b1b}.table-header-grey[_ngcontent-%COMP%]{background:#999!important}.table-body-grey[_ngcontent-%COMP%]{background:#e5e5e5!important}.cdk-overlay-container[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;z-index:10px}.alert-table[_ngcontent-%COMP%]{height:100%;width:100%;padding-left:170px;padding-right:20px;padding-top:162px}.overlay-off[_ngcontent-%COMP%]{background-color:none;z-index:0}.step-label[_ngcontent-%COMP%]{background-color:transparent!important}.step-label[_ngcontent-%COMP%]     .ant-steps-item-container .ant-steps-item-tail:after{height:0!important}.step-label[_ngcontent-%COMP%]     .ant-steps-item-container .ant-steps-item-icon{height:0!important;width:0!important}.step-label[_ngcontent-%COMP%]     .ant-steps-item-container .ant-steps-item-title{font-size:14px!important;color:#000!important}[_nghost-%COMP%]     .ant-steps-item-title{font-size:12px}[_nghost-%COMP%]     .ant-steps-icon-dot{background:#666!important}.assessedDate[_ngcontent-%COMP%]{margin-bottom:0!important}.hidden-question[_ngcontent-%COMP%]{color:blue;position:absolute}.answer-container[_ngcontent-%COMP%]{position:relative}.full-height[_ngcontent-%COMP%]{height:100%}.hidden[_ngcontent-%COMP%]{display:none!important}.button-icon[_ngcontent-%COMP%]{position:relative;top:2px}.notes-section[_ngcontent-%COMP%]{padding-bottom:60px}[_nghost-%COMP%]     .ant-back-top{bottom:100px;right:32px}.scrollup[_ngcontent-%COMP%]{height:43px;width:43px;font-size:16px}.notes[_ngcontent-%COMP%]{padding:10px 35px 10px 20px!important}"]}),t})();var dv=n("pLZG");const bv=[{path:"",component:Mo,pathMatch:"full",data:{retainState:!0,privileges:[Ao.a.VIEW_PATIENT],tags:["PATIENT","RPM","BHI","GENERAL"]},canActivate:[Ce.a,De.a]},{path:"bulk-trend-report/:type",component:um,data:{showTenantToggle:!0,subTenantToggleMode:"SINGLE"},canActivate:[Ce.a,De.a]},{path:"healthscore/:id",component:Ie,data:{privileges:[Ao.a.VIEW_PATIENT]},canActivate:[Ce.a,De.a]},{path:"bulk-add",component:Qt,data:{privileges:[Ao.a.ADD_PATIENT],showTenantToggle:!1},canActivate:[Ce.a,De.a]},{path:"bulk-add-notes",component:(()=>{class t extends h.a{constructor(t,e,n,i){super(),this._router=t,this._http=e,this._episodesService=n,this._notificationsService=i,this.handleUpload=t=>{const e=new f.g({bypass:"yes"});this._http.post(this.uploadURL,t.file,{headers:e,observe:"response",responseType:"text"}).subscribe(t=>{200==t.status?this._episodesService.bulkUploadPatientCommunicationNotes(t.body).subscribe(()=>{this._notificationsService.success("Patient Communication Notes","Notes uploaded successfully!"),this._router.navigate(["patient"])}):this._notificationsService.error("Bulk Upload","Something went wrong, please try again!")})},this.uploadURL=m.g.url+"/v2/media/upload/"+Math.random().toString(10).substring(7)+".xlsx",this._routeHelperService.isPrimaryActionTriggered().pipe(Object(dv.a)(t=>!!t),Object(Xe.a)(this.unsubscribed)).subscribe(()=>this.downloadTemplate())}downloadTemplate(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=patient-communication-bulk-upload-template.xlsx","_blank")}}return t.\u0275fac=function(e){return new(e||t)(D.Rb(b.g),D.Rb(f.c),D.Rb(Jp.a),D.Rb(A.b))},t.\u0275cmp=D.Lb({type:t,selectors:[["app-bulk-add-patient-communications"]],features:[D.Ab],decls:10,vars:6,consts:[[1,"container"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList"],["nz-button","","nzType","primary","nzSize","large"]],template:function(t,e){1&t&&(D.Xb(0,"div",0),D.Xb(1,"nz-card"),D.Xb(2,"nz-upload",1),D.Xb(3,"button",2),D.Xc(4," BROWSE / DRAG "),D.Wb(),D.Xb(5,"p"),D.Sb(6,"br"),D.Xc(7),D.jc(8,"translate"),D.Wb(),D.Wb(),D.Sb(9,"br"),D.Wb(),D.Wb()),2&t&&(D.Db(2),D.rc("nzCustomRequest",e.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1),D.Db(5),D.Zc(" ",D.kc(8,4,"COMMON.DRAG_AND_UPLOAD")," "))},directives:[vn.a,W.a,X.a,E.a,T.a],pipes:[Vt.a],styles:[""]}),t})(),data:fg.BulkUpload},{path:"view/:id",component:Jh,data:{privileges:[Ao.a.VIEW_PATIENT],showTenantToggle:!1},canActivate:[Ce.a,De.a]},{path:"vital-trend/:id",component:Uf,data:{privileges:[Ao.a.VIEW_PATIENT]},canActivate:[Ce.a,De.a]},{path:"assessment-trend/:id",component:cv,data:{privileges:[Ao.a.VIEW_PATIENT]},canActivate:[Ce.a,De.a]},{path:":mode",component:tr,data:fg.Form,canActivate:[Ce.a,De.a]},{path:":mode/:id",component:tr,data:fg.Form,canActivate:[Ce.a,De.a]},{path:"assign-staff/:id/:location/:patientName",component:Tr,data:fg.MonitoringStaffAssigner,canActivate:[Ce.a,De.a]},{path:"assign/physician/:id",component:gg,data:fg.PhysicianAssigner,canActivate:[Ce.a,De.a]}];let uv=(()=>{class t{}return t.\u0275mod=D.Pb({type:t}),t.\u0275inj=D.Ob({factory:function(e){return new(e||t)},imports:[[b.k.forChild(bv)],b.k]}),t})();var pv=n("0wl5"),hv=n("dh1a"),gv=n("MN0s"),fv=n("ttvE");let mv=(()=>{class t{constructor(t,e){this.translationService=t,this.featureHighlightService=e,t.setLanguage(),e.setFeatureConfigs()}}return t.\u0275mod=D.Pb({type:t}),t.\u0275inj=D.Ob({factory:function(e){return new(e||t)(D.bc(Pe.a),D.bc(ci.a))},imports:[[uv,b.k,c.c,d.o,d.B,u.a.forRoot(),p.a,r.a,l.a,o.b,pv.a,s.a,a.a,hv.a.forRoot(),i.SupportModule,Ue.a.forChild(),gv.AnalyticsModule,fv.EpisodesModule]]}),t})()},HStR:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n("pJ0c"),a=n("fXoL"),s=n("ofXK"),o=n("rMZv"),l=n("OrU2"),r=n("fhRi");function c(t,e){if(1&t&&a.Sb(0,"app-patient-status-notification",5),2&t){const t=a.ic();a.rc("patientInfo",t.patientInfo)}}function d(t,e){if(1&t&&(a.Xb(0,"tr"),a.Xb(1,"td"),a.Xc(2),a.jc(3,"utcToLocalTime"),a.Wb(),a.Xb(4,"td"),a.Xc(5),a.jc(6,"utcToLocalTime"),a.Wb(),a.Xb(7,"td"),a.Xc(8),a.Wb(),a.Xb(9,"td"),a.Xc(10),a.Wb(),a.Xb(11,"td"),a.Xc(12),a.Wb(),a.Wb()),2&t){const t=e.$implicit;a.Db(2),a.Yc(a.kc(3,5,null==t?null:t.startDateTime)),a.Db(3),a.Yc(a.kc(6,7,null==t?null:t.endDateTime)),a.Db(3),a.Yc(null==t?null:t.patientClass),a.Db(2),a.Yc(null==t||null==t.location?null:t.location.facility),a.Db(2),a.Yc(null==t?null:t.reason)}}let b=(()=>{class t{constructor(t){this._visitsEncountersService=t}ngOnInit(){this.getVisits()}getVisits(){this._visitsEncountersService.fetchVisitsByUserId(this.patientId).subscribe(t=>{this.visits=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(i.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-visits"]],inputs:{patientInfo:"patientInfo",patientId:"patientId"},decls:18,vars:4,consts:[[1,"container"],[3,"patientInfo",4,"ngIf"],["nzFrontPagination","true",3,"nzData","nzTotal"],["visitsTable",""],[4,"ngFor","ngForOf"],[3,"patientInfo"]],template:function(t,e){if(1&t&&(a.Xb(0,"div",0),a.Vc(1,c,1,1,"app-patient-status-notification",1),a.Xb(2,"nz-table",2,3),a.Xb(4,"thead"),a.Xb(5,"tr"),a.Xb(6,"th"),a.Xc(7,"Start Time"),a.Wb(),a.Xb(8,"th"),a.Xc(9,"End Time"),a.Wb(),a.Xb(10,"th"),a.Xc(11,"Type"),a.Wb(),a.Xb(12,"th"),a.Xc(13,"Location"),a.Wb(),a.Xb(14,"th"),a.Xc(15,"Reason"),a.Wb(),a.Wb(),a.Wb(),a.Xb(16,"tbody"),a.Vc(17,d,13,9,"tr",4),a.Wb(),a.Wb(),a.Wb()),2&t){const t=a.Ic(3);a.Db(1),a.rc("ngIf",e.patientInfo&&("FLAGGED_FOR_DISQUALIFICATION"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"SUSPENDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"NOT_ONBOARDED"===(null==e.patientInfo?null:e.patientInfo.patientStatus)||"DISCHARGED"===(null==e.patientInfo?null:e.patientInfo.patientStatus))),a.Db(1),a.rc("nzData",e.visits)("nzTotal",null==e.visits?null:e.visits.length),a.Db(15),a.rc("ngForOf",null==t?null:t.data)}},directives:[s.q,o.f,o.n,o.o,o.e,o.l,o.i,s.p,l.a],pipes:[r.a],styles:[".container[_ngcontent-%COMP%]{padding:0 20px!important;width:90%}tr[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}"]}),t})()},Ljqs:function(t,e,n){"use strict";var i=n("Q1FS"),a=n("mbIT"),s=n("q3Kh"),o=n("GMZp"),l=n("gTqA");function r(t,e){return new i.Observable(function(n){var i=t.length;if(0!==i)for(var a=new Array(i),s=0,o=0,r=function(r){var c=l.from(t[r]),d=!1;n.add(c.subscribe({next:function(t){d||(d=!0,o++),a[r]=t},error:function(t){return n.error(t)},complete:function(){++s!==i&&d||(o===i&&n.next(e?e.reduce(function(t,e,n){return t[e]=a[n],t},{}):a),n.complete())}}))},c=0;c<i;c++)r(c);else n.complete()})}e.forkJoin=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(a.isArray(n))return r(n,null);if(o.isObject(n)&&Object.getPrototypeOf(n)===Object.prototype){var i=Object.keys(n);return r(i.map(function(t){return n[t]}),i)}}if("function"==typeof t[t.length-1]){var l=t.pop();return r(t=1===t.length&&a.isArray(t[0])?t[0]:t,null).pipe(s.map(function(t){return l.apply(void 0,t)}))}return r(t,null)}},OCRN:function(t,e,n){},OrU2:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n("ofXK"),a=n("cp0P"),s=n("IzEk"),o=n("WoUL"),l=n("igu/"),r=n("MXg9"),c=n("geco"),d=n("fXoL"),b=n("JA5x");function u(t,e){if(1&t&&(d.Xb(0,"nz-card",1),d.Sb(1,"p",2),d.Wb()),2&t){const t=d.ic();d.Db(1),d.sc("innerHTML",t.message,d.Mc)}}let p=(()=>{class t{constructor(t,e,n){this._patientsService=t,this.translationService=e,this._dataSharingService=n,this.changedByStaffName="N/A",this.tenantConfig=null}ngOnInit(){var t;let e,n,i;switch(this._dataSharingService.tenantSettings.pipe(Object(s.a)(1)).subscribe(t=>{this.tenantConfig=t}),null===(t=this.patientInfo)||void 0===t?void 0:t.patientStatus){case"NOT_ONBOARDED":e=this.getRecentDischargeReason(r.a.NOT_ONBOARDED),n=this._patientsService.getSpecificUser(e.changedBy),i=this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.NOT_ONBOARDED"),Object(a.a)([n,i]).subscribe(t=>{var n;this.message=t[1].replace("{PATIENT}",null===(n=this.patientInfo)||void 0===n?void 0:n.fullName).replace("{MONITORING_STAFF}",t[0].fullName||"N/A").replace("{NOT_ONBOARDED_DATE}",this.getDischargeDate(e.timestamp)).replace("{REASONS}",e.reason)});break;case"DISCHARGED":e=this.getRecentDischargeReason(r.a.DISCHARGED),n=this._patientsService.getSpecificUser(e.changedBy),i=this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.DISCHARGED"),Object(a.a)([n,i]).subscribe(t=>{var n;this.message=t[1].replace("{PATIENT}",null===(n=this.patientInfo)||void 0===n?void 0:n.fullName).replace("{MONITORING_STAFF}",t[0].fullName||"N/A").replace("{DISCHARGE_DATE}",this.getDischargeDate(e.timestamp)).replace("{REASONS}",e.reason)});break;case"SUSPENDED":e=this.getRecentDischargeReason(r.a.SUSPENDED),n=this._patientsService.getSpecificUser(e.changedBy),i=this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.SUSPENDED"),Object(a.a)([n,i]).subscribe(t=>{var n;this.message=t[1].replace("{PATIENT}",null===(n=this.patientInfo)||void 0===n?void 0:n.fullName).replace("{MONITORING_STAFF}",t[0].fullName||"N/A").replace("{SUSPENDED_DATE}",this.getDischargeDate(e.timestamp)).replace("{REASONS}",e.reason)});break;case"FLAGGED_FOR_DISQUALIFICATION":e=this.getRecentDischargeReason(r.a.FLAGGED_FOR_DISQUALIFICATION),this.translationService.get("PATIENT.NOTIFICATION.PATIENT_STATUS.FLAGGED_FOR_DISQUALIFICATION").subscribe(t=>this.message=t)}}getRecentDischargeReason(t){return this.patientInfo.patientStatusChangeHistory.filter(e=>e.changedToState===t).reduce((t,e)=>t.timestamp>e.timestamp?t:e)}getDischargeDate(t){var e,n,i;const a=(t instanceof Date?t:new Date(t+"Z")).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",timeZone:this.tenantConfig.timeZone,timeZoneName:"short"});return`${null===(e=a.split(","))||void 0===e?void 0:e[0]} (${null===(i=null===(n=a.split(","))||void 0===n?void 0:n[1])||void 0===i?void 0:i.trim()})`}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(c.a),d.Rb(o.a),d.Rb(l.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["app-patient-status-notification"]],inputs:{patientInfo:"patientInfo"},features:[d.Cb([i.e])],decls:1,vars:1,consts:[["nzSize","small",4,"ngIf"],["nzSize","small"],[3,"innerHTML"]],template:function(t,e){1&t&&d.Vc(0,u,2,1,"nz-card",0),2&t&&d.rc("ngIf",e.message)},directives:[i.q,b.a],styles:["nz-card[_ngcontent-%COMP%]{background-color:#78909c;color:var(--neutral-color);font-weight:700;border-radius:5px}"]}),t})()},Osby:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return c}),n.d(e,"k",function(){return d}),n.d(e,"f",function(){return u}),n.d(e,"h",function(){return p}),n.d(e,"g",function(){return g}),n.d(e,"j",function(){return m}),n.d(e,"b",function(){return v}),n.d(e,"i",function(){return I});class i{constructor(){this.form=new r,this.scoreProperties=new m}}var a=function(t){return t.ASSESSMENT="ASSESSMENT",t.QUESTIONNAIRE="QUESTIONNAIRE",t.AGREEMENT="AGREEMENT",t.SCORED_ASSESSMENT="SCORED_ASSESSMENT",t.SMS_ASSESSMENT="SMS_ASSESSMENT",t}({}),s=function(t){return t.SECTION="SECTION",t.FOOTER="FOOTER",t}({}),o=function(t){return t.RADIO="RADIO",t.CHECKBOX="CHECKBOX",t.INPUT="INPUT",t.SIGNATURE="SIGNATURE",t.DATE="DATE",t.TIME="TIME",t.UPLOAD="UPLOAD",t.PRE_FILLED="PRE_FILLED",t.ARITHMETIC="ARITHMETIC",t.INPUT_AREA="INPUT_AREA",t}({}),l=function(t){return t.NONE="NONE",t.PHQ_9="PHQ-9",t.GAD_7="GAD-7",t.IHRS="IHRS",t.MARS="MARS",t.COVID="COVID",t}({});class r{constructor(){this.language="en",this.type=a.ASSESSMENT,this.bannerImage="",this.tags=[],this.elements=[],this.showResultTo=[],this.formCategory=6,this.formStandard=l.NONE,this.isTitleValid=!0,this.isDescValid=!0,this.isTagsValid=!0}}class c{constructor(){this.description="",this.type=s.SECTION,this.helpText="",this.imageUrl="",this.displaySequence=1,this.elements=[new d],this.valid=!0}}class d{constructor(){this.required=!1,this.options=[new g],this.type=o.RADIO,this.helpText="",this.imageUrl="",this.displaySequence=1,this.answer=[],this.resultConditions=[new I],this.valid=!0}}var b=function(t){return t.FIRSTNAME="FIRSTNAME",t.LASTNAME="LASTNAME",t.DATE_OF_BIRTH="DATE_OF_BIRTH",t.MOBILE="MOBILE",t.GENDER="GENDER",t.WEIGHT="WEIGHT",t.HEIGHT="HEIGHT",t}({}),u=function(t){return t.RADIO="RADIO",t.CHECKBOX="CHECKBOX",t.INPUT="INPUT",t.DATE="DATE",t.RADIO_TEXT="RADIO_TEXT",t.COMBO_TEXT="COMBO_TEXT",t}({});class p{constructor(){this.dataType=h.STRING,this.min="1",this.max="500",this.errorMessage=""}}var h=function(t){return t.STRING="STRING",t.NUMBER="NUMBER",t.DATE="DATE",t}({});class g{constructor(){this.type=u.RADIO,this.validation=new p,this.prefilledFieldType=b.DATE_OF_BIRTH,this.arithmeticFieldType=new f,this.imageUrl="",this.helpText="",this.displaySequence=1,this.redirectToSection=1}}class f{constructor(){this.unit=S.NONE}}class m{constructor(){this.title="",this.type="",this.criterias=[]}}class v{constructor(){this.notify=["CARETAKER"],this.isStartRangeValid=!0,this.isEndRangeValid=!0,this.isIdentificationValid=!0,this.isDescriptionValid=!0}}var S=function(t){return t.KILOGRAM="KILOGRAM",t.POUND="POUND",t.INCH="INCH",t.CENTIMETER="CENTIMETER",t.FEET="FEET",t.NONE="NONE",t}({});class I{constructor(){this.operation=D.BETWEEN}}var D=function(t){return t.LESS_THAN="LESS_THAN",t.LESS_THAN_EQUAL_TO="LESS_THAN_EQUAL_TO",t.BETWEEN="BETWEEN",t.GREATER_THAN="GREATER_THAN",t.GREATER_THAN_EQUAL_TO="GREATER_THAN_EQUAL_TO",t.EQUAL_TO="EQUAL_TO",t.NOT_EQUAL_TO="NOT_EQUAL_TO",t}({})},"Pd5/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,s.default)(2,arguments);var n=(0,i.default)(e);return(0,a.default)(t,-n)};var i=o(n("LP0B")),a=o(n("qZya")),s=o(n("YGjY"));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},eJ3O:function(t,e,n){"use strict";var i=n("Q1FS"),a=n("1pIY"),s=n("p0+S"),o=n("nzqU");function l(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}e.timer=function(t,e,n){void 0===t&&(t=0);var r=-1;return s.isNumeric(e)?r=Number(e)<1?1:Number(e):o.isScheduler(e)&&(n=e),o.isScheduler(n)||(n=a.async),new i.Observable(function(e){var i=s.isNumeric(t)?t:+t-n.now();return n.schedule(l,i,{index:0,period:r,subscriber:e})})}},iCh7:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("OCRN");var i=n("tk/3"),a=n("AytR"),s=n("fXoL");let o=(()=>{class t{constructor(t){this._http=t,this.rootURL=a.g.url}fetchAllInsurancePayers(t=0,e=10,n,a){const s=`${this.rootURL}/v3/insurance/payers`,o={pageNumber:t,limit:e,searchKey:n,type:a};let l=new i.h;return Object.keys(o).forEach(t=>o[t]&&(l=l.append(t,o[t]))),this._http.get(s,{params:l})}fetchAllInsurancePlans(t=0,e=10,n){const a=`${this.rootURL}/v3/insurance/plans`,s={pageNumber:t,limit:e,searchKey:n};let o=new i.h;return Object.keys(s).forEach(t=>s[t]&&(o=o.append(t,s[t]))),this._http.get(a,{params:o})}fetchInsurancePlansForPayer(t,e=0,n=10,a){const s=`${this.rootURL}/v3/insurance/payers/${t}/plans`,o={pageNumber:e,limit:n,searchKey:a};let l=new i.h;return Object.keys(o).forEach(t=>o[t]&&(l=l.append(t,o[t]))),this._http.get(s,{params:l})}bulkUploadInsurancePayers(t){return this._http.post(`${this.rootURL}/v3/insurance/payers/bulk-upload/json`,t)}fetchInsurancePayerById(t){return this._http.get(`${this.rootURL}/v3/insurance/payers/${t}`)}updateInsurancePayer(t){return this._http.put(`${this.rootURL}/v3/insurance/payers`,t)}updateInsurancePayerTypeInBulk(t){return this._http.put(`${this.rootURL}/v3/insurance/payers/bulk`,t)}deleteInsurancePayer(t){return this._http.delete(`${this.rootURL}/v3/insurance/payers/${t}`)}deleteInsurancePlan(t){return this._http.delete(`${this.rootURL}/v3/insurance/plans/${t}`)}fetchInsuranceTierRules(){return this._http.get(`${this.rootURL}/v3/insurance/tier-rules`)}saveInsuranceTierRules(t){return this._http.post(`${this.rootURL}/v3/insurance/tier-rules`,t)}applyInsuranceTierRules(){return this._http.put(`${this.rootURL}/v3/insurance/tier-rules/apply`,{})}applyInsuranceTierRulesToLead(t){return this._http.put(`${this.rootURL}/v3/insurance/tier-rules/apply/lead/${t}`,{})}applyInsuranceTierRulesToPatient(t){return this._http.put(`${this.rootURL}/v3/insurance/tier-rules/apply/patient/${t}`,{})}}return t.\u0275fac=function(e){return new(e||t)(s.bc(i.c))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},pJ0c:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("AytR"),a=n("fXoL"),s=n("tk/3");let o=(()=>{class t{constructor(t){this._http=t,this.rootUrl=i.g.url}fetchVisitsByUserId(t){return this._http.get(`${this.rootUrl}/v1/visits/user/${t}`)}fetchEncountersByUserId(t){return this._http.get(`${this.rootUrl}/v1/encounters/user/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(s.c))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);