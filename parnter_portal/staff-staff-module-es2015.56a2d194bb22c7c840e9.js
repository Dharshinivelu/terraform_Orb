(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{faT0:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t){(0,a.default)(2,arguments);var e=(0,i.default)(t);return(0,s.default)(n,-e)};var i=o(e("LP0B")),s=o(e("AVZL")),a=o(e("YGjY"));function o(n){return n&&n.__esModule?n:{default:n}}n.exports=t.default},h8ax:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t){(0,o.default)(2,arguments);var e=(0,i.default)(n),l=(0,i.default)(t),r=(0,a.default)(e,l),c=Math.abs((0,s.default)(e,l));e.setFullYear("1584"),l.setFullYear("1584");var u=(0,a.default)(e,l)===-r,d=r*(c-u);return 0===d?0:d};var i=l(e("2Oix")),s=l(e("MruM")),a=l(e("zmLq")),o=l(e("YGjY"));function l(n){return n&&n.__esModule?n:{default:n}}n.exports=t.default},kanD:function(n,t,e){"use strict";e.r(t),e.d(t,"StaffModule",function(){return nr});var i=e("7pIB"),s=e("rbUg"),a=e("ofXK"),o=e("WoUL"),l=e("KZX/"),r=e("UFn0"),c=e("3Pt+"),u=e("SHZf"),d=e("geco"),b=e("igu/"),f=e("9ig3"),p=e("jKzE"),g=e("Jlwr"),h=e("qQcL"),m=e("x6g7"),v=e("fXoL"),S=e("tyNb"),z=e("Wfee"),X=e("jPNr"),I=e("0lU3"),y=e("xB20"),D=e("rMZv"),T=e("eHCX"),W=e("ncdi"),P=e("B+r4"),C=e("wjar"),A=e("5vDB"),_=e("fhRi");function M(n,t){1&n&&(v.Vb(0),v.Sb(1,"nz-alert",2),v.Ub())}function O(n,t){1&n&&(v.Vb(0),v.Xc(1," The portal was being "),v.Xb(2,"strong",17),v.Xc(3,"actively"),v.Wb(),v.Xc(4," used. "),v.Ub())}function N(n,t){1&n&&(v.Vb(0),v.Xc(1," The portal was either in background or closed and "),v.Xb(2,"strong",18),v.Xc(3,"not being actively"),v.Wb(),v.Xc(4," used. "),v.Ub())}function R(n,t){if(1&n){const n=v.Yb();v.Xb(0,"label",25),v.ec("click",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic(3).getAlertInfo(null==t||null==t.context?null:t.context.value)}),v.Xc(1," View Alert Details "),v.Wb()}}function E(n,t){if(1&n&&(v.Xb(0,"div",26),v.Xb(1,"div",27),v.Xc(2),v.Wb(),v.Wb()),2&n){const n=v.ic(3).$implicit;v.Db(2),v.Zc(" ",null==n||null==n.context||null==n.context.value||null==n.context.value.alert?null:n.context.value.alert.message," ")}}function w(n,t){if(1&n&&(v.Xc(0," An alert was closed by the staff. "),v.Sb(1,"br"),v.Xc(2," Remark: "),v.Xb(3,"strong"),v.Xc(4),v.Wb(),v.Sb(5,"br"),v.Sb(6,"br"),v.Vc(7,R,2,0,"label",23),v.Vc(8,E,3,1,"div",24)),2&n){const n=v.ic(2).$implicit;v.Db(4),v.Yc((null==n||null==n.context||null==n.context.value?null:n.context.value.remark)||"N/A"),v.Db(3),v.rc("ngIf",!(null!=n&&null!=n.context&&null!=n.context.value&&n.context.value.alert)),v.Db(1),v.rc("ngIf",null==n||null==n.context||null==n.context.value?null:n.context.value.alert)}}function x(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"br"),v.Sb(2,"br"),v.Xb(3,"div",19),v.Xb(4,"div",20),v.Sb(5,"nz-alert",21),v.Wb(),v.Wb(),v.Vc(6,w,9,3,"ng-template",null,22,v.Wc),v.Ub()),2&n){const n=v.Ic(7);v.Db(5),v.rc("nzMessage",n)}}function V(n,t){1&n&&v.Xc(0," Alerts were closed in bulk by the staff. ")}function k(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"br"),v.Sb(2,"br"),v.Xb(3,"div",19),v.Xb(4,"div",20),v.Sb(5,"nz-alert",28),v.Wb(),v.Wb(),v.Vc(6,V,1,0,"ng-template",null,22,v.Wc),v.Ub()),2&n){const n=v.Ic(7);v.Db(5),v.rc("nzMessage",n)}}function L(n,t){if(1&n){const n=v.Yb();v.Xb(0,"label",25),v.ec("click",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic(3).getPatientProfileInfo(null==t||null==t.context?null:t.context.value)}),v.Xc(1," View Patient Details "),v.Wb()}}function F(n,t){if(1&n&&(v.Xb(0,"div",26),v.Xb(1,"div",31),v.Xb(2,"strong"),v.Xc(3,"Patient Name: "),v.Wb(),v.Xc(4),v.jc(5,"titlecase"),v.Wb(),v.Xb(6,"div",31),v.Xb(7,"strong"),v.Xc(8,"Date Of Birth: "),v.Wb(),v.Xc(9),v.jc(10,"date"),v.Wb(),v.Wb()),2&n){const n=v.ic(3).$implicit;v.Db(4),v.Zc(" ",v.kc(5,2,null==n||null==n.context||null==n.context.value||null==n.context.value.patient?null:n.context.value.patient.fullName)," "),v.Db(5),v.Zc(" ",v.lc(10,4,null==n||null==n.context||null==n.context.value||null==n.context.value.patient?null:n.context.value.patient.dateOfBirth,"mediumDate")," ")}}function U(n,t){if(1&n&&(v.Xb(0,"strong"),v.Xc(1,"The global timer was started"),v.Wb(),v.Sb(2,"br"),v.Sb(3,"br"),v.Vc(4,L,2,0,"label",23),v.Vc(5,F,11,7,"div",24)),2&n){const n=v.ic(2).$implicit;v.Db(4),v.rc("ngIf",!(null!=n&&null!=n.context&&null!=n.context.value&&n.context.value.patient)),v.Db(1),v.rc("ngIf",null==n||null==n.context||null==n.context.value?null:n.context.value.patient)}}function j(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"br"),v.Sb(2,"br"),v.Xb(3,"div",19),v.Xb(4,"div",20),v.Sb(5,"nz-alert",29),v.Wb(),v.Wb(),v.Vc(6,U,6,2,"ng-template",null,30,v.Wc),v.Ub()),2&n){const n=v.Ic(7);v.Db(5),v.rc("nzMessage",n)}}function G(n,t){1&n&&(v.Xb(0,"strong"),v.Xc(1,"Global timer stopped"),v.Wb())}function Y(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"br"),v.Sb(2,"br"),v.Xb(3,"div",19),v.Xb(4,"div",20),v.Sb(5,"nz-alert",29),v.Wb(),v.Wb(),v.Vc(6,G,2,0,"ng-template",null,32,v.Wc),v.Ub()),2&n){const n=v.Ic(7);v.Db(5),v.rc("nzMessage",n)}}function H(n,t){1&n&&(v.Xb(0,"strong"),v.Xc(1,"Global timer was ended abruptly"),v.Wb())}function B(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"br"),v.Sb(2,"br"),v.Xb(3,"div",19),v.Xb(4,"div",20),v.Sb(5,"nz-alert",29),v.Wb(),v.Wb(),v.Vc(6,H,2,0,"ng-template",null,33,v.Wc),v.Ub()),2&n){const n=v.Ic(7);v.Db(5),v.rc("nzMessage",n)}}function $(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"strong"),v.Xc(2),v.Wb(),v.Xb(3,"strong",17),v.Xc(4,"billable"),v.Wb(),v.Xc(5," minutes "),v.Ub()),2&n){const n=v.ic(3).$implicit,t=v.ic(3);v.Db(2),v.Zc(" ",null==t.serviceCodeMap?null:t.serviceCodeMap.get(null==n||null==n.context||null==n.context.value?null:n.context.value.serviceCode),",\xa0 ")}}function q(n,t){1&n&&(v.Vb(0),v.Xb(1,"strong",36),v.Xc(2,"non-billable"),v.Wb(),v.Xc(3," minutes of Care Management Time "),v.Ub())}function Z(n,t){if(1&n){const n=v.Yb();v.Xb(0,"label",25),v.ec("click",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic(3).getPatientProfileInfo(null==t||null==t.context?null:t.context.value)}),v.Xc(1," View Patient Details "),v.Wb()}}function Q(n,t){if(1&n&&(v.Xb(0,"div",26),v.Xb(1,"div",31),v.Xb(2,"strong"),v.Xc(3,"Patient Name: "),v.Wb(),v.Xc(4),v.jc(5,"titlecase"),v.Wb(),v.Xb(6,"div",31),v.Xb(7,"strong"),v.Xc(8,"Date Of Birth: "),v.Wb(),v.Xc(9),v.jc(10,"date"),v.Wb(),v.Wb()),2&n){const n=v.ic(3).$implicit;v.Db(4),v.Zc(" ",v.kc(5,2,null==n||null==n.context||null==n.context.value||null==n.context.value.patient?null:n.context.value.patient.fullName)," "),v.Db(5),v.Zc(" ",v.lc(10,4,null==n||null==n.context||null==n.context.value||null==n.context.value.patient?null:n.context.value.patient.dateOfBirth,"mediumDate")," ")}}function K(n,t){if(1&n&&(v.Xb(0,"strong"),v.Xc(1),v.Wb(),v.Vc(2,$,6,1,"ng-container",1),v.Vc(3,q,4,0,"ng-container",1),v.Xc(4," were added for "),v.Xb(5,"strong"),v.Xc(6),v.Wb(),v.Xc(7," from "),v.Xb(8,"strong"),v.Xc(9),v.jc(10,"date"),v.Wb(),v.Xc(11," till "),v.Xb(12,"strong"),v.Xc(13),v.jc(14,"date"),v.Wb(),v.Xc(15," through "),v.Xb(16,"strong"),v.Xc(17),v.jc(18,"titlecase"),v.Wb(),v.Xc(19," mode. "),v.Sb(20,"br"),v.Sb(21,"br"),v.Vc(22,Z,2,0,"label",23),v.Vc(23,Q,11,7,"div",24),v.Sb(24,"nz-divider"),v.Sb(25,"p",35)),2&n){const n=v.ic(2).$implicit;v.Db(1),v.Zc(" ",((null==n||null==n.context||null==n.context.value?null:n.context.value.endTime)-(null==n||null==n.context||null==n.context.value?null:n.context.value.startTime))/6e4," "),v.Db(1),v.rc("ngIf",null==(null==n||null==n.context?null:n.context.value.billable)||!0===(null==n||null==n.context?null:n.context.value.billable)),v.Db(1),v.rc("ngIf",!1===(null==n||null==n.context?null:n.context.value.billable)),v.Db(3),v.Zc("",null==n||null==n.context||null==n.context.value?null:n.context.value.activity,",\xa0"),v.Db(3),v.Zc(" ",v.lc(10,10,null==n||null==n.context||null==n.context.value?null:n.context.value.startTime,"mediumTime"),",\xa0 "),v.Db(4),v.Yc(v.lc(14,13,null==n||null==n.context||null==n.context.value?null:n.context.value.endTime,"mediumTime")),v.Db(4),v.Yc(v.kc(18,16,null==n||null==n.context||null==n.context.value?null:n.context.value.mode)),v.Db(5),v.rc("ngIf",!(null!=n&&null!=n.context&&null!=n.context.value&&n.context.value.patient)),v.Db(1),v.rc("ngIf",null==n||null==n.context||null==n.context.value?null:n.context.value.patient),v.Db(2),v.rc("innerHTML",null==n||null==n.context||null==n.context.value?null:n.context.value.notes,v.Mc)}}function J(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"br"),v.Sb(2,"br"),v.Xb(3,"div",19),v.Xb(4,"div",20),v.Sb(5,"nz-alert",29),v.Wb(),v.Wb(),v.Vc(6,K,26,18,"ng-template",null,34,v.Wc),v.Ub()),2&n){const n=v.Ic(7);v.Db(5),v.rc("nzMessage",n)}}function nn(n,t){if(1&n&&(v.Xb(0,"nz-timeline-item"),v.Xc(1," Started at "),v.Xb(2,"strong"),v.Xc(3),v.jc(4,"utcToLocalTime"),v.Wb(),v.Xc(5,", till "),v.Xb(6,"strong"),v.Xc(7),v.jc(8,"utcToLocalTime"),v.Wb(),v.Sb(9,"br"),v.Sb(10,"br"),v.Xc(11," Previous State: "),v.Xb(12,"strong"),v.Xc(13),v.jc(14,"titlecase"),v.Wb(),v.Xc(15," \xa0 Changed State: "),v.Xb(16,"strong"),v.Xc(17),v.jc(18,"titlecase"),v.Wb(),v.Sb(19,"br"),v.Vc(20,O,5,0,"ng-container",1),v.Vc(21,N,5,0,"ng-container",1),v.Vc(22,x,8,1,"ng-container",1),v.Vc(23,k,8,1,"ng-container",1),v.Vc(24,j,8,1,"ng-container",1),v.Vc(25,Y,8,1,"ng-container",1),v.Vc(26,B,8,1,"ng-container",1),v.Vc(27,J,8,1,"ng-container",1),v.Wb()),2&n){const n=t.$implicit;v.Db(3),v.Yc(v.lc(4,12,null==n?null:n.startTime,"mediumTime")),v.Db(4),v.Yc(v.lc(8,15,null==n?null:n.endTime,"mediumTime")),v.Db(6),v.Yc(v.kc(14,18,null==n?null:n.previousState)),v.Db(4),v.Yc(v.kc(18,20,null==n?null:n.changedState)),v.Db(3),v.rc("ngIf","ACTIVE"===(null==n?null:n.navigationState)),v.Db(1),v.rc("ngIf","INACTIVE"===(null==n?null:n.navigationState)),v.Db(1),v.rc("ngIf","ALERT_CLOSED"===(null==n||null==n.context?null:n.context.type)),v.Db(1),v.rc("ngIf","BULK_ALERT_CLOSED"===(null==n||null==n.context?null:n.context.type)),v.Db(1),v.rc("ngIf","TIMER_STARTED"===(null==n||null==n.context?null:n.context.type)),v.Db(1),v.rc("ngIf","TIMER_ENDED"===(null==n||null==n.context?null:n.context.type)),v.Db(1),v.rc("ngIf","TIMER_ABORTED"===(null==n||null==n.context?null:n.context.type)),v.Db(1),v.rc("ngIf","PATIENT_COMMUNICATION_ADDED"===(null==n||null==n.context?null:n.context.type))}}function tn(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"tr"),v.Xb(2,"td",14),v.ec("nzExpandChange",function(e){v.Lc(n);const i=t.$implicit;return v.ic(2).onExpandChange(null==i?null:i.id,e)}),v.Wb(),v.Xb(3,"td"),v.Xc(4),v.jc(5,"utcToLocalTime"),v.Wb(),v.Xb(6,"td"),v.Xc(7),v.jc(8,"utcToLocalTime"),v.Wb(),v.Xb(9,"td"),v.Xc(10),v.Wb(),v.Xb(11,"td"),v.Xc(12),v.Wb(),v.Xb(13,"td"),v.Xc(14),v.Wb(),v.Xb(15,"td"),v.Xc(16),v.Wb(),v.Xb(17,"td",15),v.Xb(18,"strong"),v.Xc(19),v.Wb(),v.Wb(),v.Wb(),v.Xb(20,"tr",16),v.Xb(21,"nz-timeline"),v.Vc(22,nn,28,22,"nz-timeline-item",13),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=t.$implicit,e=v.ic(2);v.Db(2),v.rc("nzExpand",e.expandSet.has(null==n?null:n.id)),v.Db(2),v.Yc(v.lc(5,11,n.startTime,"MMM dd, yyyy HH:mm")),v.Db(3),v.Yc(v.lc(8,14,n.endTime,"MMM dd, yyyy HH:mm")),v.Db(3),v.Zc("",n.totalActiveMinutes," minutes"),v.Db(2),v.Zc("",n.totalInActiveMinutes," minutes"),v.Db(2),v.Yc(n.totalPatientCommunicationMinutesAdded),v.Db(2),v.Yc(n.totalAlertsClosed),v.Db(1),v.rc("nzType",n.bulkAlertsClosed?"danger":"default"),v.Db(2),v.Yc(n.bulkAlertsClosed?"Yes":"No"),v.Db(1),v.rc("nzExpand",e.expandSet.has(null==n?null:n.id)),v.Db(2),v.rc("ngForOf",null==n?null:n.timeline)}}function en(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"nz-page-header",3),v.Xb(2,"nz-page-header-title"),v.Xc(3,"Staff Audit"),v.Wb(),v.Xb(4,"nz-page-header-subtitle"),v.Xc(5,"Session Tracking Timeline"),v.Wb(),v.Xb(6,"nz-page-header-extra"),v.Xb(7,"nz-range-picker",4),v.ec("ngModelChange",function(t){return v.Lc(n),v.ic().dateRange=t})("ngModelChange",function(t){return v.Lc(n),v.ic().getStaffSessionsAnalysis(t)}),v.Wb(),v.Wb(),v.Xb(8,"nz-page-header-content"),v.Xb(9,"nz-descriptions",5),v.Xb(10,"nz-descriptions-item",6),v.Xb(11,"strong"),v.Xc(12),v.jc(13,"utcToLocalTime"),v.Wb(),v.Wb(),v.Xb(14,"nz-descriptions-item",7),v.Xb(15,"strong"),v.Xc(16),v.jc(17,"utcToLocalTime"),v.Wb(),v.Wb(),v.Xb(18,"nz-descriptions-item",8),v.Xb(19,"strong"),v.Xc(20),v.Wb(),v.Wb(),v.Xb(21,"nz-descriptions-item",9),v.Xb(22,"strong"),v.Xc(23),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(24,"br"),v.Xb(25,"nz-table",10,11),v.Xb(27,"thead"),v.Xb(28,"tr"),v.Sb(29,"th",12),v.Xb(30,"th"),v.Xc(31,"Start Time"),v.Wb(),v.Xb(32,"th"),v.Xc(33,"End Time"),v.Wb(),v.Xb(34,"th"),v.Xc(35,"Active Time"),v.Wb(),v.Xb(36,"th"),v.Xc(37,"Inactive Time"),v.Wb(),v.Xb(38,"th"),v.Xc(39,"CMT Mins Added"),v.Wb(),v.Xb(40,"th"),v.Xc(41,"Alerts Closed"),v.Wb(),v.Xb(42,"th"),v.Xc(43,"Bulk Alerts Closure"),v.Wb(),v.Wb(),v.Wb(),v.Xb(44,"tbody"),v.Vc(45,tn,23,17,"ng-container",13),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=v.Ic(26),t=v.ic();v.Db(1),v.rc("nzGhost",!1),v.Db(6),v.rc("nzAllowClear",!1)("ngModel",t.dateRange),v.Db(2),v.rc("nzColumn",2),v.Db(1),v.rc("nzSpan",1),v.Db(2),v.Yc(v.lc(13,14,null==t.staffSessionResponse||null==t.staffSessionResponse.metadata?null:t.staffSessionResponse.metadata.startDate,"MMM dd, yyyy")),v.Db(2),v.rc("nzSpan",1),v.Db(2),v.Yc(v.lc(17,17,null==t.staffSessionResponse||null==t.staffSessionResponse.metadata?null:t.staffSessionResponse.metadata.endDate,"MMM dd, yyyy")),v.Db(2),v.rc("nzSpan",1),v.Db(2),v.Yc(null==t.staffSessionResponse||null==t.staffSessionResponse.metadata?null:t.staffSessionResponse.metadata.totalSessions),v.Db(1),v.rc("nzSpan",1),v.Db(2),v.Zc("",null==t.staffSessionResponse||null==t.staffSessionResponse.metadata?null:t.staffSessionResponse.metadata.totalPingTimeClockedIn," minutes"),v.Db(2),v.rc("nzData",null==t.staffSessionResponse?null:t.staffSessionResponse.staffSessions),v.Db(20),v.rc("ngForOf",null==n?null:n.data)}}let sn=(()=>{class n extends h.a{constructor(n,t,e,i,s,a){super(),this._activatedRoute=n,this._staffSessionService=t,this._patientService=e,this._alertService=i,this._datePipe=s,this._dataSharingService=a,this.expandSet=new Set,this.dateRange=[Object(f.a)(Date.now()),Object(p.a)(Date.now())],this.staffId=this._activatedRoute.snapshot.params.id;const o=this._activatedRoute.snapshot.queryParamMap.get("staffName")||"Details";this._routeHelperService.setTitleForRoute(o),this.serviceCodeMap=new Map([["NON_COMPLEX_TMS","Non-complex"],["NON_COMPLEX_TMS_PHYSICIAN","Non-complex Physician"],["NON_COMPLEX_ADDITIONAL_TMS","Non-complex additional - A"],["NON_COMPLEX_ADDITIONAL_TMS_B","Non-complex additional - B"],["COMPLEX_TMS","Complex"],["COMPLEX_ADDITIONAL_TMS","Complex"],["TREATMENT_MANAGEMENT_SERVICE","Treatment Management Service"],["ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE","Additional Treatment Management Service"],["ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B","Additional Treatment Management Service - B"],["CARE_MANAGEMENT_TIME","Care Management Time"]])}onExpandChange(n,t){t?this.expandSet.add(n):this.expandSet.delete(n)}ngOnInit(){this._dataSharingService.tenantSettings.subscribe(n=>{var t;this.isAuditEnabled=null===(t=null==n?void 0:n.staffSessionConfig)||void 0===t?void 0:t.auditEnabled,this.isAuditEnabled&&this.getStaffSessionsAnalysis()})}getStaffSessionsAnalysis(){const n=this._datePipe.transform(this.dateRange[0],"yyyy-MM-dd"),t=this._datePipe.transform(this.dateRange[1],"yyyy-MM-dd");this._staffSessionService.fetchStaffSession(this.staffId,n,t).subscribe(n=>{this.staffSessionResponse=n})}getPatientProfileInfo(n){this._patientService.getSpecificUser((null==n?void 0:n.patientId)||(null==n?void 0:n.attendeeId)).subscribe(t=>n.patient=t)}getAlertInfo(n){this._alertService.getAlertDetail(null==n?void 0:n.alertId).subscribe(t=>n.alert=t)}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.a),v.Rb(g.a),v.Rb(d.a),v.Rb(m.a),v.Rb(a.e),v.Rb(b.a))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-audit"]],features:[v.Cb([a.e]),v.Ab],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["nzType","warning","nzMessage","This feature is not enabled, please contact the portal admin!","nzShowIcon",""],[3,"nzGhost"],[3,"nzAllowClear","ngModel","ngModelChange"],["nzSize","small",3,"nzColumn"],["nzTitle","Start Time",3,"nzSpan"],["nzTitle","End Time",3,"nzSpan"],["nzTitle","Total Sessions",3,"nzSpan"],["nzTitle","Total Clocked In Minutes",3,"nzSpan"],["nzTableLayout","fixed",3,"nzData"],["sessionTable",""],["nzWidth","60px"],[4,"ngFor","ngForOf"],[3,"nzExpand","nzExpandChange"],["nz-typography","",3,"nzType"],[3,"nzExpand"],["nz-typography","","nzType","success"],["nz-typography","","nzType","danger"],["nz-row",""],["nz-col","","nzSpan","14"],["nzType","warning","nzShowIcon","",3,"nzMessage"],["alert",""],["nz-typography","","nzType","success","actionable","",3,"click",4,"ngIf"],["nz-row","","nzGutter","16",4,"ngIf"],["nz-typography","","nzType","success","actionable","",3,"click"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","24"],["nzType","error","nzShowIcon","",3,"nzMessage"],["nzType","info","nzShowIcon","",3,"nzMessage"],["timerStart",""],["nz-col","","nzSpan","12"],["timerEnd",""],["timerAborted",""],["cmt",""],[3,"innerHTML"],["nz-typography","","nzType","secondary"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Vc(1,M,2,0,"ng-container",1),v.Vc(2,en,46,20,"ng-container",1),v.Wb()),2&n&&(v.Db(1),v.rc("ngIf",!t.isAuditEnabled),v.Db(1),v.rc("ngIf",t.isAuditEnabled))},directives:[a.q,z.a,X.b,X.g,X.f,X.d,I.a,I.c,c.u,c.x,X.c,y.a,y.b,D.f,D.n,D.o,D.e,D.l,D.i,a.p,D.j,T.a,D.p,D.g,W.a,W.b,P.c,P.a,C.a,A.a],pipes:[_.a,a.A,a.e],styles:[".container[_ngcontent-%COMP%]{padding-top:20px!important}nz-page-header[_ngcontent-%COMP%]{background:transparent linear-gradient(106deg,#fff 40%,#bed4ff) 0 0 no-repeat padding-box;border-radius:5px}nz-page-header-title[_ngcontent-%COMP%]{font:normal normal 600 17px/14px Nunito;letter-spacing:-.6px;color:var(--secondary-color)}nz-page-header-subtitle[_ngcontent-%COMP%]{font:normal normal 600 14px/14px Nunito;letter-spacing:-.6px}"]}),n})();var an=e("D+TJ"),on=e("2lmJ"),ln=e("5P38");let rn=(()=>{class n{constructor(n,t){this._widgetsService=n,this._element=t}ngAfterViewInit(){this._widgetsService.isWidgetEnabledForStaff(this.widget,this.userPermissions)?this.enableWidget():this.disableWidget()}enableWidget(){this._element.nativeElement.style.display="block"}disableWidget(){this._element.nativeElement.style.display="none"}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(ln.a),v.Rb(v.l))},n.\u0275dir=v.Mb({type:n,selectors:[["","staffDashboardWidget",""]],inputs:{widget:["staffDashboardWidget","widget"],userPermissions:["permissions","userPermissions"]}}),n})();var cn=e("JA5x"),un=e("nJia"),dn=e("glKu"),bn=e("dRHE");function fn(n,t){if(1&n&&(v.Xb(0,"span"),v.Xc(1),v.Sb(2,"br"),v.Wb()),2&n){const n=t.$implicit;v.Db(1),v.Zc("",n," ")}}function pn(n,t){if(1&n&&(v.Xc(0),v.Vc(1,fn,3,1,"span",7)),2&n){const n=v.ic();v.Zc(" To view this widget, ",null==n.staff||null==n.staff.user?null:n.staff.user.fullName," requires these permissions "),v.Db(1),v.rc("ngForOf",n.permissions)}}const gn=function(n){return{"disabled-background":n}},hn=function(n){return{disabled:n}};let mn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Lb({type:n,selectors:[["app-widget-panel"]],inputs:{staff:"staff",name:"name",permissions:"permissions",disabled:"disabled"},decls:11,vars:13,consts:[["nz-tooltip","","nzTooltipPlacement","bottom",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","3"],["name","form","size","20px"],["nz-col","","nzSpan","21"],["nz-typography","","nzEllipsis","",3,"ngClass","nzContent"],["permissionContent",""],[4,"ngFor","ngForOf"]],template:function(n,t){if(1&n&&(v.Xb(0,"nz-card",0),v.Xb(1,"div",1),v.Xb(2,"div",2),v.Sb(3,"app-icons",3),v.Wb(),v.Xb(4,"div",4),v.Xb(5,"strong",5),v.jc(6,"translate"),v.Xc(7),v.jc(8,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Vc(9,pn,2,2,"ng-template",null,6,v.Wc)),2&n){const n=v.Ic(10);v.rc("ngClass",v.yc(9,gn,t.disabled))("nzTooltipTitle",n),v.Db(5),v.sc("nzContent",v.kc(6,5,t.name)),v.rc("ngClass",v.yc(11,hn,t.disabled)),v.Db(2),v.Zc(" ",v.kc(8,7,t.name)," ")}},directives:[cn.a,un.d,a.o,P.c,P.a,dn.a,T.a,a.p],pipes:[bn.a],styles:["nz-card[_ngcontent-%COMP%]{border-radius:5px}[_nghost-%COMP%]     .ant-card-body{padding:20px 20px 15px}strong[_ngcontent-%COMP%]{display:block}.disabled-background[_ngcontent-%COMP%]{background:#dbdbdb}.disabled[_ngcontent-%COMP%]{color:#8a8a8a}app-icons[_ngcontent-%COMP%]{pointer-events:none}"]}),n})(),vn=(()=>{class n{constructor(n,t){this._widgetsService=n,this._element=t}ngAfterViewInit(){this._widgetsService.isWidgetEnabledForStaff(this.widget,this.userPermissions)?this.disableWidget():this.enableWidget()}enableWidget(){this._element.nativeElement.style.display="block"}disableWidget(){this._element.nativeElement.style.display="none"}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(ln.a),v.Rb(v.l))},n.\u0275dir=v.Mb({type:n,selectors:[["","disabledStaffDashboardWidget",""]],inputs:{widget:["disabledStaffDashboardWidget","widget"],userPermissions:["permissions","userPermissions"]}}),n})();function Sn(n,t){if(1&n&&(v.Xb(0,"div",5),v.Sb(1,"app-widget-panel",6),v.Wb()),2&n){const n=t.$implicit,e=v.ic(2);v.rc("staffDashboardWidget",null==n?null:n.key)("permissions",null==e.staff||null==e.staff.user?null:e.staff.user.privileges),v.Db(1),v.rc("staff",e.staff)("name",n.key)("permissions",n.value)}}function zn(n,t){if(1&n&&(v.Xb(0,"div",1),v.Sb(1,"br"),v.Xb(2,"h4",2),v.Xc(3),v.Wb(),v.Sb(4,"br"),v.Xb(5,"div",3),v.Vc(6,Sn,2,5,"div",4),v.jc(7,"keyvalue"),v.Wb(),v.Wb()),2&n){const n=v.ic();v.Db(3),v.Zc("Widgets ",null==n.staff||null==n.staff.user?null:n.staff.user.fullName," can view"),v.Db(3),v.rc("ngForOf",v.kc(7,2,n.widgets))}}function Xn(n,t){if(1&n&&(v.Xb(0,"div",8),v.Sb(1,"app-widget-panel",9),v.Wb()),2&n){const n=t.$implicit,e=v.ic(2);v.rc("disabledStaffDashboardWidget",null==n?null:n.key)("permissions",null==e.staff||null==e.staff.user?null:e.staff.user.privileges),v.Db(1),v.rc("staff",e.staff)("name",n.key)("permissions",n.value)("disabled",!0)}}function In(n,t){if(1&n&&(v.Xb(0,"div",1),v.Xb(1,"h4",2),v.Xc(2),v.Wb(),v.Sb(3,"br"),v.Xb(4,"div",3),v.Vc(5,Xn,2,6,"div",7),v.jc(6,"keyvalue"),v.Wb(),v.Wb()),2&n){const n=v.ic();v.Db(2),v.Zc("Widgets ",null==n.staff||null==n.staff.user?null:n.staff.user.fullName," cannot view"),v.Db(3),v.rc("ngForOf",v.kc(6,2,n.widgets))}}let yn=(()=>{class n extends h.a{constructor(n,t,e,i){super(),this._activatedRoute=n,this._staffService=t,this._dashboardService=e,this._widgetsService=i,this.widgetToExclude=["LOGGED_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE","LOGGED_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B","MONITORING","ON_BOARDING","OVERVIEW","PATIENTS_LIKELY_TO_BE_COMPLIANT","PATIENTS_WITH_CLOSE_MONITORING","PATIENTS_WITH_NO_VITALS","PATIENTS_WITH_PENDING_ASSESSMENT","PENDING_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE","PENDING_ADDITIONAL_TREATMENT_MANAGEMENT_SERVICE_B","PENDING_MEASUREMENT","QUICK_PROGRESS","QUICK_VIEW","BHI_PENDING_CONSENT","BHI_PENDING_PHYSICIAN_ORDER"]}ngOnInit(){this.getStaffDetails()}getStaffDetails(){const n=this._activatedRoute.snapshot.params.id;this._staffService.fetchStaffMemberById(n,n).subscribe(n=>{this.staff=n,this.getWidgetPermissions()})}getWidgetPermissions(){this._dashboardService.fetchWidgetPermissions().subscribe(n=>{this._widgetsService.setWidgetPermissions(n),this.widgets=n,Object.keys(n).forEach(n=>{-1!==this.widgetToExclude.indexOf(n)&&delete this.widgets[n]}),this.loaded=!0})}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.a),v.Rb(on.a),v.Rb(an.a),v.Rb(ln.a))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-dashboard-widgets"]],features:[v.Ab],decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-typography",""],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","5",3,"staffDashboardWidget","permissions",4,"ngFor","ngForOf"],["nz-col","","nzSpan","5",3,"staffDashboardWidget","permissions"],[3,"staff","name","permissions"],["nz-col","","nzSpan","5",3,"disabledStaffDashboardWidget","permissions",4,"ngFor","ngForOf"],["nz-col","","nzSpan","5",3,"disabledStaffDashboardWidget","permissions"],[3,"staff","name","permissions","disabled"]],template:function(n,t){1&n&&(v.Vc(0,zn,8,4,"div",0),v.Vc(1,In,7,4,"div",0)),2&n&&(v.rc("ngIf",t.loaded),v.Db(1),v.rc("ngIf",t.loaded))},directives:[a.q,T.a,P.c,a.p,P.a,rn,mn,vn],pipes:[a.j],styles:["[_nghost-%COMP%]     .ant-col-5{margin-bottom:15px}"]}),n})();var Dn=e("nLCl"),Tn=e("4ik+"),Wn=e("IW2O"),Pn=e("bNXi"),Cn=e("C2AL"),An=e("PTRe"),_n=e("OzZK"),Mn=e("RwU8"),On=e("QlLE"),Nn=e("TaO5"),Rn=e("UpsY"),En=e("m3lz");function wn(n,t){1&n&&(v.Vb(0),v.Xc(1,", "),v.Ub())}function xn(n,t){if(1&n&&(v.Xb(0,"strong"),v.Xc(1),v.jc(2,"titlecase"),v.jc(3,"userLocation"),v.Vc(4,wn,2,0,"ng-container",11),v.Wb()),2&n){const n=t.$implicit,e=t.index,i=v.ic(2);v.Db(1),v.Zc(" ",v.kc(2,2,v.kc(3,4,null==n?null:n.id)),""),v.Db(3),v.rc("ngIf",e!==(null==i.staff||null==i.staff.locations?null:i.staff.locations.length)-1)}}function Vn(n,t){if(1&n){const n=v.Yb();v.Xb(0,"button",12),v.ec("click",function(t){return v.Lc(n),v.ic(2).filterPhysicians(t)}),v.Sb(1,"app-icons",13),v.Wb()}2&n&&(v.Db(1),v.rc("originalStyle",!0))}function kn(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-empty",14),v.Ub()),2&n){const n=v.ic(2);v.Db(1),v.rc("nzNotFoundContent",n.searchKey?"No physicians available matching your search":"No physicians found")}}function Ln(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" 0",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0," ")}}function Fn(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" ",null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount," ")}}function Un(n,t){1&n&&(v.Vb(0),v.Xc(1," Active Patient "),v.Ub())}function jn(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" Active ",v.kc(2,1,"COMMON.PATIENTS")," "))}function Gn(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" 0",(null==n||null==n.assignedStaff?null:n.assignedStaff.length)||0," ")}}function Yn(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" ",null==n||null==n.assignedStaff?null:n.assignedStaff.length," ")}}const Hn=function(n){return{border:n}},Bn=function(n){return[n]};function $n(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"div",15),v.Xb(2,"div",16),v.Xb(3,"div",17),v.Xb(4,"label",18),v.ec("ngModelChange",function(n){return t.$implicit.selected=n}),v.Wb(),v.Wb(),v.Wb(),v.Xb(5,"h5",19),v.Xb(6,"strong",20),v.Xc(7),v.Wb(),v.Wb(),v.Xb(8,"h5",21),v.jc(9,"userLocations"),v.Xc(10),v.jc(11,"userLocations"),v.Wb(),v.Xb(12,"div",22),v.Xb(13,"div",23),v.Xb(14,"span",24),v.Vc(15,Ln,2,1,"ng-container",11),v.Vc(16,Fn,2,1,"ng-container",11),v.Wb(),v.Xb(17,"span",25),v.Vc(18,Un,2,0,"ng-container",11),v.Vc(19,jn,3,3,"ng-container",11),v.Wb(),v.Wb(),v.Xb(20,"div",23),v.Xb(21,"span",24),v.Vc(22,Gn,2,1,"ng-container",11),v.Vc(23,Yn,2,1,"ng-container",11),v.Wb(),v.Xb(24,"span",25),v.Xc(25," Monitoring Staff "),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("ngClass",null!=n&&n.assigned?"assigned shadowed":"")("ngStyle",v.yc(25,Hn,null!=n&&n.selected?"2px solid #a7c853":"2px solid #ffffff")),v.Db(3),v.rc("nzDisabled",n.assigned)("ngModel",n.selected)("nzValue",n.id),v.Db(1),v.rc("nzTooltipTitle",(null==n?null:n.fullName)||"N/A"),v.Db(1),v.rc("ngClass",v.yc(27,Bn,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.Zc(" ",(null==n?null:n.fullName)||"N/A"," "),v.Db(1),v.sc("nzTooltipTitle",v.kc(9,21,null==n?null:n.locations)),v.rc("ngClass",v.yc(29,Bn,null!=n&&n.assigned?"assigned":"")),v.Db(2),v.Zc(" ",v.kc(11,23,null==n?null:n.locations)," "),v.Db(4),v.rc("ngClass",v.yc(31,Bn,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)<10),v.Db(1),v.rc("ngIf",((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)>=10),v.Db(1),v.rc("ngClass",v.yc(33,Bn,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",1===((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)),v.Db(1),v.rc("ngIf",1!==((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)),v.Db(2),v.rc("ngClass",v.yc(35,Bn,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",((null==n||null==n.assignedStaff?null:n.assignedStaff.length)||0)<10),v.Db(1),v.rc("ngIf",((null==n||null==n.assignedStaff?null:n.assignedStaff.length)||0)>=10),v.Db(1),v.rc("ngClass",v.yc(37,Bn,null!=n&&n.assigned?"assigned":""))}}function qn(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",1),v.Xb(1,"div",2),v.Xb(2,"div",3),v.Xb(3,"h4",4),v.Xc(4),v.jc(5,"titlecase"),v.Wb(),v.Xb(6,"p",4),v.Xc(7," Assigining a staff member to at least one physician is important for the staff member to actively view and manage the patients assigned to the physician. "),v.Sb(8,"br"),v.Sb(9,"br"),v.Vb(10),v.Xc(11," You can assign one or multiple physicians from "),v.Vc(12,xn,5,6,"strong",5),v.Xc(13),v.jc(14,"titlecase"),v.Ub(),v.Sb(15,"br"),v.Sb(16,"br"),v.Vb(17),v.Xb(18,"strong"),v.Xc(19,"Note: "),v.Wb(),v.Xc(20,"Once assigned, we will be unable to un-assign the staff from these physicians at these locations. "),v.Ub(),v.Wb(),v.Wb(),v.Xb(21,"div",6),v.Xb(22,"nz-input-group",7),v.Xb(23,"input",8),v.ec("ngModelChange",function(t){return v.Lc(n),v.ic().searchKey=t})("ngModelChange",function(t){return v.Lc(n),v.ic().filterPhysicians(t)}),v.jc(24,"translate"),v.Wb(),v.Wb(),v.Vc(25,Vn,2,1,"ng-template",null,9,v.Wc),v.Wb(),v.Wb(),v.Xb(27,"div",10),v.Vc(28,kn,2,1,"ng-container",11),v.Vc(29,$n,26,39,"ng-container",5),v.Wb(),v.Wb()}if(2&n){const n=v.Ic(26),t=v.ic();v.Db(4),v.Zc("Assign ",v.kc(5,8,null==t.staff?null:t.staff.fullName)," to physicians in the same site"),v.Db(8),v.rc("ngForOf",null==t.staff?null:t.staff.locations),v.Db(1),v.Zc(" sites. ",v.kc(14,10,null==t.staff?null:t.staff.fullName)," will be assigned as a monitoring staff to all patients under the selected physicians in these sites. "),v.Db(9),v.rc("nzAddOnAfter",n),v.Db(1),v.sc("placeholder",v.kc(24,12,"COMMON.SEARCH")),v.rc("ngModel",t.searchKey),v.Db(5),v.rc("ngIf",!(null!=t.filteredPhysicians&&t.filteredPhysicians.length)),v.Db(1),v.rc("ngForOf",t.filteredPhysicians)}}let Zn=(()=>{class n extends h.a{constructor(n,t,e,i){super(),this._router=n,this._activatedRoute=t,this._staffService=e,this._notificationsService=i,this.role=this._activatedRoute.snapshot.queryParamMap.get("role"),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Tn.filter)(n=>!!n),Object(Wn.takeUntil)(this.unsubscribed)).subscribe(()=>this.assignPhysicians())}ngOnInit(){this.getStaffById()}getStaffById(){this._staffService.fetchStaffMemberById(this._activatedRoute.snapshot.params.id).subscribe(n=>{this.staff=null==n?void 0:n.user,this.assignedPhysicians=null==n?void 0:n.assignedToUsers[Dn.a.PHYSICIAN],this.getAssignableStaff()})}checkIfStaffAssigned(){var n;null===(n=this.assignedPhysicians)||void 0===n||n.forEach(n=>{const t=this.filteredPhysicians.find(t=>t.id===n.id);t&&(t.selected=!0,t.assigned=!0)})}getAssignableStaff(){const n=this._activatedRoute.snapshot.params.id;let t=this._activatedRoute.snapshot.queryParamMap.get("role");t=Dn.a.PHYSICIAN===t?Dn.a.MONITORING_STAFF:Dn.a.PHYSICIAN,this._staffService.fetchAssignableStaffMembersById(n,t).subscribe(n=>{this.filteredPhysicians=n,this.physicians=JSON.parse(JSON.stringify(n)),this.checkIfStaffAssigned()})}assignPhysicians(){var n,t,e,i,s;const a={};this.filteredPhysicians.filter(n=>n.selected).filter(n=>{var t,e;return!(null===(t=this.assignedPhysicians)||void 0===t?void 0:t.length)||-1===(null===(e=this.assignedPhysicians)||void 0===e?void 0:e.findIndex(t=>t.id===n.id))}).forEach(n=>{a[null==n?void 0:n.id]=this.staff.id});const o={assignmentMap:a,assignTo:this.role};(null===(n=this.assignedPhysicians)||void 0===n?void 0:n.length)||a&&(null===(t=Object.keys(a))||void 0===t?void 0:t.length)?!(null===(e=this.assignedPhysicians)||void 0===e?void 0:e.length)||(null===(i=Object.keys(a))||void 0===i?void 0:i.length)?this._staffService.assignStaffMembers(o).subscribe(n=>{var t;this._notificationsService.success("Assignment",(null==n?void 0:n.message)||"Assigned"),this._router.navigate(["/staff/view/",this.staff.id],{queryParams:{role:this.role,staffName:null===(t=this.staff)||void 0===t?void 0:t.fullName}})}):this._router.navigate(["/staff/view/",this.staff.id],{queryParams:{role:this.role,staffName:null===(s=this.staff)||void 0===s?void 0:s.fullName}}):this._notificationsService.error("Assignment","Please select at least 1 physician before proceeding!")}filterPhysicians(n){if(!n)return this.filteredPhysicians=[...this.physicians],void this.checkIfStaffAssigned();this.filteredPhysicians=this.physicians.filter(t=>{var e,i;return null===(i=null===(e=null==t?void 0:t.fullName)||void 0===e?void 0:e.toLowerCase())||void 0===i?void 0:i.includes(null==n?void 0:n.toLowerCase())}),this.checkIfStaffAssigned()}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.g),v.Rb(S.a),v.Rb(on.a),v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-physician-assigner"]],features:[v.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","17"],["nz-typography",""],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngIf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-checkbox","",3,"nzDisabled","ngModel","nzValue","ngModelChange"],["nz-typography","","nz-tooltip","",1,"name",3,"nzTooltipTitle"],[3,"ngClass"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"]],template:function(n,t){1&n&&v.Vc(0,qn,30,14,"div",0),2&n&&v.rc("ngIf",t.staff)},directives:[a.q,P.c,P.a,T.a,a.p,Cn.a,An.c,An.b,c.d,c.u,c.x,_n.a,Mn.a,dn.a,On.b,a.o,a.r,Nn.a,un.d],pipes:[a.A,bn.a,Rn.a,En.a],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);height:110px;-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-20px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}"]}),n})();var Qn=e("6aLS"),Kn=e("1G5W"),Jn=e("pLZG"),nt=e("F6ss"),tt=e("ZE2D"),et=e("ZyQt");function it(n,t){if(1&n&&v.Sb(0,"img",8),2&n){const n=v.ic();v.rc("src",null==n.staff?null:n.staff.profilePicture,v.Oc)}}function st(n,t){1&n&&v.Sb(0,"nz-avatar",9),2&n&&v.rc("nzShape","square")("nzSize",75)("nzIcon","user")}function at(n,t){1&n&&(v.Vb(0),v.Xc(1,", "),v.Ub())}function ot(n,t){if(1&n&&(v.Xb(0,"span",4),v.Xc(1),v.jc(2,"titlecase"),v.jc(3,"userLocation"),v.Vc(4,at,2,0,"ng-container",7),v.Wb()),2&n){const n=t.$implicit,e=t.index,i=v.ic();v.Db(1),v.Zc(" ",v.kc(2,2,v.kc(3,4,null==n?null:n.id)),""),v.Db(3),v.rc("ngIf",e!==(null==i.staff||null==i.staff.locations?null:i.staff.locations.length)-1)}}function lt(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-tag",12),v.Xc(2),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(2),v.Yc(n)}}function rt(n,t){if(1&n&&(v.Xb(0,"div"),v.Xb(1,"p",10),v.Xc(2),v.jc(3,"translate"),v.Wb(),v.Vc(4,lt,3,1,"ng-container",11),v.Sb(5,"nz-divider"),v.Wb()),2&n){const n=v.ic();v.Db(2),v.Yc(v.kc(3,2,"COMMON.PROFILETAG")),v.Db(2),v.rc("ngForOf",null==n.staff?null:n.staff.profileTags)}}let ct=(()=>{class n{constructor(n,t,e){this._activatedRoute=n,this._router=t,this._drawerRef=e}ngOnInit(){}viewStaff(){var n;const t=this._activatedRoute.snapshot.queryParamMap.get("role")||Dn.a.PHYSICIAN;this._router.navigate(["staff/view",this.staff.id],{queryParams:{role:t,staffName:null===(n=this.staff)||void 0===n?void 0:n.fullName,status:"ALL"}})}closeDrawer(){this._drawerRef.close()}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.a),v.Rb(S.g),v.Rb(nt.c))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-details"]],inputs:{staff:"staff"},decls:26,vars:10,consts:[["nz-row",""],["nz-col","","nzSpan","12"],["alt","staff-profile",3,"src",4,"ngIf"],[3,"nzShape","nzSize","nzIcon",4,"ngIf"],["nz-typography","","nzType","secondary"],["nz-typography","","nzType","secondary",4,"ngFor","ngForOf"],["nz-button","","nzSize","large","nzType","primary",3,"click"],[4,"ngIf"],["alt","staff-profile",3,"src"],[3,"nzShape","nzSize","nzIcon"],["nz-typography","","nzType","success"],[4,"ngFor","ngForOf"],["nzColor","#EFFEE2"]],template:function(n,t){1&n&&(v.Sb(0,"br"),v.Xb(1,"div",0),v.Xb(2,"div",1),v.Vc(3,it,1,1,"img",2),v.Vc(4,st,1,3,"nz-avatar",3),v.Wb(),v.Wb(),v.Sb(5,"br"),v.Xb(6,"h2"),v.Xc(7),v.Wb(),v.Xb(8,"span",4),v.Xc(9),v.Wb(),v.Sb(10,"br"),v.Sb(11,"br"),v.Xb(12,"label"),v.Xb(13,"strong",4),v.Xc(14,"Contact: "),v.Wb(),v.Xc(15),v.Wb(),v.Xb(16,"label"),v.Xb(17,"strong",4),v.Xc(18,"Sites: "),v.Wb(),v.Vc(19,ot,5,6,"span",5),v.Wb(),v.Sb(20,"br"),v.Xb(21,"button",6),v.ec("click",function(){return t.closeDrawer()})("click",function(){return t.viewStaff()}),v.Xc(22),v.jc(23,"translate"),v.Wb(),v.Sb(24,"nz-divider"),v.Vc(25,rt,6,4,"div",7)),2&n&&(v.Db(3),v.rc("ngIf",null==t.staff?null:t.staff.profilePicture),v.Db(1),v.rc("ngIf",!(null!=t.staff&&t.staff.profilePicture)),v.Db(3),v.Yc(null==t.staff?null:t.staff.fullName),v.Db(2),v.Yc(null==t.staff||null==t.staff.roles[0]?null:t.staff.roles[0].name),v.Db(6),v.Zc(" ",null==t.staff?null:t.staff.mobile,"\n"),v.Db(4),v.rc("ngForOf",null==t.staff?null:t.staff.locations),v.Db(3),v.Zc(" ",v.kc(23,8,"PATIENT.VIEW_PROFILE"),"\n"),v.Db(3),v.rc("ngIf",!(null==t.staff||null==t.staff.profileTags||!t.staff.profileTags.length)))},directives:[P.c,P.a,a.q,T.a,a.p,_n.a,Mn.a,Cn.a,A.a,tt.a,et.a],pipes:[bn.a,a.A,Rn.a],styles:["h2[_ngcontent-%COMP%]{text-transform:capitalize;margin-bottom:0}label[_ngcontent-%COMP%]{display:block}nz-tag[_ngcontent-%COMP%]{background:#effee2 0 0 no-repeat padding-box;color:#0f2015;font-size:11px}"]}),n})(),ut=(()=>{class n{constructor(n){this._drawerService=n}staffDetails(n){return this._drawerService.create({nzContent:ct,nzContentParams:{staff:n},nzMask:!0,nzMaskStyle:{background:"transparent"},nzMaskClosable:!0,nzWidth:350})}}return n.\u0275fac=function(t){return new(t||n)(v.bc(nt.d))},n.\u0275prov=v.Nb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dt{constructor(){}}var bt=e("ds6q"),ft=e("oyxB"),pt=e("PzCk"),gt=e("AytR"),ht=e("eq8A"),mt=e("idJI"),vt=e("dEAy"),St=e("Szod"),zt=e("A07A"),Xt=e("ZKr6"),It=e("Nqz0"),yt=e("Q8cG"),Dt=e("t2pg");function Tt(n,t){1&n&&v.Sb(0,"th")}function Wt(n,t){1&n&&(v.Xb(0,"th"),v.Xc(1,"Assigned"),v.Wb())}function Pt(n,t){1&n&&(v.Xb(0,"th"),v.Xc(1,"Assigned Patients"),v.Wb())}function Ct(n,t){1&n&&(v.Xb(0,"th"),v.Xc(1," Assigned Tenants "),v.Wb())}function At(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",14),v.ec("click",function(){return v.Lc(n),v.ic(2).redirectNoAssignedStaff()}),v.Sb(1,"nz-statistic",15),v.Wb()}if(2&n){v.ic();const n=v.Ic(16),t=v.ic();v.Db(1),v.rc("nzValueStyle",t.disabledStyle)("nzTitle",n)}}function _t(n,t){if(1&n&&(v.Xb(0,"span"),v.Xc(1),v.Wb()),2&n){const n=v.ic(2);v.Db(1),v.Zc(" ",null==n.element||null==n.element.count?null:n.element.count.patients," ")}}function Mt(n,t){1&n&&v.Sb(0,"td")}function Ot(n,t){if(1&n&&(v.Xb(0,"tr"),v.Xb(1,"td"),v.Xb(2,"p",6),v.Xc(3," No assigned monitoring staff "),v.Wb(),v.Wb(),v.Xb(4,"td"),v.Xc(5," - "),v.Wb(),v.Xb(6,"td"),v.Xb(7,"div",7),v.Sb(8,"nz-statistic",8),v.Wb(),v.Wb(),v.Xb(9,"td"),v.Vc(10,At,2,2,"div",9),v.Xb(11,"div",7),v.Sb(12,"nz-statistic",10),v.Wb(),v.Xb(13,"div",11),v.Sb(14,"nz-statistic",12),v.Wb(),v.Vc(15,_t,2,1,"ng-template",null,13,v.Wc),v.Wb(),v.Xb(17,"td"),v.Xc(18," - "),v.Wb(),v.Vc(19,Mt,1,0,"td",4),v.Sb(20,"td"),v.Wb()),2&n){const n=v.ic();v.Db(8),v.rc("nzValueStyle",n.disabledStyle),v.Db(2),v.rc("ngIf","PHYSICIAN"===n.roleType||"MONITORING_STAFF"===n.roleType),v.Db(2),v.rc("nzValueStyle",n.disabledStyle),v.Db(2),v.rc("nzValueStyle",n.disabledStyle)}}function Nt(n,t){1&n&&(v.Vb(0),v.Xc(1," (disabled) "),v.Ub())}function Rt(n,t){if(1&n&&(v.Xb(0,"nz-tag",23),v.Xc(1,"New"),v.Wb()),2&n){v.ic();const n=v.Ic(3);v.rc("nzTooltipTitle",n)("nzColor","volcano")}}function Et(n,t){1&n&&(v.Xb(0,"span"),v.Xc(1,"This profile has been created recently and has not been updated since "),v.Wb())}function wt(n,t){if(1&n&&(v.Xb(0,"td"),v.Vc(1,Rt,2,2,"nz-tag",21),v.Vc(2,Et,2,0,"ng-template",null,22,v.Wc),v.Wb()),2&n){const n=v.ic(2).$implicit;v.Db(1),v.rc("ngIf",!(null!=n&&null!=n.user&&n.user.updatedAt))}}function xt(n,t){if(1&n&&(v.Xb(0,"div",7),v.Sb(1,"nz-statistic",29),v.Wb()),2&n){v.ic();const n=v.Ic(7),t=v.ic(3);v.Db(1),v.rc("nzValueStyle",t.disabledStyle)("nzTitle",n)}}function Vt(n,t){if(1&n&&(v.Xb(0,"div",30),v.Sb(1,"nz-statistic",31),v.Wb()),2&n){v.ic();const n=v.Ic(5);v.Db(1),v.rc("nzTitle",n)}}function kt(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",32),v.ec("click",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic().redirect(null==t||null==t.user?null:t.user.id,null==t||null==t.user?null:t.user.fullName)}),v.Sb(1,"nz-statistic",33),v.Wb()}if(2&n){v.ic();const n=v.Ic(9),t=v.ic(3);v.Db(1),v.rc("nzValueStyle",t.disabledStyle)("nzTitle",n)}}function Lt(n,t){if(1&n&&(v.Xb(0,"span",34),v.Xc(1),v.Wb()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Zc(" ",null==n||null==n.count?null:n.count.monitoringStaff," ")}}function Ft(n,t){if(1&n&&(v.Xb(0,"span",34),v.Xc(1),v.Wb()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Zc(" ",null==n||null==n.user||null==n.user.clinicianState?null:n.user.clinicianState.assignedPhysicianCount," ")}}function Ut(n,t){if(1&n&&(v.Xb(0,"span",34),v.Xc(1),v.Wb()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Zc(" ",null==n||null==n.count?null:n.count.patients," ")}}function jt(n,t){if(1&n&&(v.Xb(0,"td"),v.Vc(1,xt,2,2,"div",24),v.Vc(2,Vt,2,1,"div",25),v.Vc(3,kt,2,2,"div",26),v.Vc(4,Lt,2,2,"ng-template",null,27,v.Wc),v.Vc(6,Ft,2,2,"ng-template",null,28,v.Wc),v.Vc(8,Ut,2,2,"ng-template",null,13,v.Wc),v.Wb()),2&n){const n=v.ic(3);v.Db(1),v.rc("ngIf","MONITORING_STAFF"===n.roleType),v.Db(1),v.rc("ngIf","PHYSICIAN"===n.roleType),v.Db(1),v.rc("ngIf","PHYSICIAN"===n.roleType)}}function Gt(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",14),v.ec("click",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic().redirect(null==t||null==t.user?null:t.user.id,null==t||null==t.user?null:t.user.fullName)}),v.Sb(1,"nz-statistic",15),v.Wb()}if(2&n){v.ic();const n=v.Ic(7),t=v.ic(3);v.Db(1),v.rc("nzValueStyle",t.disabledStyle)("nzTitle",n)}}function Yt(n,t){if(1&n&&(v.Xb(0,"span",34),v.Xc(1),v.Wb()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Zc(" ",null==n||null==n.count?null:n.count.patients," ")}}function Ht(n,t){if(1&n&&(v.Xb(0,"span",34),v.Xc(1),v.Wb()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Zc(" ",null==n||null==n.count?null:n.count.primaryPatients," ")}}function Bt(n,t){if(1&n&&(v.Xb(0,"span",34),v.Xc(1),v.Wb()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Zc(" ",null==n||null==n.count?null:n.count.secondaryPatients," ")}}function $t(n,t){if(1&n){const n=v.Yb();v.Xb(0,"td"),v.Vc(1,Gt,2,2,"div",9),v.Xb(2,"div",14),v.ec("click",function(){v.Lc(n);const t=v.ic(2).$implicit;return v.ic().redirect(null==t||null==t.user?null:t.user.id,null==t||null==t.user?null:t.user.fullName,"PRIMARY")}),v.Sb(3,"nz-statistic",35),v.Wb(),v.Xb(4,"div",36),v.ec("click",function(){v.Lc(n);const t=v.ic(2).$implicit;return v.ic().redirect(null==t||null==t.user?null:t.user.id,null==t||null==t.user?null:t.user.fullName,"OTHER")}),v.Sb(5,"nz-statistic",37),v.Wb(),v.Vc(6,Yt,2,2,"ng-template",null,13,v.Wc),v.Vc(8,Ht,2,2,"ng-template",null,38,v.Wc),v.Vc(10,Bt,2,2,"ng-template",null,39,v.Wc),v.Wb()}if(2&n){const n=v.Ic(9),t=v.Ic(11),e=v.ic(3);v.Db(1),v.rc("ngIf","PHYSICIAN"===e.roleType||"MONITORING_STAFF"===e.roleType),v.Db(2),v.rc("nzValueStyle",e.disabledStyle)("nzTitle",n),v.Db(2),v.rc("nzValueStyle",e.disabledStyle)("nzTitle",t)}}function qt(n,t){1&n&&(v.Vb(0),v.Xc(1,", "),v.Ub())}function Zt(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"tenantName"),v.Vc(3,qt,2,0,"ng-container",3),v.Ub()),2&n){const n=t.$implicit,e=t.index,i=v.ic(3).$implicit;v.Db(1),v.Zc(" ",v.kc(2,2,n),""),v.Db(2),v.rc("ngIf",e<i.user.assignedTenantIds.length-1)}}function Qt(n,t){if(1&n&&(v.Xb(0,"td"),v.Xb(1,"span",18),v.Vc(2,Zt,4,4,"ng-container",5),v.Wb(),v.Wb()),2&n){const n=v.ic(2).$implicit,t=v.ic();v.Db(1),v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.rc("ngForOf",n.user.assignedTenantIds)}}function Kt(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-icons",40),v.ec("click",function(){v.Lc(n);const t=v.ic(2).$implicit;return v.ic().showDetails(null==t?null:t.user)}),v.Wb()}}function Jt(n,t){if(1&n){const n=v.Yb();v.Xb(0,"li",50),v.ec("click",function(){v.Lc(n);const t=v.ic(4).$implicit;return v.ic().disableStaff(t)}),v.Xc(1," Disable "),v.Wb()}}function ne(n,t){if(1&n){const n=v.Yb();v.Xb(0,"li",51),v.ec("click",function(){v.Lc(n);const t=v.ic(4).$implicit;return v.ic().enableStaff(null==t||null==t.user?null:t.user.id)}),v.Xc(1," Enable "),v.Wb()}}function te(n,t){if(1&n){const n=v.Yb();v.Xb(0,"li",52),v.ec("click",function(){v.Lc(n);const t=v.ic(4).$implicit;return v.ic().generateAndDownloadReport(null==t||null==t.user?null:t.user.id)}),v.Xc(1," Cancelled Appointments "),v.Wb()}}const ee=function(n,t){return{role:n,staffName:t}};function ie(n,t){if(1&n&&(v.Xb(0,"li",53),v.Xc(1," Audit Sessions "),v.Wb()),2&n){const n=v.ic(4).$implicit,t=v.ic();v.tc("routerLink","/staff/sessions/audit/",null==n||null==n.user?null:n.user.id,""),v.rc("queryParams",v.zc(2,ee,t.roleType,null==n||null==n.user?null:n.user.fullName))}}function se(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Jt,2,0,"li",46),v.Vc(2,ne,2,0,"li",47),v.Vc(3,te,2,0,"li",48),v.Vc(4,ie,2,5,"li",49),v.Ub()),2&n){const n=v.ic(3).$implicit,t=v.ic();v.Db(1),v.rc("ngIf",null==n||null==n.user?null:n.user.active),v.Db(1),v.rc("ngIf",!(null!=n&&null!=n.user&&n.user.active)),v.Db(1),v.rc("ngIf",!(null!=n&&null!=n.user&&n.user.active)),v.Db(1),v.rc("ngIf",null==t.tenantConfig||null==t.tenantConfig.staffSessionConfig?null:t.tenantConfig.staffSessionConfig.auditEnabled)}}function ae(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"a",41),v.Sb(2,"app-icons",42),v.Wb(),v.Xb(3,"nz-dropdown-menu",null,43),v.Xb(5,"ul",44),v.Xb(6,"li",45),v.ec("click",function(){v.Lc(n);const t=v.ic(2).$implicit;return v.ic().editStaff(null==t?null:t.user,null==t||null==t.user?null:t.user.active)}),v.Xc(7," Edit Details "),v.Wb(),v.Vc(8,se,5,4,"ng-container",3),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=v.Ic(4),t=v.ic(2).$implicit,e=v.ic();v.Db(1),v.rc("nzDropdownMenu",n),v.Db(5),v.rc("nzDisabled",!(null!=t&&null!=t.user&&t.user.active))("queryParams",v.zc(4,ee,e.roleType,null==t||null==t.user?null:t.user.fullName)),v.Db(2),v.rc("ngIf","MONITORING_STAFF"===e.roleType)}}const oe=function(){return["EDIT_STAFF","EDIT_PHYSICIAN"]};function le(n,t){if(1&n){const n=v.Yb();v.Xb(0,"tr"),v.Xb(1,"td",16),v.ec("click",function(){v.Lc(n);const t=v.ic().$implicit;return v.ic().viewStaff(null==t?null:t.user)}),v.Xb(2,"p",17),v.Xc(3),v.Vc(4,Nt,2,0,"ng-container",3),v.Wb(),v.Wb(),v.Vc(5,wt,4,1,"td",3),v.Xb(6,"td"),v.Xc(7),v.Wb(),v.Vc(8,jt,10,3,"td",3),v.Vc(9,$t,12,5,"td",3),v.Xb(10,"td"),v.Xb(11,"span",18),v.Xc(12),v.jc(13,"titlecase"),v.jc(14,"userLocations"),v.Wb(),v.Wb(),v.Vc(15,Qt,3,2,"td",4),v.Xb(16,"td"),v.Vc(17,Kt,1,0,"app-icons",19),v.Xc(18," \xa0\xa0 "),v.Vc(19,ae,9,7,"ng-container",20),v.Wb(),v.Wb()}if(2&n){const n=v.ic().$implicit,t=v.ic();v.Db(2),v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass)("nzTooltipTitle",null==n||null==n.user?null:n.user.fullName),v.Db(1),v.Zc(" ",null==n||null==n.user?null:n.user.fullName," "),v.Db(1),v.rc("ngIf",!(null!=n&&null!=n.user&&n.user.active)),v.Db(1),v.rc("ngIf","PHYSICIAN"===t.roleType),v.Db(2),v.Zc(" ",null==n||null==n.user||null==n.user.roles[0]?null:n.user.roles[0].name," "),v.Db(1),v.rc("ngIf","PHYSICIAN"===t.roleType||"MONITORING_STAFF"===t.roleType),v.Db(1),v.rc("ngIf","MONITORING_STAFF"===t.roleType),v.Db(2),v.rc("ngClass",null!=n&&null!=n.user&&n.user.active?"":t.disabledClass),v.Db(1),v.Yc(v.kc(13,12,v.kc(14,14,null==n||null==n.user?null:n.user.locations))),v.Db(5),v.rc("ngIf",null==n||null==n.user?null:n.user.active),v.Db(2),v.rc("isFeaturePermitted",v.xc(16,oe))}}function re(n,t){if(1&n&&(v.Vb(0),v.Vc(1,le,20,17,"tr",3),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("ngIf",null==n?null:n.user)}}const ce=function(){return{x:"1250px"}};let ue=(()=>{class n{constructor(n,t,e,i){this._router=n,this._staffService=t,this._modalService=e,this._dataSharingService=i,this.disabledStyle={color:"darkgrey",cursor:"not-allowed"},this.disabledClass="disabled-staff",this.data=new v.n,this.details=new v.n,this.delete=new v.n,this.enable=new v.n,this.refresh=new v.n,this._dataSharingService.tenantSettings.subscribe(n=>{this.tenantConfig=n}),this._dataSharingService.onSubTenantChange().subscribe(n=>{this.onSubTenantChange(n)})}set role(n){this.roleType=n}set showSubTenant(n){this.showSubTenantColumn=n}viewStaff(n){n.active&&this._router.navigate(["staff/view",n.id],{queryParams:{role:this.roleType,staffName:n.fullName}})}getData(n){this.data.emit(n)}showDetails(n){n.active&&this.details.emit(n)}deleteStaff(n){this.delete.emit(n)}disableStaff(n){var t;n.count.physicians>0?this._router.navigate(["/disable/staff/MONITORING_STAFF/",n.user.id],{queryParams:{role:this.roleType,staffName:null===(t=null==n?void 0:n.user)||void 0===t?void 0:t.fullName}}):this.disable(n.user.id)}enableStaff(n){this.enable.emit(n)}editStaff(n,t){t&&this._router.navigate(["staff/edit",n.id],{queryParams:{role:this.roleType,staffName:n.fullName}})}emitRefresh(){this.refresh.emit()}generateAndDownloadReport(n){this._staffService.generateAndDownloadReport(n).subscribe(n=>{null!=n.fileName&&window.open(`${gt.g.url}/v2/media/${n.fileName}`)})}disable(n){this._modalService.create({nzContent:ht.a,nzMaskClosable:!1,nzClosable:!1,nzFooter:null,nzTitle:"Are you sure you want to disable the staff?",nzCancelText:null,nzOkText:null,nzWrapClassName:"vertical-center-modal",nzBodyStyle:{paddingTop:"0px"}}).afterClose.subscribe(t=>{t.isConfirmed&&this._staffService.disableMonitoringStaff(n,t.reason).subscribe(n=>{this._modalService.create({nzContent:mt.a,nzComponentParams:{selectedMonitoringStaffName:t.selectedMonitoringStaffName,referer:"DISABLE_MONITORING_STAFF"},nzTitle:null,nzFooter:null,nzClosable:!1,nzMaskClosable:!1,nzOkText:null,nzCancelText:null}).afterClose.subscribe(()=>{this.emitRefresh()})})})}redirect(n,t,e="ALL"){const i="ALL"===this.patientStatus?null:this.patientStatus;this._router.navigate(["patient"],Dn.a.MONITORING_STAFF!==this.roleType?{queryParams:{filter:"ALL_PATIENTS",physicians:n,physiciansName:t,patientStatus:i}}:{queryParams:{filter:"ALL_PATIENTS",staffId:n,staffName:t,assignedStaffType:e,patientStatus:i}})}redirectNoAssignedStaff(){this._router.navigate(["patient"],{queryParams:{filter:"ALL_PATIENTS",staffId:"UNASSIGNED",staffName:"No assigned monitoring staff",physicians:"UNASSIGNED",physiciansName:"No assigned physician",assignedStaffType:"ALL",patientStatus:"ALL"===this.patientStatus?null:this.patientStatus}})}onSubTenantChange(n){this.getData(1)}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.g),v.Rb(on.a),v.Rb(vt.f),v.Rb(b.a))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-table"]],inputs:{widthConfig:"widthConfig",role:"role",staffResponse:["staff","staffResponse"],loading:"loading",patientStatus:"patientStatus",showSubTenant:"showSubTenant"},outputs:{data:"data",details:"details",delete:"delete",enable:"enable",refresh:"refresh"},decls:20,vars:17,consts:[[1,"container"],[3,"nzData","nzShowPagination","nzFrontPagination","nzTotal","nzPageSize","nzWidthConfig","nzScroll","nzLoading","nzPageIndexChange"],["staffTable",""],[4,"ngIf"],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],["nz-typography","","nz-tooltip","","nzTooltipTitle","No assigned monitoring staff","nzEllipsis","",1,"no-assigned-staff"],[1,"stats-container"],["nzTitle"," - ","nzValue","Physicians",3,"nzValueStyle"],["class","stats-container","actionable","",3,"click",4,"ngIf"],["nzTitle"," - ","nzValue","Primary",3,"nzValueStyle"],[1,"stats-container","right-aligned"],["nzTitle"," - ","nzValue","Secondary",3,"nzValueStyle"],["patientCount",""],["actionable","",1,"stats-container",3,"click"],["nzValue","Total",3,"nzValueStyle","nzTitle"],["actionable","",3,"click"],["nz-typography","","nz-tooltip","","nzEllipsis","",3,"ngClass","nzTooltipTitle"],["nz-typography","",3,"ngClass"],["name","view","size","20px",3,"click",4,"ngIf"],[4,"isFeaturePermitted"],["nz-tooltip","",3,"nzTooltipTitle","nzColor",4,"ngIf"],["titleTemplate",""],["nz-tooltip","",3,"nzTooltipTitle","nzColor"],["class","stats-container",4,"ngIf"],["class","half-stats-container",4,"ngIf"],["class","half-stats-container right-aligned","actionable","",3,"click",4,"ngIf"],["monitoringStaffCount",""],["physicianCount",""],["nzValue","Physicians",3,"nzValueStyle","nzTitle"],[1,"half-stats-container"],["nzValue","Monitoring Staff",3,"nzTitle"],["actionable","",1,"half-stats-container","right-aligned",3,"click"],["nzValue","Patients",3,"nzValueStyle","nzTitle"],[3,"ngClass"],["nzValue","Primary",3,"nzValueStyle","nzTitle"],["actionable","",1,"stats-container","right-aligned",3,"click"],["nzValue","Secondary",3,"nzValueStyle","nzTitle"],["primaryPatientCount",""],["otherPatientCount",""],["name","view","size","20px",3,"click"],["nz-dropdown","",3,"nzDropdownMenu"],["name","more","originalStyle","true","size","26px"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"nzDisabled","queryParams","click"],["nz-menu-item","","style","color: #c81c1c;",3,"click",4,"ngIf"],["nz-menu-item","","style","color: var(--primary-color);",3,"click",4,"ngIf"],["nz-menu-item","","style","color: #000;",3,"click",4,"ngIf"],["nz-menu-item","",3,"routerLink","queryParams",4,"ngIf"],["nz-menu-item","",2,"color","#c81c1c",3,"click"],["nz-menu-item","",2,"color","var(--primary-color)",3,"click"],["nz-menu-item","",2,"color","#000",3,"click"],["nz-menu-item","",3,"routerLink","queryParams"]],template:function(n,t){if(1&n&&(v.Xb(0,"div",0),v.Xb(1,"nz-table",1,2),v.ec("nzPageIndexChange",function(n){return t.getData(n)}),v.Xb(3,"thead"),v.Xb(4,"tr"),v.Xb(5,"th"),v.Xc(6),v.jc(7,"translate"),v.Wb(),v.Vc(8,Tt,1,0,"th",3),v.Xb(9,"th"),v.Xc(10,"Role"),v.Wb(),v.Vc(11,Wt,2,0,"th",3),v.Vc(12,Pt,2,0,"th",3),v.Xb(13,"th"),v.Xc(14,"Site"),v.Wb(),v.Vc(15,Ct,2,0,"th",4),v.Sb(16,"th"),v.Wb(),v.Wb(),v.Xb(17,"tbody"),v.Vc(18,Ot,21,4,"tr",3),v.Vc(19,re,2,1,"ng-container",5),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.Ic(2);v.Db(1),v.rc("nzData",null==t.staffResponse?null:t.staffResponse.result)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",null==t.staffResponse?null:t.staffResponse.totalCount)("nzPageSize",10)("nzWidthConfig",t.widthConfig)("nzScroll",v.xc(16,ce))("nzLoading",t.loading),v.Db(5),v.Yc(v.kc(7,14,"COMMON.NAME")),v.Db(2),v.rc("ngIf","PHYSICIAN"===t.roleType),v.Db(3),v.rc("ngIf","PHYSICIAN"===t.roleType||"MONITORING_STAFF"===t.roleType),v.Db(1),v.rc("ngIf","MONITORING_STAFF"===t.roleType),v.Db(6),v.rc("ngIf",!t.loading&&"MONITORING_STAFF"===t.roleType),v.Db(1),v.rc("ngForOf",n.data)}},directives:[D.f,D.n,D.o,D.e,D.l,a.q,St.a,D.i,a.p,T.a,un.d,zt.a,C.a,a.o,Xt.a,et.a,dn.a,It.a,It.b,It.e,yt.c,Cn.a,yt.e,S.h],pipes:[bn.a,a.A,En.a,Dt.a],styles:[".container[_ngcontent-%COMP%]{padding-top:0!important}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left;padding:11px 10px 11px 26px!important}td[_ngcontent-%COMP%]:first-child{text-transform:capitalize;font-weight:700}td[_ngcontent-%COMP%]:last-child{text-align:right}[_nghost-%COMP%]     .ant-typography-ellipsis-single-line{max-width:22ch;margin-bottom:0}app-icons[_ngcontent-%COMP%]{vertical-align:middle}.full-stats-container[_ngcontent-%COMP%]{width:100%;display:inline-block}.half-stats-container[_ngcontent-%COMP%]{width:50%;display:inline-block}.stats-container[_ngcontent-%COMP%]{width:33.33%;display:inline-block}[_nghost-%COMP%]     .ant-statistic{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .ant-statistic-title{font-size:13px!important;margin-bottom:-2px;text-align:center;font-weight:700;color:rgba(15,32,21,.65)}[_nghost-%COMP%]     .ant-statistic-content{font-size:11px!important;text-align:center;font-weight:700;color:rgba(15,32,21,.45)}.right-aligned[_ngcontent-%COMP%]{text-align:center!important;text-align:-webkit-center!important}.disabled-staff[_ngcontent-%COMP%]{color:#a9a9a9;cursor:not-allowed}.no-assigned-staff[_ngcontent-%COMP%]{max-width:30ch!important;margin-bottom:0}"]}),n})();var de=e("zAKX");let be=(()=>{class n{constructor(){this.availableRoleTypes=new Set}transform(n,t){if(t)return null!=t.securityConfigs&&null!=t.securityConfigs.customRolesConfig&&t.securityConfigs.customRolesConfig.availableBoundaries.length>0?t.securityConfigs.customRolesConfig.availableRoleTypes.forEach(n=>{"PATIENT"!=n&&"TENANT_ADMIN"!=n&&this.availableRoleTypes.add(n)}):this.availableRoleTypes=new Set([Dn.a.MONITORING_STAFF,Dn.a.PHYSICIAN]),this.availableRoleTypes.has(Dn.a[n])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=v.Qb({name:"roleTypeEnabled",type:n,pure:!0}),n})();const fe=function(){return["."]},pe=function(){return{role:"TENANT_ADMIN"}};function ge(n,t){1&n&&(v.Xb(0,"a",7),v.Xc(1,"Tenant Admins"),v.Wb()),2&n&&v.rc("routerLink",v.xc(2,fe))("queryParams",v.xc(3,pe))}function he(n,t){if(1&n){const n=v.Yb();v.Xb(0,"nz-tab"),v.Vc(1,ge,2,4,"a",5),v.Xb(2,"app-staff-table",6),v.ec("data",function(t){return v.Lc(n),v.ic(3).getStaff(t)})("details",function(t){return v.Lc(n),v.ic(3).showDetails(t)})("delete",function(t){return v.Lc(n),v.ic(3).deleteStaff(t)}),v.Wb(),v.Wb()}if(2&n){const n=v.ic(3);v.Db(2),v.rc("role",n.role)("staff",n.staffResponse)("loading",n.isLoading)("showSubTenant",n.isAccessAcrossSubTenants)}}const me=function(){return["VIEW_TENANT_ADMIN","ADD_TENANT_ADMIN","EDIT_TENANT_ADMIN"]};function ve(n,t){1&n&&(v.Vb(0),v.Vc(1,he,3,4,"nz-tab",4),v.Ub()),2&n&&(v.Db(1),v.rc("anyFeaturePermitted",v.xc(1,me)))}const Se=function(){return{role:"PHYSICIAN"}};function ze(n,t){1&n&&(v.Xb(0,"a",7),v.Xc(1,"Physicians"),v.Wb()),2&n&&v.rc("routerLink",v.xc(2,fe))("queryParams",v.xc(3,Se))}function Xe(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-staff-table",9),v.ec("data",function(t){return v.Lc(n),v.ic(4).getStaff(t)})("details",function(t){return v.Lc(n),v.ic(4).showDetails(t)})("delete",function(t){return v.Lc(n),v.ic(4).deleteStaff(t)}),v.Wb()}if(2&n){const n=v.ic(4);v.rc("role",n.role)("staff",n.staffResponse)("patientStatus",n.patientStatus)("loading",n.isLoading)("showSubTenant",n.isAccessAcrossSubTenants)("widthConfig",n.isAccessAcrossSubTenants?n.widthConfig.physicianWithSubTenant:n.widthConfig.physicianWithoutSubTenant)}}function Ie(n,t){if(1&n&&(v.Xb(0,"nz-tab"),v.Vc(1,ze,2,4,"a",5),v.Vc(2,Xe,1,6,"app-staff-table",8),v.jc(3,"roleTypeEnabled"),v.Wb()),2&n){const n=v.ic(3);v.Db(2),v.rc("ngIf",v.lc(3,1,"PHYSICIAN",n.tenantConfig))}}const ye=function(){return{role:"MONITORING_STAFF"}};function De(n,t){1&n&&(v.Xb(0,"a",7),v.Xc(1,"Monitoring Staff"),v.Wb()),2&n&&v.rc("routerLink",v.xc(2,fe))("queryParams",v.xc(3,ye))}function Te(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-staff-table",11),v.ec("data",function(t){return v.Lc(n),v.ic(4).getStaff(t)})("details",function(t){return v.Lc(n),v.ic(4).showDetails(t)})("delete",function(t){return v.Lc(n),v.ic(4).deleteStaff(t)})("enable",function(t){return v.Lc(n),v.ic(4).enableStaff(t)})("refresh",function(t){return v.Lc(n),v.ic(4).refreshList(t)}),v.Wb()}if(2&n){const n=v.ic(4);v.rc("role",n.role)("staff",n.staffResponse)("patientStatus",n.patientStatus)("loading",n.isLoading)("showSubTenant",n.isAccessAcrossSubTenants)("widthConfig",n.isAccessAcrossSubTenants?n.widthConfig.monitoringStaffWithSubTenant:n.widthConfig.monitoringStaffWithoutSubTenant)}}function We(n,t){if(1&n&&(v.Xb(0,"nz-tab"),v.Vc(1,De,2,4,"a",5),v.Vc(2,Te,1,6,"app-staff-table",10),v.jc(3,"roleTypeEnabled"),v.Wb()),2&n){const n=v.ic(3);v.Db(2),v.rc("ngIf",v.lc(3,1,"MONITORING_STAFF",n.tenantConfig))}}const Pe=function(){return{role:"ENROLMENT_STAFF"}};function Ce(n,t){1&n&&(v.Xb(0,"a",7),v.Xc(1,"Enrollment Staff"),v.Wb()),2&n&&v.rc("routerLink",v.xc(2,fe))("queryParams",v.xc(3,Pe))}function Ae(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-staff-table",9),v.ec("data",function(t){return v.Lc(n),v.ic(4).getStaff(t)})("details",function(t){return v.Lc(n),v.ic(4).showDetails(t)})("delete",function(t){return v.Lc(n),v.ic(4).deleteStaff(t)}),v.Wb()}if(2&n){const n=v.ic(4);v.rc("role",n.role)("staff",n.staffResponse)("patientStatus",n.patientStatus)("loading",n.isLoading)("showSubTenant",n.isAccessAcrossSubTenants)("widthConfig",n.isAccessAcrossSubTenants?n.widthConfig.enrollmentStaffWithSubTenant:n.widthConfig.enrollmentStaffWithoutSubTenant)}}function _e(n,t){if(1&n&&(v.Xb(0,"nz-tab"),v.Vc(1,Ce,2,4,"a",5),v.Vc(2,Ae,1,6,"app-staff-table",8),v.jc(3,"roleTypeEnabled"),v.Wb()),2&n){const n=v.ic(3);v.Db(2),v.rc("ngIf",v.lc(3,1,"ENROLMENT_STAFF",n.tenantConfig))}}const Me=function(){return{role:"MANAGER_STAFF"}};function Oe(n,t){1&n&&(v.Xb(0,"a",7),v.Xc(1,"Managers"),v.Wb()),2&n&&v.rc("routerLink",v.xc(2,fe))("queryParams",v.xc(3,Me))}function Ne(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-staff-table",9),v.ec("data",function(t){return v.Lc(n),v.ic(4).getStaff(t)})("details",function(t){return v.Lc(n),v.ic(4).showDetails(t)})("delete",function(t){return v.Lc(n),v.ic(4).deleteStaff(t)}),v.Wb()}if(2&n){const n=v.ic(4);v.rc("role",n.role)("staff",n.staffResponse)("patientStatus",n.patientStatus)("loading",n.isLoading)("showSubTenant",n.isAccessAcrossSubTenants)("widthConfig",n.isAccessAcrossSubTenants?n.widthConfig.managerWithSubTenant:n.widthConfig.managerWithoutSubTenant)}}function Re(n,t){if(1&n&&(v.Xb(0,"nz-tab"),v.Vc(1,Oe,2,4,"a",5),v.Vc(2,Ne,1,6,"app-staff-table",8),v.jc(3,"roleTypeEnabled"),v.Wb()),2&n){const n=v.ic(3);v.Db(2),v.rc("ngIf",v.lc(3,1,"MANAGER_STAFF",n.tenantConfig))}}const Ee=function(){return["VIEW_PHYSICIAN","ADD_PHYSICIAN","EDIT_PHYSICIAN"]},we=function(){return["VIEW_MONITORING_STAFF","ADD_MONITORING_STAFF","EDIT_MONITORING_STAFF","DELETE_MONITORING_STAFF"]},xe=function(){return["VIEW_ENROLMENT_STAFF","ADD_ENROLMENT_STAFF","EDIT_ENROLMENT_STAFF","DELETE_ENROLMENT_STAFF"]},Ve=function(){return["VIEW_MANAGER_STAFF","ADD_MANAGER_STAFF","EDIT_MANAGER_STAFF","DELETE_MANAGER_STAFF"]};function ke(n,t){1&n&&(v.Vb(0),v.Vc(1,Ie,4,4,"nz-tab",4),v.Vc(2,We,4,4,"nz-tab",4),v.Vc(3,_e,4,4,"nz-tab",4),v.Vc(4,Re,4,4,"nz-tab",4),v.Ub()),2&n&&(v.Db(1),v.rc("anyFeaturePermitted",v.xc(4,Ee)),v.Db(1),v.rc("anyFeaturePermitted",v.xc(5,we)),v.Db(1),v.rc("anyFeaturePermitted",v.xc(6,xe)),v.Db(1),v.rc("anyFeaturePermitted",v.xc(7,Ve)))}function Le(n,t){if(1&n){const n=v.Yb();v.Xb(0,"nz-tabset",2),v.ec("nzSelectedIndexChange",function(){return v.Lc(n),v.ic().onTabChange()}),v.Vc(1,ve,2,2,"ng-container",3),v.jc(2,"roleTypeEnabled"),v.Vc(3,ke,5,8,"ng-container",3),v.jc(4,"roleTypeEnabled"),v.Wb()}if(2&n){const n=v.ic(),t=v.Ic(2);v.rc("nzTabBarExtraContent",t),v.Db(1),v.rc("ngIf",v.lc(2,3,"TENANT_ADMIN",n.tenantConfig)),v.Db(2),v.rc("ngIf",v.lc(4,6,"PHYSICIAN",n.tenantConfig))}}function Fe(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",12),v.Xb(1,"div",13),v.Xb(2,"label",14),v.Xc(3,"Patient Status"),v.Wb(),v.Wb(),v.Xb(4,"div",13),v.Xb(5,"nz-select",15),v.ec("ngModelChange",function(t){return v.Lc(n),v.ic().patientStatus=t})("ngModelChange",function(){return v.Lc(n),v.ic().onPatientStatusChange()}),v.Sb(6,"nz-option",16),v.Sb(7,"nz-option",17),v.Wb(),v.Wb(),v.Wb()}if(2&n){const n=v.ic();v.Db(5),v.rc("ngModel",n.patientStatus)}}let Ue=(()=>{class n extends h.a{constructor(n,t,e,i,s,a){var o;super(),this._staffService=n,this._router=t,this._notificationsService=e,this._staffDrawerService=i,this._dataSharingService=s,this._activatedRoute=a,this.pageIndex=1,this.status="ACTIVE",this.patientStatus="ACTIVE",this.staff$=new bt.Subject,this.isLoading=!0,this.initTableWidth(),this._activatedRoute.queryParams.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{this.role=n.role,this.getStaff()}),null===(o=this._dataSharingService.tenantSettings)||void 0===o||o.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{var t;n&&(this.tenantConfig=n,this.initialiseStaff$(),null===(t=this.staff$)||void 0===t||t.next())}),this._routeHelperService.getMultiActionTriggered().pipe(Object(Jn.a)(n=>!!n),Object(Kn.a)(this.unsubscribed)).subscribe(n=>this.addStaff(n)),this._routeHelperService.getSearch().pipe(Object(Jn.a)(n=>null!==n),Object(Kn.a)(this.unsubscribed)).subscribe(n=>this.getStaff(1,n))}initialiseStaff$(){this.staff$.pipe(Object(Qn.switchMap)(()=>this._staffService.fetchStaffMembers(this.role,this.getOffset(this.pageIndex),10,this.searchKey,this.status,this.patientStatus,this.role==Dn.a.MONITORING_STAFF))).pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{this.staffResponse=n,this.isLoading=!1})}onPatientStatusChange(){this.refreshList()}addStaff(n){"BULK_PHYSICIAN"===n?this._router.navigate(["staff/physician/bulk-upload"]):this._router.navigate(["staff/add"],{queryParams:{role:n}})}getOffset(n){return 1!==n?10*(n-1):0}getStaff(n=1,t,e="ACTIVE"){var i;this.staffResponse=void 0,this.isLoading=!0,"MONITORING_STAFF"==this.role&&(e="ALL"),this.pageIndex=n,this.searchKey=t,this.status=e,null===(i=this.staff$)||void 0===i||i.next()}deleteStaff(n){this._staffService.delete(n).subscribe(()=>{this.getStaff(),this._notificationsService.success("Staff","Staff member removed successfully")})}showDetails(n){this._staffDrawerService.staffDetails(n)}enableStaff(n){this._staffService.enabledStaff(n).subscribe(()=>{this.getStaff(),this._notificationsService.success("Staff","Staff member enabled successfully")})}onTabChange(){this.staffResponse=new dt}refreshList(){this.getStaff()}initTableWidth(){this.widthConfig={physicianWithoutSubTenant:["15%","3%","10%","13%","20%","10%"],physicianWithSubTenant:["15%","7%","10%","20%","20%","20%","10%"],enrollmentStaffWithoutSubTenant:["23%","10%","27%","40%"],enrollmentStaffWithSubTenant:["23 %","10%","30%","30%","15%"],managerWithoutSubTenant:["23%","10%","27%","40%"],managerWithSubTenant:["23%","10%","30%","30%","15%"],monitoringStaffWithoutSubTenant:["20%","14%","8%","18%","30%","10%"],monitoringStaffWithSubTenant:["15%","10%","10%","17%","20%","20%","10%"]}}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(on.a),v.Rb(S.g),v.Rb(Pn.b),v.Rb(ut),v.Rb(b.a),v.Rb(S.a))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-list"]],features:[v.Ab],decls:3,vars:1,consts:[["nzLinkRouter","",3,"nzTabBarExtraContent","nzSelectedIndexChange",4,"ngIf"],["patientStatusTemplate",""],["nzLinkRouter","",3,"nzTabBarExtraContent","nzSelectedIndexChange"],[4,"ngIf"],[4,"anyFeaturePermitted"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams",4,"nzTabLink"],[3,"role","staff","loading","showSubTenant","data","details","delete"],["nz-tab-link","","queryParamsHandling","merge",3,"routerLink","queryParams"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete",4,"ngIf"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete","enable","refresh",4,"ngIf"],[3,"role","staff","patientStatus","loading","showSubTenant","widthConfig","data","details","delete","enable","refresh"],["nz-row","","nzAlign","middle","nzGutter","12"],["nz-col",""],["nz-typography","","nzType","secondary"],["nzPlaceHolder","Select patient type",2,"min-width","100px",3,"ngModel","ngModelChange"],["nzValue","ALL","nzLabel","All"],["nzValue","ACTIVE","nzLabel","Active"]],template:function(n,t){1&n&&(v.Vc(0,Le,5,9,"nz-tabset",0),v.Vc(1,Fe,8,1,"ng-template",null,1,v.Wc)),2&n&&v.rc("ngIf",t.tenantConfig)},directives:[a.q,ft.d,pt.a,ft.a,ft.c,ue,ft.b,S.j,P.c,P.a,T.a,de.d,c.u,c.x,de.a],pipes:[be],styles:["nz-tabset[_ngcontent-%COMP%]{margin-top:10px}a[_ngcontent-%COMP%]{color:var(--light-black)}"]}),n})();var je=e("BoNt"),Ge=e("Zy1z"),Ye=e("Kj3r"),He=e("/uUt"),Be=e("eIep"),$e=e("rzIX"),qe=e("aOTX"),Ze=e("mfqL"),Qe=e("1jOk"),Ke=e("4+6U"),Je=e("RKSz");class ni{constructor(){this.firstName=new c.i(null,c.D.required),this.lastName=new c.i(null,c.D.required),this.username=new c.i,this.email=new c.i(null,[c.D.required,c.D.email]),this.password=new c.i(null,c.D.minLength(8)),this.dateOfBirth=new c.i(null),this.timeZone=new c.i(null,c.D.required),this.gender=new c.i(null,c.D.required),this.language=new c.i(null,c.D.required),this.streetAddress=new c.i,this.streetAddress2=new c.i,this.city=new c.i,this.state=new c.i,this.country=new c.i,this.zipCode=new c.i,this.poBox=new c.i,this.lat=new c.i,this.lng=new c.i,this.mobile=new c.i(null,[c.D.minLength(6),c.D.maxLength(15),c.D.pattern(/^[0-9 -]\d*$/)]),this.site=new c.i(null,c.D.required),this.otherSites=new c.i,this.profileTags=new c.i,this.programs=new c.i,this.staffId=new c.i,this.npiId=new c.i,this.credentials=new c.i}}var ti=e("sWYD"),ei=e("NFKh"),ii=e("BcC3");const si=n=>{if(n)return Object(ti.a)(n,"yyyy-MM-dd")},ai=n=>{var t,e,i,s,a,o,l,r,c,u,d,b,f,p,g,h,m,v,S,z,X,I;return{line1:null===(e=null===(t=null==n?void 0:n.controls)||void 0===t?void 0:t.streetAddress)||void 0===e?void 0:e.value,line2:null===(s=null===(i=null==n?void 0:n.controls)||void 0===i?void 0:i.streetAddress2)||void 0===s?void 0:s.value,city:null===(o=null===(a=null==n?void 0:n.controls)||void 0===a?void 0:a.city)||void 0===o?void 0:o.value,state:null===(r=null===(l=null==n?void 0:n.controls)||void 0===l?void 0:l.state)||void 0===r?void 0:r.value,country:null===(u=null===(c=null==n?void 0:n.controls)||void 0===c?void 0:c.country)||void 0===u?void 0:u.value,location:null===(b=null===(d=null==n?void 0:n.controls)||void 0===d?void 0:d.location)||void 0===b?void 0:b.value,pin:null===(p=null===(f=null==n?void 0:n.controls)||void 0===f?void 0:f.zipCode)||void 0===p?void 0:p.value,zipCode:null===(h=null===(g=null==n?void 0:n.controls)||void 0===g?void 0:g.zipCode)||void 0===h?void 0:h.value,poBox:null===(v=null===(m=null==n?void 0:n.controls)||void 0===m?void 0:m.poBox)||void 0===v?void 0:v.value,lat:null===(z=null===(S=null==n?void 0:n.controls)||void 0===S?void 0:S.lat)||void 0===z?void 0:z.value,lng:null===(I=null===(X=null==n?void 0:n.controls)||void 0===X?void 0:X.lng)||void 0===I?void 0:I.value}},oi=n=>{var t,e,i,s,a,o,l;if(!(null===(e=null===(t=null==n?void 0:n.controls)||void 0===t?void 0:t.credentials)||void 0===e?void 0:e.value)||!(null===(a=null===(s=null===(i=null==n?void 0:n.controls)||void 0===i?void 0:i.credentials)||void 0===s?void 0:s.value)||void 0===a?void 0:a.length))return null;const r=new Array;return r.push(null===(l=null===(o=null==n?void 0:n.controls)||void 0===o?void 0:o.credentials)||void 0===l?void 0:l.value),r},li=(n,t)=>{var e;16<=(null==n?void 0:n.length)?n=null==n?void 0:n.substring(0,16):15>(null==n?void 0:n.length)?n+="1234567891234567".substring(0,16-(null==n?void 0:n.length)):n||(n="1234567891234567");const i=ei.enc.Latin1.parse(n),s=ei.enc.Latin1.parse(n);return null===(e=ei.AES.encrypt(t,i,{iv:s,mode:ei.mode.CBC,padding:ei.pad.ZeroPadding}))||void 0===e?void 0:e.toString()},ri=n=>{if(null==n?void 0:n.length)return null==n?void 0:n.map(n=>n.split("_")[0])};var ci=e("5Qfn"),ui=e("2sp+"),di=e("h8ax"),bi=e.n(di),fi=e("faT0"),pi=e.n(fi),gi=e("bnsq");let hi=(()=>{class n{transform(n,t){let e="permissions";"GROUP"==t&&(e="permissionGroups");let i=localStorage.getItem(e);return this.permissions=new Map(JSON.parse(i)),this.permissions.get(n)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=v.Qb({name:"permissionName",type:n,pure:!0}),n})(),mi=(()=>{class n{transform(n,t,e){return!e&&null!=t&&0!=t.length&&null!=t.find(t=>t===n)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=v.Qb({name:"isDefaultPermission",type:n,pure:!0}),n})();function vi(n,t){1&n&&(v.Xb(0,"div",6),v.Xb(1,"span",7),v.Xc(2," You have removed some default permissions which are not recommended. "),v.Wb(),v.Wb())}function Si(n,t){1&n&&(v.Xb(0,"nz-tag",15),v.Xc(1,"DF"),v.Wb()),2&n&&v.rc("nzColor","green")}function zi(n,t){if(1&n&&(v.Xb(0,"div",12),v.Xb(1,"span",13),v.jc(2,"permissionName"),v.Xb(3,"strong"),v.Xc(4),v.jc(5,"permissionName"),v.Wb(),v.Vc(6,Si,2,1,"nz-tag",14),v.jc(7,"isDefaultPermission"),v.Wb(),v.Wb()),2&n){const n=t.$implicit,e=v.ic(3);v.Db(1),v.sc("nzTooltipTitle",v.kc(2,3,n)),v.Db(3),v.Yc(v.kc(5,5,n)),v.Db(2),v.rc("ngIf",v.lc(7,7,n,e.defaultPrivileges))}}function Xi(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"span",17),v.ec("click",function(){return v.Lc(n),v.ic(4).onClick("MORE","ADDED")}),v.Xb(2,"strong"),v.Xc(3),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=v.ic(4);v.Db(3),v.Zc(" Show More + (",n.addedPermissions.length-n.addedPermissionsList.length,") ")}}function Ii(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"span",17),v.ec("click",function(){return v.Lc(n),v.ic(4).onClick("LESS","ADDED")}),v.Xb(2,"strong"),v.Xc(3," Show Less - "),v.Wb(),v.Wb(),v.Ub()}}function yi(n,t){if(1&n&&(v.Xb(0,"div",16),v.Vc(1,Xi,4,1,"ng-container",9),v.Vc(2,Ii,4,0,"ng-container",9),v.Wb()),2&n){const n=v.ic(3);v.Db(1),v.rc("ngIf",!n.addedPermissionsShowMore),v.Db(1),v.rc("ngIf",n.addedPermissionsShowMore)}}function Di(n,t){if(1&n&&(v.Vb(0),v.Vc(1,zi,8,10,"div",10),v.Vc(2,yi,3,2,"div",11),v.Ub()),2&n){const n=v.ic(2);v.Db(1),v.rc("ngForOf",n.addedPermissionsList),v.Db(1),v.rc("ngIf",n.addedPermissions.length>9)}}function Ti(n,t){1&n&&(v.Vb(0),v.Xb(1,"div",16),v.Sb(2,"nz-empty",18),v.Wb(),v.Ub())}function Wi(n,t){if(1&n&&(v.Xb(0,"div",6),v.Xb(1,"nz-card",8),v.Xb(2,"div",3),v.Xb(3,"strong"),v.Xc(4,"Added Permissions"),v.Wb(),v.Sb(5,"nz-divider"),v.Wb(),v.Xb(6,"div",3),v.Vc(7,Di,3,2,"ng-container",9),v.Vc(8,Ti,3,0,"ng-container",9),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.ic();v.Db(7),v.rc("ngIf",n.addedPermissions.length>0),v.Db(1),v.rc("ngIf",0==n.addedPermissions.length)}}function Pi(n,t){1&n&&(v.Xb(0,"nz-tag",15),v.Xc(1,"DF"),v.Wb()),2&n&&v.rc("nzColor","green")}function Ci(n,t){if(1&n&&(v.Xb(0,"div",12),v.Xb(1,"span",19),v.jc(2,"permissionName"),v.Xb(3,"strong"),v.Xc(4),v.jc(5,"permissionName"),v.Wb(),v.Wb(),v.Xb(6,"span",20),v.Vc(7,Pi,2,1,"nz-tag",14),v.jc(8,"isDefaultPermission"),v.Wb(),v.Wb()),2&n){const n=t.$implicit,e=v.ic(3);v.Db(1),v.sc("nzTooltipTitle",v.kc(2,3,n)),v.Db(3),v.Yc(v.kc(5,5,n)),v.Db(3),v.rc("ngIf",v.lc(8,7,n,e.defaultPrivileges))}}function Ai(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"span",17),v.ec("click",function(){return v.Lc(n),v.ic(4).onClick("MORE","REMOVED")}),v.Xb(2,"strong"),v.Xc(3),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=v.ic(4);v.Db(3),v.Zc(" Show More + (",n.removedPermissions.length-n.removedPermissionsList.length,") ")}}function _i(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"span",17),v.ec("click",function(){return v.Lc(n),v.ic(4).onClick("LESS","REMOVED")}),v.Xb(2,"strong"),v.Xc(3," Show Less - "),v.Wb(),v.Wb(),v.Ub()}}function Mi(n,t){if(1&n&&(v.Xb(0,"div",16),v.Vc(1,Ai,4,1,"ng-container",9),v.Vc(2,_i,4,0,"ng-container",9),v.Wb()),2&n){const n=v.ic(3);v.Db(1),v.rc("ngIf",!n.removedPermissionsShowMore),v.Db(1),v.rc("ngIf",n.removedPermissionsShowMore)}}function Oi(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Ci,9,10,"div",10),v.Vc(2,Mi,3,2,"div",11),v.Ub()),2&n){const n=v.ic(2);v.Db(1),v.rc("ngForOf",n.removedPermissionsList),v.Db(1),v.rc("ngIf",n.removedPermissions.length>9)}}function Ni(n,t){1&n&&(v.Vb(0),v.Xb(1,"div",16),v.Sb(2,"nz-empty",18),v.Wb(),v.Ub())}function Ri(n,t){if(1&n&&(v.Xb(0,"div",6),v.Xb(1,"nz-card",8),v.Xb(2,"div",3),v.Xb(3,"strong"),v.Xc(4,"Removed Permissions"),v.Wb(),v.Sb(5,"nz-divider"),v.Wb(),v.Xb(6,"div",3),v.Vc(7,Oi,3,2,"ng-container",9),v.Vc(8,Ni,3,0,"ng-container",9),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.ic();v.Db(7),v.rc("ngIf",n.removedPermissions.length>0),v.Db(1),v.rc("ngIf",0==n.removedPermissions.length)}}let Ei=(()=>{class n{constructor(n){this.modalRef=n,this.isDefaultPrivilegesUpdated=!1,this.addedPermissionsShowMore=!1,this.removedPermissionsShowMore=!1}ngOnInit(){this.isDefaultPrivilegesUpdated=this.defaultPrivileges.filter(n=>this.removedPermissions.indexOf(n)>-1).length>0,this.addedPermissionsList=this.addedPermissions.length>9?this.addedPermissions.slice(0,8):this.addedPermissions,this.removedPermissionsList=this.removedPermissions.length>9?this.removedPermissions.slice(0,8):this.removedPermissions}showMore(n){switch(n){case"ADDED":this.addedPermissionsShowMore=!0,this.addedPermissionsList=[...this.addedPermissions];break;case"REMOVED":this.removedPermissionsShowMore=!0,this.removedPermissionsList=[...this.removedPermissions]}}showLess(n){switch(n){case"ADDED":this.addedPermissionsShowMore=!1,this.addedPermissionsList=[...this.addedPermissions.slice(0,8)];break;case"REMOVED":this.removedPermissionsShowMore=!1,this.removedPermissionsList=[...this.removedPermissions.slice(0,8)]}}onClick(n,t){switch(n){case"MORE":this.showMore(t);break;case"LESS":this.showLess(t)}}confirm(){this.modalRef.close(!0)}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(vt.e))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-updated-permissions-modal"]],inputs:{addedPermissions:"addedPermissions",removedPermissions:"removedPermissions",defaultPrivileges:"defaultPrivileges"},decls:10,vars:4,consts:[["cdkDrag","","cdkDragRootElement",".ant-modal-content","cdkDragHandle",""],["nz-row","","nzGutter","24","cdkDrag","","cdkDragRootElement",".ant-modal-content","cdkDragHandle",""],["nz-col","","nzSpan","24",4,"ngIf"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","24",1,"confirm-btn-container"],["nz-button","","nzType","primary",3,"nzSize","click"],["nz-col","","nzSpan","24"],[1,"default-privileges-updated-error"],[1,"permissions-card"],[4,"ngIf"],["nz-col","","nzSpan","8","class","each-permissions",4,"ngFor","ngForOf"],["nz-col","","nzSpan","8",4,"ngIf"],["nz-col","","nzSpan","8",1,"each-permissions"],["nz-tooltip","",1,"wrap",3,"nzTooltipTitle"],["class","df-tag",3,"nzColor",4,"ngIf"],[1,"df-tag",3,"nzColor"],["nz-col","","nzSpan","8"],[1,"more-less-span",3,"click"],["nzNotFoundContent","No Changes"],["nz-tooltip","",1,"wrap",2,"width","85%",3,"nzTooltipTitle"],[2,"width","15%"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"div",1),v.Vc(2,vi,3,0,"div",2),v.Vc(3,Wi,9,2,"div",2),v.Vc(4,Ri,9,2,"div",2),v.Wb(),v.Xb(5,"div",3),v.Sb(6,"nz-divider"),v.Xb(7,"div",4),v.Xb(8,"button",5),v.ec("click",function(){return t.confirm()}),v.Xc(9," Confirm "),v.Wb(),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(2),v.rc("ngIf",t.isDefaultPrivilegesUpdated),v.Db(1),v.rc("ngIf",t.addedPermissions.length>0),v.Db(1),v.rc("ngIf",t.removedPermissions.length>0),v.Db(4),v.rc("nzSize","medium"))},directives:[P.c,a.q,A.a,P.a,_n.a,Mn.a,Cn.a,cn.a,a.p,un.d,et.a,On.b],pipes:[hi,mi],styles:[".permissions-card[_ngcontent-%COMP%]{margin:10px 0}[_nghost-%COMP%]     .ant-card-bordered{border:1px solid grey}[_nghost-%COMP%]     .ant-card-body{padding-top:10px}.default-privileges-updated-error[_ngcontent-%COMP%]{color:red}.each-permissions[_ngcontent-%COMP%]{padding-bottom:5px;padding-left:0}.wrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.more-less-span[_ngcontent-%COMP%]{color:var(--primary-color);cursor:pointer}[_nghost-%COMP%]     .ant-modal-body{padding-top:0!important}[_nghost-%COMP%]     .ant-divider-horizontal{margin:5px 0}[_nghost-%COMP%]     .ant-tag{font-size:9px;height:20px;width:23px;padding-left:5px}.df-tag[_ngcontent-%COMP%]{margin-left:8px}.confirm-btn-container[_ngcontent-%COMP%]{text-align:end;margin-top:12px}"]}),n})(),wi=(()=>{class n{transform(n){if(null==Dn.a[n])return n;const t=new Map;return t.set(Dn.a.PHYSICIAN,"Physician"),t.set(Dn.a.MONITORING_STAFF,"Monitoring Staff"),t.set(Dn.a.ENROLMENT_STAFF,"Enrollment Staff"),t.set(Dn.a.MANAGER_STAFF,"Manager"),t.set(Dn.a.PATIENT,"Patient"),t.set(Dn.a.TENANT_ADMIN,"Tenant Admin"),t.set(Dn.a.LOCATION_ADMIN,"Location Admin"),t.set(Dn.a.CUSTOM,null==n?void 0:n.toString()),t.get(Dn.a[n])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=v.Qb({name:"roleName",type:n,pure:!0}),n})(),xi=(()=>{class n{transform(n,t){return null!=t.find(t=>t==n)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=v.Qb({name:"isChecked",type:n,pure:!0}),n})();function Vi(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Sb(1,"div",12),v.Xb(2,"div",10),v.Xb(3,"button",13),v.ec("click",function(){return v.Lc(n),v.ic(2).onEdit()}),v.Sb(4,"app-icons",14),v.Xc(5," Edit Permissions "),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=v.ic(2);v.Db(3),v.rc("nzSize","medium")("nzLoading",n.saveBtnLoading)}}function ki(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"span",22),v.Xb(2,"span",23),v.Xc(3),v.jc(4,"tenantName"),v.Wb(),v.Wb(),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(3),v.Zc(" ",v.kc(4,1,null==n.value?null:n.value.tenantId)," ")}}function Li(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-option",18),v.Xb(2,"span",19),v.Xb(3,"span",20),v.Xc(4),v.Wb(),v.Vc(5,ki,5,3,"ng-container",21),v.Wb(),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.sc("nzLabel",n.value.name),v.rc("nzValue",null==n?null:n.key),v.Db(3),v.Zc(" ",n.value.name," ")}}function Fi(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"nz-select",16),v.ec("ngModelChange",function(t){return v.Lc(n),v.ic(3).roleId=t})("ngModelChange",function(t){return v.Lc(n),v.ic(3).onRoleChange(t)}),v.Vc(2,Li,6,3,"ng-container",17),v.jc(3,"keyvalue"),v.Wb(),v.Ub()}if(2&n){const n=v.ic(3);v.Db(1),v.rc("ngModel",n.roleId),v.Db(1),v.rc("ngForOf",v.kc(3,2,n.roleIdMap))}}function Ui(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",10),v.Xb(1,"button",13),v.ec("click",function(t){return v.Lc(n),v.ic(3).updatePermissions(t)}),v.Sb(2,"app-icons",24),v.Xc(3," Save Permissions "),v.Wb(),v.Wb()}if(2&n){const n=v.ic(3);v.Db(1),v.rc("nzSize","medium")("nzLoading",n.saveBtnLoading)}}function ji(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"div",10),v.Vc(2,Fi,4,4,"ng-container",3),v.Wb(),v.Vc(3,Ui,4,2,"div",15),v.Ub()),2&n){const n=v.ic(2);v.Db(2),v.rc("ngIf",n.showRolesDropDown),v.Db(1),v.rc("ngIf","NEW"!=n.userMode&&!n.preview)}}function Gi(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Vi,6,2,"ng-container",3),v.Vc(2,ji,4,2,"ng-container",3),v.Xb(3,"div",10),v.Xb(4,"button",11),v.Xc(5," Available Dashboard Widgets "),v.Wb(),v.Wb(),v.Ub()),2&n){const n=v.ic();v.Db(1),v.rc("ngIf",n.preview),v.Db(1),v.rc("ngIf",!n.preview),v.Db(2),v.tc("routerLink","/staff/view/",n.userId,"/dashboard-widgets"),v.rc("nzSize","medium")("nzLoading",n.saveBtnLoading)}}function Yi(n,t){1&n&&(v.Vb(0),v.Xc(1," and accross all the selected sub tenants"),v.Ub())}function Hi(n,t){1&n&&(v.Xb(0,"nz-tag",33),v.Xc(1,"DF"),v.Wb()),2&n&&v.rc("nzColor","green")}function Bi(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"div",30),v.Xb(2,"label",31),v.ec("ngModelChange",function(e){v.Lc(n);const i=t.$implicit;return v.ic(5).onChange(e,i)}),v.jc(3,"isChecked"),v.Xc(4),v.jc(5,"permissionName"),v.Wb(),v.Vc(6,Hi,2,1,"nz-tag",32),v.jc(7,"isDefaultPermission"),v.Wb(),v.Ub()}if(2&n){const n=t.$implicit,e=v.ic(5);v.Db(2),v.rc("ngModel",v.lc(3,4,n,e.allStaffPermissions))("ngClass",e.preview?"preview disabled":"edit"),v.Db(2),v.Zc(" ",v.kc(5,7,n)," "),v.Db(2),v.rc("ngIf",v.lc(7,9,n,e.defaultPrivileges))}}function $i(n,t){if(1&n&&(v.Xb(0,"div",29),v.Vc(1,Bi,8,12,"ng-container",17),v.Wb()),2&n){const n=v.ic(2).$implicit;v.Db(1),v.rc("ngForOf",null==n?null:n.value)}}function qi(n,t){if(1&n&&(v.Xb(0,"div",26),v.Xb(1,"strong",27),v.Xc(2),v.jc(3,"permissionName"),v.Wb(),v.Vb(4),v.Vc(5,$i,2,1,"div",28),v.Ub(),v.Wb()),2&n){const n=v.ic(),t=n.index,e=n.$implicit;v.rc("nzSm",t%2==0?11:13)("nzMd",(t+1)%4==0?7:(t+1)%3==0?5:6),v.Db(2),v.Yc(v.lc(3,4,null==e?null:e.key,"GROUP")),v.Db(3),v.rc("ngIf",!(null==e||null==e.value||!e.value.length))}}function Zi(n,t){if(1&n&&(v.Vb(0),v.Vc(1,qi,6,7,"div",25),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("ngIf",!(null==n||null==n.value||!n.value.length))}}function Qi(n,t){if(1&n&&(v.Xb(0,"div",4),v.Vc(1,Zi,2,1,"ng-container",17),v.jc(2,"keyvalue"),v.Wb()),2&n){const n=v.ic();v.Db(1),v.rc("ngForOf",v.kc(2,1,n.permissionGroups))}}let Ki=(()=>{class n{constructor(n,t,e){this._permissionsService=n,this._modalService=t,this._notificationService=e,this.userMode="NEW",this.permissions=new Map,this.allStaffPermissions=new Array,this.saveBtnLoading=!1,this.addedPermissions=new Array,this.removedPermissions=new Array,this.oldPermissions=new Array,this.defaultRoles=new Array,this.tenantDefaultRoles=new Array,this.preview=!0,this.tenantDefaultRoleNameMap=new Map,this.tenantDefaultRoleMap=new Map,this.permissionsLoading=!1,this.roleIdMap=new Map,this.permissionChangeOverRide=!1,this.boundary=ii.a.TENANT,this.onBoundaryChange=new v.n,this.submitPermissionUpdateRequest=()=>{let n=new Set(this.allStaffPermissions);return this.allStaffPermissions=[...Array.from(n)],this.roleChanged?this._permissionsService.updateUserPermissions(this.userId,this.allStaffPermissions,this.roleId):this._permissionsService.updateUserPermissions(this.userId,this.allStaffPermissions)},this.onChange=(n,t)=>n?this.onPermissionAddition(t):this.onPermissionRemoval(t),this.onPermissionAddition=n=>{this.allStaffPermissions.push(n),this.allStaffPermissions=[...this.allStaffPermissions],-1==this.oldPermissions.indexOf(n)&&this.addedPermissions.push(n),this.removedPermissions.indexOf(n)>-1&&(this.removedPermissions=this.removedPermissions.filter(t=>t!=n))},this.onPermissionRemoval=n=>{this.allStaffPermissions=[...this.allStaffPermissions.filter(t=>t!=n)],this.oldPermissions.indexOf(n)>-1&&this.removedPermissions.push(n),this.addedPermissions=this.addedPermissions.filter(t=>t!=n)},this.isChangeInPermissions=()=>this.removedPermissions.length>0||this.addedPermissions.length>0||this.permissionChangeOverRide}ngOnInit(){this.loggedInUserAccountType=localStorage.getItem("loggedInUserRole"),this.initialRole=this.roleName,this.init()}init(){this.getAllDefaultRoles(),this.getTenantDefaultRoles(),null!=this.userId?this.getGroupedUserPermissions():this.getAllGroupedRolePermissions(),this.getAllGroupedPermissions()}getTenantDefaultRoles(n){this.roleIdMap.clear(),this.loadingRoles=!0,this._permissionsService.getTenantDefaultRoles(n).subscribe(n=>{var t;this.tenantDefaultRoles=n,null===(t=this.tenantDefaultRoles)||void 0===t||t.forEach(n=>{n.type==this.role&&(this.tenantDefaultRoleNameMap.set(n.name,n.id),this.tenantDefaultRoleMap.set(n.name,n),this.roleIdMap.set(n.id,n))}),this.loadingRoles=!1,this.preview||(this.showRolesDropDown=!0)})}getAllDefaultRoles(){this._permissionsService.getAllDefaultRoles().subscribe(n=>{this.defaultRoles=n;var t=this.defaultRoles.find(n=>n.type==this.role);if(this.defaultPrivileges=t.defaultPrivileges,null==this.userId||null==this.userId){let n=new Set(t.privileges);this.allStaffPermissions=[...Array.from(n)],this.oldPermissions=[...this.allStaffPermissions]}})}onRoleChange(n){this.roleChanged=!0,this.permissionChangeOverRide=!0,this.permissionsLoading=!0;var t=this.roleIdMap.get(n);this.role=t.type,this.roleName=t.name,this.roleId=t.id,this.boundary=t.accessBoundary,this._permissionsService.fetchGroupedPermissions(null,t.id).subscribe(n=>{this.permissionGroups=n,this.permissionsLoading=!1,this.allStaffPermissions=[...t.privileges]}),this.showPermissions=!0,this.onEdit(),this.onBoundaryChange.emit(this.boundary)}onPreview(){this.preview=!0,this.showRolesDropDown=!1,this.ngOnInit()}getGroupedUserPermissions(){this._permissionsService.fetchGroupedUserPermissions(this.userId).subscribe(n=>{this.allStaffPermissionGroups=n,Object.keys(n).forEach(t=>{n[t].length>0&&(this.allStaffPermissions=[...this.allStaffPermissions,...n[t]])}),this.permissionGroups=n,this.oldPermissions=[...this.allStaffPermissions]})}getAllGroupedRolePermissions(){this._permissionsService.fetchGroupedPermissions(this.role).subscribe(n=>{this.permissionGroups=n})}getAllGroupedPermissions(){this._permissionsService.fetchGroupedPermissions(null).subscribe(n=>{this.allPortalPermissionGroups=n})}onEdit(){this.preview=!1,this.showRolesDropDown=!0,this.permissionGroups=this.allPortalPermissionGroups}getAllPermissionStrings(){let n=localStorage.getItem("permissions");this.permissions=new Map(JSON.parse(n))}updatePermissions(){this.isChangeInPermissions()?this.initialRole==this.roleName?this._modalService.create({nzContent:Ei,nzTitle:"Updated Permissions Confirmation",nzFooter:null,nzCancelText:null,nzOkText:null,nzClosable:!0,nzMaskClosable:!0,nzOnOk:()=>this.submitPermissions(),nzOkLoading:this.saveBtnLoading,nzWidth:"900px",nzComponentParams:{addedPermissions:this.addedPermissions,removedPermissions:this.removedPermissions,defaultPrivileges:this.defaultPrivileges}}).afterClose.subscribe(n=>{n&&this.submitPermissions()}):this.submitPermissions():this._notificationService.info("Permissions","No permission changes to update.")}submitPermissions(){this.saveBtnLoading=!0,this.submitPermissionUpdateRequest().subscribe(()=>this.afterPermissionUpdated())}afterPermissionUpdated(){this.saveBtnLoading=!1,this.addedPermissions=[],this.removedPermissions=[],this.initialRole!=this.roleName&&"NEW"!=this.userMode?this._notificationService.info("User Role",`Role changed from ${this.initialRole} to ${this.roleName}.`):"NEW"!=this.userMode&&this._notificationService.info("Permissions","Permissions updated."),this.onPreview()}addPermission(){this.oldPermissions.filter(n=>-1===this.allStaffPermissions.indexOf(n)),this.allStaffPermissions.filter(n=>-1===this.oldPermissions.indexOf(n))}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(gi.a),v.Rb(vt.f),v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-permissions"]],inputs:{role:"role",roleName:"roleName",userId:"userId",staffActive:"staffActive",userMode:"userMode",roleId:"roleId"},outputs:{onBoundaryChange:"onBoundaryChange"},decls:23,vars:7,consts:[["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography",""],[4,"ngIf"],["nz-row","","nzGutter","8"],["nz-col","","nzSpan","24"],[3,"nzColor"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","24",1,"container"],["nz-row","","nzGutter","8",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",1,"permission-actions",3,"nzSize","nzLoading","routerLink"],["nz-col","","nzSpan","2"],["nz-button","","nzType","primary",1,"permission-actions",3,"nzSize","nzLoading","click"],["size","13px","color","#fff","name","edit"],["nz-col","","nzSpan","4",4,"ngIf"],["nzShowSearch","","nzPlaceHolder","Select a role",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"],[2,"display","flex"],[2,"width","70%"],[4,"isAccessAcrossTenantEnabled"],[2,"width","30%"],["nz-typography","","nzType","secondary",2,"color","var(--primary-color)"],["size","13px","color","#fff","name","save"],["nz-col","","nzXs","24",3,"nzSm","nzMd",4,"ngIf"],["nz-col","","nzXs","24",3,"nzSm","nzMd"],[1,"heading"],["nz-row","",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","24",1,"each-permission-row"],["nz-checkbox","",3,"ngModel","ngClass","ngModelChange"],["class","df-tag",3,"nzColor",4,"ngIf"],[1,"df-tag",3,"nzColor"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"div",1),v.Xb(2,"h3",2),v.Xc(3,"Roles & Permissions"),v.Wb(),v.Wb(),v.Vc(4,Gi,6,5,"ng-container",3),v.Wb(),v.Xb(5,"div",4),v.Xb(6,"div",5),v.Xb(7,"p"),v.Xc(8," As a "),v.Xb(9,"strong"),v.Xc(10),v.jc(11,"roleName"),v.Wb(),v.Xc(12,", this staff member will have these permissions in all of the assigned sites "),v.Vc(13,Yi,2,0,"ng-container",3),v.Xc(14,". "),v.Wb(),v.Wb(),v.Xb(15,"div",5),v.Xb(16,"p"),v.Xc(17," There are some default permissions set which we think are necessary to have. The fields which are Default will have the tag like this "),v.Xb(18,"nz-tag",6),v.Xc(19,"DF"),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(20,"div",7),v.Xb(21,"div",8),v.Vc(22,Qi,3,3,"div",9),v.Wb(),v.Wb()),2&n&&(v.Db(4),v.rc("ngIf","TENANT_ADMIN"===t.loggedInUserAccountType&&t.staffActive),v.Db(6),v.Yc(v.kc(11,5,t.roleName)),v.Db(3),v.rc("ngIf","ACROSS_SUB_TENANTS"==t.boundary),v.Db(5),v.rc("nzColor","green"),v.Db(4),v.rc("ngIf",!t.permissionsLoading))},directives:[P.c,P.a,T.a,a.q,et.a,_n.a,Mn.a,Cn.a,S.h,dn.a,de.d,c.u,c.x,a.p,de.a,St.a,Nn.a,a.o],pipes:[wi,a.j,Dt.a,hi,xi,mi],styles:[".container[_ngcontent-%COMP%]{background:#e5e5e5 0 0 no-repeat padding-box;border-radius:10px;padding:10px 25px 30px!important;min-height:200px;opacity:.8}.heading[_ngcontent-%COMP%]{display:block;margin:15px 10px}label[_ngcontent-%COMP%]{flex-direction:row!important}[_nghost-%COMP%]     .preview>.ant-checkbox-checked>.ant-checkbox-inner{background:#e5e5e5!important}[_nghost-%COMP%]     .ant-checkbox-inner{margin-right:2px}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-col-6{margin-top:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none}.each-permission-row[_ngcontent-%COMP%]{margin:5px;display:flex}[_nghost-%COMP%]     .ant-tag{font-size:9px;height:20px;width:23px;padding-left:5px}button[_ngcontent-%COMP%]{display:flex}.df-tag[_ngcontent-%COMP%]{margin-left:6px}.permission-actions[_ngcontent-%COMP%]{margin:auto}"]}),n})();var Ji=e("pxUr"),ns=e("ocnv"),ts=e("5iDH"),es=e("bE2y");const is=["staffFormEl"],ss=["searchAddress"],as=["permissionsHost"];function os(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-icons",48),v.ec("click",function(){v.Lc(n);const t=v.ic(2);return t.passwordVisible=!t.passwordVisible}),v.Wb()}if(2&n){const n=v.ic(2);v.rc("color",n.passwordVisible?"#a7c853":"#8A8A8A")}}function ls(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"COMMON.REQUIRED")," "))}function rs(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"RESET_PASSWORD.MINIMUM_LENGTH_ALERT_MESSAGE")," "))}function cs(n,t){if(1&n&&(v.Vc(0,ls,3,3,"ng-container",47),v.Vc(1,rs,3,3,"ng-container",47)),2&n){const n=t.$implicit;v.rc("ngIf",n.hasError("required")),v.Db(1),v.rc("ngIf",n.hasError("minlength"))}}function us(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"COMMON.REQUIRED")," "))}function ds(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function bs(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"PATIENT.EMAIL_ALREADY_ASSIGNED_TO_USER")," "))}function fs(n,t){if(1&n&&(v.Vc(0,us,3,3,"ng-container",47),v.Vc(1,ds,3,3,"ng-container",47),v.Vc(2,bs,3,3,"ng-container",47)),2&n){const n=t.$implicit;v.rc("ngIf",n.hasError("required")),v.Db(1),v.rc("ngIf",n.hasError("email")),v.Db(1),v.rc("ngIf",n.hasError("notUnique"))}}function ps(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"COMMON.REQUIRED")," "))}function gs(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"VALIDATION.PHONE_NUMBER_ATLEAST_SIX_CHARS")," "))}function hs(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"VALIDATION.PHONE_NUMBER_MAX_SIXTEEN_CHARS")," "))}function ms(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" ",v.kc(2,1,"VALIDATION.PHONE_NUMBER_CONTAINS_INVALID_CHARS")," "))}function vs(n,t){if(1&n&&(v.Vc(0,ps,3,3,"ng-container",47),v.Vc(1,gs,3,3,"ng-container",47),v.Vc(2,hs,3,3,"ng-container",47),v.Vc(3,ms,3,3,"ng-container",47)),2&n){const n=t.$implicit;v.rc("ngIf",n.hasError("required")),v.Db(1),v.rc("ngIf",n.hasError("minlength")),v.Db(1),v.rc("ngIf",n.hasError("maxlength")),v.Db(1),v.rc("ngIf",n.hasError("pattern"))}}function Ss(n,t){if(1&n&&v.Sb(0,"nz-option",49),2&n){const n=t.$implicit;v.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function zs(n,t){if(1&n&&v.Sb(0,"nz-option",49),2&n){const n=t.$implicit;v.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function Xs(n,t){if(1&n&&(v.Xb(0,"label",50),v.Xc(1),v.Wb()),2&n){const n=t.$implicit;v.rc("nzValue",null==n?null:n.key),v.Db(1),v.Zc(" ",null==n?null:n.value," ")}}function Is(n,t){if(1&n&&(v.Xb(0,"strong",54),v.Xb(1,"nz-tag",55),v.Xc(2),v.jc(3,"tenantName"),v.Wb(),v.Wb()),2&n){const n=t.$implicit;v.Db(2),v.Zc(" ",v.kc(3,1,n)," ")}}function ys(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"div",51),v.Xb(2,"div",3),v.Xb(3,"label"),v.Xc(4,"Assigned Sub Tenants"),v.Wb(),v.Wb(),v.Wb(),v.Xb(5,"div",52),v.Xb(6,"div",3),v.Vc(7,Is,4,3,"strong",53),v.Wb(),v.Wb(),v.Ub()),2&n){const n=v.ic(2);v.Db(7),v.rc("ngForOf",n.assignedTenantIds)}}function Ds(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"span",59),v.jc(2,"tenantName"),v.Xb(3,"span",60),v.Xc(4),v.jc(5,"tenantName"),v.Wb(),v.Wb(),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.rc("nzTooltipTitle",v.kc(2,2,null==n?null:n.tenantId)),v.Db(3),v.Zc(" ",v.kc(5,4,null==n?null:n.tenantId),"")}}function Ts(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-option",56),v.Xb(2,"span",57),v.Xb(3,"span",58),v.Xc(4),v.Wb(),v.Vc(5,Ds,6,6,"ng-container",41),v.Wb(),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.sc("nzLabel",null==n?null:n.value),v.rc("nzValue",null==n?null:n.key),v.Db(3),v.Zc(" ",null==n?null:n.value," ")}}function Ws(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"span",59),v.jc(2,"tenantName"),v.Xb(3,"span",60),v.Xc(4),v.jc(5,"tenantName"),v.Wb(),v.Wb(),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.rc("nzTooltipTitle",v.kc(2,2,null==n?null:n.tenantId)),v.Db(3),v.Zc(" ",v.kc(5,4,null==n?null:n.tenantId),"")}}function Ps(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-option",61),v.Xb(2,"span",62),v.Xb(3,"span",58),v.Xc(4),v.Wb(),v.Vc(5,Ws,6,6,"ng-container",41),v.Wb(),v.Wb(),v.Ub()),2&n){const n=t.$implicit,e=v.ic(2);v.Db(1),v.sc("nzLabel",null==n?null:n.value),v.rc("nzValue",null==n?null:n.key)("nzHide",!e.isNotDefaultSite(null==n?null:n.key)),v.Db(3),v.Zc(" ",null==n?null:n.value," ")}}function Cs(n,t){if(1&n&&v.Sb(0,"nz-option",49),2&n){const n=t.$implicit;v.rc("nzValue",null==n?null:n.key)("nzLabel",null==n?null:n.value)}}function As(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-option",49),v.Sb(2,"nz-option",49),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.tc("nzValue","",n.type,"_FFS"),v.tc("nzLabel","",n.type,": Fee for service"),v.Db(1),v.tc("nzValue","",n.type,"_CAPITATION"),v.tc("nzLabel","",n.type,": Capitation")}}function _s(n,t){1&n&&(v.Vb(0),v.Sb(1,"nz-option",64),v.Sb(2,"nz-option",65),v.Ub())}function Ms(n,t){if(1&n&&(v.Vb(0),v.Vc(1,As,3,4,"ng-container",47),v.Vc(2,_s,3,0,"ng-container",47),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("ngIf","GENERAL"!==(null==n?null:n.type)),v.Db(1),v.rc("ngIf","GENERAL"===(null==n?null:n.type))}}function Os(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"h3",7),v.Xc(2,"Program Participation"),v.Wb(),v.Sb(3,"div",8),v.Xb(4,"div",9),v.Xb(5,"div",3),v.Xb(6,"label"),v.Xc(7,"Physician participates in the following programs"),v.Wb(),v.Wb(),v.Wb(),v.Xb(8,"div",9),v.Xb(9,"div",3),v.Xb(10,"nz-form-item"),v.Xb(11,"nz-form-control",11),v.jc(12,"translate"),v.Xb(13,"nz-select",63),v.Vc(14,Ms,3,2,"ng-container",43),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(15,"nz-divider"),v.Ub()),2&n){const n=v.ic(2);v.Db(11),v.sc("nzErrorTip",v.kc(12,3,"COMMON.REQUIRED")),v.Db(2),v.rc("nzMode","multiple"),v.Db(1),v.rc("ngForOf",n.episodes)}}function Ns(n,t){1&n&&(v.Vb(0),v.Xb(1,"h3",7),v.Xc(2,"Physician Information"),v.Wb(),v.Sb(3,"div",8),v.Xb(4,"div",9),v.Xb(5,"div",10),v.Xb(6,"label"),v.Xc(7,"NPI ID*"),v.Wb(),v.Wb(),v.Xb(8,"div",10),v.Xb(9,"label"),v.Xc(10,"Credentials"),v.Wb(),v.Wb(),v.Wb(),v.Xb(11,"div",9),v.Xb(12,"div",10),v.Xb(13,"nz-form-item"),v.Xb(14,"nz-form-control",11),v.jc(15,"translate"),v.Sb(16,"input",66),v.Wb(),v.Wb(),v.Wb(),v.Xb(17,"div",10),v.Xb(18,"nz-form-item"),v.Xb(19,"nz-form-control",11),v.jc(20,"translate"),v.Sb(21,"input",67),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(22,"nz-divider"),v.Ub()),2&n&&(v.Db(14),v.sc("nzErrorTip",v.kc(15,2,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(20,4,"COMMON.REQUIRED")))}function Rs(n,t){if(1&n){const n=v.Yb();v.Xb(0,"form",5,6),v.ec("ngSubmit",function(){return v.Lc(n),v.ic().submit()})("keydown.enter",function(n){return n.preventDefault()}),v.Xb(2,"h3",7),v.Xc(3,"Basic Information"),v.Wb(),v.Sb(4,"div",8),v.Xb(5,"div",9),v.Xb(6,"div",10),v.Xb(7,"label"),v.Xc(8),v.jc(9,"translate"),v.Wb(),v.Wb(),v.Xb(10,"div",10),v.Xb(11,"label"),v.Xc(12),v.jc(13,"translate"),v.Wb(),v.Wb(),v.Xb(14,"div",10),v.Xb(15,"label"),v.Xc(16),v.jc(17,"translate"),v.Wb(),v.Wb(),v.Xb(18,"div",10),v.Xb(19,"label"),v.Xc(20),v.jc(21,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(22,"div",9),v.Xb(23,"div",10),v.Xb(24,"nz-form-item"),v.Xb(25,"nz-form-control",11),v.jc(26,"translate"),v.Sb(27,"input",12),v.Wb(),v.Wb(),v.Wb(),v.Xb(28,"div",10),v.Xb(29,"nz-form-item"),v.Xb(30,"nz-form-control",11),v.jc(31,"translate"),v.Sb(32,"input",13),v.Wb(),v.Wb(),v.Wb(),v.Xb(33,"div",10),v.Xb(34,"nz-form-item"),v.Xb(35,"nz-form-control",11),v.jc(36,"translate"),v.Sb(37,"input",14),v.Wb(),v.Wb(),v.Wb(),v.Xb(38,"div",10),v.Xb(39,"nz-form-item"),v.Xb(40,"nz-form-control",11),v.Xb(41,"nz-input-group",15),v.Sb(42,"input",16),v.Wb(),v.Wb(),v.Vc(43,os,1,1,"ng-template",null,17,v.Wc),v.Vc(45,cs,2,2,"ng-template",null,18,v.Wc),v.Wb(),v.Wb(),v.Wb(),v.Sb(47,"div",8),v.Xb(48,"div",9),v.Xb(49,"div",10),v.Xb(50,"label"),v.Xc(51),v.jc(52,"translate"),v.Wb(),v.Wb(),v.Xb(53,"div",10),v.Xb(54,"label"),v.Xc(55),v.jc(56,"translate"),v.Wb(),v.Wb(),v.Xb(57,"div",10),v.Xb(58,"label"),v.Xc(59),v.jc(60,"translate"),v.Wb(),v.Wb(),v.Xb(61,"div",10),v.Xb(62,"label"),v.Xc(63),v.jc(64,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(65,"div",9),v.Xb(66,"div",10),v.Xb(67,"nz-form-item"),v.Xb(68,"nz-form-control",11),v.Xb(69,"nz-input-group"),v.Sb(70,"input",19),v.Wb(),v.Wb(),v.Vc(71,fs,3,3,"ng-template",null,20,v.Wc),v.Wb(),v.Wb(),v.Xb(73,"div",10),v.Xb(74,"nz-form-item"),v.Xb(75,"nz-form-control",11),v.Xb(76,"nz-input-group",21),v.Sb(77,"input",22),v.Wb(),v.Wb(),v.Vc(78,vs,4,4,"ng-template",null,23,v.Wc),v.Wb(),v.Wb(),v.Xb(80,"div",10),v.Xb(81,"nz-form-item"),v.Xb(82,"nz-form-control",11),v.jc(83,"translate"),v.Sb(84,"nz-date-picker",24),v.Wb(),v.Wb(),v.Wb(),v.Xb(85,"div",10),v.Xb(86,"nz-form-item"),v.Xb(87,"nz-form-control",11),v.jc(88,"translate"),v.Xb(89,"nz-select",25),v.Vc(90,Ss,1,2,"nz-option",26),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(91,"div",8),v.Xb(92,"div",9),v.Xb(93,"div",10),v.Xb(94,"label"),v.Xc(95),v.jc(96,"translate"),v.Wb(),v.Wb(),v.Xb(97,"div",27),v.Xb(98,"label"),v.Xc(99),v.jc(100,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(101,"div",9),v.Xb(102,"div",10),v.Xb(103,"nz-form-item"),v.Xb(104,"nz-form-control",11),v.jc(105,"translate"),v.Xb(106,"nz-select",28),v.Vc(107,zs,1,2,"nz-option",26),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(108,"div",27),v.Xb(109,"nz-form-item"),v.Xb(110,"nz-form-control",11),v.jc(111,"translate"),v.Xb(112,"nz-radio-group",29),v.Vc(113,Xs,2,2,"label",30),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(114,"nz-divider"),v.Xb(115,"h3",7),v.Xc(116,"Contact Information"),v.Wb(),v.Xb(117,"div",9),v.Xb(118,"div",31),v.Xb(119,"label"),v.Xc(120,"Staff Home Address"),v.Wb(),v.Wb(),v.Xb(121,"div",27),v.Xb(122,"label"),v.Xc(123),v.jc(124,"translate"),v.Wb(),v.Wb(),v.Xb(125,"div",32),v.Xb(126,"label"),v.Xc(127,"PO Box #"),v.Wb(),v.Wb(),v.Wb(),v.Xb(128,"div",9),v.Xb(129,"div",31),v.Xb(130,"nz-form-item"),v.Xb(131,"nz-form-control",11),v.jc(132,"translate"),v.Sb(133,"input",33,34),v.Wb(),v.Wb(),v.Wb(),v.Xb(135,"div",27),v.Xb(136,"nz-form-item"),v.Xb(137,"nz-form-control",11),v.jc(138,"translate"),v.Sb(139,"input",35),v.Wb(),v.Wb(),v.Wb(),v.Xb(140,"div",32),v.Xb(141,"nz-form-item"),v.Xb(142,"nz-form-control",11),v.jc(143,"translate"),v.Sb(144,"input",36),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(145,"div",8),v.Xb(146,"div",9),v.Xb(147,"div",10),v.Xb(148,"label"),v.Xc(149),v.jc(150,"translate"),v.Wb(),v.Wb(),v.Xb(151,"div",10),v.Xb(152,"label"),v.Xc(153),v.jc(154,"translate"),v.Wb(),v.Wb(),v.Xb(155,"div",10),v.Xb(156,"label"),v.Xc(157),v.jc(158,"translate"),v.Wb(),v.Wb(),v.Xb(159,"div",10),v.Xb(160,"label"),v.Xc(161),v.jc(162,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(163,"div",9),v.Xb(164,"div",10),v.Xb(165,"nz-form-item"),v.Xb(166,"nz-form-control",11),v.jc(167,"translate"),v.Sb(168,"input",37),v.Wb(),v.Wb(),v.Wb(),v.Xb(169,"div",10),v.Xb(170,"nz-form-item"),v.Xb(171,"nz-form-control",11),v.jc(172,"translate"),v.Sb(173,"input",38),v.Wb(),v.Wb(),v.Wb(),v.Xb(174,"div",10),v.Xb(175,"nz-form-item"),v.Xb(176,"nz-form-control",11),v.jc(177,"translate"),v.Sb(178,"input",39),v.Wb(),v.Wb(),v.Wb(),v.Xb(179,"div",10),v.Xb(180,"nz-form-item"),v.Xb(181,"nz-form-control",11),v.jc(182,"translate"),v.Sb(183,"input",40),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(184,"nz-divider"),v.Sb(185,"div",8),v.Sb(186,"div",8),v.Xb(187,"h3",7),v.Xc(188),v.jc(189,"translate"),v.Wb(),v.Sb(190,"div",8),v.Vc(191,ys,8,1,"ng-container",41),v.Xb(192,"div",9),v.Xb(193,"div",10),v.Xb(194,"label"),v.Xc(195,"Default Site*"),v.Wb(),v.Wb(),v.Xb(196,"div",10),v.Xb(197,"label"),v.Xc(198,"Other Sites"),v.Wb(),v.Wb(),v.Xb(199,"div",10),v.Xb(200,"label"),v.Xc(201),v.jc(202,"translate"),v.Wb(),v.Wb(),v.Xb(203,"div",10),v.Xb(204,"label"),v.Xc(205,"Staff ID"),v.Wb(),v.Wb(),v.Wb(),v.Xb(206,"div",9),v.Xb(207,"div",10),v.Xb(208,"nz-form-item"),v.Xb(209,"nz-form-control",11),v.jc(210,"translate"),v.Xb(211,"nz-select",42),v.ec("ngModelChange",function(t){return v.Lc(n),v.ic().mapAndFilterSites(t)})("ngModelChange",function(){return v.Lc(n),v.ic().onSiteSelect()}),v.Vc(212,Ts,6,3,"ng-container",43),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(213,"div",10),v.Xb(214,"nz-form-item"),v.Xb(215,"nz-form-control",11),v.jc(216,"translate"),v.Xb(217,"nz-select",44),v.ec("ngModelChange",function(){return v.Lc(n),v.ic().onSiteSelect()}),v.Vc(218,Ps,6,4,"ng-container",43),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(219,"div",10),v.Xb(220,"nz-form-item"),v.Xb(221,"nz-form-control",11),v.jc(222,"translate"),v.Xb(223,"nz-select",45),v.Vc(224,Cs,1,2,"nz-option",26),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(225,"div",10),v.Xb(226,"nz-form-item"),v.Xb(227,"nz-form-control"),v.Sb(228,"input",46),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Sb(229,"nz-divider"),v.Vc(230,Os,16,5,"ng-container",47),v.Vc(231,Ns,23,6,"ng-container",47),v.Sb(232,"div",8),v.Wb()}if(2&n){const n=v.Ic(44),t=v.Ic(46),e=v.Ic(72),i=v.Ic(79),s=v.ic();v.rc("formGroup",s.staffForm),v.Db(8),v.Zc("",v.kc(9,53,"COMMON.FIRSTNAME"),"*"),v.Db(4),v.Zc("",v.kc(13,55,"COMMON.LASTNAME"),"*"),v.Db(4),v.Yc(v.kc(17,57,"COMMON.USERNAME")),v.Db(4),v.Yc(v.kc(21,59,"COMMON.PASSWORD")),v.Db(5),v.sc("nzErrorTip",v.kc(26,61,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(31,63,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(36,65,"COMMON.REQUIRED")),v.Db(5),v.rc("nzErrorTip",t),v.Db(1),v.rc("nzSuffix",n),v.Db(1),v.rc("type",s.passwordVisible?"text":"password"),v.Db(9),v.Zc("",v.kc(52,67,"COMMON.EMAIL"),"*"),v.Db(4),v.Yc(v.kc(56,69,"COMMON.PHONE_NUMBER")),v.Db(4),v.Yc(v.kc(60,71,"COMMON.DOB")),v.Db(4),v.Zc("",v.kc(64,73,"PATIENT.TIME_ZONE"),"*"),v.Db(5),v.rc("nzErrorTip",e),v.Db(7),v.rc("nzErrorTip",i),v.Db(1),v.tc("nzAddOnBefore","[",s.countryCode,"]"),v.Db(6),v.sc("nzErrorTip",v.kc(83,75,"COMMON.REQUIRED")),v.Db(2),v.rc("nzFormat","MM-dd-yyyy")("nzDisabledDate",s.disabledDate)("nzDefaultPickerValue",s.defaultDate),v.Db(3),v.sc("nzErrorTip",v.kc(88,77,"COMMON.REQUIRED")),v.Db(3),v.rc("ngForOf",s.timezones),v.Db(5),v.Zc("",v.kc(96,79,"PATIENT.PREFERRED_COMMUNICATION_LANGUAGE"),"*"),v.Db(4),v.Zc("",v.kc(100,81,"PATIENT.GENDER"),"*"),v.Db(5),v.sc("nzErrorTip",v.kc(105,83,"COMMON.REQUIRED")),v.Db(3),v.rc("ngForOf",s.languages),v.Db(3),v.sc("nzErrorTip",v.kc(111,85,"COMMON.REQUIRED")),v.Db(3),v.rc("ngForOf",s.genders),v.Db(10),v.Yc(v.kc(124,87,"PATIENT.ADDRESS_LINE_2")),v.Db(8),v.sc("nzErrorTip",v.kc(132,89,"COMMON.REQUIRED")),v.Db(6),v.sc("nzErrorTip",v.kc(138,91,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(143,93,"COMMON.REQUIRED")),v.Db(7),v.Yc(v.kc(150,95,"ZIP_CODE")),v.Db(4),v.Yc(v.kc(154,97,"COMMON.COUNTRY")),v.Db(4),v.Yc(v.kc(158,99,"COMMON.STATE")),v.Db(4),v.Yc(v.kc(162,101,"COMMON.CITY")),v.Db(5),v.sc("nzErrorTip",v.kc(167,103,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(172,105,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(177,107,"COMMON.REQUIRED")),v.Db(5),v.sc("nzErrorTip",v.kc(182,109,"COMMON.REQUIRED")),v.Db(7),v.Yc(v.kc(189,111,"PATIENT.ORGANIZATIONAL_INFORMATION")),v.Db(13),v.Yc(v.kc(202,113,"COMMON.PROFILETAG")),v.Db(8),v.sc("nzErrorTip",v.kc(210,115,"COMMON.REQUIRED")),v.Db(3),v.rc("ngForOf",s.sites),v.Db(3),v.sc("nzErrorTip",v.kc(216,117,"COMMON.REQUIRED")),v.Db(3),v.rc("ngForOf",s.sites),v.Db(3),v.sc("nzErrorTip",v.kc(222,119,"COMMON.REQUIRED")),v.Db(2),v.rc("nzMode","multiple"),v.Db(1),v.rc("ngForOf",s.tags),v.Db(6),v.rc("ngIf","PHYSICIAN"===s.role),v.Db(1),v.rc("ngIf","PHYSICIAN"===s.role)}}function Es(n,t){}let ws=(()=>{class n extends h.a{constructor(n,t,e,i,s,a,o,l,r,c,u,d){var b;super(),this._router=n,this._fb=t,this._tagsService=e,this._sitesService=i,this._staffService=s,this.mapsAPILoader=a,this._groupsService=o,this._activatedRoute=l,this._emailValidator=r,this._dataSharingService=c,this._notificationsService=u,this._componentFactoryResolver=d,this.episodes=[],this.timezones=Object(Qe.e)(),this.genders=Object(Qe.b)(),this.languages=Object(Qe.d)(),this.disabledDate=n=>bi()(Date.now(),n)<18,this.assignedTenantIds=new Array,this.siteTenantMap=new Map,this.staffId=this._activatedRoute.snapshot.paramMap.get("id"),this.role=this._activatedRoute.snapshot.queryParamMap.get("role"),this.mode=this._activatedRoute.snapshot.paramMap.get("mode")||"add";const f=this.getRoleName(this.role),p=this._activatedRoute.snapshot.queryParamMap.get("staffName")||`Add ${f}`;null===(b=this._dataSharingService.tenantSettings)||void 0===b||b.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{var t;n&&(this.tenantConfig=n,this.countryCode=null===(t=this.tenantConfig)||void 0===t?void 0:t.countryCode,this.initializeForm(),this.getEpisodes())}),this._routeHelperService.setTitleForRoute(p),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Jn.a)(n=>!!n),Object(Kn.a)(this.unsubscribed)).subscribe(()=>{var n,t;"PENDING"!==this.staffForm.status&&(null===(t=null===(n=this.staffFormEl)||void 0===n?void 0:n.ngSubmit)||void 0===t||t.next())})}getRoleName(n){switch(n){case Dn.a.PHYSICIAN:return"Physician";case Dn.a.ENROLMENT_STAFF:return"Enrolment Staff";case Dn.a.MANAGER_STAFF:return"Manager";default:return"Monitoring Staff"}}ngAfterViewInit(){null!=this.staffId&&null!=this.staffId||this.initPermissionComponent()}ngOnInit(){this.getAllTags(),this.getAllSites(),this.defaultDate=pi()(Date.now(),18)}initPermissionComponent(){let n=this._componentFactoryResolver.resolveComponentFactory(Ki);null!=this.viewContainerRef&&(this.viewContainerRef.clear(),this.permissionsComponentRef=this.viewContainerRef.createComponent(n),this.permissionsComponentRef.instance.role=this.role,this.permissionsComponentRef.instance.roleId=this.roleId,this.permissionsComponentRef.instance.roleName=this.roleName,this.permissionsComponentRef.instance.preview="add"!=this.mode,this.permissionsComponentRef.instance.userMode="add"==this.mode?"NEW":"EDIT",this.permissionsComponentRef.instance.staffActive=!0,this.permissionsComponentRef.instance.userId=this.staffId,this.permissionsComponentRef.instance.init(),this.permissionsComponentRef.instance.onBoundaryChange.subscribe(n=>{this.accessBoundary=n}))}submitPermissions(){this.permissionsComponentRef.instance.submitPermissionUpdateRequest().subscribe(()=>this.permissionsComponentRef.instance.afterPermissionUpdated())}initializeForm(){({add:()=>this.newFormInitializer(),edit:()=>this.existingStaffFormInitializer()})[this.mode]()}newFormInitializer(){var n,t,e;const i=null===(n=this.tenantConfig)||void 0===n?void 0:n.timeZone,s=null===(t=this.tenantConfig)||void 0===t?void 0:t.language;this.staffForm=this._fb.group(((n,t)=>{const e=new ni;return"en"===t&&(t="en_US"),e.timeZone.setValue(null!=n?n:"Canada/Eastern"),e.language.setValue(null!=t?t:"en_US"),e})(i,s)),this.setupExtraValidators(),this.setupGeocodeAPI(),this.initPermissionComponent(),null===(e=this.staffForm)||void 0===e||e.controls.programs.valueChanges.pipe(Object(Ge.a)(),Object(Kn.a)(this.unsubscribed)).subscribe(([n,t])=>{var e;const i=t.map(n=>t.findLast(t=>n.split("_")[0]===t.split("_")[0])).filter((n,t,e)=>e.indexOf(n)==t);null===(e=this.staffForm)||void 0===e||e.controls.programs.patchValue(i,{emitEvent:!1})})}onSiteSelect(){var n,t,e,i,s,a,o,l,r,c,u,d;if(this.assignedTenantIds=new Array,null===(e=null===(t=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===t?void 0:t.site)||void 0===e?void 0:e.value){const n=this.siteTenantMap.get(null===(a=null===(s=null===(i=this.staffForm)||void 0===i?void 0:i.controls)||void 0===s?void 0:s.site)||void 0===a?void 0:a.value);this.assignedTenantIds.push(n)}(null===(r=null===(l=null===(o=this.staffForm)||void 0===o?void 0:o.controls)||void 0===l?void 0:l.otherSites)||void 0===r?void 0:r.value)&&(null===(d=null===(u=null===(c=this.staffForm)||void 0===c?void 0:c.controls)||void 0===u?void 0:u.otherSites)||void 0===d||d.value.forEach(n=>{const t=this.siteTenantMap.get(n);this.assignedTenantIds.push(t)}));var b=new Set(this.assignedTenantIds);if(this.assignedTenantIds=Array.from(b),null!=this.viewContainerRef&&null!=this.permissionsComponentRef){const n=this.assignedTenantIds.join(",");this.permissionsComponentRef.instance.getTenantDefaultRoles(n)}this.getAllTags()}existingStaffFormInitializer(){this._staffService.fetchStaffMemberById(this.staffId).subscribe(n=>{var t;this.setupExtraValidators(),this.staffForm=this._fb.group((n=>{var t,e;const i=new ni;for(const s in n)null===(t=i[s])||void 0===t||t.setValue(n[s]);return i.dateOfBirth.setValue(Object(Ke.a)(n.dateOfBirth||(new Date).toISOString())),i.language.setValue(null===(e=null==n?void 0:n.language)||void 0===e?void 0:e.locale),((n,t)=>{var e;const i=[];null==t||t.forEach(t=>{(null==t?void 0:t.defaultLocation)?n.site.setValue(null==t?void 0:t.id):i.push(null==t?void 0:t.id)}),null===(e=null==n?void 0:n.otherSites)||void 0===e||e.setValue(i)})(i,null==n?void 0:n.locations),((n,t)=>{n.streetAddress.setValue(null==t?void 0:t.line1),n.streetAddress2.setValue(null==t?void 0:t.line2),n.city.setValue(null==t?void 0:t.city),n.state.setValue(null==t?void 0:t.state),n.country.setValue(null==t?void 0:t.country),n.zipCode.setValue(null==t?void 0:t.pin),n.poBox.setValue(null==t?void 0:t.poBox)})(i,null==n?void 0:n.address),((n,t)=>{const e=null==t?void 0:t.find(n=>n.source===Je.a.NPI_ID);n.npiId.setValue(null==e?void 0:e.sourceId)})(i,null==n?void 0:n.externalSources),((n,t)=>{const e=null==t?void 0:t.find(n=>n.source===Je.a.STAFF_ID);n.staffId.setValue(null==e?void 0:e.sourceId)})(i,null==n?void 0:n.externalSources),((n,t)=>{(null==t?void 0:t.length)&&n.credentials.setValue(t[0])})(i,null==n?void 0:n.credentials),((n,t)=>{var e;if(!t)return;const i=[];null===(e=Object.entries(t))||void 0===e||e.forEach(n=>{var t;i.push(`${n[0]}_${null===(t=n[1])||void 0===t?void 0:t.model}`)}),n.programs.setValue(i)})(i,null==n?void 0:n.programEnrollments),i})(n.user)),this.staff=n,this.roleName=n.user.roles[0].name,this.roleId=n.user.roles[0].id,this.accessBoundary=n.user.roles[0].accessBoundary,this.onSiteSelect(),this.setupGeocodeAPI(),this.initPermissionComponent(),this.staffForm.updateValueAndValidity(),null===(t=this.staffForm)||void 0===t||t.controls.programs.valueChanges.pipe(Object(Ge.a)(),Object(Kn.a)(this.unsubscribed)).subscribe(([n,t])=>{var e;const i=t.map(n=>t.findLast(t=>n.split("_")[0]===t.split("_")[0])).filter((n,t,e)=>e.indexOf(n)==t);null===(e=this.staffForm)||void 0===e||e.controls.programs.patchValue(i,{emitEvent:!1})})})}setupExtraValidators(){var n,t,e,i,s,a;Dn.a.PHYSICIAN===this.role&&(null===(e=null===(t=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===t?void 0:t.npiId)||void 0===e||e.setValidators(c.D.required)),null===(a=null===(s=null===(i=this.staffForm)||void 0===i?void 0:i.controls)||void 0===s?void 0:s.email)||void 0===a||a.setAsyncValidators(this._emailValidator.uniqueEmailValidator())}setupGeocodeAPI(){setTimeout(()=>this.searchAddress()),this.getLocationFromZipcode()}getAllTags(){this._tagsService.getTags("PATIENT",-1,0,this.assignedTenantIds).subscribe(n=>{var t;let e=null===(t=null==n?void 0:n.body)||void 0===t?void 0:t.map(n=>({key:null==n?void 0:n.name,value:null==n?void 0:n.name})),i=new Map;e.forEach(n=>{i.set(n.key,n)}),this.tags=Array.from(i.values())})}getAllSites(){const n=localStorage.getItem("loggedInUserAssignedTenants");this._sitesService.getAllSites(0,1e3,null,!(Dn.a.PHYSICIAN==this.role),n).subscribe(n=>{this.allSites=null==n?void 0:n.result,this.mapAndFilterSites()})}getEpisodes(){this.role===Dn.a.PHYSICIAN&&(this.episodes.push(...this.tenantConfig.episodeBlueprints.filter(n=>!1===n.archived)),this.episodes.sort((n,t)=>n.type.localeCompare(t.type)))}mapAndFilterSites(n){var t,e,i,s,a,o,l,r,c,u,d;(null===(i=null===(e=null===(t=this.staffForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.site)||void 0===i?void 0:i.value)&&(null===(o=null===(a=null===(s=this.staffForm)||void 0===s?void 0:s.controls)||void 0===a?void 0:a.otherSites)||void 0===o||o.setValue(null===(u=null===(c=null===(r=null===(l=this.staffForm)||void 0===l?void 0:l.controls)||void 0===r?void 0:r.otherSites)||void 0===c?void 0:c.value)||void 0===u?void 0:u.filter(n=>{var t,e,i;return n!==(null===(i=null===(e=null===(t=this.staffForm)||void 0===t?void 0:t.controls)||void 0===e?void 0:e.site)||void 0===i?void 0:i.value)}))),this.sites=null===(d=this.allSites)||void 0===d?void 0:d.filter(t=>!n||(null==t?void 0:t.id)!==n).map(n=>({key:null==n?void 0:n.id,value:null==n?void 0:n.name,tenantId:null==n?void 0:n.tenantId})),this.sites.forEach(n=>this.siteTenantMap.set(n.key,n.tenantId))}isNotDefaultSite(n){var t,e;return(null===(e=null===(t=this.staffForm)||void 0===t?void 0:t.controls.site)||void 0===e?void 0:e.value)!==n}searchAddress(){this.mapsAPILoader.load().then(()=>{var n;const t=new google.maps.places.Autocomplete(null===(n=this.searchElementRef)||void 0===n?void 0:n.nativeElement);t.addListener("place_changed",()=>{const n=ui.a.mapAddress(t);["streetAddress","streetAddress2","city","state","country","zipCode","lat","lng"].forEach(t=>{var e,i;null===(i=null===(e=this.staffForm)||void 0===e?void 0:e.controls[t])||void 0===i||i.patchValue(n[t],{emitEvent:!1})})})})}getLocationFromZipcode(){var n,t,e;null===(e=null===(t=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===t?void 0:t.zipCode)||void 0===e||e.valueChanges.pipe(Object(Ye.a)(500),Object(He.a)(),Object(Jn.a)(n=>(null==n?void 0:n.length)>4),Object(Be.a)(n=>this._groupsService.fetchLocationFromZipCode(n))).pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{var t,e,i,s,a,o,l;let r,c,u;null===(t=null==n?void 0:n.results)||void 0===t||t.forEach(n=>{var t;null===(t=null==n?void 0:n.address_components)||void 0===t||t.forEach(n=>{var t,e,i;-1!==(null===(t=null==n?void 0:n.types)||void 0===t?void 0:t.findIndex(n=>"country"===n))&&(r=n.long_name),-1!==(null===(e=null==n?void 0:n.types)||void 0===e?void 0:e.findIndex(n=>"administrative_area_level_1"===n))&&(c=n.long_name),-1!==(null===(i=null==n?void 0:n.types)||void 0===i?void 0:i.findIndex(n=>"locality"===n))&&(u=n.long_name)})}),null===(i=null===(e=this.staffForm)||void 0===e?void 0:e.controls)||void 0===i||i.city.setValue(u),null===(a=null===(s=this.staffForm)||void 0===s?void 0:s.controls)||void 0===a||a.state.setValue(c),null===(l=null===(o=this.staffForm)||void 0===o?void 0:o.controls)||void 0===l||l.country.setValue(r)})}submit(){var n,t,e,i,s,a,o;null===(e=null===(t=null===(n=this.staffForm)||void 0===n?void 0:n.controls)||void 0===t?void 0:t.email)||void 0===e||e.clearAsyncValidators();for(const d in this.staffForm.controls)this.staffForm.controls[d].markAsDirty(),this.staffForm.controls[d].updateValueAndValidity();if("VALID"!==(null===(i=this.staffForm)||void 0===i?void 0:i.status))return void(null===(o=null===(a=null===(s=this.staffForm)||void 0===s?void 0:s.controls)||void 0===a?void 0:a.email)||void 0===o||o.setAsyncValidators(this._emailValidator.uniqueEmailValidator()));this.assignedTenantIds.push(this.siteTenantMap.get(this.staffForm.controls.site.value)),this.staffForm.controls.otherSites.value&&this.staffForm.controls.otherSites.value.forEach(n=>this.assignedTenantIds.push(this.siteTenantMap.get(n)));var l=new Set(this.assignedTenantIds);this.assignedTenantIds=Array.from(l);const r=((n,t,e,i,s=ii.a.TENANT,a)=>{var o,l,r,c,u,d,b,f,p,g,h,m,v,S,z,X,I,y,D,T,W,P,C,A,_,M,O,N,R,E,w,x,V,k,L,F,U,j;return{id:this.staffId,firstName:null===(l=null===(o=null==n?void 0:n.controls)||void 0===o?void 0:o.firstName)||void 0===l?void 0:l.value,lastName:null===(c=null===(r=null==n?void 0:n.controls)||void 0===r?void 0:r.lastName)||void 0===c?void 0:c.value,credentials:oi(n),dateOfBirth:si(null===(d=null===(u=null==n?void 0:n.controls)||void 0===u?void 0:u.dateOfBirth)||void 0===d?void 0:d.value),language:{locale:(null===(f=null===(b=null==n?void 0:n.controls)||void 0===b?void 0:b.language)||void 0===f?void 0:f.value)||"en_US"},email:null===(g=null===(p=null==n?void 0:n.controls)||void 0===p?void 0:p.email)||void 0===g?void 0:g.value,username:null===(m=null===(h=null==n?void 0:n.controls)||void 0===h?void 0:h.username)||void 0===m?void 0:m.value,encryptedPassword:li(null===(S=null===(v=null==n?void 0:n.controls)||void 0===v?void 0:v.email)||void 0===S?void 0:S.value,null===(X=null===(z=null==n?void 0:n.controls)||void 0===z?void 0:z.password)||void 0===X?void 0:X.value),country:null===(y=null===(I=null==n?void 0:n.controls)||void 0===I?void 0:I.country)||void 0===y?void 0:y.value,mobile:null===(T=null===(D=null==n?void 0:n.controls)||void 0===D?void 0:D.mobile)||void 0===T?void 0:T.value,gender:null===(P=null===(W=null==n?void 0:n.controls)||void 0===W?void 0:W.gender)||void 0===P?void 0:P.value,address:ai(n),timeZone:null===(A=null===(C=null==n?void 0:n.controls)||void 0===C?void 0:C.timeZone)||void 0===A?void 0:A.value,profileTags:null===(M=null===(_=null==n?void 0:n.controls)||void 0===_?void 0:_.profileTags)||void 0===M?void 0:M.value,programs:ri(null===(N=null===(O=null==n?void 0:n.controls)||void 0===O?void 0:O.programs)||void 0===N?void 0:N.value),programEnrollments:null===(E=null===(R=null==n?void 0:n.controls)||void 0===R?void 0:R.programs)||void 0===E?void 0:E.value,countryCode:e,npiId:null===(x=null===(w=null==n?void 0:n.controls)||void 0===w?void 0:w.npiId)||void 0===x?void 0:x.value,site:null===(k=null===(V=null==n?void 0:n.controls)||void 0===V?void 0:V.site)||void 0===k?void 0:k.value,otherSites:null===(F=null===(L=null==n?void 0:n.controls)||void 0===L?void 0:L.otherSites)||void 0===F?void 0:F.value,roleType:i,staffId:null===(j=null===(U=null==n?void 0:n.controls)||void 0===U?void 0:U.staffId)||void 0===j?void 0:j.value,boundary:s,assignedTenantIds:a}})(this.staffForm,0,this.countryCode,this.role,this.accessBoundary,this.assignedTenantIds),c=this._staffService.createStaffMember(r),u=this._staffService.updateStaffMember(r);Object(ci.iif)(()=>!!r.id,u,c).subscribe(n=>{let t="Physician";Dn.a.MONITORING_STAFF===this.role&&(t="Monitoring staff"),Dn.a.ENROLMENT_STAFF===this.role&&(t="Enrolment staff"),Dn.a.MANAGER_STAFF===this.role&&(t="Manager staff");const e="add"===this.mode?"Profile created successfully":"Profile updated successfully";"add"===this.mode&&(this.viewContainerRef.clear(),this.permissionsComponentRef.instance.role=this.role,this.permissionsComponentRef.instance.userId=null==n?void 0:n.id,this.permissionsComponentRef.instance.init(),this.submitPermissions()),this._notificationsService.success(t,e),this.redirect(null==n?void 0:n.id,null==n?void 0:n.fullName,!r.id)})}redirect(n,t,e=!0){if(Dn.a.PHYSICIAN!==this.role&&Dn.a.ENROLMENT_STAFF!==this.role&&Dn.a.MANAGER_STAFF!==this.role&&e)return this.permissionsComponentRef.destroy(),void this._router.navigate(["/staff/assign/physicians/",n],{queryParams:{role:this.role,staffName:t}});this.permissionsComponentRef.destroy(),this._router.navigate(["/staff/view/",n],{queryParams:{role:this.role,staffName:t}})}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.g),v.Rb(c.h),v.Rb(Ze.a),v.Rb(je.a),v.Rb(on.a),v.Rb(Ji.b),v.Rb(qe.a),v.Rb(S.a),v.Rb($e.a),v.Rb(b.a),v.Rb(Pn.b),v.Rb(v.j))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-form"]],viewQuery:function(n,t){if(1&n&&(v.ed(is,1),v.ed(ss,1),v.ed(as,1,v.R)),2&n){let n;v.Hc(n=v.fc())&&(t.staffFormEl=n.first),v.Hc(n=v.fc())&&(t.searchElementRef=n.first),v.Hc(n=v.fc())&&(t.viewContainerRef=n.first)}},features:[v.Ab],decls:6,vars:1,consts:[[1,"container"],["ngNoForm","","id","staffsForm","nz-form","","appScrollToFirstInvalid","",3,"formGroup","ngSubmit","keydown.enter",4,"ngIf"],["nz-row","","nzGutter","32"],["nz-col","","nzSpan","24"],["permissionsHost",""],["ngNoForm","","id","staffsForm","nz-form","","appScrollToFirstInvalid","",3,"formGroup","ngSubmit","keydown.enter"],["staffFormEl","ngForm"],["nz-typography",""],[1,"divider"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","6"],[3,"nzErrorTip"],["formControlName","firstName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","lastName","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","username","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],[3,"nzSuffix"],["nz-input","","formControlName","password","readonly","","onfocus","this.removeAttribute('readonly')",3,"type"],["passwordSuffix",""],["passwordErrors",""],["formControlName","email","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["emailErrors",""],[3,"nzAddOnBefore"],["formControlName","mobile","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["mobileErrors",""],["formControlName","dateOfBirth","nzPlaceHolder","MM-DD-YYYY",3,"nzFormat","nzDisabledDate","nzDefaultPickerValue"],["formControlName","timeZone","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-col","","nzSpan","8"],["formControlName","language","nzPlaceHolder","Select a language"],["formControlName","gender"],["nz-radio","","class","radio-label",3,"nzValue",4,"ngFor","ngForOf"],["nz-col","","nzSpan","12"],["nz-col","","nzSpan","4"],["formControlName","streetAddress","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')","placeholder","Search or enter staff's residential address"],["searchAddress",""],["formControlName","streetAddress2","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","poBox","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","zipCode","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')"],["formControlName","country","nz-input","","readonly",""],["formControlName","state","nz-input","","readonly",""],["formControlName","city","nz-input","","readonly",""],[4,"isAccessAcrossTenantEnabled"],["nzPlaceHolder","Select a default site","formControlName","site","nzShowSearch","",3,"ngModelChange"],[4,"ngFor","ngForOf"],["nzPlaceHolder","Select other sites","formControlName","otherSites","nzShowSearch","","nzMode","multiple",3,"ngModelChange"],["nzPlaceHolder","Select profile tags","formControlName","profileTags","nzShowSearch","","nzAllowClear","",3,"nzMode"],["formControlName","staffId","nz-input",""],[4,"ngIf"],["name","view","size","14px",3,"color","click"],[3,"nzValue","nzLabel"],["nz-radio","",1,"radio-label",3,"nzValue"],["nz-row","","nzGutter","64"],["nz-row","","nzGutter","64",2,"margin-bottom","10px"],["style","margin-left: 5px;",4,"ngFor","ngForOf"],[2,"margin-left","5px"],["nzColor","var(--primary-color)"],["nzCustomContent","",3,"nzLabel","nzValue"],[1,"ellipsis-text","char-limit",2,"display","flex"],[2,"width","70%"],["nz-tooltip","",2,"width","30%",3,"nzTooltipTitle"],["nz-typography","","nzType","secondary",2,"color","var(--primary-color)"],["nzCustomContent","",3,"nzLabel","nzValue","nzHide"],[2,"display","flex"],["nzPlaceHolder","Select programs","formControlName","programs","nzShowSearch","","nzAllowClear","",3,"nzMode"],["nzValue","BHI_FFS","nzLabel","BHI: Fee for service"],["nzValue","BHI_CAPITATION","nzLabel","BHI: Capitation"],["formControlName","npiId","nz-input",""],["formControlName","credentials","nz-input",""]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Vc(1,Rs,233,121,"form",1),v.Xb(2,"div",2),v.Xb(3,"div",3),v.Vc(4,Es,0,0,"ng-template",null,4,v.Wc),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(1),v.rc("ngIf",t.staffForm))},directives:[a.q,P.c,P.a,ns.b,ts.a,c.v,c.m,T.a,ns.c,ns.a,c.d,An.b,c.u,c.k,Cn.a,An.c,An.d,I.a,de.d,a.p,es.c,A.a,St.a,dn.a,de.a,es.b,et.a,un.d],pipes:[bn.a,Dt.a],styles:[".container[_ngcontent-%COMP%]{padding:40px 100px 100px 60px!important}h3[_ngcontent-%COMP%]{margin-bottom:1em}label[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);margin-left:5px;margin-bottom:5px;display:block}.radio-label[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-input-group-addon:empty{display:none}[_nghost-%COMP%]     .ant-input-affix-wrapper{background:#fbfbfb 0 0 no-repeat padding-box;border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-picker, [_nghost-%COMP%]     .ant-select, input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box;border-radius:5px!important}input[_ngcontent-%COMP%]{border:1px solid var(--grey)}[_nghost-%COMP%]     .ant-select-selector{background:inherit!important}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     span.ant-radio+*{font:normal normal normal 11px/16px Nunito;color:var(--light-black)}[_nghost-%COMP%]     .anticon svg{color:#000;font-size:10px}[_nghost-%COMP%]     .ant-form label{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color);flex-direction:row-reverse}[_nghost-%COMP%]     .ant-checkbox-wrapper{display:inline-flex}[_nghost-%COMP%]     .ant-checkbox-checked{border:none}.alert-label[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .ant-checkbox{float:right}[_nghost-%COMP%]     .ant-checkbox+span{padding-left:0}.ellipsis-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.char-limit[_ngcontent-%COMP%]{max-width:100%}"]}),n})();var xs=e("bA1+"),Vs=e("T5gh"),ks=e("qAZ0"),Ls=e("9xQM");function Fs(n,t){if(1&n&&v.Sb(0,"img",15),2&n){const n=v.ic();v.rc("src",null==n.staff?null:n.staff.profilePhotoURL,v.Oc)}}function Us(n,t){1&n&&v.Sb(0,"nz-avatar",16),2&n&&v.rc("nzShape","square")("nzSize",150)("nzIcon","user")}function js(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Yc(v.kc(2,1,"COMMON.MALE")))}function Gs(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Yc(v.kc(2,1,"COMMON.FEMALE")))}function Ys(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Yc(v.kc(2,1,"GENDER.OTHER")))}function Hs(n,t){1&n&&(v.Vb(0),v.Xc(1,"English (United States)"),v.Ub())}function Bs(n,t){1&n&&(v.Vb(0),v.Xc(1,"Spanish (United States)"),v.Ub())}function $s(n,t){1&n&&(v.Vb(0),v.Xc(1,"Japanese (Japan)"),v.Ub())}function qs(n,t){1&n&&(v.Xb(0,"div",7),v.Xb(1,"label",8),v.Xc(2,"NPI ID"),v.Wb(),v.Wb())}function Zs(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic();v.Db(1),v.Zc(" ",null==n.staff||null==n.staff.address?null:n.staff.address.line1,",\xa0 ")}}function Qs(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic();v.Db(1),v.Zc(" ",null==n.staff||null==n.staff.address?null:n.staff.address.line2,",\xa0 ")}}function Ks(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic();v.Db(1),v.Zc(" ",null==n.staff||null==n.staff.address?null:n.staff.address.city,",\xa0 ")}}function Js(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic();v.Db(1),v.Zc(" ",null==n.staff||null==n.staff.address?null:n.staff.address.state,"\xa0 ")}}function na(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic();v.Db(1),v.Zc(" -\xa0",null==n.staff||null==n.staff.address?null:n.staff.address.country," ")}}function ta(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic();v.Db(1),v.Zc(" -\xa0",null==n.staff||null==n.staff.address?null:n.staff.address.pin," ")}}function ea(n,t){1&n&&(v.Xb(0,"p"),v.Xc(1," N/A "),v.Wb())}function ia(n,t){if(1&n&&(v.Xb(0,"div",7),v.Xb(1,"strong"),v.Xc(2),v.jc(3,"externalSources"),v.Wb(),v.Wb()),2&n){const n=v.ic();v.Db(2),v.Yc(v.lc(3,1,null==n.staff?null:n.staff.externalSources,"NPI_ID"))}}const sa=function(){return[32,8]};let aa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-basic-info"]],inputs:{role:"role",staff:"staff"},decls:84,vars:70,consts:[[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzXs","24","nzSm","8","nzMd","6"],["alt","user-profile",3,"src",4,"ngIf"],[3,"nzShape","nzSize","nzIcon",4,"ngIf"],["nz-col","","nzXs","24","nzSm","16","nzMd","18"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],["nz-typography","","nzType","secondary"],[3,"ngSwitch"],[4,"ngSwitchCase"],["nz-col","","nzSpan","8",4,"ngIf"],["id","address"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"],["alt","user-profile",3,"src"],[3,"nzShape","nzSize","nzIcon"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"div",1),v.Xb(2,"div",2),v.Vc(3,Fs,1,1,"img",3),v.Vc(4,Us,1,3,"nz-avatar",4),v.Wb(),v.Xb(5,"div",5),v.Xb(6,"div",6),v.Xb(7,"div",7),v.Xb(8,"label",8),v.Xc(9),v.jc(10,"translate"),v.Wb(),v.Wb(),v.Xb(11,"div",7),v.Xb(12,"label",8),v.Xc(13),v.jc(14,"translate"),v.Wb(),v.Wb(),v.Xb(15,"div",7),v.Xb(16,"label",8),v.Xc(17),v.jc(18,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(19,"div",6),v.Xb(20,"div",7),v.Xb(21,"strong"),v.Xc(22),v.Wb(),v.Wb(),v.Xb(23,"div",7),v.Xb(24,"strong",9),v.Vc(25,js,3,3,"ng-container",10),v.Vc(26,Gs,3,3,"ng-container",10),v.Vc(27,Ys,3,3,"ng-container",10),v.Wb(),v.Wb(),v.Xb(28,"div",7),v.Xb(29,"strong"),v.Xc(30),v.jc(31,"date"),v.Wb(),v.Wb(),v.Wb(),v.Sb(32,"br"),v.Xb(33,"div",6),v.Xb(34,"div",7),v.Xb(35,"label",8),v.Xc(36),v.jc(37,"translate"),v.Wb(),v.Wb(),v.Xb(38,"div",7),v.Xb(39,"label",8),v.Xc(40),v.jc(41,"translate"),v.Wb(),v.Wb(),v.Xb(42,"div",7),v.Xb(43,"label",8),v.Xc(44),v.jc(45,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(46,"div",6),v.Xb(47,"div",7),v.Xb(48,"strong"),v.Xc(49),v.Wb(),v.Wb(),v.Xb(50,"div",7),v.Xb(51,"strong"),v.Xc(52),v.Wb(),v.Wb(),v.Xb(53,"div",7),v.Xb(54,"strong",9),v.Vc(55,Hs,2,0,"ng-container",10),v.Vc(56,Bs,2,0,"ng-container",10),v.Vc(57,$s,2,0,"ng-container",10),v.Wb(),v.Wb(),v.Wb(),v.Sb(58,"br"),v.Xb(59,"div",6),v.Xb(60,"div",7),v.Xb(61,"label",8),v.Xc(62),v.jc(63,"translate"),v.Wb(),v.Wb(),v.Xb(64,"div",7),v.Xb(65,"label",8),v.Xc(66),v.jc(67,"translate"),v.Wb(),v.Wb(),v.Vc(68,qs,3,0,"div",11),v.Wb(),v.Xb(69,"div",6),v.Xb(70,"div",7),v.Xb(71,"strong"),v.Xc(72),v.Wb(),v.Wb(),v.Xb(73,"div",7),v.Xb(74,"strong",12),v.Xb(75,"p",13),v.Vc(76,Zs,2,1,"ng-container",14),v.Vc(77,Qs,2,1,"ng-container",14),v.Vc(78,Ks,2,1,"ng-container",14),v.Vc(79,Js,2,1,"ng-container",14),v.Vc(80,na,2,1,"ng-container",14),v.Vc(81,ta,2,1,"ng-container",14),v.Wb(),v.Vc(82,ea,2,0,"p",14),v.Wb(),v.Wb(),v.Vc(83,ia,4,4,"div",11),v.Wb(),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(3),v.rc("ngIf",null==t.staff?null:t.staff.profilePhotoURL),v.Db(1),v.rc("ngIf",!(null!=t.staff&&t.staff.profilePhotoURL)),v.Db(2),v.rc("nzGutter",v.xc(64,sa)),v.Db(3),v.Yc(v.kc(10,45,"PATIENT.FULL_NAME")),v.Db(4),v.Yc(v.kc(14,47,"PATIENT.GENDER")),v.Db(4),v.Yc(v.kc(18,49,"COMMON.DOB")),v.Db(2),v.rc("nzGutter",v.xc(65,sa)),v.Db(3),v.Yc((null==t.staff?null:t.staff.fullName)||"N/A"),v.Db(2),v.rc("ngSwitch",null==t.staff?null:t.staff.gender),v.Db(1),v.rc("ngSwitchCase","MALE"),v.Db(1),v.rc("ngSwitchCase","FEMALE"),v.Db(1),v.rc("ngSwitchCase","OTHER"),v.Db(3),v.Yc(v.lc(31,51,null==t.staff?null:t.staff.dateOfBirth,"mediumDate")||"N/A"),v.Db(3),v.rc("nzGutter",v.xc(66,sa)),v.Db(3),v.Yc(v.kc(37,54,"COMMON.CONTACT")),v.Db(4),v.Yc(v.kc(41,56,"COMMON.E-MAIL")),v.Db(4),v.Yc(v.kc(45,58,"PATIENT.PREFERRED_LANGUAGE")),v.Db(2),v.rc("nzGutter",v.xc(67,sa)),v.Db(3),v.ad("",null==t.staff?null:t.staff.countryCode," - ",null==t.staff?null:t.staff.mobile,""),v.Db(3),v.Yc((null==t.staff?null:t.staff.email)||"N/A"),v.Db(2),v.rc("ngSwitch",null==t.staff||null==t.staff.language?null:t.staff.language.locale),v.Db(1),v.rc("ngSwitchCase","en_US"),v.Db(1),v.rc("ngSwitchCase","es_US"),v.Db(1),v.rc("ngSwitchCase","ja_JP"),v.Db(2),v.rc("nzGutter",v.xc(68,sa)),v.Db(3),v.Yc(v.kc(63,60,"COMMON.USERNAME")),v.Db(4),v.Yc(v.kc(67,62,"PATIENT.HOME_ADDRESS")),v.Db(2),v.rc("ngIf","PHYSICIAN"===t.role),v.Db(1),v.rc("nzGutter",v.xc(69,sa)),v.Db(3),v.Yc((null==t.staff?null:t.staff.username)||"N/A"),v.Db(3),v.wc("nzTooltipTitle","",null==t.staff||null==t.staff.address?null:t.staff.address.line1,"\n                             ",null==t.staff||null==t.staff.address?null:t.staff.address.line2," ",null==t.staff||null==t.staff.address?null:t.staff.address.city,"\n                             ",null==t.staff||null==t.staff.address?null:t.staff.address.state," ",null==t.staff||null==t.staff.address?null:t.staff.address.country,"\n                             ",null==t.staff||null==t.staff.address?null:t.staff.address.pin,""),v.Db(1),v.rc("ngIf",null==t.staff||null==t.staff.address?null:t.staff.address.line1),v.Db(1),v.rc("ngIf",null==t.staff||null==t.staff.address?null:t.staff.address.line2),v.Db(1),v.rc("ngIf",null==t.staff||null==t.staff.address?null:t.staff.address.city),v.Db(1),v.rc("ngIf",null==t.staff||null==t.staff.address?null:t.staff.address.state),v.Db(1),v.rc("ngIf",null==t.staff||null==t.staff.address?null:t.staff.address.country),v.Db(1),v.rc("ngIf",null==t.staff||null==t.staff.address?null:t.staff.address.pin),v.Db(1),v.rc("ngIf",!(null!=t.staff&&null!=t.staff.address&&t.staff.address.line1||null!=t.staff&&null!=t.staff.address&&t.staff.address.line2||null!=t.staff&&null!=t.staff.address&&t.staff.address.city||null!=t.staff&&null!=t.staff.address&&t.staff.address.state||null!=t.staff&&null!=t.staff.address&&t.staff.address.country||null!=t.staff&&null!=t.staff.address&&t.staff.address.pin)),v.Db(1),v.rc("ngIf","PHYSICIAN"===t.role))},directives:[P.c,P.a,a.q,T.a,a.s,a.t,un.d,tt.a],pipes:[bn.a,a.e,Ls.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}[_nghost-%COMP%]     .ant-avatar{background:#dddfe1}img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:5px}#address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}"]}),n})();function oa(n,t){1&n&&(v.Vb(0),v.Xc(1,", "),v.Ub())}function la(n,t){if(1&n&&(v.Xb(0,"strong"),v.Xc(1),v.jc(2,"tenantName"),v.Vc(3,oa,2,0,"ng-container",8),v.Wb()),2&n){const n=t.$implicit,e=t.index,i=v.ic();v.Db(1),v.Zc(" ",v.kc(2,2,n),""),v.Db(2),v.rc("ngIf",e<i.staff.assignedTenantIds.length-1)}}function ra(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-tag",9),v.Xc(2),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("nzColor","green"),v.Db(1),v.Yc(n)}}function ca(n,t){1&n&&(v.Vb(0),v.Xb(1,"strong"),v.Xc(2,"N/A"),v.Wb(),v.Ub())}const ua=function(){return[32,8]};let da=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-organisation-info"]],inputs:{staff:"staff"},decls:36,vars:20,consts:[[1,"container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","8"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","4"],[4,"ngIf"],[3,"nzColor"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"div",1),v.Xb(2,"div",2),v.Xb(3,"label",3),v.Xc(4,"Assigned Subtenants"),v.Wb(),v.Wb(),v.Xb(5,"div",2),v.Vc(6,la,4,4,"strong",4),v.Wb(),v.Wb(),v.Xb(7,"div",1),v.Xb(8,"div",5),v.Xb(9,"label",3),v.Xc(10,"Sites"),v.Wb(),v.Wb(),v.Xb(11,"div",6),v.Xb(12,"label",3),v.Xc(13),v.jc(14,"translate"),v.Wb(),v.Wb(),v.Xb(15,"div",7),v.Xb(16,"label",3),v.Xc(17,"Staff ID"),v.Wb(),v.Wb(),v.Xb(18,"div",6),v.Xb(19,"label",3),v.Xc(20,"Role"),v.Wb(),v.Wb(),v.Wb(),v.Xb(21,"div",1),v.Xb(22,"div",5),v.Xb(23,"strong"),v.Xc(24),v.jc(25,"userLocations"),v.Wb(),v.Wb(),v.Xb(26,"div",6),v.Vc(27,ra,3,2,"ng-container",4),v.Vc(28,ca,3,0,"ng-container",8),v.Wb(),v.Xb(29,"div",7),v.Xb(30,"strong"),v.Xc(31),v.jc(32,"externalSources"),v.Wb(),v.Wb(),v.Xb(33,"div",6),v.Xb(34,"strong"),v.Xc(35),v.Wb(),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(1),v.rc("nzGutter",v.xc(17,ua)),v.Db(5),v.rc("ngForOf",t.staff.assignedTenantIds),v.Db(1),v.rc("nzGutter",v.xc(18,ua)),v.Db(6),v.Yc(v.kc(14,10,"COMMON.PROFILETAG")),v.Db(8),v.rc("nzGutter",v.xc(19,ua)),v.Db(3),v.Yc(v.kc(25,12,null==t.staff?null:t.staff.locations)),v.Db(3),v.rc("ngForOf",null==t.staff?null:t.staff.profileTags),v.Db(1),v.rc("ngIf",!(null!=t.staff&&null!=t.staff.profileTags&&t.staff.profileTags.length)),v.Db(3),v.Yc(v.lc(32,14,null==t.staff?null:t.staff.externalSources,"STAFF_ID")),v.Db(4),v.Yc(null==t.staff||null==t.staff.roles[0]?null:t.staff.roles[0].name))},directives:[P.c,P.a,T.a,a.p,a.q,et.a],pipes:[bn.a,En.a,Ls.a,Dt.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}"]}),n})();function ba(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-tag",15),v.Xc(2),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("nzColor","green"),v.Db(1),v.Yc(n)}}function fa(n,t){1&n&&(v.Vb(0),v.Xb(1,"strong"),v.Xc(2,"N/A"),v.Wb(),v.Ub())}function pa(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-tag",15),v.Xc(2),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("nzColor","green"),v.Db(1),v.Yc(n)}}function ga(n,t){1&n&&(v.Vb(0),v.Xb(1,"strong"),v.Xc(2,"N/A"),v.Wb(),v.Ub())}function ha(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-tag",15),v.Xc(2),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("nzColor","green"),v.Db(1),v.Yc(n)}}function ma(n,t){1&n&&(v.Vb(0),v.Xb(1,"strong"),v.Xc(2,"N/A"),v.Wb(),v.Ub())}function va(n,t){if(1&n&&(v.Xb(0,"nz-timeline-item"),v.Xb(1,"p"),v.Xb(2,"span"),v.Xb(3,"strong",16),v.Xc(4," Changed From "),v.Wb(),v.Wb(),v.Vc(5,pa,3,2,"ng-container",7),v.Vc(6,ga,3,0,"ng-container",8),v.Xb(7,"span"),v.Xb(8,"strong",16),v.Xc(9," to \xa0\xa0"),v.Wb(),v.Wb(),v.Vc(10,ha,3,2,"ng-container",7),v.Vc(11,ma,3,0,"ng-container",8),v.Wb(),v.Xb(12,"p",17),v.Xc(13),v.Xb(14,"strong"),v.Xc(15),v.jc(16,"date"),v.Wb(),v.Wb(),v.Wb()),2&n){const n=t.$implicit,e=v.ic(2);v.Db(5),v.rc("ngForOf",null==n?null:n.previousState),v.Db(1),v.rc("ngIf",!(null!=n&&null!=n.previousState&&n.previousState.length)),v.Db(4),v.rc("ngForOf",null==n?null:n.changedToState),v.Db(1),v.rc("ngIf",!(null!=n&&null!=n.changedToState&&n.changedToState.length)),v.Db(2),v.Zc("Updated by: ",e.changedByMap[null==n?null:n.changedBy]," | "),v.Db(2),v.Yc(v.lc(16,6,(null==n?null:n.changedAt)+"Z","medium"))}}function Sa(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"nz-timeline"),v.Vc(2,va,17,9,"nz-timeline-item",7),v.Wb(),v.Ub()),2&n){const n=v.ic();v.Db(2),v.rc("ngForOf",null==n.staff?null:n.staff.programChangeHistory)}}function za(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div"),v.Xb(1,"button",18),v.ec("click",function(){return v.Lc(n),v.ic().handleClose()}),v.Xc(2,"Close"),v.Wb(),v.Wb()}}const Xa=function(){return[32,8]};let Ia=(()=>{class n{constructor(n){this._staffService=n,this.disableHistory=!0,this.showHistoryModal=!1}ngOnInit(){var n,t,e,i,s;const a=null===(e=null===(t=null===(n=this.staff)||void 0===n?void 0:n.programChangeHistory)||void 0===t?void 0:t.map(n=>n.changedBy))||void 0===e?void 0:e.join(",");0!=a.length&&(null===(s=null===(i=this.staff)||void 0===i?void 0:i.programChangeHistory)||void 0===s||s.reverse(),this._staffService.fetchNameByIds(a).subscribe(n=>{this.changedByMap=n,this.disableHistory=!1}))}showHistory(){this.showHistoryModal=!0}handleClose(){this.showHistoryModal=!1}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(on.a))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-program-participation"]],inputs:{staff:"staff"},decls:19,vars:10,consts:[[1,"container"],["nz-row",""],["nz-col","","nzSpan","18"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-typography","","nzType","secondary"],["nz-col",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-col","","nzSpan","4"],["nz-row","","nzAlign","middle","nzJustify","end",2,"height","100%"],["nz-button","","nzType","primary",3,"nzSize","disabled","click"],["nzTitle","Program Change History",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],[4,"nzModalFooter"],[3,"nzColor"],["nz-typography",""],["nz-typography","","nzType","secondary",1,"note-footer"],["nz-button","","nzType","primary",3,"click"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"div",1),v.Xb(2,"div",2),v.Xb(3,"div",3),v.Xb(4,"div",4),v.Xb(5,"label",5),v.Xc(6,"Physician participates in the following programs"),v.Wb(),v.Wb(),v.Wb(),v.Xb(7,"div",3),v.Xb(8,"div",6),v.Vc(9,ba,3,2,"ng-container",7),v.Vc(10,fa,3,0,"ng-container",8),v.Wb(),v.Wb(),v.Wb(),v.Xb(11,"div",9),v.Xb(12,"div",10),v.Xb(13,"div",6),v.Xb(14,"button",11),v.ec("click",function(){return t.showHistory()}),v.Xc(15," Show History "),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(16,"nz-modal",12),v.ec("nzVisibleChange",function(n){return t.showHistoryModal=n})("nzOnCancel",function(){return t.handleClose()}),v.Vc(17,Sa,3,1,"ng-container",13),v.Vc(18,za,3,0,"div",14),v.Wb(),v.Wb()),2&n&&(v.Db(3),v.rc("nzGutter",v.xc(8,Xa)),v.Db(4),v.rc("nzGutter",v.xc(9,Xa)),v.Db(2),v.rc("ngForOf",null==t.staff?null:t.staff.programs),v.Db(1),v.rc("ngIf",!(null!=t.staff&&null!=t.staff.programs&&t.staff.programs.length)),v.Db(4),v.rc("nzSize","middle")("disabled",t.disableHistory),v.Db(2),v.rc("nzVisible",t.showHistoryModal)("nzFooter",null))},directives:[P.c,P.a,T.a,a.p,a.q,_n.a,Mn.a,Cn.a,vt.a,vt.b,vt.c,et.a,W.a,W.b],pipes:[a.e],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1% 10px!important}.ant-tag-green[_ngcontent-%COMP%]{color:var(--light-black);font-weight:700;font-size:10px!important}"]}),n})();function ya(n,t){if(1&n&&(v.Xb(0,"tr"),v.Xb(1,"td"),v.Xc(2),v.jc(3,"tenantName"),v.Wb(),v.Xb(4,"td"),v.Xb(5,"span",5),v.Xc(6),v.Wb(),v.Wb(),v.Wb()),2&n){const n=t.$implicit;v.Db(2),v.Yc(v.kc(3,2,null==n?null:n.tenantId)),v.Db(4),v.Zc(" ",null==n?null:n.patientCount," ")}}const Da=function(){return["75%","25%"]};function Ta(n,t){if(1&n&&(v.Xb(0,"div",1),v.Xb(1,"nz-table",2,3),v.Xb(3,"tbody"),v.Vc(4,ya,7,4,"tr",4),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.Ic(2),t=v.ic();v.Db(1),v.rc("nzData",t.assignedTenantList)("nzShowPagination",!1)("nzPageSize",999999)("nzWidthConfig",v.xc(5,Da)),v.Db(3),v.rc("ngForOf",null==n?null:n.data)}}let Wa=(()=>{class n{constructor(){this.assignedTenantList=new Array}ngOnInit(){for(var n in console.log("Assigned Tenants : ",this.assignedTenants),this.assignedTenants)this.assignedTenantList.push({tenantId:n,patientCount:this.assignedTenants[n]})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Lb({type:n,selectors:[["app-assigned-tenants"]],inputs:{assignedTenants:"assignedTenants"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nzSize","small",3,"nzData","nzShowPagination","nzPageSize","nzWidthConfig"],["assignedTenantsTable",""],[4,"ngFor","ngForOf"],["nz-typography",""]],template:function(n,t){1&n&&v.Vc(0,Ta,5,6,"div",0),2&n&&v.rc("ngIf",null==t.assignedTenantList?null:t.assignedTenantList.length)},directives:[a.q,D.f,D.i,a.p,D.o,D.e,T.a],pipes:[Dt.a],styles:[".container[_ngcontent-%COMP%]{padding:1% 5px!important}*[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{padding:16px!important;pointer-events:none}td[_ngcontent-%COMP%]:first-child{font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}[_nghost-%COMP%]     .ant-table table{border-collapse:collapse}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:1px solid #f0f0f0}"]}),n})();function Pa(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" ",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0," Patients ")}}function Ca(n,t){1&n&&v.Sb(0,"td")}function Aa(n,t){if(1&n&&(v.Xb(0,"tr"),v.Xb(1,"td"),v.Xc(2),v.Wb(),v.Xb(3,"td"),v.Xb(4,"span",5),v.Xc(5),v.jc(6,"userLocations"),v.Wb(),v.Wb(),v.Vc(7,Pa,2,1,"td",6),v.Vc(8,Ca,1,0,"td",6),v.Sb(9,"td"),v.Wb()),2&n){const n=t.$implicit;v.Db(2),v.Yc(null==n?null:n.fullName),v.Db(3),v.Zc(" ",v.kc(6,4,null==n?null:n.locations)," "),v.Db(2),v.rc("ngIf","PATIENT"!==(null==n?null:n.type)),v.Db(1),v.rc("ngIf","PATIENT"===(null==n?null:n.type))}}const _a=function(){return["25%","25%","25%","25%"]};function Ma(n,t){if(1&n&&(v.Xb(0,"div",1),v.Xb(1,"nz-table",2,3),v.Xb(3,"tbody"),v.Vc(4,Aa,10,6,"tr",4),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.Ic(2),t=v.ic();v.Db(1),v.rc("nzData",t.assignedUsers)("nzShowPagination",!1)("nzPageSize",999999)("nzWidthConfig",v.xc(5,_a)),v.Db(3),v.rc("ngForOf",null==n?null:n.data)}}let Oa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-assigned-users"]],inputs:{role:"role",assignedUsers:"assignedUsers"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nzSize","small",3,"nzData","nzShowPagination","nzPageSize","nzWidthConfig"],["assignedUsersTable",""],[4,"ngFor","ngForOf"],["nz-typography",""],[4,"ngIf"]],template:function(n,t){1&n&&v.Vc(0,Ma,5,6,"div",0),2&n&&v.rc("ngIf",null==t.assignedUsers?null:t.assignedUsers.length)},directives:[a.q,D.f,D.i,a.p,D.o,D.e,T.a],pipes:[En.a],styles:[".container[_ngcontent-%COMP%]{padding:1% 5px!important}*[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{padding:16px!important;pointer-events:none}td[_ngcontent-%COMP%]:first-child{font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}[_nghost-%COMP%]     .ant-table table{border-collapse:collapse}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:1px solid #f0f0f0}"]}),n})();function Na(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc("",null==n||null==n.value?null:n.value.total," Total Patients")}}function Ra(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc("",null==n||null==n.value?null:n.value.total," Total Patient")}}function Ea(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc("",null==n||null==n.value?null:n.value.primary," Primary Patients")}}function wa(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc("",null==n||null==n.value?null:n.value.primary," Primary Patient")}}function xa(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc("",null==n||null==n.value?null:n.value.secondary," Secondary Patients")}}function Va(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc("",null==n||null==n.value?null:n.value.secondary," Secondary Patient")}}function ka(n,t){if(1&n&&(v.Xb(0,"tr"),v.Xb(1,"td"),v.Xc(2),v.jc(3,"userLocation"),v.Wb(),v.Vc(4,Na,2,1,"td",3),v.Vc(5,Ra,2,1,"td",3),v.Vc(6,Ea,2,1,"td",3),v.Vc(7,wa,2,1,"td",3),v.Vc(8,xa,2,1,"td",3),v.Vc(9,Va,2,1,"td",3),v.Sb(10,"td"),v.Wb()),2&n){const n=t.$implicit;v.Db(2),v.Yc(v.kc(3,7,null==n?null:n.key)),v.Db(2),v.rc("ngIf",(null==n||null==n.value?null:n.value.total)>1),v.Db(1),v.rc("ngIf",(null==n||null==n.value?null:n.value.total)<=1),v.Db(1),v.rc("ngIf",(null==n||null==n.value?null:n.value.primary)>1),v.Db(1),v.rc("ngIf",(null==n||null==n.value?null:n.value.primary)<=1),v.Db(1),v.rc("ngIf",(null==n||null==n.value?null:n.value.secondary)>1),v.Db(1),v.rc("ngIf",(null==n||null==n.value?null:n.value.secondary)<=1)}}const La=function(){return["20%","20%","20%","20%","20%"]};let Fa=(()=>{class n{constructor(){this.patientsBySites=new Map}ngOnInit(){var n;null===(n=this.assignedUsers)||void 0===n||n.forEach(n=>{var t;const e=null===(t=null==n?void 0:n.locations[0])||void 0===t?void 0:t.id;if(e)if(this.patientsBySites.get(e)){const t=this.patientsBySites.get(e).total+1,a=n.assignedStaffs.findIndex(n=>"PRIMARY"===n.assignedStaffType&&n.staffId===this.staffId);var i=this.patientsBySites.get(e).primary,s=this.patientsBySites.get(e).secondary;a>=0?i++:s++,this.patientsBySites.set(e,{total:t,primary:i,secondary:s})}else i=0,s=0,n.assignedStaffs.findIndex(n=>"PRIMARY"===n.assignedStaffType&&n.staffId===this.staffId)>=0?i++:s++,this.patientsBySites.set(e,{total:1,primary:i,secondary:s})})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Lb({type:n,selectors:[["app-assigned-site-users"]],inputs:{role:"role",staffId:"staffId",assignedUsers:"assignedUsers"},decls:5,vars:10,consts:[[1,"container"],["nzSize","small",3,"nzShowPagination","nzPageSize","nzWidthConfig","nzNoResult","nzFooter","nzTemplateMode"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"nz-table",1),v.Xb(2,"tbody"),v.Vc(3,ka,11,9,"tr",2),v.jc(4,"keyvalue"),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(1),v.rc("nzShowPagination",!1)("nzPageSize",999999)("nzWidthConfig",v.xc(9,La))("nzNoResult",null)("nzFooter",null)("nzTemplateMode",!0),v.Db(2),v.rc("ngForOf",v.kc(4,7,t.patientsBySites)))},directives:[D.f,D.i,a.p,D.o,D.e,a.q],pipes:[a.j,Rn.a],styles:[".container[_ngcontent-%COMP%]{padding:1% 5px!important}*[_ngcontent-%COMP%]{font-size:12px}td[_ngcontent-%COMP%]{padding:16px!important;pointer-events:none}td[_ngcontent-%COMP%]:first-child{font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--light-grey)}[_nghost-%COMP%]     .ant-table table{border-collapse:collapse}[_nghost-%COMP%]     .ant-table-tbody>tr>td{border-bottom:1px solid #f0f0f0}"]}),n})();const Ua=function(n,t){return{role:n,staffName:t}};function ja(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"div",9),v.Xb(2,"div",5),v.Sb(3,"app-icons",10),v.Wb(),v.Xc(4," \xa0 "),v.Xb(5,"strong"),v.Xc(6),v.jc(7,"translate"),v.Wb(),v.Xc(8," \xa0 "),v.Sb(9,"app-icons",8),v.Wb(),v.Ub()),2&n){const n=v.ic();v.Db(1),v.tc("routerLink","/staff/edit/",null==n.staff?null:n.staff.id,""),v.rc("queryParams",v.zc(6,Ua,n.role,null==n.staff?null:n.staff.fullName)),v.Db(2),v.rc("originalStyle",!0),v.Db(3),v.Yc(v.kc(7,4,"PATIENT.EDIT_PROFILE"))}}function Ga(n,t){if(1&n&&(v.Xb(0,"div",9),v.Xb(1,"div",5),v.Sb(2,"app-icons",10),v.Wb(),v.Xc(3," \xa0 "),v.Xb(4,"strong"),v.Xc(5,"Assign Physicians"),v.Wb(),v.Xc(6," \xa0 "),v.Sb(7,"app-icons",8),v.Wb()),2&n){const n=v.ic(2);v.tc("routerLink","/staff/assign/physicians/",null==n.staff?null:n.staff.id,""),v.rc("queryParams",v.zc(3,Ua,n.role,null==n.staff?null:n.staff.fullName)),v.Db(2),v.rc("originalStyle",!0)}}function Ya(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Ga,8,6,"div",3),v.Ub()),2&n){const n=v.ic();v.Db(1),v.rc("ngIf","MONITORING_STAFF"===n.role)}}function Ha(n,t){if(1&n&&(v.Xb(0,"div",9),v.Xb(1,"div",5),v.Sb(2,"app-icons",10),v.Wb(),v.Xc(3," \xa0 "),v.Xb(4,"strong"),v.Xc(5,"Assign Monitoring Staff"),v.Wb(),v.Xc(6," \xa0 "),v.Sb(7,"app-icons",8),v.Wb()),2&n){const n=v.ic();v.tc("routerLink","/staff/assign/monitoring-staff/",null==n.staff?null:n.staff.id,""),v.rc("queryParams",v.zc(3,Ua,n.role,null==n.staff?null:n.staff.fullName)),v.Db(2),v.rc("originalStyle",!0)}}const Ba=function(){return[32,32]};let $a=(()=>{class n{constructor(n){this._notificationsService=n}disableStaff(){this._notificationsService.warning("Profile Deactivation","This action is disabled, please contact support!")}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-quick-actions"]],inputs:{staff:"staff",role:"role"},decls:18,vars:12,consts:[[1,"container"],["nz-row","",3,"nzGutter"],[4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams",4,"ngIf"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"click"],[1,"profile-icon"],["name","profileDelete","size","32px",3,"originalStyle"],["nz-typography","","nzType","danger"],["name","arrowRight"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",3,"routerLink","queryParams"],["name","profileEdit","size","32px",3,"originalStyle"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"h4"),v.Xc(2),v.jc(3,"translate"),v.Wb(),v.Xb(4,"div",1),v.Vc(5,ja,10,9,"ng-container",2),v.Vc(6,Ya,2,1,"ng-container",2),v.Vc(7,Ha,8,6,"div",3),v.Xb(8,"div",4),v.ec("click",function(){return t.disableStaff()}),v.Xb(9,"div",5),v.Sb(10,"app-icons",6),v.Wb(),v.Xc(11," \xa0 "),v.Xb(12,"strong",7),v.Xb(13,"label",7),v.Xc(14),v.jc(15,"translate"),v.Wb(),v.Wb(),v.Xc(16," \xa0 "),v.Sb(17,"app-icons",8),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(2),v.Yc(v.kc(3,7,"PATIENT.OTHER_ACCOUNT_ACTIONS")),v.Db(2),v.rc("nzGutter",v.xc(11,Ba)),v.Db(1),v.rc("ngIf",null==t.staff?null:t.staff.active),v.Db(1),v.rc("ngIf",null==t.staff?null:t.staff.active),v.Db(1),v.rc("ngIf","PHYSICIAN"===t.role),v.Db(3),v.rc("originalStyle",!0),v.Db(4),v.Yc(v.kc(15,9,"PATIENT.DEACTIVATE_PROFILE")))},directives:[P.c,a.q,P.a,dn.a,T.a,S.h],pipes:[bn.a],styles:["*[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{width:100%;height:175px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey)}h4[_ngcontent-%COMP%]{padding:16px 8px 0;font-weight:700;margin-bottom:15px}[_nghost-%COMP%]     .ant-col-6{cursor:pointer}.profile-icon[_ngcontent-%COMP%]{padding:8px;background-color:#e9e9e9;border-radius:50%;height:50px;width:50px;text-align:center;display:inline-block}strong[_ngcontent-%COMP%]{line-height:40px}app-icons[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{vertical-align:text-bottom;display:inline-block;height:70%}app-icons[_ngcontent-%COMP%]{line-height:50px}.profile-icon[_ngcontent-%COMP%]   app-icons[_ngcontent-%COMP%]{vertical-align:unset}@media screen and (orientation:portrait){.container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;height:-webkit-fit-content}}"]}),n})();const qa=["permissionsHost"];function Za(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-divider"),v.Xb(2,"h4"),v.Xc(3,"Program Participation"),v.Wb(),v.Sb(4,"app-staff-program-participation",7),v.Ub()),2&n){const n=v.ic(2);v.Db(4),v.rc("staff",null==n.staff?null:n.staff.user)}}function Qa(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-divider"),v.Xb(2,"h4"),v.Xc(3,"Assigned Sub Tenant Patients"),v.Wb(),v.Sb(4,"app-assigned-tenants",9),v.Ub()),2&n){const n=v.ic(3);v.Db(4),v.rc("assignedTenants",null==n.staff?null:n.staff.tenantPatientCount)}}function Ka(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Qa,5,1,"ng-container",2),v.Ub()),2&n){const n=v.ic(2);v.Db(1),v.rc("ngIf","PHYSICIAN"===n.role||"MONITORING_STAFF"===n.role)}}function Ja(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-divider"),v.Xb(2,"h4"),v.Xc(3,"Assigned Monitoring Staff"),v.Wb(),v.Sb(4,"app-staff-assigned-users",10),v.Ub()),2&n){const n=v.ic(2);v.Db(4),v.rc("role",n.role)("assignedUsers",null==n.staff?null:n.staff.assignedUsers.MONITORING_STAFF)}}function no(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-divider"),v.Xb(2,"h4"),v.Xc(3,"Assigned Physicians"),v.Wb(),v.Sb(4,"app-staff-assigned-users",10),v.Ub()),2&n){const n=v.ic(2);v.Db(4),v.rc("role",n.role)("assignedUsers",null==n.staff?null:n.staff.assignedToUsers.PHYSICIAN)}}function to(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-divider"),v.Xb(2,"h4"),v.Xc(3,"Assigned Patients"),v.Wb(),v.Sb(4,"app-assigned-site-users",11),v.Ub()),2&n){const n=v.ic(2);v.Db(4),v.rc("role",n.role)("assignedUsers",null==n.staff?null:n.staff.assignedToUsers.PATIENT)("staffId",n.staffId)}}function eo(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"h4"),v.Xc(2),v.jc(3,"translate"),v.Wb(),v.Sb(4,"app-staff-basic-info",6),v.Sb(5,"nz-divider"),v.Xb(6,"h4"),v.Xc(7),v.jc(8,"translate"),v.Wb(),v.Sb(9,"app-staff-organisation-info",7),v.Vc(10,Za,5,1,"ng-container",2),v.Vc(11,Ka,2,1,"ng-container",8),v.Vc(12,Ja,5,2,"ng-container",2),v.Vc(13,no,5,2,"ng-container",2),v.Vc(14,to,5,3,"ng-container",2),v.Ub()),2&n){const n=v.ic();v.Db(2),v.Yc(v.kc(3,9,"COMMON.BASICINFO")),v.Db(2),v.rc("role",n.role)("staff",null==n.staff?null:n.staff.user),v.Db(3),v.Yc(v.kc(8,11,"PATIENT.ORGANIZATIONAL_INFORMATION")),v.Db(2),v.rc("staff",null==n.staff?null:n.staff.user),v.Db(1),v.rc("ngIf","PHYSICIAN"===n.role),v.Db(2),v.rc("ngIf","PHYSICIAN"===n.role&&(null==n.staff||null==n.staff.assignedUsers.MONITORING_STAFF?null:n.staff.assignedUsers.MONITORING_STAFF.length)),v.Db(1),v.rc("ngIf","PHYSICIAN"!==n.loggedInUserRole&&"MONITORING_STAFF"===n.role&&(null==n.staff||null==n.staff.assignedToUsers.PHYSICIAN?null:n.staff.assignedToUsers.PHYSICIAN.length)),v.Db(1),v.rc("ngIf","MONITORING_STAFF"===n.role&&(null==n.staff||null==n.staff.assignedToUsers.PATIENT?null:n.staff.assignedToUsers.PATIENT.length))}}function io(n,t){1&n&&v.Sb(0,"nz-divider")}function so(n,t){}function ao(n,t){if(1&n&&v.Sb(0,"app-staff-quick-actions",14),2&n){const n=v.ic(3);v.rc("staff",null==n.staff?null:n.staff.user)("role",n.role)}}function oo(n,t){if(1&n&&(v.Vb(0),v.Vc(1,ao,1,2,"app-staff-quick-actions",13),v.Ub()),2&n){const n=v.ic(2);v.Db(1),v.rc("ngIf",null==n.staff?null:n.staff.user)}}const lo=function(){return["EDIT_PHYSICIAN","EDIT_MONITORING_STAFF","ASSIGN_STAFF","ASSIGN_MONITORING_STAFF_PHYSICIAN"]};function ro(n,t){1&n&&(v.Vb(0),v.Vc(1,oo,2,1,"ng-container",12),v.Ub()),2&n&&(v.Db(1),v.rc("anyFeaturePermitted",v.xc(1,lo)))}let co=(()=>{class n extends h.a{constructor(n,t,e,i){super(),this._staffService=n,this._activatedRoute=t,this._router=e,this._componentFactoryResolver=i,this.staffId=this._activatedRoute.snapshot.params.id,this.role=this._activatedRoute.snapshot.queryParamMap.get("role"),this.status=this._activatedRoute.snapshot.queryParamMap.get("status"),this.loggedInUserRole=localStorage.getItem("loggedInUserRole");const s=this._activatedRoute.snapshot.queryParamMap.get("staffName")||"Details";this._routeHelperService.setTitleForRoute(s)}ngOnInit(){this.getStaffDetails()}initPermissionComponent(){var n;let t=this._componentFactoryResolver.resolveComponentFactory(Ki);null===(n=this.viewContainerRef)||void 0===n||n.clear(),this.permissionsComponentRef=this.viewContainerRef.createComponent(t),this.permissionsComponentRef.instance.role=this.role,this.permissionsComponentRef.instance.userId=this.staffId,this.permissionsComponentRef.instance.preview=!0,this.permissionsComponentRef.instance.userMode="EDIT",this.permissionsComponentRef.instance.roleId=this.roleId,this.permissionsComponentRef.instance.roleName=this.roleName,this.permissionsComponentRef.instance.staffActive=this.staff.user.active}getStaffDetails(){this.loading=!0,this._staffService.fetchStaffMemberById(this.staffId,this.staffId,this.status).subscribe(n=>{this.staff=n,this.loading=!1,this.roleName=n.user.roles[0].name,this.roleId=n.user.roles[0].id,console.log("Role id 1\t: ",this.roleId),this.initPermissionComponent()})}editProfile(){var n,t;this._router.navigate(["staff/edit",this.staffId],{queryParams:{role:this.role,staffName:null===(t=null===(n=this.staff)||void 0===n?void 0:n.user)||void 0===t?void 0:t.fullName}})}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(on.a),v.Rb(S.a),v.Rb(S.g),v.Rb(v.j))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-staff-view"]],viewQuery:function(n,t){if(1&n&&v.ed(qa,1,v.R),2&n){let n;v.Hc(n=v.fc())&&(t.viewContainerRef=n.first)}},features:[v.Ab],decls:10,vars:4,consts:[[1,"container"],["nzTip","Loading...",2,"min-height","50vh",3,"nzSpinning"],[4,"ngIf"],["id","permissions","nz-row","","nzGutter","32"],["nz-col","","nzSpan","24"],["permissionsHost",""],[3,"role","staff"],[3,"staff"],[4,"isAccessAcrossTenantEnabled"],[3,"assignedTenants"],[3,"role","assignedUsers"],[3,"role","assignedUsers","staffId"],[4,"anyFeaturePermitted"],[3,"staff","role",4,"ngIf"],[3,"staff","role"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Xb(1,"nz-spin",1),v.Vc(2,eo,15,13,"ng-container",2),v.Vb(3),v.Vc(4,io,1,0,"nz-divider",2),v.Xb(5,"div",3),v.Xb(6,"div",4),v.Vc(7,so,0,0,"ng-template",null,5,v.Wc),v.Wb(),v.Wb(),v.Ub(),v.Wb(),v.Wb(),v.Vc(9,ro,2,2,"ng-container",2)),2&n&&(v.Db(1),v.rc("nzSpinning",t.loading),v.Db(1),v.rc("ngIf",!!t.staff),v.Db(2),v.rc("ngIf",!!t.staff),v.Db(5),v.rc("ngIf","TENANT_ADMIN"==t.loggedInUserRole))},directives:[ks.a,a.q,P.c,P.a,aa,A.a,da,St.a,Ia,Wa,Oa,Fa,pt.a,$a],pipes:[bn.a],styles:[".container[_ngcontent-%COMP%]{padding:30px 20px!important;width:90%}h4[_ngcontent-%COMP%]{padding:8px 8px 0;font-weight:700}.ant-divider-horizontal[_ngcontent-%COMP%]{border:1px solid #a8a8a8;opacity:.3}p[_ngcontent-%COMP%]{margin-left:10px}#permissions[_ngcontent-%COMP%]{margin-left:-8px!important}"]}),n})();function uo(n,t){1&n&&(v.Vb(0),v.Xc(1,", "),v.Ub())}function bo(n,t){if(1&n&&(v.Xb(0,"strong"),v.Xc(1),v.jc(2,"titlecase"),v.jc(3,"userLocation"),v.Vc(4,uo,2,0,"ng-container",11),v.Wb()),2&n){const n=t.$implicit,e=t.index,i=v.ic(2);v.Db(1),v.Zc(" ",v.kc(2,2,v.kc(3,4,null==n?null:n.id)),""),v.Db(3),v.rc("ngIf",e!==(null==i.staff||null==i.staff.locations?null:i.staff.locations.length)-1)}}function fo(n,t){if(1&n){const n=v.Yb();v.Xb(0,"button",12),v.ec("click",function(t){return v.Lc(n),v.ic(2).filterStaff(t)}),v.Sb(1,"app-icons",13),v.Wb()}2&n&&(v.Db(1),v.rc("originalStyle",!0))}function po(n,t){if(1&n&&(v.Vb(0),v.Sb(1,"nz-empty",14),v.Ub()),2&n){const n=v.ic(2);v.Db(1),v.rc("nzNotFoundContent",n.searchKey?"No monitoring staff available matching your search":"No monitoring staff found")}}function go(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" 0",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount)||0," ")}}function ho(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" ",null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount," ")}}function mo(n,t){1&n&&(v.Vb(0),v.Xc(1," Physician "),v.Ub())}function vo(n,t){1&n&&(v.Vb(0),v.Xc(1," Physicians "),v.Ub())}function So(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" 0",(null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0," ")}}function zo(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" ",null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount," ")}}function Xo(n,t){1&n&&(v.Vb(0),v.Xc(1," Active Patient "),v.Ub())}function Io(n,t){1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"translate"),v.Ub()),2&n&&(v.Db(1),v.Zc(" Active ",v.kc(2,1,"COMMON.PATIENTS")," "))}const yo=function(n){return{border:n}},Do=function(n){return[n]};function To(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"div",15),v.Xb(2,"div",16),v.Xb(3,"div",17),v.Xb(4,"label",18),v.ec("ngModelChange",function(n){return t.$implicit.selected=n}),v.Wb(),v.Wb(),v.Wb(),v.Xb(5,"h5",19),v.Xb(6,"strong",20),v.Xc(7),v.Wb(),v.Wb(),v.Xb(8,"h5",21),v.jc(9,"userLocations"),v.Xc(10),v.jc(11,"userLocations"),v.Wb(),v.Xb(12,"div",22),v.Xb(13,"div",23),v.Xb(14,"span",24),v.Vc(15,go,2,1,"ng-container",11),v.Vc(16,ho,2,1,"ng-container",11),v.Wb(),v.Xb(17,"span",25),v.Vc(18,mo,2,0,"ng-container",11),v.Vc(19,vo,2,0,"ng-container",11),v.Wb(),v.Wb(),v.Xb(20,"div",23),v.Xb(21,"span",24),v.Vc(22,So,2,1,"ng-container",11),v.Vc(23,zo,2,1,"ng-container",11),v.Wb(),v.Xb(24,"span",25),v.Vc(25,Xo,2,0,"ng-container",11),v.Vc(26,Io,3,3,"ng-container",11),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("ngClass",null!=n&&n.assigned?"assigned shadowed":"")("ngStyle",v.yc(27,yo,null!=n&&n.selected?"2px solid #a7c853":"2px solid #ffffff")),v.Db(3),v.rc("nzDisabled",n.assigned)("ngModel",n.selected)("nzValue",n.id),v.Db(1),v.rc("nzTooltipTitle",(null==n?null:n.fullName)||"N/A"),v.Db(1),v.rc("ngClass",v.yc(29,Do,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.Zc(" ",(null==n?null:n.fullName)||"N/A"," "),v.Db(1),v.sc("nzTooltipTitle",v.kc(9,23,null==n?null:n.locations)),v.rc("ngClass",v.yc(31,Do,null!=n&&n.assigned?"assigned":"")),v.Db(2),v.Zc(" ",v.kc(11,25,null==n?null:n.locations)," "),v.Db(4),v.rc("ngClass",v.yc(33,Do,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",((null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount)||0)<10),v.Db(1),v.rc("ngIf",((null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount)||0)>=10),v.Db(1),v.rc("ngClass",v.yc(35,Do,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",1===((null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount)||0)),v.Db(1),v.rc("ngIf",1!==((null==n||null==n.clinicianState?null:n.clinicianState.assignedPhysicianCount)||0)),v.Db(2),v.rc("ngClass",v.yc(37,Do,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)<10),v.Db(1),v.rc("ngIf",((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)>=10),v.Db(1),v.rc("ngClass",v.yc(39,Do,null!=n&&n.assigned?"assigned":"")),v.Db(1),v.rc("ngIf",1===((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0)),v.Db(1),v.rc("ngIf",1!==((null==n||null==n.clinicianState?null:n.clinicianState.assignedPatientCount)||0))}}function Wo(n,t){if(1&n){const n=v.Yb();v.Xb(0,"div",1),v.Xb(1,"div",2),v.Xb(2,"div",3),v.Xb(3,"h4",4),v.Xc(4),v.Wb(),v.Xb(5,"p",4),v.Xc(6," Assigining a minimum of one staff member is important for the staff member to actively view and manage the assigned patients. "),v.Sb(7,"br"),v.Sb(8,"br"),v.Vb(9),v.Xc(10," You can assign one or multiple monitoring staff from the "),v.Vc(11,bo,5,6,"strong",5),v.Xc(12," sites. They will be assigned as a monitoring staff to all the patients under the selected sites. "),v.Ub(),v.Sb(13,"br"),v.Sb(14,"br"),v.Vb(15),v.Xb(16,"strong"),v.Xc(17,"Note: "),v.Wb(),v.Xc(18,"Once assigned, we will be unable to un-assign the staff from these physicians at these locations. "),v.Ub(),v.Wb(),v.Wb(),v.Xb(19,"div",6),v.Xb(20,"nz-input-group",7),v.Xb(21,"input",8),v.ec("ngModelChange",function(t){return v.Lc(n),v.ic().searchKey=t})("ngModelChange",function(t){return v.Lc(n),v.ic().filterStaff(t)}),v.jc(22,"translate"),v.Wb(),v.Wb(),v.Vc(23,fo,2,1,"ng-template",null,9,v.Wc),v.Wb(),v.Wb(),v.Xb(25,"div",10),v.Vc(26,po,2,1,"ng-container",11),v.Vc(27,To,27,41,"ng-container",5),v.Wb(),v.Wb()}if(2&n){const n=v.Ic(24),t=v.ic();v.Db(4),v.Zc("Assign monitoring staff to ",null==t.staff?null:t.staff.fullName,""),v.Db(7),v.rc("ngForOf",null==t.staff?null:t.staff.locations),v.Db(9),v.rc("nzAddOnAfter",n),v.Db(1),v.sc("placeholder",v.kc(22,7,"COMMON.SEARCH")),v.rc("ngModel",t.searchKey),v.Db(5),v.rc("ngIf",!(null!=t.filteredStaff&&t.filteredStaff.length)),v.Db(1),v.rc("ngForOf",t.filteredStaff)}}let Po=(()=>{class n extends h.a{constructor(n,t,e,i){super(),this._router=n,this._activatedRoute=t,this._staffService=e,this._notificationsService=i,this.role=this._activatedRoute.snapshot.queryParamMap.get("role"),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Tn.filter)(n=>!!n),Object(Wn.takeUntil)(this.unsubscribed)).subscribe(()=>this.assignStaff())}ngOnInit(){this.getStaffById()}getStaffById(){this._staffService.fetchStaffMemberById(this._activatedRoute.snapshot.params.id).subscribe(n=>{this.staff=null==n?void 0:n.user,this.assignedStaff=null==n?void 0:n.assignedUsers[Dn.a.MONITORING_STAFF],this.getAssignableStaff()})}checkIfStaffAssigned(){var n;null===(n=this.assignedStaff)||void 0===n||n.forEach(n=>{const t=this.filteredStaff.find(t=>t.id===n.id);t&&(t.selected=!0,t.assigned=!0)})}getAssignableStaff(){const n=this._activatedRoute.snapshot.params.id;let t=this._activatedRoute.snapshot.queryParamMap.get("role");t=Dn.a.PHYSICIAN===t?Dn.a.MONITORING_STAFF:Dn.a.PHYSICIAN,this._staffService.fetchAssignableStaffMembersById(n,t).subscribe(n=>{this.filteredStaff=n,this.staffMembers=JSON.parse(JSON.stringify(n)),this.checkIfStaffAssigned()})}assignStaff(){const n={};this.filteredStaff.filter(n=>n.selected).filter(n=>{var t,e;return!(null===(t=this.assignedStaff)||void 0===t?void 0:t.length)||-1===(null===(e=this.assignedStaff)||void 0===e?void 0:e.findIndex(t=>t.id===n.id))}).forEach(t=>{n[null==t?void 0:t.id]=this.staff.id}),this._staffService.assignStaffMembers({assignmentMap:n,assignTo:this.role}).subscribe(n=>{n&&this._notificationsService.success("Assignment",(null==n?void 0:n.message)||"Assigned"),this._router.navigate(["/staff/view/",this.staff.id],{queryParams:{role:this.role}})})}filterStaff(n){if(!n)return this.filteredStaff=[...this.staffMembers],void this.checkIfStaffAssigned();this.filteredStaff=this.staffMembers.filter(t=>{var e,i;return null===(i=null===(e=null==t?void 0:t.fullName)||void 0===e?void 0:e.toLowerCase())||void 0===i?void 0:i.includes(null==n?void 0:n.toLowerCase())}),this.checkIfStaffAssigned()}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.g),v.Rb(S.a),v.Rb(on.a),v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-monitoring-staff-assigner"]],features:[v.Ab],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","17"],["nz-typography",""],[4,"ngFor","ngForOf"],["nz-col","","nzSpan","7"],["nzSearch","",3,"nzAddOnAfter"],["nz-input","",1,"search",3,"placeholder","ngModel","ngModelChange"],["searchIconButton",""],["id","caretaker-grid"],[4,"ngIf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["size","14px","name","search",3,"originalStyle"],[3,"nzNotFoundContent"],[1,"grid-cell",3,"ngClass","ngStyle"],["nz-row",""],["nz-col","","nzSpan","2","nzOffset","22"],["nz-checkbox","",3,"nzDisabled","ngModel","nzValue","ngModelChange"],["nz-typography","","nz-tooltip","",1,"name",3,"nzTooltipTitle"],[3,"ngClass"],["nz-typography","","nzType","secondary","nzEllipsis","","nz-tooltip","",1,"description",3,"ngClass","nzTooltipTitle"],["nz-row","","nzGutter","0"],["nz-col","","nzSpan","12"],["nz-typography","","nzType","success",1,"count",3,"ngClass"],["nz-typography","",1,"detail",3,"ngClass"]],template:function(n,t){1&n&&v.Vc(0,Wo,28,9,"div",0),2&n&&v.rc("ngIf",t.staff)},directives:[a.q,P.c,P.a,T.a,a.p,Cn.a,An.c,An.b,c.d,c.u,c.x,_n.a,Mn.a,dn.a,On.b,a.o,a.r,Nn.a,un.d],pipes:[bn.a,a.A,Rn.a,En.a],styles:[".container[_ngcontent-%COMP%]{margin-top:10px}p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.search[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border:none;height:30px;outline:none}[_nghost-%COMP%]     .ant-input-group-addon{background-color:transparent}[_nghost-%COMP%]     .ant-input-search>.ant-input-group>.ant-input-group-addon .ant-input-search-button{padding:5px 10px;border-radius:5px;height:30px}[_nghost-%COMP%]     .ant-input-group-wrapper{width:100%}#caretaker-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.grid-cell[_ngcontent-%COMP%]:first-child, .grid-cell[_ngcontent-%COMP%]:nth-child(5n){margin-left:0}.grid-cell[_ngcontent-%COMP%]:nth-child(4n){margin-right:0}.grid-cell[_ngcontent-%COMP%]{flex:calc((100vw - 250px)/4);height:110px;-ms-flex:auto;margin:5px;flex-grow:0;border-radius:5px;padding:10px 5px 0 15px;background:var(--neutral-color) 0 0 no-repeat padding-box}.name[_ngcontent-%COMP%]{overflow:hidden;display:grid;width:80%;margin-top:-20px}.description[_ngcontent-%COMP%]{font-size:12px;line-height:2;margin-bottom:0;width:35ch;font-weight:400}.count[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--primary-color)}.detail[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;line-height:4}.detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.assigned[_ngcontent-%COMP%]{pointer-events:none;color:#8a8a8a;border:none!important;background-color:#eee!important}.shadowed[_ngcontent-%COMP%]{box-shadow:0 3px 5px #d3d3d3;border:2px solid #eee}.shadowed[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:#afafaf}nz-empty[_ngcontent-%COMP%]{width:100%;margin-top:100px}h2[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner{background:gray 0 0 no-repeat padding-box;opacity:.5}[_nghost-%COMP%]     .ant-checkbox-disabled .ant-checkbox-inner:after{border-color:var(--neutral-color)!important}"]}),n})();var Co=e("0W7X");const Ao={Listing:{header:!0,title:"Staff",searchEnabled:!0,primaryAction:{},secondaryAction:{},multiAction:{title:"Add Staff",permissions:[Co.a.ADD_PHYSICIAN,Co.a.ADD_MONITORING_STAFF,Co.a.ADD_ENROLMENT_STAFF],actions:[{title:"Physician",value:"PHYSICIAN",permissions:[Co.a.ADD_PHYSICIAN]},{title:"Bulk Add Physician",value:"BULK_PHYSICIAN",permissions:[Co.a.ADD_PHYSICIAN]},{title:"Monitoring Staff",value:"MONITORING_STAFF",permissions:[Co.a.ADD_MONITORING_STAFF]},{title:"Enrolment Staff",value:"ENROLMENT_STAFF",permissions:[Co.a.ADD_ENROLMENT_STAFF]},{title:"Manager",value:"MANAGER_STAFF",permissions:[Co.a.ADD_MANAGER_STAFF]}],enabled:!0},privileges:[]},Form:{header:!0,title:"Staff",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[Co.a.ADD_MONITORING_STAFF,Co.a.VIEW_MONITORING_STAFF],showTenantToggle:!1},Detail:{header:!0,title:"Details",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[Co.a.VIEW_STAFF],showTenantToggle:!1},PhysicianAssigner:{header:!0,title:"Staff actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[Co.a.VIEW_STAFF,Co.a.EDIT_STAFF],showTenantToggle:!1},MonitoringStaffAssigner:{header:!0,title:"Staff actions",searchEnabled:!1,primaryAction:{title:"Save & Proceed",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[Co.a.VIEW_STAFF,Co.a.EDIT_STAFF],showTenantToggle:!1},StaffDashboardWidgets:{header:!0,title:"Dashboard Widgets",searchEnabled:!1,primaryAction:{title:"",permissions:[],enabled:!1},secondaryAction:{},multiAction:{},privileges:[Co.a.VIEW_STAFF],showTenantToggle:!1},Audit:{header:!0,title:"Audit",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[Co.a.VIEW_STAFF],showTenantToggle:!1},WorkList:{header:!0,title:"Staff Work List",searchEnabled:!0,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[Co.a.VIEW_WORK_LIST],showTenantToggle:!0},BulkUpload:{header:!0,title:"Bulk Upload",searchEnabled:!1,primaryAction:{title:"Upload",permissions:[],enabled:!0},secondaryAction:{title:"Download Template",permissions:[],enabled:!0},multiAction:{},privileges:[Co.a.ADD_PHYSICIAN]},RoleForm:{header:!0,title:"Role",searchEnabled:!1,primaryAction:{title:"Save",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!1},ListRoles:{header:!0,title:"Roles",searchEnabled:!1,primaryAction:{title:"Add Role",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!0,subTenantToggleMode:"SINGLE"},EditRoleForm:{header:!0,title:"Edit Role",searchEnabled:!1,primaryAction:{title:"Save",permissions:[],enabled:!0},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!1}};var _o=e("jG/O"),Mo=e("H/XM"),Oo=e("Gi1d"),No=e("IVUT"),Ro=e("r0o6"),Eo=e("YRM7"),wo=e("Ff2k"),xo=e("KupA"),Vo=e("BQXE");function ko(n,t){1&n&&(v.Xb(0,"strong"),v.Xc(1," Qualification engine is running, please wait for it to complete before continuing... "),v.Wb())}function Lo(n,t){if(1&n&&(v.Xb(0,"strong"),v.Xc(1),v.Wb()),2&n){const n=v.ic(2);v.Db(1),v.Zc(" Qualification engine is running for ",null==n.qualificationState?null:n.qualificationState.numberOfUsers," patient(s), please wait for it to complete before continuing... ")}}function Fo(n,t){if(1&n){const n=v.Yb();v.Vc(0,ko,2,0,"strong",15),v.Vc(1,Lo,2,1,"strong",15),v.Xc(2," \xa0\xa0 "),v.Xb(3,"app-icons",16),v.ec("click",function(){return v.Lc(n),v.ic().getStaffDetails()}),v.Wb()}if(2&n){const n=v.ic();v.rc("ngIf",0===(null==n.qualificationState?null:n.qualificationState.numberOfUsers)),v.Db(1),v.rc("ngIf",0!==(null==n.qualificationState?null:n.qualificationState.numberOfUsers))}}function Uo(n,t){if(1&n&&v.Sb(0,"nz-alert",17),2&n){v.ic();const n=v.Ic(1);v.rc("nzMessage",n)}}function jo(n,t){1&n&&(v.Xb(0,"th"),v.Xc(1," Sub Tenant "),v.Wb())}function Go(n,t){if(1&n&&(v.Xb(0,"span",25),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.tc("routerLink","/leads/details/",null==n||null==n.lead?null:n.lead.id,""),v.Db(1),v.ad(" ",null==n||null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.firstName," ",null==n||null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.lastName," ")}}function Yo(n,t){if(1&n&&(v.Xb(0,"span",25),v.Xc(1),v.Wb()),2&n){const n=v.ic().$implicit;v.tc("routerLink","/patient/view/",null==n||null==n.patient?null:n.patient.id,""),v.Db(1),v.Zc(" ",null==n||null==n.patient?null:n.patient.fullName," ")}}function Ho(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"tenantName"),v.Ub()),2&n){const n=v.ic(2).$implicit;v.Db(1),v.Zc(" ",v.kc(2,1,null==n||null==n.patient?null:n.patient.tenantId)," ")}}function Bo(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.jc(2,"tenantName"),v.Ub()),2&n){const n=v.ic(2).$implicit;v.Db(1),v.Zc(" ",v.kc(2,1,null==n||null==n.lead?null:n.lead.tenantId)," ")}}function $o(n,t){if(1&n&&(v.Xb(0,"td"),v.Vc(1,Ho,3,3,"ng-container",15),v.Vc(2,Bo,3,3,"ng-container",15),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.rc("ngIf","PATIENT"===(null==n?null:n.userType)),v.Db(1),v.rc("ngIf","LEAD"===(null==n?null:n.userType))}}function qo(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xc(1," \xa0 "),v.Xb(2,"a",27),v.ec("nzOnConfirm",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic().initiateDischarge(null==t?null:t.id,null==t?null:t.userType)}),v.Sb(3,"app-icons",28),v.Wb(),v.Ub()}}function Zo(n,t){if(1&n&&(v.Vb(0),v.Vc(1,qo,4,0,"ng-container",15),v.jc(2,"filterList"),v.Ub()),2&n){const n=v.ic(2).$implicit;v.Db(1),v.rc("ngIf",!v.mc(2,1,"type",null==n?null:n.workListItems,"DISCHARGE_FROM_PROGRAM"))}}function Qo(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xc(1," \xa0 "),v.Xb(2,"a",29),v.ec("nzOnConfirm",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic().dischargeFromProgram(null==t?null:t.id,null==t||null==t.patient?null:t.patient.fullName)}),v.Sb(3,"app-icons",30),v.Wb(),v.Ub()}}const Ko=function(){return["DISCHARGE_FROM_PROGRAM_MANAGEMENT"]};function Jo(n,t){1&n&&(v.Vb(0),v.Vc(1,Qo,4,0,"ng-container",26),v.Ub()),2&n&&(v.Db(1),v.rc("isFeaturePermitted",v.xc(1,Ko)))}const nl=function(){return["PATIENT_DISCHARGE_FROM_PROGRAM_MANAGEMENT"]};function tl(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Zo,3,5,"ng-container",26),v.Vc(2,Jo,2,2,"ng-container",15),v.jc(3,"filterList"),v.Ub()),2&n){const n=v.ic().$implicit;v.Db(1),v.rc("isFeaturePermitted",v.xc(6,nl)),v.Db(1),v.rc("ngIf",v.mc(3,2,"type",null==n?null:n.workListItems,"DISCHARGE_FROM_PROGRAM"))}}function el(n,t){if(1&n){const n=v.Yb();v.Xb(0,"a",36),v.ec("click",function(){v.Lc(n);const t=v.ic(2).$implicit,e=v.ic().$implicit;return v.ic().resolve(t,e)}),v.Xc(1," Patient Agrees "),v.Wb()}}function il(n,t){if(1&n){const n=v.Yb();v.Xb(0,"a",37),v.ec("nzOnConfirm",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic().dischargeFromProgram(null==t?null:t.id,null==t||null==t.patient?null:t.patient.fullName)}),v.Xc(1," Discharge "),v.Wb()}}const sl=function(){return["RESOLVE_WORK_LIST_ITEM"]};function al(n,t){1&n&&(v.Vb(0),v.Vc(1,el,2,0,"a",34),v.Xc(2," \xa0 "),v.Vc(3,il,2,0,"a",35),v.Ub()),2&n&&(v.Db(1),v.rc("isFeaturePermitted",v.xc(2,sl)),v.Db(2),v.rc("isFeaturePermitted",v.xc(3,Ko)))}function ol(n,t){if(1&n){const n=v.Yb();v.Xb(0,"a",36),v.ec("click",function(){v.Lc(n);const t=v.ic(2).$implicit,e=v.ic().$implicit;return v.ic().resolve(t,e)}),v.Xc(1," Revoke "),v.Wb()}}function ll(n,t){if(1&n){const n=v.Yb();v.Xb(0,"a",37),v.ec("nzOnConfirm",function(){v.Lc(n);const t=v.ic(3).$implicit;return v.ic().dischargeFromProgram(null==t?null:t.id,null==t||null==t.patient?null:t.patient.fullName)}),v.Xc(1," Discharge "),v.Wb()}}function rl(n,t){1&n&&(v.Vb(0),v.Vc(1,ol,2,0,"a",34),v.Xc(2," \xa0 "),v.Vc(3,ll,2,0,"a",35),v.Ub()),2&n&&(v.Db(1),v.rc("isFeaturePermitted",v.xc(2,sl)),v.Db(2),v.rc("isFeaturePermitted",v.xc(3,Ko)))}function cl(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit,t=v.ic(2);v.Db(1),v.bd(" ",null==t.issueReasonMap?null:t.issueReasonMap.get(null==n?null:n.type)," from tier ",null==n?null:n.additionalInformation.oldTier," to tier ",null==n?null:n.additionalInformation.newTier," ")}}function ul(n,t){if(1&n&&(v.Vb(0),v.Xc(1),v.Ub()),2&n){const n=v.ic().$implicit,t=v.ic(2);v.Db(1),v.Zc(" ",null==t.issueReasonMap?null:t.issueReasonMap.get(null==n?null:n.type)," ")}}function dl(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"li",31),v.Xb(2,"ul",32),v.Xb(3,"nz-list-item-action"),v.Vc(4,al,4,4,"ng-container",15),v.Vc(5,rl,4,4,"ng-container",15),v.Wb(),v.Wb(),v.Xb(6,"nz-tag",33),v.Xc(7),v.Wb(),v.Xc(8," \xa0 "),v.Vc(9,cl,2,3,"ng-container",15),v.Vc(10,ul,2,1,"ng-container",15),v.Wb(),v.Ub()),2&n){const n=t.$implicit,e=v.ic(2);v.Db(4),v.rc("ngIf","INSURANCE_TIER_ISSUE"===(null==n?null:n.type)),v.Db(1),v.rc("ngIf","DISCHARGE_FROM_PROGRAM"===(null==n?null:n.type)),v.Db(1),v.rc("nzColor","green"),v.Db(1),v.Yc(null==e.contextMap?null:e.contextMap.get(null==n?null:n.context)),v.Db(2),v.rc("ngIf","INSURANCE_TIER_ISSUE"===(null==n?null:n.type)),v.Db(1),v.rc("ngIf","INSURANCE_TIER_ISSUE"!==(null==n?null:n.type))}}function bl(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"tr"),v.Xb(2,"td",18),v.ec("nzExpandChange",function(e){v.Lc(n);const i=t.$implicit;return v.ic().onExpandChange(null==i?null:i.id,e)}),v.Wb(),v.Xb(3,"td",19),v.jc(4,"filterList"),v.jc(5,"filterList"),v.Vc(6,Go,2,3,"span",20),v.Vc(7,Yo,2,2,"span",20),v.Wb(),v.Xb(8,"td"),v.Xc(9),v.jc(10,"titlecase"),v.Wb(),v.Xb(11,"td"),v.Xc(12),v.Wb(),v.Vc(13,$o,3,2,"td",13),v.Xb(14,"td"),v.Xb(15,"app-icons",21),v.ec("click",function(){v.Lc(n);const e=t.$implicit;return v.ic().viewUser(null==e?null:e.id,null==e?null:e.userType)}),v.Wb(),v.Xc(16," \xa0 "),v.Xb(17,"app-icons",22),v.ec("click",function(){v.Lc(n);const e=t.$implicit;return v.ic().reEvaluate(null==e?null:e.id,null==e?null:e.userType)}),v.Wb(),v.Vc(18,tl,4,7,"ng-container",15),v.Wb(),v.Wb(),v.Xb(19,"tr",23),v.Xb(20,"div",1),v.Xb(21,"ul",24),v.Vc(22,dl,11,6,"ng-container",14),v.Wb(),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=t.$implicit,e=v.ic();v.Db(2),v.rc("nzExpand",e.expandSet.has(null==n?null:n.id)),v.Db(1),v.rc("nzType",v.mc(4,11,"type",null==n?null:n.workListItems,"DISCHARGE_FROM_PROGRAM")?"danger":"default")("nzTooltipTitle",v.mc(5,15,"type",null==n?null:n.workListItems,"DISCHARGE_FROM_PROGRAM")?"Flagged for discharging from the programme":"Go to profile"),v.Db(3),v.rc("ngIf","LEAD"===(null==n?null:n.userType)),v.Db(1),v.rc("ngIf","PATIENT"===(null==n?null:n.userType)),v.Db(2),v.Zc(" ",v.kc(10,19,null==n?null:n.userType)," "),v.Db(3),v.Zc(" ",(null==n||null==n.lead||null==n.lead.patientInfo?null:n.lead.patientInfo.dateOfBirth)||(null==n||null==n.patient?null:n.patient.dateOfBirth)," "),v.Db(6),v.rc("ngIf","PATIENT"===(null==n?null:n.userType)),v.Db(1),v.rc("nzExpand",e.expandSet.has(null==n?null:n.id)),v.Db(2),v.rc("nzDataSource",null==n?null:n.workListItems),v.Db(1),v.rc("ngForOf",null==n?null:n.workListItems)}}const fl=function(){return[25,50,75,100]},pl=function(){return["3%","20%","15%","35%","15%"]};let gl=(()=>{class n extends h.a{constructor(n,t,e,i,s,a,o,l){super(),this._router=n,this._staffWorkList=t,this._leadsService=e,this._staffService=i,this._patientsService=s,this._dataSharingService=a,this._patientsViewService=o,this._notificationsService=l,this.pageLimit=50,this.expandSet=new Set,this.contextMap=new Map([[Oo.b.LEAD_QUALIFICATION_ISSUE,"Lead Qualification"],[Oo.b.LEAD_INSURANCE_TIER_ISSUE,"Lead Insurance Tier"],[Oo.b.PATIENT_QUALIFICATION_ISSUE,"Patient Qualification"],[Oo.b.PATIENT_INSURANCE_TIER_ISSUE,"Patient Insurance Tier"],[Oo.b.PATIENT_DISCHARGE,"Patient Discharge"]]),this.issueReasonMap=new Map([[Oo.a.DOB_ISSUE,"Age is less than 18 years"],[Oo.a.DX_CODE_ISSUE,"Two chronic codes are not available"],[Oo.a.INSURANCE_ISSUE,"Compatible insurance information is not available"],[Oo.a.LANGUAGE_ISSUE,"Language is not supported"],[Oo.a.NO_PHYSICIAN_ISSUE,"Physician profile is not assigned"],[Oo.a.NO_PARTICIPATING_PHYSICIAN_ISSUE,"Assigned physician does not participate in the program"],[Oo.a.NO_VISIT_ENCOUNTER_ISSUE,"No visits or encounters within the last 12 months"],[Oo.a.INSURANCE_TIER_ISSUE,"Insurance tier changed"],[Oo.a.DISCHARGE_FROM_PROGRAM,"Patient is marked to be discharged"]]),this._routeHelperService.getSearch().pipe(Object(Jn.a)(n=>null!==n),Object(Kn.a)(this.unsubscribed)).subscribe(n=>{this.searchKey=n,this.setQueryParamsToURL()}),this.activatedRoute.queryParams.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{this.userType=n.userType,this.getData()})}ngOnInit(){this._dataSharingService.onSubTenantChange().pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{this.onSubTenantChange(n)})}changePageSize(n){this.pageLimit=n,this.getData()}setQueryParamsToURL(){this._router.navigate([],{relativeTo:this.activatedRoute,queryParams:{userType:this.userType,search:this.searchKey},queryParamsHandling:"merge"})}onSubTenantChange(n){"object"!=typeof n||""==n||null==n||null==n?this.getData():(this.requestTenantIds=n.join(),this.getData(1))}getData(n=0){this.getWorklistItemsForTenant(n)}getWorklistItemsForTenant(n=0){this._staffWorkList.fetchWorklistItemsForTenant(n,this.pageLimit,this.userType,this.searchKey,void 0,this.requestTenantIds).subscribe(n=>{this.staffWorkListResponse=n})}getWorklistItemsForStaff(){this._staffWorkList.fetchWorklistItemsForStaff(void 0,void 0,void 0,this.requestTenantIds).subscribe(n=>{this.staffWorkListResponse=n})}resolve(n,t){var e,i,s,a;t.workListItems=null===(e=null==t?void 0:t.workListItems)||void 0===e?void 0:e.filter(t=>(null==t?void 0:t.id)!==(null==n?void 0:n.id)),(null===(i=null==t?void 0:t.workListItems)||void 0===i?void 0:i.length)||(this.staffWorkListResponse.result=null===(a=null===(s=this.staffWorkListResponse)||void 0===s?void 0:s.result)||void 0===a?void 0:a.filter(n=>(null==n?void 0:n.id)!==(null==t?void 0:t.id))),this._staffWorkList.markAsResolved(null==n?void 0:n.id).subscribe(()=>{this._notificationsService.success("Work List","Item marked as resolved successfully!")})}onExpandChange(n,t){t?this.expandSet.add(n):this.expandSet.delete(n)}viewUser(n,t){"LEAD"===t?this._router.navigate([`/leads/details/${n}`]):"PATIENT"===t&&this._router.navigate([`/patient/view/${n}`])}reEvaluate(n,t){var e;const i={userIds:[n]};this.qualificationState||(this.qualificationState={}),this.qualificationState.running=!0,this.qualificationState.numberOfUsers=null===(e=null==i?void 0:i.userIds)||void 0===e?void 0:e.length;const s=this._leadsService.qualifyLeads(i),a=this._patientsService.qualifyPatients(i);Object(Ro.a)(()=>"LEAD"===t,s,a).subscribe(()=>{this._notificationsService.success("Qualification",`${t} is being evaluated, please wait a few seconds...`),this.getStaffDetails()})}getStaffDetails(){const n=localStorage.getItem("loggedInUser");this._staffService.getStaffByUserId(n).subscribe(n=>{var t,e,i,s,a,o;(null===(t=this.qualificationState)||void 0===t?void 0:t.running)&&!(null===(i=null===(e=null==n?void 0:n.clinicianState)||void 0===e?void 0:e.qualificationState)||void 0===i?void 0:i.running)&&this.getData(),this.qualificationState=null===(s=null==n?void 0:n.clinicianState)||void 0===s?void 0:s.qualificationState,(null===(a=this.qualificationState)||void 0===a?void 0:a.dateTime)&&30<=Object(_o.a)(Object(Ke.a)((null===(o=this.qualificationState)||void 0===o?void 0:o.dateTime)+"Z"),new Date)&&(this.qualificationState.running=!1)})}initiateDischarge(n,t){this._staffWorkList.generateWorkItem({userIds:[n],userType:t,type:Oo.a.DISCHARGE_FROM_PROGRAM,context:Oo.b.PATIENT_DISCHARGE}).subscribe(()=>{this._notificationsService.success("Worklist",`${t} sent for discharge to CDN`),this.getData()})}dischargeFromProgram(n,t){this._patientsViewService.showDischargePatientModal(n,t).afterClose.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{"success"===n&&this.getData()})}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.g),v.Rb(Mo.a),v.Rb(No.a),v.Rb(on.a),v.Rb(d.a),v.Rb(b.a),v.Rb(Eo.a),v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-worklist"]],features:[v.Ab],decls:28,vars:17,consts:[["qualificationMessage",""],[1,"container"],["nz-row",""],["nz-col","","nzSpan","20"],["nzType","warning",3,"nzMessage",4,"ngIf"],["nz-col","","nzSpan","4"],["nz-typoraphy","","nzType","secondary",1,"heading"],["nzPlaceHolder","User Type",3,"ngModel","ngModelChange"],["nzValue","LEAD","nzLabel","Lead"],["nzValue","PATIENT","nzLabel","Patient"],["nzTableLayout","fixed",3,"nzData","nzShowPagination","nzFrontPagination","nzTotal","nzPageSize","nzShowSizeChanger","nzPageSizeOptions","nzWidthConfig","nzPageIndexChange","nzPageSizeChange"],["workListTable",""],["nzWidth","60px"],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-tooltip","","nzTooltipTitle","Refresh","name","reload","size","14px",3,"click"],["nzType","warning",3,"nzMessage"],[3,"nzExpand","nzExpandChange"],["nz-typography","","nz-tooltip","",3,"nzType","nzTooltipTitle"],["actionable","",3,"routerLink",4,"ngIf"],["nz-tooltip","","nzTooltipTitle","View details","name","view",3,"click"],["nz-tooltip","","nzTooltipTitle","Re-evaluate","size","16px","name","reload",3,"click"],[3,"nzExpand"],["nz-list","","nzSize","large",3,"nzDataSource"],["actionable","",3,"routerLink"],[4,"isFeaturePermitted"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to initiate the discharge process?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"],["nz-tooltip","","nzTooltipTitle","Send for discharge","size","16px","name","profileDelete"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to discharge this patient?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"],["nz-tooltip","","nzTooltipTitle","Discharge","size","16px","name","profileDelete"],["nz-list-item","","nzNoFlex",""],["nz-list-item-actions",""],[3,"nzColor"],[3,"click",4,"isFeaturePermitted"],["nz-typography","","nzType","danger","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to discharge this patient?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm",4,"isFeaturePermitted"],[3,"click"],["nz-typography","","nzType","danger","nz-popconfirm","","nzPopconfirmTitle","Are you sure you want to discharge this patient?","nzPopconfirmPlacement","bottom",3,"nzOnConfirm"]],template:function(n,t){if(1&n&&(v.Vc(0,Fo,4,2,"ng-template",null,0,v.Wc),v.Xb(2,"div",1),v.Xb(3,"div",2),v.Xb(4,"div",3),v.Vc(5,Uo,1,1,"nz-alert",4),v.Wb(),v.Xb(6,"div",5),v.Xb(7,"label",6),v.Xc(8,"Filter By:"),v.Wb(),v.Xb(9,"nz-select",7),v.ec("ngModelChange",function(n){return t.userType=n})("ngModelChange",function(){return t.setQueryParamsToURL()}),v.Sb(10,"nz-option",8),v.Sb(11,"nz-option",9),v.Wb(),v.Wb(),v.Wb(),v.Xb(12,"nz-table",10,11),v.ec("nzPageIndexChange",function(n){return t.getData(n)})("nzPageSizeChange",function(n){return t.changePageSize(n)}),v.Xb(14,"thead"),v.Xb(15,"tr"),v.Sb(16,"th",12),v.Xb(17,"th"),v.Xc(18),v.jc(19,"translate"),v.Wb(),v.Xb(20,"th"),v.Xc(21,"User Type"),v.Wb(),v.Xb(22,"th"),v.Xc(23,"Date of Birth"),v.Wb(),v.Vc(24,jo,2,0,"th",13),v.Sb(25,"th"),v.Wb(),v.Wb(),v.Xb(26,"tbody"),v.Vc(27,bl,23,21,"ng-container",14),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.Ic(13);v.Db(5),v.rc("ngIf",null==t.qualificationState?null:t.qualificationState.running),v.Db(4),v.rc("ngModel",t.userType),v.Db(3),v.rc("nzData",null==t.staffWorkListResponse?null:t.staffWorkListResponse.result)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",null==t.staffWorkListResponse||null==t.staffWorkListResponse.metaData?null:t.staffWorkListResponse.metaData.totalCount)("nzPageSize",t.pageLimit)("nzShowSizeChanger",!0)("nzPageSizeOptions",!0)("nzPageSizeOptions",v.xc(15,fl))("nzWidthConfig",v.xc(16,pl)),v.Db(6),v.Yc(v.kc(19,13,"COMMON.NAME")),v.Db(9),v.rc("ngForOf",null==n?null:n.data)}},directives:[P.c,P.a,a.q,de.d,c.u,c.x,de.a,D.f,D.n,D.o,D.e,D.l,St.a,D.i,a.p,dn.a,un.d,z.a,D.j,T.a,D.p,D.g,wo.a,C.a,S.h,Xt.a,xo.a,wo.e,wo.d,wo.c,et.a],pipes:[bn.a,Vo.a,a.A,Dt.a],styles:["nz-alert[_ngcontent-%COMP%]{padding-top:10px}"]}),n})();var hl=e("Ifg2");let ml=(()=>{class n{constructor(){this.headersMap=new Map([["First Name","firstName"],["Last Name","lastName"],["DOB (yyyy-MM-dd)","dateOfBirth"],["Gender","gender"],["Phone Number (optional)","mobile"],["Address Line 1 (optional)","addressLine1"],["Address Line 2 (optional)","addressLine2"],["City (optional)","city"],["State","state"],["Country","country"],["Pin Code","pinCode"],["Default Site","primarySite"],["Other Sites (optional, comma separated)","otherSites"],["Profile Tag (optional, comma separated)","profileTags"],["Staff ID (optional)","staffId"],["Program Participation (comma separated)","programs"],["NPI ID (optional)","npiId"],["Credential (optional)","credentials"]])}validateHeaders(n){return n.forEach((n,t)=>{Object.keys(n).forEach(t=>{Object.defineProperty(n,this.headersMap.get(t),Object.getOwnPropertyDescriptor(n,t)),delete n[t]}),n.rowId=t}),n}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Nb({token:n,factory:n.\u0275fac}),n})();var vl=e("S5rh"),Sl=e("MZxW"),zl=e("D9mS"),Xl=e("FwiY");function Il(n,t){if(1&n){const n=v.Yb();v.Xb(0,"h5"),v.Xb(1,"span",11),v.Sb(2,"i",12),v.Xc(3),v.Wb(),v.Xc(4," \xa0 "),v.Xb(5,"span",13),v.ec("click",function(t){return v.Lc(n),v.ic().removeFile(t)}),v.Sb(6,"i",14),v.Xc(7," Delete"),v.Wb(),v.Wb()}if(2&n){const n=v.ic();v.Db(3),v.Zc(" File Seleted: ",n.uploadedFileName,"")}}function yl(n,t){if(1&n&&(v.Xb(0,"li"),v.Xc(1),v.Wb()),2&n){const n=t.$implicit;v.Db(1),v.Zc(" ",n," ")}}function Dl(n,t){if(1&n&&(v.Xb(0,"div"),v.Xb(1,"nz-card",18),v.Xb(2,"ul"),v.Vc(3,yl,2,1,"li",16),v.Wb(),v.Wb(),v.Wb()),2&n){const n=t.$implicit,e=v.ic(2);v.Db(1),v.sc("nzTitle",n.key),v.rc("nzExtra",e.extraTemplate),v.Db(2),v.rc("ngForOf",n.value)}}function Tl(n,t){1&n&&(v.Xb(0,"span",19),v.Xb(1,"strong"),v.Xc(2,"Validation Errors"),v.Wb(),v.Wb())}function Wl(n,t){if(1&n&&(v.Xb(0,"div",2),v.Xb(1,"nz-card",15),v.Vc(2,Dl,4,3,"div",16),v.jc(3,"keyvalue"),v.Wb(),v.Vc(4,Tl,3,0,"ng-template",null,17,v.Wc),v.Wb()),2&n){const n=v.Ic(5),t=v.ic();v.Db(1),v.rc("nzTitle",n),v.Db(1),v.rc("ngForOf",v.kc(3,2,t.errors))}}let Pl=(()=>{class n extends h.a{constructor(n,t,e,i,s,a,o,l,r){super(),this._xlsxParserService=n,this._physicianXlsxValidator=t,this._datePipe=e,this._staffService=i,this._router=s,this._tagsService=a,this._sitesService=o,this._dataSharingService=l,this._notificationsService=r,this.loading=!1,this.loadingText="Please wait...",this.handleUpload=n=>{this.loading=!0,this.loadingText="Please wait. Reading file ...";const t=new FileReader;t.onload=()=>{const e=this._xlsxParserService.parse(t);try{this.data=this._physicianXlsxValidator.validateHeaders(e[Object.keys(e)[0]]);var i=this.data.map(n=>this.xlsxDataToStaffRequest(n));const t=[];if(this.errors=new Map,i.forEach((n,e)=>{const i=[];null==n&&i.push("Invalid Physician Data"),this.isStaffRequest(n)?t.push(n):i.push(n),i.length&&this.errors.set("Row : "+e,i)}),this.uploadedFileName=n.file.name,this.loading=!1,this.staffRequests=t,0===this.errors.size&&0===this.staffRequests.length&&this.errors.set("Invalid File",["Invalid File - no physician data found"]),this.errors.size)return;this.errors=null,this._routeHelperService.setPrimaryEnableAction(!1)}catch(s){return this.loading=!1,void this._notificationsService.error("Bulk Upload","Error while reading file headers!")}},t.readAsBinaryString(n.file)}}ngOnInit(){var n;this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Jn.a)(n=>!!n),Object(Kn.a)(this.unsubscribed)).subscribe(()=>this.validateAndSave()),this._routeHelperService.isSecondaryActionTriggered().pipe(Object(Jn.a)(n=>!!n),Object(Kn.a)(this.unsubscribed)).subscribe(()=>this.downloadTemplate()),this._routeHelperService.setPrimaryEnableAction(!0),null===(n=this._dataSharingService.tenantSettings)||void 0===n||n.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{var t,e,i;n&&(this.tenantConfig=n,this.countryCode=null===(t=this.tenantConfig)||void 0===t?void 0:t.countryCode,this.timezone=null===(e=this.tenantConfig)||void 0===e?void 0:e.timeZone,this.language=null===(i=this.tenantConfig)||void 0===i?void 0:i.language)}),this.getAllSites(),this.getAllTags()}onSubTenantChange(n){"object"==typeof n&&""!=n&&null!=n&&null!=n&&(this.getAllSites(),this.getAllTags(),this.requestTenantId=n)}getAllTags(){this._tagsService.getTags("PATIENT",-1,0).subscribe(n=>{var t;this.tags=null===(t=null==n?void 0:n.body)||void 0===t?void 0:t.map(n=>null==n?void 0:n.name)})}getAllSites(){this._sitesService.getAllSites(0,1e3,null,!1).subscribe(n=>{this.allSites=null==n?void 0:n.result})}downloadSampleSheet(){window.open("https://api.cooeyhealth.com/v2/media/Bulk_Upload_Sheet_Updated_For_Site.xlsx","_blank")}isStaffRequest(n){return n.hasOwnProperty("id")}removeFile(n){return this.uploadedFileName=null,this.staffRequests=null,this._routeHelperService.setPrimaryEnableAction(!0),n.stopPropagation(),!1}validateAndSave(){this.errors=null,this.loading=!0,this.loadingText="Uploading file to server ...";const n={staffRequest:this.staffRequests,tenantId:this.requestTenantId};this._staffService.validateUploadPhysician(n).subscribe(t=>{this.errors=t,Object.keys(this.errors).length?this.loading=!1:this._staffService.bulkUploadPhysician(n).subscribe(()=>{this._notificationsService.success("Bulk Upload","Physicians uploaded successfully!"),this.loading=!1,this._router.navigate(["staff"],{queryParams:{role:"PHYSICIAN"}})},n=>{var t;this.loading=!1,(null===(t=null==n?void 0:n.error)||void 0===t?void 0:t.message)&&this._notificationsService.error("Bulk Upload",n.error.message)})},n=>{var t;this.loading=!1,(null===(t=null==n?void 0:n.error)||void 0===t?void 0:t.message)&&this._notificationsService.error("Bulk Upload",n.error.message)})}xlsxDataToStaffRequest(n){var t,e;(null===(t=null==n?void 0:n.dateOfBirth)||void 0===t?void 0:t.length)&&(n.dateOfBirth=this._datePipe.transform(null==n?void 0:n.dateOfBirth,"yyyy-MM-dd"));const i=[];return null==n.firstName&&i.push("First Name missing"),null==n.lastName&&i.push("Last Name missing"),null==n.gender&&i.push("Gender missing"),i.length>0?"Invalid Physician Data -  "+i.join(","):{id:null,firstName:n.firstName,lastName:n.lastName,credentials:[n.credentials],dateOfBirth:n.dateOfBirth,language:{locale:this.language},email:n.email,username:"",encryptedPassword:"",country:n.country,mobile:n.mobile,gender:null===(e=n.gender)||void 0===e?void 0:e.toUpperCase(),address:this.getAddress(n),timeZone:this.timezone,profileTags:this.getStringListFromCommaSeperatedString(n.profileTags),programs:this.getStringListFromCommaSeperatedString(n.programs),countryCode:this.countryCode,site:n.primarySite,otherSites:this.getStringListFromCommaSeperatedString(n.otherSites),roleType:Dn.a.PHYSICIAN,npiId:n.npiId,staffId:n.staffId}}getAddress(n){return{line1:n.addressLine1,line2:n.addressLine2,city:n.city,state:n.state,country:n.country,location:n.location,pin:n.pinCode}}getStringListFromCommaSeperatedString(n){return(null==n?void 0:n.split(","))||[]}downloadTemplate(){window.open("https://api.cooeyhealth.com/v1/assets/download/?filename=bulk-upload-pcp-template.xlsx","_blank")}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(hl.a),v.Rb(ml),v.Rb(a.e),v.Rb(on.a),v.Rb(S.g),v.Rb(Ze.a),v.Rb(je.a),v.Rb(b.a),v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-bulk-add-physician"]],features:[v.Cb([hl.a,ml,a.e,a.j]),v.Ab],decls:24,vars:20,consts:[[3,"defaultTitle","isSearchEnabled","isActionEnabled"],[3,"nzSpinning","nzTip"],[1,"container"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","6","nzOffset","18"],["mode","SINGLE",3,"onSubTenantSelected"],[1,"file-details-container"],["nzType","drag","nzAccept",".xlsx",3,"nzCustomRequest","nzShowButton","nzShowUploadList","nzDisabled"],[4,"ngIf"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["class","container",4,"ngIf"],[2,"color","#8BC34A"],["nz-icon","","nzType","paper-clip","nzTheme","outline"],[2,"color","#FF0000","cursor","pointer",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"nzTitle"],[4,"ngFor","ngForOf"],["errorTitle",""],["nzType","inner",2,"margin-top","16px",3,"nzTitle","nzExtra"],["nz-typography","","nzType","danger"]],template:function(n,t){1&n&&(v.Xb(0,"div"),v.Sb(1,"app-header",0),v.jc(2,"translate"),v.Xb(3,"nz-spin",1),v.Xb(4,"div",2),v.Xb(5,"div",3),v.Xb(6,"div",4),v.Xb(7,"sub-tenant-select",5),v.ec("onSubTenantSelected",function(n){return t.onSubTenantChange(n)}),v.Wb(),v.Wb(),v.Wb(),v.Xb(8,"h3"),v.Xc(9,"You can upload bulk list of physicians to the system and can assign them easily."),v.Wb(),v.Sb(10,"br"),v.Xb(11,"div",6),v.Xb(12,"ul"),v.Xb(13,"li"),v.Xc(14),v.jc(15,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Xb(16,"nz-upload",7),v.Vc(17,Il,8,1,"h5",8),v.Xb(18,"button",9),v.Xc(19,"BROWSE / DRAG"),v.Wb(),v.Xb(20,"p"),v.Xc(21),v.jc(22,"translate"),v.Wb(),v.Wb(),v.Wb(),v.Vc(23,Wl,6,4,"div",10),v.Wb(),v.Wb()),2&n&&(v.Db(1),v.sc("defaultTitle",v.kc(2,14,"BULK_ADD.BULK_ADD_PATIENTS")),v.rc("isSearchEnabled",!1)("isActionEnabled",!1),v.Db(2),v.rc("nzSpinning",t.loading)("nzTip",t.loadingText),v.Db(11),v.Yc(v.kc(15,16,"BULK_ADD.GUIDELINE.PROPER_DATA_FORMAT")),v.Db(2),v.rc("nzCustomRequest",t.handleUpload)("nzShowButton",!0)("nzShowUploadList",!1)("nzDisabled",t.uploadedFileName),v.Db(1),v.rc("ngIf",t.uploadedFileName),v.Db(1),v.rc("disabled",t.uploadedFileName),v.Db(3),v.Yc(v.kc(22,18,"COMMON.DRAG_AND_UPLOAD")),v.Db(2),v.rc("ngIf",!t.loading&&t.errors))},directives:[vl.a,ks.a,P.c,P.a,Sl.a,zl.a,a.q,_n.a,Mn.a,Cn.a,Xl.a,cn.a,a.p,T.a],pipes:[bn.a,a.j],styles:[""]}),n})();class Cl{constructor(){this.accessBoundary=ii.a.TENANT}}var Al=e("hj5u"),_l=e("4RGM");function Ml(n,t){if(1&n&&(v.Xb(0,"p",17),v.Xc(1),v.Wb()),2&n){const n=v.ic();v.Db(1),v.Zc(" ",n.errors.get("name")," ")}}function Ol(n,t){if(1&n&&(v.Xb(0,"p",17),v.Xc(1),v.Wb()),2&n){const n=v.ic();v.Db(1),v.Zc(" ",n.errors.get("DUPLICATE_ROLE_NAME")," ")}}function Nl(n,t){if(1&n&&(v.Sb(0,"nz-option",19),v.jc(1,"roleName")),2&n){const n=v.ic().$implicit;v.rc("nzLabel",v.kc(1,2,n))("nzValue",n)}}function Rl(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Nl,2,4,"nz-option",18),v.jc(2,"roleTypeEnabled"),v.Ub()),2&n){const n=t.$implicit,e=v.ic();v.Db(1),v.rc("ngIf",v.lc(2,1,n,e.tenantConfig))}}function El(n,t){if(1&n&&(v.Vb(0),v.Xb(1,"p",17),v.Xc(2),v.Wb(),v.Ub()),2&n){const n=v.ic();v.Db(2),v.Zc(" ",n.errors.get("type")," ")}}function wl(n,t){if(1&n){const n=v.Yb();v.Vb(0),v.Xb(1,"div",26),v.Xb(2,"label",27),v.ec("ngModelChange",function(e){v.Lc(n);const i=t.$implicit;return v.ic(5).onChange(e,i)}),v.jc(3,"isChecked"),v.Xc(4),v.jc(5,"permissionName"),v.Wb(),v.Wb(),v.Ub()}if(2&n){const n=t.$implicit,e=v.ic(5);v.Db(2),v.rc("ngModel",v.lc(3,2,n,e.allRolePermissions)),v.Db(2),v.Zc(" ",v.kc(5,5,n)," ")}}function xl(n,t){if(1&n&&(v.Xb(0,"div",25),v.Vc(1,wl,6,7,"ng-container",9),v.Wb()),2&n){const n=v.ic(2).$implicit;v.Db(1),v.rc("ngForOf",null==n?null:n.value)}}function Vl(n,t){if(1&n&&(v.Xb(0,"div",22),v.Xb(1,"strong",23),v.Xc(2),v.jc(3,"permissionName"),v.Wb(),v.Vb(4),v.Vc(5,xl,2,1,"div",24),v.Ub(),v.Wb()),2&n){const n=v.ic(),t=n.index,e=n.$implicit;v.rc("nzSm",t%2==0?11:13)("nzMd",(t+1)%3==0?8:(t+1)%3==0?5:8),v.Db(2),v.Yc(v.lc(3,4,null==e?null:e.key,"GROUP")),v.Db(3),v.rc("ngIf",!(null==e||null==e.value||!e.value.length))}}function kl(n,t){if(1&n&&(v.Vb(0),v.Vc(1,Vl,6,7,"div",21),v.Ub()),2&n){const n=t.$implicit;v.Db(1),v.rc("ngIf",!(null==n||null==n.value||!n.value.length))}}function Ll(n,t){if(1&n&&(v.Xb(0,"div",20),v.Vc(1,kl,2,1,"ng-container",9),v.jc(2,"keyvalue"),v.Wb()),2&n){const n=v.ic();v.Db(1),v.rc("ngForOf",v.kc(2,1,n.permissionGroups))}}let Fl=(()=>{class n extends h.a{constructor(n,t,e,i,s,a){var o;super(),this._rolesService=n,this._router=t,this._activatedRoute=e,this._dataSharingService=i,this._permissionsService=s,this._notificationService=a,this.role=new Cl,this.permissionsLoading=!0,this.accessBoundaryLoading=!0,this.oldPermissions=new Array,this.addedPermissions=new Array,this.removedPermissions=new Array,this.allRolePermissions=new Array,this.accessBoundaries=new Array,this.errors=new Map,this.availableRoleTypes=new Array,this.onChange=(n,t)=>n?this.onPermissionAddition(t):this.onPermissionRemoval(t),this.onPermissionAddition=n=>{this.allRolePermissions.push(n),this.allRolePermissions=[...this.allRolePermissions],-1==this.oldPermissions.indexOf(n)&&this.addedPermissions.push(n),this.removedPermissions.indexOf(n)>-1&&(this.removedPermissions=this.removedPermissions.filter(t=>t!=n))},this.onPermissionRemoval=n=>{this.allRolePermissions=[...this.allRolePermissions.filter(t=>t!=n)],this.oldPermissions.indexOf(n)>-1&&this.removedPermissions.push(n),this.addedPermissions=this.addedPermissions.filter(t=>t!=n)},this.mode=this._activatedRoute.snapshot.paramMap.get("mode")||"add",this.roleId=this._activatedRoute.snapshot.paramMap.get("roleId"),null===(o=this._dataSharingService.tenantSettings)||void 0===o||o.pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{n&&(this.tenantConfig=n,null!=n.securityConfigs&&null!=n.securityConfigs.customRolesConfig&&n.securityConfigs.customRolesConfig.availableBoundaries.length>0&&(this.availableRoleTypes=[...n.securityConfigs.customRolesConfig.availableRoleTypes]))})}ngOnInit(){this.getPermissions(),this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Jn.a)(n=>!!n),Object(Kn.a)(this.unsubscribed)).subscribe(()=>this.submit()),this.roleId&&this._rolesService.getCustomRoleById(this.roleId).subscribe(n=>{this.existingRole(n)}),this.role.tenantId=localStorage.getItem(_l.a.REQUEST_TENANT_IDS)}existingRole(n){this.role=n,this.allRolePermissions=n.privileges}fetchAccessBoundaries(){this.accessBoundaryLoading=!0,this._rolesService.getAccessBoundaries().subscribe(n=>{this.accessBoundaries=n,this.accessBoundaryLoading=!1})}getPermissions(){this._permissionsService.fetchGroupedPermissions(null).subscribe(n=>{this.permissionGroups=n,this.permissionsLoading=!1})}onSubTenantChange(n){this.role.tenantId=n,console.log("Role : ",this.role)}submit(){this.errors=new Map,this.role.privileges=this.allRolePermissions,this.role.accessBoundary=ii.a.TENANT,this.role.privileges.length<=0?this._notificationService.warning("Roles","To save this role, you need to add at least one permission."):"add"==this.mode?(this.role.id=null,this._rolesService.createCustomRole(this.role).subscribe(n=>{this._notificationService.success("Role","Role saved successfully."),this._router.navigate(["staff/custom-roles/list/roles"])},n=>{"VALIDATION_PROBLEM"==n.error.type?n.error.invalidParams.forEach(n=>{this.errors.set(n.name,n.reason)}):this.errors.set(n.error.type,n.error.title)})):this._rolesService.updateCustomRole(this.roleId,this.role).subscribe(n=>{this._notificationService.success("Role","Role updated successfully."),this._router.navigate(["staff/custom-roles/list/roles"])},n=>{"VALIDATION_PROBLEM"==n.error.type?n.error.invalidParams.forEach(n=>{this.errors.set(n.name,n.reason)}):this.errors.set(n.error.type,n.error.title)})}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(Al.a),v.Rb(S.g),v.Rb(S.a),v.Rb(b.a),v.Rb(gi.a),v.Rb(Pn.b))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-roles-form"]],inputs:{role:"role"},features:[v.Ab],decls:35,vars:10,consts:[[1,"container","role-container"],[1,"divider"],["nz-row","","nzGutter","64"],["nz-col","","nzSpan","8"],[2,"color","red"],["mode","SINGLE",3,"persist","selectedSubTenant","onSubTenantSelected"],["nz-input","","placeholder","Role Name",3,"ngModel","ngModelChange"],["style","margin-top: 3px; text-align: right; margin-right: 5px; color: red;","nz-typography","","nzType","secondary",4,"ngIf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select a user type",3,"ngModel","nzDisabled","ngModelChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-row","","nzGutter","64",2,"margin-top","20px"],["nz-typography","","nzType","primary"],["nz-col","","nzSpan","24"],["nz-row","","nzGutter","24"],["nz-col","","nzSpan","24",1,"permission-container"],["nz-row","","nzGutter","8",4,"ngIf"],["nz-typography","","nzType","secondary",2,"margin-top","3px","text-align","right","margin-right","5px","color","red"],[3,"nzLabel","nzValue",4,"ngIf"],[3,"nzLabel","nzValue"],["nz-row","","nzGutter","8"],["nz-col","","nzXs","24",3,"nzSm","nzMd",4,"ngIf"],["nz-col","","nzXs","24",3,"nzSm","nzMd"],[1,"heading"],["nz-row","",4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","24",1,"each-permission-row"],["nz-checkbox","",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(v.Xb(0,"div",0),v.Sb(1,"div",1),v.Xb(2,"div",2),v.Xb(3,"div",3),v.Xb(4,"label"),v.Xc(5," Role Name "),v.Xb(6,"sup",4),v.Xc(7,"*"),v.Wb(),v.Wb(),v.Wb(),v.Xb(8,"div",3),v.Xb(9,"label"),v.Xc(10," User Type "),v.Xb(11,"sup",4),v.Xc(12,"*"),v.Wb(),v.Wb(),v.Wb(),v.Xb(13,"div",3),v.Xb(14,"sub-tenant-select",5),v.ec("onSubTenantSelected",function(n){return t.onSubTenantChange(n)}),v.Wb(),v.Wb(),v.Wb(),v.Xb(15,"div",2),v.Xb(16,"div",3),v.Xb(17,"input",6),v.ec("ngModelChange",function(n){return t.role.name=n}),v.Wb(),v.Vb(18),v.Vc(19,Ml,2,1,"p",7),v.Vc(20,Ol,2,1,"p",7),v.Ub(),v.Wb(),v.Xb(21,"div",3),v.Xb(22,"nz-select",8),v.ec("ngModelChange",function(n){return t.role.type=n}),v.Vc(23,Rl,3,4,"ng-container",9),v.Wb(),v.Vc(24,El,3,1,"ng-container",10),v.Wb(),v.Sb(25,"div",3),v.Wb(),v.Xb(26,"div",11),v.Xb(27,"div",3),v.Xb(28,"h3",12),v.Xc(29," Permissions "),v.Wb(),v.Wb(),v.Wb(),v.Xb(30,"div",2),v.Xb(31,"div",13),v.Xb(32,"div",14),v.Xb(33,"div",15),v.Vc(34,Ll,3,3,"div",16),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb()),2&n&&(v.Db(14),v.rc("persist",!1)("selectedSubTenant",t.role.tenantId),v.Db(3),v.rc("ngModel",t.role.name),v.Db(2),v.rc("ngIf",t.errors.has("name")),v.Db(1),v.rc("ngIf",t.errors.has("DUPLICATE_ROLE_NAME")),v.Db(2),v.rc("ngModel",t.role.type)("nzDisabled","edit"==t.mode),v.Db(1),v.rc("ngForOf",t.availableRoleTypes),v.Db(1),v.rc("ngIf",t.errors.has("type")),v.Db(10),v.rc("ngIf",!t.permissionsLoading))},directives:[P.c,P.a,Sl.a,An.b,c.d,c.u,c.x,a.q,de.d,a.p,T.a,de.a,Nn.a],pipes:[be,wi,a.j,hi,xi],styles:[".permission-container[_ngcontent-%COMP%]{background:#e5e5e5 0 0 no-repeat padding-box;border-radius:10px;padding:10px 25px 30px!important;min-height:200px;opacity:.8;margin:0 10px 10px}.role-container[_ngcontent-%COMP%]{margin:20px}.heading[_ngcontent-%COMP%]{display:block;margin:15px 10px}label[_ngcontent-%COMP%]{flex-direction:row!important}[_nghost-%COMP%]     .preview>.ant-checkbox-checked>.ant-checkbox-inner{background:#e5e5e5!important}[_nghost-%COMP%]     .ant-checkbox-inner{margin-right:2px}[_nghost-%COMP%]     .ant-checkbox-inner:after{border-color:var(--primary-color)}[_nghost-%COMP%]     .ant-col-6{margin-top:10px}.disabled[_ngcontent-%COMP%]{pointer-events:none}.each-permission-row[_ngcontent-%COMP%]{margin:5px;display:flex}[_nghost-%COMP%]     .ant-tag{font-size:9px;height:20px;width:23px;padding-left:5px}button[_ngcontent-%COMP%]{display:flex}.df-tag[_ngcontent-%COMP%]{margin-left:6px}.permission-actions[_ngcontent-%COMP%]{margin:auto}"]}),n})();function Ul(n,t){1&n&&(v.Xb(0,"th"),v.Xc(1," Sub Tenant "),v.Wb())}function jl(n,t){if(1&n&&(v.Xb(0,"td"),v.Xc(1),v.jc(2,"tenantName"),v.Wb()),2&n){const n=v.ic().$implicit;v.Db(1),v.Zc(" ",v.kc(2,1,null==n?null:n.tenantId)," ")}}function Gl(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-icons",9),v.ec("click",function(){v.Lc(n);const t=v.ic().$implicit;return v.ic().edit(null==t?null:t.id)}),v.Wb()}}function Yl(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-icons",10),v.ec("click",function(){v.Lc(n);const t=v.ic().$implicit;return v.ic().clone(null==t?null:t.id)}),v.Wb()}}function Hl(n,t){if(1&n){const n=v.Yb();v.Xb(0,"app-icons",11),v.ec("click",function(){v.Lc(n);const t=v.ic().$implicit;return v.ic().delete(null==t?null:t.id)}),v.Wb()}}const Bl=function(){return["EDIT_ROLE"]},$l=function(){return["ADD_ROLE"]},ql=function(){return["DELETE_ROLE"]};function Zl(n,t){if(1&n&&(v.Xb(0,"tr"),v.Xb(1,"td"),v.Xb(2,"p",5),v.Xc(3),v.Wb(),v.Wb(),v.Xb(4,"td"),v.Xb(5,"p",5),v.jc(6,"roleName"),v.Xc(7),v.jc(8,"roleName"),v.Wb(),v.Wb(),v.Vc(9,jl,3,3,"td",3),v.Xb(10,"td"),v.Xb(11,"p",5),v.Xc(12),v.Wb(),v.Wb(),v.Xb(13,"td"),v.Xb(14,"p"),v.Xc(15),v.Wb(),v.Wb(),v.Xb(16,"td"),v.Vc(17,Gl,1,0,"app-icons",6),v.Xc(18," \xa0\xa0 "),v.Vc(19,Yl,1,0,"app-icons",7),v.Xc(20," \xa0\xa0 "),v.Vc(21,Hl,1,0,"app-icons",8),v.Wb(),v.Wb()),2&n){const n=t.$implicit;v.Db(2),v.rc("nzTooltipTitle",null==n?null:n.name),v.Db(1),v.Zc(" ",null==n?null:n.name," "),v.Db(2),v.rc("nzTooltipTitle",v.kc(6,10,null==n?null:n.type)),v.Db(2),v.Zc(" ",v.kc(8,12,null==n?null:n.type)," "),v.Db(4),v.rc("nzTooltipTitle",null==n||null==n.privileges?null:n.privileges.length),v.Db(1),v.Zc(" ",null==n||null==n.privileges?null:n.privileges.length," Permissions "),v.Db(3),v.Zc(" ",null==n?null:n.staffCount," "),v.Db(2),v.rc("isFeaturePermitted",v.xc(14,Bl)),v.Db(2),v.rc("isFeaturePermitted",v.xc(15,$l)),v.Db(2),v.rc("isFeaturePermitted",v.xc(16,ql))}}const Ql=[{path:"",component:Ue,pathMatch:"full",data:Ao.Listing,canActivate:[Vs.a,xs.a]},{path:"view/:id",component:co,data:Ao.Detail,canActivate:[Vs.a,xs.a]},{path:"add",component:ws,data:Ao.Form,canActivate:[Vs.a,xs.a]},{path:"physician/bulk-upload",component:Pl,data:Ao.BulkUpload,canActivate:[Vs.a,xs.a]},{path:":mode/:id",component:ws,data:Ao.Form,canActivate:[Vs.a,xs.a]},{path:"assign/physicians/:id",component:Zn,data:Ao.PhysicianAssigner,canActivate:[Vs.a,xs.a]},{path:"assign/monitoring-staff/:id",component:Po,data:Ao.MonitoringStaffAssigner,canActivate:[Vs.a,xs.a]},{path:"view/:id/dashboard-widgets",component:yn,data:Ao.StaffDashboardWidgets,canActivate:[Vs.a,xs.a]},{path:"sessions/audit/:id",component:sn,data:Ao.Audit,canActivate:[Vs.a,xs.a]},{path:"work-list",component:gl,data:Ao.WorkList,canActivate:[Vs.a,xs.a]},{path:"custom-roles/:mode/role",component:Fl,data:Ao.RoleForm,canActivate:[Vs.a,xs.a]},{path:"custom-roles/list/roles",component:(()=>{class n extends h.a{constructor(n,t,e,i){super(),this._router=n,this._rolesService=t,this._notificationService=e,this._dataSharingService=i,this.loading=!0,this._routeHelperService.isPrimaryActionTriggered().pipe(Object(Jn.a)(n=>!!n),Object(Kn.a)(this.unsubscribed)).subscribe(()=>{n.navigate(["staff/custom-roles/add/role/"])})}ngOnInit(){var n=localStorage.getItem("loggedInUserAssignedTenants").split(",");this.selectedSubTenant=n[0],localStorage.setItem(_l.a.REQUEST_TENANT_IDS,this.selectedSubTenant),this.getRoles(1),this._dataSharingService.onSubTenantChange().pipe(Object(Kn.a)(this.unsubscribed)).subscribe(n=>{this.onSubTenantChange(n)})}onSubTenantChange(n){"object"!=typeof n||""==n||null==n||null==n||(this.requestTenantIds=n),this.getRoles(1)}getRoles(n){this.loading=!0,this._rolesService.getCustomRoles(n-1).subscribe(n=>{this.rolesResponse=n,this.roleList=this.rolesResponse.result,this.loading=!1})}edit(n){this._router.navigate(["staff/custom-roles/edit/role/",n])}clone(n){this._router.navigate(["staff/custom-roles/add/role/",n])}delete(n){this._rolesService.deleteCustomRoleById(n).subscribe(n=>{this._notificationService.success("Roles","Role deleted successfully."),this.getRoles(1)},n=>{console.log("Error : ",n.error),"ROLE_CANNOT_BE_DELETED"==n.error.type&&this._notificationService.warning("Roles","This role has been assigned to  "+n.error.parameters.users_already_using_role+" staff members. Please reassign them to different roles and then delete this role.")})}}return n.\u0275fac=function(t){return new(t||n)(v.Rb(S.g),v.Rb(Al.a),v.Rb(Pn.b),v.Rb(b.a))},n.\u0275cmp=v.Lb({type:n,selectors:[["app-list-roles"]],features:[v.Ab],decls:18,vars:10,consts:[[1,"container"],[3,"nzData","nzShowPagination","nzFrontPagination","nzTotal","nzPageSize","nzLoading","nzPageIndexChange"],["staffTable",""],[4,"isAccessAcrossTenantEnabled"],[4,"ngFor","ngForOf"],["nz-typography","","nz-tooltip","","nzEllipsis","",3,"nzTooltipTitle"],["name","edit","size","20px","nz-tooltip","","nzTooltipTitle","Edit Role",3,"click",4,"isFeaturePermitted"],["name","clone","size","20px","nz-tooltip","","nzTooltipTitle","Clone Role",3,"click",4,"isFeaturePermitted"],["nz-tooltip","","nzTooltipTitle","Delete Role","name","delete","size","20px",3,"click",4,"isFeaturePermitted"],["name","edit","size","20px","nz-tooltip","","nzTooltipTitle","Edit Role",3,"click"],["name","clone","size","20px","nz-tooltip","","nzTooltipTitle","Clone Role",3,"click"],["nz-tooltip","","nzTooltipTitle","Delete Role","name","delete","size","20px",3,"click"]],template:function(n,t){if(1&n&&(v.Xb(0,"div",0),v.Xb(1,"nz-table",1,2),v.ec("nzPageIndexChange",function(n){return t.getRoles(n)}),v.Xb(3,"thead"),v.Xb(4,"tr"),v.Xb(5,"th"),v.Xc(6),v.jc(7,"translate"),v.Wb(),v.Xb(8,"th"),v.Xc(9," Type "),v.Wb(),v.Vc(10,Ul,2,0,"th",3),v.Xb(11,"th"),v.Xc(12,"Permissions"),v.Wb(),v.Xb(13,"th"),v.Xc(14,"Staffs Assigned"),v.Wb(),v.Sb(15,"th"),v.Wb(),v.Wb(),v.Xb(16,"tbody"),v.Vc(17,Zl,22,17,"tr",4),v.Wb(),v.Wb(),v.Wb()),2&n){const n=v.Ic(2);v.Db(1),v.rc("nzData",t.roleList)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",null==t.rolesResponse?null:t.rolesResponse.totalCount)("nzPageSize",10)("nzLoading",t.loading),v.Db(5),v.Yc(v.kc(7,8,"COMMON.NAME")),v.Db(11),v.rc("ngForOf",n.data)}},directives:[D.f,D.n,D.o,D.e,D.l,St.a,D.i,a.p,T.a,un.d,Xt.a,dn.a],pipes:[bn.a,wi,Dt.a],styles:[".title[_ngcontent-%COMP%], [_nghost-%COMP%]     .ant-table-thead>tr>th, td[_ngcontent-%COMP%]{text-align:center!important}[_nghost-%COMP%]     .ant-table-thead>tr>th{height:50px!important}[_nghost-%COMP%]     tr.ant-table-placeholder{display:none}"]}),n})(),data:Ao.ListRoles,canActivate:[Vs.a,xs.a]},{path:"custom-roles/:mode/role/:roleId",component:Fl,data:Ao.EditRoleForm,canActivate:[Vs.a,xs.a]}];let Kl=(()=>{class n{}return n.\u0275mod=v.Pb({type:n}),n.\u0275inj=v.Ob({factory:function(t){return new(t||n)},imports:[[S.k.forChild(Ql)],S.k]}),n})();var Jl=e("bKRa");let nr=(()=>{class n{constructor(n){this.translationService=n,n.setLanguage()}}return n.\u0275mod=v.Pb({type:n}),n.\u0275inj=v.Ob({factory:function(t){return new(t||n)(v.bc(o.a))},imports:[[a.c,l.a,r.a,c.B,c.o,u.a.forRoot(),Kl,s.a,i.a,Jl.a]]}),n})()},zmLq:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t){(0,s.default)(2,arguments);var e=(0,i.default)(n),a=(0,i.default)(t),o=e.getTime()-a.getTime();return o<0?-1:o>0?1:o};var i=a(e("2Oix")),s=a(e("YGjY"));function a(n){return n&&n.__esModule?n:{default:n}}n.exports=t.default}}]);