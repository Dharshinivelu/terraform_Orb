(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"1vjI":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("/h9T"),r=n("/Tr7"),i=n("jIYg");function o(e,t){Object(i.a)(1,arguments);var n=t||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,c=null==s?0:Object(a.a)(s),d=null==n.weekStartsOn?c:Object(a.a)(n.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=Object(r.a)(e),u=l.getUTCDay(),b=(u<d?7:0)+u-d;return l.setUTCDate(l.getUTCDate()-b),l.setUTCHours(0,0,0,0),l}},"2sp+":function(e,t,n){"use strict";n.d(t,"a",function(){return a});class a{static mapAddress(e){var t,n,a,r,i,o,s,c,d;let l,u,b,h,g,p,m,f,v=null===(t=null==e?void 0:e.getPlace())||void 0===t?void 0:t.name;null===(a=null===(n=null==e?void 0:e.getPlace())||void 0===n?void 0:n.address_components)||void 0===a||a.forEach(e=>{var t,n,a,r,i,o,s,c;-1!==(null===(t=null==e?void 0:e.types)||void 0===t?void 0:t.findIndex(e=>"country"===e))&&(l=e.long_name),-1!==(null===(n=null==e?void 0:e.types)||void 0===n?void 0:n.findIndex(e=>"administrative_area_level_1"===e))&&(u=e.long_name),-1!==(null===(a=null==e?void 0:e.types)||void 0===a?void 0:a.findIndex(e=>"locality"===e))&&(b=e.long_name),-1!==(null===(r=null==e?void 0:e.types)||void 0===r?void 0:r.findIndex(e=>"postal_code"===e))&&(h=e.long_name),-1!==(null===(i=null==e?void 0:e.types)||void 0===i?void 0:i.findIndex(e=>"neighborhood"===e))&&(g=e.long_name),-1!==(null===(o=null==e?void 0:e.types)||void 0===o?void 0:o.findIndex(e=>"sublocality_level_3"===e))&&(p=e.long_name),-1!==(null===(s=null==e?void 0:e.types)||void 0===s?void 0:s.findIndex(e=>"sublocality_level_2"===e))&&(m=e.long_name),-1!==(null===(c=null==e?void 0:e.types)||void 0===c?void 0:c.findIndex(e=>"sublocality_level_1"===e))&&(f=e.long_name)});const y=this.concatFields(v,p||g),S=this.concatFields(m,f),T=null===(o=null===(i=null===(r=null==e?void 0:e.getPlace())||void 0===r?void 0:r.geometry)||void 0===i?void 0:i.location)||void 0===o?void 0:o.lat(),N=null===(d=null===(c=null===(s=null==e?void 0:e.getPlace())||void 0===s?void 0:s.geometry)||void 0===c?void 0:c.location)||void 0===d?void 0:d.lng();return{streetAddress:y,streetAddress2:S,zipCode:h,country:l,state:u,city:b,lat:T,lng:N}}static concatFields(...e){let t;return null==e||e.forEach(e=>{t||!e?e&&(t=`${t}, ${e}`):t=e}),t}static convertToAddress({streetAddress:e,streetAddress2:t,zipCode:n,country:a,state:r,city:i,lat:o,lng:s}){return{line1:e,line2:t,city:i,state:r,pin:n,zipCode:n,country:a,location:null,lat:o,lng:s,poBox:null}}}},"3CdQ":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("2Vo4"),r=n("fXoL");let i=(()=>{class e{constructor(){this.physicianNameHolder=new a.a(""),this.physicianName=this.physicianNameHolder.asObservable()}setPhysicianName(e){this.physicianNameHolder.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"3REe":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var a=["D","DD"],r=["YY","YYYY"];function i(e){return-1!==a.indexOf(e)}function o(e){return-1!==r.indexOf(e)}function s(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}},"5iDH":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("fXoL");let r=(()=>{class e{constructor(e){this.el=e}static scrollToElement(e){if(e){const t=window.pageYOffset-Math.abs(e.getBoundingClientRect().y);window.scroll({behavior:"smooth",left:0,top:e.getBoundingClientRect().top+window.scrollY-150}),setTimeout(()=>{e.focus(),e.blur(),e.focus()},t)}}static markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&e.markFormGroupTouched(t)})}onSubmit(t){if(t.preventDefault(),!this.formGroup.valid){e.markFormGroupTouched(this.formGroup);const t=this.el.nativeElement.querySelector(".ng-invalid");if(t)return e.scrollToElement(t);{const t=this.el.nativeElement.querySelectorAll("form .ng-invalid");if(t&&t.length)return e.scrollToElement(t[0])}return e.scrollToElement(this.el.nativeElement)}}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(a.l))},e.\u0275dir=a.Mb({type:e,selectors:[["","appScrollToFirstInvalid",""]],hostBindings:function(e,t){1&e&&a.ec("submit",function(e){return t.onSubmit(e)})},inputs:{formGroup:"formGroup"}}),e})()},BQXE:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("fXoL");let r=(()=>{class e{transform(e,t,n){return(null==n?void 0:n.length)?-1!==(null==t?void 0:t.findIndex(t=>t[e]===n)):-1!==(null==t?void 0:t.findIndex(t=>t===e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Qb({name:"filterList",type:e,pure:!0}),e})()},ErpD:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n("/Tr7"),r=n("1vjI"),i=n("/h9T"),o=n("Szzx"),s=n("jIYg");function c(e,t){Object(s.a)(1,arguments);var n=t||{},a=n.locale,c=a&&a.options&&a.options.firstWeekContainsDate,d=null==c?1:Object(i.a)(c),l=null==n.firstWeekContainsDate?d:Object(i.a)(n.firstWeekContainsDate),u=Object(o.a)(e,t),b=new Date(0);b.setUTCFullYear(u,0,l),b.setUTCHours(0,0,0,0);var h=Object(r.a)(b,t);return h}function d(e,t){Object(s.a)(1,arguments);var n=Object(a.a)(e),i=Object(r.a)(n,t).getTime()-c(n,t).getTime();return Math.round(i/6048e5)+1}},Ib5w:function(e,t,n){"use strict";function a(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function r(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}t.a={p:r,P:function(e,t){var n,i=e.match(/(P+)(p+)?/),o=i[1],s=i[2];if(!s)return a(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",a(o,t)).replace("{{time}}",r(s,t))}}},Szzx:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("/h9T"),r=n("/Tr7"),i=n("1vjI"),o=n("jIYg");function s(e,t){Object(o.a)(1,arguments);var n=Object(r.a)(e,t),s=n.getUTCFullYear(),c=t||{},d=c.locale,l=d&&d.options&&d.options.firstWeekContainsDate,u=null==l?1:Object(a.a)(l),b=null==c.firstWeekContainsDate?u:Object(a.a)(c.firstWeekContainsDate);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(s+1,0,b),h.setUTCHours(0,0,0,0);var g=Object(i.a)(h,t),p=new Date(0);p.setUTCFullYear(s,0,b),p.setUTCHours(0,0,0,0);var m=Object(i.a)(p,t);return n.getTime()>=g.getTime()?s+1:n.getTime()>=m.getTime()?s:s-1}},YPQb:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("7RJT"),r=n("fXoL");let i=(()=>{class e{constructor(){this.guardians=new a.BehaviorSubject(null),this.contacts=new a.BehaviorSubject(null),this.allergies=new a.BehaviorSubject(null),this.communityResources=new a.BehaviorSubject(null)}observeGuardians(){return this.guardians}refreshGuardians(){this.guardians.next(!0)}observeContacts(){return this.contacts}refreshContacts(){this.contacts.next(!0)}observeAllergies(){return this.allergies}refreshAllergies(e){this.allergies.next(e)}observeCommunityResources(){return this.communityResources}refreshCommunityResources(){this.communityResources.next(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},YRM7:function(e,t,n){"use strict";n.d(t,"a",function(){return xe});var a=n("geco");class r{constructor(){}}class i{constructor(){this.firstName="",this.lastName="",this.address=new r,this.dateOfBirth=0,this.email="",this.password="",this.authenticationProvider="",this.country="",this.mobile="",this.gender="male",this.groupId="",this.type="",this.relationship=""}}n("cauy");var o=n("YPQb"),s=n("igu/"),c=n("qQcL"),d=n("1G5W"),l=n("Kj3r"),u=n("/uUt"),b=n("pLZG"),h=n("eIep"),g=n("2Vo4"),p=n("h51P"),m=n("2sp+"),f=n("fXoL"),v=n("dEAy"),y=n("bNXi"),S=n("pxUr"),T=n("5vDB"),N=n("3Pt+"),M=n("B+r4"),R=n("PTRe"),C=n("ofXK"),_=n("C2AL"),I=n("OzZK"),X=n("RwU8"),A=n("eHCX"),O=n("dRHE");const E=["searchAddress"];function D(e,t){1&e&&(f.Xb(0,"label",33),f.Xc(1," Required "),f.Wb())}function z(e,t){1&e&&(f.Xb(0,"label",33),f.Xc(1," Required "),f.Wb())}function W(e,t){1&e&&(f.Xb(0,"label",33),f.Xc(1," Required "),f.Wb())}function P(e,t){1&e&&(f.Xb(0,"label",33),f.Xc(1," Required "),f.Wb())}function w(e,t){1&e&&(f.Xb(0,"label",33),f.Xc(1," Phone number must be at least 6 characters long. "),f.Wb())}function x(e,t){1&e&&(f.Xb(0,"label",33),f.Xc(1," Phone number must be less than 16 characters. "),f.Wb())}const j=function(e){return{border:e}},k=function(){return[16,48]};let U=(()=>{class e extends c.a{constructor(e,t,n,a,r,o,s){super(),this._patientsService=e,this._modalRef=t,this._patientViewRefreshService=n,this._notificationsService=a,this._dataSharingService=r,this.mapsAPILoader=o,this._googleLocationService=s,this.zipCodeSearch$=new g.a(""),this.guardian=new i,this._dataSharingService.tenantSettings.pipe(Object(d.a)(this.unsubscribed)).subscribe(e=>{e&&(this.countryCode=null==e?void 0:e.countryCode)})}ngAfterViewInit(){this.guardianUser&&(this.guardian.firstName=this.guardianUser.firstName,this.guardian.lastName=this.guardianUser.lastName,this.guardian.relationship=this.guardianUser.relationship,this.guardian.email=this.guardianUser.email,this.guardian.mobile=this.guardianUser.mobile,this.guardianUser.address&&(this.guardian.address=this.guardianUser.address)),this.getLocationFromZipcode(),this.searchAddress()}validate(){return this.guardian.firstName&&this.guardian.lastName&&this.guardian.relationship&&this.guardian.mobile}save(){this.validate()&&(this.guardianUser?this.updateGuardianInfo():this.createNewGuardian())}createNewGuardian(){this.guardian.tenantId=localStorage.getItem("loggedInTenant"),this.guardian.type="GUARDIAN",this.guardian.guardianOf=this.patientId,this.guardian.countryCode="+91",this._patientsService.createNewGuardian(this.patientId,this.guardian).subscribe(()=>{this._notificationsService.success("Guardians","Guardian added successfully!"),this._modalRef.close(!0)})}updateGuardianInfo(){this.guardianUser.firstName=this.guardian.firstName,this.guardianUser.lastName=this.guardian.lastName,this.guardianUser.relationship=this.guardian.relationship,this.guardianUser.email=this.guardian.email,this.guardianUser.mobile=this.guardian.mobile,this.guardianUser.address=this.guardian.address,this._patientsService.updateGuardianUser(this.patientId,this.guardianUser).subscribe(()=>{this._notificationsService.success("Guardians","Guardian updated successfully!"),this._patientViewRefreshService.refreshGuardians(),this._modalRef.close(!0)})}onZipCodeChange(e){this.zipCodeSearch$.next(e)}getLocationFromZipcode(){this.zipCodeSearch$.asObservable().pipe(Object(l.a)(500),Object(u.a)(),Object(b.a)(e=>(null==e?void 0:e.length)>4),Object(h.a)(e=>this._googleLocationService.fetchLocationFromZipCode(e))).pipe(Object(d.a)(this.unsubscribed)).subscribe(e=>{var t,n;let a,i,o;0!=(null===(t=null==e?void 0:e.results)||void 0===t?void 0:t.length)&&(null===(n=null==e?void 0:e.results)||void 0===n||n.forEach(e=>{var t;null===(t=null==e?void 0:e.address_components)||void 0===t||t.forEach(e=>{var t,n,r;-1!==(null===(t=null==e?void 0:e.types)||void 0===t?void 0:t.findIndex(e=>"country"===e))&&(a=e.long_name),-1!==(null===(n=null==e?void 0:e.types)||void 0===n?void 0:n.findIndex(e=>"administrative_area_level_1"===e))&&(i=e.long_name),-1!==(null===(r=null==e?void 0:e.types)||void 0===r?void 0:r.findIndex(e=>"locality"===e))&&(o=e.long_name)})}),null==this.guardian.address&&(this.guardian.address=new r),this.guardian.address.city=o,this.guardian.address.state=i,this.guardian.address.country=a)})}searchAddress(){this.mapsAPILoader.load().then(()=>{var e;const t=new google.maps.places.Autocomplete(null===(e=this.searchElementRef)||void 0===e?void 0:e.nativeElement);t.addListener("place_changed",()=>{const e=m.a.mapAddress(t);this.guardian.address=m.a.convertToAddress(e)})})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(v.e),f.Rb(o.a),f.Rb(y.b),f.Rb(s.a),f.Rb(S.b),f.Rb(p.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-guardian-form"]],viewQuery:function(e,t){if(1&e&&f.ed(E,1),2&e){let e;f.Hc(e=f.fc())&&(t.searchElementRef=e.first)}},inputs:{patientId:"patientId",guardianUser:"guardianUser"},features:[f.Ab],decls:95,vars:48,consts:[[1,"container"],[3,"ngSubmit"],["f","ngForm"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-input","","name","firstName","required","",3,"ngModel","ngStyle","ngModelChange"],["firstName","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],["nz-input","","name","lastName","required","",3,"ngModel","ngStyle","ngModelChange"],["lastName","ngModel"],["nz-col","","nzSpan","24"],["nz-input","","name","relationship","maxlength","30","required","",3,"ngModel","ngStyle","ngModelChange"],["relationship","ngModel"],["nz-input","","name","email","type","email",3,"ngModel","ngModelChange"],[3,"nzAddOnBefore"],["oninput","this.value=this.value.replace(/[^\\d]/,'')","nz-input","","readonly","","required","","minlength","6","maxlength","15","onfocus","this.removeAttribute('readonly')","name","mobile",3,"ngModel","ngModelChange"],["mobile","ngModel"],["nz-row","",3,"nzGutter"],["name","streetAddress","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["searchAddress","","streetAddress","ngModel"],["name","streetAddress2","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["streetAddress2","ngModel"],["nz-col","","nzSpan","6"],["name","zipCode","name","zipCode","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["name","country","name","country","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["country","ngModel"],["name","state","name","state","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["state","ngModel"],["name","city","name","city","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["city","ngModel"],[1,"save-btn-container"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"h3"),f.Xc(2,"Add a guardian"),f.Wb(),f.Sb(3,"nz-divider"),f.Xb(4,"form",1,2),f.ec("ngSubmit",function(){return t.save()}),f.Xb(6,"div",3),f.Xb(7,"div",4),f.Xb(8,"h4"),f.Xc(9,"First Name*"),f.Wb(),f.Xb(10,"input",5,6),f.ec("ngModelChange",function(e){return t.guardian.firstName=e}),f.Wb(),f.Vc(12,D,2,0,"label",7),f.Wb(),f.Xb(13,"div",4),f.Xb(14,"h4"),f.Xc(15,"Last Name*"),f.Wb(),f.Xb(16,"input",8,9),f.ec("ngModelChange",function(e){return t.guardian.lastName=e}),f.Wb(),f.Vc(18,z,2,0,"label",7),f.Wb(),f.Wb(),f.Sb(19,"br"),f.Xb(20,"div",3),f.Xb(21,"div",10),f.Xb(22,"h4"),f.Xc(23,"Relationship with the patient*"),f.Wb(),f.Xb(24,"input",11,12),f.ec("ngModelChange",function(e){return t.guardian.relationship=e}),f.Wb(),f.Vc(26,W,2,0,"label",7),f.Wb(),f.Wb(),f.Sb(27,"br"),f.Xb(28,"div",3),f.Xb(29,"div",4),f.Xb(30,"h4"),f.Xc(31,"E-mail"),f.Wb(),f.Xb(32,"input",13),f.ec("ngModelChange",function(e){return t.guardian.email=e}),f.Wb(),f.Wb(),f.Xb(33,"div",4),f.Xb(34,"h4"),f.Xc(35,"Phone number*"),f.Wb(),f.Xb(36,"nz-input-group",14),f.Xb(37,"input",15,16),f.ec("ngModelChange",function(e){return t.guardian.mobile=e}),f.Wb(),f.Wb(),f.Vc(39,P,2,0,"label",7),f.Vc(40,w,2,0,"label",7),f.Vc(41,x,2,0,"label",7),f.Wb(),f.Wb(),f.Sb(42,"br"),f.Xb(43,"div",17),f.Xb(44,"div",4),f.Xb(45,"label"),f.Xc(46),f.jc(47,"translate"),f.Wb(),f.Wb(),f.Xb(48,"div",4),f.Xb(49,"label"),f.Xc(50),f.jc(51,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(52,"div",3),f.Xb(53,"div",4),f.Xb(54,"input",18,19),f.ec("ngModelChange",function(e){return t.guardian.address.line1=e}),f.Wb(),f.Wb(),f.Xb(57,"div",4),f.Xb(58,"input",20,21),f.ec("ngModelChange",function(e){return t.guardian.address.line2=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(60,"br"),f.Xb(61,"div",3),f.Xb(62,"div",22),f.Xb(63,"label"),f.Xc(64),f.jc(65,"translate"),f.Wb(),f.Wb(),f.Xb(66,"div",22),f.Xb(67,"label"),f.Xc(68),f.jc(69,"translate"),f.Wb(),f.Wb(),f.Xb(70,"div",22),f.Xb(71,"label"),f.Xc(72),f.jc(73,"translate"),f.Wb(),f.Wb(),f.Xb(74,"div",22),f.Xb(75,"label"),f.Xc(76),f.jc(77,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(78,"div",3),f.Xb(79,"div",22),f.Xb(80,"input",23,24),f.ec("ngModelChange",function(e){return t.guardian.address.zipCode=e})("ngModelChange",function(e){return t.onZipCodeChange(e)}),f.Wb(),f.Wb(),f.Xb(82,"div",22),f.Xb(83,"input",25,26),f.ec("ngModelChange",function(e){return t.guardian.address.country=e}),f.Wb(),f.Wb(),f.Xb(85,"div",22),f.Xb(86,"input",27,28),f.ec("ngModelChange",function(e){return t.guardian.address.state=e}),f.Wb(),f.Wb(),f.Xb(88,"div",22),f.Xb(89,"input",29,30),f.ec("ngModelChange",function(e){return t.guardian.address.city=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(91,"br"),f.Xb(92,"div",31),f.Xb(93,"button",32),f.Xc(94,"Save"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.Ic(5),n=f.Ic(11),a=f.Ic(17),r=f.Ic(25),i=f.Ic(38);f.Db(10),f.rc("ngModel",t.guardian.firstName)("ngStyle",f.yc(41,j,(n.dirty||n.touched)&&n.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(n.dirty||n.touched)&&n.errors),f.Db(4),f.rc("ngModel",t.guardian.lastName)("ngStyle",f.yc(43,j,(a.dirty||a.touched)&&a.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(a.dirty||a.touched)&&a.errors),f.Db(6),f.rc("ngModel",t.guardian.relationship)("ngStyle",f.yc(45,j,(r.dirty||r.touched)&&r.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(r.dirty||r.touched)&&r.errors),f.Db(6),f.rc("ngModel",t.guardian.email),f.Db(4),f.tc("nzAddOnBefore","[",t.countryCode,"]"),f.Db(1),f.rc("ngModel",t.guardian.mobile),f.Db(2),f.rc("ngIf",(i.dirty||i.touched)&&(null==i.errors?null:i.errors.required)),f.Db(1),f.rc("ngIf",((null==i?null:i.dirty)||(null==i?null:i.touched))&&(null==i||null==i.errors?null:i.errors.minlength)),f.Db(1),f.rc("ngIf",((null==i?null:i.dirty)||(null==i?null:i.touched))&&(null==i||null==i.errors?null:i.errors.maxlength)),f.Db(2),f.rc("nzGutter",f.xc(47,k)),f.Db(3),f.Yc(f.kc(47,29,"SITE.ADDRESS_LINE_1")),f.Db(4),f.Yc(f.kc(51,31,"COMMON.LINE_2")),f.Db(4),f.rc("ngModel",t.guardian.address.line1),f.Db(4),f.rc("ngModel",t.guardian.address.line2),f.Db(6),f.Yc(f.kc(65,33,"ZIP_CODE")),f.Db(4),f.Yc(f.kc(69,35,"COMMON.COUNTRY")),f.Db(4),f.Yc(f.kc(73,37,"COMMON.STATE")),f.Db(4),f.Yc(f.kc(77,39,"COMMON.CITY")),f.Db(4),f.rc("ngModel",t.guardian.address.zipCode),f.Db(3),f.rc("ngModel",t.guardian.address.country),f.Db(3),f.rc("ngModel",t.guardian.address.state),f.Db(3),f.rc("ngModel",t.guardian.address.city),f.Db(4),f.rc("disabled",e.invalid)}},directives:[T.a,N.F,N.v,N.w,M.c,M.a,R.b,N.d,N.C,N.u,N.x,C.r,C.q,N.p,_.a,R.c,N.q,I.a,X.a,A.a],pipes:[O.a],styles:["h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}h4[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color)}input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     .ant-typography-danger{margin-top:5px;float:right}.save-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e})();class L{constructor(){this.name="",this.email="",this.type="",this.userId="",this.relationship="",this.address=new r}}var G=n("zAKX");const H=["searchAddress"];function Y(e,t){1&e&&(f.Xb(0,"label",35),f.Xc(1," Required "),f.Wb())}function V(e,t){1&e&&(f.Xb(0,"label",35),f.Xc(1," Required "),f.Wb())}function q(e,t){1&e&&(f.Xb(0,"label",35),f.Xc(1," Phone number must be at least 6 characters long. "),f.Wb())}function F(e,t){1&e&&(f.Xb(0,"label",35),f.Xc(1," Phone number must be less than 16 characters. "),f.Wb())}function B(e,t){1&e&&(f.Xb(0,"label",35),f.Xc(1," Required "),f.Wb())}const $=function(e){return{border:e}},Z=function(){return[16,48]};let J=(()=>{class e extends c.a{constructor(e,t,n,a,r,i){super(),this._patientsService=e,this._modalRef=t,this._notificationsService=n,this._dataSharingService=a,this.mapsAPILoader=r,this._googleLocationService=i,this.zipCodeSearch$=new g.a(""),this._dataSharingService.tenantSettings.pipe(Object(d.a)(this.unsubscribed)).subscribe(e=>{e&&(this.countryCode=null==e?void 0:e.countryCode)})}ngAfterViewInit(){null==this.contact.address&&(this.contact.address=new r),this.getLocationFromZipcode(),this.searchAddress()}validate(){return this.contact.name&&this.contact.mobile&&this.contact.type}save(){this.validate()&&(this.contact.id?this.updateContact():this.createNewContact())}createNewContact(){this.contact.tenantId=localStorage.getItem("loggedInTenant"),this.contact.userId=this.patientId,this.contact.countryCode="+91",this._patientsService.createContact(this.patientId,this.contact).subscribe(()=>{this._notificationsService.success("Contacts","Contact added successfully!"),this._modalRef.close(!0)},e=>{var t,n;this._notificationsService.error(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.title,null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.detail)})}updateContact(){this._patientsService.updateContact(this.patientId,this.contact).subscribe(()=>{this._notificationsService.success("Contacts","Contact updated successfully!"),this._modalRef.close(!0)},e=>{var t,n;this._notificationsService.error(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.title,null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.detail)})}onZipCodeChange(e){this.zipCodeSearch$.next(e)}getLocationFromZipcode(){this.zipCodeSearch$.asObservable().pipe(Object(l.a)(500),Object(u.a)(),Object(b.a)(e=>(null==e?void 0:e.length)>4),Object(h.a)(e=>this._googleLocationService.fetchLocationFromZipCode(e))).pipe(Object(d.a)(this.unsubscribed)).subscribe(e=>{var t,n;let a,i,o;0!=(null===(t=null==e?void 0:e.results)||void 0===t?void 0:t.length)&&(null===(n=null==e?void 0:e.results)||void 0===n||n.forEach(e=>{var t;null===(t=null==e?void 0:e.address_components)||void 0===t||t.forEach(e=>{var t,n,r;-1!==(null===(t=null==e?void 0:e.types)||void 0===t?void 0:t.findIndex(e=>"country"===e))&&(a=e.long_name),-1!==(null===(n=null==e?void 0:e.types)||void 0===n?void 0:n.findIndex(e=>"administrative_area_level_1"===e))&&(i=e.long_name),-1!==(null===(r=null==e?void 0:e.types)||void 0===r?void 0:r.findIndex(e=>"locality"===e))&&(o=e.long_name)})}),null==this.contact.address&&(this.contact.address=new r),this.contact.address.city=o,this.contact.address.state=i,this.contact.address.country=a)})}searchAddress(){this.mapsAPILoader.load().then(()=>{var e;const t=new google.maps.places.Autocomplete(null===(e=this.searchElementRef)||void 0===e?void 0:e.nativeElement);t.addListener("place_changed",()=>{const e=m.a.mapAddress(t);this.contact.address=m.a.convertToAddress(e)})})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(v.e),f.Rb(y.b),f.Rb(s.a),f.Rb(S.b),f.Rb(p.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-contact-form"]],viewQuery:function(e,t){if(1&e&&f.ed(H,1),2&e){let e;f.Hc(e=f.fc())&&(t.searchElementRef=e.first)}},inputs:{patientId:"patientId",contact:"contact"},features:[f.Ab],decls:97,vars:45,consts:[[1,"container"],[3,"ngSubmit"],["f","ngForm"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-input","","name","name","required","",3,"ngModel","ngStyle","ngModelChange"],["name","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],[3,"nzAddOnBefore"],["oninput","this.value=this.value.replace(/[^\\d]/,'')","nz-input","","readonly","","required","","minlength","6","maxlength","15","onfocus","this.removeAttribute('readonly')","name","mobile",3,"ngModel","ngModelChange"],["mobile","ngModel"],["nz-input","","name","relationship","maxlength","30",3,"ngModel","disabled","ngModelChange"],["relationship","ngModel"],["name","type","required","",3,"ngModel","ngStyle","ngModelChange"],["type","ngModel"],["nzValue","EMERGENCY","nzLabel","Emergency"],["nzValue","MEDICAL","nzLabel","Medical"],["nzValue","PERSONAL","nzLabel","Personal"],["nz-input","","type","email","name","email",3,"ngModel","ngModelChange"],["nz-row","",3,"nzGutter"],["name","streetAddress","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["searchAddress","","streetAddress","ngModel"],["name","streetAddress2","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["streetAddress2","ngModel"],["nz-col","","nzSpan","6"],["name","zipCode","name","zipCode","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["zipCode","ngModel"],["name","country","name","country","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["country","ngModel"],["name","state","name","state","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["state","ngModel"],["name","city","name","city","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')",3,"ngModel","ngModelChange"],["city","ngModel"],[1,"save-btn-container"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"h3"),f.Xc(2,"Add a contact"),f.Wb(),f.Sb(3,"nz-divider"),f.Xb(4,"form",1,2),f.ec("ngSubmit",function(){return t.save()}),f.Xb(6,"div",3),f.Xb(7,"div",4),f.Xb(8,"h4"),f.Xc(9,"First & Last Name*"),f.Wb(),f.Xb(10,"input",5,6),f.ec("ngModelChange",function(e){return t.contact.name=e}),f.Wb(),f.Vc(12,Y,2,0,"label",7),f.Wb(),f.Xb(13,"div",4),f.Xb(14,"h4"),f.Xc(15,"Phone number*"),f.Wb(),f.Xb(16,"nz-input-group",8),f.Xb(17,"input",9,10),f.ec("ngModelChange",function(e){return t.contact.mobile=e}),f.Wb(),f.Wb(),f.Vc(19,V,2,0,"label",7),f.Vc(20,q,2,0,"label",7),f.Vc(21,F,2,0,"label",7),f.Wb(),f.Wb(),f.Sb(22,"br"),f.Xb(23,"div",3),f.Xb(24,"div",4),f.Xb(25,"h4"),f.Xc(26,"Relationship with the patient"),f.Wb(),f.Xb(27,"input",11,12),f.ec("ngModelChange",function(e){return t.contact.relationship=e}),f.Wb(),f.Wb(),f.Xb(29,"div",4),f.Xb(30,"h4"),f.Xc(31,"Contact Type*"),f.Wb(),f.Xb(32,"nz-select",13,14),f.ec("ngModelChange",function(e){return t.contact.type=e}),f.Sb(34,"nz-option",15),f.Sb(35,"nz-option",16),f.Sb(36,"nz-option",17),f.Wb(),f.Vc(37,B,2,0,"label",7),f.Wb(),f.Wb(),f.Sb(38,"br"),f.Xb(39,"div",3),f.Xb(40,"div",4),f.Xb(41,"h4"),f.Xc(42,"E-mail"),f.Wb(),f.Xb(43,"input",18),f.ec("ngModelChange",function(e){return t.contact.email=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(44,"br"),f.Xb(45,"div",19),f.Xb(46,"div",4),f.Xb(47,"label"),f.Xc(48),f.jc(49,"translate"),f.Wb(),f.Wb(),f.Xb(50,"div",4),f.Xb(51,"label"),f.Xc(52),f.jc(53,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(54,"div",3),f.Xb(55,"div",4),f.Xb(56,"input",20,21),f.ec("ngModelChange",function(e){return t.contact.address.line1=e}),f.Wb(),f.Wb(),f.Xb(59,"div",4),f.Xb(60,"input",22,23),f.ec("ngModelChange",function(e){return t.contact.address.line2=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(62,"br"),f.Xb(63,"div",3),f.Xb(64,"div",24),f.Xb(65,"label"),f.Xc(66),f.jc(67,"translate"),f.Wb(),f.Wb(),f.Xb(68,"div",24),f.Xb(69,"label"),f.Xc(70),f.jc(71,"translate"),f.Wb(),f.Wb(),f.Xb(72,"div",24),f.Xb(73,"label"),f.Xc(74),f.jc(75,"translate"),f.Wb(),f.Wb(),f.Xb(76,"div",24),f.Xb(77,"label"),f.Xc(78),f.jc(79,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(80,"div",3),f.Xb(81,"div",24),f.Xb(82,"input",25,26),f.ec("ngModelChange",function(e){return t.contact.address.zipCode=e})("ngModelChange",function(e){return t.onZipCodeChange(e)}),f.Wb(),f.Wb(),f.Xb(84,"div",24),f.Xb(85,"input",27,28),f.ec("ngModelChange",function(e){return t.contact.address.country=e}),f.Wb(),f.Wb(),f.Xb(87,"div",24),f.Xb(88,"input",29,30),f.ec("ngModelChange",function(e){return t.contact.address.state=e}),f.Wb(),f.Wb(),f.Xb(90,"div",24),f.Xb(91,"input",31,32),f.ec("ngModelChange",function(e){return t.contact.address.city=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(93,"br"),f.Xb(94,"div",33),f.Xb(95,"button",34),f.Xc(96,"Save"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.Ic(5),n=f.Ic(11),a=f.Ic(18),r=f.Ic(33);f.Db(10),f.rc("ngModel",t.contact.name)("ngStyle",f.yc(40,$,(n.dirty||n.touched)&&n.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(n.dirty||n.touched)&&n.errors),f.Db(4),f.tc("nzAddOnBefore","[",t.countryCode,"]"),f.Db(1),f.rc("ngModel",t.contact.mobile),f.Db(2),f.rc("ngIf",(a.dirty||a.touched)&&(null==a.errors?null:a.errors.required)),f.Db(1),f.rc("ngIf",((null==a?null:a.dirty)||(null==a?null:a.touched))&&(null==a||null==a.errors?null:a.errors.minlength)),f.Db(1),f.rc("ngIf",((null==a?null:a.dirty)||(null==a?null:a.touched))&&(null==a||null==a.errors?null:a.errors.maxlength)),f.Db(6),f.rc("ngModel",t.contact.relationship)("disabled","MEDICAL"===t.contact.type),f.Db(5),f.rc("ngModel",t.contact.type)("ngStyle",f.yc(42,$,(r.dirty||r.touched)&&r.errors?"1px solid red":"")),f.Db(5),f.rc("ngIf",(r.dirty||r.touched)&&r.errors),f.Db(6),f.rc("ngModel",t.contact.email),f.Db(2),f.rc("nzGutter",f.xc(44,Z)),f.Db(3),f.Yc(f.kc(49,28,"SITE.ADDRESS_LINE_1")),f.Db(4),f.Yc(f.kc(53,30,"COMMON.LINE_2")),f.Db(4),f.rc("ngModel",t.contact.address.line1),f.Db(4),f.rc("ngModel",t.contact.address.line2),f.Db(6),f.Yc(f.kc(67,32,"ZIP_CODE")),f.Db(4),f.Yc(f.kc(71,34,"COMMON.COUNTRY")),f.Db(4),f.Yc(f.kc(75,36,"COMMON.STATE")),f.Db(4),f.Yc(f.kc(79,38,"COMMON.CITY")),f.Db(4),f.rc("ngModel",t.contact.address.zipCode),f.Db(3),f.rc("ngModel",t.contact.address.country),f.Db(3),f.rc("ngModel",t.contact.address.state),f.Db(3),f.rc("ngModel",t.contact.address.city),f.Db(4),f.rc("disabled",e.invalid)}},directives:[T.a,N.F,N.v,N.w,M.c,M.a,R.b,N.d,N.C,N.u,N.x,C.r,C.q,_.a,R.c,N.q,N.p,G.d,G.a,I.a,X.a,A.a],pipes:[O.a],styles:["h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}h4[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color)}input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box}[_nghost-%COMP%]     .ant-input-group-addon{color:#8a8a8a!important;font-size:10px!important}[_nghost-%COMP%]     .ant-typography-danger{margin-top:5px;float:right}.save-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e})();class Q{constructor(){}}function K(e,t){1&e&&(f.Xb(0,"label",15),f.Xc(1," Required "),f.Wb())}function ee(e,t){1&e&&(f.Xb(0,"label",15),f.Xc(1," Required "),f.Wb())}function te(e,t){1&e&&(f.Xb(0,"label",15),f.Xc(1," Required "),f.Wb())}const ne=function(e){return{border:e}};let ae=(()=>{class e{constructor(e,t,n){this._patientsService=e,this._modalRef=t,this._notificationsService=n}validate(){var e;return this.allergy.name&&this.allergy.level&&(null===(e=this.allergy.symptoms)||void 0===e?void 0:e.length)}save(){this.validate()&&(this.isNewAllergy?this._modalRef.close(this.allergy):this.assignNewAllergy())}assignNewAllergy(){this._patientsService.assignAllergyToPatient(this.patientId,this.allergy).subscribe(()=>{this._notificationsService.success("Allergies","Allergy added successfully!"),this._modalRef.close(this.allergy)})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(v.e),f.Rb(y.b))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-allergies-form"]],inputs:{patientId:"patientId",allergy:"allergy",isNewAllergy:"isNewAllergy"},decls:33,vars:16,consts:[[1,"container"],[3,"ngSubmit"],["f","ngForm"],["nz-input","","name","name","required","",3,"ngModel","ngStyle","ngModelChange"],["name","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],["name","level","required","",3,"ngModel","ngStyle","ngModelChange"],["level","ngModel"],["nzValue","LOW","nzLabel","Low"],["nzValue","NORMAL","nzLabel","Normal"],["nzValue","HIGH","nzLabel","High"],["nzValue","SEVERE","nzLabel","Severe"],["nzMode","tags","name","symptoms","required","",3,"ngModel","ngStyle","ngModelChange"],["symptoms","ngModel"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"h3"),f.Xc(2,"Add allergy"),f.Wb(),f.Sb(3,"br"),f.Xb(4,"form",1,2),f.ec("ngSubmit",function(){return t.save()}),f.Xb(6,"h4"),f.Xc(7,"Name*"),f.Wb(),f.Xb(8,"input",3,4),f.ec("ngModelChange",function(e){return t.allergy.name=e}),f.Wb(),f.Vc(10,K,2,0,"label",5),f.Sb(11,"br"),f.Sb(12,"br"),f.Xb(13,"h4"),f.Xc(14,"Severity*"),f.Wb(),f.Xb(15,"nz-select",6,7),f.ec("ngModelChange",function(e){return t.allergy.level=e}),f.Sb(17,"nz-option",8),f.Sb(18,"nz-option",9),f.Sb(19,"nz-option",10),f.Sb(20,"nz-option",11),f.Wb(),f.Vc(21,ee,2,0,"label",5),f.Sb(22,"br"),f.Sb(23,"br"),f.Xb(24,"h4"),f.Xc(25,"Symptoms*"),f.Wb(),f.Xb(26,"nz-select",12,13),f.ec("ngModelChange",function(e){return t.allergy.symptoms=e}),f.Wb(),f.Vc(28,te,2,0,"label",5),f.Sb(29,"br"),f.Sb(30,"br"),f.Xb(31,"button",14),f.Xc(32,"Save"),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.Ic(5),n=f.Ic(9),a=f.Ic(16),r=f.Ic(27);f.Db(8),f.rc("ngModel",t.allergy.name)("ngStyle",f.yc(10,ne,(n.dirty||n.touched)&&n.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(n.dirty||n.touched)&&n.errors),f.Db(5),f.rc("ngModel",t.allergy.level)("ngStyle",f.yc(12,ne,(a.dirty||a.touched)&&a.errors?"1px solid red":"")),f.Db(6),f.rc("ngIf",(a.dirty||a.touched)&&a.errors),f.Db(5),f.rc("ngModel",t.allergy.symptoms)("ngStyle",f.yc(14,ne,(r.dirty||r.touched)&&r.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(r.dirty||r.touched)&&r.errors),f.Db(3),f.rc("disabled",e.invalid)}},directives:[N.F,N.v,N.w,R.b,N.d,N.C,N.u,N.x,C.r,C.q,G.d,G.a,I.a,X.a,_.a,A.a],styles:["h3[_ngcontent-%COMP%]{font:normal normal 700 15px/23px Nunito;letter-spacing:-.38px;color:#2b2b2b}h4[_ngcontent-%COMP%]{font:normal normal normal 12px/16px Nunito;color:var(--tertiary-color)}[_nghost-%COMP%]     .ant-btn{width:75%;display:block;margin:auto}input[_ngcontent-%COMP%]{background:#fbfbfb 0 0 no-repeat padding-box}"]}),e})();var re=n("WoUL");class ie{}var oe=n("MXg9"),se=n("3CdQ"),ce=n("bE2y");function de(e,t){1&e&&(f.Vb(0),f.Xb(1,"span",10),f.Xc(2),f.jc(3,"translate"),f.Wb(),f.Ub()),2&e&&(f.Db(2),f.Yc(f.kc(3,1,"COMMON.REQUIRED")))}const le=function(e){return{border:e}};let ue=(()=>{class e{constructor(e,t,n,a,r){this.translationService=e,this.patientsService=t,this._modalRef=n,this._notificationsService=a,this.physicianService=r,this.strings=["PATIENT.DISCHARGE_PATIENT.INACTIVE_PATIENT","PATIENT.DISCHARGE_PATIENT.PATIENT_CHANGED_PROVIDER","PATIENT.DISCHARGE_PATIENT.MOVED_OUT_OF_SERVICE_AREA","PATIENT.DISCHARGE_PATIENT.DO_NOT_WISH_TO_CONTINUE_PROGRAM","PATIENT.DISCHARGE_PATIENT.CHANGED_INSURANCE_AND_DOES_NOT_SUPPORT_PROGRAM","PATIENT.DISCHARGE_PATIENT.OTHER"]}ngOnInit(){this.initTranslationStrings(),this.physicianService.physicianName.subscribe(e=>{this.physicianFullName=e.slice(1,e.length-1)})}initTranslationStrings(){this.$translationSubscription=this.translationService.getMultiple(...this.strings).subscribe(e=>{this.translatedStrings=e})}onDischargeReasonChange(){var e;this.otherReasonRequired=this.dischargeAttempted&&"other"===this.dischargeReason&&!(null===(e=this.otherReasons)||void 0===e?void 0:e.trim())}dischargePatient(){var e;let t=[];if("inactivePatient"===this.dischargeReason)t.push(this.getReason("PATIENT.DISCHARGE_PATIENT.INACTIVE_PATIENT"));else if("changedProvider"===this.dischargeReason)t.push(this.getReason("PATIENT.DISCHARGE_PATIENT.PATIENT_CHANGED_PROVIDER"));else if("movedOutOfServiceArea"===this.dischargeReason)t.push(this.getReason("PATIENT.DISCHARGE_PATIENT.MOVED_OUT_OF_SERVICE_AREA"));else if("doNotWishToContinue"===this.dischargeReason)t.push(this.getReason("PATIENT.DISCHARGE_PATIENT.DO_NOT_WISH_TO_CONTINUE_PROGRAM"));else if("changedInsurance"===this.dischargeReason)t.push(this.getReason("PATIENT.DISCHARGE_PATIENT.CHANGED_INSURANCE_AND_DOES_NOT_SUPPORT_PROGRAM"));else if("other"===this.dischargeReason){if(!(null===(e=this.otherReasons)||void 0===e?void 0:e.trim()))return this.dischargeAttempted=!0,void(this.otherReasonRequired=!0);t.push(this.translatedStrings.get("PATIENT.DISCHARGE_PATIENT.OTHER")+" : "+this.otherReasons)}if(t.push(".</br> The patient was discharged from the physician, "+this.physicianFullName),t=t.join(""),0===t.length)return;let n=new ie;n.newState=oe.a.DISCHARGED,n.reason=t.toString(),this.patientsService.updatePatientStatus(this.patientId,n).subscribe(()=>{this._notificationsService.success("Patient Discharged","The patient has been discharged."),this._modalRef.close("success")},e=>{this._notificationsService.error("Patient Discharge Error","The patient discharge could not be completed")})}getReason(e){var t;return this.translatedStrings.get(e)+((null===(t=this.otherReasons)||void 0===t?void 0:t.trim())?" : "+this.otherReasons:"")}onOtherReasonsChange(){var e;this.otherReasonRequired=!(null===(e=this.otherReasons)||void 0===e?void 0:e.trim())}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(re.a),f.Rb(a.a),f.Rb(v.e),f.Rb(y.b),f.Rb(se.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-patient-discharge-form"]],inputs:{patientId:"patientId",patientName:"patientName"},decls:36,vars:39,consts:[[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","inactivePatient"],["nz-radio","","nzValue","changedProvider"],["nz-radio","","nzValue","movedOutOfServiceArea"],["nz-radio","","nzValue","doNotWishToContinue"],["nz-radio","","nzValue","changedInsurance"],["nz-radio","","nzValue","other"],["nz-input","","rows","2",3,"ngModel","ngStyle","ngModelChange"],[4,"ngIf"],["nz-button","","nzType","primary","nzSize","large",3,"disabled","click"],[2,"color","red"]],template:function(e,t){1&e&&(f.Xb(0,"h3"),f.Xc(1),f.jc(2,"translate"),f.Wb(),f.Xb(3,"h5"),f.Xc(4),f.Wb(),f.Xb(5,"h5"),f.Xc(6),f.jc(7,"translate"),f.Wb(),f.Xb(8,"nz-radio-group",0),f.ec("ngModelChange",function(e){return t.dischargeReason=e})("ngModelChange",function(){return t.onDischargeReasonChange()}),f.Xb(9,"label",1),f.Xc(10),f.jc(11,"translate"),f.Wb(),f.Xb(12,"label",2),f.Xc(13),f.jc(14,"translate"),f.Wb(),f.Xb(15,"label",3),f.Xc(16),f.jc(17,"translate"),f.Wb(),f.Xb(18,"label",4),f.Xc(19),f.jc(20,"translate"),f.Wb(),f.Xb(21,"label",5),f.Xc(22),f.jc(23,"translate"),f.Wb(),f.Xb(24,"label",6),f.Xc(25),f.jc(26,"translate"),f.Wb(),f.Wb(),f.Sb(27,"br"),f.Xb(28,"h5"),f.Xc(29),f.jc(30,"translate"),f.Wb(),f.Xb(31,"textarea",7),f.ec("ngModelChange",function(e){return t.otherReasons=e})("ngModelChange",function(){return t.onOtherReasonsChange()}),f.Wb(),f.Vc(32,de,4,3,"ng-container",8),f.Xb(33,"button",9),f.ec("click",function(){return t.dischargePatient()}),f.Xc(34),f.jc(35,"translate"),f.Wb()),2&e&&(f.Db(1),f.Yc(f.kc(2,17,"PATIENT.DISCHARGE_PATIENT")),f.Db(3),f.ad("",t.patientName," is being discharged from physician ",t.physicianFullName,""),f.Db(2),f.Yc(f.kc(7,19,"PATIENT.DISCHARGE_PATIENT.REASON_FOR_DISCHARGE")),f.Db(2),f.rc("ngModel",t.dischargeReason),f.Db(2),f.Yc(f.kc(11,21,"PATIENT.DISCHARGE_PATIENT.INACTIVE_PATIENT")),f.Db(3),f.Yc(f.kc(14,23,"PATIENT.DISCHARGE_PATIENT.PATIENT_CHANGED_PROVIDER")),f.Db(3),f.Yc(f.kc(17,25,"PATIENT.DISCHARGE_PATIENT.MOVED_OUT_OF_SERVICE_AREA")),f.Db(3),f.Yc(f.kc(20,27,"PATIENT.DISCHARGE_PATIENT.DO_NOT_WISH_TO_CONTINUE_PROGRAM")),f.Db(3),f.Yc(f.kc(23,29,"PATIENT.DISCHARGE_PATIENT.CHANGED_INSURANCE_AND_DOES_NOT_SUPPORT_PROGRAM")),f.Db(3),f.Yc(f.kc(26,31,"PATIENT.DISCHARGE_PATIENT.OTHER")),f.Db(4),f.Yc(f.kc(30,33,"PATIENT.DISCHARGE_PATIENT.NOTE")),f.Db(2),f.rc("ngModel",t.otherReasons)("ngStyle",f.yc(37,le,t.otherReasonRequired?"1px solid red":"")),f.Db(1),f.rc("ngIf",t.otherReasonRequired),f.Db(1),f.rc("disabled",!t.dischargeReason||"other"===t.dischargeReason&&!t.otherReasons),f.Db(1),f.Zc(" ",f.kc(35,35,"PATIENT.DISCHARGE_PATIENT"),"\n"))},directives:[ce.c,N.u,N.x,ce.b,R.b,N.d,C.r,C.q,I.a,X.a,_.a],pipes:[O.a],styles:["[nz-radio][_ngcontent-%COMP%]{display:block;line-height:30px}button[_ngcontent-%COMP%]{display:block;margin:10px auto 0;width:55%}"]}),e})();function be(e,t){1&e&&(f.Vb(0),f.Xb(1,"span",8),f.Xc(2),f.jc(3,"translate"),f.Wb(),f.Ub()),2&e&&(f.Db(2),f.Yc(f.kc(3,1,"COMMON.REQUIRED")))}const he=function(e){return{border:e}};let ge=(()=>{class e{constructor(e,t,n,a){this.translationService=e,this.patientsService=t,this._modalRef=n,this._notificationsService=a,this.strings=["PATIENT.NOT_ONBOARDED_REASON.MARK_AS_NOT_ONBOARDED","PATIENT.NOT_ONBOARDED_REASON.REASON_FOR_NOT_ONBOARDING","PATIENT.NOT_ONBOARDED_REASON.PROVIDER_DOES_NOT_RECOMMEND","PATIENT.NOT_ONBOARDED_REASON.NO_ANSWER_DURING_SCHEDULED_APPOINTMENT","PATIENT.NOT_ONBOARDED_REASON.PATIENT_DECLINED","PATIENT.NOT_ONBOARDED_REASON.OTHER","PATIENT.NOT_ONBOARDED.MESSAGE"]}ngOnInit(){this.initTranslationStrings(),this.message=this.translatedStrings.get("PATIENT.NOT_ONBOARDED.MESSAGE").replace("{PATIENT}",this.patientName)}initTranslationStrings(){this.$translationSubscription=this.translationService.getMultiple(...this.strings).subscribe(e=>{this.translatedStrings=e})}onNotOnboardedReasonChange(){var e;this.otherReasonRequired=this.notOnboardingAttempted&&"other"===this.notOnboardedReason&&!(null===(e=this.otherReasons)||void 0===e?void 0:e.trim())}suspendEpisode(){var e;let t=[];if("providerDoesNotRecommend"===this.notOnboardedReason)t.push(this.translatedStrings.get("PATIENT.NOT_ONBOARDED_REASON.PROVIDER_DOES_NOT_RECOMMEND"));else if("noAnswer"===this.notOnboardedReason)t.push(this.translatedStrings.get("PATIENT.NOT_ONBOARDED_REASON.NO_ANSWER_DURING_SCHEDULED_APPOINTMENT"));else if("patientDeclined"===this.notOnboardedReason)t.push(this.translatedStrings.get("PATIENT.NOT_ONBOARDED_REASON.PATIENT_DECLINED"));else if("other"===this.notOnboardedReason){if(!(null===(e=this.otherReasons)||void 0===e?void 0:e.trim()))return this.notOnboardingAttempted=!0,void(this.otherReasonRequired=!0);t.push(this.translatedStrings.get("PATIENT.NOT_ONBOARDED_REASON.OTHER")+" : "+this.otherReasons)}if(0===t.length)return;let n=new ie;n.newState=oe.a.NOT_ONBOARDED,n.reason=t.toString(),this.patientsService.updatePatientStatus(this.patientId,n).subscribe(()=>{let e={};e.assignerId=localStorage.getItem("loggedInUser"),e.archived=!1,e.reason=t.toString(),this._notificationsService.success("Patient Not Onboarded","The patient could not be onboarded."),this._modalRef.close(e)},e=>{this._notificationsService.success("Patient Onboard Error","Error while onboarding patient")})}onOtherReasonsChange(){var e;this.otherReasonRequired=!(null===(e=this.otherReasons)||void 0===e?void 0:e.trim())}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(re.a),f.Rb(a.a),f.Rb(v.e),f.Rb(y.b))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-patient-not-onboarded-form"]],inputs:{patientId:"patientId",patientName:"patientName"},decls:29,vars:33,consts:[[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","providerDoesNotRecommend"],["nz-radio","","nzValue","patientDeclined"],["nz-radio","","nzValue","noAnswer"],["nz-radio","","nzValue","other"],["nz-input","","rows","2",3,"ngModel","disabled","ngStyle","ngModelChange"],[4,"ngIf"],["nz-button","","nzType","primary","nzSize","large",3,"disabled","click"],[2,"color","red"]],template:function(e,t){1&e&&(f.Xb(0,"h3"),f.Xc(1),f.jc(2,"translate"),f.Wb(),f.Xb(3,"p"),f.Xc(4),f.Wb(),f.Xb(5,"h5"),f.Xc(6),f.jc(7,"translate"),f.Wb(),f.Xb(8,"nz-radio-group",0),f.ec("ngModelChange",function(e){return t.notOnboardedReason=e})("ngModelChange",function(){return t.onNotOnboardedReasonChange()}),f.Xb(9,"label",1),f.Xc(10),f.jc(11,"translate"),f.Wb(),f.Xb(12,"label",2),f.Xc(13),f.jc(14,"translate"),f.Wb(),f.Xb(15,"label",3),f.Xc(16),f.jc(17,"translate"),f.Wb(),f.Xb(18,"label",4),f.Xc(19),f.jc(20,"translate"),f.Wb(),f.Wb(),f.Xb(21,"h5"),f.Xc(22),f.jc(23,"translate"),f.Wb(),f.Xb(24,"textarea",5),f.ec("ngModelChange",function(e){return t.otherReasons=e})("ngModelChange",function(){return t.onOtherReasonsChange()}),f.Wb(),f.Vc(25,be,4,3,"ng-container",6),f.Xb(26,"button",7),f.ec("click",function(){return t.suspendEpisode()}),f.Xc(27),f.jc(28,"translate"),f.Wb()),2&e&&(f.Db(1),f.Yc(f.kc(2,15,"PATIENT.NOT_ONBOARDED_REASON.MARK_AS_NOT_ONBOARDED")),f.Db(3),f.Yc(t.message),f.Db(2),f.Yc(f.kc(7,17,"PATIENT.NOT_ONBOARDED_REASON.REASON_FOR_NOT_ONBOARDING")),f.Db(2),f.rc("ngModel",t.notOnboardedReason),f.Db(2),f.Yc(f.kc(11,19,"PATIENT.NOT_ONBOARDED_REASON.PROVIDER_DOES_NOT_RECOMMEND")),f.Db(3),f.Yc(f.kc(14,21,"PATIENT.NOT_ONBOARDED_REASON.PATIENT_DECLINED")),f.Db(3),f.Yc(f.kc(17,23,"PATIENT.NOT_ONBOARDED_REASON.NO_ANSWER_DURING_SCHEDULED_APPOINTMENT")),f.Db(3),f.Yc(f.kc(20,25,"PATIENT.NOT_ONBOARDED_REASON.OTHER")),f.Db(3),f.Yc(f.kc(23,27,"COMMON.NOTE")),f.Db(2),f.rc("ngModel",t.otherReasons)("disabled","other"!==t.notOnboardedReason)("ngStyle",f.yc(31,he,t.otherReasonRequired?"1px solid red":"")),f.Db(1),f.rc("ngIf",t.otherReasonRequired),f.Db(1),f.rc("disabled",!t.notOnboardedReason||"other"===t.notOnboardedReason&&!t.otherReasons),f.Db(1),f.Zc(" ",f.kc(28,29,"PATIENT.NOT_ONBOARDED_REASON.MARK_AS_NOT_ONBOARDED"),"\n"))},directives:[ce.c,N.u,N.x,ce.b,R.b,N.d,C.r,C.q,I.a,X.a,_.a],pipes:[O.a],styles:["[nz-radio][_ngcontent-%COMP%]{display:block;line-height:30px}button[_ngcontent-%COMP%]{display:block;margin:10px auto 0}"]}),e})();var pe=n("7RJT"),me=n("2lmJ");function fe(e,t){if(1&e&&f.Sb(0,"nz-option",8),2&e){const e=t.$implicit;f.rc("nzValue",e.key)("nzLabel",e.value)}}let ve=(()=>{class e{constructor(e,t,n,a){this._staffService=e,this._patientService=t,this._modalRef=n,this._translationService=a,this.isLoading=!1,this.translatedStrings=new Map,this.proceed=!1}ngOnInit(){this.getTranslatedStrings(),this.getAllLocations()}getTranslatedStrings(){this.PATIENT_NAME_AND_CURRENT_SITE="",this._translationService.get("PATIENT_SITE_UPDATE_MODAL.PATIENT_NAME_AND_CURRENT_SITE").subscribe(e=>this.PATIENT_NAME_AND_CURRENT_SITE=e)}getAllLocations(){this._staffService.fetchSitesForStaff().subscribe(e=>{this.sites=null==e?void 0:e.map(e=>({key:null==e?void 0:e.id,value:null==e?void 0:e.name}));const t=this.sites.filter(e=>e.key==this.siteId)[0].value;this.PATIENT_NAME_AND_CURRENT_SITE=this.PATIENT_NAME_AND_CURRENT_SITE.replace("{PATIENT_NAME}",this.patientName).replace("{SITE_NAME}",t)})}updateSite(){this.isLoading=!0,this._patientService.updatePatientSite(this.patientId,this.siteId).subscribe(()=>{this._modalRef.close(!0),this.isLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(me.a),f.Rb(a.a),f.Rb(v.e),f.Rb(re.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-patient-site-update-modal"]],inputs:{siteId:"siteId",siteName:"siteName",patientId:"patientId",patientName:"patientName"},decls:15,vars:6,consts:[[1,"container"],[3,"innerHTML"],["nz-typography",""],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-row",""],["nz-col","",3,"nzSpan","nzPush"],["nz-button","","nzType","primary","nzSize","large",3,"nzLoading","click"],[3,"nzValue","nzLabel"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"h2"),f.Xc(2,"Assign site"),f.Wb(),f.Xb(3,"h4"),f.Sb(4,"div",1),f.Wb(),f.Xb(5,"p",2),f.Xc(6,"If the patient needs to be onboarded at a different site, please select the new site from the list."),f.Wb(),f.Xb(7,"nz-select",3),f.ec("ngModelChange",function(e){return t.siteId=e}),f.Vc(8,fe,1,2,"nz-option",4),f.Wb(),f.Sb(9,"br"),f.Sb(10,"br"),f.Xb(11,"div",5),f.Xb(12,"div",6),f.Xb(13,"button",7),f.ec("click",function(){return t.updateSite()}),f.Xc(14,"Proceed"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Db(4),f.rc("innerHTML",t.PATIENT_NAME_AND_CURRENT_SITE,f.Mc),f.Db(3),f.rc("ngModel",t.siteId),f.Db(1),f.rc("ngForOf",t.sites),f.Db(4),f.rc("nzSpan",4)("nzPush",10),f.Db(1),f.rc("nzLoading",t.isLoading))},directives:[A.a,G.d,N.u,N.x,C.p,M.c,M.a,I.a,X.a,_.a,G.a],styles:[""]}),e})();class ye{}class Se{}var Te=n("r0o6"),Ne=n("vDMs"),Me=n("0lU3");function Re(e,t){1&e&&(f.Xb(0,"label",22),f.Xc(1," Required "),f.Wb())}function Ce(e,t){1&e&&(f.Xb(0,"label",22),f.Xc(1," Required "),f.Wb())}const _e=function(e){return{border:e}},Ie=function(){return[16,48]};let Xe=(()=>{class e extends c.a{constructor(e,t,n,a){super(),this._modalRef=e,this._dataSharingService=t,this._homeCommunityResourceService=n,this._notificationsService=a,this.newNote=new Se}ngOnInit(){null==this.resource&&(this.resource=new ye,this.resource.userId=this.patientId),this._dataSharingService.tenantSettings.pipe(Object(d.a)(this.unsubscribed)).subscribe(e=>{e&&(this.countryCode=null==e?void 0:e.countryCode)}),this.newNote.note=this.resource.notes[this.resource.notes.length-1].note}save(){var e,t,n,a;this.newNote&&(null===(t=null===(e=this.newNote)||void 0===e?void 0:e.note)||void 0===t?void 0:t.length)&&((null===(a=null===(n=this.resource)||void 0===n?void 0:n.notes)||void 0===a?void 0:a.length)||(this.resource.notes=[]),this.newNote.createdBy=localStorage.getItem("loggedInUser"),this.resource.notes.push(this.newNote));const r=this._homeCommunityResourceService.saveHomeCommunityResource(this.resource),i=this._homeCommunityResourceService.updateHomeCommunityResource(this.resource);Object(Te.a)(()=>!!this.resource.id,i,r).subscribe(e=>{this._notificationsService.success("Home and Community Resource","Resource saved successfully"),this._modalRef.close(e)})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(v.e),f.Rb(s.a),f.Rb(Ne.a),f.Rb(y.b))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-home-community-form"]],inputs:{patientId:"patientId",resource:"resource"},features:[f.Ab],decls:50,vars:20,consts:[[1,"container"],[3,"ngSubmit"],["f","ngForm"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-input","","name","name","required","",3,"ngModel","ngStyle","ngModelChange"],["name","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],["nz-input","","name","resourceType","required","",3,"ngModel","ngStyle","ngModelChange"],["resourceType","ngModel"],["nz-input","","name","contactNumber","maxlength","30",3,"ngModel","ngModelChange"],["contactNumber","ngModel"],["nz-input","","name","status",3,"ngModel","ngModelChange"],["status","ngModel"],["name","dateRequested","nzPlaceHolder","Date Requested ...","nzFormat","MM/dd/yyyy",3,"ngModel","ngModelChange"],["dateRequested","ngModel"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["rows","6","nz-input","","id","noteModel","name","noteModel",3,"placeholder","ngModel","ngModelChange"],["noteModel","ngModel"],[1,"save-btn-container"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"h3"),f.Xc(2,"Add a resource"),f.Wb(),f.Sb(3,"nz-divider"),f.Xb(4,"form",1,2),f.ec("ngSubmit",function(){return t.save()}),f.Xb(6,"div",3),f.Xb(7,"div",4),f.Xb(8,"h4"),f.Xc(9,"Name*"),f.Wb(),f.Xb(10,"input",5,6),f.ec("ngModelChange",function(e){return t.resource.name=e}),f.Wb(),f.Vc(12,Re,2,0,"label",7),f.Wb(),f.Xb(13,"div",4),f.Xb(14,"h4"),f.Xc(15,"Resource Type*"),f.Wb(),f.Xb(16,"input",8,9),f.ec("ngModelChange",function(e){return t.resource.resourceType=e}),f.Wb(),f.Vc(18,Ce,2,0,"label",7),f.Wb(),f.Wb(),f.Sb(19,"br"),f.Xb(20,"div",3),f.Xb(21,"div",4),f.Xb(22,"h4"),f.Xc(23,"Contact Number"),f.Wb(),f.Xb(24,"input",10,11),f.ec("ngModelChange",function(e){return t.resource.contactNumber=e}),f.Wb(),f.Wb(),f.Xb(26,"div",4),f.Xb(27,"h4"),f.Xc(28,"Status"),f.Wb(),f.Xb(29,"input",12,13),f.ec("ngModelChange",function(e){return t.resource.status=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(31,"br"),f.Xb(32,"div",3),f.Xb(33,"div",4),f.Xb(34,"h4"),f.Xc(35,"Date Requested"),f.Wb(),f.Xb(36,"nz-date-picker",14,15),f.ec("ngModelChange",function(e){return t.resource.dateRequested=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(38,"br"),f.Xb(39,"div",16),f.Xb(40,"div",17),f.Xb(41,"h4"),f.Xc(42,"Note"),f.Wb(),f.Xb(43,"textarea",18,19),f.ec("ngModelChange",function(e){return t.newNote.note=e}),f.jc(45,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Sb(46,"br"),f.Xb(47,"div",20),f.Xb(48,"button",21),f.Xc(49,"Save"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.Ic(5),n=f.Ic(11),a=f.Ic(17);f.Db(10),f.rc("ngModel",t.resource.name)("ngStyle",f.yc(15,_e,(n.dirty||n.touched)&&n.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(n.dirty||n.touched)&&n.errors),f.Db(4),f.rc("ngModel",t.resource.resourceType)("ngStyle",f.yc(17,_e,(a.dirty||a.touched)&&a.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(a.dirty||a.touched)&&a.errors),f.Db(6),f.rc("ngModel",t.resource.contactNumber),f.Db(5),f.rc("ngModel",t.resource.status),f.Db(7),f.rc("ngModel",t.resource.dateRequested),f.Db(3),f.rc("nzGutter",f.xc(19,Ie)),f.Db(4),f.sc("placeholder",f.kc(45,13,"ASSESSMENT.TYPE_MSG")),f.rc("ngModel",t.newNote.note),f.Db(5),f.rc("disabled",e.invalid)}},directives:[T.a,N.F,N.v,N.w,M.c,M.a,R.b,N.d,N.C,N.u,N.x,C.r,C.q,N.p,Me.a,I.a,X.a,_.a,A.a],pipes:[O.a],styles:[".save-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e})();class Ae{}class Oe{}var Ee=n("lyZ/");function De(e,t){1&e&&(f.Xb(0,"label",20),f.Xc(1," Required "),f.Wb())}function ze(e,t){1&e&&(f.Xb(0,"label",20),f.Xc(1," Required "),f.Wb())}const We=function(e){return{border:e}},Pe=function(){return[16,48]};let we=(()=>{class e{constructor(e,t,n,a){this._modalRef=e,this._dataSharingService=t,this._healthScreeningService=n,this._notificationsService=a,this.newNote=new Oe}ngOnInit(){null==this.resource&&(this.resource=new Ae,this.resource.patientId=this.patientId,this.resource.blueprintId=this.blueprintId),this.newNote.note=this.resource.notes[this.resource.notes.length-1].note}save(){var e,t,n,a;this.newNote&&(null===(t=null===(e=this.newNote)||void 0===e?void 0:e.note)||void 0===t?void 0:t.length)&&((null===(a=null===(n=this.resource)||void 0===n?void 0:n.notes)||void 0===a?void 0:a.length)||(this.resource.notes=[]),this.newNote.createdBy=localStorage.getItem("loggedInUser"),this.resource.notes.push(this.newNote));const r=this._healthScreeningService.saveHealthScreening(this.resource),i=this._healthScreeningService.updateHealthScreening(this.resource);Object(Te.a)(()=>!!this.resource.id,i,r).subscribe(e=>{this._notificationsService.success("Health Screening","Screening saved successfully"),this._modalRef.close(e)})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(v.e),f.Rb(s.a),f.Rb(Ee.a),f.Rb(y.b))},e.\u0275cmp=f.Lb({type:e,selectors:[["app-health-screenings-form-dialog"]],inputs:{patientId:"patientId",blueprintId:"blueprintId",resource:"resource"},decls:43,vars:16,consts:[[1,"container"],[3,"ngSubmit"],["f","ngForm"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","12"],["nz-input","","name","name","required","",3,"ngModel","ngStyle","ngModelChange"],["name","ngModel"],["nz-typography","","nzType","danger",4,"ngIf"],["nz-input","","name","status",3,"ngModel","ngModelChange"],["status","ngModel"],["name","dueDate","nzPlaceHolder","Due Date ...","required","","nzFormat","MM/dd/yyyy",3,"ngModel","ngModelChange"],["dueDate","ngModel"],["name","lastCompleted","nzPlaceHolder","Last Completed ...","nzFormat","MM/dd/yyyy",3,"ngModel","ngModelChange"],["lastCompleted","ngModel"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["rows","6","nz-input","","id","noteModel","name","noteModel",3,"placeholder","ngModel","ngModelChange"],["noteModel","ngModel"],[1,"save-btn-container"],["nz-button","","nzType","primary","nzSize","large",3,"disabled"],["nz-typography","","nzType","danger"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"h3"),f.Xc(2,"Add Health Maintenance / Preventive Screening"),f.Wb(),f.Sb(3,"nz-divider"),f.Xb(4,"form",1,2),f.ec("ngSubmit",function(){return t.save()}),f.Xb(6,"div",3),f.Xb(7,"div",4),f.Xb(8,"h4"),f.Xc(9,"Name *"),f.Wb(),f.Xb(10,"input",5,6),f.ec("ngModelChange",function(e){return t.resource.name=e}),f.Wb(),f.Vc(12,De,2,0,"label",7),f.Wb(),f.Xb(13,"div",4),f.Xb(14,"h4"),f.Xc(15,"Status"),f.Wb(),f.Xb(16,"input",8,9),f.ec("ngModelChange",function(e){return t.resource.status=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(18,"br"),f.Xb(19,"div",3),f.Xb(20,"div",4),f.Xb(21,"h4"),f.Xc(22,"Due Date *"),f.Wb(),f.Xb(23,"nz-date-picker",10,11),f.ec("ngModelChange",function(e){return t.resource.dueDate=e}),f.Wb(),f.Vc(25,ze,2,0,"label",7),f.Wb(),f.Xb(26,"div",4),f.Xb(27,"h4"),f.Xc(28,"Last Completed"),f.Wb(),f.Xb(29,"nz-date-picker",12,13),f.ec("ngModelChange",function(e){return t.resource.lastCompleted=e}),f.Wb(),f.Wb(),f.Wb(),f.Sb(31,"br"),f.Xb(32,"div",14),f.Xb(33,"div",15),f.Xb(34,"h4"),f.Xc(35,"Note"),f.Wb(),f.Xb(36,"textarea",16,17),f.ec("ngModelChange",function(e){return t.newNote.note=e}),f.jc(38,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Sb(39,"br"),f.Xb(40,"div",18),f.Xb(41,"button",19),f.Xc(42,"Save"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.Ic(5),n=f.Ic(11),a=f.Ic(24);f.Db(10),f.rc("ngModel",t.resource.name)("ngStyle",f.yc(13,We,(n.dirty||n.touched)&&n.errors?"1px solid red":"")),f.Db(2),f.rc("ngIf",(n.dirty||n.touched)&&n.errors),f.Db(4),f.rc("ngModel",t.resource.status),f.Db(7),f.rc("ngModel",t.resource.dueDate),f.Db(2),f.rc("ngIf",(a.dirty||a.touched)&&a.errors),f.Db(4),f.rc("ngModel",t.resource.lastCompleted),f.Db(3),f.rc("nzGutter",f.xc(15,Pe)),f.Db(4),f.sc("placeholder",f.kc(38,11,"ASSESSMENT.TYPE_MSG")),f.rc("ngModel",t.newNote.note),f.Db(5),f.rc("disabled",e.invalid)}},directives:[T.a,N.F,N.v,N.w,M.c,M.a,R.b,N.d,N.C,N.u,N.x,C.r,C.q,Me.a,I.a,X.a,_.a,A.a],pipes:[O.a],styles:[".save-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e})(),xe=(()=>{class e{constructor(e){this._modalService=e,this.profileReadinessDataSubject=new pe.BehaviorSubject(null),this.profileReadinessData$=this.profileReadinessDataSubject.asObservable(),this.showProfileReadiness=new pe.BehaviorSubject(!1)}showGuardianModal(e,t){return this._modalService.create({nzContent:U,nzComponentParams:{patientId:e,guardianUser:t},nzWidth:"650px",nzFooter:null})}showContactModal(e,t=new L){return this._modalService.create({nzContent:J,nzComponentParams:{patientId:e,contact:t},nzWidth:"600px",nzFooter:null})}showAllergyModal(e,t=new Q){return this._modalService.create({nzContent:ae,nzComponentParams:{patientId:e,allergy:t,isNewAllergy:!!t.name},nzWidth:"350px",nzFooter:null})}showDischargePatientModal(e,t){return this._modalService.create({nzContent:ue,nzComponentParams:{patientId:e,patientName:t},nzBodyStyle:{padding:"32px"},nzFooter:null})}showPatientNotOnboardedModal(e,t){return this._modalService.create({nzContent:ge,nzComponentParams:{patientId:e,patientName:t},nzBodyStyle:{padding:"32px"},nzWidth:"500px",nzFooter:null})}showProfileReadinessModal(){this.showProfileReadiness.next(!0)}updateProfileReadinessModal(e){this.profileReadinessDataSubject.next(e)}showSiteAndPhysicianUpdate(e,t,n){return this._modalService.create({nzContent:ve,nzComponentParams:{patientId:e,patientName:t,siteId:n},nzBodyStyle:{padding:"32px"},nzWidth:"500px",nzClosable:!0,nzMaskClosable:!0,nzFooter:null})}showResourceModal(e,t){return this._modalService.create({nzContent:Xe,nzComponentParams:{patientId:e,resource:t},nzWidth:"650px",nzFooter:null})}showHealthScreeningModal(e,t,n){return this._modalService.create({nzContent:we,nzComponentParams:{patientId:e,blueprintId:t,resource:n},nzWidth:"650px",nzFooter:null})}}return e.\u0275fac=function(t){return new(t||e)(f.bc(v.f))},e.\u0275prov=f.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},g9KO:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("/h9T"),r=n("pl0G"),i=n("jIYg");function o(e,t){Object(i.a)(2,arguments);var n=Object(a.a)(t);return Object(r.a)(e,-n)}},gr1v:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("/Tr7"),r=n("tpup"),i=n("jIYg");function o(e){Object(i.a)(1,arguments);var t=Object(a.a)(e),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var s=Object(r.a)(o),c=new Date(0);c.setUTCFullYear(n,0,4),c.setUTCHours(0,0,0,0);var d=Object(r.a)(c);return t.getTime()>=s.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}},h51P:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("tk/3"),r=n("fXoL");let i=(()=>{class e{constructor(e){this._http=e}fetchLocationFromZipCode(e){const t=new a.g({bypass:"yes"});return this._http.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${e}&key=AIzaSyCySGsZgXtvenjp06bwyxsL4vtqIsAa4E4`,{headers:t})}}return e.\u0275fac=function(t){return new(t||e)(r.bc(a.c))},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},iSMj:function(e,t,n){"use strict";var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(e){return function(t){var n=t||{},a=n.width?String(n.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}var i={date:r({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:r({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:r({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},o={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function s(e){return function(t,n){var a,r=n||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,c=r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[s]}return a[e.argumentCallback?e.argumentCallback(t):t]}}var c={ordinalNumber:function(e,t){var n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:s({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:s({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:s({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:s({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:s({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function d(e){return function(t,n){var a=String(t),r=n||{},i=r.width,o=a.match(i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth]);if(!o)return null;var s,c=o[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return s="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].test(c))return n}(d):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(c))return n}(d),s=e.valueCallback?e.valueCallback(s):s,{value:s=r.valueCallback?r.valueCallback(s):s,rest:a.slice(c.length)}}}var l,u={ordinalNumber:(l={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),a=t||{},r=n.match(l.matchPattern);if(!r)return null;var i=r[0],o=n.match(l.parsePattern);if(!o)return null;var s=l.valueCallback?l.valueCallback(o[0]):o[0];return{value:s=a.valueCallback?a.valueCallback(s):s,rest:n.slice(i.length)}}),era:d({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:d({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:d({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:d({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:d({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};t.a={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof a[e]?a[e]:1===t?a[e].one:a[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:i,formatRelative:function(e,t,n,a){return o[e]},localize:c,match:u,options:{weekStartsOn:0,firstWeekContainsDate:1}}},lgZR:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("/Tr7"),r=n("tpup"),i=n("gr1v"),o=n("jIYg");function s(e){Object(o.a)(1,arguments);var t=Object(i.a)(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var a=Object(r.a)(n);return a}function c(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=Object(r.a)(t).getTime()-s(t).getTime();return Math.round(n/6048e5)+1}},"lyZ/":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("AytR"),r=n("fXoL"),i=n("tk/3");let o=(()=>{class e{constructor(e){this._http=e,this.rootURL=a.g.url+"/v3/health-screening"}saveHealthScreening(e){return this._http.post(`${this.rootURL}`,JSON.stringify(e))}updateHealthScreening(e){return this._http.put(`${this.rootURL}`,JSON.stringify(e))}deleteHealthScreening(e){return this._http.delete(`${this.rootURL}/${e}`)}fetchHealthScreenings(e,t){return this._http.get(`${this.rootURL}/${e}/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(r.bc(i.c))},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},tpup:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("/Tr7"),r=n("jIYg");function i(e){Object(r.a)(1,arguments);var t=1,n=Object(a.a)(e),i=n.getUTCDay(),o=(i<t?7:0)+i-t;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}},vDMs:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("AytR"),r=n("fXoL"),i=n("tk/3");let o=(()=>{class e{constructor(e){this._http=e,this.rootURL=a.g.url+"/v3/home-community"}saveHomeCommunityResource(e){return this._http.post(`${this.rootURL}`,JSON.stringify(e))}updateHomeCommunityResource(e){return this._http.put(`${this.rootURL}`,JSON.stringify(e))}deleteHomeCommunityResource(e){return this._http.delete(`${this.rootURL}/${e}`)}fetchHomeCommunityResources(e){return this._http.get(`${this.rootURL}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.bc(i.c))},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);