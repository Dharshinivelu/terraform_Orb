!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{jfod:function(t,r,a){"use strict";a.r(r),a.d(r,"AuthorizationModule",function(){return lt});var s,c=a("Jlwr"),l=a("qQcL"),u=a("bnsq"),g=a("7Xlp"),d=a("igu/"),f=a("jYVc"),b=a("WoUL"),p=a("29Mf"),h=a("4Ign"),m=a("cA1j"),S=a("fXoL"),v=a("tyNb"),_=a("bNXi"),y=a("dEAy"),R=((s=function(t){i(a,t);var r=o(a);function a(t,n,i,o,s,c,l,u,g,d,f,b){var p;return e(this,a),(p=r.call(this))._router=t,p._notificationsService=n,p._applicationInsights=i,p._dataSharingService=o,p._authorizationService=s,p._permissionsService=c,p._translationsService=l,p._featureHighlightService=u,p._modalService=g,p._authorizationEventLogger=d,p._routeReuseHelperService=f,p._staffSessionService=b,p}return n(a,[{key:"ngOnInit",value:function(){this._dataSharingService.setTimer({state:"END",start:null,end:null,data:null}),this.logout()}},{key:"logout",value:function(){var e,t,n=this;this._modalService.closeAll(),this._authorizationService.archiveSecurityToken().subscribe(),this._permissionsService.setPermissionsForUser(null),this.clearStaffSession(),window.navigator.webdriver||this._applicationInsights.clearUserId(),this._authorizationEventLogger.portalLogoutEvent(),this._routeReuseHelperService.clearAllStoredRoutes(),this.activatedRoute.queryParams.subscribe(function(e){e.returnUrl&&(n.returnUrl=e.returnUrl),e.referrer&&(n.referrer=e.referrer)}),this.clearStorage(),this.clearDataSharingService(),this.setDefaultColorAndFavicon(),this._translationsService.get("COMMON.USER").subscribe(function(t){return e=t}),this._translationsService.get("COMMON.LOGOUT_MESSAGE").subscribe(function(e){return t=e}),this._notificationsService.success(e,t),localStorage.setItem("pageRefresh","true"),this.returnUrl?this._router.navigate(["authorization/login"],{queryParams:{returnUrl:this.returnUrl,referrer:this.referrer}}):this._router.navigate(["authorization/login"])}},{key:"clearStaffSession",value:function(){var e=localStorage.getItem("staffSession");if(null==e?void 0:e.length){var t=JSON.parse(e);this._staffSessionService.closeStaffSession(t.id).subscribe()}}},{key:"clearStorage",value:function(){var e=localStorage.getItem("appVersion");this._featureHighlightService.clearAllItemsInLocalStorageExceptFeatureHighlight(),sessionStorage.clear(),localStorage.setItem("appVersion",e)}},{key:"clearDataSharingService",value:function(){this._dataSharingService.setLoggedIn(!1),this._dataSharingService.setLoggedInUserName(null),this._dataSharingService.featureConfigs.next(null),this._dataSharingService.featureNomenclatures.next(null),this._dataSharingService.tenantSettings.next(null)}},{key:"setDefaultColorAndFavicon",value:function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("link"),n=document.getElementById("faviconURL");t.id="faviconURL",t.rel="shortcut icon",t.href="/assets/images/favicon.png",n&&e.removeChild(n),e.appendChild(t)}}]),a}(l.a)).\u0275fac=function(e){return new(e||s)(S.Rb(v.g),S.Rb(_.b),S.Rb(g.a),S.Rb(d.a),S.Rb(f.a),S.Rb(u.a),S.Rb(b.a),S.Rb(m.a),S.Rb(y.f),S.Rb(p.a),S.Rb(h.a),S.Rb(c.a))},s.\u0275cmp=S.Lb({type:s,selectors:[["app-logout"]],features:[S.Ab],decls:0,vars:0,template:function(e,t){},styles:[""]}),s);a("cnAw");var O=function(e){return e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB",e.OTHER="OTHER",e}({}),P=function t(){e(this,t),this.platform=O.WEB},E=a("PqYM"),T=a("lJxs"),I=a("IzEk"),w=a("w1tV"),k=a("B+r4"),M=a("PTRe"),C=a("3Pt+"),z=a("ofXK"),D=a("eHCX"),A=a("OzZK"),W=a("C2AL"),X=a("RwU8");function L(e,t){1&e&&(S.Vb(0),S.Sb(1,"br"),S.Xb(2,"div",1),S.Xb(3,"div",2),S.Xb(4,"label",12),S.Xc(5," The entered OTP is not valid! "),S.Wb(),S.Wb(),S.Wb(),S.Ub())}var x,N,F,U,V=((x=function(){function t(n,i){e(this,t),this._authorizationService=n,this._modalRef=i,this.time=59,this.submitDisabled=!0,this.showError=!1}return n(t,[{key:"ngOnInit",value:function(){this.generateOTP()}},{key:"startTimer",value:function(){var e=this;this.counter=60,this.timerSub&&this.timerSub.unsubscribe(),this.timer$=Object(E.a)(0,1e3).pipe(Object(T.a)(function(t){return e.counter--,e.time-t}),Object(I.a)(this.time+1),Object(w.a)()),this.timerSub=this.timer$.subscribe()}},{key:"generateOTP",value:function(){var e=this;this.startTimer();var t=new P;t.platform=O.WEB,this._authorizationService.generateOTPForUser({userId:this.email,type:"EMAIL",authenticationSource:t,accountType:this.accountType}).subscribe(function(){return e.submitDisabled=!1})}},{key:"verifyOTP",value:function(){var e=this;this.submitDisabled=!0,this.showError=!1;var t=new P;t.platform=O.WEB,this._authorizationService.verifyOTPForUser({userId:this.email,type:"EMAIL",authenticationSource:t,accountType:this.accountType,token:this.otp}).subscribe(function(){e.submitDisabled=!1,e.close(!0)},function(){e.submitDisabled=!1,e.showError=!0})}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modalRef.close(e)}}]),t}()).\u0275fac=function(e){return new(e||x)(S.Rb(f.a),S.Rb(y.e))},x.\u0275cmp=S.Lb({type:x,selectors:[["app-otp-validation"]],inputs:{email:"email",accountType:"accountType"},decls:19,vars:5,consts:[[1,"container"],["nz-row",""],["nz-col","","nzSpan","24"],["nz-input","","placeholder","Enter OTP...","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')","minlength","6","maxlength","6",3,"ngModel","ngModelChange"],[4,"ngIf"],["nz-col","","nzSpan","2"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","3"],["nz-button","","nzType","link",3,"disabled","click"],["nz-col","","nzSpan","18",1,"actions"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-button","",3,"click"],["nz-typography","","nzType","danger"]],template:function(e,t){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"div",2),S.Xb(3,"input",3),S.ec("ngModelChange",function(e){return t.otp=e}),S.Wb(),S.Wb(),S.Wb(),S.Vc(4,L,6,0,"ng-container",4),S.Sb(5,"br"),S.Xb(6,"div",1),S.Xb(7,"div",5),S.Xb(8,"label",6),S.Xc(9),S.Wb(),S.Wb(),S.Xb(10,"div",7),S.Xb(11,"button",8),S.ec("click",function(){return t.generateOTP()}),S.Xc(12,"Resend"),S.Wb(),S.Wb(),S.Xb(13,"div",9),S.Xb(14,"button",10),S.ec("click",function(){return t.verifyOTP()}),S.Xc(15,"Verify"),S.Wb(),S.Xc(16," \xa0\xa0 "),S.Xb(17,"button",11),S.ec("click",function(){return t.close()}),S.Xc(18,"Close"),S.Wb(),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.Db(3),S.rc("ngModel",t.otp),S.Db(1),S.rc("ngIf",t.showError),S.Db(5),S.Zc("00:",t.counter,""),S.Db(2),S.rc("disabled",0<t.counter),S.Db(3),S.rc("disabled",t.submitDisabled))},directives:[k.c,k.a,M.b,C.d,C.q,C.p,C.u,C.x,z.q,D.a,A.a,W.a,X.a],styles:[".container[_ngcontent-%COMP%]{padding-top:0!important}.actions[_ngcontent-%COMP%]{text-align:right}label[_ngcontent-%COMP%]{position:relative;top:5px}"]}),x),j=a("W0aR"),G=((N=function(){function t(n){e(this,t),this._tenantConfigService=n,this.clientIdClientNameMap=new Map([["integratedtelehealthservices","5fb7e57e69175c000165ec47"],["uborarpm","5bffc2c45a223dc81c6620b3"],["cooey","5a0968f4aa23a5807f6c0f9e"],["cooeyhealth","5a0968f4aa23a5807f6c0f9e"],["orbhealth","638f12c949b73b759f89c95d"]])}return n(t,[{key:"getClientFromHostName",value:function(){return location.hostname.split(".")[1]}},{key:"getClientId",value:function(){var e=this.getClientFromHostName();return this.clientIdClientNameMap.get(e)||this.clientIdClientNameMap.get("cooeyhealth")}},{key:"getClientConfig",value:function(){return this.clientConfig$||(this.clientConfig$=this._tenantConfigService.getConfigByTenantId(this.getClientId())),this.clientConfig$}}]),t}()).\u0275fac=function(e){return new(e||N)(S.bc(j.a))},N.\u0275prov=S.Nb({token:N,factory:N.\u0275fac,providedIn:"root"}),N),q=a("VGjC"),B=function t(){e(this,t)},Y=a("bp6e"),Z=a("yWgs"),H=a("BoNt"),J=a("0+cO"),K=a("NFKh"),$=a("jZiR"),Q=((F=function(){function t(n){e(this,t),this._modalRef=n}return n(t,[{key:"ngOnInit",value:function(){this.username=localStorage.getItem("loggedInUserName")}},{key:"continue",value:function(){this._modalRef.close("CONTINUE")}},{key:"logout",value:function(){this._modalRef.close("LOGOUT")}}]),t}()).\u0275fac=function(e){return new(e||F)(S.Rb(y.e))},F.\u0275cmp=S.Lb({type:F,selectors:[["app-login-validation"]],decls:13,vars:5,consts:[["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nz-col","",2,"text-align","center",3,"nzSpan"],["nz-button","","nzType","primary",3,"click"],["nz-col","",2,"display","flex","align-items","center","flex-direction","row",3,"nzSpan"],["nz-button","","nzType","default","nzDanger","",3,"click"]],template:function(e,t){1&e&&(S.Xb(0,"div",0),S.Xb(1,"div",1),S.Xb(2,"p"),S.Xc(3," You are signed in as "),S.Xb(4,"strong"),S.Xc(5),S.Wb(),S.Xc(6,". Do you want to continue? "),S.Wb(),S.Wb(),S.Xb(7,"div",2),S.Xb(8,"button",3),S.ec("click",function(){return t.continue()}),S.Xc(9,"Stay signed in"),S.Wb(),S.Wb(),S.Xb(10,"div",4),S.Xb(11,"button",5),S.ec("click",function(){return t.logout()}),S.Xc(12,"Sign out"),S.Wb(),S.Wb(),S.Wb()),2&e&&(S.rc("nzGutter",64),S.Db(1),S.rc("nzSpan",24),S.Db(4),S.Yc(t.username),S.Db(2),S.rc("nzSpan",12),S.Db(3),S.rc("nzSpan",12))},directives:[k.c,k.a,A.a,X.a,W.a],styles:[".vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}"]}),F),ee=a("2lmJ"),te=a("zM63"),ne=a("PScX"),ie=a("ocnv"),re=((U=function t(n){e(this,t),"button"===n.nativeElement.localName?n.nativeElement.setAttribute("style","height: 60px; text-align: center; border-radius: 10px; font: normal normal bold 18px/24px Nunito;"):"input"===n.nativeElement.localName?n.nativeElement.setAttribute("style","height: 60px;  text-align: left; padding: 10px 0px 10px 15px; border: none; border-radius: 10px; font: normal normal normal 20px/27px Nunito; \n      color: #0F2015; background-color: var(--neutral-color);"):"nz-select"===n.nativeElement.localName&&n.nativeElement.setAttribute("style","height: 60px;  text-align: left; font: normal normal normal 20px/27px Nunito; \n      color: #0F2015; background-color: var(--neutral-color);")}).\u0275fac=function(e){return new(e||U)(S.Rb(S.l))},U.\u0275dir=S.Mb({type:U,selectors:[["","xlSize",""]]}),U),oe=a("glKu"),ae=a("dRHE");function se(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"COMMON.REQUIRED")," "))}function ce(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function le(e,t){if(1&e&&(S.Vc(0,se,3,3,"ng-container",16),S.Vc(1,ce,3,3,"ng-container",16)),2&e){var n=t.$implicit;S.rc("ngIf",n.hasError("required")),S.Db(1),S.rc("ngIf",n.hasError("email"))}}function ue(e,t){1&e&&S.Sb(0,"app-icons",17)}function ge(e,t){if(1&e){var n=S.Yb();S.Xb(0,"app-icons",18),S.ec("click",function(){S.Lc(n);var e=S.ic(2);return e.passwordVisible=!e.passwordVisible}),S.Wb()}if(2&e){var i=S.ic(2);S.rc("color",i.passwordVisible?"#a7c853":"#8A8A8A")}}var de=function(e){return{"background-image":e}};function fe(e,t){if(1&e){var n=S.Yb();S.Xb(0,"div",1),S.Sb(1,"div",2),S.Xb(2,"div",3),S.Xb(3,"h2",4),S.Xc(4),S.jc(5,"translate"),S.Wb(),S.Xb(6,"form",5),S.ec("ngSubmit",function(){return S.Lc(n),S.ic().submitForm()}),S.Xb(7,"nz-form-item"),S.Xb(8,"nz-form-control",6),S.Xb(9,"nz-input-group",7),S.Xb(10,"input",8),S.ec("ngModelChange",function(){return S.Lc(n),S.ic().updateValidators()}),S.jc(11,"translate"),S.Wb(),S.Wb(),S.Vc(12,le,2,2,"ng-template",null,9,S.Wc),S.Wb(),S.Vc(14,ue,1,0,"ng-template",null,10,S.Wc),S.Wb(),S.Sb(16,"br"),S.Xb(17,"nz-form-item"),S.Xb(18,"nz-form-control",6),S.jc(19,"translate"),S.Xb(20,"nz-input-group",7),S.Sb(21,"input",11),S.jc(22,"translate"),S.Wb(),S.Wb(),S.Vc(23,ge,1,1,"ng-template",null,12,S.Wc),S.Wb(),S.Xb(25,"nz-form-item"),S.Xb(26,"nz-form-control"),S.Xb(27,"a",13),S.ec("click",function(e){return S.Lc(n),S.ic().gotoRecoverPassword(e)}),S.Xc(28),S.jc(29,"translate"),S.Wb(),S.Xb(30,"button",14),S.Xc(31),S.jc(32,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(33,"h4"),S.Xc(34),S.jc(35,"translate"),S.Sb(36,"br"),S.Xb(37,"a",15),S.Xc(38),S.jc(39,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.Ic(13),r=S.Ic(15),o=S.Ic(24),a=S.ic();S.Db(1),S.rc("ngStyle",S.yc(36,de,"url("+a.bgImage+")")),S.Db(3),S.Yc(S.kc(5,20,"COMMON.LOGIN")),S.Db(2),S.rc("formGroup",a.loginForm),S.Db(2),S.rc("nzErrorTip",i),S.Db(1),S.rc("nzSuffix",r),S.Db(1),S.sc("placeholder",S.kc(11,22,"COMMON.EMAIL")),S.Db(8),S.sc("nzErrorTip",S.kc(19,24,"COMMON.REQUIRED")),S.Db(2),S.rc("nzSuffix",o),S.Db(1),S.sc("placeholder",S.kc(22,26,"COMMON.PASSWORD")),S.rc("type",a.passwordVisible?"text":"password"),S.Db(7),S.Zc(" ",S.kc(29,28,"COMMON.FORGOT_PASSWORD")," ? "),S.Db(2),S.rc("nzType","primary")("nzLoading",a.progress)("nzSize","large"),S.Db(1),S.Zc(" ",S.kc(32,30,"COMMON.LOGIN")," "),S.Db(3),S.bd("\xa9 ",S.kc(35,32,"COPYWRITE")," ",a.currentYear," ",a.copyright," "),S.Db(3),S.rc("href",null==a.clientConfig?null:a.clientConfig.termsURL,S.Oc),S.Db(1),S.Zc(" ",S.kc(39,34,"COMMON.TERMS_PF_SERVICE")," ")}}var be,pe,he,me,Se=((be=function(t){i(a,t);var r=o(a);function a(t,n,i,o,s,c,l,u,g,d,f,b,p,h,m,S,v,_,y,R,E){var T;e(this,a),(T=r.call(this))._router=t,T._authorizationService=n,T._tenantConfig=i,T._dataSharingService=o,T._notificationsService=s,T._fb=c,T._permissionsService=l,T._authorizationEventLogger=u,T._translationsService=g,T._sitesService=d,T._storeService=f,T._usersService=b,T._ngProgress=p,T._securityTokenHelperService=h,T._clientIdentificationService=m,T.permissionHelper=S,T._modalService=v,T._staffSessionService=_,T._messageService=y,T._whitelabelService=R,T._staffService=E,T.progress=!1,T.createSessionRequest=new B,T.submitForm=function(){for(var e in T.loginForm.controls.email.setValidators(C.D.email),T.loginForm.controls.email.updateValueAndValidity(),T.loginForm.controls)T.loginForm.controls[e].markAsDirty(),T.loginForm.controls[e].updateValueAndValidity();if(T.loginForm.valid){T.createSessionRequest.email=T.loginForm.value.email,T.createSessionRequest.encryptedPassword=T.encryptPassword(JSON.parse(JSON.stringify(T.createSessionRequest.email)),T.loginForm.value.password);var t=new P;t.platform=O.WEB,T.createSessionRequest.authenticationSource=t,T.login()}},T.passwordVisible=!1,T.currentYear=(new Date).getFullYear();var I=new Map([["638f12c949b73b759f89c95d","/assets/images/login-orb-bg.jpeg"]]),w=new Map([["5fb7e57e69175c000165ec47","Integrated Tele Health Services"],["5bffc2c45a223dc81c6620b3","Ubora RPM"],["638f12c949b73b759f89c95d","Orb Health"]]);return T._clientIdentificationService.getClientConfig().subscribe(function(e){T.bgImage=I.get(null==e?void 0:e.tenantId)||"/assets/images/login-bg.jpeg",T.copyright=w.get(null==e?void 0:e.tenantId)||"Cooey Health",T.clientConfig=e,T._whitelabelService.initializeWithConfig(e)}),T}return n(a,[{key:"ngOnInit",value:function(){var e=this;!!localStorage.getItem("accessToken")&&this._router.navigate(["dashboard"]),this.activatedRoute.queryParams.subscribe(function(t){e.returnUrl=t.returnUrl?t.returnUrl:"dashboard"}),this.initializeLoginForm()}},{key:"initializeLoginForm",value:function(){this.loginForm=this._fb.group({email:[null,[C.D.required]],password:[null,[C.D.required]]})}},{key:"updateValidators",value:function(){this.loginForm.controls.email.clearValidators(),this.loginForm.controls.email.setValidators(C.D.required),this.loginForm.controls.email.updateValueAndValidity()}},{key:"encryptPassword",value:function(e,t){var n;16<=(null==e?void 0:e.length)?e=null==e?void 0:e.substring(0,16):15>(null==e?void 0:e.length)?e+="1234567891234567".substring(0,16-(null==e?void 0:e.length)):e||(e="1234567891234567");var i=K.enc.Latin1.parse(e),r=K.enc.Latin1.parse(e);return null===(n=K.AES.encrypt(t,i,{iv:r,mode:K.mode.CBC,padding:K.pad.ZeroPadding}))||void 0===n?void 0:n.toString()}},{key:"login",value:function(){this.progress=!0,this.createSessionRequest.type="TENANT",this.validateExistingLogins()}},{key:"userLogin",value:function(){var e=this;this.progress=!0,this._authorizationService.logInUser(this.createSessionRequest).subscribe(function(t){var n=e._securityTokenHelperService.decodeToken(null==t?void 0:t.accessToken);n["2FA"]?e.otpValidation(n,null==t?void 0:t.accessToken,null==t?void 0:t.refreshToken):e.postLoginProcessing(n,null==t?void 0:t.accessToken,null==t?void 0:t.refreshToken)},function(){e._notificationsService.error("Login","We do not recognise this email or password!"),e.progress=!1,e._ngProgress.ref().complete()})}},{key:"validateExistingLogins",value:function(){var e=this;localStorage.getItem("accessToken")&&localStorage.getItem("refreshToken")&&localStorage.getItem("sessionToken")&&localStorage.getItem("loggedInUser")?this._modalService.create({nzContent:Q,nzWrapClassName:"vertical-center-modal",nzFooter:null,nzTitle:null,nzClosable:!1,nzMaskClosable:!1}).afterClose.subscribe(function(t){"CONTINUE"==t?location.reload():(e._router.navigate(["authorization/logout"]),localStorage.setItem("pageRefresh","true"))}):this.userLogin()}},{key:"otpValidation",value:function(e,t,n){var i=this;this._modalService.create({nzTitle:"OTP Validation",nzFooter:null,nzCloseIcon:null,nzClosable:!1,nzContent:V,nzComponentParams:{email:this.createSessionRequest.email,accountType:e.accountType}}).afterClose.subscribe(function(r){r?i.postLoginProcessing(e,t,n):(i._notificationsService.error("Login","OTP verification failed, please try again!"),i.progress=!1,i._ngProgress.ref().complete())})}},{key:"postLoginProcessing",value:function(e,t,n){var i=this;this.setSessionDataToLocalStorage(e,t,n),this._permissionsService.fetchUserPermissions().subscribe(function(t){localStorage.setItem("permissionToken",null==t?void 0:t.permissionsToken),i.fetchAllAssignedTenantConfigsForUser(),i.fetchAdditionalConfigsForUser(null==e?void 0:e.userId),window.navigator.webdriver||i._authorizationEventLogger.setUserId(null==e?void 0:e.userId),i._authorizationEventLogger.portalLoginEvent()}),this._staffSessionService.initiateStaffSession().subscribe(function(e){(null==e?void 0:e.olderSessionsTerminated)&&i._messageService.warning("You had an active session already which has now been terminated!",{nzDuration:1e4}),localStorage.setItem("staffSession",JSON.stringify(e))})}},{key:"fetchAdditionalConfigsForUser",value:function(e){var t=this;this._tenantConfig.getConfigSetting().subscribe(function(n){t.setTenantConfigDataInLocalStorage(n),t._permissionsService.loadUserRolePermissions(),t._usersService.getUser(e).subscribe(function(e){t.getUserPermissions(n,e)})})}},{key:"fetchAllAssignedTenantConfigsForUser",value:function(){var e=this;this._tenantConfig.getAllAssignedTenantConfigSettings().subscribe(function(t){var n=new Map;t.result.forEach(function(e){return n.set(e.tenantId,e)}),console.log("Config Map : ",n),e._dataSharingService.assignedTenantSettings.next(n),1===(null==n?void 0:n.size)&&e._dataSharingService.triggerSubTenantChange(n.keys().next().value)})}},{key:"getUserPermissions",value:function(e,t){this.setLoggedInUser(t),this.setLanguage(),this.setSitesToSessionStorage(null==e?void 0:e.tenantName),this.setDataInDataSharingService(e),this.permissionHelper.getAllPermissionStrings(),this.progress=!1,this.navigateUser(),this.progress=!1,this._ngProgress.ref().complete()}},{key:"setSessionDataToLocalStorage",value:function(e,t,n){localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",n),localStorage.setItem("sessionToken",null==e?void 0:e.sessionId),localStorage.setItem("loggedInUser",null==e?void 0:e.userId),localStorage.setItem("loggedInTenant",null==e?void 0:e.tenantId),localStorage.setItem("loggedInUserAccountType",null==e?void 0:e.accountType),localStorage.setItem("loggedInUserEmail",this.createSessionRequest.email),localStorage.setItem("loggedInUserBoundary",null==e?void 0:e.accessBoundary),localStorage.setItem("loggedInUserAssignedTenants",null==e?void 0:e.assignedSubTenants.join()),this._staffService.fetchAssignedTenants().subscribe(function(e){e&&e.result.forEach(function(e){localStorage.setItem(e.id,e.name)})})}},{key:"setDataInDataSharingService",value:function(e){this._dataSharingService.featureConfigs.next(e.featureConfigs),this._dataSharingService.featureNomenclatures.next(e.featureNomenclatures),this._dataSharingService.tenantSettings.next(e),this._dataSharingService.setLoggedIn(!0),this.fetchAllAssignedTenantConfigsForUser()}},{key:"setTenantConfigDataInLocalStorage",value:function(e){var t,n,i,r;localStorage.setItem("logoUrl",e.logoURL||"/assets/images/logo.png"),localStorage.setItem("faviconUrl",e.faviconURL||"/assets/images/favicon.png"),localStorage.setItem("tenantAnalyticsReportEnabled",null===(n=null===(t=null==e?void 0:e.reportConfig)||void 0===t?void 0:t.analyticsReportEnabled)||void 0===n?void 0:n.toString()),localStorage.setItem("tenantDeviceOrderEnabled",null===(r=null===(i=null==e?void 0:e.deviceConfig)||void 0===i?void 0:i.deviceOrderEnabled)||void 0===r?void 0:r.toString()),localStorage.setItem("loggedInTenantName",null==e?void 0:e.tenantName),this.setFavicon(),e.configColor&&localStorage.setItem("primaryColor",e.configColor.primaryColor)}},{key:"setFavicon",value:function(){document.querySelector("#faviconURL").href=localStorage.getItem("faviconUrl")}},{key:"setLoggedInUser",value:function(e){var t,n,i,r=null===(t=null==e?void 0:e.roles)||void 0===t?void 0:t.filter(function(e){return e.type&&e.defaultRole});localStorage.setItem("loggedInUserRole",(null===(n=r[0])||void 0===n?void 0:n.type)||"TENANT_ADMIN"),localStorage.setItem("loggedInUserRoleName",null===(i=r[0])||void 0===i?void 0:i.name),localStorage.setItem("loggedInUserName",e.fullName),this._dataSharingService.setLoggedInUserName(e.fullName)}},{key:"setLanguage",value:function(){var e=sessionStorage.getItem("en"),t=sessionStorage.getItem("ja"),n=sessionStorage.getItem("ko");e||t||n||this._translationsService.setLanguage()}},{key:"setSitesToSessionStorage",value:function(e){var t=this;this._sitesService.getAllSites(0,999,null,!1).subscribe(function(e){t._storeService.setSites(null==e?void 0:e.result)}),this._sitesService.getAllSites(0,999,null,!1,localStorage.getItem("loggedInUserAssignedTenants")).subscribe(function(e){t._storeService.setAllTenantSites(null==e?void 0:e.result)})}},{key:"gotoRecoverPassword",value:function(e){this._router.navigate(["authorization/forgot-password"]),null==e||e.preventDefault()}},{key:"navigateUser",value:function(){this._router.navigate([this.returnUrl])}}]),a}(l.a)).\u0275fac=function(e){return new(e||be)(S.Rb(v.g),S.Rb(f.a),S.Rb(j.a),S.Rb(d.a),S.Rb(_.b),S.Rb(C.h),S.Rb(u.a),S.Rb(p.a),S.Rb(b.a),S.Rb(H.a),S.Rb(Y.a),S.Rb(q.a),S.Rb(te.a),S.Rb(Z.a),S.Rb(G),S.Rb(J.a),S.Rb(y.f),S.Rb(c.a),S.Rb(ne.e),S.Rb($.a),S.Rb(ee.a))},be.\u0275cmp=S.Lb({type:be,selectors:[["login"]],features:[S.Ab],decls:1,vars:1,consts:[["nz-row","","id","login-container",4,"ngIf"],["nz-row","","id","login-container"],["nz-col","","nzSpan","16","id","bg-container",3,"ngStyle"],["nz-col","","nzSpan","8","id","form-container"],["nz-typography","","nzType","success"],["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],[3,"nzSuffix"],["type","text","nz-input","","formControlName","email",3,"placeholder","ngModelChange"],["emailErrors",""],["emailSuffix",""],["nz-input","","formControlName","password",3,"type","placeholder"],["passwordSuffix",""],["href","",3,"click"],["xlSize","","nz-button","",3,"nzType","nzLoading","nzSize"],["target","_blank",3,"href"],[4,"ngIf"],["name","email","color","#8A8A8A","altColor","#8A8A8A","size","14px"],["name","view","size","14px",3,"color","click"]],template:function(e,t){1&e&&S.Vc(0,fe,40,38,"div",0),2&e&&S.rc("ngIf",t.clientConfig)},directives:[z.q,k.c,k.a,z.r,D.a,C.F,C.v,ie.b,C.m,ie.c,ie.a,W.a,M.c,M.d,M.b,C.d,C.u,C.k,A.a,X.a,re,oe.a],pipes:[ae.a],styles:["#login-container[_ngcontent-%COMP%]{height:100vh;background-color:var(--neutral-color)}#form-container[_ngcontent-%COMP%]{height:100vh;background:var(--neutral-color);padding:5%}#bg-container[_ngcontent-%COMP%]{height:100vh;background-size:cover}#bg-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%}h2[_ngcontent-%COMP%]{margin-top:30%}nz-input-group[_ngcontent-%COMP%]{height:50px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey);border-radius:5px;font:normal normal 700 14px Nunito}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:active, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:hover{box-shadow:inset 0 0 0 30px #fff!important;-webkit-box-shadow:inset 0 0 0 30px #fff!important;font-weight:700;color:#0f2015}button[_ngcontent-%COMP%]{margin-top:100px}button[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{display:block;text-align:center;position:absolute;bottom:15px;left:0}@media only screen and (max-width:1366px){button[_ngcontent-%COMP%]{margin-top:50px}}@media only screen and (max-width:800px){h4[_ngcontent-%COMP%]{font-size:12px}button[_ngcontent-%COMP%]{margin-top:50px}}@media screen and (orientation:portrait){#bg-container[_ngcontent-%COMP%], #form-container[_ngcontent-%COMP%]{height:50vh;top:24vh}h2[_ngcontent-%COMP%]{margin-top:0}}"]}),be),ve=a("SxV6"),_e=a("AytR"),ye=a("tk/3"),Re=((pe=function(){function t(n,i){e(this,t),this._http=n,this.router=i,this.rootUrl=_e.g.url+"/v3/users/password"}return n(t,[{key:"validateResetToken",value:function(e){return this._http.get("".concat(this.rootUrl,"/reset-token/").concat(e,"/validation"),{observe:"response"}).pipe(Object(ve.a)())}},{key:"changePassword",value:function(e,t){return this._http.post(this.rootUrl,{newPassword:t,resetToken:e},{observe:"response",responseType:"text"}).pipe(Object(ve.a)())}},{key:"requestResetByMail",value:function(e){return this._http.post("".concat(this.rootUrl,"/reset-token"),{resetType:"EMAIL",value:e},{observe:"response"}).pipe(Object(ve.a)())}},{key:"redirectToLoginPage",value:function(){this.router.navigate(["authorization/login"])}},{key:"redirectToForgotPasswordExpiredPage",value:function(){this.router.navigate(["authorization/forgot-password-link-expired"])}}]),t}()).\u0275fac=function(e){return new(e||pe)(S.bc(ye.c),S.bc(v.g))},pe.\u0275prov=S.Nb({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe),Oe=a("l5mm"),Pe=((me=function(){function t(n){e(this,t),this.router=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.timerSubscription=Object(Oe.a)(1e3).subscribe(function(t){0!=e.secondsToRedirect?e.secondsToRedirect-=1:e.redirect()})}},{key:"redirect",value:function(){this.router.navigate([this.redirectPage])}},{key:"ngOnDestroy",value:function(){this.timerSubscription.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||me)(S.Rb(v.g))},me.\u0275cmp=S.Lb({type:me,selectors:[["app-email-sent-redirect"]],inputs:{secondsToRedirect:"secondsToRedirect",redirectPage:"redirectPage"},decls:10,vars:10,consts:[["size","80px","name","emailSent"],["nz-typography",""]],template:function(e,t){1&e&&(S.Sb(0,"app-icons",0),S.Xb(1,"h1",1),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"h2",1),S.Xc(5),S.jc(6,"translate"),S.Xb(7,"u"),S.Xc(8),S.jc(9,"translate"),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.Zc(" ",S.kc(3,4,"COMMON.EMAIL_SENT_SUCCESS"),""),S.Db(3),S.Zc("",S.kc(6,6,"COMMON.REDIRECT_IN")," "),S.Db(3),S.ad("",t.secondsToRedirect," ",S.kc(9,8,"COMMON.SECONDS"),""))},directives:[oe.a,D.a],pipes:[ae.a],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}"]}),me),Ee=((he=function(){function t(n){e(this,t),this.router=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.timerSubscription=Object(Oe.a)(1e3).subscribe(function(t){0!=e.secondsToRedirect?e.secondsToRedirect-=1:e.redirect()})}},{key:"redirect",value:function(){this.router.navigate([this.redirectPage])}},{key:"ngOnDestroy",value:function(){this.timerSubscription.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||he)(S.Rb(v.g))},he.\u0275cmp=S.Lb({type:he,selectors:[["app-email-sent-fail-redirect"]],inputs:{secondsToRedirect:"secondsToRedirect",redirectPage:"redirectPage"},decls:10,vars:10,consts:[["size","80px","name","emailSentFailed"],["nz-typography",""]],template:function(e,t){1&e&&(S.Sb(0,"app-icons",0),S.Xb(1,"h1",1),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"h2",1),S.Xc(5),S.jc(6,"translate"),S.Xb(7,"u"),S.Xc(8),S.jc(9,"translate"),S.Wb(),S.Wb()),2&e&&(S.Db(2),S.Zc(" ",S.kc(3,4,"COMMON.EMAIL_SENT_FAIL_ALERT"),""),S.Db(3),S.Zc("",S.kc(6,6,"COMMON.REDIRECT_IN")," "),S.Db(3),S.ad("",t.secondsToRedirect," ",S.kc(9,8,"COMMON.SECONDS"),""))},directives:[oe.a,D.a],pipes:[ae.a],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}h1[_ngcontent-%COMP%]{color:#ff3939!important}"]}),he);function Te(e,t){1&e&&S.Sb(0,"app-email-sent-redirect",2),2&e&&S.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function Ie(e,t){1&e&&S.Sb(0,"app-email-sent-fail-redirect",2),2&e&&S.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function we(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function ke(e,t){if(1&e&&S.Vc(0,we,3,3,"ng-container",1),2&e){var n=S.ic(2),i=null;S.rc("ngIf",(null==(i=n.forgotPasswordForm.get("email"))?null:i.dirty)&&(null==(i=n.forgotPasswordForm.get("email"))?null:i.errors))}}function Me(e,t){if(1&e){var n=S.Yb();S.Xb(0,"div"),S.Xb(1,"h1",3),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"h2",3),S.Xc(5),S.jc(6,"translate"),S.Wb(),S.Xb(7,"form",4),S.ec("ngSubmit",function(){return S.Lc(n),S.ic().requestResetByMail()}),S.Xb(8,"nz-form-item"),S.Xb(9,"nz-form-control",5),S.Xb(10,"nz-input-group"),S.Xb(11,"input",6),S.ec("ngModelChange",function(e){return S.Lc(n),S.ic().resetMailId=e}),S.jc(12,"translate"),S.Wb(),S.Wb(),S.Vc(13,ke,1,1,"ng-template",null,7,S.Wc),S.Wb(),S.Wb(),S.Sb(15,"br"),S.Xb(16,"nz-form-item"),S.Xb(17,"nz-form-control"),S.Xb(18,"button",8),S.Xc(19),S.jc(20,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Xb(21,"h4",3),S.Xc(22),S.jc(23,"translate"),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.Ic(14),r=S.ic();S.Db(2),S.Zc(" ",S.kc(3,8,"FORGOT_PASSWORD.TITLE"),""),S.Db(3),S.Yc(S.kc(6,10,"FORGOT_PASSWORD.ENTER_MAIL_MESSAGE")),S.Db(2),S.rc("formGroup",r.forgotPasswordForm),S.Db(2),S.rc("nzErrorTip",i),S.Db(2),S.sc("placeholder",S.kc(12,12,"FORGOT_PASSWORD.EMAIL_INPUT_PLACEHOLDER")),S.rc("ngModel",r.resetMailId),S.Db(8),S.Zc(" ",S.kc(20,14,"FORGOT_PASSWORD.SEND_INSTRUCTIONS")," "),S.Db(3),S.Yc(S.kc(23,16,"FORGOT_PASSWORD.CONTACT_SUPPORT_TEAM_TAILNOTE"))}}var Ce,ze,De,Ae=((Ce=function(){function t(n,i,r){e(this,t),this.translationService=n,this.resetPasswordService=i,this.formBuilder=r}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.state="initial",this.redirectPage="authorization/login",this.translationService.getMultiple("COMMON.EMAIL_SENT_SUCCESS","COMMON.EMAIL_SENT_FAIL_ALERT").subscribe(function(t){return e.translatedStrings=t}),this.initializeForgotPasswordForm()}},{key:"initializeForgotPasswordForm",value:function(){this.forgotPasswordForm=this.formBuilder.group({email:[null,[C.D.email,C.D.required]]})}},{key:"requestResetByMail",value:function(){var e=this;for(var t in this.forgotPasswordForm.controls)this.forgotPasswordForm.controls[t].markAsDirty(),this.forgotPasswordForm.controls[t].updateValueAndValidity();this.forgotPasswordForm.valid&&this.resetPasswordService.requestResetByMail(this.resetMailId).subscribe(function(t){e.state=200==t.status?"emailSent":"emailSentFail"},function(t){e.state="emailSentFail"})}}]),t}()).\u0275fac=function(e){return new(e||Ce)(S.Rb(b.a),S.Rb(Re),S.Rb(C.h))},Ce.\u0275cmp=S.Lb({type:Ce,selectors:[["app-forgot-password"]],decls:3,vars:3,consts:[[3,"secondsToRedirect","redirectPage",4,"ngIf"],[4,"ngIf"],[3,"secondsToRedirect","redirectPage"],["nz-typography",""],["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["xlSize","","formControlName","email","nz-input","","name","email","type","email","id","email","required","",3,"placeholder","ngModel","ngModelChange"],["errorMessage",""],["xlSize","","nz-button","","nzType","primary"]],template:function(e,t){1&e&&(S.Vc(0,Te,1,2,"app-email-sent-redirect",0),S.Vc(1,Ie,1,2,"app-email-sent-fail-redirect",0),S.Vc(2,Me,24,18,"div",1)),2&e&&(S.rc("ngIf","emailSent"===t.state),S.Db(1),S.rc("ngIf","emailSentFail"===t.state),S.Db(1),S.rc("ngIf","initial"===t.state))},directives:[z.q,Pe,Ee,D.a,C.F,C.v,ie.b,C.m,k.c,ie.c,k.a,ie.a,W.a,M.c,C.d,M.b,re,C.u,C.k,C.C,A.a,X.a],pipes:[ae.a],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;margin:0 auto;text-align:center}h2[_ngcontent-%COMP%]{max-width:600px}h4[_ngcontent-%COMP%]{margin:7% auto;line-height:1.2;max-width:480px}form[_ngcontent-%COMP%]{margin-top:40px}[_nghost-%COMP%]     .ant-form-item-explain-error{margin-top:10px;font-size:15px}"]}),Ce),We=a("nYR2"),Xe=((ze=function(){function t(){e(this,t)}return n(t,[{key:"confirmPasswordValidator",value:function(){return function(e){var t=e.get("confirmPassword"),n=e.get("password");t.value?n.value!==t.value&&t.setErrors({confirm:!0,error:!0}):t.setErrors({required:!0})}}},{key:"minimumLengthValidator",value:function(e){return e.value?e.value.length<8?{lengthNotReached:!0,error:!0}:null:{required:!0}}}]),t}()).\u0275fac=function(e){return new(e||ze)},ze.\u0275prov=S.Nb({token:ze,factory:ze.\u0275fac}),ze),Le=a("qAZ0"),xe=((De=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||De)},De.\u0275cmp=S.Lb({type:De,selectors:[["app-password-reset-dialog"]],inputs:{alertMessage:"alertMessage",success:"success"},decls:4,vars:1,consts:[["name","success ? 'checkCircle': 'closeCircle'"]],template:function(e,t){1&e&&(S.Xb(0,"div"),S.Sb(1,"app-icons",0),S.Xb(2,"span"),S.Xc(3),S.Wb(),S.Wb()),2&e&&(S.Db(3),S.Yc(t.alertMessage))},directives:[oe.a],styles:["div[_ngcontent-%COMP%]{text-align:center;margin:0 auto 20px;background:var(--primary-color) 0 0 no-repeat padding-box;padding:4%;z-index:1}div[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{border-radius:10px;opacity:1;font:normal normal 700 18px/24px Nunito;letter-spacing:0;color:var(--neutral-color)}span[_ngcontent-%COMP%]{margin-left:3%}"]}),De);function Ne(e,t){1&e&&S.Sb(0,"nz-spin",3)}function Fe(e,t){if(1&e&&S.Sb(0,"app-password-reset-dialog",4),2&e){var n=S.ic();S.rc("success",n.success)("alertMessage",n.alertMessage)}}function Ue(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"RESET_PASSWORD.MINIMUM_LENGTH_ALERT_MESSAGE")," "))}function Ve(e,t){if(1&e&&S.Vc(0,Ue,3,3,"ng-container",18),2&e){var n=S.ic(2),i=null;S.rc("ngIf",null==(i=n.resetPasswordForm.get("password"))?null:i.hasError("lengthNotReached"))}}function je(e,t){if(1&e){var n=S.Yb();S.Xb(0,"app-icons",19),S.ec("click",function(){S.Lc(n);var e=S.ic(2);return e.passwordVisible=!e.passwordVisible}),S.Wb()}}function Ge(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"RESET_PASSWORD.PLEASE_CONFIRM_YOUR_PASSWORD")," "))}function qe(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"RESET_PASSWORD.PASSWORDS_DO_NOT_MATCH")," "))}function Be(e,t){if(1&e&&(S.Vc(0,Ge,3,3,"ng-container",18),S.Vc(1,qe,3,3,"ng-container",18)),2&e){var n=t.$implicit;S.rc("ngIf",n.hasError("required")),S.Db(1),S.rc("ngIf",n.hasError("confirm"))}}function Ye(e,t){if(1&e){var n=S.Yb();S.Xb(0,"div"),S.Xb(1,"h1",5),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"h2",5),S.Xc(5),S.jc(6,"translate"),S.Wb(),S.Xb(7,"h4",5),S.Xc(8),S.jc(9,"translate"),S.Wb(),S.Xb(10,"form",6),S.ec("ngSubmit",function(){return S.Lc(n),S.ic().onFormSubmit()}),S.Xb(11,"nz-form-item"),S.Xb(12,"nz-form-label",7),S.Xc(13),S.jc(14,"translate"),S.Wb(),S.Xb(15,"nz-form-control",8),S.Xb(16,"nz-input-group",9),S.Xb(17,"input",10),S.ec("ngModelChange",function(){return S.Lc(n),S.ic().updateConfirmPasswordValidator()}),S.Wb(),S.Wb(),S.Vc(18,Ve,1,1,"ng-template",null,11,S.Wc),S.Vc(20,je,1,0,"ng-template",null,12,S.Wc),S.Wb(),S.Wb(),S.Xb(22,"nz-form-item"),S.Xb(23,"nz-form-label",13),S.Xc(24),S.jc(25,"translate"),S.Wb(),S.Xb(26,"nz-form-control",8),S.Sb(27,"input",14),S.Vc(28,Be,2,2,"ng-template",null,15,S.Wc),S.Wb(),S.Wb(),S.Xb(30,"nz-form-item",16),S.Xb(31,"nz-form-control"),S.Xb(32,"button",17),S.Xc(33),S.jc(34,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.Ic(19),r=S.Ic(21),o=S.Ic(29),a=S.ic();S.Jb("isDisabled",a.isAlertVisible),S.Db(2),S.Zc("",S.kc(3,14,"RESET_PASSWORD.TITLE")," "),S.Db(3),S.Yc(S.kc(6,16,"RESET_PASSWORD.CREATE_NEW")),S.Db(3),S.Yc(S.kc(9,18,"RESET_PASSWORD.MINIMUM_LENGTH_DISPLAY_MESSAGE")),S.Db(2),S.rc("nzLayout","vertical")("formGroup",a.resetPasswordForm),S.Db(3),S.Yc(S.kc(14,20,"RESET_PASSWORD.NEWPASS")),S.Db(2),S.rc("nzErrorTip",i),S.Db(1),S.rc("nzSuffix",r),S.Db(1),S.rc("type",a.passwordVisible?"text":"password"),S.Db(7),S.Zc("",S.kc(25,22,"RESET_PASSWORD.CNFPASS")," "),S.Db(2),S.rc("nzErrorTip",o),S.Db(7),S.Zc(" ",S.kc(34,24,"RESET_PASSWORD.CHANGE_MY_PASSWORD")," ")}}var Ze,He=((Ze=function(){function t(n,i,r,o,a,s){e(this,t),this.translationService=n,this.formBuilder=i,this.resetPasswordService=r,this.route=o,this.notification=a,this.resetPasswordValidator=s,this.isAlertVisible=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.translationService.getMultiple("RESET_PASSWORD.OLD_AND_NEW_PASSWORD_CANNOT_BE_SAME","RESET_PASSWORD.PASSWORD_UPDATED_SUCCESSFULLY","RESET_PASSWORD.PASSWORD_UPDATE_FAILED","RESET_PASSWORD.ERROR_REDIRECT_MESSAGE_TITLE","RESET_PASSWORD.ERROR_REDIRECT_MESSAGE").subscribe(function(t){return e.translatedStrings=t}),this.token=this.route.snapshot.queryParamMap.get("token"),this.token?this.resetPasswordService.validateResetToken(this.token).subscribe(function(t){200!=t.status?e.resetPasswordService.redirectToForgotPasswordExpiredPage():e.loading=!1},function(t){410==t.status?e.resetPasswordService.redirectToForgotPasswordExpiredPage():(e.showErrorNotificationForRedirect(),e.resetPasswordService.redirectToLoginPage())}):(this.showErrorNotificationForRedirect(),this.resetPasswordService.redirectToLoginPage()),this.initializeResetPasswordForm()}},{key:"showErrorNotificationForRedirect",value:function(){this.notification.create("error",this.translatedStrings.get("RESET_PASSWORD.ERROR_REDIRECT_MESSAGE_TITLE"),this.translatedStrings.get("RESET_PASSWORD.ERROR_REDIRECT_MESSAGE"))}},{key:"initializeResetPasswordForm",value:function(){this.resetPasswordForm=this.formBuilder.group({password:[null,[C.D.required,this.resetPasswordValidator.minimumLengthValidator]],confirmPassword:[null,[C.D.required]]},{validators:this.resetPasswordValidator.confirmPasswordValidator()})}},{key:"onFormSubmit",value:function(){for(var e in this.resetPasswordForm.controls)this.resetPasswordForm.controls[e].markAsDirty(),this.resetPasswordForm.controls[e].updateValueAndValidity();this.resetPasswordForm.valid&&this.changePassword(this.resetPasswordForm.controls.password.value)}},{key:"changePassword",value:function(e){var t=this;this.resetPasswordService.changePassword(this.token,e).pipe(Object(We.a)(function(){return t.redirectToLoginAfterFiveSeconds()})).subscribe(function(e){200==e.status?t.showSuccessMessage():t.showUpdateFailedMessage()},function(e){"Old and new passwords cannot be same!!!"==JSON.parse(e.error).message?t.showPasswordsAreSameMessage():t.showUpdateFailedMessage()})}},{key:"updateConfirmPasswordValidator",value:function(){var e=this;setTimeout(function(){return e.resetPasswordForm.controls.confirmPassword.updateValueAndValidity()})}},{key:"redirectToLoginAfterFiveSeconds",value:function(){var e=this;setTimeout(function(){return e.resetPasswordService.redirectToLoginPage()},5e3)}},{key:"showSuccessMessage",value:function(){this.success=!0,this.alertMessage=this.translatedStrings.get("RESET_PASSWORD.PASSWORD_UPDATED_SUCCESSFULLY"),this.isAlertVisible=!0}},{key:"showUpdateFailedMessage",value:function(){this.success=!1,this.alertMessage=this.translatedStrings.get("RESET_PASSWORD.PASSWORD_UPDATE_FAILED"),this.isAlertVisible=!0}},{key:"showPasswordsAreSameMessage",value:function(){this.success=!1,this.alertMessage=this.translatedStrings.get("RESET_PASSWORD.OLD_AND_NEW_PASSWORD_CANNOT_BE_SAME"),this.isAlertVisible=!0}}]),t}()).\u0275fac=function(e){return new(e||Ze)(S.Rb(b.a),S.Rb(C.h),S.Rb(Re),S.Rb(v.a),S.Rb(_.b),S.Rb(Xe))},Ze.\u0275cmp=S.Lb({type:Ze,selectors:[["app-reset-password"]],decls:3,vars:3,consts:[["class","load-spinner","nzSimple","",4,"ngIf"],[3,"success","alertMessage",4,"ngIf"],[3,"isDisabled",4,"ngIf"],["nzSimple","",1,"load-spinner"],[3,"success","alertMessage"],["nz-typography",""],["nz-form","",3,"nzLayout","formGroup","ngSubmit"],["for","password"],[3,"nzErrorTip"],[3,"nzSuffix"],["id","password","nz-input","","type","password","id","password","formControlName","password",3,"type","ngModelChange"],["minimumLengthErrorMessage",""],["suffixTemplate",""],["for","confirmPassword"],["nz-input","","id","confirmPassword","type","password","formControlName","confirmPassword","id","confirmPassword"],["confirmPasswordErrorMessage",""],[2,"margin-bottom","8px"],["xlSize","","nz-button","","nzType","primary"],[4,"ngIf"],["name","passwordVisible ? 'eyeInvisible' : 'view'",3,"click"]],template:function(e,t){1&e&&(S.Vc(0,Ne,1,0,"nz-spin",0),S.Vc(1,Fe,1,2,"app-password-reset-dialog",1),S.Vc(2,Ye,35,26,"div",2)),2&e&&(S.rc("ngIf",t.loading),S.Db(1),S.rc("ngIf",t.isAlertVisible),S.Db(1),S.rc("ngIf",!t.loading))},directives:[z.q,Le.a,xe,D.a,C.F,C.v,ie.b,C.m,k.c,ie.c,k.a,ie.d,ie.a,W.a,M.c,M.d,M.b,C.d,C.u,C.k,A.a,X.a,re,oe.a],pipes:[ae.a],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;margin:0 auto;text-align:center}.load-spinner[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]{text-align:center}.main-div[_ngcontent-%COMP%]{margin:0 auto}.blueEyeIcon[_ngcontent-%COMP%]{color:blue}.isDisabled[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;opacity:.7;color:#dedede}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-bottom:0}input[_ngcontent-%COMP%]{height:60px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey)}form[_ngcontent-%COMP%]{margin-top:5%}.ant-input-affix-wrapper[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"]}),Ze);function Je(e,t){1&e&&S.Sb(0,"app-email-sent-redirect",2),2&e&&S.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function Ke(e,t){1&e&&S.Sb(0,"app-email-sent-fail-redirect",2),2&e&&S.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function $e(e,t){1&e&&(S.Vb(0),S.Xc(1),S.jc(2,"translate"),S.Ub()),2&e&&(S.Db(1),S.Zc(" ",S.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function Qe(e,t){if(1&e&&S.Vc(0,$e,3,3,"ng-container",1),2&e){var n=S.ic(2),i=null;S.rc("ngIf",(null==(i=n.forgotPasswordForm.get("email"))?null:i.dirty)&&(null==(i=n.forgotPasswordForm.get("email"))?null:i.errors))}}function et(e,t){if(1&e){var n=S.Yb();S.Xb(0,"div"),S.Xb(1,"h1",3),S.Xc(2),S.jc(3,"translate"),S.Wb(),S.Xb(4,"h2",3),S.Xc(5),S.jc(6,"translate"),S.Wb(),S.Xb(7,"form",4),S.ec("ngSubmit",function(){return S.Lc(n),S.ic().requestResetByMail()}),S.Xb(8,"nz-form-item"),S.Xb(9,"nz-form-control",5),S.Xb(10,"nz-input-group"),S.Xb(11,"input",6),S.ec("ngModelChange",function(e){return S.Lc(n),S.ic().resetMailId=e}),S.jc(12,"translate"),S.Wb(),S.Wb(),S.Vc(13,Qe,1,1,"ng-template",null,7,S.Wc),S.Wb(),S.Wb(),S.Xb(15,"nz-form-item"),S.Xb(16,"nz-form-control",8),S.Xb(17,"button",9),S.Xc(18),S.jc(19,"translate"),S.Wb(),S.Wb(),S.Wb(),S.Wb(),S.Xb(20,"button",10),S.ec("click",function(){return S.Lc(n),S.ic().redirectToLoginPage()}),S.Xb(21,"u"),S.Xc(22),S.jc(23,"translate"),S.Wb(),S.Wb(),S.Wb()}if(2&e){var i=S.Ic(14),r=S.ic();S.Db(2),S.Zc("",S.kc(3,8,"FORGOT_PASSWORD.LINK_EXPIRED_TITLE")," "),S.Db(3),S.Yc(S.kc(6,10,"FORGOT_PASSWORD.LINK_EXPIRED_MESSAGE")),S.Db(2),S.rc("formGroup",r.forgotPasswordForm),S.Db(2),S.rc("nzErrorTip",i),S.Db(2),S.sc("placeholder",S.kc(12,12,"FORGOT_PASSWORD.EMAIL_INPUT_PLACEHOLDER")),S.rc("ngModel",r.resetMailId),S.Db(7),S.Zc(" ",S.kc(19,14,"FORGOT_PASSWORD.RESEND_INSTRUCTIONS")," "),S.Db(4),S.Yc(S.kc(23,16,"FORGOT_PASSWORD.GO_TO_HOMEPAGE"))}}var tt,nt,it,rt=[{path:"login",component:Se},{path:"logout",component:R},{path:"forgot-password",component:Ae},{path:"forgot-password-link-expired",component:(tt=function(){function t(n,i,r){e(this,t),this.translationService=n,this.formBuilder=i,this.resetPasswordService=r}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.state="initial",this.translationService.getMultiple("FORGOT_PASSWORD.EMAIL_SENT_ALERT","FORGOT_PASSWORD.EMAIL_SENT_FAIL_ALERT").subscribe(function(t){return e.translatedStrings=t}),this.initializeForgotPasswordForm()}},{key:"initializeForgotPasswordForm",value:function(){this.forgotPasswordForm=this.formBuilder.group({email:[null,[C.D.email,C.D.required]]})}},{key:"requestResetByMail",value:function(){var e=this;for(var t in this.forgotPasswordForm.controls)this.forgotPasswordForm.controls[t].markAsDirty(),this.forgotPasswordForm.controls[t].updateValueAndValidity();this.forgotPasswordForm.valid&&this.resetPasswordService.requestResetByMail(this.resetMailId).subscribe(function(t){e.state=200==t.status?"emailSent":"emailSentFail"},function(t){e.state="emailSentFail"})}},{key:"redirectToLoginPage",value:function(){this.resetPasswordService.redirectToLoginPage()}}]),t}(),tt.\u0275fac=function(e){return new(e||tt)(S.Rb(b.a),S.Rb(C.h),S.Rb(Re))},tt.\u0275cmp=S.Lb({type:tt,selectors:[["app-forgot-password-link-expired"]],decls:3,vars:3,consts:[[3,"secondsToRedirect","redirectPage",4,"ngIf"],[4,"ngIf"],[3,"secondsToRedirect","redirectPage"],["nz-typography",""],["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["xlSize","","formControlName","email","nz-input","","name","email","type","email","id","email","required","",3,"placeholder","ngModel","ngModelChange"],["errorMessage",""],[2,"margin-top","30px"],["xlSize","","nz-button","","nzType","primary"],["nz-button","","nzType","link","name","homePageLink",3,"click"]],template:function(e,t){1&e&&(S.Vc(0,Je,1,2,"app-email-sent-redirect",0),S.Vc(1,Ke,1,2,"app-email-sent-fail-redirect",0),S.Vc(2,et,24,18,"div",1)),2&e&&(S.rc("ngIf","emailSent"===t.state),S.Db(1),S.rc("ngIf","emailSentFail"===t.state),S.Db(1),S.rc("ngIf","initial"===t.state))},directives:[z.q,Pe,Ee,D.a,C.F,C.v,ie.b,C.m,k.c,ie.c,k.a,ie.a,W.a,M.c,C.d,M.b,re,C.u,C.k,C.C,A.a,X.a],pipes:[ae.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:630px;height:100%;margin:0 auto;text-align:center}h1[_ngcontent-%COMP%]{color:#ff3939!important}button[name=homePageLink][_ngcontent-%COMP%]{font:normal normal normal 20px/27px Nunito}form[_ngcontent-%COMP%]{margin-top:40px}"]}),tt)},{path:"reset-password",component:He}],ot=((nt=function t(){e(this,t)}).\u0275mod=S.Pb({type:nt}),nt.\u0275inj=S.Ob({factory:function(e){return new(e||nt)},imports:[[v.k.forChild(rt)],v.k]}),nt),at=a("KZX/"),st=a("UFn0"),ct=a("SHZf"),lt=((it=function t(n){e(this,t),this.translationService=n,n.setLanguage()}).\u0275mod=S.Pb({type:it}),it.\u0275inj=S.Ob({factory:function(e){return new(e||it)(S.bc(b.a))},providers:[Xe],imports:[[z.c,at.a,st.a,C.o,C.B,ot,ct.a.forRoot()]]}),it)}}])}();