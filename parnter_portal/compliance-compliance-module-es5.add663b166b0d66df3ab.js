!function(){function t(n,e,a){return(t=c()?Reflect.construct:function(t,n,e){var a=[null];a.push.apply(a,n);var i=new(Function.bind.apply(t,a));return e&&r(i,e.prototype),i}).apply(null,arguments)}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){if(t){if("string"==typeof t)return a(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function o(t){var n=c();return function(){var e,a=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return l(this,e)}}function l(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function p(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,n,e){return n&&p(t.prototype,n),e&&p(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"5bRv":function(a,r,l){"use strict";l.r(r),l.d(r,"ComplianceModule",function(){return Oe});var c,s=l("mUB+"),p=l("ofXK"),b=l("WoUL"),f=l("3Pt+"),g=l("tyNb"),m=l("icpI"),h=l("KZX/"),v=l("SHZf"),z=l("UFn0"),S=l("rbUg"),y=l("T5gh"),C=l("bA1+"),I=l("yWgs"),X=l("qQcL"),D=l("bnsq"),O=l("fXoL"),P=l("XNiG"),T=l("cp0P"),M=l("igu/"),E=l("tk/3"),W=l("AytR"),_=((c=function(){function t(n){u(this,t),this._http=n,this.rootURL=W.g.url}return d(t,[{key:"filterCommunicationNotes",value:function(t,n,e,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c="".concat(this.rootURL,"/v1/episode-compliance/patient-communications/").concat(t),s=new E.h,u={staff:n,user:e,program:a,isBillable:i,state:r,startDateRange:o,endDateRange:l};return Object.keys(u).forEach(function(t){return u[t]&&(s=s.append(t,u[t]))}),this._http.get(c,{params:s})}},{key:"fetchPatientCommunicationNotes",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,e=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i="".concat(this.rootURL,"/v1/episode-compliance/patient-communications/").concat(t),r=new E.h;return r.append("results","".concat(n)),a&&r.append("requestTenantId","".concat(a)),Object.keys(e).forEach(function(t){return e[t]&&(r=r.append(t,e[t]))}),this._http.get(i,{params:r})}},{key:"fetchPatientCommunicationNotesDetails",value:function(t,n){var e="".concat(this.rootURL,"/v1/episode-compliance/patient-communications/details/").concat(t),a=new E.h;return Object.keys(n).forEach(function(t){return n[t]&&(a=a.append(t,n[t]))}),this._http.get(e,{params:a})}},{key:"updateNoteState",value:function(t){return this._http.put("".concat(this.rootURL,"/v1/episode-compliance/patient-communications/state"),t)}},{key:"updateNoteStateInBulk",value:function(t,n){return this._http.put("".concat(this.rootURL,"/v1/episode-compliance/patient-communications/state/bulk/").concat(t),n)}},{key:"fetchPatientDetails",value:function(t,n){var e="".concat(this.rootURL,"/v1/episode-compliance/patient-communications/chart-info/").concat(t),a=new E.h;return Object.keys(n).forEach(function(t){return n[t]&&(a=a.append(t,n[t]))}),this._http.get(e,{params:a})}}]),t}()).\u0275fac=function(t){return new(t||c)(O.bc(E.c))},c.\u0275prov=O.Nb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),R=l("dEAy"),A=l("bNXi"),N=l("JA5x"),w=l("PTRe"),k=l("bE2y"),V=l("B+r4"),L=l("OzZK"),x=l("RwU8"),F=l("C2AL"),U=l("eHCX");function j(t,n){1&t&&(O.Xb(0,"span",13),O.Xc(1,"Please enter a valid reason"),O.Wb())}function B(t,n){1&t&&(O.Xb(0,"span",13),O.Xc(1,"Please select a level"),O.Wb())}function q(t,n){1&t&&(O.Xb(0,"span",13),O.Xc(1,"Please select a category"),O.Wb())}var Y,Z=((Y=function(){function t(n,e,a){u(this,t),this._modalRef=n,this._complianceService=e,this._notificationsService=a,this.reasonRequired=!1,this.levelRequired=!1,this.categoryRequired=!1}return d(t,[{key:"close",value:function(){this._modalRef.close(!1)}},{key:"validate",value:function(){var t;this.reasonRequired=!(null===(t=this.reason)||void 0===t?void 0:t.length),this.levelRequired=!this.level,this.categoryRequired=!this.category}},{key:"save",value:function(){var t=this;this.validate(),this.reasonRequired||this.levelRequired||this.categoryRequired||this._complianceService.updateNoteState({id:this.id,state:"REJECTED",reason:this.reason,level:this.level,category:this.category}).subscribe(function(){t._notificationsService.success("Compliance","Note updated successfully!"),t._modalRef.close(!0)})}}]),t}()).\u0275fac=function(t){return new(t||Y)(O.Rb(R.e),O.Rb(_),O.Rb(A.b))},Y.\u0275cmp=O.Lb({type:Y,selectors:[["app-rejection"]],inputs:{id:"id"},decls:44,vars:6,consts:[["nz-input","","placeholder","Enter rejection reason here...",3,"ngModel","ngModelChange"],["nz-typography","","nzType","danger",4,"ngIf"],[3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","LOW"],["nz-radio-button","","nzValue","MEDIUM"],["nz-radio-button","","nzValue","HIGH"],["nz-radio","","nzValue","PATIENT_SAFETY_CONCERN"],["nz-radio","","nzValue","FALSE_DOCUMENTATION"],["nz-radio","","nzValue","DOES_NOT_MEET_REGULATION"],["nz-row",""],["nz-col","","nzSpan","24","id","actions"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-typography","","nzType","danger"]],template:function(t,n){1&t&&(O.Xb(0,"nz-card"),O.Xb(1,"label"),O.Xb(2,"strong"),O.Xc(3,"Rejection Reason *"),O.Wb(),O.Wb(),O.Xb(4,"input",0),O.ec("ngModelChange",function(t){return n.reason=t}),O.Wb(),O.Sb(5,"br"),O.Vc(6,j,2,0,"span",1),O.Sb(7,"br"),O.Sb(8,"br"),O.Xb(9,"label"),O.Xb(10,"strong"),O.Xc(11,"Rejection Level *"),O.Wb(),O.Wb(),O.Xb(12,"nz-radio-group",2),O.ec("ngModelChange",function(t){return n.level=t}),O.Xb(13,"label",3),O.Xc(14,"Low"),O.Wb(),O.Xb(15,"label",4),O.Xc(16,"Medium"),O.Wb(),O.Xb(17,"label",5),O.Xc(18,"High"),O.Wb(),O.Wb(),O.Sb(19,"br"),O.Vc(20,B,2,0,"span",1),O.Sb(21,"br"),O.Sb(22,"br"),O.Xb(23,"label"),O.Xb(24,"strong"),O.Xc(25,"Rejection Category *"),O.Wb(),O.Wb(),O.Xb(26,"nz-radio-group",2),O.ec("ngModelChange",function(t){return n.category=t}),O.Xb(27,"label",6),O.Xc(28,"Patient Safety Concern"),O.Wb(),O.Xb(29,"label",7),O.Xc(30,"False Documentation"),O.Wb(),O.Xb(31,"label",8),O.Xc(32,"Does not meet regulation"),O.Wb(),O.Wb(),O.Sb(33,"br"),O.Vc(34,q,2,0,"span",1),O.Sb(35,"br"),O.Sb(36,"br"),O.Xb(37,"div",9),O.Xb(38,"div",10),O.Xb(39,"button",11),O.ec("click",function(){return n.close()}),O.Xc(40,"Cancel"),O.Wb(),O.Xc(41," \xa0 "),O.Xb(42,"button",12),O.ec("click",function(){return n.save()}),O.Xc(43,"Save"),O.Wb(),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.Db(4),O.rc("ngModel",n.reason),O.Db(2),O.rc("ngIf",n.reasonRequired),O.Db(6),O.rc("ngModel",n.level),O.Db(8),O.rc("ngIf",n.levelRequired),O.Db(6),O.rc("ngModel",n.category),O.Db(8),O.rc("ngIf",n.categoryRequired))},directives:[N.a,w.b,f.d,f.u,f.x,p.q,k.c,k.b,k.a,V.c,V.a,L.a,x.a,F.a,U.a],styles:["strong[_ngcontent-%COMP%]{display:block;margin-bottom:5px}#actions[_ngcontent-%COMP%]{text-align:right}"]}),Y);l("cauy");var $=l("xB20"),H=l("nJia"),G=l("dRHE");function J(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.MALE")))}function K(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.FEMALE")))}function Q(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"GENDER.OTHER")))}function tt(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.YES")))}function nt(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.NO")))}function et(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.YES")))}function at(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.NO")))}function it(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.YES")))}function rt(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Yc(O.kc(2,1,"COMMON.NO")))}function ot(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=O.ic();O.Db(1),O.Zc(" ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line1,",\xa0 ")}}function lt(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=O.ic();O.Db(1),O.Zc(" ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.line2,",\xa0 ")}}function ct(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=O.ic();O.Db(1),O.Zc(" ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.city,",\xa0 ")}}function st(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=O.ic();O.Db(1),O.Zc(" ",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.state,"\xa0 ")}}function ut(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=O.ic();O.Db(1),O.Zc(" -\xa0",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.country," ")}}function pt(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=O.ic();O.Db(1),O.Zc(" -\xa0",null==e.patientInfo||null==e.patientInfo.address?null:e.patientInfo.address.pin," ")}}function dt(t,n){1&t&&(O.Xb(0,"p"),O.Xc(1," N/A "),O.Wb())}var bt,ft=((bt=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||bt)(O.Rb(R.e))},bt.\u0275cmp=O.Lb({type:bt,selectors:[["app-chart-patient-demographic-dialog"]],inputs:{patientInfo:"patientInfo"},decls:45,vars:56,consts:[["nzBordered","",3,"nzColumn"],[3,"nzTitle","nzSpan"],[3,"ngSwitch"],[4,"ngSwitchCase"],["nzTitle","Patient Insurance Tier",3,"nzSpan"],[4,"ngSwitchDefault"],["nzTitle","Home address",3,"nzSpan"],["nz-tooltip","",3,"nzTooltipTitle"],[4,"ngIf"],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,n){1&t&&(O.Xb(0,"nz-descriptions",0),O.Xb(1,"nz-descriptions-item",1),O.jc(2,"translate"),O.Xc(3),O.Wb(),O.Xb(4,"nz-descriptions-item",1),O.jc(5,"translate"),O.Xb(6,"span",2),O.Vc(7,J,3,3,"ng-container",3),O.Vc(8,K,3,3,"ng-container",3),O.Vc(9,Q,3,3,"ng-container",3),O.Wb(),O.Wb(),O.Xb(10,"nz-descriptions-item",1),O.jc(11,"translate"),O.Xc(12),O.jc(13,"date"),O.Wb(),O.Xb(14,"nz-descriptions-item",4),O.Xc(15),O.Wb(),O.Xb(16,"nz-descriptions-item",1),O.jc(17,"translate"),O.Xb(18,"span",2),O.Vc(19,tt,3,3,"ng-container",3),O.Vc(20,nt,3,3,"ng-container",5),O.Wb(),O.Wb(),O.Xb(21,"nz-descriptions-item",1),O.jc(22,"translate"),O.Xb(23,"span",2),O.Vc(24,et,3,3,"ng-container",3),O.Vc(25,at,3,3,"ng-container",5),O.Wb(),O.Wb(),O.Xb(26,"nz-descriptions-item",1),O.jc(27,"translate"),O.Xb(28,"span",2),O.Vc(29,it,3,3,"ng-container",3),O.Vc(30,rt,3,3,"ng-container",5),O.Wb(),O.Wb(),O.Xb(31,"nz-descriptions-item",6),O.Xb(32,"p",7),O.Vc(33,ot,2,1,"ng-container",8),O.Vc(34,lt,2,1,"ng-container",8),O.Vc(35,ct,2,1,"ng-container",8),O.Vc(36,st,2,1,"ng-container",8),O.Vc(37,ut,2,1,"ng-container",8),O.Vc(38,pt,2,1,"ng-container",8),O.Wb(),O.Vc(39,dt,2,0,"p",8),O.Wb(),O.Wb(),O.Sb(40,"br"),O.Xb(41,"div",9),O.Xb(42,"div",10),O.Xb(43,"button",11),O.ec("click",function(){return n.destroyModal()}),O.Xc(44,"Ok"),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.rc("nzColumn",6),O.Db(1),O.sc("nzTitle",O.kc(2,41,"PATIENT.FULL_NAME")),O.rc("nzSpan",4),O.Db(2),O.Yc((null==n.patientInfo?null:n.patientInfo.fullName)||"N/A"),O.Db(1),O.sc("nzTitle",O.kc(5,43,"PATIENT.GENDER")),O.rc("nzSpan",2),O.Db(2),O.rc("ngSwitch",null==n.patientInfo?null:n.patientInfo.gender),O.Db(1),O.rc("ngSwitchCase","MALE"),O.Db(1),O.rc("ngSwitchCase","FEMALE"),O.Db(1),O.rc("ngSwitchCase","OTHER"),O.Db(1),O.sc("nzTitle",O.kc(11,45,"COMMON.DOB")),O.rc("nzSpan",3),O.Db(2),O.Yc(O.lc(13,47,null==n.patientInfo?null:n.patientInfo.dateOfBirth,"MM/dd/yyyy")),O.Db(2),O.rc("nzSpan",3),O.Db(1),O.Yc(null==n.patientInfo||null==n.patientInfo.insuranceInformation?null:n.patientInfo.insuranceInformation.tier),O.Db(1),O.sc("nzTitle",O.kc(17,50,"PATIENT.SMS_CONSENT")),O.rc("nzSpan",2),O.Db(2),O.rc("ngSwitch",null==n.patientInfo||null==n.patientInfo.patientConsent?null:n.patientInfo.patientConsent.vmConsent),O.Db(1),O.rc("ngSwitchCase",!0),O.Db(2),O.sc("nzTitle",O.kc(22,52,"PATIENT.VM_CONSENT")),O.rc("nzSpan",2),O.Db(2),O.rc("ngSwitch",null==n.patientInfo||null==n.patientInfo.patientConsent?null:n.patientInfo.patientConsent.vmConsent),O.Db(1),O.rc("ngSwitchCase",!0),O.Db(2),O.sc("nzTitle",O.kc(27,54,"PATIENT.HIPAA_CONSENT")),O.rc("nzSpan",2),O.Db(2),O.rc("ngSwitch",null==n.patientInfo||null==n.patientInfo.patientConsent?null:n.patientInfo.patientConsent.hipaaConsent),O.Db(1),O.rc("ngSwitchCase",!0),O.Db(2),O.rc("nzSpan",6),O.Db(1),O.wc("nzTooltipTitle","",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.line1,"\n                                 ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.line2," ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.city,"\n                                 ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.state," ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.country,"\n                                 ",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.pin,""),O.Db(1),O.rc("ngIf",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.line1),O.Db(1),O.rc("ngIf",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.line2),O.Db(1),O.rc("ngIf",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.city),O.Db(1),O.rc("ngIf",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.state),O.Db(1),O.rc("ngIf",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.country),O.Db(1),O.rc("ngIf",null==n.patientInfo||null==n.patientInfo.address?null:n.patientInfo.address.pin),O.Db(1),O.rc("ngIf",!(null!=n.patientInfo&&null!=n.patientInfo.address&&n.patientInfo.address.line1||null!=n.patientInfo&&null!=n.patientInfo.address&&n.patientInfo.address.line2||null!=n.patientInfo&&null!=n.patientInfo.address&&n.patientInfo.address.city||null!=n.patientInfo&&null!=n.patientInfo.address&&n.patientInfo.address.state||null!=n.patientInfo&&null!=n.patientInfo.address&&n.patientInfo.address.country||null!=n.patientInfo&&null!=n.patientInfo.address&&n.patientInfo.address.pin)))},directives:[$.a,$.b,p.s,p.t,p.u,H.d,p.q,V.c,V.a,L.a,x.a,F.a],pipes:[G.a,p.e],styles:[""]}),bt),gt=l("rMZv"),mt=l("wjar"),ht=l("0zwC"),vt=l("QlLE"),zt=l("ZyQt"),St=l("FwiY"),yt=l("ncKW");function Ct(t,n){if(1&t&&(O.Xb(0,"tr"),O.Xb(1,"td"),O.Xc(2),O.Wb(),O.Xb(3,"td",9),O.Xb(4,"span",10),O.Xc(5),O.Wb(),O.Wb(),O.Xb(6,"td"),O.Sb(7,"app-patient-status-tag",11),O.Wb(),O.Xb(8,"td",12),O.Xb(9,"span",10),O.Xc(10),O.Wb(),O.Wb(),O.Xb(11,"td"),O.Xc(12),O.jc(13,"date"),O.Wb(),O.Xb(14,"td"),O.Xb(15,"span",10),O.jc(16,"purposeLabel"),O.Xc(17),O.jc(18,"purposeLabel"),O.Wb(),O.Wb(),O.Xb(19,"td"),O.Xc(20),O.Wb(),O.Wb()),2&t){var e=n.$implicit;O.Db(2),O.Yc((null==e?null:e.episodeType)||"N/A"),O.Db(1),O.tc("routerLink","/patient/view/",null==e?null:e.attendeeId,""),O.Db(1),O.sc("nzTooltipTitle",(null==e?null:e.attendeeName)||"N/A"),O.Db(1),O.Zc(" ",(null==e?null:e.attendeeName)||"N/A"," "),O.Db(2),O.rc("patientStatus",null==e?null:e.patientStatus),O.Db(2),O.sc("nzTooltipTitle",(null==e?null:e.attenderName)||"N/A"),O.Db(1),O.Zc(" ",(null==e?null:e.attenderName)||"N/A"," "),O.Db(2),O.Yc(O.lc(13,11,null==e||null==e.schedule?null:e.schedule.startDate,"MMM dd, hh:mm a")),O.Db(3),O.sc("nzTooltipTitle",O.kc(16,14,null==e?null:e.appointmentPurpose)),O.Db(2),O.Zc(" ",O.kc(18,16,null==e?null:e.appointmentPurpose)," "),O.Db(3),O.Yc(null==e?null:e.attemptCount)}}function It(t,n){1&t&&(O.Xb(0,"nz-tag",16),O.Sb(1,"i",17),O.Xb(2,"span"),O.Xc(3,"Please select a staff to continue"),O.Wb(),O.Wb())}function Xt(t,n){if(1&t&&(O.Xb(0,"span"),O.Xc(1),O.jc(2,"translate"),O.Wb(),O.Xb(3,"p"),O.Xb(4,"span"),O.Vc(5,It,4,0,"nz-tag",15),O.Wb(),O.Wb()),2&t){var e=O.ic(2);O.Db(1),O.Zc(" ",O.kc(2,2,"COMMON.NODATA")," "),O.Db(4),O.rc("ngIf",!e.selectedStaff)}}function Dt(t,n){if(1&t&&(O.Xb(0,"nz-empty",13),O.Vc(1,Xt,6,4,"ng-template",null,14,O.Wc),O.Wb()),2&t){var e=O.Ic(2);O.rc("nzNotFoundImage","https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original")("nzNotFoundContent",e)}}var Ot,Pt=((Ot=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||Ot)(O.Rb(R.e))},Ot.\u0275cmp=O.Lb({type:Ot,selectors:[["app-chart-patient-appointment-dialog"]],inputs:{appointments:"appointments"},decls:29,vars:12,consts:[[3,"nzData","nzShowPagination"],["upcoming",""],["nzColumnKey","date"],["nzColumnKey","attempt","nzWidth","100px"],["ngFor","",3,"ngForOf"],["noData",""],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"click"],["actionable","",3,"routerLink"],["nz-typography","","nzEllipsis","","nz-tooltip","",3,"nzTooltipTitle"],["isToolTipEnabled","true",3,"patientStatus"],[1,"char-bound-field"],[2,"flex","1","overflow","auto",3,"nzNotFoundImage","nzNotFoundContent"],["contentTpl",""],["nzColor","processing",4,"ngIf"],["nzColor","processing"],["nz-icon","","nzType","exclamation-circle"]],template:function(t,n){if(1&t&&(O.Xb(0,"nz-table",0,1),O.Xb(2,"thead"),O.Xb(3,"tr"),O.Xb(4,"th"),O.Xc(5,"Episode"),O.Wb(),O.Xb(6,"th"),O.Xc(7),O.jc(8,"translate"),O.Wb(),O.Sb(9,"th"),O.Xb(10,"th"),O.Xc(11),O.jc(12,"translate"),O.Wb(),O.Xb(13,"th",2),O.Xc(14),O.jc(15,"translate"),O.Wb(),O.Xb(16,"th"),O.Xc(17,"Type"),O.Wb(),O.Xb(18,"th",3),O.Xc(19,"Attempt"),O.Wb(),O.Wb(),O.Wb(),O.Xb(20,"tbody"),O.Vc(21,Ct,21,18,"ng-template",4),O.Wb(),O.Vc(22,Dt,3,2,"ng-template",null,5,O.Wc),O.Wb(),O.Sb(24,"br"),O.Xb(25,"div",6),O.Xb(26,"div",7),O.Xb(27,"button",8),O.ec("click",function(){return n.destroyModal()}),O.Xc(28,"Ok"),O.Wb(),O.Wb(),O.Wb()),2&t){var e=O.Ic(1);O.rc("nzData",n.appointments)("nzShowPagination",!0),O.Db(7),O.Yc(O.kc(8,6,"HEADER.PATIENTS")),O.Db(4),O.Yc(O.kc(12,8,"TABLEHEADER.ASSIGNEDTO")),O.Db(3),O.Yc(O.kc(15,10,"COMMON.DATE_TIME")),O.Db(7),O.rc("ngForOf",e.data)}},directives:[gt.f,gt.n,gt.o,gt.e,gt.l,gt.k,gt.i,p.p,V.c,V.a,L.a,x.a,F.a,mt.a,g.h,U.a,H.d,ht.a,vt.b,p.q,zt.a,St.a],pipes:[G.a,p.e,yt.a],styles:[""]}),Ot),Tt=l("cTUG");function Mt(t,n){if(1&t){var e=O.Yb();O.Vb(0),O.Xb(1,"app-plan-of-care-details",6),O.ec("refresh",function(){return O.Lc(e),O.ic().getPlanOfCare()}),O.Wb(),O.Sb(2,"br"),O.Ub()}if(2&t){var a=n.$implicit;O.Db(1),O.rc("planOfCare",a)}}function Et(t,n){1&t&&(O.Vb(0),O.Xb(1,"strong"),O.Xc(2,"Plan of Care has not been assigned yet!"),O.Wb(),O.Ub())}var Wt,_t=((Wt=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||Wt)(O.Rb(R.e))},Wt.\u0275cmp=O.Lb({type:Wt,selectors:[["app-chart-patient-plan-of-care-dialog"]],inputs:{planOfCares:"planOfCares"},decls:8,vars:2,consts:[[1,"poc-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"click"],[3,"planOfCare","refresh"]],template:function(t,n){1&t&&(O.Xb(0,"div",0),O.Vc(1,Mt,3,1,"ng-container",1),O.Vc(2,Et,3,0,"ng-container",2),O.Wb(),O.Sb(3,"br"),O.Xb(4,"div",3),O.Xb(5,"div",4),O.Xb(6,"button",5),O.ec("click",function(){return n.destroyModal()}),O.Xc(7,"Ok"),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.Db(1),O.rc("ngForOf",n.planOfCares),O.Db(1),O.rc("ngIf",n.planOfCares&&!(null!=n.planOfCares&&n.planOfCares.length)))},directives:[p.p,p.q,V.c,V.a,L.a,x.a,F.a,Tt.a],styles:[".poc-container[_ngcontent-%COMP%]{max-height:60vh;overflow:scroll}"]}),Wt),Rt=l("UpsY");function At(t,n){if(1&t&&(O.Vb(0),O.Xc(1),O.Ub()),2&t){var e=n.$implicit;O.Db(1),O.Zc(" ",null==e?null:e.name," \xa0 ")}}function Nt(t,n){1&t&&(O.Vb(0),O.Xc(1,", "),O.Ub())}function wt(t,n){if(1&t&&(O.Xb(0,"span"),O.Xc(1),O.jc(2,"titlecase"),O.jc(3,"userLocation"),O.Vc(4,Nt,2,0,"ng-container",9),O.Wb()),2&t){var e=O.ic(),a=e.$implicit,i=e.index,r=O.ic().$implicit;O.Db(1),O.Zc(" ",O.kc(2,2,O.kc(3,4,null==a?null:a.id)),""),O.Db(3),O.rc("ngIf",i!==(null==r||null==r.locations?null:r.locations.length)-1)}}function kt(t,n){if(1&t&&(O.Xb(0,"strong"),O.Vc(1,wt,5,6,"span",9),O.Wb()),2&t){var e=n.$implicit;O.Db(1),O.rc("ngIf",null==e?null:e.defaultLocation)}}function Vt(t,n){if(1&t&&(O.Xb(0,"div",5),O.Xb(1,"nz-card",6),O.Xb(2,"div"),O.Xb(3,"strong"),O.Xc(4),O.Wb(),O.Xb(5,"p",7),O.Vc(6,At,2,1,"ng-container",8),O.Wb(),O.Xb(7,"p"),O.Sb(8,"br"),O.Xb(9,"label"),O.Xc(10,"Site: "),O.Wb(),O.Vc(11,kt,2,1,"strong",8),O.Wb(),O.Wb(),O.Wb(),O.Wb()),2&t){var e=n.$implicit;O.Db(1),O.rc("nzHoverable",!0),O.Db(3),O.Yc(null==e?null:e.fullName),O.Db(2),O.rc("ngForOf",null==e?null:e.roles),O.Db(5),O.rc("ngForOf",null==e?null:e.locations)}}var Lt,xt=((Lt=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||Lt)(O.Rb(R.e))},Lt.\u0275cmp=O.Lb({type:Lt,selectors:[["app-chart-provider-info-dialog"]],inputs:{physicians:"physicians"},decls:7,vars:1,consts:[["nz-row",""],["nz-col","","nzXs","24","nzSm","12","nzMd","8","class","physician",4,"ngFor","ngForOf"],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzXs","24","nzSm","12","nzMd","8",1,"physician"],[3,"nzHoverable"],["nz-typography","","nzType","secondary"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,n){1&t&&(O.Xb(0,"div",0),O.Vc(1,Vt,12,4,"div",1),O.Wb(),O.Sb(2,"br"),O.Xb(3,"div",2),O.Xb(4,"div",3),O.Xb(5,"button",4),O.ec("click",function(){return n.destroyModal()}),O.Xc(6,"Ok"),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.Db(1),O.rc("ngForOf",n.physicians))},directives:[V.c,p.p,V.a,L.a,x.a,F.a,N.a,U.a,p.q],pipes:[p.A,Rt.a],styles:["nz-card[_ngcontent-%COMP%]{background:var(--neutral-color) 0 0 no-repeat padding-box;border-radius:5px;cursor:default}[_nghost-%COMP%]     .ant-card-body{padding:16px 0 16px 16px}"]}),Lt);function Ft(t,n){if(1&t&&(O.Xb(0,"div",6),O.Xb(1,"nz-tag",7),O.Xc(2),O.Wb(),O.Wb()),2&t){var e=n.$implicit;O.Db(1),O.rc("nzColor","green"),O.Db(1),O.ad(" ",null==e?null:e.code,", ",null==e?null:e.description," ")}}function Ut(t,n){1&t&&(O.Xb(0,"div",4),O.Xb(1,"strong"),O.Xc(2,"N/A"),O.Wb(),O.Wb())}var jt,Bt=function(){return[32,8]},qt=((jt=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||jt)(O.Rb(R.e))},jt.\u0275cmp=O.Lb({type:jt,selectors:[["app-chart-patient-problem-list-dialog"]],inputs:{patientInfo:"patientInfo"},decls:8,vars:4,consts:[["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24",4,"ngFor","ngForOf"],["nz-col","",4,"ngIf"],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"click"],["nz-col","","nzSpan","24"],[3,"nzColor"]],template:function(t,n){1&t&&(O.Xb(0,"div",0),O.Vc(1,Ft,3,3,"div",1),O.Vc(2,Ut,3,0,"div",2),O.Wb(),O.Sb(3,"br"),O.Xb(4,"div",3),O.Xb(5,"div",4),O.Xb(6,"button",5),O.ec("click",function(){return n.destroyModal()}),O.Xc(7,"Ok"),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.rc("nzGutter",O.xc(3,Bt)),O.Db(1),O.rc("ngForOf",null==n.patientInfo||null==n.patientInfo.healthInfo?null:n.patientInfo.healthInfo.dxCodes),O.Db(1),O.rc("ngIf",!(null!=n.patientInfo&&null!=n.patientInfo.healthInfo&&null!=n.patientInfo.healthInfo.dxCodes&&n.patientInfo.healthInfo.dxCodes.length)))},directives:[V.c,p.p,p.q,V.a,L.a,x.a,F.a,zt.a],styles:[""]}),jt),Yt=l("2lmJ"),Zt=l("zAKX");function $t(t,n){if(1&t&&O.Sb(0,"nz-option",8),2&t){var e=n.$implicit;O.rc("nzValue",null==e?null:e.id)("nzLabel",(null==e?null:e.fullName)+" ("+(null==e||null==e.role?null:e.role.name)+") ")}}var Ht,Gt,Jt,Kt=((Ht=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy(this.staffSelected)}}]),t}()).\u0275fac=function(t){return new(t||Ht)(O.Rb(R.e))},Ht.\u0275cmp=O.Lb({type:Ht,selectors:[["app-peer-review-dialog"]],inputs:{staffs:"staffs"},decls:11,vars:3,consts:[["nz-row","","nzAlign","middle"],["nz-col","","nzSpan","16"],["nz-col","","nzSpan","8"],["nzPlaceHolder","Select a staff","nzAllowClear","","nzSize","large",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"disabled","click"],[3,"nzValue","nzLabel"]],template:function(t,n){1&t&&(O.Xb(0,"div",0),O.Xb(1,"div",1),O.Xc(2," Select a staff to assign this item for peer review : "),O.Wb(),O.Xb(3,"div",2),O.Xb(4,"nz-select",3),O.ec("ngModelChange",function(t){return n.staffSelected=t}),O.Vc(5,$t,1,2,"nz-option",4),O.Wb(),O.Wb(),O.Wb(),O.Sb(6,"br"),O.Xb(7,"div",5),O.Xb(8,"div",6),O.Xb(9,"button",7),O.ec("click",function(){return n.destroyModal()}),O.Xc(10,"Assign"),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.Db(4),O.rc("ngModel",n.staffSelected),O.Db(1),O.rc("ngForOf",n.staffs),O.Db(4),O.rc("disabled",!n.staffSelected))},directives:[V.c,V.a,Zt.d,f.u,f.x,p.p,L.a,x.a,F.a,Zt.a],styles:[""]}),Ht),Qt=function t(){u(this,t),this.state="ALL",this.program="CCM"},tn=((Jt=function(){function t(n,e){var a=this;u(this,t),this._router=n,this._activatedRoute=e,this.queryParams=this._activatedRoute.snapshot.queryParams,this._activatedRoute.queryParams.subscribe(function(t){a.queryParams=t})}return d(t,[{key:"setParameter",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2?arguments[2]:void 0;this._router.navigate([],{queryParams:t,queryParamsHandling:n?"":"merge",relativeTo:this._activatedRoute,replaceUrl:e})}},{key:"getParameterValue",value:function(t){return"program"===t?this.queryParams[t]||"CCM":this.queryParams[t]}}]),t}()).\u0275fac=function(t){return new(t||Jt)(O.bc(g.g),O.bc(g.a))},Jt.\u0275prov=O.Nb({token:Jt,factory:Jt.\u0275fac,providedIn:"root"}),Jt),nn=((Gt=function(){function t(n){u(this,t),this._urlService=n}return d(t,[{key:"countFiltersApplied",value:function(){var t=0;return this._urlService.getParameterValue("isBillable")&&t++,this._urlService.getParameterValue("program")&&t++,this._urlService.getParameterValue("state")&&"ALL"!=this._urlService.getParameterValue("state")&&t++,this._urlService.getParameterValue("staffIds")&&t++,t}}]),t}()).\u0275fac=function(t){return new(t||Gt)(O.bc(tn))},Gt.\u0275prov=O.Nb({token:Gt,factory:Gt.\u0275fac,providedIn:"root"}),Gt),en=new Map([["ALL","All"],["SUBMITTED","Submitted"],["AUTO_APPROVED","Auto Approved"],["APPROVED","Approved"],["CORRECTED","Corrected"],["REJECTED","Rejected"],["PEER_REVIEW","Peer Review"]]),an=new Map([["ALL","All"],["ENROLLMENT","Enrollment"],["BILLABLE_ENCOUNTER","Billable Encounter"],["NON_BILLABLE_ENCOUNTER","Non-Billable Encounter"]]),rn=new Map([["MONITORING_STAFF","Monitoring Staff"],["ENROLMENT_STAFF","Enrollment Staff"]]),on=new Map([["ONBOARDING","Onboarding"],["DATA_REVIEW_EHR","Data Review - EHR"],["DATA_REVIEW_MD","Data Review - MD"],["ALERT_MANAGEMENT","Managing Alerts"],["ESCALATION","Escalation"],["CARE_PLAN_MODIFICATION","PoC Modification"],["CARE_COORDINATION","Care Coordination"],["MEDICATION_REVIEW","Medication Review"],["ENROLLMENT","Enrollment"],["OTHERS","Others"],["ASSESSMENT_REVIEW","Assessment Review"]]);new Map([["NON_COMPLEX_TMS","99490"],["NON_COMPLEX_TMS_PHYSICIAN","99491"],["NON_COMPLEX_ADDITIONAL_TMS","99439"],["NON_COMPLEX_ADDITIONAL_TMS_B","99439B"],["COMPLEX_TMS","99487"],["COMPLEX_ADDITIONAL_TMS","99489"]]);var ln=l("oyxB"),cn=l("ocnv");function sn(t,n){if(1&t){var e=O.Yb();O.Xb(0,"nz-tag",24),O.ec("nzOnClose",function(){O.Lc(e);var t=n.$implicit;return O.ic(2).onClose(t)}),O.Xc(1),O.Wb()}if(2&t){var a=n.$implicit;O.Db(1),O.Zc("",null==a?null:a.fullName," ")}}function un(t,n){if(1&t&&O.Sb(0,"nz-option",25),2&t){var e=n.$implicit;O.rc("nzValue",e)("nzLabel",null==e?null:e.fullName)}}function pn(t,n){1&t&&(O.Vb(0),O.Xc(1),O.jc(2,"translate"),O.Ub()),2&t&&(O.Db(1),O.Zc(" ",O.kc(2,1,"FILTER.NO_RESULTS_MATCHING_THE_FILTER_CRITERIA")," "))}function dn(t,n){if(1&t&&(O.Xc(0),O.jc(1,"translate"),O.Xb(2,"label",26),O.Xc(3),O.Wb()),2&t){var e=O.ic(2);O.Zc(" ",O.kc(1,2,"USER_TYPE")," "),O.Db(3),O.Zc(" ",e.userTypeNameMap.get(e.selectedUserType)," ")}}function bn(t,n){if(1&t){var e=O.Yb();O.Xb(0,"nz-tab",4),O.Xb(1,"nz-radio-group",5),O.ec("ngModelChange",function(t){return O.Lc(e),O.ic().selectedUserType=t})("ngModelChange",function(t){return O.Lc(e),O.ic().onSelectUserType(t)}),O.Xb(2,"label",14),O.Xc(3,"Monitoring Staff"),O.Wb(),O.Xb(4,"label",15),O.Xc(5," Enrollment Staff"),O.Wb(),O.Wb(),O.Xb(6,"div",16),O.Xb(7,"div",17),O.Vc(8,sn,2,1,"nz-tag",18),O.Wb(),O.Xb(9,"div"),O.Xb(10,"nz-form-item"),O.Xb(11,"nz-form-control",19),O.jc(12,"translate"),O.Xb(13,"nz-select",20),O.ec("ngModelChange",function(t){return O.Lc(e),O.ic().selectedUser=t})("ngModelChange",function(){return O.Lc(e),O.ic().selectUser()}),O.Vc(14,un,1,2,"nz-option",21),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Sb(15,"br"),O.Vc(16,pn,3,3,"ng-container",22),O.Vc(17,dn,4,4,"ng-template",null,23,O.Wc),O.Wb()}if(2&t){var a=O.Ic(18),i=O.ic();O.rc("nzTitle",a),O.Db(1),O.rc("ngModel",i.selectedUserType),O.Db(5),O.rc("hidden",!i.selectedUserType),O.Db(2),O.rc("ngForOf",i.selectedUsers),O.Db(3),O.sc("nzErrorTip",O.kc(12,8,"COMMON.REQUIRED")),O.Db(2),O.rc("ngModel",i.selectedUser),O.Db(1),O.rc("ngForOf",i.filteredUsers),O.Db(2),O.rc("ngIf",!i.loadingUsers&&(null==i.filteredUsers?null:i.filteredUsers.length))}}function fn(t,n){if(1&t&&(O.Xb(0,"label",27),O.Xc(1),O.Wb()),2&t){var e=n.$implicit;O.rc("nzValue",e),O.Db(1),O.Zc(" ",e," ")}}function gn(t,n){if(1&t&&(O.Xc(0),O.jc(1,"translate"),O.Xb(2,"label",26),O.Xc(3),O.Wb()),2&t){var e=O.ic();O.Zc(" ",O.kc(1,2,"PROGRAM")," "),O.Db(3),O.Zc(" ",e.selectedProgram," ")}}function mn(t,n){if(1&t&&(O.Xb(0,"label",27),O.Xc(1),O.Wb()),2&t){var e=n.$implicit;O.sc("nzValue",e.key),O.Db(1),O.Yc(e.value)}}function hn(t,n){if(1&t&&(O.Xc(0),O.jc(1,"translate"),O.Xb(2,"label",26),O.Xc(3),O.Wb()),2&t){var e=O.ic();O.Zc(" ",O.kc(1,2,"ENCOUNTER_TYPE")," "),O.Db(3),O.Zc(" ",e.encounterNameMap.get(e.selectedEncounterType)," ")}}function vn(t,n){if(1&t&&(O.Xb(0,"label",27),O.Xc(1),O.Wb()),2&t){var e=n.$implicit;O.sc("nzValue",e.key),O.Db(1),O.Yc(e.value)}}function zn(t,n){if(1&t&&(O.Xc(0),O.jc(1,"translate"),O.Xb(2,"label",26),O.Xc(3),O.Wb()),2&t){var e=O.ic();O.Zc(" ",O.kc(1,2,"STATE_TYPE")," "),O.Db(3),O.Zc(" ",e.stateNameMap.get(e.selectedState)," ")}}var Sn,yn=((Sn=function(){function t(n,e,a){u(this,t),this._modalRef=n,this._urlService=e,this._filterCountService=a,this.selectedProgram="CCM",this.selectedUsers=new Array,this.filteredUsers=new Array,this.programs=["CCM","TOC","PCM","RPM"],this.staffIds=new Array,this.loadingUsers=!0,this.filterRequest=new Qt,this.stateNameMap=en,this.encounterNameMap=an,this.userTypeNameMap=rn,this.selectedUsers=[]}return d(t,[{key:"ngOnInit",value:function(){var t,n,e=this;this.startDate=null===(t=this.dateRange[0])||void 0===t?void 0:t.toISOString().slice(0,10),this.endDate=null===(n=this.dateRange[1])||void 0===n?void 0:n.toISOString().slice(0,10),this.programTypes=this.programTypes.filter(function(t){return e.programs.includes(t)}),this.setCurrentState()}},{key:"applyFilter",value:function(){var t,n;this.selectedUsers&&(this.staffIds=this.selectedUsers.map(function(t){return t.id}));var e="BILLABLE_ENCOUNTER"==this.selectedEncounterType,a="ENROLLMENT"==this.selectedEncounterType,i=this.staffIds?this.staffIds.join(","):void 0;this.filterRequest=new Qt,this.filterRequest.staffIds=i,this.filterRequest.startDate=null===(t=this.dateRange[0])||void 0===t?void 0:t.toISOString().slice(0,10),this.filterRequest.endDate=null===(n=this.dateRange[1])||void 0===n?void 0:n.toISOString().slice(0,10),this.filterRequest.state="ALL"!==this.selectedState?this.selectedState:null,this.filterRequest.program=this.selectedProgram,this.filterRequest.isBillable=this.selectedEncounterType&&"ALL"!==this.selectedEncounterType?e:null,this.filterRequest.isEnrollment=this.selectedEncounterType&&"ALL"!==this.selectedEncounterType?a:null,this.filterRequest.stafftype=this.selectedUserType,this._urlService.setParameter(this.filterRequest),this.totalFiltersApplied=this._filterCountService.countFiltersApplied(),this._modalRef.close()}},{key:"clearAll",value:function(){this.startDate=null,this.endDate=null,this.selectedUserType=null,this.selectedUsers=null,this.selectedProgram=null,this.selectedEncounterType=null,this.isEnrollment=null,this.selectedState=null,this.staffIds=null}},{key:"selectUser",value:function(){this.selectedUsers.includes(this.selectedUser)||this.selectedUsers.push(this.selectedUser)}},{key:"onSelectUserType",value:function(t){this.selectedUsers=[],this.filteredUsers="MONITORING_STAFF"===t?this.monitoringStaff:this.enrollmentStaff}},{key:"setCurrentState",value:function(){var t,n=this;this.selectedUserType=this._urlService.getParameterValue("stafftype"),this.selectedProgram=this._urlService.getParameterValue("program"),this.selectedEncounterType=this._urlService.getParameterValue("isBillable"),this.isEnrollment="true"===this._urlService.getParameterValue("isEnrollment"),this.selectedState=this._urlService.getParameterValue("state"),this.startDate=this._urlService.getParameterValue("startDate"),this.endDate=this._urlService.getParameterValue("endDate"),this.staffIds=null===(t=this._urlService.getParameterValue("staffIds"))||void 0===t?void 0:t.split(","),this.filteredUsers="MONITORING_STAFF"===this.selectedUserType?this.monitoringStaff:this.enrollmentStaff,this.selectedUsers=this.staffIds?this.filteredUsers.filter(function(t){var e;return null===(e=n.staffIds)||void 0===e?void 0:e.includes(t.id)}):[],this.selectedEncounterType=null!=this.selectedEncounterType?"true"===this.selectedEncounterType?"BILLABLE_ENCOUNTER":this.isEnrollment?"ENROLLMENT":"NON_BILLABLE_ENCOUNTER":"ALL"}},{key:"onClose",value:function(t){this.selectedUsers=this.selectedUsers.filter(function(n){return n.id!=t.id})}}]),t}()).\u0275fac=function(t){return new(t||Sn)(O.Rb(R.e),O.Rb(tn),O.Rb(nn))},Sn.\u0275cmp=O.Lb({type:Sn,selectors:[["app-compliance-filter"]],inputs:{dateRange:"dateRange",episodeBlueprintId:"episodeBlueprintId",programTypes:"programTypes",monitoringStaff:"monitoringStaff",enrollmentStaff:"enrollmentStaff"},decls:31,vars:22,consts:[["nz-row","","nzGutter","8"],["nz-col","","nzSpan","24"],["nzTabBarGutter","10px",3,"nzSelectedIndex","nzTabPosition","nzSelectedIndexChange"],[3,"nzTitle",4,"ngIf"],[3,"nzTitle"],[3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue",4,"ngFor","ngForOf"],["programTitle",""],["encounterTypeTitle",""],["stateTitle",""],["nz-row","","nzGutter","8",2,"flex-direction","row-reverse","margin-top","10px"],["nz-col","","nzSpan","4"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","link",3,"click"],["nz-radio","","nzValue","MONITORING_STAFF"],["nz-radio","","nzValue","ENROLMENT_STAFF"],[1,"form-group",3,"hidden"],[1,"selectedusers-tag-div"],["class","selected-tag","nzMode","closeable",3,"nzOnClose",4,"ngFor","ngForOf"],[3,"nzErrorTip"],["nzPlaceHolder","Select a staff","nzShowSearch","",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[4,"ngIf"],["complianceUserTitle",""],["nzMode","closeable",1,"selected-tag",3,"nzOnClose"],[3,"nzValue","nzLabel"],[1,"filterTitle"],["nz-radio","",3,"nzValue"]],template:function(t,n){if(1&t&&(O.Vb(0),O.Xb(1,"div",0),O.Xb(2,"div",1),O.Xb(3,"nz-tabset",2),O.ec("nzSelectedIndexChange",function(t){return n.selectedTabIndex=t}),O.Vc(4,bn,19,10,"nz-tab",3),O.Xb(5,"nz-tab",4),O.Xb(6,"nz-radio-group",5),O.ec("ngModelChange",function(t){return n.selectedProgram=t}),O.Vc(7,fn,2,2,"label",6),O.Wb(),O.Vc(8,gn,4,4,"ng-template",null,7,O.Wc),O.Wb(),O.Xb(10,"nz-tab",4),O.Xb(11,"nz-radio-group",5),O.ec("ngModelChange",function(t){return n.selectedEncounterType=t}),O.Vc(12,mn,2,2,"label",6),O.jc(13,"keyvalue"),O.Wb(),O.Vc(14,hn,4,4,"ng-template",null,8,O.Wc),O.Wb(),O.Xb(16,"nz-tab",4),O.Xb(17,"nz-radio-group",5),O.ec("ngModelChange",function(t){return n.selectedState=t}),O.Vc(18,vn,2,2,"label",6),O.jc(19,"keyvalue"),O.Wb(),O.Vc(20,zn,4,4,"ng-template",null,9,O.Wc),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Xb(22,"div",10),O.Xb(23,"div",11),O.Xb(24,"button",12),O.ec("click",function(){return n.applyFilter()}),O.Xc(25),O.jc(26,"translate"),O.Wb(),O.Wb(),O.Xb(27,"div",11),O.Xb(28,"button",13),O.ec("click",function(){return n.clearAll()}),O.Xc(29),O.jc(30,"translate"),O.Wb(),O.Wb(),O.Wb(),O.Ub()),2&t){var e=O.Ic(9),a=O.Ic(15),i=O.Ic(21);O.Db(3),O.rc("nzSelectedIndex",n.selectedTabIndex)("nzTabPosition","left"),O.Db(1),O.rc("ngIf",0!=n.monitoringStaff.length||0!=n.enrollmentStaff.length),O.Db(1),O.rc("nzTitle",e),O.Db(1),O.rc("ngModel",n.selectedProgram),O.Db(1),O.rc("ngForOf",n.programTypes),O.Db(3),O.rc("nzTitle",a),O.Db(1),O.rc("ngModel",n.selectedEncounterType),O.Db(1),O.rc("ngForOf",O.kc(13,14,n.encounterNameMap)),O.Db(4),O.rc("nzTitle",i),O.Db(1),O.rc("ngModel",n.selectedState),O.Db(1),O.rc("ngForOf",O.kc(19,16,n.stateNameMap)),O.Db(7),O.Zc(" ",O.kc(26,18,"FILTERS.APPLY")," "),O.Db(4),O.Zc(" ",O.kc(30,20,"FILTERS.CLEAR_ALL")," ")}},directives:[V.c,V.a,ln.d,p.q,ln.a,k.c,f.u,f.x,p.p,L.a,x.a,F.a,k.b,cn.c,cn.a,Zt.d,zt.a,Zt.a],pipes:[p.j,G.a],styles:["[_nghost-%COMP%]     .ant-tabs-tab{width:200px;text-align:left!important;height:50px}[_nghost-%COMP%]     .ant-tabs{height:300px}[_nghost-%COMP%]     .ant-tabs-tab{color:var(--neutral-color)}[_nghost-%COMP%]     .ant-tabs-nav{background:#f6f6f6 0 0 no-repeat padding-box;border-radius:10px;width:262px;padding:35px 0 0 20px;font:normal normal 700 14px/19px Nunito;height:300px}[_nghost-%COMP%]     .ant-tabs-content-holder:first{height:350px;overflow-y:scroll;padding-left:10px}[_nghost-%COMP%]     .ant-tabs-content-holder{overflow:auto}[_nghost-%COMP%]     .ant-tabs-tab{height:auto;white-space:normal}[_nghost-%COMP%]     .ant-tabs-left>.ant-tabs-nav .ant-tabs-tab:last-of-type{padding:0}[_nghost-%COMP%]     .ant-tabs-tab-btn{text-align:left;color:var(--light-black)!important}[_nghost-%COMP%]     .ant-tabs-tab-active{border-bottom:none!important;border-left:2px solid var(--primary-color)!important}[_nghost-%COMP%]     .ant-tabs-ink-bar{height:0!important}.filterTitle[_ngcontent-%COMP%]{color:var(--light-black);font-weight:600;font-size:11px;display:block;margin:0;line-height:12px}[_nghost-%COMP%]     span.ant-radio+*{font-weight:400}[nz-radio][_ngcontent-%COMP%]{display:block;height:32px;line-height:32px}.loader-container[_ngcontent-%COMP%]{text-align:center;position:relative;top:145px}.font-weight-bold[_ngcontent-%COMP%]{font-weight:900}.list-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:0;margin-bottom:0}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{position:relative;display:block;padding:.75rem 1.25rem;background-color:#fff;border:1px solid rgba(0,0,0,.125)}.selectedusers-tag-div[_ngcontent-%COMP%]{margin-top:10px;height:auto;padding:5px;margin-bottom:10px}.selected-tag[_ngcontent-%COMP%]{margin-bottom:5px}"]}),Sn),Cn=l("1G5W"),In=l("eIep"),Xn=l("nLCl"),Dn=l("gXqy"),On=l("jKzE"),Pn=l("mrSG"),Tn=l("/KA4"),Mn=l("ZKr6"),En=l("Wfee");function Wn(t,n){if(1&t&&O.Sb(0,"nz-alert",11),2&t){O.ic();var e=O.Ic(2);O.rc("nzMessage",e)}}function _n(t,n){if(1&t&&(O.Xc(0," Pending Peer Review by "),O.Xb(1,"strong"),O.Xc(2),O.Wb(),O.Xc(3," assigned by "),O.Xb(4,"strong"),O.Xc(5),O.Wb()),2&t){var e=O.ic();O.Db(2),O.Yc(null==e.data?null:e.data.reviewStaff),O.Db(3),O.Yc(null==e.data?null:e.data.reviewOwnerStaff)}}function Rn(t,n){if(1&t){var e=O.Yb();O.Xb(0,"div",16),O.Xb(1,"button",17),O.ec("click",function(){return O.Lc(e),O.ic(3).approve()}),O.Xc(2," Approve "),O.Wb(),O.Wb()}}function An(t,n){if(1&t){var e=O.Yb();O.Xb(0,"div",16),O.Xb(1,"button",18),O.ec("click",function(){return O.Lc(e),O.ic(3).peerReview()}),O.Xc(2," Peer Review "),O.Wb(),O.Wb()}}function Nn(t,n){if(1&t){var e=O.Yb();O.Xb(0,"div",16),O.Xb(1,"button",19),O.ec("click",function(){return O.Lc(e),O.ic(3).reject()}),O.Xc(2," Reject "),O.Wb(),O.Wb()}}function wn(t,n){if(1&t&&(O.Xb(0,"div",13),O.Xb(1,"div",14),O.Vc(2,Rn,3,0,"div",15),O.Vc(3,An,3,0,"div",15),O.Vc(4,Nn,3,0,"div",15),O.Wb(),O.Wb()),2&t){var e=O.ic(2);O.Db(2),O.rc("ngIf",e.canPerformAction&&"APPROVED"!==(null==e.data||null==e.data.compliance?null:e.data.compliance.state)&&"AUTO_APPROVED"!==(null==e.data||null==e.data.compliance?null:e.data.compliance.state)),O.Db(1),O.rc("ngIf",e.canPerformAction&&"PEER_REVIEW"!==(null==e.data||null==e.data.compliance?null:e.data.compliance.state)),O.Db(1),O.rc("ngIf",e.canPerformAction&&"REJECTED"!==(null==e.data||null==e.data.compliance?null:e.data.compliance.state))}}function kn(t,n){if(1&t&&(O.Vb(0),O.Vc(1,wn,5,3,"div",12),O.Ub()),2&t){var e=O.ic();O.Db(1),O.rc("ngIf",!e.infoOnly)}}var Vn,Ln=function(){return["APPROVE_COMPLIANCE"]},xn=((Vn=function(){function t(){var n=this;u(this,t),this.allowAction=!1,this.infoOnly=!1,this.onApprove=new O.n,this.onReject=new O.n,this.onPeerReview=new O.n,this.stateNameMap=en,this.stateClassMap=new Map([["SUBMITTED","status-default"],["AUTO_APPROVED","status-auto-approved"],["APPROVED","status-approved"],["CORRECTED","status-default"],["REJECTED","status-rejected"],["PEER_REVIEW","status-default"]]),this.contextNameMap=on,this.canPerformAction=!1,this.getStateClass=function(t){return n.stateClassMap.get(t)||"status-default"}}return d(t,[{key:"ngOnInit",value:function(){var t,n,e,a="PEER_REVIEW"==(null===(t=this.data.compliance)||void 0===t?void 0:t.state),i=localStorage.getItem("loggedInUser");this.canPerformAction=this.allowAction||a&&((null===(n=this.data)||void 0===n?void 0:n.reviewStaffId)===i||(null===(e=this.data)||void 0===e?void 0:e.reviewOwnerStaffId)===i)}},{key:"approve",value:function(){this.onApprove.emit()}},{key:"reject",value:function(){this.onReject.emit()}},{key:"peerReview",value:function(){this.onPeerReview.emit()}}]),t}()).\u0275fac=function(t){return new(t||Vn)},Vn.\u0275cmp=O.Lb({type:Vn,selectors:[["app-compliance-note-information-component"]],inputs:{data:"data",allowAction:"allowAction",infoOnly:"infoOnly"},outputs:{onApprove:"onApprove",onReject:"onReject",onPeerReview:"onPeerReview"},decls:27,vars:20,consts:[["nzType","warning","nzShowIcon","",3,"nzMessage",4,"ngIf"],["alertMsg",""],["nzBordered","","id","compliance-note",1,"border-left",3,"nzColumn","ngClass"],["nzTitle","Signed By",3,"nzSpan"],["nzTitle","Date",3,"nzSpan"],["nzTitle","Duration",3,"nzSpan"],["nzTitle","State",3,"nzSpan"],["nzTitle","Note",3,"nzSpan"],["nz-typography","","nzType","secondary"],[3,"innerHTML"],[4,"isFeaturePermitted"],["nzType","warning","nzShowIcon","",3,"nzMessage"],["class","action-buttons",4,"ngIf"],[1,"action-buttons"],["nz-row","","nzGutter","16"],["nz-col","",4,"ngIf"],["nz-col",""],["nz-button","","nzSize","small","nzType","primary",3,"click"],["nz-button","","nzSize","small","nzType","primary",1,"button-orange",3,"click"],["nz-button","","nzSize","small","nzType","primary",1,"button-red",3,"click"]],template:function(t,n){1&t&&(O.Vc(0,Wn,1,1,"nz-alert",0),O.Vc(1,_n,6,2,"ng-template",null,1,O.Wc),O.Sb(3,"br"),O.Xb(4,"nz-descriptions",2),O.Xb(5,"nz-descriptions-item",3),O.Xc(6),O.Wb(),O.Xb(7,"nz-descriptions-item",4),O.Xc(8),O.jc(9,"date"),O.Wb(),O.Xb(10,"nz-descriptions-item",5),O.Xc(11),O.Wb(),O.Xb(12,"nz-descriptions-item",6),O.Xc(13),O.Wb(),O.Xb(14,"nz-descriptions-item",7),O.Xb(15,"strong",8),O.Xc(16,"Context"),O.Wb(),O.Xb(17,"p"),O.Xc(18),O.Wb(),O.Xb(19,"strong",8),O.Xc(20,"Activity"),O.Wb(),O.Xb(21,"p"),O.Xc(22),O.Wb(),O.Xb(23,"strong",8),O.Xc(24,"Note"),O.Wb(),O.Sb(25,"p",9),O.Vc(26,kn,2,1,"ng-container",10),O.Wb(),O.Wb()),2&t&&(O.rc("ngIf","PEER_REVIEW"==(null==n.data.compliance?null:n.data.compliance.state)&&(null==n.data?null:n.data.reviewStaffId)),O.Db(4),O.rc("nzColumn",4)("ngClass",n.getStateClass(null==n.data.compliance?null:n.data.compliance.state)),O.Db(1),O.rc("nzSpan",1),O.Db(1),O.Yc(n.data.staff),O.Db(1),O.rc("nzSpan",1),O.Db(1),O.Yc(O.lc(9,16,n.data.startTime,"dd MMM, yyyy")),O.Db(2),O.rc("nzSpan",1),O.Db(1),O.Zc("",n.data.durationInMinutes," mins"),O.Db(1),O.rc("nzSpan",1),O.Db(1),O.Yc(n.stateNameMap.get(null==n.data.compliance?null:n.data.compliance.state)),O.Db(1),O.rc("nzSpan",4),O.Db(4),O.Yc(n.contextNameMap.get(n.data.context)),O.Db(4),O.Yc(null==n.data?null:n.data.activity),O.Db(3),O.rc("innerHTML",null==n.data?null:n.data.notes,O.Mc),O.Db(1),O.rc("isFeaturePermitted",O.xc(19,Ln)))},directives:[p.q,$.a,p.o,$.b,U.a,Mn.a,En.a,V.c,V.a,L.a,x.a,F.a],pipes:[p.e],styles:[".status-default[_ngcontent-%COMP%]{border-left:6px solid var(--warning-color)}.status-approved[_ngcontent-%COMP%]{border-left:6px solid var(--primary-color)!important}.status-auto-approved[_ngcontent-%COMP%]{border-left:6px solid var(--medium-grey)!important}.status-rejected[_ngcontent-%COMP%]{border-left:6px solid var(--error-color)!important}.button-orange[_ngcontent-%COMP%], .button-orange[_ngcontent-%COMP%]:active{background:var(--warning-color)!important;border-color:var(--warning-color)!important}.button-orange[_ngcontent-%COMP%]:hover{background-color:var(--warning-color)!important;border-color:var(--warning-color)!important;filter:brightness(.8)}.button-red[_ngcontent-%COMP%]{background:var(--error-color)!important;border-color:var(--error-color)!important}.button-red[_ngcontent-%COMP%]:active{background:var(--warning-color)!important;border-color:var(--warning-color)!important}.button-red[_ngcontent-%COMP%]:hover{background-color:var(--error-color)!important;border-color:var(--error-color)!important;filter:brightness(.8)}"]}),Object(Pn.b)([Object(Tn.a)(),Object(Pn.c)("design:type",Boolean)],Vn.prototype,"infoOnly",void 0),Vn);function Fn(t,n){if(1&t&&(O.Vb(0),O.Xb(1,"div",6),O.Sb(2,"app-compliance-note-information-component",7),O.Wb(),O.Ub()),2&t){var e=n.$implicit;O.Db(2),O.rc("data",e)}}function Un(t,n){1&t&&(O.Xb(0,"span"),O.Xc(1),O.jc(2,"translate"),O.Wb()),2&t&&(O.Db(1),O.Zc(" ",O.kc(2,1,"COMMON.NODATA")," "))}function jn(t,n){if(1&t&&(O.Vb(0),O.Xb(1,"div",6),O.Xb(2,"nz-empty",8),O.Vc(3,Un,3,3,"ng-template",null,9,O.Wc),O.Wb(),O.Wb(),O.Ub()),2&t){var e=O.Ic(4);O.Db(2),O.rc("nzNotFoundImage","https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original")("nzNotFoundContent",e)}}var Bn,qn=((Bn=function(){function t(n){u(this,t),this.modalRef=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"destroyModal",value:function(){this.modalRef.destroy()}}]),t}()).\u0275fac=function(t){return new(t||Bn)(O.Rb(R.e))},Bn.\u0275cmp=O.Lb({type:Bn,selectors:[["app-chart-compliance-history-dialog"]],inputs:{history:"history"},decls:8,vars:2,consts:[[1,"container","history-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nz-row","","nzJustify","end"],["nz-col",""],["nz-button","","nzType","primary",3,"click"],[2,"padding","6px"],["infoOnly","",3,"data"],[2,"flex","1","overflow","auto",3,"nzNotFoundImage","nzNotFoundContent"],["contentTpl",""]],template:function(t,n){1&t&&(O.Xb(0,"div",0),O.Vc(1,Fn,3,1,"ng-container",1),O.Vc(2,jn,5,2,"ng-container",2),O.Wb(),O.Sb(3,"br"),O.Xb(4,"div",3),O.Xb(5,"div",4),O.Xb(6,"button",5),O.ec("click",function(){return n.destroyModal()}),O.Xc(7,"Ok"),O.Wb(),O.Wb(),O.Wb()),2&t&&(O.Db(1),O.rc("ngForOf",n.history),O.Db(1),O.rc("ngIf",null==n.history||0==n.history.length))},directives:[p.p,p.q,V.c,V.a,L.a,x.a,F.a,xn,vt.b],pipes:[G.a],styles:[".history-container[_ngcontent-%COMP%]{max-height:75vh;overflow:scroll}"]}),Bn),Yn=l("zgU5"),Zn=l("jPNr"),$n=l("0lU3"),Hn=l("glKu"),Gn=l("SKKP");function Jn(t,n){if(1&t&&(O.Xb(0,"nz-tag"),O.Xc(1),O.Wb()),2&t){var e=O.ic();O.Db(1),O.Zc(" Program: ",e.params.program," ")}}function Kn(t,n){if(1&t){var e=O.Yb();O.Xb(0,"nz-tag",2),O.ec("nzOnClose",function(){return O.Lc(e),O.ic().clearStateFilter()}),O.Xc(1),O.Wb()}if(2&t){var a=O.ic();O.Db(1),O.Zc(" State: ",a.stateNameMap.get(a.params.state)," ")}}function Qn(t,n){if(1&t){var e=O.Yb();O.Xb(0,"nz-tag",2),O.ec("nzOnClose",function(){return O.Lc(e),O.ic().clearEncounterFilter()}),O.Xc(1),O.Wb()}if(2&t){var a=O.ic();O.Db(1),O.Zc(" Encounter Type: ","true"==a.params.isEnrollment?"Enrollment":"true"==a.params.isBillable?"Billable":"Non-Billable"," ")}}function te(t,n){if(1&t){var e=O.Yb();O.Xb(0,"nz-tag",2),O.ec("nzOnClose",function(){return O.Lc(e),O.ic().clearStaffIdFilter()}),O.Xc(1),O.Wb()}if(2&t){var a=O.ic();O.Db(1),O.Zc(" ",null==a.staffIdArray?null:a.staffIdArray.length," staffs selected ")}}var ne,ee=((ne=function(){function t(n,e,a){var i=this;u(this,t),this._urlService=n,this._activatedRoute=e,this._dataSharingService=a,this.blueprintNamesMap=new Map,this.stateNameMap=en,this.params={state:this._urlService.getParameterValue("state"),program:this._urlService.getParameterValue("program"),isBillable:this._urlService.getParameterValue("isBillable"),isEnrollment:this._urlService.getParameterValue("isEnrollment"),staffIds:this._urlService.getParameterValue("staffIds")},this._activatedRoute.queryParams.subscribe(function(t){var n;i.params.state=i._urlService.getParameterValue("state"),i.params.program=i._urlService.getParameterValue("program"),i.params.isBillable=i._urlService.getParameterValue("isBillable"),i.params.isEnrollment=i._urlService.getParameterValue("isEnrollment"),i.params.staffIds=i._urlService.getParameterValue("staffIds"),i.staffIdArray=null===(n=i.params.staffIds)||void 0===n?void 0:n.split(","),i.updateSelectedUsers()})}return d(t,[{key:"ngOnInit",value:function(){var t;this.getEpisodeBlueprints(),this.staffIdArray=null===(t=this.params.staffIds)||void 0===t?void 0:t.split(","),this.updateSelectedUsers()}},{key:"updateSelectedUsers",value:function(){var t,n=this;this.selectedUsers=null===(t=this.allStaff)||void 0===t?void 0:t.filter(function(t){var e;return null===(e=n.staffIdArray)||void 0===e?void 0:e.includes(t.id)})}},{key:"ngOnDestroy",value:function(){this.$tenantSettinsObserver.unsubscribe()}},{key:"getEpisodeBlueprints",value:function(){var t=this;this.$tenantSettinsObserver=this._dataSharingService.tenantSettings.subscribe(function(n){var e;n&&(null===(e=null==n?void 0:n.episodeBlueprints)||void 0===e||e.forEach(function(n){t.blueprintNamesMap.set(null==n?void 0:n.type,null==n?void 0:n.name)}))})}},{key:"clearAll",value:function(){this.params={state:null,program:null,isBillable:null,isEnrollment:null,staffIds:null}}},{key:"clearProgramFilter",value:function(){this._urlService.setParameter({program:null})}},{key:"clearEncounterFilter",value:function(){this._urlService.setParameter({isBillable:null,isEnrollment:null})}},{key:"clearStateFilter",value:function(){this._urlService.setParameter({state:null})}},{key:"clearStaffIdFilter",value:function(){this._urlService.setParameter({staffIds:null,stafftype:null})}}]),t}()).\u0275fac=function(t){return new(t||ne)(O.Rb(tn),O.Rb(g.a),O.Rb(M.a))},ne.\u0275cmp=O.Lb({type:ne,selectors:[["app-compliance-filter-tag"]],inputs:{allStaff:"allStaff"},decls:5,vars:4,consts:[[4,"ngIf"],["nzMode","closeable",3,"nzOnClose",4,"ngIf"],["nzMode","closeable",3,"nzOnClose"]],template:function(t,n){1&t&&(O.Xb(0,"div"),O.Vc(1,Jn,2,1,"nz-tag",0),O.Vc(2,Kn,2,1,"nz-tag",1),O.Vc(3,Qn,2,1,"nz-tag",1),O.Vc(4,te,2,1,"nz-tag",1),O.Wb()),2&t&&(O.Db(1),O.rc("ngIf",n.params.program),O.Db(1),O.rc("ngIf",n.params.state),O.Db(1),O.rc("ngIf",n.params.isBillable),O.Db(1),O.rc("ngIf",n.params.staffIds))},directives:[p.q,zt.a],styles:["nz-tag[_ngcontent-%COMP%]{margin-top:8px;background-color:var(--primary-color);color:var(--neutral-color)}[_nghost-%COMP%]     .ant-tag-close-icon{color:var(--neutral-color)}"]}),ne);function ae(t,n){if(1&t){var e=O.Yb();O.Xb(0,"button",26),O.ec("click",function(){return O.Lc(e),O.ic().updateStateInBulk("REJECTED")}),O.Xc(1," Reject All "),O.Wb()}}function ie(t,n){if(1&t){var e=O.Yb();O.Xb(0,"button",27),O.ec("click",function(){return O.Lc(e),O.ic().updateStateInBulk("AUTO_APPROVED")}),O.Xc(1," Approve All "),O.Wb()}}function re(t,n){if(1&t&&(O.Xb(0,"strong"),O.Xc(1),O.Wb()),2&t){var e=O.ic();O.Db(1),O.Zc(" ",(null==e.tenantConfig||null==e.tenantConfig.complianceConfig?null:e.tenantConfig.complianceConfig.communicationCompliance.CCM)||"0%"," ")}}function oe(t,n){1&t&&(O.Xb(0,"strong"),O.Xc(1," 0% "),O.Wb())}function le(t,n){if(1&t&&(O.Xb(0,"strong"),O.Xc(1),O.Wb()),2&t){var e=O.ic();O.Db(1),O.Zc(" ",(null==e.tenantConfig||null==e.tenantConfig.complianceConfig?null:e.tenantConfig.complianceConfig.communicationCompliance.ENROLLMENT)||"1000%"," ")}}function ce(t,n){1&t&&(O.Xb(0,"strong"),O.Xc(1," 100% "),O.Wb())}function se(t,n){if(1&t&&(O.Xb(0,"th",28),O.Xc(1),O.Wb()),2&t){var e=n.$implicit;O.rc("nzSortOrder",e.sortOrder)("nzSortFn",e.sortFn)("nzSortDirections",e.sortDirections),O.Db(1),O.Yc(e.name)}}function ue(t,n){if(1&t){var e=O.Yb();O.Vb(0),O.Xb(1,"tr"),O.Xb(2,"td",29),O.ec("nzExpandChange",function(t){O.Lc(e);var a=n.$implicit;return O.ic().onExpandChange(null==a?null:a.id,null==a?null:a.patientId,t)}),O.Wb(),O.Xb(3,"td",30),O.Xc(4),O.Wb(),O.Xb(5,"td"),O.Xb(6,"strong"),O.Xc(7),O.Wb(),O.Wb(),O.Xb(8,"td"),O.Xc(9),O.Wb(),O.Xb(10,"td"),O.Xc(11),O.Wb(),O.Xb(12,"td"),O.Xc(13),O.jc(14,"date"),O.Wb(),O.Xb(15,"td"),O.Xc(16),O.jc(17,"date"),O.Wb(),O.Xb(18,"td"),O.Xc(19),O.Wb(),O.Wb(),O.Xb(20,"tr",31),O.Xb(21,"div",32),O.Xb(22,"div",33),O.Xb(23,"button",34),O.ec("click",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPatientDemographics(null==t?null:t.patientId)}),O.Xc(24," Patient Demographic "),O.Wb(),O.Wb(),O.Xb(25,"div",33),O.Xb(26,"button",34),O.ec("click",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPatientAppointments(null==t?null:t.patientId)}),O.Xc(27," Patient Appointments "),O.Wb(),O.Wb(),O.Xb(28,"div",33),O.Xb(29,"button",34),O.ec("click",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPatientPlanOfCare(null==t?null:t.patientId)}),O.Xc(30," Patient Plan Of Care "),O.Wb(),O.Wb(),O.Xb(31,"div",33),O.Xb(32,"button",34),O.ec("click",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPhysicianInfo(null==t?null:t.patientId)}),O.Xc(33," Physician Information "),O.Wb(),O.Wb(),O.Xb(34,"div",33),O.Xb(35,"button",34),O.ec("click",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPatientProblemList(null==t?null:t.patientId)}),O.Xc(36," Patient Problem List "),O.Wb(),O.Wb(),O.Xb(37,"div",33),O.Xb(38,"button",34),O.ec("click",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPatientComplianceHistory(null==t?null:t.patientId)}),O.Xc(39," Patient Compliance History "),O.Wb(),O.Wb(),O.Wb(),O.Sb(40,"br"),O.Xb(41,"app-compliance-note-information-component",35),O.ec("onApprove",function(){O.Lc(e);var t=n.$implicit;return O.ic().updateState(null==t?null:t.id,"APPROVED")})("onReject",function(){O.Lc(e);var t=n.$implicit;return O.ic().reject(null==t?null:t.id)})("onPeerReview",function(){O.Lc(e);var t=n.$implicit;return O.ic().showPeerReviewAssignModal(null==t?null:t.id,null==t?null:t.patient)}),O.Wb(),O.Wb(),O.Ub()}if(2&t){var a=n.$implicit,i=O.ic();O.Db(2),O.rc("nzExpand",i.expandSet.has(null==a?null:a.id)),O.Db(2),O.Zc(" ",i.contextNameMap.get(a.context)," "),O.Db(3),O.Yc(a.patient),O.Db(2),O.Yc(a.staff),O.Db(2),O.Zc("",a.durationInMinutes," mins"),O.Db(2),O.Zc(" ",O.lc(14,17,a.startTime,"dd MMM, yyyy hh:mm a")," "),O.Db(3),O.Zc(" ",O.lc(17,20,a.endTime,"dd MMM, yyyy hh:mm a")," "),O.Db(3),O.Yc(i.stateNameMap.get(null==a.compliance?null:a.compliance.state)),O.Db(1),O.rc("nzExpand",i.expandSet.has(null==a?null:a.id)),O.Db(3),O.rc("nzLoading",!i.patientChartInfoMap.has(null==a?null:a.patientId)),O.Db(3),O.rc("nzLoading",!i.patientChartInfoMap.has(null==a?null:a.patientId)),O.Db(3),O.rc("nzLoading",!i.patientChartInfoMap.has(null==a?null:a.patientId)),O.Db(3),O.rc("nzLoading",!i.patientChartInfoMap.has(null==a?null:a.patientId)),O.Db(3),O.rc("nzLoading",!i.patientChartInfoMap.has(null==a?null:a.patientId)),O.Db(3),O.rc("nzLoading",!i.patientChartInfoMap.has(null==a?null:a.patientId)),O.Db(3),O.rc("data",a)("allowAction",i.allowAction)}}var pe,de=function(){return["REJECT_ALL_COMPLIANCE"]},be=function(){return["APPROVE_ALL_COMPLIANCE"]},fe=function(){return{left:"7px",right:"-6px !important",top:"1px !important",backgroundColor:"#ff3939",boxShadow:"-1px -1px 0 1px #ff3939",color:"white",padding:"0px"}},ge=function(){return["5%","15%","15%","15%","10%","15%","15%","10%"]},me=function(){return[50,75,100]},he=((pe=function(a){i(l,a);var r=o(l);function l(t,n,e,a,i,o,c,s,p){var d;u(this,l),(d=r.call(this))._modalService=t,d._complianceService=n,d._dataSharingService=e,d._notificationsService=a,d._urlService=i,d._filterCountService=o,d._staffService=c,d._permissionsService=s,d._subTenantToggleHelper=p,d.loading=!0,d.pinStaff=[],d.pageSize=50,d.patientChartInfoMap=new Map,d.dateRange=[],d.patienCommunicationNotestRequests$=new P.a,d.params={},d.selectedProgram="CCM",d.staffObject={},d.filterRequest=new Qt,d.monitoringStaff=[],d.enrollmentStaff=[],d.allStaff=[],d.loadingStaff=!0,d.allowAction=!1,d.listOfColumns=[{name:"Patient",sortOrder:"descend",sortFn:function(t,n,e){return n.patient.localeCompare(t.patient)||d.startTimeCompare(t,n,e)},sortDirections:["ascend","descend",null]},{name:"Staff",sortOrder:null,sortFn:function(t,n,e){return n.staff.localeCompare(t.staff)||d.patientCompare(t,n,e)||d.startTimeCompare(t,n,e)},sortDirections:["ascend","descend",null]},{name:"Duration",sortOrder:null,sortFn:function(t,n,e){return n.durationInMilliSeconds-t.durationInMilliSeconds},sortDirections:["ascend","descend",null]},{name:"From",sortOrder:null,sortFn:function(t,n,e){return n.startTime-t.startTime||d.patientCompare(t,n,e)},sortDirections:["ascend","descend",null]},{name:"To",sortOrder:null,sortFn:function(t,n,e){return n.endTime-t.endTime||d.patientCompare(t,n,e)},sortDirections:["ascend","descend",null]}],d.episodeTypes=new Array,d.disabledDates=function(t){return Object(Dn.a)(Object(On.a)(new Date),t)<0},d.loggedInUserName$=d._dataSharingService.getLoggedInUserName(),d.loggedInUserId=localStorage.getItem("loggedInUser"),d.loggedInUserType=localStorage.getItem("loggedInUserAccountType"),d.expandSet=new Set,d.state="ALL",d.contextNameMap=on,d.stateNameMap=en,d.patientCommunicationsDetails={};var b=d._permissionsService.getPermissionsForUser();return d.allowAction="TENANT_ADMIN"===d.loggedInUserType||b.includes("APPROVE_COMPLIANCE"),d}return d(l,[{key:"startTimeCompare",value:function(t,n,e){return("ascend"===e?1:-1)*(n.startTime-t.startTime)}},{key:"endTimeCompare",value:function(t,n,e){return("ascend"===e?1:-1)*(n.endTime-t.endTime)}},{key:"patientCompare",value:function(t,n,e){return("ascend"===e?1:-1)*t.patient.localeCompare(n.patient)}},{key:"onExpandChange",value:function(t,n,e){e?this.expandSet.add(t):this.expandSet.delete(t),e&&this.getPatientInfo(n)}},{key:"ngOnInit",value:function(){var t=this;this.totalFiltersApplied=this._filterCountService.countFiltersApplied(),this.requestTenantId=this._subTenantToggleHelper.setRequestTenantId(),this._dataSharingService.assignedTenantSettings.pipe(Object(Cn.a)(this.unsubscribed)).subscribe(function(n){void 0!==n&&0!==n.size&&(t.tenantConfigMap=n,t.onSubTenantChange(t.requestTenantId))}),this._dataSharingService.onSubTenantChange().pipe(Object(Cn.a)(this.unsubscribed)).subscribe(function(n){t.onSubTenantChange(n)}),this.initPatientCommunicationNotesObservable(),this.getStaffs(),this.subscribeToActivatedRoute()}},{key:"onSubTenantChange",value:function(t){var n,a;if(this.loading=!0,""!=t&&null!=t&&null!=t){if(this.requestTenantId=t,void 0!==this.tenantConfigMap&&0!==this.tenantConfigMap.size){this.tenantConfig=this.tenantConfigMap.get(this.requestTenantId),this.episodeTypes=new Array;var i,r=function(t,n){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=e(t))||n&&t&&"number"==typeof t.length){a&&(t=a);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==a.return||a.return()}finally{if(c)throw o}}}}(null===(n=this.tenantConfig)||void 0===n?void 0:n.episodeBlueprints);try{for(r.s();!(i=r.n()).done;){var o=i.value;this.episodeTypes.push(o.type)}}catch(s){r.e(s)}finally{r.f()}if(!this.episodeTypes.includes(this._urlService.getParameterValue("program"))){var l=["CCM","TOC","PCM","RPM"],c=this.episodeTypes.filter(function(t){return l.includes(t)});this.filterRequest.endDate=this._urlService.getParameterValue("endDate"),this.filterRequest.startDate=this._urlService.getParameterValue("startDate"),this.filterRequest.isBillable=this._urlService.getParameterValue("isBillable"),this.filterRequest.isEnrollment=this._urlService.getParameterValue("isEnrollment"),this.filterRequest.state=this._urlService.getParameterValue("state"),this.filterRequest.program=c[0],this._urlService.setParameter(this.filterRequest)}this.tenantName=null===(a=this.tenantConfig)||void 0===a?void 0:a.tenantName,this.fetchPatientCommunicationNotes(),this.loading=!1}}else this.loading=!1}},{key:"addSelectedStaffs",value:function(t){this.staffList=t}},{key:"getEpisodeBlueprintId",value:function(){var t,n,e,a,i,r,o,l,c=this._urlService.getParameterValue("program");return"TOC"==c?null===(n=null===(t=this.tenantConfig)||void 0===t?void 0:t.tocepisodeBlueprint)||void 0===n?void 0:n.id:"PCM"==c?null===(a=null===(e=this.tenantConfig)||void 0===e?void 0:e.pcmepisodeBlueprint)||void 0===a?void 0:a.id:"RPM"==c?null===(r=null===(i=this.tenantConfig)||void 0===i?void 0:i.rpmepisodeBlueprint)||void 0===r?void 0:r.id:null===(l=null===(o=this.tenantConfig)||void 0===o?void 0:o.ccmepisodeBlueprint)||void 0===l?void 0:l.id}},{key:"fetchPatientCommunicationNotes",value:function(){var t=this.getEpisodeBlueprintId();t&&(this.loading=!0,this.patienCommunicationNotestRequests$.next(t),this.getPatientCommunicationNotesDetails(t))}},{key:"initPatientCommunicationNotesObservable",value:function(){var t=this;this.patienCommunicationNotestRequests$.pipe(Object(In.a)(function(n){return t._complianceService.fetchPatientCommunicationNotes(n,50,{state:t._urlService.getParameterValue("state"),startDate:t._urlService.getParameterValue("startDate"),endDate:t._urlService.getParameterValue("endDate"),program:t._urlService.getParameterValue("program"),isBillable:t._urlService.getParameterValue("isBillable"),staffIds:t._urlService.getParameterValue("staffIds"),staffType:t._urlService.getParameterValue("staffType")},t.requestTenantId)})).pipe(Object(Cn.a)(this.unsubscribed)).subscribe(function(n){t.patientCommunications=n,t.loading=!1},function(n){t.loading=!1})}},{key:"subscribeToActivatedRoute",value:function(){var t=this;this.activatedRoute.queryParams.pipe(Object(Cn.a)(this.unsubscribed)).subscribe(function(n){var e,a;t.episodeBlueprintId=t.getEpisodeBlueprintId(),t.pageSize=50;var i=t._urlService.getParameterValue("startDate"),r=t._urlService.getParameterValue("endDate");i&&r&&(t.dateRange=[new Date(i),new Date(r)]),t.params={state:t._urlService.getParameterValue("state"),startDate:null===(e=t.dateRange[0])||void 0===e?void 0:e.toISOString().slice(0,10),endDate:null===(a=t.dateRange[1])||void 0===a?void 0:a.toISOString().slice(0,10),program:t._urlService.getParameterValue("program"),isBillable:t._urlService.getParameterValue("isBillable"),staffIds:t._urlService.getParameterValue("staffIds")},t.totalFiltersApplied=t._filterCountService.countFiltersApplied(),t.fetchPatientCommunicationNotes()})}},{key:"getStaffs",value:function(){var e=this;this._staffService.fetchPINStaffMembers().subscribe(function(t){null!=t&&(e.pinStaff=t.filter(function(t){return t.id!==e.loggedInUserId}))}),this.loadingStaff=!0;var a=this._staffService.fetchStaffList(Xn.a.MONITORING_STAFF,null,null,null),i=this._staffService.fetchStaffList(Xn.a.ENROLMENT_STAFF,null,null,null);Object(T.a)([a,i]).subscribe(function(a){var i;e.monitoringStaff=null==a[0]?new Array:a[0],e.enrollmentStaff=null==a[1]?new Array:a[1],e.allStaff=t(Array,n(e.monitoringStaff)),(i=e.allStaff).push.apply(i,n(e.enrollmentStaff)),e.loadingStaff=!1})}},{key:"dateUpdated",value:function(){var t,n;this._urlService.setParameter({startDate:null===(t=this.dateRange[0])||void 0===t?void 0:t.toISOString().slice(0,10),endDate:null===(n=this.dateRange[1])||void 0===n?void 0:n.toISOString().slice(0,10)})}},{key:"getPatientCommunicationNotesDetails",value:function(t){var n,e,a=this,i={startDate:null===(n=this.dateRange[0])||void 0===n?void 0:n.toISOString().slice(0,10),endDate:null===(e=this.dateRange[1])||void 0===e?void 0:e.toISOString().slice(0,10)};this._complianceService.fetchPatientCommunicationNotesDetails(t,i).subscribe(function(t){a.patientCommunicationsDetails=t})}},{key:"updateState",value:function(t,n){var e=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._complianceService.updateNoteState({id:t,state:n,reviewStaffId:a,reviewOwnerStaffId:this.loggedInUserId,reason:"PEER_REVIEW"===n?"The notes have been processed for peer review!":"The notes have been rejected!"}).subscribe(function(){e._notificationsService.success("Compliance","Note updated successfully!"),e.fetchPatientCommunicationNotes()})}},{key:"reject",value:function(t){var n=this;this._modalService.create({nzContent:Z,nzComponentParams:{id:t},nzCloseIcon:null,nzFooter:null}).afterClose.subscribe(function(t){t&&n.fetchPatientCommunicationNotes()})}},{key:"updateStateInBulk",value:function(t){var n,e,a=this,i=JSON.parse(JSON.stringify(this.state));i&&"ALL"!==i||(i="SUBMITTED"),this._complianceService.updateNoteStateInBulk(null===(e=null===(n=this.tenantConfig)||void 0===n?void 0:n.ccmepisodeBlueprint)||void 0===e?void 0:e.id,{state:i,changedToState:t,reason:"AUTO_APPROVED"===t?"The notes have been auto approved!":"The notes have been rejected!"}).subscribe(function(t){a._notificationsService.success("Compliance",t.message),a.fetchPatientCommunicationNotes()})}},{key:"getPatientInfo",value:function(t){var n,e,a=this;if(!this.patientChartInfoMap.has(t)){var i={startDate:null===(n=this.dateRange[0])||void 0===n?void 0:n.toISOString().slice(0,10),endDate:null===(e=this.dateRange[1])||void 0===e?void 0:e.toISOString().slice(0,10),blueprintId:this.episodeBlueprintId};this._complianceService.fetchPatientDetails(t,i).subscribe(function(n){a.patientChartInfoMap.set(t,n)})}}},{key:"showPatientDemographics",value:function(t){var n,e;if(this.patientChartInfoMap.has(t)){var a=null===(n=this.patientChartInfoMap.get(t))||void 0===n?void 0:n.patient;this._modalService.create({nzContent:ft,nzTitle:"Patient Demographics"+this.getPatientName(null===(e=this.patientChartInfoMap.get(t))||void 0===e?void 0:e.patient),nzComponentParams:{patientInfo:a},nzWidth:"800px",nzFooter:null})}}},{key:"showPatientAppointments",value:function(t){var n,e;if(this.patientChartInfoMap.has(t)){var a=null===(n=this.patientChartInfoMap.get(t))||void 0===n?void 0:n.appointments;this._modalService.create({nzContent:Pt,nzTitle:"Appointments"+this.getPatientName(null===(e=this.patientChartInfoMap.get(t))||void 0===e?void 0:e.patient),nzComponentParams:{appointments:a},nzWidth:"800px",nzFooter:null})}}},{key:"showPatientPlanOfCare",value:function(t){var n,e;if(this.patientChartInfoMap.has(t)){var a=null===(n=this.patientChartInfoMap.get(t))||void 0===n?void 0:n.planOfCares;this._modalService.create({nzContent:_t,nzTitle:"Plan Of Care"+this.getPatientName(null===(e=this.patientChartInfoMap.get(t))||void 0===e?void 0:e.patient),nzComponentParams:{planOfCares:a},nzWidth:"75%",nzStyle:{minWidth:"1000px"},nzFooter:null})}}},{key:"showPhysicianInfo",value:function(t){var n,e;if(this.patientChartInfoMap.has(t)){var a=null===(n=this.patientChartInfoMap.get(t))||void 0===n?void 0:n.primaryPhysicians;this._modalService.create({nzContent:xt,nzTitle:"Physicians"+this.getPatientName(null===(e=this.patientChartInfoMap.get(t))||void 0===e?void 0:e.patient),nzComponentParams:{physicians:a},nzWidth:"800px",nzFooter:null})}}},{key:"showPatientProblemList",value:function(t){var n,e;if(this.patientChartInfoMap.has(t)){var a=null===(n=this.patientChartInfoMap.get(t))||void 0===n?void 0:n.patient;this._modalService.create({nzContent:qt,nzTitle:"Patient Problem List"+this.getPatientName(null===(e=this.patientChartInfoMap.get(t))||void 0===e?void 0:e.patient),nzComponentParams:{patientInfo:a},nzWidth:"800px",nzFooter:null})}}},{key:"showPatientComplianceHistory",value:function(t){var n,e;if(this.patientChartInfoMap.has(t)){var a=null===(n=this.patientChartInfoMap.get(t))||void 0===n?void 0:n.complianceHistory;this._modalService.create({nzContent:qn,nzTitle:"Patient Compliance History"+this.getPatientName(null===(e=this.patientChartInfoMap.get(t))||void 0===e?void 0:e.patient),nzComponentParams:{history:a},nzWidth:"90%",nzFooter:null})}}},{key:"showPeerReviewAssignModal",value:function(t,n){var e=this;this._modalService.create({nzContent:Kt,nzTitle:"Peer Review (".concat(n,")"),nzComponentParams:{staffs:this.pinStaff},nzWidth:"800px",nzFooter:null}).afterClose.subscribe(function(n){n&&e.updateState(t,"PEER_REVIEW",n)})}},{key:"getPatientName",value:function(t){return t?" (".concat(t.fullName,")"):""}},{key:"showFiltersModal",value:function(){var t,n,e=this;this._modalService.create({nzContent:yn,nzClosable:!0,nzMaskClosable:!1,nzFooter:null,nzWidth:700,nzTitle:"Compliance Filter",nzBodyStyle:{paddingTop:"0px"},nzComponentParams:{dateRange:this.dateRange,episodeBlueprintId:null===(n=null===(t=this.tenantConfig)||void 0===t?void 0:t.ccmepisodeBlueprint)||void 0===n?void 0:n.id,programTypes:this.episodeTypes,monitoringStaff:this.monitoringStaff,enrollmentStaff:this.enrollmentStaff}}).afterClose.subscribe(function(t){e.staffObject=t,e.staffIdNameMap=null==t?void 0:t.staffIdName,e.staffNameIdMap=null==t?void 0:t.staffNameId})}}]),l}(X.a)).\u0275fac=function(t){return new(t||pe)(O.Rb(R.f),O.Rb(_),O.Rb(M.a),O.Rb(A.b),O.Rb(tn),O.Rb(nn),O.Rb(Yt.a),O.Rb(D.a),O.Rb(Yn.a))},pe.\u0275cmp=O.Lb({type:pe,selectors:[["app-compliance-admin"]],inputs:{isAccessAcrossSubTenants:"isAccessAcrossSubTenants"},features:[O.Ab],decls:69,vars:52,consts:[[1,"container"],[3,"nzGhost"],["nz-button","","nzDanger","",3,"click",4,"isFeaturePermitted"],["nz-button","","nzType","primary",3,"click",4,"isFeaturePermitted"],["nzSize","small",3,"nzColumn"],["nzTitle","Practice",3,"nzSpan"],["nzTitle","Compliance Required (%)",3,"nzSpan"],[4,"ngIf"],["nzTitle","Compliance (%)",3,"nzSpan"],["nzTitle","Enrollment Entries",3,"nzSpan"],["nzTitle","Enrollment Required (%)",3,"nzSpan"],["nzTitle","Enrollment (%)",3,"nzSpan"],["nzTitle","Total Entries",3,"nzSpan"],[3,"nzTitle","nzSpan"],[1,"filters-container"],[3,"ngModel","nzDisabledDate","ngModelChange"],[1,"filter-component"],["nz-button","","nzType","primary",3,"nzLoading","click"],["size","12px","color","#ffffff","altColor","#ffffff","name","filter"],["nzStandalone","",3,"nzOverflowCount","nzShowDot","nzCount","nzStyle"],[3,"allStaff"],["nzTableLayout","fixed","nzShowPagination","","nzShowSizeChanger","",3,"nzWidthConfig","nzData","nzLoading","nzPageSize","nzPageSizeOptions","nzPageSizeChange"],["nzTable",""],["nzWidth","60px"],[3,"nzSortOrder","nzSortFn","nzSortDirections",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["nz-button","","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"click"],[3,"nzSortOrder","nzSortFn","nzSortDirections"],[3,"nzExpand","nzExpandChange"],[1,"activity"],[3,"nzExpand"],["nz-row","","nzGutter","16"],["nz-col",""],["nz-button","","nz-button","","nzType","primary",3,"nzLoading","click"],[3,"data","allowAction","onApprove","onReject","onPeerReview"]],template:function(t,n){if(1&t&&(O.Xb(0,"div",0),O.Xb(1,"nz-page-header",1),O.Xb(2,"nz-page-header-title"),O.Xc(3,"Compliance"),O.Wb(),O.Xb(4,"nz-page-header-subtitle"),O.Xc(5,"Patient Communication Notes"),O.Wb(),O.Xb(6,"nz-page-header-extra"),O.Vc(7,ae,2,0,"button",2),O.Vc(8,ie,2,0,"button",3),O.Wb(),O.Xb(9,"nz-page-header-content"),O.Xb(10,"nz-descriptions",4),O.Xb(11,"nz-descriptions-item",5),O.Xb(12,"strong"),O.Xc(13),O.Wb(),O.Wb(),O.Xb(14,"nz-descriptions-item",6),O.Vc(15,re,2,1,"strong",7),O.Vc(16,oe,2,0,"strong",7),O.Wb(),O.Xc(17,"\\ "),O.Xb(18,"nz-descriptions-item",8),O.Xb(19,"strong"),O.Xc(20),O.Wb(),O.Wb(),O.Xb(21,"nz-descriptions-item",9),O.Xb(22,"strong"),O.Xc(23),O.Wb(),O.Wb(),O.Xb(24,"nz-descriptions-item",10),O.Vc(25,le,2,1,"strong",7),O.Vc(26,ce,2,0,"strong",7),O.Wb(),O.Xc(27,"\\ "),O.Xb(28,"nz-descriptions-item",11),O.Xb(29,"strong"),O.Xc(30),O.Wb(),O.Wb(),O.Xb(31,"nz-descriptions-item",12),O.Xb(32,"strong"),O.Xc(33),O.Wb(),O.Wb(),O.Xb(34,"nz-descriptions-item",13),O.Xb(35,"strong"),O.Xc(36),O.Wb(),O.Wb(),O.Xb(37,"nz-descriptions-item",13),O.Xb(38,"strong"),O.Xc(39),O.Wb(),O.Wb(),O.Xb(40,"nz-descriptions-item",13),O.Xb(41,"strong"),O.Xc(42),O.Wb(),O.Wb(),O.Xb(43,"nz-descriptions-item",13),O.Xb(44,"strong"),O.Xc(45),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Sb(46,"br"),O.Sb(47,"br"),O.Xb(48,"div",14),O.Xb(49,"nz-range-picker",15),O.ec("ngModelChange",function(t){return n.dateRange=t})("ngModelChange",function(){return n.dateUpdated()}),O.Wb(),O.Xb(50,"div"),O.Xb(51,"span",16),O.Xb(52,"button",17),O.ec("click",function(){return n.showFiltersModal()}),O.Sb(53,"app-icons",18),O.Xc(54," Filters "),O.Sb(55,"nz-badge",19),O.Wb(),O.Wb(),O.Wb(),O.Wb(),O.Sb(56,"app-compliance-filter-tag",20),O.Xb(57,"nz-table",21,22),O.ec("nzPageSizeChange",function(t){return n.pageSize=t}),O.Xb(59,"thead"),O.Xb(60,"tr"),O.Sb(61,"th",23),O.Xb(62,"th"),O.Xc(63,"Context"),O.Wb(),O.Vc(64,se,2,4,"th",24),O.Xb(65,"th"),O.Xc(66,"State"),O.Wb(),O.Wb(),O.Wb(),O.Xb(67,"tbody"),O.Vc(68,ue,42,23,"ng-container",25),O.Wb(),O.Wb(),O.Wb()),2&t){var e=O.Ic(58);O.Db(1),O.rc("nzGhost",!1),O.Db(6),O.rc("isFeaturePermitted",O.xc(47,de)),O.Db(1),O.rc("isFeaturePermitted",O.xc(48,be)),O.Db(2),O.rc("nzColumn",3),O.Db(1),O.rc("nzSpan",1),O.Db(2),O.Yc(n.tenantName),O.Db(1),O.rc("nzSpan",1),O.Db(1),O.rc("ngIf",!(null==n.tenantConfig||null==n.tenantConfig.complianceConfig||!n.tenantConfig.complianceConfig.communicationCompliance)),O.Db(1),O.rc("ngIf",!(null!=n.tenantConfig&&null!=n.tenantConfig.complianceConfig&&n.tenantConfig.complianceConfig.communicationCompliance)),O.Db(2),O.rc("nzSpan",1),O.Db(2),O.Zc("",n.patientCommunicationsDetails.compliance||0,"%"),O.Db(1),O.rc("nzSpan",1),O.Db(2),O.Yc(n.patientCommunicationsDetails.enrollment||0),O.Db(1),O.rc("nzSpan",1),O.Db(1),O.rc("ngIf",!(null==n.tenantConfig||null==n.tenantConfig.complianceConfig||!n.tenantConfig.complianceConfig.communicationCompliance)),O.Db(1),O.rc("ngIf",!(null!=n.tenantConfig&&null!=n.tenantConfig.complianceConfig&&n.tenantConfig.complianceConfig.communicationCompliance)),O.Db(2),O.rc("nzSpan",1),O.Db(2),O.Zc("",n.patientCommunicationsDetails.enrollment_compliance||0,"%"),O.Db(1),O.rc("nzSpan",1),O.Db(2),O.Yc(n.patientCommunicationsDetails.total||0),O.Db(1),O.tc("nzTitle","",n.stateNameMap.get("AUTO_APPROVED")," Entries"),O.rc("nzSpan",1),O.Db(2),O.Yc(n.patientCommunicationsDetails.auto_approved||0),O.Db(1),O.tc("nzTitle","",n.stateNameMap.get("APPROVED")," Entries"),O.rc("nzSpan",1),O.Db(2),O.Yc(n.patientCommunicationsDetails.approved||0),O.Db(1),O.tc("nzTitle","",n.stateNameMap.get("CORRECTED")," Entries"),O.rc("nzSpan",1),O.Db(2),O.Yc(n.patientCommunicationsDetails.corrected||0),O.Db(1),O.tc("nzTitle","",n.stateNameMap.get("REJECTED")," Entries"),O.rc("nzSpan",1),O.Db(2),O.Yc(n.patientCommunicationsDetails.rejected||0),O.Db(4),O.rc("ngModel",n.dateRange)("nzDisabledDate",n.disabledDates),O.Db(3),O.rc("nzLoading",n.loadingStaff),O.Db(3),O.rc("nzOverflowCount",9)("nzShowDot",!1)("nzCount",n.totalFiltersApplied)("nzStyle",O.xc(49,fe)),O.Db(1),O.rc("allStaff",n.allStaff),O.Db(1),O.rc("nzWidthConfig",O.xc(50,ge))("nzData",n.patientCommunications)("nzLoading",n.loading)("nzPageSize",n.pageSize)("nzPageSizeOptions",O.xc(51,me)),O.Db(7),O.rc("ngForOf",n.listOfColumns),O.Db(4),O.rc("ngForOf",e.data)}},directives:[Zn.b,Zn.g,Zn.f,Zn.d,Mn.a,Zn.c,$.a,$.b,p.q,$n.a,$n.c,f.u,f.x,L.a,x.a,F.a,Hn.a,Gn.a,ee,gt.f,gt.n,gt.o,gt.e,gt.l,p.p,gt.i,gt.k,gt.j,gt.p,gt.g,V.c,V.a,xn],pipes:[p.e],styles:[".container[_ngcontent-%COMP%]{padding-top:25px!important}nz-radio-group[_ngcontent-%COMP%]{display:block;text-align:right}strong[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]     .ant-progress-text{width:calc(75vw / 4)}nz-page-header[_ngcontent-%COMP%]{background:transparent linear-gradient(106deg,#fff 40%,#bed4ff) 0 0 no-repeat padding-box;border-radius:5px}nz-page-header-title[_ngcontent-%COMP%]{font:normal normal 600 17px/14px Nunito;letter-spacing:-.6px;color:var(--secondary-color)}nz-page-header-subtitle[_ngcontent-%COMP%]{font:normal normal 600 14px/14px Nunito;letter-spacing:-.6px}[_nghost-%COMP%]     tr.ant-table-expanded-row .ant-descriptions-view table{width:100%;border-spacing:0!important;border-collapse:collapse;background-color:#fff}[_nghost-%COMP%]     .ant-descriptions-bordered .ant-descriptions-item-label{font-weight:700}nz-range-picker[_ngcontent-%COMP%]{margin:0 8px 12px 0;width:300px}.compliance-filter-container[_ngcontent-%COMP%]{position:absolute;top:300px;right:0;display:flex;flex-direction:row;margin:10px 15px 15px}.filters-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.filter-component[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}app-icons[_ngcontent-%COMP%]{vertical-align:middle!important;margin-right:10px}[_nghost-%COMP%]     .ant-badge-count{min-width:15px!important;height:15px!important;font-size:10px!important;line-height:15px!important;top:-10px!important;right:-5px!important;transform:none!important}.activity[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;max-width:100%;white-space:nowrap}"]}),pe);function ve(t,n){if(1&t&&O.Sb(0,"app-compliance-admin",3),2&t){var e=O.ic(2);O.rc("isAccessAcrossSubTenants",e.isAccessAcrossSubTenants)}}function ze(t,n){if(1&t&&(O.Vb(0),O.Vc(1,ve,1,1,"app-compliance-admin",2),O.Ub()),2&t){var e=O.ic();O.Db(1),O.rc("ngIf",!e.loading)}}var Se,ye,Ce,Ie=[{path:"patient-communication-notes",component:(Se=function(t){i(e,t);var n=o(e);function e(t,a){var i;u(this,e),(i=n.call(this))._securityTokenHelperService=t,i._permissionsService=a,i.loading=!1;var r=localStorage.getItem("accessToken"),o=i._securityTokenHelperService.parseJwt(r).accountType;i.isLoggedInUserAdmin="TENANT_ADMIN"===o;var l=i._permissionsService.getPermissionsForUser().findIndex(function(t){return"APPROVE_COMPLIANCE"===t})>=0;return i.showAdminDashboard=i.isLoggedInUserAdmin||l,i}return d(e,[{key:"ngOnInit",value:function(){this.loading=!0,this.loading=!1}}]),e}(X.a),Se.\u0275fac=function(t){return new(t||Se)(O.Rb(I.a),O.Rb(D.a))},Se.\u0275cmp=O.Lb({type:Se,selectors:[["app-patient-communication-notes"]],features:[O.Ab],decls:2,vars:1,consts:[[1,"container"],[4,"ngIf"],[3,"isAccessAcrossSubTenants",4,"ngIf"],[3,"isAccessAcrossSubTenants"]],template:function(t,n){1&t&&(O.Xb(0,"div",0),O.Vc(1,ze,2,1,"ng-container",1),O.Wb()),2&t&&(O.Db(1),O.rc("ngIf",!n.loading))},directives:[p.q,he],styles:[""]}),Se),data:{header:!1,title:"Notes Compliance",searchEnabled:!1,primaryAction:{},secondaryAction:{},multiAction:{},privileges:[],showTenantToggle:!0,subTenantToggleMode:"SINGLE"},canActivate:[y.a,C.a]}],Xe=((ye=function t(){u(this,t)}).\u0275mod=O.Pb({type:ye}),ye.\u0275inj=O.Ob({factory:function(t){return new(t||ye)},imports:[[g.k.forChild(Ie)],g.k]}),ye),De=l("ttvE"),Oe=((Ce=function t(n){u(this,t),this.translationService=n,n.setLanguage()}).\u0275mod=O.Pb({type:Ce}),Ce.\u0275inj=O.Ob({factory:function(t){return new(t||Ce)(O.bc(b.a))},imports:[[p.c,z.a,f.o,g.k,h.a,m.b,S.a,s.b,Xe,De.EpisodesModule,v.a.forRoot()]]}),Ce)}}])}();