!function(){function e(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=o(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,r=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw r}}}}function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}function t(e,n){return(t=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function i(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,i=r(e);if(n){var c=r(this).constructor;t=Reflect.construct(i,arguments,c)}else t=i.apply(this,arguments);return a(this,t)}}function a(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){if(e){if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,n):void 0}}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function l(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,n,t){return n&&l(e.prototype,n),t&&l(e,t),e}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{CDsc:function(t,a,r){"use strict";r.r(a),r.d(a,"CareplanModule",function(){return Di});var o=r("rbUg"),s=r("ofXK"),l=r("UFn0"),p=r("SHZf"),b=r("3Pt+"),g=r("KZX/"),h=r("WoUL"),v=r("tyNb"),f=r("T5gh"),m=r("1G5W"),I=r("qQcL"),C=function e(){u(this,e)},y=function e(){u(this,e)},M=function e(){u(this,e)},D=function e(){u(this,e)},T=r("isHH"),E=r("igu/"),S=r("mfqL"),O=r("4RGM"),A=r("fXoL"),z=r("bNXi"),k=r("S5rh"),X=r("Szod"),R=r("B+r4"),N=r("MZxW"),W=r("VGjC"),_=r("nLCl"),B=r("PTRe"),P=r("zAKX"),L=r("TaO5"),w=r("dRHE");function V(e,n){1&e&&(A.Xb(0,"div",16),A.Xc(1),A.jc(2,"translate"),A.Wb()),2&e&&(A.Db(1),A.Zc(" ",A.kc(2,1,"COMMON.REQUIRED")," "))}function U(e,n){if(1&e){var t=A.Yb();A.Xb(0,"label",17),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().course.trackable=e}),A.Xc(1),A.jc(2,"translate"),A.Wb()}if(2&e){var i=A.ic();A.rc("nzDisabled",i.isEditDisabled)("ngModel",i.course.trackable),A.Db(1),A.Yc(A.kc(2,3,"COMMON.TRACKABLE"))}}function F(e,n){1&e&&(A.Sb(0,"nz-option",18),A.jc(1,"translate")),2&e&&A.sc("nzLabel",A.kc(1,1,"GENERAL_CARE_PLAN"))}function G(e,n){1&e&&(A.Sb(0,"nz-option",19),A.jc(1,"translate")),2&e&&A.sc("nzLabel",A.kc(1,1,"REMOTE_PATIENT_MONITORING"))}function x(e,n){1&e&&(A.Sb(0,"nz-option",20),A.jc(1,"translate")),2&e&&A.sc("nzLabel",A.kc(1,1,"CAREPLAN.HEALTH_SCORE"))}function j(e,n){1&e&&(A.Sb(0,"nz-option",21),A.jc(1,"translate")),2&e&&A.sc("nzLabel",A.kc(1,1,"CAREPLAN.CHRONIC_CARE_MANAGEMENT"))}function Y(e,n){if(1&e&&A.Sb(0,"nz-option",22),2&e){var t=n.$implicit;A.rc("nzLabel",t)("nzValue",t)}}function H(e,n){1&e&&(A.Xb(0,"div",16),A.Xc(1),A.jc(2,"translate"),A.Wb()),2&e&&(A.Db(1),A.Zc(" ",A.kc(2,1,"COMMON.REQUIRED")," "))}function q(e,n){if(1&e&&A.Sb(0,"nz-option",22),2&e){var t=n.$implicit;A.uc("nzLabel","",t.firstName," ",t.lastName,""),A.rc("nzValue",t)}}function $(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",0),A.Xb(1,"div",1),A.Xb(2,"nz-select",23),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().selectedCaretaker=e})("ngModelChange",function(e){return A.Lc(t),A.ic().emitCaretaker(e)}),A.Vc(3,q,1,3,"nz-option",14),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.Db(2),A.rc("ngModel",i.selectedCaretaker),A.Db(1),A.rc("ngForOf",i.caretakers)}}var K,J,Z=((J=function(){function e(n){u(this,e),this._userService=n,this.isEditDisabled=!1,this.showCaretakerAssigner=!1,this.autoCompleteTags=[],this.caretakers=[],this.caretakerEmitter=new A.n,this.caretakerAvailable=new A.n}return d(e,[{key:"ngOnInit",value:function(){this.showCaretakerAssigner&&this.getAllCaretakers()}},{key:"getAllCaretakers",value:function(){var e=this;this._userService.getCaretakerForPatient(this.patientId).subscribe(function(n){var t;e.caretakers=n;var i=localStorage.getItem("loggedInUserRole");if(_.a.MONITORING_STAFF===i){var a=localStorage.getItem("loggedInUser");e.caretakers=e.caretakers.filter(function(e){return a===e.id})}e.caretakers&&e.caretakers.length?e.caretakerAvailable.emit(e.showCaretakerAssigner):e.showCaretakerAssigner=!1,1===(null===(t=e.caretakers)||void 0===t?void 0:t.length)&&(e.selectedCaretaker=e.caretakers[0],e.emitCaretaker(e.selectedCaretaker))})}},{key:"emitCaretakersAvailable",value:function(){}},{key:"emitCaretaker",value:function(e){this.caretakerEmitter.emit(Object.assign(e,{}))}}]),e}()).\u0275fac=function(e){return new(e||J)(A.Rb(W.a))},J.\u0275cmp=A.Lb({type:J,selectors:[["app-careplan-header"]],inputs:{isEditDisabled:"isEditDisabled",showCaretakerAssigner:"showCaretakerAssigner",course:"course",patientId:"patientId",generalEnabled:"generalEnabled",rpmEnabled:"rpmEnabled",riEnabled:"riEnabled",ccmEnabled:"ccmEnabled",validationErrors:"validationErrors",autoCompleteTags:"autoCompleteTags"},outputs:{caretakerEmitter:"caretakerEmitter",caretakerAvailable:"caretakerAvailable"},decls:26,vars:31,consts:[["nz-row","","nzGutter","16",1,"careplan-details-container"],["nz-col","","nzSpan","8"],["nz-input","","required","",3,"placeholder","ngClass","ngModel","disabled","ngModelChange"],["name","ngModel"],["class","error-text",4,"ngIf"],["nz-input","",3,"placeholder","ngModel","disabled","ngModelChange"],["nz-checkbox","",3,"nzDisabled","ngModel","ngModelChange",4,"ngIf"],["nzAllowClear","",3,"ngModel","nzPlaceHolder","nzDisabled","ngModelChange"],["nzValue","DEFAULT",3,"nzLabel",4,"ngIf"],["nzValue","REMOTE_PATIENT_MONITORING",3,"nzLabel",4,"ngIf"],["nzValue","HEALTH_SCORE",3,"nzLabel",4,"ngIf"],["nzValue","CHRONIC_CARE_MANAGEMENT",3,"nzLabel",4,"ngIf"],["required","","nzMode","tags",3,"nzPlaceHolder","ngClass","ngModel","nzDisabled","ngModelChange"],["tags","ngModel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-row","","nzGutter","16","class","careplan-details-container",4,"ngIf"],[1,"error-text"],["nz-checkbox","",3,"nzDisabled","ngModel","ngModelChange"],["nzValue","DEFAULT",3,"nzLabel"],["nzValue","REMOTE_PATIENT_MONITORING",3,"nzLabel"],["nzValue","HEALTH_SCORE",3,"nzLabel"],["nzValue","CHRONIC_CARE_MANAGEMENT",3,"nzLabel"],[3,"nzLabel","nzValue"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select Monitoring Staff",3,"ngModel","ngModelChange"]],template:function(e,n){if(1&e&&(A.Xb(0,"div",0),A.Xb(1,"div",1),A.Xb(2,"input",2,3),A.ec("ngModelChange",function(e){return n.course.name=e}),A.jc(4,"translate"),A.Wb(),A.Vc(5,V,3,3,"div",4),A.Wb(),A.Xb(6,"div",1),A.Xb(7,"input",5),A.ec("ngModelChange",function(e){return n.course.description=e}),A.jc(8,"translate"),A.Wb(),A.Wb(),A.Xb(9,"div",1),A.Vc(10,U,3,5,"label",6),A.Wb(),A.Wb(),A.Xb(11,"div",0),A.Xb(12,"div",1),A.Xb(13,"nz-select",7),A.ec("ngModelChange",function(e){return n.course.type=e}),A.jc(14,"translate"),A.Vc(15,F,2,3,"nz-option",8),A.Vc(16,G,2,3,"nz-option",9),A.Vc(17,x,2,3,"nz-option",10),A.Vc(18,j,2,3,"nz-option",11),A.Wb(),A.Wb(),A.Xb(19,"div",1),A.Xb(20,"nz-select",12,13),A.ec("ngModelChange",function(e){return n.course.tags=e}),A.jc(22,"translate"),A.Vc(23,Y,1,2,"nz-option",14),A.Wb(),A.Vc(24,H,3,3,"div",4),A.Wb(),A.Wb(),A.Vc(25,$,4,2,"div",15)),2&e){var t=A.Ic(3),i=A.Ic(21);A.Db(2),A.sc("placeholder",A.kc(4,23,"COMMON.NAME")),A.rc("ngClass",(null==n.validationErrors?null:n.validationErrors.length)>0?"submitted":null)("ngModel",n.course.name)("disabled",n.isEditDisabled),A.Db(3),A.rc("ngIf",(null==t?null:t.invalid)&&((null==t?null:t.dirty)||(null==t?null:t.touched)||(null==n.validationErrors?null:n.validationErrors.length)>0)),A.Db(2),A.sc("placeholder",A.kc(8,25,"COMMON.DESCRIPTION")),A.rc("ngModel",n.course.description)("disabled",n.isEditDisabled),A.Db(3),A.rc("ngIf","REMOTE_PATIENT_MONITORING"!==(null==n.course?null:n.course.type)),A.Db(3),A.tc("nzPlaceHolder"," ",A.kc(14,27,"CAREPLAN.CHOOSE_CAREPLAN_TYPE")," "),A.rc("ngModel",n.course.type)("nzDisabled",n.isEditDisabled),A.Db(2),A.rc("ngIf",n.generalEnabled),A.Db(1),A.rc("ngIf",n.rpmEnabled),A.Db(1),A.rc("ngIf",n.riEnabled),A.Db(1),A.rc("ngIf",n.ccmEnabled),A.Db(2),A.sc("nzPlaceHolder",A.kc(22,29,"TITLE.TAG")),A.rc("ngClass",(null==n.validationErrors?null:n.validationErrors.length)>0?"submitted":null)("ngModel",n.course.tags)("nzDisabled",n.isEditDisabled),A.Db(3),A.rc("ngForOf",n.autoCompleteTags),A.Db(1),A.rc("ngIf",(null==i?null:i.invalid)&&((null==i?null:i.dirty)||(null==i?null:i.touched)||(null==n.validationErrors?null:n.validationErrors.length)>0)),A.Db(1),A.rc("ngIf",n.showCaretakerAssigner)}},directives:[R.c,R.a,B.b,b.d,b.C,s.o,b.u,b.x,s.q,P.d,s.p,L.a,P.a],pipes:[w.a],styles:[".careplan-details-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--neutral-color)}.error-text[_ngcontent-%COMP%]{text-align:end;width:100%;color:#c81c1c}[_nghost-%COMP%]     .ng-invalid.ng-touched{border-color:#c81c1c}[_nghost-%COMP%]     nz-select.ng-invalid.ng-touched>nz-select-top-control{border-color:#c81c1c!important}[_nghost-%COMP%]     .ng-invalid.submitted{border-color:#c81c1c}[_nghost-%COMP%]     nz-select.ng-invalid.submitted>nz-select-top-control{border-color:#c81c1c!important}"]}),J),Q=((K=function(){function e(n){u(this,e),this._notificationsService=n}return d(e,[{key:"validateCapabilities",value:function(e,n){if(!e||!e.length)return!0;if(n&&"VITAL"!=n.type)return!0;var t=e[0],i=new Array;return ee.forEach(function(e){e.find(function(e){return e===t.entityType})&&(i=[].concat(c(i),c(e)))}),!(null==i?void 0:i.length)||-1!==i.indexOf(n.entityType)||(this._notificationsService.error("Interventions","".concat(n.name," is not compatible with already added interventions")),!1)}},{key:"validateUniqueness",value:function(e,n){return!(e&&e.length&&(!n||"TODO"!==n.type&&"ACTIVITY"!==n.type&&"WEB_FORM"!==n.type)&&e.find(function(e){return e.entityType===n.entityType})&&(this._notificationsService.error("Interventions","".concat(n.name," is already part of the group")),1))}}]),e}()).\u0275fac=function(e){return new(e||K)(A.bc(z.b))},K.\u0275prov=A.Nb({token:K,factory:K.\u0275fac,providedIn:"root"}),K),ee=[["BLOOD_PRESSURE","HEART_RATE","STRESS","IRREGULAR_HEARTBEAT","WELLNESS_SCORE","HEART_RATE_VARIABILITY","SPO2","RESPIRATION"],["BLOOD_GLUCOSE"],["WEIGHT"]],ne=r("cScM"),te=function(e){n(a,e);var t=i(a);function a(){return u(this,a),t.apply(this,arguments)}return a}(ne.a),ie=function e(){u(this,e)},ae=function(e){n(a,e);var t=i(a);function a(){return u(this,a),t.apply(this,arguments)}return a}(ne.a),re=function e(){u(this,e)},ce=function e(){u(this,e),this.guaridanNotificationEnabled=!1,this.caretakerNotificationEnabled=!1,this.patientNotificationEnabled=!1,this.reviewResponseEnabled=!1,this.schedules=[],this.childrens=[],this.isTemplateCreated=!0},oe=function e(){u(this,e),this.ownerType="READWRITE"},se=function e(){u(this,e)},le=function(e){return e.MORNING="MORNING",e.AFTERNOON="AFTERNOON",e.EVENING="EVENING",e.NIGHT="NIGHT",e}({}),de=function(){function e(){u(this,e)}return d(e,[{key:"getDaysActivated",value:function(e){var n=new Array;for(var t in e)e[t]&&n.push(t);return n}}]),e}(),ue=r("w7IE"),pe=r("gXqy"),be=r("jKzE"),ge=r("dEAy"),he=r("JA5x"),ve=r("EGpF"),fe=r("0lU3"),me=r("bE2y"),Ie=r("z4wI"),Ce=r("OzZK"),ye=r("RwU8"),Me=r("C2AL"),De=r("5vDB");function Te(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Sb(1,"br"),A.Sb(2,"br"),A.Xb(3,"div",9),A.Xb(4,"div",19),A.Xb(5,"span"),A.Xc(6,"Repeat number of times"),A.Wb(),A.Wb(),A.Xb(7,"div",19),A.Xb(8,"nz-input-number",20),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic(2).scheduling.repeat.frequency=e}),A.Wb(),A.Wb(),A.Wb(),A.Ub()}if(2&e){var i=A.ic(2);A.Db(8),A.rc("ngModel",i.scheduling.repeat.frequency)("nzMin",1)("nzStep",1)}}function Ee(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Xb(1,"div",9),A.Xb(2,"div",10),A.Xb(3,"nz-checkbox-group",4),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic(2).weekdays=e}),A.Wb(),A.Wb(),A.Wb(),A.Sb(4,"br"),A.Sb(5,"br"),A.Ub()}if(2&e){var i=A.ic(2);A.Db(3),A.rc("ngModel",i.weekdays)}}function Se(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Xb(1,"div",9),A.Xb(2,"div",2),A.Xb(3,"nz-radio-group",4),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().scheduling.repeat.type=e}),A.Xb(4,"label",17),A.Xb(5,"span"),A.Xc(6,"Days"),A.Wb(),A.Wb(),A.Xb(7,"label",18),A.Xb(8,"span"),A.Xc(9,"Weeks"),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xb(10,"div",3),A.Xb(11,"div",1),A.Xb(12,"div",6),A.Xb(13,"span"),A.Xc(14,"Till care plan end"),A.Wb(),A.Wb(),A.Xb(15,"div",5),A.Xb(16,"nz-switch",4),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().scheduling.repeat.tillCarePlanEnd=e}),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Vc(17,Te,9,3,"ng-container",8),A.Vb(18),A.Sb(19,"br"),A.Sb(20,"br"),A.Xb(21,"div",9),A.Xb(22,"div",19),A.Xb(23,"span"),A.Xc(24,"Repeats Every"),A.Wb(),A.Wb(),A.Xb(25,"div",19),A.Xb(26,"nz-input-number",20),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().scheduling.repeat.repeatsEvery=e}),A.Wb(),A.Wb(),A.Wb(),A.Ub(),A.Sb(27,"br"),A.Sb(28,"br"),A.Vc(29,Ee,6,1,"ng-container",8),A.Ub()}if(2&e){var i=A.ic();A.Db(3),A.rc("ngModel",i.scheduling.repeat.type),A.Db(13),A.rc("ngModel",i.scheduling.repeat.tillCarePlanEnd),A.Db(1),A.rc("ngIf",!i.scheduling.repeat.tillCarePlanEnd),A.Db(9),A.rc("ngModel",i.scheduling.repeat.repeatsEvery)("nzMin",1)("nzStep",1),A.Db(3),A.rc("ngIf","WEEKLY"===(null==i.scheduling||null==i.scheduling.repeat?null:i.scheduling.repeat.type))}}function Oe(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",21),A.ec("click",function(){return A.Lc(t),A.ic().saveSchedule()}),A.Xc(1,"Save"),A.Wb(),A.Sb(2,"nz-divider",22),A.Xb(3,"button",23),A.ec("click",function(){return A.Lc(t),A.ic().close()}),A.Xc(4,"Cancel"),A.Wb()}}var Ae,ze,ke,Xe,Re,Ne,We=((Ae=function(){function e(n,t,i){var a=this;u(this,e),this._modelRef=n,this._datePipe=t,this._route=i,this.weekdays=[{label:"Sunday",value:"SUNDAY",checked:!0},{label:"Monday",value:"MONDAY",checked:!0},{label:"Tuesday",value:"TUESDAY",checked:!0},{label:"Wednesday",value:"WEDNESDAY",checked:!0},{label:"Thursday",value:"THURSDAY",checked:!0},{label:"Friday",value:"FRIDAY",checked:!0},{label:"Saturday",value:"SATURDAY",checked:!0}],this.disabledStartDate=function(e){return Object(pe.a)(new Date(a.startDate).setHours(0,0,0,0),e)>0||Object(pe.a)(new Date(a.endDate),e)<0}}return d(e,[{key:"ngOnInit",value:function(){var e=this;this._route.queryParams.subscribe(function(n){var t=n.episodeStartDate||(new Date).toISOString().split("T")[0];e.startDate=new Date((new Date).setHours(0,0,0,0)),t&&new Date(new Date(t).setHours(0,0,0,0))>=e.startDate&&(e.startDate=e.dateParser(t.toString())),e.endDate=Object(be.a)(new Date);var i=n.episodeEndDate;i&&(e.endDate=new Date(i))}).unsubscribe()}},{key:"checkIfDaysEnabled",value:function(){var e=this;this.weekdays.forEach(function(n){e.scheduling.repeat.repeatOn[n.value.toLowerCase()]=n.checked})}},{key:"saveSchedule",value:function(){this.checkIfDaysEnabled(),this.scheduling.startDate=this.startDate.getTime(),this.scheduling.startsOn=this._datePipe.transform(this.scheduling.startDate,"yyyy-MM-dd"),this._modelRef.close(this.scheduling)}},{key:"close",value:function(){this._modelRef.close(null)}},{key:"dateParser",value:function(e){var n=e.split("-");return new Date(+n[0],+n[1]-1,+n[2])}}]),e}()).\u0275fac=function(e){return new(e||Ae)(A.Rb(ge.e),A.Rb(s.e),A.Rb(v.a))},Ae.\u0275cmp=A.Lb({type:Ae,selectors:[["app-scheduling-dialog"]],inputs:{scheduling:"scheduling",schedulingmode:"schedulingmode"},features:[A.Cb([s.e])],decls:43,vars:12,consts:[["nzTitle","Schedule",3,"nzBordered","nzExtra"],["nz-row",""],["nz-col","","nzSpan","10"],["nz-col","","nzSpan","14"],[3,"ngModel","ngModelChange"],["nz-col","","nzSpan","6"],["nz-col","","nzSpan","18"],[3,"ngModel","nzFormat","nzDisabledDate","nzPlaceHolder","nzAllowClear","ngModelChange"],[4,"ngIf"],["nz-row","",1,"text-center"],["nz-col","","nzSpan","24"],[3,"ngModel","nzButtonStyle","ngModelChange"],["nz-radio-button","","nzValue","MORNING"],["nz-radio-button","","nzValue","AFTERNOON"],["nz-radio-button","","nzValue","EVENING"],["nz-radio-button","","nzValue","NIGHT"],["actions",""],["nz-radio-button","","nzValue","DAILY"],["nz-radio-button","","nzValue","WEEKLY"],["nz-col","","nzSpan","12"],[3,"ngModel","nzMin","nzStep","ngModelChange"],["nz-button","","nzType","primary",3,"click"],["nzType","vertical"],["nz-button","","nzType","danger",3,"click"]],template:function(e,n){if(1&e&&(A.Xb(0,"nz-card",0),A.Xb(1,"div",1),A.Xb(2,"div",2),A.Xb(3,"span"),A.Xc(4,"Roll Over To Next Day"),A.Wb(),A.Wb(),A.Xb(5,"div",3),A.Xb(6,"nz-switch",4),A.ec("ngModelChange",function(e){return n.scheduling.scheduleRollOver=e}),A.Wb(),A.Wb(),A.Wb(),A.Sb(7,"br"),A.Sb(8,"br"),A.Xb(9,"div",1),A.Xb(10,"div",2),A.Xb(11,"span"),A.Xc(12,"Recurring"),A.Wb(),A.Wb(),A.Xb(13,"div",3),A.Xb(14,"nz-switch",4),A.ec("ngModelChange",function(e){return n.scheduling.repeatedEvent=e}),A.Wb(),A.Wb(),A.Wb(),A.Sb(15,"br"),A.Sb(16,"br"),A.Xb(17,"div",1),A.Xb(18,"div",5),A.Xb(19,"span"),A.Xc(20,"Start On"),A.Wb(),A.Wb(),A.Xb(21,"div",6),A.Xb(22,"nz-date-picker",7),A.ec("ngModelChange",function(e){return n.startDate=e}),A.Wb(),A.Wb(),A.Wb(),A.Sb(23,"br"),A.Sb(24,"br"),A.Vc(25,Se,30,7,"ng-container",8),A.Xb(26,"div",9),A.Xb(27,"div",10),A.Xb(28,"nz-radio-group",11),A.ec("ngModelChange",function(e){return n.scheduling.timeSlot=e}),A.Xb(29,"label",12),A.Xb(30,"span"),A.Xc(31,"Morning"),A.Wb(),A.Wb(),A.Xb(32,"label",13),A.Xb(33,"span"),A.Xc(34,"Afternoon"),A.Wb(),A.Wb(),A.Xb(35,"label",14),A.Xb(36,"span"),A.Xc(37,"Evening"),A.Wb(),A.Wb(),A.Xb(38,"label",15),A.Xb(39,"span"),A.Xc(40,"Night"),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Vc(41,Oe,5,0,"ng-template",null,16,A.Wc)),2&e){var t=A.Ic(42);A.rc("nzBordered",!1)("nzExtra",t),A.Db(6),A.rc("ngModel",n.scheduling.scheduleRollOver),A.Db(8),A.rc("ngModel",n.scheduling.repeatedEvent),A.Db(8),A.rc("ngModel",n.startDate)("nzFormat","mediumDate")("nzDisabledDate",n.disabledStartDate)("nzPlaceHolder","Today Set By Default")("nzAllowClear",!1),A.Db(3),A.rc("ngIf",null==n.scheduling?null:n.scheduling.repeatedEvent),A.Db(3),A.rc("ngModel",n.scheduling.timeSlot)("nzButtonStyle","solid")}},directives:[he.a,R.c,R.a,ve.a,b.u,b.x,fe.a,s.q,me.c,me.b,me.a,Ie.a,L.b,Ce.a,ye.a,Me.a,De.a],styles:[".text-center[_ngcontent-%COMP%]{text-align:center}"]}),Ae),_e=[[["entity-actions"]],[["entity-listing"]]],Be=["entity-actions","entity-listing"],Pe=((ze=function(){function e(){u(this,e)}return d(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ze)},ze.\u0275cmp=A.Lb({type:ze,selectors:[["entity-manager"]],inputs:{name:"name"},ngContentSelectors:Be,decls:8,vars:1,consts:[[1,"container"],[1,"container-header"],[1,"container-title"],[1,"spacer"]],template:function(e,n){1&e&&(A.qc(_e),A.Xb(0,"div",0),A.Xb(1,"div",1),A.Xb(2,"div",2),A.Xc(3),A.Wb(),A.Sb(4,"div",3),A.pc(5),A.Wb(),A.Sb(6,"nz-divider"),A.pc(7,1),A.Wb()),2&e&&(A.Db(3),A.Yc(n.name))},directives:[De.a],styles:[".container-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.container-title[_ngcontent-%COMP%]{font-size:1.6em;margin:0}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),ze),Le=["*"],we=((ke=function(){function e(){u(this,e)}return d(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ke)},ke.\u0275cmp=A.Lb({type:ke,selectors:[["entity-actions"]],ngContentSelectors:Le,decls:1,vars:0,template:function(e,n){1&e&&(A.qc(),A.pc(0))},styles:[""]}),ke),Ve=["*"],Ue=((Xe=function(){function e(){u(this,e)}return d(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Xe)},Xe.\u0275cmp=A.Lb({type:Xe,selectors:[["entity-listing"]],ngContentSelectors:Ve,decls:1,vars:0,template:function(e,n){1&e&&(A.qc(),A.pc(0))},styles:[""]}),Xe),Fe=r("QlLE"),Ge=["*",[["entity-item-actions"]]],xe=function(e){return{"background-color":e}},je=["*","entity-item-actions"],Ye=((Re=function(){function e(){u(this,e),this.selected=!1,this.title="",this.description=""}return d(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Re)},Re.\u0275cmp=A.Lb({type:Re,selectors:[["entity-item"]],inputs:{selected:"selected",title:"title",description:"description"},ngContentSelectors:je,decls:11,vars:5,consts:[[1,"entity-item",2,"border-radius","10px",3,"ngStyle"],[1,"entity-info"],[1,"title"],[1,"description"],[1,"content"],[1,"spacer"]],template:function(e,n){1&e&&(A.qc(Ge),A.Xb(0,"div",0),A.Xb(1,"div",1),A.Xb(2,"div",2),A.Xc(3),A.Wb(),A.Xb(4,"div",3),A.Xc(5),A.Wb(),A.Wb(),A.Xb(6,"div",4),A.pc(7),A.Wb(),A.Sb(8,"div",5),A.Xb(9,"div"),A.pc(10,1),A.Wb(),A.Wb()),2&e&&(A.rc("ngStyle",A.yc(3,xe,n.selected?"#a7c853":"white")),A.Db(3),A.Zc(" ",n.title," "),A.Db(2),A.Zc(" ",n.description," "))},directives:[s.r],styles:[".entity-item[_ngcontent-%COMP%]{display:flex;padding:20px;cursor:pointer}.entity-info[_ngcontent-%COMP%]{z-index:0}.content[_ngcontent-%COMP%]{margin-left:30px}.title[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.description[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),Re),He=["*"],qe=((Ne=function(){function e(){u(this,e)}return d(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ne)},Ne.\u0275cmp=A.Lb({type:Ne,selectors:[["entity-item-actions"]],ngContentSelectors:He,decls:1,vars:0,template:function(e,n){1&e&&(A.qc(),A.pc(0))},styles:[""]}),Ne),$e=r("glKu");function Ke(e,n){1&e&&A.Sb(0,"nz-empty",4)}function Je(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",5),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",6),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic().removeSchedule(e)}),A.Sb(4,"app-icons",7),A.Xc(5,"\xa0\xa0 Delete "),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit,a=A.ic();A.Db(1),A.rc("title",null==i||null==i.repeat?null:i.repeat.summary)("description",null!=i&&i.scheduleRollOver?"Rollover pending task to next day: Yes":"Rollover pending task to next day: No"),A.Db(2),A.rc("nzSize",a.small)}}var Ze,Qe=((Ze=function(e){n(a,e);var t=i(a);function a(e,n){var i;return u(this,a),(i=t.call(this))._modalService=e,i._datePipe=n,i.schedulesChange=new A.n,i}return d(a,[{key:"ngOnInit",value:function(){null==this.schedules&&(this.schedules=[]),this.setScheduleSummary()}},{key:"removeSchedule",value:function(e){this.schedules=this.schedules.filter(function(n){return n!=e}),this.schedulesChange.next(this.schedules)}},{key:"addSchedule",value:function(){var e=this,n=new ue.a;n.startDate=new Date((new Date).setHours(0,0,0,0)).getTime(),n.startsOn=this._datePipe.transform(n.startDate,"yyyy-MM-dd"),n.repeatedEvent=!0,n.repeat=new se,n.repeat.type="DAILY",n.repeat.frequency=1,n.repeat.repeatsEvery=1,n.repeat.repeatOn=new de,n.repeat.tillCarePlanEnd=!0,n.timeSlot=le.MORNING,this._modalService.create({nzContent:We,nzComponentParams:{schedulingmode:"ADD",scheduling:n},nzClosable:!1,nzFooter:null}).afterClose.pipe(Object(m.a)(this.unsubscribed)).subscribe(function(n){null!=n&&(null==e.schedules&&(e.schedules=[]),e.schedules.push(n),e.setScheduleSummary(),e.schedulesChange.next(e.schedules))})}},{key:"setScheduleSummary",value:function(){var e=this;this.schedules.forEach(function(n){var t,i,a=e._datePipe.transform((null==n?void 0:n.startsOn)||Date.now(),"MMMM d, yyyy");n.repeatedEvent||(n.repeat.summary="One time event: ".concat(null==n?void 0:n.timeSlot," - ").concat(a)),"DAILY"===(null===(t=null==n?void 0:n.repeat)||void 0===t?void 0:t.type)&&e.getSummaryForDailyInterventions(n),"WEEKLY"===(null===(i=null==n?void 0:n.repeat)||void 0===i?void 0:i.type)&&e.getSummaryForWeeklyInterventions(n)})}},{key:"getSummaryForDailyInterventions",value:function(e){var n,t,i,a,r=this._datePipe.transform((null==e?void 0:e.startsOn)||Date.now(),"MMMM d, yyyy");e.repeat.summary=(null===(n=null==e?void 0:e.repeat)||void 0===n?void 0:n.repeatsEvery)>1?"Repeats every ".concat(null===(t=null==e?void 0:e.repeat)||void 0===t?void 0:t.repeatsEvery," days ").concat(null==e?void 0:e.timeSlot,", ends after ").concat(e.repeat.frequency," times, from ").concat(r):"Repeats daily ".concat(null==e?void 0:e.timeSlot,", ends after ").concat(e.repeat.frequency," times, from ").concat(r),e.repeat.tillCarePlanEnd&&(e.repeat.summary=(null===(i=null==e?void 0:e.repeat)||void 0===i?void 0:i.repeatsEvery)>1?"Repeats every ".concat(null===(a=null==e?void 0:e.repeat)||void 0===a?void 0:a.repeatsEvery," days\n\t\t\t\t").concat(null==e?void 0:e.timeSlot,", till end of care plan, from ").concat(r):"Repeats daily ".concat(null==e?void 0:e.timeSlot,", till end of care plan, from ").concat(r))}},{key:"getSummaryForWeeklyInterventions",value:function(e){var n,t,i,a,r,c,o,s,l,d=this._datePipe.transform((null==e?void 0:e.startsOn)||Date.now(),"MMMM d, yyyy");e.repeat.summary=(null===(n=null==e?void 0:e.repeat)||void 0===n?void 0:n.repeatsEvery)>1?"Repeats every ".concat(null===(t=null==e?void 0:e.repeat)||void 0===t?void 0:t.repeatsEvery," weeks,\n\t\t\t").concat(null==e?void 0:e.timeSlot,", ").concat(this.getSelectedDays(null===(i=null==e?void 0:e.repeat)||void 0===i?void 0:i.repeatOn),"\n\t\t\tends after ").concat(e.repeat.frequency," times, from ").concat(d):"Repeats every week ".concat(null==e?void 0:e.timeSlot,", ").concat(this.getSelectedDays(null===(a=null==e?void 0:e.repeat)||void 0===a?void 0:a.repeatOn),", ends after \n\t\t\t\t").concat(e.repeat.frequency," times, from ").concat(d),e.repeat.tillCarePlanEnd&&(null===(r=null==e?void 0:e.repeat)||void 0===r?void 0:r.repeatsEvery)>1?e.repeat.summary="Repeats every ".concat(null===(c=null==e?void 0:e.repeat)||void 0===c?void 0:c.repeatsEvery," weeks\n\t\t\t ").concat(this.getSelectedDays(null===(o=null==e?void 0:e.repeat)||void 0===o?void 0:o.repeatOn)," ").concat(e.timeSlot,", \n\t\t\ttill end of care plan, from ").concat(d):e.repeat.tillCarePlanEnd&&1===(null===(s=null==e?void 0:e.repeat)||void 0===s?void 0:s.repeatsEvery)&&(e.repeat.summary="Repeats every week ".concat(this.getSelectedDays(null===(l=null==e?void 0:e.repeat)||void 0===l?void 0:l.repeatOn)," ").concat(e.timeSlot,", till end of care plan, from ").concat(d))}},{key:"getSelectedDays",value:function(e){var n=0,t="on ";return Object.keys(e).forEach(function(i){e[i]&&(t+=i+", ",n+=1)}),7===n?"":t}}]),a}(I.a)).\u0275fac=function(e){return new(e||Ze)(A.Rb(ge.f),A.Rb(s.e))},Ze.\u0275cmp=A.Lb({type:Ze,selectors:[["app-intervention-schedule"]],inputs:{schedules:"schedules"},outputs:{schedulesChange:"schedulesChange"},features:[A.Cb([s.e]),A.Ab],decls:7,vars:2,consts:[["name","Schedules"],["nz-button","","nzType","primary",3,"click"],["nzNotFoundContent","No Schedules",4,"ngIf"],[4,"ngFor","ngForOf"],["nzNotFoundContent","No Schedules"],[3,"title","description"],["nz-button","","nzType","danger",3,"nzSize","click"],["size","11px","color","red","name","delete"]],template:function(e,n){1&e&&(A.Xb(0,"entity-manager",0),A.Xb(1,"entity-actions"),A.Xb(2,"button",1),A.ec("click",function(){return n.addSchedule()}),A.Xc(3,"Add schedule"),A.Wb(),A.Wb(),A.Xb(4,"entity-listing"),A.Vc(5,Ke,1,0,"nz-empty",2),A.Vc(6,Je,6,3,"div",3),A.Wb(),A.Wb()),2&e&&(A.Db(5),A.rc("ngIf",0==(null==n.schedules?null:n.schedules.length)),A.Db(1),A.rc("ngForOf",n.schedules))},directives:[Pe,we,Ce.a,ye.a,Me.a,Ue,s.q,s.p,Fe.b,Ye,qe,$e.a],styles:[".container-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.container-title[_ngcontent-%COMP%]{font-size:1.6em;margin:0}"]}),Ze),en=r("rMZv");function nn(e,n){if(1&e&&(A.Xb(0,"tr"),A.Xb(1,"td"),A.Xc(2),A.Wb(),A.Xb(3,"td"),A.Xc(4),A.Wb(),A.Wb()),2&e){var t=n.$implicit;A.Db(2),A.Yc(null==t?null:t.label),A.Db(2),A.Yc(null==t?null:t.unit)}}function tn(e,n){if(1&e&&(A.Xb(0,"entity-manager",1),A.jc(1,"translate"),A.Xb(2,"entity-listing"),A.Xb(3,"nz-table",2),A.Xb(4,"thead"),A.Xb(5,"tr"),A.Xb(6,"th"),A.Xc(7),A.jc(8,"translate"),A.Wb(),A.Xb(9,"th"),A.Xc(10),A.jc(11,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(12,"tbody"),A.Vc(13,nn,5,2,"tr",3),A.Wb(),A.Wb(),A.Wb(),A.Wb()),2&e){var t=A.ic();A.sc("name",A.kc(1,4,"VITAL.PARAMETERS")),A.Db(7),A.Yc(A.kc(8,6,"VITAL")),A.Db(3),A.Yc(A.kc(11,8,"TABLEHEADER.UNIT")),A.Db(3),A.rc("ngForOf",t.vitalParams)}}function an(e,n){if(1&e){var t=A.Yb();A.Xb(0,"entity-manager",1),A.jc(1,"translate"),A.Xb(2,"entity-listing"),A.Xb(3,"div"),A.Xb(4,"input",4),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().parameters.instruction=e})("ngModelChange",function(){return A.Lc(t),A.ic().updateParameters()}),A.jc(5,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.sc("name",A.kc(1,3,"COMMON.INSTRUCTION")),A.Db(4),A.sc("placeholder",A.kc(5,5,"COMMON.INSTRUCTION")),A.rc("ngModel",i.parameters.instruction)}}var rn,cn=((rn=function(){function e(){u(this,e)}return d(e,[{key:"ngOnInit",value:function(){try{this.parameters=JSON.parse(this.intervention.parameters)}catch(e){}this.parameters||(this.parameters=new oe),this.intervention&&"VITAL"===this.intervention.type&&(this.vitalParams=this.parameters.parameters)}},{key:"updateParameters",value:function(){this.intervention.parameters=JSON.stringify(this.parameters)}}]),e}()).\u0275fac=function(e){return new(e||rn)},rn.\u0275cmp=A.Lb({type:rn,selectors:[["app-intervention-fields"]],inputs:{intervention:"intervention"},decls:2,vars:2,consts:[[3,"name",4,"ngIf"],[3,"name"],["nzTemplateMode","true"],[4,"ngFor","ngForOf"],["nz-input","",3,"placeholder","ngModel","ngModelChange"]],template:function(e,n){1&e&&(A.Vc(0,tn,14,10,"entity-manager",0),A.Vc(1,an,6,7,"entity-manager",0)),2&e&&(A.rc("ngIf","VITAL"===n.intervention.type),A.Db(1),A.rc("ngIf","VITAL"!==n.intervention.type))},directives:[s.q,Pe,Ue,en.f,en.n,en.o,en.e,en.l,en.i,s.p,B.b,b.d,b.u,b.x],pipes:[w.a],styles:["tr[_ngcontent-%COMP%]{cursor:default}i[_ngcontent-%COMP%]{cursor:pointer}.diet-input[_ngcontent-%COMP%]{margin:0 0 2%}"]}),rn),on=r("ZFQP");function sn(e,n){if(1&e&&(A.Xb(0,"label",12),A.Xc(1),A.jc(2,"translate"),A.Wb()),2&e){var t=n.$implicit;A.rc("nzValue",t.id),A.Db(1),A.Yc(A.kc(2,2,t.name))}}var ln,dn=((ln=function(){function e(n){u(this,e),this._modalRef=n,this.feedBackTemplate=new on.a,this.feedbackTypes=[{name:"BOOLEAN",id:"Boolean"},{name:"TEXT",id:"Text"}]}return d(e,[{key:"ngOnInit",value:function(){}},{key:"saveFeedback",value:function(){this._modalRef.close(this.feedBackTemplate)}},{key:"cancel",value:function(){this._modalRef.close()}}]),e}()).\u0275fac=function(e){return new(e||ln)(A.Rb(ge.e))},ln.\u0275cmp=A.Lb({type:ln,selectors:[["app-feedback-dialog"]],decls:33,vars:27,consts:[[3,"nzText"],[2,"margin-top","20px",3,"nzAddOnBefore"],["type","text","nz-input","",3,"ngModel","ngModelChange"],[2,"margin-top","20px"],["id","feedBackType",3,"ngModel","ngModelChange"],["nz-radio","","style","margin-right:20px;",3,"nzValue",4,"ngFor","ngForOf"],["nz-checkbox","","id","caretakerfeedbackAlert",3,"ngModel","ngModelChange"],["nz-checkbox","","id","patientfeedbackAlert",3,"ngModel","ngModelChange"],["nz-checkbox","","id","guradianfeedbackAlert",3,"ngModel","ngModelChange"],[2,"margin-top","20px","margin-bottom","20px"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"click"],["nz-radio","",2,"margin-right","20px",3,"nzValue"]],template:function(e,n){1&e&&(A.Xb(0,"div"),A.Sb(1,"nz-divider",0),A.jc(2,"translate"),A.Xb(3,"nz-input-group",1),A.jc(4,"translate"),A.Xb(5,"input",2),A.ec("ngModelChange",function(e){return n.feedBackTemplate.label=e}),A.Wb(),A.Wb(),A.Xb(6,"div",3),A.Xc(7),A.jc(8,"translate"),A.Wb(),A.Xb(9,"div"),A.Xb(10,"nz-radio-group",4),A.ec("ngModelChange",function(e){return n.feedBackTemplate.type=e}),A.Vc(11,sn,3,4,"label",5),A.Wb(),A.Wb(),A.Xb(12,"div",3),A.Xc(13),A.jc(14,"translate"),A.Wb(),A.Xb(15,"div"),A.Xb(16,"div"),A.Xb(17,"label",6),A.ec("ngModelChange",function(e){return n.feedBackTemplate.caretakerAlert=e}),A.Xc(18),A.jc(19,"translate"),A.Wb(),A.Wb(),A.Xb(20,"div"),A.Xb(21,"label",7),A.ec("ngModelChange",function(e){return n.feedBackTemplate.patientAlert=e}),A.Xc(22),A.jc(23,"translate"),A.Wb(),A.Wb(),A.Xb(24,"div"),A.Xb(25,"label",8),A.ec("ngModelChange",function(e){return n.feedBackTemplate.guardianAlert=e}),A.Xc(26),A.jc(27,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(28,"nz-button-group",9),A.Xb(29,"button",10),A.ec("click",function(){return n.cancel()}),A.Xc(30,"Cancel"),A.Wb(),A.Xb(31,"button",11),A.ec("click",function(){return n.saveFeedback()}),A.Xc(32,"OK"),A.Wb(),A.Wb(),A.Wb()),2&e&&(A.Db(1),A.sc("nzText",A.kc(2,13,"COMMON.ADDFEEDBACK")),A.Db(2),A.sc("nzAddOnBefore",A.kc(4,15,"COMMON.FEEDBACKPROMPT")),A.Db(2),A.rc("ngModel",n.feedBackTemplate.label),A.Db(2),A.Yc(A.kc(8,17,"COMMON.ANSWERTITLE")),A.Db(3),A.rc("ngModel",n.feedBackTemplate.type),A.Db(1),A.rc("ngForOf",n.feedbackTypes),A.Db(2),A.Yc(A.kc(14,19,"COMMON.FEEDBACKRESPONSIBILITY")),A.Db(4),A.rc("ngModel",n.feedBackTemplate.caretakerAlert),A.Db(1),A.Zc(" ",A.kc(19,21,"TITLE.CARETAKERS")," "),A.Db(3),A.rc("ngModel",n.feedBackTemplate.patientAlert),A.Db(1),A.Zc(" ",A.kc(23,23,"FORM.PATIENTS")," "),A.Db(3),A.rc("ngModel",n.feedBackTemplate.guardianAlert),A.Db(1),A.Zc(" ",A.kc(27,25,"COMMON.GUARDIAN")," "))},directives:[De.a,Me.a,B.c,B.b,b.d,b.u,b.x,me.c,s.p,L.a,Ce.b,Ce.a,ye.a,me.b],pipes:[w.a],styles:[""]}),ln),un=r("ZyQt");function pn(e,n){1&e&&A.Sb(0,"nz-empty",4)}function bn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",5),A.Xb(2,"nz-tag",6),A.Xc(3),A.jc(4,"translate"),A.Wb(),A.Xb(5,"entity-item-actions"),A.Xb(6,"button",7),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic().removeFeedback(e)}),A.Sb(7,"app-icons",8),A.Xc(8," Delete"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit,a=A.ic();A.Db(1),A.rc("title",i.label),A.Db(1),A.rc("nzColor","BOOLEAN"==(null==i||null==i.type?null:i.type.toUpperCase())?"geekblue":"purple"),A.Db(1),A.Zc(" ",A.kc(4,4,null==i||null==i.type?null:i.type.toUpperCase())," "),A.Db(3),A.rc("nzSize",a.small)}}var gn,hn,vn=((gn=function(){function e(n){u(this,e),this._modalService=n,this.feedbackInput=[],this.feedbackInputChange=new A.n}return d(e,[{key:"ngOnInit",value:function(){try{this.parameters=JSON.parse(this.intervention.parameters)}catch(e){this.parameters=new oe}this.parameters&&this.parameters.feedBackInput&&(this.feedbackInput=this.parameters.feedBackInput),void 0===this.feedbackInput&&(this.feedbackInput=[])}},{key:"showFeedbackDialog",value:function(){var e=this;null==this.feedbackInput&&(this.feedbackInput=[]),this._modalService.create({nzContent:dn}).afterClose.subscribe(function(n){null!=n&&(e.feedbackInput.push(n),e.feedbackInputChange.next(e.feedbackInput),e.parameters.feedBackInput=e.feedbackInput,e.intervention.parameters=JSON.stringify(e.parameters))})}},{key:"removeFeedback",value:function(e){this.feedbackInput=this.feedbackInput.filter(function(n){return n!=e}),this.feedbackInputChange.next(this.feedbackInput),this.parameters.feedBackInput=this.feedbackInput,this.intervention.parameters=JSON.stringify(this.parameters)}}]),e}()).\u0275fac=function(e){return new(e||gn)(A.Rb(ge.f))},gn.\u0275cmp=A.Lb({type:gn,selectors:[["app-intervention-feedback"]],inputs:{intervention:"intervention"},outputs:{feedbackInputChange:"feedbackInputChange"},decls:7,vars:2,consts:[["name","Feedback"],["nz-button","","nzType","primary",3,"click"],["nzNotFoundContent","No feedbacks",4,"ngIf"],[4,"ngFor","ngForOf"],["nzNotFoundContent","No feedbacks"],[3,"title","description"],[3,"nzColor"],["nz-button","","nzType","danger",3,"nzSize","click"],["name","delete"]],template:function(e,n){1&e&&(A.Xb(0,"entity-manager",0),A.Xb(1,"entity-actions"),A.Xb(2,"button",1),A.ec("click",function(){return n.showFeedbackDialog()}),A.Xc(3,"Add Feedback"),A.Wb(),A.Wb(),A.Xb(4,"entity-listing"),A.Vc(5,pn,1,0,"nz-empty",2),A.Vc(6,bn,9,6,"div",3),A.Wb(),A.Wb()),2&e&&(A.Db(5),A.rc("ngIf",0==n.feedbackInput.length),A.Db(1),A.rc("ngForOf",n.feedbackInput))},directives:[Pe,we,Ce.a,ye.a,Me.a,Ue,s.q,s.p,Fe.b,Ye,un.a,qe,$e.a],pipes:[w.a],styles:[""]}),gn),fn=function e(){u(this,e)},mn=function e(){u(this,e)},In=((hn=function(){function e(n){u(this,e),this.route=n,this.accessPermission=new fn,this.accessPermission.caretaker=new mn,this.accessPermission.patient=new mn,this.accessPermission.guardian=new mn}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.forEach(function(n){e.careplanBlueprintId=n.id}),this.permissions=this.intervention.permissions,this.changePermission(),this.initAccessPermissions()}},{key:"changePermission",value:function(){"HEALTH_SCORE"!==this.intervention.type&&(this.careplanBlueprintId||(this.permissions="REMOTE_PATIENT_MONITORING"!==this.careplanType?"666":"464"))}},{key:"initAccessPermissions",value:function(){if(this.permissions){var e=parseInt(this.permissions.substr(0,1)),n=parseInt(this.permissions.substr(1,1)),t=parseInt(this.permissions.substr(2,3));e-4>=0&&(e-=4,this.accessPermission.caretaker.canRead=!0),e-2>=0&&(e-=2,this.accessPermission.caretaker.canWrite=!0),n-4>=0&&(n-=4,this.accessPermission.patient.canRead=!0),n-2>=0&&(n-=2,this.accessPermission.patient.canWrite=!0),t-4>=0&&(t-=4,this.accessPermission.guardian.canRead=!0),t-2>=0&&(t-=2,this.accessPermission.guardian.canWrite=!0)}else this.accessPermission.caretaker.canExecute=!1,this.accessPermission.patient.canExecute=!1,this.accessPermission.guardian.canExecute=!1,this.accessPermission.caretaker.canRead=!0,this.accessPermission.patient.canRead=!0,this.accessPermission.guardian.canRead=!0,this.accessPermission.caretaker.canWrite=!0,this.accessPermission.patient.canWrite=!0,this.accessPermission.guardian.canWrite=!0,this.permissions="666"}},{key:"calc_chmod",value:function(){var e=0;e+=this.accessPermission.caretaker.canRead?4:0,e+=this.accessPermission.caretaker.canWrite?2:0;var n=0;n+=this.accessPermission.patient.canRead?4:0,n+=this.accessPermission.patient.canWrite?2:0;var t=0;t+=this.accessPermission.guardian.canRead?4:0,t+=this.accessPermission.guardian.canWrite?2:0,this.permissions=e+""+n+t,this.intervention.permissions=this.permissions}}]),e}()).\u0275fac=function(e){return new(e||hn)(A.Rb(v.a))},hn.\u0275cmp=A.Lb({type:hn,selectors:[["app-intervention-permissions"]],inputs:{intervention:"intervention",careplanType:"careplanType"},decls:32,vars:6,consts:[["name","Permissions"],["nzTemplateMode","true"],["nz-checkbox","",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(A.Xb(0,"entity-manager",0),A.Xb(1,"entity-listing"),A.Xb(2,"nz-table",1),A.Xb(3,"thead"),A.Xb(4,"tr"),A.Xb(5,"th"),A.Xc(6,"Type"),A.Wb(),A.Xb(7,"th"),A.Xc(8,"Caretaker"),A.Wb(),A.Xb(9,"th"),A.Xc(10,"Patient"),A.Wb(),A.Xb(11,"th"),A.Xc(12,"Guardian"),A.Wb(),A.Wb(),A.Wb(),A.Xb(13,"tbody"),A.Xb(14,"tr"),A.Xb(15,"td"),A.Xc(16,"Read"),A.Wb(),A.Xb(17,"td"),A.Xb(18,"label",2),A.ec("ngModelChange",function(e){return n.accessPermission.caretaker.canRead=e})("ngModelChange",function(){return n.calc_chmod()}),A.Wb(),A.Wb(),A.Xb(19,"td"),A.Xb(20,"label",2),A.ec("ngModelChange",function(e){return n.accessPermission.patient.canRead=e})("ngModelChange",function(){return n.calc_chmod()}),A.Wb(),A.Wb(),A.Xb(21,"td"),A.Xb(22,"label",2),A.ec("ngModelChange",function(e){return n.accessPermission.guardian.canRead=e})("ngModelChange",function(){return n.calc_chmod()}),A.Wb(),A.Wb(),A.Wb(),A.Xb(23,"tr"),A.Xb(24,"td"),A.Xc(25,"Write"),A.Wb(),A.Xb(26,"td"),A.Xb(27,"label",2),A.ec("ngModelChange",function(e){return n.accessPermission.caretaker.canWrite=e})("ngModelChange",function(){return n.calc_chmod()}),A.Wb(),A.Wb(),A.Xb(28,"td"),A.Xb(29,"label",2),A.ec("ngModelChange",function(e){return n.accessPermission.patient.canWrite=e})("ngModelChange",function(){return n.calc_chmod()}),A.Wb(),A.Wb(),A.Xb(30,"td"),A.Xb(31,"label",2),A.ec("ngModelChange",function(e){return n.accessPermission.guardian.canWrite=e})("ngModelChange",function(){return n.calc_chmod()}),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb()),2&e&&(A.Db(18),A.rc("ngModel",n.accessPermission.caretaker.canRead),A.Db(2),A.rc("ngModel",n.accessPermission.patient.canRead),A.Db(2),A.rc("ngModel",n.accessPermission.guardian.canRead),A.Db(5),A.rc("ngModel",n.accessPermission.caretaker.canWrite),A.Db(2),A.rc("ngModel",n.accessPermission.patient.canWrite),A.Db(2),A.rc("ngModel",n.accessPermission.guardian.canWrite))},directives:[Pe,Ue,en.f,en.n,en.o,en.e,en.l,en.i,L.a,b.u,b.x],styles:["[_nghost-%COMP%]     .ant-checkbox-inner{width:20px;height:20px;border:1px solid var(--grey);border-radius:5px;background-color:#fbfbfb}[_nghost-%COMP%]     .ant-checkbox-inner:after{top:-2px;left:2px;border:4px solid #2f4f4f;border-top:0;border-left:0;transform:rotate(45deg) scale(.5) translate(-50%,-50%)}"]}),hn);function Cn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"app-intervention-permissions",4),A.ec("careplanTypeChange",function(e){return A.Lc(t),A.ic(2).careplanType=e})("interventionChange",function(e){return A.Lc(t),A.ic(2).interventionBlueprint=e}),A.Wb()}if(2&e){var i=A.ic(2);A.rc("careplanType",i.careplanType)("intervention",i.interventionBlueprint)}}function yn(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Xb(1,"app-intervention-schedule",1),A.ec("schedulesChange",function(e){return A.Lc(t),A.ic().interventionBlueprint.schedules=e}),A.Wb(),A.Xb(2,"app-intervention-fields",2),A.ec("interventionChange",function(e){return A.Lc(t),A.ic().interventionBlueprint=e}),A.Wb(),A.Vc(3,Cn,1,2,"app-intervention-permissions",3),A.Xb(4,"app-intervention-feedback",2),A.ec("interventionChange",function(e){return A.Lc(t),A.ic().interventionBlueprint=e}),A.Wb(),A.Ub()}if(2&e){var i=A.ic();A.Db(1),A.rc("schedules",i.interventionBlueprint.schedules),A.Db(1),A.rc("intervention",i.interventionBlueprint),A.Db(1),A.rc("ngIf","GROUP"!==i.interventionBlueprint.type),A.Db(1),A.rc("intervention",i.interventionBlueprint)}}var Mn,Dn,Tn=((Mn=function(){function e(){u(this,e),this.isReviewAndResponseEnabled=!1}return d(e,[{key:"ngOnInit",value:function(){"REMOTE_PATIENT_MONITORING"===this.careplanType&&(this.interventionBlueprint.reviewResponseEnabled=!0)}}]),e}()).\u0275fac=function(e){return new(e||Mn)},Mn.\u0275cmp=A.Lb({type:Mn,selectors:[["app-default-intervention"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"schedules","schedulesChange"],[3,"intervention","interventionChange"],[3,"careplanType","intervention","careplanTypeChange","interventionChange",4,"ngIf"],[3,"careplanType","intervention","careplanTypeChange","interventionChange"]],template:function(e,n){1&e&&A.Vc(0,yn,5,4,"ng-container",0),2&e&&A.rc("ngIf",n.interventionBlueprint)},directives:[s.q,Qe,cn,vn,In],styles:[""]}),Mn),En=r("sG7K"),Sn=r("Dwgb"),On=r("3pGX"),An=r("vRiJ"),zn=r("pe0G"),kn=((Dn=function(){function e(n){u(this,e),this.dataSharingService=n,this.healthScores=new Map,this.init()}return d(e,[{key:"init",value:function(){var e=this;this.dataSharingService.tenantSettings.subscribe(function(n){e.tenantSettings=n,e.getEnabledHealthScores()})}},{key:"getEnabledHealthScores",value:function(){var e=this;if(null!=this.tenantSettings.healthScoreConfig||null!=this.tenantSettings.healthScoreConfig){var n=this.tenantSettings.healthScoreConfig;null!=n.healthScores&&null!=n.healthScores&&n.healthScores.forEach(function(n){n.enabled&&"WELLNESS_SCORE"!=n.healthScoreType&&e.healthScores.set(n.healthScoreType,n)})}}},{key:"getHealthScoreInterventions",value:function(){var e=[];if(this.healthScores.has("ROTHMAN_INDEX")){var n=new ce;n.id="_"+Math.random().toString(36).substr(2,9),n.name="Health Score",n.type="HEALTH_SCORE",n.entityType="HEALTH_SCORE",n.permissions="460",e.push(n)}if(this.healthScores.has("WELLNESS_SCORE")){var t=new ce;t.id="_"+Math.random().toString(36).substr(2,9),t.name="Wellness Score",t.type="WELLNESS_SCORE",t.entityType="WELLNESS_SCORE",t.permissions="460",e.push(t)}return e}}]),e}()).\u0275fac=function(e){return new(e||Dn)(A.bc(E.a))},Dn.\u0275prov=A.Nb({token:Dn,factory:Dn.\u0275fac,providedIn:"root"}),Dn),Xn=r("KCkQ"),Rn=r("tkii"),Nn=r("Nq9W"),Wn=r("oyxB"),_n=r("3/1E"),Bn=r("qAZ0");function Pn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",14),A.ec("click",function(){return A.Lc(t),A.ic().closeDialog()}),A.Sb(1,"app-icons",15),A.Wb()}}function Ln(e,n){1&e&&A.Sb(0,"nz-spin",17)}function wn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(3).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5,"\xa0 Add"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function Vn(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,wn,6,1,"div",19),A.Wb()),2&e){var t=A.ic(2);A.Db(1),A.rc("ngForOf",t.vitalInterventions)}}function Un(e,n){if(1&e){var t=A.Yb();A.Xb(0,"nz-tab",16),A.ec("nzClick",function(){return A.Lc(t),A.ic().getVitalBlueprints()}),A.Vc(1,Ln,1,0,"nz-spin",7),A.Vc(2,Vn,2,1,"div",8),A.Xb(3,"nz-pagination",10),A.ec("nzPageIndexChange",function(e){return A.Lc(t),A.ic().getVitalBlueprints(e)}),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.Db(1),A.rc("ngIf",i.loading),A.Db(1),A.rc("ngIf",!i.loading),A.Db(1),A.rc("nzTotal",i.totalVitalsCount)}}function Fn(e,n){1&e&&A.Sb(0,"nz-spin",17)}function Gn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(3).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5," \xa0Add "),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function xn(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,Gn,6,1,"div",19),A.Wb()),2&e){var t=A.ic(2);A.Db(1),A.rc("ngForOf",t.healthScoreInterventions)}}function jn(e,n){if(1&e&&(A.Xb(0,"nz-tab",23),A.jc(1,"translate"),A.Vc(2,Fn,1,0,"nz-spin",7),A.Vc(3,xn,2,1,"div",8),A.Wb()),2&e){var t=A.ic();A.tc("nzTitle"," ",A.kc(1,3,"HEALTHSCORE.TITLE")," "),A.Db(2),A.rc("ngIf",t.loading),A.Db(1),A.rc("ngIf",!t.loading)}}function Yn(e,n){1&e&&A.Sb(0,"nz-spin",17)}function Hn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(3).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5," \xa0Add"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function qn(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,Hn,6,1,"div",19),A.Wb()),2&e){var t=A.ic(2);A.Db(1),A.rc("ngForOf",t.courseInterventions)}}function $n(e,n){if(1&e){var t=A.Yb();A.Xb(0,"nz-tab",24),A.ec("nzClick",function(){return A.Lc(t),A.ic().getCourses()}),A.Vc(1,Yn,1,0,"nz-spin",7),A.Vc(2,qn,2,1,"div",8),A.Xb(3,"nz-pagination",10),A.ec("nzPageIndexChange",function(e){return A.Lc(t),A.ic().getCourses(e)}),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.Db(1),A.rc("ngIf",i.loading),A.Db(1),A.rc("ngIf",!i.loading),A.Db(1),A.rc("nzTotal",i.totalCoursesCount)}}function Kn(e,n){1&e&&A.Sb(0,"nz-spin",17)}function Jn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(3).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5," \xa0Add"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function Zn(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,Jn,6,1,"div",19),A.Wb()),2&e){var t=A.ic(2);A.Db(1),A.rc("ngForOf",t.formInterventions)}}function Qn(e,n){if(1&e){var t=A.Yb();A.Xb(0,"nz-tab",25),A.ec("nzClick",function(){return A.Lc(t),A.ic().getForms()}),A.Vc(1,Kn,1,0,"nz-spin",7),A.Vc(2,Zn,2,1,"div",8),A.Xb(3,"nz-pagination",10),A.ec("nzPageIndexChange",function(e){return A.Lc(t),A.ic().getForms(e)}),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.Db(1),A.rc("ngIf",i.loading),A.Db(1),A.rc("ngIf",!i.loading),A.Db(1),A.rc("nzTotal",i.totalFormsCount)}}function et(e,n){1&e&&A.Sb(0,"nz-spin",17)}function nt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(2).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5," \xa0Add"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function tt(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,nt,6,1,"div",19),A.Wb()),2&e){var t=A.ic();A.Db(1),A.rc("ngForOf",t.medicineInterventions)}}function it(e,n){1&e&&A.Sb(0,"nz-spin",17)}function at(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(2).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5," \xa0Add"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function rt(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,at,6,1,"div",19),A.Wb()),2&e){var t=A.ic();A.Db(1),A.rc("ngForOf",t.todoInterventions)}}function ct(e,n){1&e&&A.Sb(0,"nz-spin",17)}function ot(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div"),A.Xb(1,"entity-item",20),A.Xb(2,"entity-item-actions"),A.Xb(3,"button",21),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(2).raiseAddInterventionEvent(e)}),A.Sb(4,"app-icons",22),A.Xc(5,"\xa0 Add"),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("title",i.name)}}function st(e,n){if(1&e&&(A.Xb(0,"div",18),A.Vc(1,ot,6,1,"div",19),A.Wb()),2&e){var t=A.ic();A.Db(1),A.rc("ngForOf",t.activityInterventions)}}var lt,dt=((lt=function(){function e(n,t,i,a,r,c,o,s,l){u(this,e),this._regimeService=n,this._courseService=t,this._formsService=i,this._partnerService=a,this._vitalBlueprintsService=r,this._modalRef=c,this._healthScoreInterventionService=o,this._dataSharingService=s,this._careplanEventLogger=l,this.vitalInterventions=[],this.healthScoreInterventions=[],this.activityInterventions=[],this.dietInterventions=[],this.todoInterventions=[],this.courseInterventions=[],this.formInterventions=[],this.medicineInterventions=[],this.interventionsAdded=new A.n,this.totalVitalsCount=0,this.totalFormsCount=0,this.totalDietsCount=0,this.totalCoursesCount=0,this.totalOthersCount=0,this.featureConfigs=new Xn.a,this.tenantSettings=new Rn.a}return d(e,[{key:"ngOnInit",value:function(){var e=this;this._careplanEventLogger.pageViewEvent(this.constructor.name,"intervention selection dialog"),this.getVitalBlueprints(),this.healthScoreInterventions=this._healthScoreInterventionService.getHealthScoreInterventions(),this.$featureConfigsObserver=this._dataSharingService.featureConfigs.subscribe(function(n){n&&(e.featureConfigs=n)}),this.getTenantSettings()}},{key:"ngOnDestroy",value:function(){this._careplanEventLogger.pageDestroyEvent(this.constructor.name,"intervention selection dialog"),this.$featureConfigsObserver.unsubscribe()}},{key:"getOffset",value:function(e){return 1!==e?10*(e-1):0}},{key:"getTenantSettings",value:function(){var e=this;this._dataSharingService.tenantSettings.subscribe(function(n){n&&(e.tenantSettings=n)})}},{key:"getForms",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this._formsService.getFormsWithBody({phq9:this.featureConfigs.phq9,gad7:this.featureConfigs.gad7,ri:this.featureConfigs.ri,covid:this.featureConfigs.covid,feveriq:this.featureConfigs.feverIq,smsAssessment:!1},n-1,10,"").subscribe(function(n){var t,i,a,r;e.totalFormsCount=n.data.forms.total,e.formInterventions=[],null===(r=null===(a=null===(i=null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.forms)||void 0===i?void 0:i.obj)||void 0===a?void 0:a.filter(function(e){return"SCORED_ASSESSMENT"===e.type||"ASSESSMENT"===e.type}))||void 0===r||r.forEach(function(n){var t=new ce;t.id="_"+Math.random().toString(36).substr(2,9),t.name=n.title,t.type="WEB_FORM",t.entityType=n.type;var i={};i.formBlueprintId=n._id,t.parameters=JSON.stringify(i),e.formInterventions.push(t)}),e.loading=!1})}},{key:"getVitalBlueprints",value:function(){var e=this;this.loading=!0,this._vitalBlueprintsService.fetchVitalBlueprintsForTenant().subscribe(function(n){e.totalVitalsCount=n.length,e.vitalInterventions=[],n.forEach(function(n){if(n.active){var t=new ce;t.id="_"+Math.random().toString(36).substr(2,9),t.name=n.label,t.type="VITAL",t.entityType=n.type,t.parameters=JSON.stringify(n),e.vitalInterventions.push(t)}}),e.loading=!1})}},{key:"getMedicineInterventions",value:function(){this.loading=!0,this.medicineInterventions=[];var e=new ce;e.id="_"+Math.random().toString(36).substr(2,9),e.name="Custom Medicine",e.type="MEDICINE",this.medicineInterventions.push(e),this.loading=!1}},{key:"getOtherInterventions",value:function(){var e=this;this.loading=!0,this._regimeService.getInterventionBlueprint().subscribe(function(n){e.totalOthersCount=e._partnerService.getTotalCount(n.headers);var t=n.body;e.activityInterventions=[],e.todoInterventions=[],t.forEach(function(n){"ACTIVITY"===n.type&&null===n.parentId&&("Runnning"===n.name&&(n.name="Running"),e.activityInterventions.push(n)),"TODO"===n.type&&null===n.parentId&&e.todoInterventions.push(n)});var i=new ce;i.name="Custom Activity",i.type="ACTIVITY",i.isTemplateCreated=!1,i.id="_"+Math.random().toString(36).substr(2,9),e.activityInterventions.push(i);var a=new ce;a.name="Custom Todo",a.type="TODO",a.isTemplateCreated=!1,a.id="_"+Math.random().toString(36).substr(2,9),e.todoInterventions.push(a),e.loading=!1})}},{key:"getCourses",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this._courseService.fetchCourses(this.getOffset(n),10).subscribe(function(n){e.totalCoursesCount=n.totalCount;var t=n.result;e.courseInterventions=[],t.forEach(function(n){if("CONTENT AS SUGGESTION"!==n.type){var t=new ce;t.id="_"+Math.random().toString(36).substr(2,9),t.name=n.name,t.type="COURSE",t.parameters=JSON.stringify(n),e.courseInterventions.push(t)}}),e.loading=!1})}},{key:"raiseAddInterventionEvent",value:function(e){this._careplanEventLogger.episodeCareplanActionEvent("","","","careplan_add_intervention");var n=Object.assign({},e);"Custom Medicine"===n.name||"Custom Activity"===n.name||"Custom Todo"===n.name?(this.customInterventionBlueprint=n,this.isAddCustomModalVisible=!0):(n.id="_"+Math.random().toString(36).substr(2,9),this.interventionsAdded.next(n))}},{key:"addCustomIntervention",value:function(){var e=Object.assign({},this.customInterventionBlueprint);e.id="_"+Math.random().toString(36).substr(2,9),e.name=this.customInterventionName,this.interventionsAdded.next(e),this.closeModal()}},{key:"closeModal",value:function(){this.isAddCustomModalVisible=!1,this.customInterventionName="",this.customInterventionBlueprint=new ce}},{key:"closeDialog",value:function(){this._modalRef.close()}}]),e}()).\u0275fac=function(e){return new(e||lt)(A.Rb(On.a),A.Rb(An.a),A.Rb(zn.a),A.Rb(Sn.a),A.Rb(En.a),A.Rb(ge.e),A.Rb(kn),A.Rb(E.a),A.Rb(Nn.a))},lt.\u0275cmp=A.Lb({type:lt,selectors:[["app-intervention-selection-dialog"]],inputs:{interventionGroupId:"interventionGroupId"},features:[A.Cb([En.a,On.a])],decls:20,vars:15,consts:[["class","close",3,"click",4,"ngIf"],[1,"interventions-container"],["nzTitle","Vitals",3,"nzClick",4,"ngIf"],[3,"nzTitle",4,"ngIf"],["nzTitle","Contents",3,"nzClick",4,"ngIf"],["nzTitle","Forms",3,"nzClick",4,"ngIf"],["nzTitle","Medicines",3,"nzClick"],["class","spinner","nzSimple","",4,"ngIf"],["class","intervention-list",4,"ngIf"],["nzTitle","Todo's",3,"nzClick"],[3,"nzTotal","nzPageIndexChange"],["nzTitle","Activities",3,"nzClick"],["nzTitle","Please enter a name for this intervention",3,"nzVisible","nzVisibleChange","nzOnOk","nzOnCancel"],["nz-input","","placeholder","Please enter a name...",3,"ngModel","ngModelChange"],[1,"close",3,"click"],["name","close"],["nzTitle","Vitals",3,"nzClick"],["nzSimple","",1,"spinner"],[1,"intervention-list"],[4,"ngFor","ngForOf"],[3,"title","description"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["size","12px","color","#ffffff","name","plusCircle"],[3,"nzTitle"],["nzTitle","Contents",3,"nzClick"],["nzTitle","Forms",3,"nzClick"]],template:function(e,n){1&e&&(A.Vc(0,Pn,2,0,"div",0),A.Xb(1,"div",1),A.Xb(2,"nz-tabset"),A.Vc(3,Un,4,3,"nz-tab",2),A.Vc(4,jn,4,5,"nz-tab",3),A.Vc(5,$n,4,3,"nz-tab",4),A.Vc(6,Qn,4,3,"nz-tab",5),A.Xb(7,"nz-tab",6),A.ec("nzClick",function(){return n.getMedicineInterventions()}),A.Vc(8,et,1,0,"nz-spin",7),A.Vc(9,tt,2,1,"div",8),A.Wb(),A.Xb(10,"nz-tab",9),A.ec("nzClick",function(){return n.getOtherInterventions()}),A.Vc(11,it,1,0,"nz-spin",7),A.Vc(12,rt,2,1,"div",8),A.Xb(13,"nz-pagination",10),A.ec("nzPageIndexChange",function(e){return n.getOtherInterventions(e)}),A.Wb(),A.Wb(),A.Xb(14,"nz-tab",11),A.ec("nzClick",function(){return n.getOtherInterventions()}),A.Vc(15,ct,1,0,"nz-spin",7),A.Vc(16,st,2,1,"div",8),A.Xb(17,"nz-pagination",10),A.ec("nzPageIndexChange",function(e){return n.getOtherInterventions(e)}),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xb(18,"nz-modal",12),A.ec("nzVisibleChange",function(e){return n.isAddCustomModalVisible=e})("nzOnOk",function(){return n.addCustomIntervention()})("nzOnCancel",function(){return n.closeModal()}),A.Xb(19,"input",13),A.ec("ngModelChange",function(e){return n.customInterventionName=e}),A.Wb(),A.Wb()),2&e&&(A.rc("ngIf",!n.loading),A.Db(3),A.rc("ngIf",null==n.tenantSettings||null==n.tenantSettings.vitalConfig?null:n.tenantSettings.vitalConfig.enabled),A.Db(1),A.rc("ngIf",null==n.tenantSettings||null==n.tenantSettings.healthScoreConfig?null:n.tenantSettings.healthScoreConfig.enabled),A.Db(1),A.rc("ngIf",null==n.tenantSettings||null==n.tenantSettings.contentConfig?null:n.tenantSettings.contentConfig.enabled),A.Db(1),A.rc("ngIf",null==n.featureConfigs?null:n.featureConfigs.formsEnabled),A.Db(2),A.rc("ngIf",n.loading),A.Db(1),A.rc("ngIf",!n.loading),A.Db(2),A.rc("ngIf",n.loading),A.Db(1),A.rc("ngIf",!n.loading),A.Db(1),A.rc("nzTotal",n.totalOthersCount),A.Db(2),A.rc("ngIf",n.loading),A.Db(1),A.rc("ngIf",!n.loading),A.Db(1),A.rc("nzTotal",n.totalOthersCount),A.Db(1),A.rc("nzVisible",n.isAddCustomModalVisible),A.Db(1),A.rc("ngModel",n.customInterventionName))},directives:[s.q,Wn.d,Wn.a,_n.a,ge.a,B.b,b.d,b.u,b.x,$e.a,Bn.a,s.p,Ye,qe,Ce.a,ye.a,Me.a],pipes:[w.a],styles:[".intervention-list[_ngcontent-%COMP%]{max-height:500px;overflow-y:scroll}.close[_ngcontent-%COMP%]{float:right;cursor:pointer}.spinner[_ngcontent-%COMP%]{text-align:center}"]}),lt),ut=[{value:"TABLET",label:"Tablet",children:[{value:"MG",label:"MG",isLeaf:!0}]},{value:"CAPSULE",label:"Capsule",children:[{value:"NO UNITS",label:"No Units",isLeaf:!0}]},{value:"INJECTION",label:"Injection",children:[{value:"CC",label:"CC",isLeaf:!0}]},{value:"SYRUP",label:"Syrup",children:[{value:"TABLESPOON",label:"Tablespoon",isLeaf:!0},{value:"TEASPOON",label:"Teaspoon",isLeaf:!0},{value:"ML",label:"Ml",isLeaf:!0}]},{value:"CREAM",label:"Cream",children:[{value:"NO UNITS",label:"No Units",isLeaf:!0}]},{value:"SPRAY",label:"Spray",children:[{value:"NO UNITS",label:"No Units",isLeaf:!0}]}],pt=r("jPNr"),bt=r("OEtX"),gt=r("Jioy"),ht=r("q0Us"),vt=r("ix5O"),ft=["interventionView"];function mt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",20),A.ec("click",function(){return A.Lc(t),A.ic().showAddGroupModal()}),A.Xc(1),A.jc(2,"translate"),A.Wb()}2&e&&(A.Db(1),A.Yc(A.kc(2,1,"COMMON.ADDGROUP")))}function It(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",20),A.ec("click",function(){return A.Lc(t),A.ic(3).showMedicinesDialog()}),A.Xc(1," Add Medicine "),A.Wb()}}function Ct(e,n){1&e&&A.Sb(0,"nz-empty",25)}function yt(e,n){if(1&e&&(A.Xb(0,"span"),A.Xc(1),A.jc(2,"date"),A.Wb()),2&e){var t=A.ic().$implicit;A.Db(1),A.Zc(" ",A.lc(2,1,null==t?null:t.toBeTakenTill,"mediumDate")," ")}}function Mt(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Xb(1,"nz-tag",27),A.Xc(2),A.Wb(),A.Xb(3,"entity-item",28),A.Xb(4,"entity-item-actions"),A.Vc(5,yt,3,4,"span",24),A.Xc(6," \xa0\xa0 "),A.Xb(7,"button",29),A.ec("click",function(){A.Lc(t);var e=n.index,i=n.$implicit;return A.ic(4).editMedicine(e,i)}),A.Sb(8,"app-icons",30),A.Wb(),A.Xc(9," \xa0 "),A.Xb(10,"app-icons",31),A.ec("click",function(){A.Lc(t);var e=n.index;return A.ic(4).removeMedicine(e)}),A.Wb(),A.Wb(),A.Wb(),A.Ub()}if(2&e){var i=n.$implicit;A.Db(1),A.rc("nzColor","orange"),A.Db(1),A.Zc("",i.prn?"PRN (As Required)":"Scheduled"," "),A.Db(1),A.rc("title",null==i?null:i.name)("description",null==i?null:i.instruction),A.Db(2),A.rc("ngIf",!(null!=i&&i.prn))}}function Dt(e,n){if(1&e&&(A.Vb(0),A.Vc(1,Mt,11,5,"ng-container",26),A.Ub()),2&e){var t=A.ic(3);A.Db(1),A.rc("ngForOf",t.addedMedicines)}}function Tt(e,n){if(1&e&&(A.Xb(0,"entity-manager",22),A.Xb(1,"entity-actions"),A.Vc(2,It,2,0,"button",3),A.Wb(),A.Xb(3,"entity-listing"),A.Vc(4,Ct,1,0,"nz-empty",23),A.Vc(5,Dt,2,1,"ng-container",24),A.Wb(),A.Wb()),2&e){var t=A.ic(2);A.Db(2),A.rc("ngIf","VIEW"!==t.mode),A.Db(2),A.rc("ngIf",!(null!=t.addedMedicines&&t.addedMedicines.length)),A.Db(1),A.rc("ngIf",null==t.addedMedicines?null:t.addedMedicines.length)}}function Et(e,n){if(1&e&&(A.Xb(0,"div",5),A.Vc(1,Tt,6,3,"entity-manager",21),A.Wb()),2&e){var t=A.ic();A.Db(1),A.rc("ngIf",null==t.tenantSettings||null==t.tenantSettings.medicineSettings?null:t.tenantSettings.medicineSettings.medicineEnabled)}}function St(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",20),A.ec("click",function(){A.Lc(t);var e=A.ic().$implicit;return A.ic().showAddInterventionDialogForGroup(e)}),A.Xc(1),A.jc(2,"translate"),A.Wb()}2&e&&(A.Db(1),A.Yc(A.kc(2,1,"COMMON.ADDINTERVENTION")))}function Ot(e,n){if(1&e){var t=A.Yb();A.Xb(0,"app-icons",31),A.ec("click",function(){A.Lc(t);var e=A.ic().$implicit;return A.ic().removeGroup(e)}),A.Wb()}}function At(e,n){1&e&&A.Sb(0,"nz-empty",37)}function zt(e,n){if(1&e&&(A.Xb(0,"nz-tag",27),A.Xc(1),A.Wb()),2&e){var t=A.ic().$implicit;A.rc("nzColor","orange"),A.Db(1),A.Zc(" ",t.type," ")}}function kt(e,n){1&e&&(A.Xb(0,"nz-tag",27),A.Xc(1," FORM "),A.Wb()),2&e&&A.rc("nzColor","orange")}function Xt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"app-icons",31),A.ec("click",function(){A.Lc(t);var e=A.ic().$implicit,n=A.ic().$implicit;return A.ic().removeIntervention(n,e)}),A.Wb()}}function Rt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",38),A.ec("click",function(){A.Lc(t);var e=n.$implicit;return A.ic(2).selectIntervention(e)}),A.Vc(1,zt,2,2,"nz-tag",39),A.Vc(2,kt,2,1,"nz-tag",39),A.Xb(3,"entity-item",40),A.Xb(4,"entity-item-actions"),A.Vc(5,Xt,1,0,"app-icons",34),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=n.$implicit,a=A.ic(2);A.Db(1),A.rc("ngIf","FORM"!==i.type&&"WEB_FORM"!==i.type),A.Db(1),A.rc("ngIf","FORM"===i.type||"WEB_FORM"===i.type),A.Db(1),A.rc("title",i.name)("selected",(null==a.selectedInterventionBlueprint?null:a.selectedInterventionBlueprint.id)===i.id),A.Db(2),A.rc("ngIf","VIEW"!==a.mode)}}function Nt(e,n){if(1&e&&(A.Xb(0,"div",32),A.Xb(1,"entity-manager",33),A.Xb(2,"entity-actions"),A.Vc(3,St,3,3,"button",3),A.Xc(4," \xa0\xa0 "),A.Vc(5,Ot,1,0,"app-icons",34),A.Wb(),A.Xb(6,"entity-listing"),A.Vc(7,At,1,0,"nz-empty",35),A.Vc(8,Rt,6,5,"div",36),A.Wb(),A.Wb(),A.Wb()),2&e){var t=n.$implicit,i=A.ic();A.Db(1),A.rc("name",i.getGroupInterventionName(t)),A.Db(2),A.rc("ngIf","VIEW"!==i.mode),A.Db(2),A.rc("ngIf","DEFAULT"!==t),A.Db(2),A.rc("ngIf",null==i.groupInterventionMap.get(t)||0==i.groupInterventionMap.get(t).length),A.Db(1),A.rc("ngForOf",i.groupInterventionMap.get(t))}}function Wt(e,n){}function _t(e,n){if(1&e&&(A.Xb(0,"nz-auto-option",46),A.Xc(1),A.Wb()),2&e){var t=n.$implicit;A.rc("nzValue",t),A.Db(1),A.Zc(" ",t.name," ")}}function Bt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",41),A.Xb(1,"input",42),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().userSelectedMedicine=e})("input",function(e){return A.Lc(t),A.ic().searchMedicines(null==e.target?null:e.target.value)})("ngModelChange",function(e){return A.Lc(t),A.ic().setMedicine(e)}),A.Wb(),A.Xb(2,"nz-autocomplete",43,44),A.Vc(4,_t,2,2,"nz-auto-option",45),A.Wb(),A.Wb()}if(2&e){var i=A.Ic(3),a=A.ic();A.Db(1),A.rc("ngModel",a.userSelectedMedicine)("nzAutocomplete",i),A.Db(3),A.rc("ngForOf",a.medicines)}}function Pt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",57),A.Xb(1,"nz-date-picker",58),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic(2).medicineEndDate=e})("ngModelChange",function(e){return A.Lc(t),A.ic(2).onMedicineEndDateChange(e)}),A.Wb(),A.Wb()}if(2&e){var i=A.ic(2);A.Db(1),A.rc("ngModel",i.medicineEndDate)("nzDisabledDate",i.disabledDate)}}function Lt(e,n){1&e&&A.Sb(0,"app-icons",59)}function wt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"nz-select",65),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().$implicit.schedule.repeat.tempType=e}),A.Sb(1,"nz-option",66),A.Sb(2,"nz-option",67),A.Sb(3,"nz-option",68),A.Sb(4,"nz-option",69),A.Sb(5,"nz-option",70),A.Sb(6,"nz-option",71),A.Wb()}if(2&e){var i=A.ic().$implicit;A.rc("ngModel",i.schedule.repeat.tempType)}}function Vt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"nz-select",72),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().$implicit.quantity=e}),A.Sb(1,"nz-option",73),A.Sb(2,"nz-option",74),A.Sb(3,"nz-option",75),A.Wb()}if(2&e){var i=A.ic().$implicit;A.rc("ngModel",i.quantity)}}function Ut(e,n){if(1&e){var t=A.Yb();A.Xb(0,"input",76),A.ec("change",function(){A.Lc(t);var e=A.ic().$implicit;return A.ic(2).isDosageValid(e.quantity)})("ngModelChange",function(e){return A.Lc(t),A.ic().$implicit.quantity=e}),A.Wb()}if(2&e){var i=A.ic().$implicit;A.rc("ngModel",i.quantity)}}function Ft(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Xb(1,"nz-time-picker",77),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().$implicit.schedule.tempOccuranceStartTime=e})("ngModelChange",function(){A.Lc(t);var e=A.ic().$implicit;return A.ic(2).onMedicineTimeChange(e,"START")}),A.jc(2,"translate"),A.Wb(),A.Ub()}if(2&e){var i=A.ic().$implicit;A.Db(1),A.sc("nzPlaceHolder",A.kc(2,2,"TABLEHEADER.STARTTIME")),A.rc("ngModel",i.schedule.tempOccuranceStartTime)}}function Gt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",51),A.ec("click",function(){A.Lc(t);var e=A.ic().index;return A.ic(2).removeDose(e)}),A.Sb(1,"app-icons",78),A.Wb()}}function xt(e,n){if(1&e&&(A.Xb(0,"div",79),A.Xb(1,"strong"),A.Xc(2),A.Wb(),A.Wb()),2&e){var t=A.ic().$implicit,i=A.ic(2);A.Db(2),A.Yc(i.getSummaryForSchedule(t))}}function jt(e,n){if(1&e&&(A.Xb(0,"div"),A.Xb(1,"div",57),A.Vc(2,wt,7,1,"nz-select",60),A.Wb(),A.Vc(3,Vt,4,1,"nz-select",61),A.Vc(4,Ut,1,1,"input",62),A.Vc(5,Ft,3,4,"ng-container",24),A.Vc(6,Gt,2,0,"button",63),A.Vc(7,xt,3,1,"div",64),A.Sb(8,"nz-divider"),A.Wb()),2&e){var t=n.index,i=A.ic(2);A.Db(2),A.rc("ngIf",!1===i.userMedicineToBeAdded.prn),A.Db(1),A.rc("ngIf","CREAM"==i.selectedMedicineType||"SPRAY"==i.selectedMedicineType),A.Db(1),A.rc("ngIf",!("CREAM"==i.selectedMedicineType||"SPRAY"==i.selectedMedicineType)),A.Db(1),A.rc("ngIf",!1===i.userMedicineToBeAdded.prn),A.Db(1),A.rc("ngIf",t>0),A.Db(1),A.rc("ngIf",!1===i.userMedicineToBeAdded.prn)}}function Yt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",41),A.Xb(1,"div",47),A.Xb(2,"nz-radio-group",48),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().userMedicineToBeAdded.prn=e}),A.Xb(3,"label",49),A.Xc(4,"As Scheduled"),A.Wb(),A.Xb(5,"label",49),A.Xc(6,"PRN (As Needed)"),A.Wb(),A.Wb(),A.Wb(),A.Xb(7,"nz-cascader",50),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().selectedMedicineOption=e})("ngModelChange",function(e){return A.Lc(t),A.ic().onMedicineOptionChange(e)}),A.Wb(),A.Xb(8,"button",51),A.ec("click",function(){return A.Lc(t),A.ic().addNewDose()}),A.Sb(9,"app-icons",52),A.Wb(),A.Vc(10,Pt,2,2,"div",53),A.Xb(11,"nz-input-group",54),A.Xb(12,"input",55),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().userMedicineToBeAdded.instruction=e}),A.Wb(),A.Wb(),A.Vc(13,Lt,1,0,"ng-template",null,56,A.Wc),A.Vc(15,jt,9,6,"div",26),A.Wb()}if(2&e){var i=A.Ic(14),a=A.ic();A.Db(2),A.rc("ngModel",a.userMedicineToBeAdded.prn)("nzButtonStyle","solid"),A.Db(1),A.rc("nzValue",!1),A.Db(2),A.rc("nzValue",!0),A.Db(2),A.rc("nzOptions",a.medicineOptions)("ngModel",a.selectedMedicineOption),A.Db(3),A.rc("ngIf",!1===a.userMedicineToBeAdded.prn),A.Db(1),A.rc("nzSuffix",i),A.Db(1),A.rc("ngModel",a.userMedicineToBeAdded.instruction),A.Db(3),A.rc("ngForOf",a.userMedicineToBeAdded.dosages)}}function Ht(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",80),A.ec("click",function(){return A.Lc(t),A.ic().pre()}),A.Xb(1,"span"),A.Xc(2,"Previous"),A.Wb(),A.Wb()}}function qt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",81),A.ec("click",function(){return A.Lc(t),A.ic().next()}),A.Xb(1,"span"),A.Xc(2,"Next"),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.rc("disabled",!(null!=i.selectedMedicine&&i.selectedMedicine.name))}}function $t(e,n){if(1&e){var t=A.Yb();A.Xb(0,"button",20),A.ec("click",function(){return A.Lc(t),A.ic().done()}),A.Xb(1,"span"),A.Xc(2,"Done"),A.Wb(),A.Wb()}}var Kt,Jt=((Kt=function(){function e(n,t,i,a,r,c,o){u(this,e),this.factoryResolver=n,this._modalService=t,this._notificationsService=i,this.courseService=a,this.dataSharingService=r,this._groupInterventionsValidator=c,this._careplanEventLogger=o,this.isAddGroupModalVisible=!1,this.isMedicineDialogVisible=!1,this.medicineDialogContent="SEARCH",this.medicineDialogIndex=0,this.selectedMedicineOption=null,this.medicineOptions=ut,this.selectedMedicineType="",this.emitUserMedicine=new A.n,this.emitRemovedUserMedicine=new A.n,this.disabledDate=function(e){return Object(pe.a)(new Date,e)>0}}return d(e,[{key:"ngOnInit",value:function(){var e=this;void 0===this.careplanBlueprintDTO&&(this.careplanBlueprintDTO=new y),this.dataSharingService.tenantSettings.subscribe(function(n){e.tenantSettings=n})}},{key:"appendToInterventionBlueprintGroup",value:function(e,n){var t=this.groupInterventionMap.get(e);void 0===t&&(t=[]),t.push(n),this.groupInterventionMap.set(e,t)}},{key:"selectIntervention",value:function(e){this.selectedInterventionBlueprint=e,null==this.selectedInterventionBlueprint.paramName&&(this.selectedInterventionBlueprint.paramName=new oe);var n=this.factoryResolver.resolveComponentFactory(Tn);this.viewContainerRef.clear();var t=this.viewContainerRef.createComponent(n);t.instance.interventionBlueprint=e,t.instance.careplanType=this.course.type}},{key:"showAddInterventionDialogForGroup",value:function(e){var n=this;this.course.type?this._modalService.create({nzContent:dt,nzComponentParams:{interventionGroupId:e},nzWidth:600,nzCloseIcon:null}).componentInstance.interventionsAdded.subscribe(function(t){var i=JSON.parse(JSON.stringify(t));if("REMOTE_PATIENT_MONITORING"===n.course.type&&(i.permissions="464"),"DEFAULT"===e)n.appendToInterventionBlueprintGroup("DEFAULT",i);else{e&&10<e.length&&(i.parentId=e);var a=n.groupInterventionMap.get(e);if(null==a&&(a=[]),!n._groupInterventionsValidator.validateCapabilities(a,i))return;if(!n._groupInterventionsValidator.validateUniqueness(a,i))return;a.push(i)}n._notificationsService.success("Intervention Added","The selected intervention has been added.")}):this._notificationsService.error("Validation Error","Please Select Careplan Type First Before Proceeding!!")}},{key:"removeGroup",value:function(e){var n,t,i=this;this._careplanEventLogger.episodeCareplanActionEvent("",this.patientId,null===(n=this.course)||void 0===n?void 0:n.id,"careplan_remove_intervention_group"),this.groupInterventionMap.get(e).forEach(function(e){i.addToDeletedInterventions(e)}),this.groupInterventionMap.delete(e),this.interventionGroupIds.splice(this.interventionGroupIds.indexOf(e),1),this.groupInterventions.forEach(function(n){n.id===e&&(t=n)});var a=this.groupInterventions.splice(this.groupInterventions.indexOf(t),1);this.addToDeletedInterventions(a[0])}},{key:"removeIntervention",value:function(e,n){var t;this._careplanEventLogger.episodeCareplanActionEvent("",this.patientId,null===(t=this.course)||void 0===t?void 0:t.id,"careplan_remove_intervention"),null!=this.selectedInterventionBlueprint&&this.selectedInterventionBlueprint.id===n.id&&(this.selectedInterventionBlueprint=null,this.viewContainerRef.clear());var i=this.groupInterventionMap.get(e);i=i.filter(function(e){return e.id!==n.id}),this.groupInterventionMap.set(e,i),this.addToDeletedInterventions(n)}},{key:"addToDeletedInterventions",value:function(e){"ADD"!==this.mode&&(this.careplanBlueprintDTO.deletedInterventions||(this.careplanBlueprintDTO.deletedInterventions=[]),e.id.length>15&&this.careplanBlueprintDTO.deletedInterventions.push(e.id))}},{key:"getGroupInterventionName",value:function(e){if("DEFAULT"===e)return"Ungrouped";var n=this.groupInterventions.find(function(n){return n.id===e});return n?n.name:"Ungrouped"}},{key:"showAddGroupModal",value:function(){this.groupName="",this.isAddGroupModalVisible=!0}},{key:"closeAddGroupModal",value:function(){this.isAddGroupModalVisible=!1}},{key:"addGroup",value:function(){var e;this._careplanEventLogger.episodeCareplanActionEvent("",this.patientId,null===(e=this.course)||void 0===e?void 0:e.id,"careplan_add_intervention_group"),this.groupName.trim()||(this.groupName="NEW GROUP"),this.isAddGroupModalVisible=!1;var n=new ce;n.type="GROUP",n.id="_"+Math.random().toString(36).substr(2,9),n.name=this.groupName,this.groupInterventions.push(n),this.interventionGroupIds.push(n.id),this.groupInterventionMap.set(n.id,[])}},{key:"showMedicinesDialog",value:function(){this.userSelectedMedicine=null,this.isMedicineDialogVisible=!0}},{key:"closeMedicinesDialog",value:function(){this.isMedicineDialogVisible=!1,this.userMedicineToBeAdded=null,this.selectedMedicine=null,this.medicineDialogContent="SEARCH",this.medicineDialogIndex=0,this.selectedMedicineOption=null,this.medicineEndDate=null,this.medicines=[],this.isEditingMedicine=!1,this.keyOfMedicineBeingEdited=null,this.medicineEndDate=null}},{key:"pre",value:function(){this.medicineDialogIndex-=1,this.changeContent("SEARCH")}},{key:"next",value:function(){this.medicineDialogIndex+=1,this.changeContent("SCHEDULE"),this.initializeNewMedicineObject()}},{key:"done",value:function(){var e;this.validateUserMedicine()&&(this.userMedicineToBeAdded.prn&&this.userMedicineToBeAdded.dosages.forEach(function(e){delete e.schedule}),this._careplanEventLogger.episodeCareplanActionEvent("",this.patientId,null===(e=this.course)||void 0===e?void 0:e.id,"careplan_add_medicine"),this.addedMedicines||(this.addedMedicines=[]),this.isEditingMedicine?this.addedMedicines[this.keyOfMedicineBeingEdited]=this.userMedicineToBeAdded:this.addedMedicines.push(this.userMedicineToBeAdded),this.emitUserMedicine.emit(this.addedMedicines),this.closeMedicinesDialog())}},{key:"validateUserMedicine",value:function(){var e=this,n=!0,t=!0,i="";return this.userMedicineToBeAdded.dosages.forEach(function(t){t.type&&t.unit||(i+="Medicine Type/Unit "),t.quantity||(i+="Medicine Quantity "),e.userMedicineToBeAdded.prn||(t.schedule.repeat.tempType||(i+="Medicine Recurrence "),t.schedule.occuranceStartTime||(i+="Medicine Start-Time ")),e.isDosageValid(t.quantity)||(n=!1),e.isDosageValid(t.quantity)||(n=!1)}),this.userMedicineToBeAdded.prn||this.userMedicineToBeAdded.toBeTakenTill||(i+="Medicine End-Date "),i.length&&(i+="Cannot Be Empty!",this._notificationsService.create("error","Validation Error!",i),t=!1),n||(this._notificationsService.create("error","Validation Error!","Dosage quantity should be a number!"),t=!1),t}},{key:"changeContent",value:function(e){this.medicineDialogContent=e}},{key:"initializeNewMedicineObject",value:function(){this.userMedicineToBeAdded=new te,this.course.id&&(this.userMedicineToBeAdded.careplanId=this.course.id),this.userMedicineToBeAdded.name=this.selectedMedicine.name,this.userMedicineToBeAdded.medicineId=this.selectedMedicine.id,this.userMedicineToBeAdded.prn=!1,this.userMedicineToBeAdded.addedOn=(new Date).getTime(),this.userMedicineToBeAdded.dosages=[],this.addNewDose(),this.userMedicineToBeAdded.assignerId=localStorage.getItem("loggedInUser"),this.userMedicineToBeAdded.tenantId=localStorage.getItem("loggedInTenant"),this.userMedicineToBeAdded.userId=this.patientId}},{key:"addNewDose",value:function(){var e=new ie;this.userMedicineToBeAdded.dosages.length&&this.userMedicineToBeAdded.dosages[0].type&&(e.type=this.userMedicineToBeAdded.dosages[0].type,e.unit=this.userMedicineToBeAdded.dosages[0].unit),e.schedule=new ae,e.schedule.repeat=new re,e.schedule.repeat.type="DAILY",e.schedule.repeat.occuranceType="ON_DATE",e.schedule.startDate=(new Date).getTime(),e.schedule.endDate=this.userMedicineToBeAdded.toBeTakenTill,this.userMedicineToBeAdded.dosages.push(e)}},{key:"removeDose",value:function(e){this.userMedicineToBeAdded.dosages.splice(e,1)}},{key:"searchMedicines",value:function(e){var n=this;e.length<3||this.courseService.searchMedicines(e).subscribe(function(e){n.medicines=e})}},{key:"setMedicine",value:function(e){this.userSelectedMedicine=e.name,this.selectedMedicine=e}},{key:"onMedicineOptionChange",value:function(e){var n=this,t=new Array;this.userMedicineToBeAdded.dosages.forEach(function(e){e.quantity=null,t.push(e)}),this.userMedicineToBeAdded.dosages=t,this.userMedicineToBeAdded.dosages.forEach(function(e){e.type=n.selectedMedicineOption[0],e.unit=n.selectedMedicineOption[1]}),this.selectedMedicineType=this.selectedMedicineOption[0]}},{key:"onMedicineEndDateChange",value:function(e){var n=this;this.userMedicineToBeAdded.toBeTakenTill=new Date(e).getTime(),this.userMedicineToBeAdded.prn||this.userMedicineToBeAdded.dosages.forEach(function(e){e.schedule.startDate=Date.now(),e.schedule.endDate=n.userMedicineToBeAdded.toBeTakenTill})}},{key:"onMedicineTimeChange",value:function(e,n){if("START"===n&&e.schedule.tempOccuranceStartTime){var t=new Date(e.schedule.tempOccuranceStartTime);e.schedule.occuranceStartTime=t.getHours()+":"+t.getMinutes()}else if("END"===n&&e.schedule.tempOccuranceEndTime){var i=new Date(e.schedule.tempOccuranceEndTime);e.schedule.occuranceEndTime=i.getHours()+":"+i.getMinutes()}}},{key:"getSummaryForSchedule",value:function(e){var n;if(e.quantity&&e.unit&&e.type&&e.schedule.repeat.tempType&&e.schedule.occuranceStartTime)return n=(e.quantity||"")+" "+("NO UNITS"===e.unit?"":e.unit)+" "+(e.type||"")+", Every "+(e.schedule.repeat.tempType||"")+", At "+(e.schedule.occuranceStartTime||""),e.schedule.repeat.summary=n,e.schedule.repeat.occurances=this.userMedicineToBeAdded.dosages.length,e.schedule.repeat.frequency="Day"===e.schedule.repeat.tempType?1:parseInt(e.schedule.repeat.tempType.charAt(0)),n}},{key:"editMedicine",value:function(e,n){var t;this._careplanEventLogger.episodeCareplanActionEvent("",this.patientId,null===(t=this.course)||void 0===t?void 0:t.id,"careplan_edit_medicine"),this.isEditingMedicine=!0,this.keyOfMedicineBeingEdited=e,this.userSelectedMedicine=n.name,n.toBeTakenTill&&(this.medicineEndDate=new Date(n.toBeTakenTill));var i=new Array;i.push(n.dosages[0].type),i.push(n.dosages[0].unit),this.selectedMedicineOption=i,this.userMedicineToBeAdded=n,this.medicineDialogIndex+=1,this.changeContent("SCHEDULE"),this.isMedicineDialogVisible=!0}},{key:"removeMedicine",value:function(e){var n;this._careplanEventLogger.episodeCareplanActionEvent("",this.patientId,null===(n=this.course)||void 0===n?void 0:n.id,"careplan_remove_medicine"),this.addedMedicines[e].id&&this.emitRemovedUserMedicine.emit(this.addedMedicines[e].id),this.addedMedicines.splice(e,1)}},{key:"isDosageValid",value:function(e){return"CREAM"==this.selectedMedicineType||"SPRAY"==this.selectedMedicineType?isNaN(e):!isNaN(Number(e))}}]),e}()).\u0275fac=function(e){return new(e||Kt)(A.Rb(A.j),A.Rb(ge.f),A.Rb(z.b),A.Rb(An.a),A.Rb(E.a),A.Rb(Q),A.Rb(Nn.a))},Kt.\u0275cmp=A.Lb({type:Kt,selectors:[["app-interventions-composer"]],viewQuery:function(e,n){var t;1&e&&A.ed(ft,1,A.R),2&e&&A.Hc(t=A.fc())&&(n.viewContainerRef=t.first)},inputs:{mode:"mode",course:"course",interventionGroupIds:"interventionGroupIds",groupInterventions:"groupInterventions",careplanBlueprintDTO:"careplanBlueprintDTO",interventionBluprints:"interventionBluprints",groupInterventionMap:"groupInterventionMap",selectedInterventionBlueprint:"selectedInterventionBlueprint",patientId:"patientId",addedMedicines:["medicinesAssigned","addedMedicines"]},outputs:{emitUserMedicine:"emitUserMedicine",emitRemovedUserMedicine:"emitRemovedUserMedicine"},decls:30,vars:17,consts:[[1,"composer-container"],[1,"interventions-container"],[1,"sub-headers"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["class","interventions-list",4,"ngIf"],[1,"interventions-list"],["class","intervention-group",4,"ngFor","ngForOf"],[1,"intervention-settings-container"],[1,"intervention-settings"],["interventionView",""],["nzTitle","Please Enter New Group Name",3,"nzVisible","nzVisibleChange","nzOnOk","nzOnCancel"],["nz-input","","placeholder","New Group Name",3,"ngModel","ngModelChange"],["nzTitle","Medicines",3,"nzVisible","nzFooter","nzVisibleChange","nzOnCancel"],[3,"nzCurrent"],["nzTitle","Select Medicine"],["nzTitle","Dosage & Schedule"],["class","steps-content",4,"ngIf"],[1,"steps-action"],["nz-button","","nzType","default",3,"click",4,"ngIf"],["nz-button","","nzType","default",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["name","Medicines",4,"ngIf"],["name","Medicines"],["nzNotFoundContent","No Medicines",4,"ngIf"],[4,"ngIf"],["nzNotFoundContent","No Medicines"],[4,"ngFor","ngForOf"],[1,"course-type",3,"nzColor"],[3,"title","description"],["nz-button","","nzType","warn","nzShape","circle",3,"click"],["name","edit"],["name","delete",3,"click"],[1,"intervention-group"],[3,"name"],["name","delete",3,"click",4,"ngIf"],["nzNotFoundContent","No Interventions",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["nzNotFoundContent","No Interventions"],[3,"click"],["class","course-type",3,"nzColor",4,"ngIf"],[3,"title","description","selected"],[1,"steps-content"],["placeholder","Search Medicine","nz-input","",3,"ngModel","nzAutocomplete","ngModelChange","input"],["nzBackfill","false"],["auto",""],[3,"nzValue",4,"ngFor","ngForOf"],[3,"nzValue"],[2,"margin","auto","width","fit-content"],[3,"ngModel","nzButtonStyle","ngModelChange"],["nz-radio-button","",3,"nzValue"],[2,"margin-top","5%","width","50%",3,"nzOptions","ngModel","ngModelChange"],["nz-button","","nzType","default","nzShape","circle",2,"margin-left","2%",3,"click"],["name","plus"],["style","margin-top: 5%;",4,"ngIf"],[2,"margin-top","5%",3,"nzSuffix"],["type","text","nz-input","","placeholder","Instructions",3,"ngModel","ngModelChange"],["suffixIconInstruction",""],[2,"margin-top","5%"],["nzFormat","mediumDate","nzPlaceHolder","To Be Taken Till",3,"ngModel","nzDisabledDate","ngModelChange"],["name","infoCircle"],["style","width: 35%;","nzPlaceHolder","Recurrence",3,"ngModel","ngModelChange",4,"ngIf"],["style","margin-top: 5%; width: 35%;","nzPlaceHolder","Dosage Quantity",3,"ngModel","ngModelChange",4,"ngIf"],["style","margin-top: 5%; width: 35%;","nz-input","","placeholder","Dosage Quantity",3,"ngModel","change","ngModelChange",4,"ngIf"],["style","margin-left: 2%;","nz-button","","nzType","default","nzShape","circle",3,"click",4,"ngIf"],["style","margin-top: 5%; text-align: center;",4,"ngIf"],["nzPlaceHolder","Recurrence",2,"width","35%",3,"ngModel","ngModelChange"],["nzValue","Day","nzLabel","Daily"],["nzValue","2 Days","nzLabel","Every 2 Days"],["nzValue","3 Days","nzLabel","Every 3 Days"],["nzValue","4 Days","nzLabel","Every 4 Days"],["nzValue","5 Days","nzLabel","Every 5 Days"],["nzValue","6 Days","nzLabel","Every 6 Days"],["nzPlaceHolder","Dosage Quantity",2,"margin-top","5%","width","35%",3,"ngModel","ngModelChange"],["nzValue","A small amount","nzLabel","A small amount"],["nzValue","A moderate amount","nzLabel","A moderate amount"],["nzValue","A heavy amount","nzLabel","A heavy amount"],["nz-input","","placeholder","Dosage Quantity",2,"margin-top","5%","width","35%",3,"ngModel","change","ngModelChange"],["nzFormat","HH:mm",2,"width","25%","; margin-left","1%",3,"nzPlaceHolder","ngModel","ngModelChange"],["name","minus"],[2,"margin-top","5%","text-align","center"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","default",3,"disabled","click"]],template:function(e,n){1&e&&(A.Xb(0,"div",0),A.Xb(1,"div",1),A.Xb(2,"nz-page-header",2),A.Xb(3,"nz-page-header-title"),A.Xc(4),A.jc(5,"translate"),A.Wb(),A.Xb(6,"nz-page-header-extra"),A.Vc(7,mt,3,3,"button",3),A.Wb(),A.Wb(),A.Vc(8,Et,2,1,"div",4),A.Xb(9,"div",5),A.Vc(10,Nt,9,5,"div",6),A.Wb(),A.Wb(),A.Xb(11,"div",7),A.Xb(12,"nz-page-header",2),A.Xb(13,"nz-page-header-title"),A.Xc(14),A.Wb(),A.Wb(),A.Xb(15,"div",8),A.Vc(16,Wt,0,0,"ng-template",null,9,A.Wc),A.Wb(),A.Wb(),A.Wb(),A.Xb(18,"nz-modal",10),A.ec("nzVisibleChange",function(e){return n.isAddGroupModalVisible=e})("nzOnOk",function(){return n.addGroup()})("nzOnCancel",function(){return n.closeAddGroupModal()}),A.Xb(19,"input",11),A.ec("ngModelChange",function(e){return n.groupName=e}),A.Wb(),A.Wb(),A.Xb(20,"nz-modal",12),A.ec("nzVisibleChange",function(e){return n.isMedicineDialogVisible=e})("nzOnCancel",function(){return n.closeMedicinesDialog()}),A.Xb(21,"nz-steps",13),A.Sb(22,"nz-step",14),A.Sb(23,"nz-step",15),A.Wb(),A.Vc(24,Bt,5,3,"div",16),A.Vc(25,Yt,16,10,"div",16),A.Xb(26,"div",17),A.Vc(27,Ht,3,0,"button",18),A.Vc(28,qt,3,1,"button",19),A.Vc(29,$t,3,0,"button",3),A.Wb(),A.Wb()),2&e&&(A.Db(4),A.Yc(A.kc(5,15,"COMMON.INTERVENTION")),A.Db(3),A.rc("ngIf","VIEW"!==n.mode),A.Db(1),A.rc("ngIf","ASSIGN"===n.mode||"EPISODE"===n.mode),A.Db(2),A.rc("ngForOf",n.interventionGroupIds),A.Db(4),A.Yc((null==n.selectedInterventionBlueprint?null:n.selectedInterventionBlueprint.name)||" "),A.Db(4),A.rc("nzVisible",n.isAddGroupModalVisible),A.Db(1),A.rc("ngModel",n.groupName),A.Db(1),A.rc("nzVisible",n.isMedicineDialogVisible)("nzFooter",null),A.Db(1),A.rc("nzCurrent",n.medicineDialogIndex),A.Db(3),A.rc("ngIf","SEARCH"===n.medicineDialogContent),A.Db(1),A.rc("ngIf","SCHEDULE"===n.medicineDialogContent),A.Db(2),A.rc("ngIf",n.medicineDialogIndex>0&&!n.isEditingMedicine),A.Db(1),A.rc("ngIf",n.medicineDialogIndex<1),A.Db(1),A.rc("ngIf",1===n.medicineDialogIndex))},directives:[pt.b,pt.g,pt.d,s.q,s.p,ge.a,B.b,b.d,b.u,b.x,bt.b,bt.a,Ce.a,ye.a,Me.a,Pe,we,Ue,Fe.b,un.a,Ye,qe,$e.a,gt.d,gt.a,gt.c,me.c,me.b,me.a,ht.a,B.c,B.d,fe.a,De.a,P.d,P.a,vt.a],pipes:[w.a,s.e],styles:[".composer-container[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(1,1fr);background-color:var(--neutral-color)}.steps-indicator-container[_ngcontent-%COMP%]{padding:20px;grid-column:1/3;grid-row:1}.interventions-container[_ngcontent-%COMP%]{grid-column:1;min-height:75vh;grid-row:2;background-color:var(--neutral-color);border-right:thin solid #ddd}.sub-headers[_ngcontent-%COMP%]{background:var(--neutral-color-dark);min-height:9.5vh}.interventions-list[_ngcontent-%COMP%]{padding:20px}.intervention-settings-container[_ngcontent-%COMP%]{grid-column:2;grid-row:2;background-color:var(--neutral-color)}.intervention-settings[_ngcontent-%COMP%]{padding:20px}.course-type[_ngcontent-%COMP%]{margin:10px 0 10px 20px}.steps-action[_ngcontent-%COMP%]{margin-top:5%}.steps-action[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:1%}.steps-content[_ngcontent-%COMP%]{margin-top:5%}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),Kt),Zt=function(){return[16,48]};function Qt(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",3),A.Xb(1,"div",4),A.Xb(2,"sub-tenant-select",5),A.ec("onSubTenantSelected",function(e){return A.Lc(t),A.ic().onSubTenantChange(e)}),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.rc("nzGutter",A.xc(4,Zt)),A.Db(2),A.rc("selectedSubTenant",i.subTenantId)("showError",i.showSubTenantToggleError)("disabled","ADD"!=i.mode)}}function ei(e,n){if(1&e){var t=A.Yb();A.Vb(0),A.Xb(1,"app-careplan-header",6),A.ec("courseChange",function(e){return A.Lc(t),A.ic().course=e})("generalEnabledChange",function(e){return A.Lc(t),A.ic().generalEnabled=e})("rpmEnabledChange",function(e){return A.Lc(t),A.ic().rpmEnabled=e})("riEnabledChange",function(e){return A.Lc(t),A.ic().riEnabled=e})("ccmEnabledChange",function(e){return A.Lc(t),A.ic().ccmEnabled=e}),A.Wb(),A.Xb(2,"app-interventions-composer",7),A.ec("modeChange",function(e){return A.Lc(t),A.ic().mode=e})("interventionBluprintsChange",function(e){return A.Lc(t),A.ic().interventionBluprints=e})("groupInterventionsChange",function(e){return A.Lc(t),A.ic().groupInterventions=e})("groupInterventionMapChange",function(e){return A.Lc(t),A.ic().groupInterventionMap=e})("selectedInterventionBlueprintChange",function(e){return A.Lc(t),A.ic().selectedInterventionBlueprint=e})("interventionGroupIdsChange",function(e){return A.Lc(t),A.ic().interventionGroupIds=e})("courseChange",function(e){return A.Lc(t),A.ic().course=e})("careplanBlueprintDTOChange",function(e){return A.Lc(t),A.ic().careplanBlueprintDTO=e}),A.Wb(),A.Ub()}if(2&e){var i=A.ic();A.Db(1),A.rc("course",i.course)("generalEnabled",i.generalEnabled)("rpmEnabled",i.rpmEnabled)("riEnabled",i.riEnabled)("ccmEnabled",i.ccmEnabled)("isEditDisabled","VIEW"===i.mode)("validationErrors",i.validationErrors)("autoCompleteTags",i.autoCompleteTags),A.Db(1),A.rc("mode",i.mode)("interventionBluprints",i.interventionBluprints)("groupInterventions",i.groupInterventions)("groupInterventionMap",i.groupInterventionMap)("selectedInterventionBlueprint",i.selectedInterventionBlueprint)("interventionGroupIds",i.interventionGroupIds)("course",i.course)("careplanBlueprintDTO",i.careplanBlueprintDTO)}}var ni,ti=((ni=function(t){n(r,t);var a=i(r);function r(e,n,t,i,c,o){var s;return u(this,r),(s=a.call(this))._notificationsService=e,s._location=n,s._tagsService=t,s._dataSharingService=i,s._careplansService=c,s._activatedRoute=o,s.mode="ADD",s.interventionBluprints=[],s.groupInterventions=[],s.groupInterventionMap=new Map,s.interventionGroupIds=["DEFAULT"],s.loading=!0,s.course=new D,s.careplanBlueprintDTO=new y,s.caretakerAssignmentDTO=new C,s.generalEnabled=!1,s.rpmEnabled=!1,s.riEnabled=!1,s.ccmEnabled=!1,s.validationErrors=[],s.showSubTenantToggleError=!1,s.autoCompleteTags=new Array,s}return d(r,[{key:"init",value:function(){var e,n;if(null!=this.tenantSettings&&null!=this.tenantSettings.episodeBlueprints&&this.tenantSettings.episodeBlueprints.length>0){var t=this.tenantSettings.episodeBlueprints.filter(function(e){return null!=e&&!e.archived&&"RPM"==e.type});this.rpmEnabled=t.length>0;var i=this.tenantSettings.episodeBlueprints.filter(function(e){return null!=e&&!e.archived&&"HEALTH_SCORE"==e.type});this.riEnabled=i.length>0;var a=this.tenantSettings.episodeBlueprints.filter(function(e){return null!=e&&!e.archived&&"CCM"==e.type});this.ccmEnabled=a.length>0;var r=this.tenantSettings.episodeBlueprints.filter(function(e){return null!=e&&!e.archived&&"GENERAL"==e.type});this.generalEnabled=r.length>0||!this.tenantSettings.episodeBlueprints.length}(null===(n=null===(e=this.tenantSettings)||void 0===e?void 0:e.episodeBlueprints)||void 0===n?void 0:n.length)||(this.generalEnabled=!0)}},{key:"ngOnInit",value:function(){var e=this;this.loadingNewTenant=!0,this._activatedRoute.params.forEach(function(n){e.mode=n.mode.toUpperCase(),e.careplanBlueprintId=n.id}),this._dataSharingService.assignedTenantSettings.pipe(Object(m.a)(this.unsubscribed)).subscribe(function(n){e.tenantConfigMap=n,e.tenantConfigMap.forEach(function(n,t){e.subTenantId=t}),e.onSubTenantChange(e.subTenantId),e.loadingNewTenant=!1}),this.careplanBlueprintId&&(this.getCareplanTemplateById(this.careplanBlueprintId),this.getInterventions(this.careplanBlueprintId)),this.init()}},{key:"onSubTenantChange",value:function(e){this.loadingNewTenant=!0,e&&(localStorage.setItem(O.a.REQUEST_TENANT_IDS,e),this.showSubTenantToggleError=!1,this.subTenantId=e,this.tenantSettings=this.tenantConfigMap.get(this.subTenantId),console.log("HERE"),this.getAllTagsForDropdown(),this.init()),this.loadingNewTenant=!1}},{key:"getAllTagsForDropdown",value:function(){var e=this;this.autoCompleteTags=new Array,this._tagsService.getALLTags("PATIENT,CARE_TAKER,SURVEY,FORM").subscribe(function(n){n.forEach(function(n){e.autoCompleteTags.push(n.name)})})}},{key:"getCareplanTemplateById",value:function(e){var n=this;this._careplansService.getCourseById(e).subscribe(function(e){n.course=e,n.onSubTenantChange(n.course.tenantId),"CLONE"===n.mode&&(n.clonedCareplanName=n.course.name)})}},{key:"getInterventions",value:function(n){var t=this;this._careplansService.getInterventionBlueprintPerCarePlan(n).subscribe(function(n){t.interventionBluprints=n,t.groupInterventions=t.interventionBluprints.filter(function(e){return"GROUP"===e.type});var i,a=e(t.interventionBluprints);try{for(a.s();!(i=a.n()).done;){var r=i.value;"GROUP"!==r.type&&t.appendToInterventionBlueprintGroup(null==r.parentId?"DEFAULT":r.parentId,r)}}catch(c){a.e(c)}finally{a.f()}t.groupInterventionMap.get("DEFAULT")||t.groupInterventionMap.set("DEFAULT",new Array),t.interventionGroupIds=Array.from(t.groupInterventionMap.keys())})}},{key:"appendToInterventionBlueprintGroup",value:function(e,n){var t=this.groupInterventionMap.get(e);void 0===t&&(t=[]),t.push(n),this.groupInterventionMap.set(e,t)}},{key:"validation",value:function(){var e=this._careplansService.validation(this.course,this.mode,null,this.validationErrors);return"CLONE"!==this.mode&&"ADD"!==this.mode||null!=this.subTenantId&&null!=this.subTenantId||(this.showSubTenantToggleError=!0,e=!1),"CLONE"===this.mode?this.clonedCareplanName===this.course.name&&(this._notificationsService.error("Error","Cloned Careplan Template Name Cannot Be Same As The Original One!"),e=!1):"ADD"!==this.mode&&"EDIT"!==this.mode||this.isInterventionsEmpty()&&(this._notificationsService.error("Error","A minimum of one intervention needs to be added to save this template"),e=!1),e}},{key:"saveCareplan",value:function(){if(this.validation())switch(this.mode){case"ADD":this.createNewCareplan();break;case"EDIT":this.updateExistingCareplan();break;case"CLONE":this.cloneCurrentCareplan();break;default:this.goBack()}}},{key:"isInterventionsEmpty",value:function(){return!this.groupInterventionMap||!this.groupInterventionMap.values()||Array.from(this.groupInterventionMap.values()).every(function(e){return 0==(null==e?void 0:e.length)})}},{key:"isValidCareplanBlueprintDTO",value:function(e){var n,t,i,a;return e&&((null===(n=e.addedGroupedInterventions)||void 0===n?void 0:n.length)>0||(null===(t=e.addedInterventions)||void 0===t?void 0:t.length)>0||(null===(i=e.groupedInterventions)||void 0===i?void 0:i.length)>0||(null===(a=e.interventions)||void 0===a?void 0:a.length)>0)}},{key:"createNewCareplan",value:function(){var e=this;localStorage.setItem(O.a.REQUEST_TENANT_IDS,this.subTenantId),this._careplansService.createCourse(this.course).subscribe(function(n){e.createBlueprintDTOForNewCareplan(n.id),e._careplansService.createBulkInterventionsForNewCareplanBlueprint(e.careplanBlueprintDTO).subscribe(function(){e._notificationsService.success("Success","Careplan Template Created Successfully!"),e.goBack()})}),localStorage.removeItem("carePlanTemplates")}},{key:"updateExistingCareplan",value:function(){var e=this;this.createBlueprintDTOForNewCareplan(this.careplanBlueprintId),this.createBlueprintDTOForUpdatingCareplan(),this._careplansService.updateCourse(this.course).subscribe(function(){e._careplansService.updateBulkInterventionsForCareplanBlueprint(e.careplanBlueprintDTO).subscribe(function(){e._notificationsService.success("Success","Careplan Template Updated Successfully!"),e.goBack()})}),localStorage.removeItem("carePlanTemplates")}},{key:"cloneCurrentCareplan",value:function(){var e=this;delete this.course.id,this._careplansService.createCourse(this.course).subscribe(function(n){e.createBlueprintDTOForNewCareplan(n.id),e.createBlueprintDTOForCloningCareplan(),e._careplansService.createBulkInterventionsForNewCareplanBlueprint(e.careplanBlueprintDTO).subscribe(function(){e._notificationsService.success("Success","Careplan Template Created Successfully!"),e.goBack()})}),localStorage.removeItem("carePlanTemplates")}},{key:"createBlueprintDTOForNewCareplan",value:function(e){var n=this;this.careplanBlueprintDTO.interventions=[],this.careplanBlueprintDTO.groupedInterventions=[],this.groupInterventionMap.get("DEFAULT")&&this.groupInterventionMap.get("DEFAULT").forEach(function(t){var i=Object.assign({},t);i.id.length<=10&&!i.createdOn&&!i.updatedOn&&delete i.id,i.ownerId=e,i.careplanBluprintId=e,i.tenantId=n.subTenantId,"REMOTE_PATIENT_MONITORING"===n.course.type&&(i.reviewResponseEnabled=!0,"666"===i.permissions&&(i.permissions="464")),n.careplanBlueprintDTO.interventions.push(i)}),this.groupInterventions||(this.groupInterventions=[]),this.groupInterventions.forEach(function(t){if("DEFAULT"!==t.id){var i=new M;if(i.interventionBluPrintRequestDTO=Object.assign({},t),i.interventionBluPrintRequestDTO.insideGroupedIntervenions=[],!n.groupInterventionMap.get(t.id))return;n.groupInterventionMap.get(t.id).forEach(function(t){var a=Object.assign({},t);a.id.length<=10&&!a.createdOn&&!a.updatedOn&&delete a.id,a.tenantId=n.subTenantId,a.ownerId=e,a.careplanBluprintId=e,"REMOTE_PATIENT_MONITORING"===n.course.type&&(a.reviewResponseEnabled=!0,"666"===a.permissions&&(a.permissions="464")),i.interventionBluPrintRequestDTO.insideGroupedIntervenions.push(a)}),i.interventionBluPrintRequestDTO.id.length<=10&&!i.interventionBluPrintRequestDTO.updatedOn&&!i.interventionBluPrintRequestDTO.createdOn&&delete i.interventionBluPrintRequestDTO.id,i.interventionBluPrintRequestDTO.ownerId=e,i.interventionBluPrintRequestDTO.careplanBluprintId=e,i.interventionBluPrintRequestDTO.tenantId=n.subTenantId,n.careplanBlueprintDTO.groupedInterventions.push(i)}})}},{key:"createBlueprintDTOForUpdatingCareplan",value:function(){var e=this;this.careplanBlueprintDTO.addedGroupedInterventions=[],this.careplanBlueprintDTO.addedInterventions=[];var n=[],t=[];this.careplanBlueprintDTO.groupedInterventions.forEach(function(t){!t.interventionBluPrintRequestDTO.id||t.interventionBluPrintRequestDTO.id.length<=10&&!t.interventionBluPrintRequestDTO.createdOn&&!t.interventionBluPrintRequestDTO.updatedOn?e.careplanBlueprintDTO.addedGroupedInterventions.push(t):n.push(t)}),this.careplanBlueprintDTO.groupedInterventions=n,this.careplanBlueprintDTO.interventions.forEach(function(n){!n.id||n.id.length<=10&&!n.createdOn&&!n.updatedOn?e.careplanBlueprintDTO.addedInterventions.push(n):t.push(n)}),this.careplanBlueprintDTO.interventions=t}},{key:"createBlueprintDTOForCloningCareplan",value:function(){this.careplanBlueprintDTO.interventions.forEach(function(e){delete e.id}),this.careplanBlueprintDTO.groupedInterventions.forEach(function(e){delete e.interventionBluPrintRequestDTO.id,e.interventionBluPrintRequestDTO.insideGroupedIntervenions.forEach(function(e){delete e.id})})}},{key:"goBack",value:function(){this._location.back()}}]),r}(I.a)).\u0275fac=function(e){return new(e||ni)(A.Rb(z.b),A.Rb(s.l),A.Rb(S.a),A.Rb(E.a),A.Rb(T.a),A.Rb(v.a))},ni.\u0275cmp=A.Lb({type:ni,selectors:[["app-careplan-blueprint-composer"]],features:[A.Ab],decls:5,vars:9,consts:[["title","careplans","subProperty","templates","prefix","Assign",3,"defaultTitle","isSearchEnabled","isActionEnabled","actionTitle","action"],["nz-row","","class","sub-tenant-toggle",3,"nzGutter",4,"isAccessAcrossTenantEnabled"],[4,"ngIf"],["nz-row","",1,"sub-tenant-toggle",3,"nzGutter"],["nz-col","","nzSpan","8","nzOffset","16",2,"margin-top","20px","margin-bottom","20px"],["mode","SINGLE",3,"selectedSubTenant","showError","disabled","onSubTenantSelected"],[3,"course","generalEnabled","rpmEnabled","riEnabled","ccmEnabled","isEditDisabled","validationErrors","autoCompleteTags","courseChange","generalEnabledChange","rpmEnabledChange","riEnabledChange","ccmEnabledChange"],[3,"mode","interventionBluprints","groupInterventions","groupInterventionMap","selectedInterventionBlueprint","interventionGroupIds","course","careplanBlueprintDTO","modeChange","interventionBluprintsChange","groupInterventionsChange","groupInterventionMapChange","selectedInterventionBlueprintChange","interventionGroupIdsChange","courseChange","careplanBlueprintDTOChange"]],template:function(e,n){1&e&&(A.Xb(0,"app-header",0),A.ec("action",function(){return n.saveCareplan()}),A.jc(1,"translate"),A.jc(2,"translate"),A.Wb(),A.Vc(3,Qt,3,5,"div",1),A.Vc(4,ei,3,16,"ng-container",2)),2&e&&(A.sc("defaultTitle",A.kc(1,5,"MENU.TEMPLATE")),A.sc("actionTitle",A.kc(2,7,"COMMON.SAVE")),A.rc("isSearchEnabled",!1)("isActionEnabled","VIEW"!==n.mode),A.Db(4),A.rc("ngIf",!n.loadingNewTenant))},directives:[k.a,X.a,s.q,R.c,R.a,N.a,Z,Jt],pipes:[w.a],styles:["[_nghost-%COMP%]{background-color:var(--neutral-color)}.careplan-details-container[_ngcontent-%COMP%]{padding:20px}.input-size[_ngcontent-%COMP%]{width:90%}.sub-tenant-toggle[_ngcontent-%COMP%]{background:#fff;margin:20px;padding-right:30px}"]}),ni),ii=r("cauy"),ai=r("I2os"),ri=function(){var e=function e(){u(this,e)};return e.STRINGS=["COMMON.CAREPLAN","CONFIRMATION","CAREPLAN.START_END_DATE_CANT_BE_EMPTY","CAREPLAN.EXISTING_CAREPLAN_SUSPEND_CONFIRMATION","CAREPLAN.SUCCESSFULLY_ASSIGNED","CAREPLAN.SELECT_CARETAKER_ERROR"],e}(),ci=r("Wfee"),oi=r("ZPpM");function si(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",10),A.Xb(1,"div",11),A.Xb(2,"nz-date-picker",12),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().startDate=e}),A.jc(3,"translate"),A.Wb(),A.Wb(),A.Xb(4,"div",11),A.Xb(5,"nz-date-picker",12),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().endDate=e}),A.jc(6,"translate"),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.Db(2),A.sc("nzPlaceHolder",A.kc(3,8,"COMMON.STARTDATE")),A.rc("nzDisabledDate",i.disabledStartDate)("ngModel",i.startDate)("nzAllowClear",!1),A.Db(3),A.sc("nzPlaceHolder",A.kc(6,10,"COMMON.ENDDATE")),A.rc("nzDisabledDate",i.disabledEndDate)("ngModel",i.endDate)("nzAllowClear",!1)}}function li(e,n){if(1&e){var t=A.Yb();A.Xb(0,"div",10),A.Xb(1,"div",11),A.Xb(2,"nz-date-picker",12),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().startDate=e}),A.jc(3,"translate"),A.Wb(),A.Wb(),A.Xb(4,"div",11),A.Xb(5,"nz-date-picker",12),A.ec("ngModelChange",function(e){return A.Lc(t),A.ic().endDate=e}),A.jc(6,"translate"),A.Wb(),A.Wb(),A.Wb()}if(2&e){var i=A.ic();A.Db(2),A.sc("nzPlaceHolder",A.kc(3,8,"COMMON.STARTDATE")),A.rc("nzDisabledDate",i.disabledStartDate)("ngModel",i.startDate)("nzAllowClear",!1),A.Db(3),A.sc("nzPlaceHolder",A.kc(6,10,"COMMON.ENDDATE")),A.rc("nzDisabledDate",i.disabledEndDate)("ngModel",i.endDate)("nzAllowClear",!1)}}function di(e,n){if(1&e&&(A.Xb(0,"nz-auto-option",13),A.Sb(1,"app-full-name",14),A.Wb()),2&e){var t=n.$implicit;A.rc("nzValue",t),A.Db(1),A.sc("firstName",t.firstName),A.sc("lastName",t.lastName)}}var ui,pi,bi,gi,hi=((ui=function(t){n(r,t);var a=i(r);function r(e,n,t,i,c,o,s,l,d,p){var b;return u(this,r),(b=a.call(this))._location=e,b._userService=n,b._careplansService=t,b._modalService=i,b._datePipe=c,b.translationService=o,b._notificationsService=s,b._careplanEventLogger=l,b._activatedRoute=d,b._dataSharingService=p,b.mode="ASSIGN",b.selectedCaretaker=new ii.a,b.course=new D,b.interventionGroupIds=["DEFAULT"],b.groupInterventions=[],b.interventionBluprints=[],b.groupInterventionMap=new Map,b.caretakerAssignmentDTO=new C,b.caretakers=[],b.showCaretakerAssigner=!1,b.searchCaretakerInput="",b.today=new Date,b.disabledStartDate=function(e){return"ASSIGN"==b.mode?Object(pe.a)(b.today,e)>0||Object(pe.a)(b.endDate,e)<0:Object(pe.a)(b.startDate,e)>0||Object(pe.a)(b.endDate,e)<0},b.disabledEndDate=function(e){return"ASSIGN"==b.mode?Object(pe.a)(b.today,e)>0||Object(pe.a)(b.endDate,e)<0:Object(pe.a)(b.startDate,e)>0||Object(pe.a)(b.endDate,e)<0},b}return d(r,[{key:"dateParser",value:function(e){var n=e.split("-");return new Date(+n[0],+n[1]-1,+n[2])}},{key:"ngOnInit",value:function(){var e,n=this;(e=this.translationService).getMultiple.apply(e,c(ri.STRINGS)).subscribe(function(e){return n.translatedStrings=e}),this._activatedRoute.params.forEach(function(e){n.patientId=e.patientId,n.tenantId=e.tenantId,n.episodeId=e.episodeId,n.careplanBlueprintId=e.id,n.mode=e.mode.toUpperCase()}),localStorage.setItem(O.a.REQUEST_TENANT_IDS,this.tenantId),this.loggedInUser=localStorage.getItem("loggedInUser"),this._activatedRoute.queryParams.subscribe(function(e){n.startDate=new Date((new Date).setHours(0,0,0,0)),n.endDate=Object(be.a)(new Date),n.episodeStartDate=e.episodeStartDate,n.episodeEndDate=e.episodeEndDate||n._datePipe.transform(n.endDate,"yyyy-M-dd"),n.episodeName=e.episodeName,n.episodeBlueprintId=e.episodeBlueprintId,n.episodeStartDate&&new Date(new Date(n.episodeStartDate).setHours(0,0,0,0))>=n.startDate&&(n.startDate=n.dateParser(n.episodeStartDate.toString())),n.episodeEndDate&&(n.endDate=n.dateParser(n.episodeEndDate.toString()))}).unsubscribe(),this.careplanBlueprintId&&(this.getCareplanTemplateById(this.careplanBlueprintId),this.getInterventions(this.careplanBlueprintId))}},{key:"getCareplanTemplateById",value:function(e){var n=this;this._careplansService.getCourseById(e).subscribe(function(e){n.course=e})}},{key:"getInterventions",value:function(n){var t=this;this._careplansService.getInterventionBlueprintPerCarePlan(n).subscribe(function(n){t.interventionBluprints=n,t.groupInterventions=t.interventionBluprints.filter(function(e){return"GROUP"===e.type});var i,a=e(t.interventionBluprints);try{for(a.s();!(i=a.n()).done;){var r=i.value;"GROUP"!==r.type&&t.appendToInterventionBlueprintGroup(null==r.parentId?"DEFAULT":r.parentId,r)}}catch(c){a.e(c)}finally{a.f()}t.groupInterventionMap.get("DEFAULT")||t.groupInterventionMap.set("DEFAULT",new Array),t.interventionGroupIds=Array.from(t.groupInterventionMap.keys())})}},{key:"appendToInterventionBlueprintGroup",value:function(e,n){var t=this.groupInterventionMap.get(e);void 0===t&&(t=[]),t.push(n),this.groupInterventionMap.set(e,t)}},{key:"validator",value:function(){return this.startDate&&this.endDate?this._careplansService.validation(this.course,this.mode,this.groupInterventionMap):(this._notificationsService.error(this.translatedStrings.get("COMMON.CAREPLAN"),this.translatedStrings.get("CAREPLAN.START_END_DATE_CANT_BE_EMPTY")),!1)}},{key:"saveCareplan",value:function(){if(this.validator()&&this.initializeCaretakerDTO())switch(this.initializeCareplanAssignmentDTO(),this.mode){case"ASSIGN":this.assignCareplanToPatient();break;case"EPISODE":this.assignCareplanToEpisode();break;default:this.goBack()}}},{key:"initializeCareplanAssignmentDTO",value:function(){var e=this;this.careplanAssignmentDTO=new ai.a,this.careplanAssignmentDTO.userMedicines=this.userMedicines,this.careplanAssignmentDTO.interventionBlueprintList=[],this.careplanAssignmentDTO.careplanBlueprint=this.course,this.careplanAssignmentDTO.patientId=this.patientId,this.careplanAssignmentDTO.tenantId=localStorage.getItem("loggedInTenant"),this.careplanAssignmentDTO.type=this.course.type,this.careplanAssignmentDTO.startTime=this.startDate.setHours(0,0,0,0),this.careplanAssignmentDTO.endTime=this.endDate.setHours(23,59,59,999),this.careplanAssignmentDTO.startDate=this._datePipe.transform(this.startDate,"yyyy-MM-dd"),this.careplanAssignmentDTO.endDate=this._datePipe.transform(this.endDate,"yyyy-MM-dd"),this.careplanAssignmentDTO.assignedOn=Date.now(),this.careplanAssignmentDTO.careplanBlueprint.assignerId=this.loggedInUser,this.careplanAssignmentDTO.assignerId=this.loggedInUser,this.careplanAssignmentDTO.episodeId="EPISODE"===this.mode?this.episodeId:null,this.careplanAssignmentDTO.episodeName="EPISODE"===this.mode?this.episodeName:null,this.careplanAssignmentDTO.episodeBlueprintId="EPISODE"===this.mode?this.episodeBlueprintId:null,Array.from(this.groupInterventionMap.keys()).forEach(function(n){e.groupInterventionMap.get(n).forEach(function(t){var i=e.processIntervention(t);i.parentId="DEFAULT"===n?null:n,e.careplanAssignmentDTO.interventionBlueprintList.push(i)})}),this.groupInterventions.forEach(function(n){var t=e.processIntervention(n);e.careplanAssignmentDTO.interventionBlueprintList.push(t)})}},{key:"processIntervention",value:function(e){var n=Object.assign({},e);return"REMOTE_PATIENT_MONITORING"===this.course.type&&(n.reviewResponseEnabled=!0,"666"===n.permissions&&(n.permissions="464")),n}},{key:"assignCareplanToPatient",value:function(){var e=this;this._careplansService.getActiveCareplansForAPatient(this.patientId,this.careplanAssignmentDTO.type).subscribe(function(n){null!=n&&n.length>0?e.suspendConfirmationPopup():e._careplansService.assignCareplanToPatient(e.careplanAssignmentDTO).subscribe(function(n){e._careplanEventLogger.episodeCareplanActionEvent("",e.patientId,null==n?void 0:n.id,"careplan_assign_to_patient"),e._notificationsService.success(e.translatedStrings.get("COMMON.CAREPLAN"),e.translatedStrings.get("CAREPLAN.SUCCESSFULLY_ASSIGNED")),e._dataSharingService.triggerAlertRefresh(),e.goBack()})})}},{key:"suspendConfirmationPopup",value:function(){var e=this;this._modalService.confirm({nzTitle:"<i>"+this.translatedStrings.get("CONFIRMATION")+"</i>",nzContent:"<b>"+this.translatedStrings.get("CAREPLAN.EXISTING_CAREPLAN_SUSPEND_CONFIRMATION")+"</b>",nzOnOk:function(){e._careplansService.suspendExistingcareplans(e.patientId).subscribe(function(){e._careplansService.assignCareplanToPatient(e.careplanAssignmentDTO).subscribe(function(){e._notificationsService.success(e.translatedStrings.get("COMMON.CAREPLAN"),e.translatedStrings.get("CAREPLAN.SUCCESSFULLY_ASSIGNED")),e.goBack()})},function(e){console.log(e)})}})}},{key:"assignCareplanToEpisode",value:function(){var e=this;this._careplansService.assignCareplanToPatient(this.careplanAssignmentDTO).subscribe(function(n){e.careplanId=n.id,e._careplanEventLogger.episodeCareplanActionEvent(e.episodeId,e.patientId,e.careplanId,"careplan_assign_to_episode"),e._careplansService.assignCareplanToEpisode(e.careplanId,e.episodeId).subscribe(function(){e._notificationsService.success(e.translatedStrings.get("COMMON.CAREPLAN"),e.translatedStrings.get("CAREPLAN.SUCCESSFULLY_ASSIGNED")),e._dataSharingService.triggerAlertRefresh(),e.goBack()})})}},{key:"initializeCaretakerDTO",value:function(){return this.isCaretakersAvailable?!!(this.selectedCaretaker&&this.selectedCaretaker.tenantId||!this.isCaretakersAvailable)||(this._notificationsService.error(this.translatedStrings.get("COMMON.CAREPLAN"),this.translatedStrings.get("CAREPLAN.SELECT_CARETAKER_ERROR")),!1):(this.showCaretakerAssigner=!0,!1)}},{key:"setCaretakersStatus",value:function(e){this.isCaretakersAvailable=e}},{key:"setCaretaker",value:function(e){this.selectedCaretaker=e,this.searchCaretakerInput="".concat(e.firstName," ").concat(e.lastName)}},{key:"searchCaretaker",value:function(e){var n=this;e&&this._userService.searchCaretakers(e).subscribe(function(e){return n.caretakers=e})}},{key:"assignCaretakerToPatient",value:function(){var e=this;this.caretakerAssignmentDTO.userId=this.patientId,this.caretakerAssignmentDTO.tenantId=this.selectedCaretaker.tenantId,this.caretakerAssignmentDTO.caretakerId=this.selectedCaretaker.id,this._userService.assignCareTaker(this.caretakerAssignmentDTO).subscribe(function(){e.isCaretakersAvailable=!0,e.hideCaretakerAssigner(),e.saveCareplan()})}},{key:"hideCaretakerAssigner",value:function(){this.showCaretakerAssigner=!1}},{key:"setUserMedicine",value:function(e){this.userMedicines=e}},{key:"goBack",value:function(){this._location.back()}}]),r}(I.a)).\u0275fac=function(e){return new(e||ui)(A.Rb(s.l),A.Rb(W.a),A.Rb(T.a),A.Rb(ge.f),A.Rb(s.e),A.Rb(h.a),A.Rb(z.b),A.Rb(Nn.a),A.Rb(v.a),A.Rb(E.a))},ui.\u0275cmp=A.Lb({type:ui,selectors:[["app-careplan-assigner"]],features:[A.Cb([s.e]),A.Ab],decls:15,vars:26,consts:[["title","careplans","defaultTitle","Careplans","prefix","Assign","actionTitle","Assign",3,"isSearchEnabled","action"],["isEditDisabled","true","showCaretakerAssigner","true",3,"course","patientId","courseChange","patientIdChange","caretakerEmitter","caretakerAvailable"],["nz-row","","nzGutter","16","class","careplan-details-container",4,"ngIf"],[3,"mode","interventionBluprints","groupInterventions","groupInterventionMap","selectedInterventionBlueprint","interventionGroupIds","course","patientId","modeChange","interventionBluprintsChange","groupInterventionsChange","groupInterventionMapChange","selectedInterventionBlueprintChange","interventionGroupIdsChange","courseChange","patientIdChange","emitUserMedicine"],[3,"nzVisible","nzTitle","nzVisibleChange","nzOnCancel","nzOnOk"],["nzType","warning","nzShowIcon","",3,"nzMessage"],["nz-input","",3,"placeholder","ngModel","nzAutocomplete","ngModelChange","input"],["nzBackfill","false"],["auto",""],[3,"nzValue",4,"ngFor","ngForOf"],["nz-row","","nzGutter","16",1,"careplan-details-container"],["nz-col","","nzSpan","8"],["nzFormat","MMM d, y",3,"nzDisabledDate","nzPlaceHolder","ngModel","nzAllowClear","ngModelChange"],[3,"nzValue"],[3,"firstName","lastName"]],template:function(e,n){if(1&e&&(A.Xb(0,"app-header",0),A.ec("action",function(){return n.saveCareplan()}),A.Wb(),A.Xb(1,"app-careplan-header",1),A.ec("courseChange",function(e){return n.course=e})("patientIdChange",function(e){return n.patientId=e})("caretakerEmitter",function(e){return n.setCaretaker(e)})("caretakerAvailable",function(e){return n.setCaretakersStatus(e)}),A.Wb(),A.Vc(2,si,7,12,"div",2),A.Vc(3,li,7,12,"div",2),A.Xb(4,"app-interventions-composer",3),A.ec("modeChange",function(e){return n.mode=e})("interventionBluprintsChange",function(e){return n.interventionBluprints=e})("groupInterventionsChange",function(e){return n.groupInterventions=e})("groupInterventionMapChange",function(e){return n.groupInterventionMap=e})("selectedInterventionBlueprintChange",function(e){return n.selectedInterventionBlueprint=e})("interventionGroupIdsChange",function(e){return n.interventionGroupIds=e})("courseChange",function(e){return n.course=e})("patientIdChange",function(e){return n.patientId=e})("emitUserMedicine",function(e){return n.setUserMedicine(e)}),A.Wb(),A.Xb(5,"nz-modal",4),A.ec("nzVisibleChange",function(e){return n.showCaretakerAssigner=e})("nzOnCancel",function(){return n.hideCaretakerAssigner()})("nzOnOk",function(){return n.assignCaretakerToPatient()}),A.jc(6,"translate"),A.Sb(7,"nz-alert",5),A.jc(8,"translate"),A.Sb(9,"nz-divider"),A.Xb(10,"input",6),A.ec("ngModelChange",function(e){return n.selectedCaretaker.fullName=e})("input",function(e){return n.searchCaretaker(null==e.target?null:e.target.value)})("ngModelChange",function(e){return n.setCaretaker(e)}),A.jc(11,"translate"),A.Wb(),A.Xb(12,"nz-autocomplete",7,8),A.Vc(14,di,2,3,"nz-auto-option",9),A.Wb(),A.Wb()),2&e){var t=A.Ic(13);A.rc("isSearchEnabled",!1),A.Db(1),A.rc("course",n.course)("patientId",n.patientId),A.Db(1),A.rc("ngIf","EPISODE"===n.mode),A.Db(1),A.rc("ngIf","ASSIGN"===n.mode),A.Db(1),A.rc("mode",n.mode)("interventionBluprints",n.interventionBluprints)("groupInterventions",n.groupInterventions)("groupInterventionMap",n.groupInterventionMap)("selectedInterventionBlueprint",n.selectedInterventionBlueprint)("interventionGroupIds",n.interventionGroupIds)("course",n.course)("patientId",n.patientId),A.Db(1),A.sc("nzTitle",A.kc(6,20,"CAREPLAN.CARETAKER_ASSIGNER")),A.rc("nzVisible",n.showCaretakerAssigner),A.Db(2),A.sc("nzMessage",A.kc(8,22,"CAREPLAN.ASSIGN_CARETAKER_TO_PROCEED")),A.Db(3),A.sc("placeholder",A.kc(11,24,"SEARCH_CARETAKER")),A.rc("ngModel",n.selectedCaretaker.fullName)("nzAutocomplete",t),A.Db(4),A.rc("ngForOf",n.caretakers)}},directives:[k.a,Z,s.q,Jt,ge.a,ci.a,De.a,B.b,b.d,gt.d,b.u,b.x,gt.a,s.p,R.c,R.a,fe.a,gt.c,oi.a],pipes:[w.a],styles:["[_nghost-%COMP%]{background-color:var(--neutral-color)}.careplan-details-container[_ngcontent-%COMP%]{padding:20px}nz-date-picker[_ngcontent-%COMP%]{width:100%}"]}),ui),vi=function e(){u(this,e)},fi=function e(){u(this,e)},mi=((pi=function(t){n(r,t);var a=i(r);function r(e,n,t,i,c){var o;return u(this,r),(o=a.call(this))._location=e,o._careplansService=n,o._datePipe=t,o._notificationsService=i,o._activatedRoute=c,o.mode="EPISODE",o.course=new fi,o.interventionGroupIds=["DEFAULT"],o.groupInterventions=[],o.interventionBluprints=[],o.groupInterventionMap=new Map,o.careplanBlueprintDTO=new y,o.originalInterventionsMap=new Map,o.originalUserMedicinesMap=new Map,o.isEditCareplanModalVisible=!1,o.removedUserMedicineIds=[],o.originalCareplanDays=0,o.disabledDate=function(e){return Object(pe.a)(o.startDate,e)>0||Object(pe.a)(o.episodeEndDate,e)<0},o}return d(r,[{key:"dateParser",value:function(e){var n=e.split("-");return new Date(+n[0],+n[1]-1,+n[2])}},{key:"ngOnInit",value:function(){var e=this;this._activatedRoute.params.forEach(function(n){e.careplanId=n.id}),this._activatedRoute.queryParams.subscribe(function(n){return e.episodeEndDate=n.episodeEndDate||e._datePipe.transform(e.endDate,"yyyy-MM-dd")}).unsubscribe(),this.loggedInUser=localStorage.getItem("loggedInUser"),this.getCareplanById(this.careplanId),this.getInterventions(this.careplanId)}},{key:"getCareplanById",value:function(e){var n=this;this._careplansService.getAssignedCareplanById(e).subscribe(function(e){n.course=e,n.patientId=n.course.patientId,n.startDate=n.dateParser(n.course.startDate),n.course.endTime=n.course.endTime-1,n.endDate=n.dateParser(n.course.endDate),n.originalCareplanDays=n.course.numOfDays,n.userMedicines=n.course.userMedicines,n.userMedicines.forEach(function(e){n.originalUserMedicinesMap.set(e.id,JSON.parse(JSON.stringify(e)))})})}},{key:"getInterventions",value:function(n){var t=this;this._careplansService.getInterventionsForCarePlan(n).subscribe(function(n){t.originalInterventionsMap=new Map(n.map(function(e){return[e.id,Object.assign({},e)]})),t.interventionBluprints=n,t.groupInterventions=t.interventionBluprints.filter(function(e){return"GROUP"===e.type});var i,a=e(t.interventionBluprints);try{for(a.s();!(i=a.n()).done;){var r=i.value;"GROUP"!==r.type&&t.appendToInterventionBlueprintGroup(null==r.parentId?"DEFAULT":r.parentId,r)}}catch(c){a.e(c)}finally{a.f()}t.groupInterventionMap.get("DEFAULT")||t.groupInterventionMap.set("DEFAULT",new Array),t.interventionGroupIds=Array.from(t.groupInterventionMap.keys())})}},{key:"appendToInterventionBlueprintGroup",value:function(e,n){if("MEDICINE"!==n.type){var t=this.groupInterventionMap.get(e);void 0===t&&(t=[]),t.push(n),this.groupInterventionMap.set(e,t)}}},{key:"showEditCareplanModal",value:function(){this._careplansService.validateSchdeules(this.groupInterventionMap)&&(this.isEditCareplanModalVisible=!0)}},{key:"closeEditCareplanModal",value:function(){this.isEditCareplanModalVisible=!1}},{key:"saveCareplan",value:function(){this.closeEditCareplanModal(),this.initializeCareplanUpdateDTO(),this.saveEditedCareplan()}},{key:"initializeCareplanUpdateDTO",value:function(){this.careplanUpdateDTO=new vi,this.careplanUpdateDTO.addedInterventions=[],this.careplanUpdateDTO.modifiedInterventions=[],this.careplanUpdateDTO.editedUserMedicines=[],this.careplanUpdateDTO.userMedicines=[],this.careplanUpdateDTO.careplanId=this.careplanId,this.careplanUpdateDTO.patientId=this.patientId,this.careplanUpdateDTO.noOfDays=this.course.numOfDays,this.careplanUpdateDTO.reasonForChange=this.reasonForChange,this.careplanUpdateDTO.careplanStartTime=this.course.beginTime,this.careplanUpdateDTO.careplanEndTime=this.endDate.setHours(23,59,59,999),this.careplanUpdateDTO.startDate=this._datePipe.transform(this.course.beginTime,"yyyy-MM-dd"),this.careplanUpdateDTO.endDate=this._datePipe.transform(this.endDate,"yyyy-MM-dd"),this.careplanUpdateDTO.assignerId=this.loggedInUser,this.careplanUpdateDTO.assignedOn=Date.now(),this.careplanUpdateDTO.careplanTitle=this.course.name,this.careplanUpdateDTO.careplanBlueprint=this.course,this.setInterventionsInCareplanDTO(),this.setUserMedicinesInCareplanDTO()}},{key:"setInterventionsInCareplanDTO",value:function(){var e=this;Array.from(this.groupInterventionMap.keys()).forEach(function(n){e.groupInterventionMap.get(n).forEach(function(t){var i=Object.assign({},t);if(i.parentId="DEFAULT"===n?null:n,i.id.length<=10&&(delete i.id,e.careplanUpdateDTO.addedInterventions.push(i)),i.id&&10<i.id.length){var a=e.originalInterventionsMap.get(i.id);JSON.stringify(a)==JSON.stringify(i)&&a.schedules.length===i.schedules.length||e.careplanUpdateDTO.modifiedInterventions.push(i)}"REMOTE_PATIENT_MONITORING"===e.course.type&&(i.reviewResponseEnabled=!0,"666"===i.permissions&&(i.permissions="464"))})}),this.groupInterventions.forEach(function(n){var t=Object.assign({},n);t.id.length<=10&&("REMOTE_PATIENT_MONITORING"===e.course.type&&(t.reviewResponseEnabled=!0,"666"===t.permissions&&(t.permissions="464")),e.careplanUpdateDTO.addedInterventions.push(t))}),this.careplanUpdateDTO.removedInterventions=this.careplanBlueprintDTO.deletedInterventions}},{key:"setUserMedicinesInCareplanDTO",value:function(){var e=this;this.userMedicines.forEach(function(n){n.id&&JSON.stringify(n)!==JSON.stringify(e.originalUserMedicinesMap.get(n.id))?e.careplanUpdateDTO.editedUserMedicines.push(n):n.id||e.careplanUpdateDTO.userMedicines.push(n)}),this.careplanUpdateDTO.removedMedicines=this.removedUserMedicineIds}},{key:"setRemovedUserMedicine",value:function(e){this.removedUserMedicineIds.push(e)}},{key:"saveEditedCareplan",value:function(){var e=this;this._careplansService.editExistingCareplan(this.careplanUpdateDTO).subscribe(function(){e._notificationsService.success("Careplan","Careplan Edited Successfully!"),e.goBack()})}},{key:"setUserMedicine",value:function(e){this.userMedicines=e}},{key:"disableStartDate",value:function(){this._notificationsService.error("Careplan","Start date cannot be modified!"),this.startDate=new Date(this.course.beginTime)}},{key:"goBack",value:function(){this._location.back()}}]),r}(I.a)).\u0275fac=function(e){return new(e||pi)(A.Rb(s.l),A.Rb(T.a),A.Rb(s.e),A.Rb(z.b),A.Rb(v.a))},pi.\u0275cmp=A.Lb({type:pi,selectors:[["app-assigned-careplan-edit"]],features:[A.Cb([s.e]),A.Ab],decls:19,vars:36,consts:[["title","careplans","subProperty","edit","defaultTitle","Assigned Careplans","prefix","Edit",3,"isSearchEnabled","actionTitle","action"],["nz-row","",1,"careplan-details-container"],["nz-col","","nzSpan","8"],["nz-input","",1,"input-size",3,"placeholder","ngModel","ngModelChange"],["disabled","","nz-input","",1,"input-size",3,"placeholder","ngModel","ngModelChange"],["nzFormat","MMM d, y",3,"nzDisabled","nzPlaceHolder","ngModel","nzAllowClear","ngModelChange"],["nzFormat","MMM d, y",3,"nzDisabledDate","nzPlaceHolder","ngModel","nzAllowClear","ngModelChange"],[3,"mode","interventionBluprints","groupInterventions","groupInterventionMap","selectedInterventionBlueprint","interventionGroupIds","course","patientId","careplanBlueprintDTO","medicinesAssigned","modeChange","interventionBluprintsChange","groupInterventionsChange","groupInterventionMapChange","selectedInterventionBlueprintChange","interventionGroupIdsChange","courseChange","patientIdChange","emitUserMedicine","careplanBlueprintDTOChange","medicinesAssignedChange","emitRemovedUserMedicine"],["nzTitle","Please Enter Reason For Editing Of Careplan",3,"nzVisible","nzVisibleChange","nzOnOk","nzOnCancel"],["nz-input","","placeholder","Reason For Updation",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(A.Xb(0,"app-header",0),A.ec("action",function(){return n.showEditCareplanModal()}),A.jc(1,"translate"),A.Wb(),A.Xb(2,"div",1),A.Xb(3,"div",2),A.Xb(4,"input",3),A.ec("ngModelChange",function(e){return n.course.name=e}),A.jc(5,"translate"),A.Wb(),A.Wb(),A.Xb(6,"div",2),A.Xb(7,"input",4),A.ec("ngModelChange",function(e){return n.course.numOfDays=e}),A.jc(8,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(9,"div",1),A.Xb(10,"div",2),A.Xb(11,"nz-date-picker",5),A.ec("ngModelChange",function(e){return n.startDate=e})("ngModelChange",function(){return n.disableStartDate()}),A.jc(12,"translate"),A.Wb(),A.Wb(),A.Xb(13,"div",2),A.Xb(14,"nz-date-picker",6),A.ec("ngModelChange",function(e){return n.endDate=e}),A.jc(15,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(16,"app-interventions-composer",7),A.ec("modeChange",function(e){return n.mode=e})("interventionBluprintsChange",function(e){return n.interventionBluprints=e})("groupInterventionsChange",function(e){return n.groupInterventions=e})("groupInterventionMapChange",function(e){return n.groupInterventionMap=e})("selectedInterventionBlueprintChange",function(e){return n.selectedInterventionBlueprint=e})("interventionGroupIdsChange",function(e){return n.interventionGroupIds=e})("courseChange",function(e){return n.course=e})("patientIdChange",function(e){return n.patientId=e})("emitUserMedicine",function(e){return n.setUserMedicine(e)})("careplanBlueprintDTOChange",function(e){return n.careplanBlueprintDTO=e})("medicinesAssignedChange",function(e){return n.userMedicines=e})("emitRemovedUserMedicine",function(e){return n.setRemovedUserMedicine(e)}),A.Wb(),A.Xb(17,"nz-modal",8),A.ec("nzVisibleChange",function(e){return n.isEditCareplanModalVisible=e})("nzOnOk",function(){return n.saveCareplan()})("nzOnCancel",function(){return n.closeEditCareplanModal()}),A.Xb(18,"input",9),A.ec("ngModelChange",function(e){return n.reasonForChange=e}),A.Wb(),A.Wb()),2&e&&(A.sc("actionTitle",A.kc(1,26,"COMMON.SAVE")),A.rc("isSearchEnabled",!1),A.Db(4),A.sc("placeholder",A.kc(5,28,"COMMON.NAME")),A.rc("ngModel",n.course.name),A.Db(3),A.sc("placeholder",A.kc(8,30,"COMMON.NOOFDAYS")),A.rc("ngModel",n.course.numOfDays),A.Db(4),A.sc("nzPlaceHolder",A.kc(12,32,"COMMON.STARTDATE")),A.rc("nzDisabled",!0)("ngModel",n.startDate)("nzAllowClear",!1),A.Db(3),A.sc("nzPlaceHolder",A.kc(15,34,"COMMON.ENDDATE")),A.rc("nzDisabledDate",n.disabledDate)("ngModel",n.endDate)("nzAllowClear",!1),A.Db(2),A.rc("mode",n.mode)("interventionBluprints",n.interventionBluprints)("groupInterventions",n.groupInterventions)("groupInterventionMap",n.groupInterventionMap)("selectedInterventionBlueprint",n.selectedInterventionBlueprint)("interventionGroupIds",n.interventionGroupIds)("course",n.course)("patientId",n.patientId)("careplanBlueprintDTO",n.careplanBlueprintDTO)("medicinesAssigned",n.userMedicines),A.Db(1),A.rc("nzVisible",n.isEditCareplanModalVisible),A.Db(1),A.rc("ngModel",n.reasonForChange))},directives:[k.a,R.c,R.a,B.b,b.d,b.u,b.x,fe.a,Jt,ge.a],pipes:[w.a],styles:["[_nghost-%COMP%]{background-color:var(--neutral-color);min-height:100%}.careplan-details-container[_ngcontent-%COMP%]{padding:20px}.input-size[_ngcontent-%COMP%], nz-date-picker[_ngcontent-%COMP%]{width:90%}"]}),pi),Ii=r("bA1+"),Ci=r("0W7X"),yi=[{path:"edit-assigned-careplan/:id",component:mi,data:{primaryAction:{feature:{feature:"careplanConfig.enabled"}},secondaryAction:{},privileges:[Ci.a.ASSIGN_CARE_PLAN,Ci.a.REASSIGN_CARE_PLAN,Ci.a.EDIT_CARE_PLAN,Ci.a.SUSPEND_CARE_PLAN],showTenantToggle:!1},canActivate:[f.a,Ii.a]},{path:":mode/:id/:patientId/:tenantId",component:hi,data:{primaryAction:{feature:{feature:"careplanConfig.enabled"}},secondaryAction:{},privileges:[Ci.a.ASSIGN_CARE_PLAN,Ci.a.REASSIGN_CARE_PLAN,Ci.a.EDIT_CARE_PLAN,Ci.a.SUSPEND_CARE_PLAN],showTenantToggle:!1},canActivate:[f.a,Ii.a]},{path:":mode/:id/:patientId/:episodeId/:tenantId",component:hi,data:{primaryAction:{feature:{feature:"careplanConfig.enabled"}},secondaryAction:{},privileges:[Ci.a.ASSIGN_CARE_PLAN,Ci.a.REASSIGN_CARE_PLAN,Ci.a.EDIT_CARE_PLAN,Ci.a.SUSPEND_CARE_PLAN],showTenantToggle:!1},canActivate:[f.a,Ii.a]},{path:":mode/:id",component:ti,data:{primaryAction:{feature:{feature:"careplanConfig.enabled"}},secondaryAction:{},privileges:[Ci.a.ASSIGN_CARE_PLAN,Ci.a.REASSIGN_CARE_PLAN,Ci.a.EDIT_CARE_PLAN,Ci.a.SUSPEND_CARE_PLAN],showTenantToggle:!1},canActivate:[f.a,Ii.a]},{path:":mode",component:ti,data:{primaryAction:{feature:{feature:"careplanConfig.enabled"}},secondaryAction:{},privileges:[Ci.a.ASSIGN_CARE_PLAN,Ci.a.REASSIGN_CARE_PLAN,Ci.a.EDIT_CARE_PLAN,Ci.a.SUSPEND_CARE_PLAN],showTenantToggle:!1},canActivate:[f.a,Ii.a]}],Mi=((gi=function e(){u(this,e)}).\u0275mod=A.Pb({type:gi}),gi.\u0275inj=A.Ob({factory:function(e){return new(e||gi)},imports:[[v.k.forChild(yi)],v.k]}),gi),Di=((bi=function e(n){u(this,e),this.translationService=n,n.setLanguage()}).\u0275mod=A.Pb({type:bi}),bi.\u0275inj=A.Ob({factory:function(e){return new(e||bi)(A.bc(h.a))},imports:[[s.c,l.a,p.a,b.o,g.a,o.a,Mi]]}),bi)},I2os:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var i=function e(){u(this,e)}}}])}();