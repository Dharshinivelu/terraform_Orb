(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{jfod:function(e,t,n){"use strict";n.r(t),n.d(t,"AuthorizationModule",function(){return je});var i=n("Jlwr"),r=n("qQcL"),o=n("bnsq"),s=n("7Xlp"),a=n("igu/"),c=n("jYVc"),l=n("WoUL"),g=n("29Mf"),d=n("4Ign"),u=n("cA1j"),b=n("fXoL"),h=n("tyNb"),p=n("bNXi"),m=n("dEAy");let f=(()=>{class e extends r.a{constructor(e,t,n,i,r,o,s,a,c,l,g,d){super(),this._router=e,this._notificationsService=t,this._applicationInsights=n,this._dataSharingService=i,this._authorizationService=r,this._permissionsService=o,this._translationsService=s,this._featureHighlightService=a,this._modalService=c,this._authorizationEventLogger=l,this._routeReuseHelperService=g,this._staffSessionService=d}ngOnInit(){this._dataSharingService.setTimer({state:"END",start:null,end:null,data:null}),this.logout()}logout(){let e,t;this._modalService.closeAll(),this._authorizationService.archiveSecurityToken().subscribe(),this._permissionsService.setPermissionsForUser(null),this.clearStaffSession(),window.navigator.webdriver||this._applicationInsights.clearUserId(),this._authorizationEventLogger.portalLogoutEvent(),this._routeReuseHelperService.clearAllStoredRoutes(),this.activatedRoute.queryParams.subscribe(e=>{e.returnUrl&&(this.returnUrl=e.returnUrl),e.referrer&&(this.referrer=e.referrer)}),this.clearStorage(),this.clearDataSharingService(),this.setDefaultColorAndFavicon(),this._translationsService.get("COMMON.USER").subscribe(t=>e=t),this._translationsService.get("COMMON.LOGOUT_MESSAGE").subscribe(e=>t=e),this._notificationsService.success(e,t),localStorage.setItem("pageRefresh","true"),this.returnUrl?this._router.navigate(["authorization/login"],{queryParams:{returnUrl:this.returnUrl,referrer:this.referrer}}):this._router.navigate(["authorization/login"])}clearStaffSession(){const e=localStorage.getItem("staffSession");if(!(null==e?void 0:e.length))return;const t=JSON.parse(e);this._staffSessionService.closeStaffSession(t.id).subscribe()}clearStorage(){const e=localStorage.getItem("appVersion");this._featureHighlightService.clearAllItemsInLocalStorageExceptFeatureHighlight(),sessionStorage.clear(),localStorage.setItem("appVersion",e)}clearDataSharingService(){this._dataSharingService.setLoggedIn(!1),this._dataSharingService.setLoggedInUserName(null),this._dataSharingService.featureConfigs.next(null),this._dataSharingService.featureNomenclatures.next(null),this._dataSharingService.tenantSettings.next(null)}setDefaultColorAndFavicon(){const e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("link"),n=document.getElementById("faviconURL");t.id="faviconURL",t.rel="shortcut icon",t.href="/assets/images/favicon.png",n&&e.removeChild(n),e.appendChild(t)}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(h.g),b.Rb(p.b),b.Rb(s.a),b.Rb(a.a),b.Rb(c.a),b.Rb(o.a),b.Rb(l.a),b.Rb(u.a),b.Rb(m.f),b.Rb(g.a),b.Rb(d.a),b.Rb(i.a))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-logout"]],features:[b.Ab],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();n("cnAw");var S=function(e){return e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB",e.OTHER="OTHER",e}({});class v{constructor(){this.platform=S.WEB}}var _=n("PqYM"),R=n("lJxs"),P=n("IzEk"),O=n("w1tV"),E=n("B+r4"),T=n("PTRe"),I=n("3Pt+"),w=n("ofXK"),M=n("eHCX"),C=n("OzZK"),z=n("C2AL"),D=n("RwU8");function y(e,t){1&e&&(b.Vb(0),b.Sb(1,"br"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"label",12),b.Xc(5," The entered OTP is not valid! "),b.Wb(),b.Wb(),b.Wb(),b.Ub())}let A=(()=>{class e{constructor(e,t){this._authorizationService=e,this._modalRef=t,this.time=59,this.submitDisabled=!0,this.showError=!1}ngOnInit(){this.generateOTP()}startTimer(){this.counter=60,this.timerSub&&this.timerSub.unsubscribe(),this.timer$=Object(_.a)(0,1e3).pipe(Object(R.a)(e=>(this.counter--,this.time-e)),Object(P.a)(this.time+1),Object(O.a)()),this.timerSub=this.timer$.subscribe()}generateOTP(){this.startTimer();const e=new v;e.platform=S.WEB,this._authorizationService.generateOTPForUser({userId:this.email,type:"EMAIL",authenticationSource:e,accountType:this.accountType}).subscribe(()=>this.submitDisabled=!1)}verifyOTP(){this.submitDisabled=!0,this.showError=!1;const e=new v;e.platform=S.WEB,this._authorizationService.verifyOTPForUser({userId:this.email,type:"EMAIL",authenticationSource:e,accountType:this.accountType,token:this.otp}).subscribe(()=>{this.submitDisabled=!1,this.close(!0)},()=>{this.submitDisabled=!1,this.showError=!0})}close(e=!1){this._modalRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(c.a),b.Rb(m.e))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-otp-validation"]],inputs:{email:"email",accountType:"accountType"},decls:19,vars:5,consts:[[1,"container"],["nz-row",""],["nz-col","","nzSpan","24"],["nz-input","","placeholder","Enter OTP...","nz-input","","readonly","","onfocus","this.removeAttribute('readonly')","minlength","6","maxlength","6",3,"ngModel","ngModelChange"],[4,"ngIf"],["nz-col","","nzSpan","2"],["nz-typography","","nzType","secondary"],["nz-col","","nzSpan","3"],["nz-button","","nzType","link",3,"disabled","click"],["nz-col","","nzSpan","18",1,"actions"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-button","",3,"click"],["nz-typography","","nzType","danger"]],template:function(e,t){1&e&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"div",2),b.Xb(3,"input",3),b.ec("ngModelChange",function(e){return t.otp=e}),b.Wb(),b.Wb(),b.Wb(),b.Vc(4,y,6,0,"ng-container",4),b.Sb(5,"br"),b.Xb(6,"div",1),b.Xb(7,"div",5),b.Xb(8,"label",6),b.Xc(9),b.Wb(),b.Wb(),b.Xb(10,"div",7),b.Xb(11,"button",8),b.ec("click",function(){return t.generateOTP()}),b.Xc(12,"Resend"),b.Wb(),b.Wb(),b.Xb(13,"div",9),b.Xb(14,"button",10),b.ec("click",function(){return t.verifyOTP()}),b.Xc(15,"Verify"),b.Wb(),b.Xc(16," \xa0\xa0 "),b.Xb(17,"button",11),b.ec("click",function(){return t.close()}),b.Xc(18,"Close"),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.Db(3),b.rc("ngModel",t.otp),b.Db(1),b.rc("ngIf",t.showError),b.Db(5),b.Zc("00:",t.counter,""),b.Db(2),b.rc("disabled",0<t.counter),b.Db(3),b.rc("disabled",t.submitDisabled))},directives:[E.c,E.a,T.b,I.d,I.q,I.p,I.u,I.x,w.q,M.a,C.a,z.a,D.a],styles:[".container[_ngcontent-%COMP%]{padding-top:0!important}.actions[_ngcontent-%COMP%]{text-align:right}label[_ngcontent-%COMP%]{position:relative;top:5px}"]}),e})();var W=n("W0aR");let X=(()=>{class e{constructor(e){this._tenantConfigService=e,this.clientIdClientNameMap=new Map([["integratedtelehealthservices","5fb7e57e69175c000165ec47"],["uborarpm","5bffc2c45a223dc81c6620b3"],["cooey","5a0968f4aa23a5807f6c0f9e"],["cooeyhealth","5a0968f4aa23a5807f6c0f9e"],["orbhealth","638f12c949b73b759f89c95d"]])}getClientFromHostName(){return location.hostname.split(".")[1]}getClientId(){const e=this.getClientFromHostName();return this.clientIdClientNameMap.get(e)||this.clientIdClientNameMap.get("cooeyhealth")}getClientConfig(){return this.clientConfig$||(this.clientConfig$=this._tenantConfigService.getConfigByTenantId(this.getClientId())),this.clientConfig$}}return e.\u0275fac=function(t){return new(t||e)(b.bc(W.a))},e.\u0275prov=b.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=n("VGjC");class x{constructor(){}}var N=n("bp6e"),k=n("yWgs"),F=n("BoNt"),U=n("0+cO"),V=n("NFKh"),j=n("jZiR");let G=(()=>{class e{constructor(e){this._modalRef=e}ngOnInit(){this.username=localStorage.getItem("loggedInUserName")}continue(){this._modalRef.close("CONTINUE")}logout(){this._modalRef.close("LOGOUT")}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(m.e))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-login-validation"]],decls:13,vars:5,consts:[["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nz-col","",2,"text-align","center",3,"nzSpan"],["nz-button","","nzType","primary",3,"click"],["nz-col","",2,"display","flex","align-items","center","flex-direction","row",3,"nzSpan"],["nz-button","","nzType","default","nzDanger","",3,"click"]],template:function(e,t){1&e&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"p"),b.Xc(3," You are signed in as "),b.Xb(4,"strong"),b.Xc(5),b.Wb(),b.Xc(6,". Do you want to continue? "),b.Wb(),b.Wb(),b.Xb(7,"div",2),b.Xb(8,"button",3),b.ec("click",function(){return t.continue()}),b.Xc(9,"Stay signed in"),b.Wb(),b.Wb(),b.Xb(10,"div",4),b.Xb(11,"button",5),b.ec("click",function(){return t.logout()}),b.Xc(12,"Sign out"),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.rc("nzGutter",64),b.Db(1),b.rc("nzSpan",24),b.Db(4),b.Yc(t.username),b.Db(2),b.rc("nzSpan",12),b.Db(3),b.rc("nzSpan",12))},directives:[E.c,E.a,C.a,D.a,z.a],styles:[".vertical-center-modal{display:flex;align-items:center;justify-content:center}  .vertical-center-modal .ant-modal{top:0}"]}),e})();var q=n("2lmJ"),B=n("zM63"),Y=n("PScX"),Z=n("ocnv");let H=(()=>{class e{constructor(e){"button"===e.nativeElement.localName?e.nativeElement.setAttribute("style","height: 60px; text-align: center; border-radius: 10px; font: normal normal bold 18px/24px Nunito;"):"input"===e.nativeElement.localName?e.nativeElement.setAttribute("style","height: 60px;  text-align: left; padding: 10px 0px 10px 15px; border: none; border-radius: 10px; font: normal normal normal 20px/27px Nunito; \n      color: #0F2015; background-color: var(--neutral-color);"):"nz-select"===e.nativeElement.localName&&e.nativeElement.setAttribute("style","height: 60px;  text-align: left; font: normal normal normal 20px/27px Nunito; \n      color: #0F2015; background-color: var(--neutral-color);")}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(b.l))},e.\u0275dir=b.Mb({type:e,selectors:[["","xlSize",""]]}),e})();var J=n("glKu"),$=n("dRHE");function K(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"COMMON.REQUIRED")," "))}function Q(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function ee(e,t){if(1&e&&(b.Vc(0,K,3,3,"ng-container",16),b.Vc(1,Q,3,3,"ng-container",16)),2&e){const e=t.$implicit;b.rc("ngIf",e.hasError("required")),b.Db(1),b.rc("ngIf",e.hasError("email"))}}function te(e,t){1&e&&b.Sb(0,"app-icons",17)}function ne(e,t){if(1&e){const e=b.Yb();b.Xb(0,"app-icons",18),b.ec("click",function(){b.Lc(e);const t=b.ic(2);return t.passwordVisible=!t.passwordVisible}),b.Wb()}if(2&e){const e=b.ic(2);b.rc("color",e.passwordVisible?"#a7c853":"#8A8A8A")}}const ie=function(e){return{"background-image":e}};function re(e,t){if(1&e){const e=b.Yb();b.Xb(0,"div",1),b.Sb(1,"div",2),b.Xb(2,"div",3),b.Xb(3,"h2",4),b.Xc(4),b.jc(5,"translate"),b.Wb(),b.Xb(6,"form",5),b.ec("ngSubmit",function(){return b.Lc(e),b.ic().submitForm()}),b.Xb(7,"nz-form-item"),b.Xb(8,"nz-form-control",6),b.Xb(9,"nz-input-group",7),b.Xb(10,"input",8),b.ec("ngModelChange",function(){return b.Lc(e),b.ic().updateValidators()}),b.jc(11,"translate"),b.Wb(),b.Wb(),b.Vc(12,ee,2,2,"ng-template",null,9,b.Wc),b.Wb(),b.Vc(14,te,1,0,"ng-template",null,10,b.Wc),b.Wb(),b.Sb(16,"br"),b.Xb(17,"nz-form-item"),b.Xb(18,"nz-form-control",6),b.jc(19,"translate"),b.Xb(20,"nz-input-group",7),b.Sb(21,"input",11),b.jc(22,"translate"),b.Wb(),b.Wb(),b.Vc(23,ne,1,1,"ng-template",null,12,b.Wc),b.Wb(),b.Xb(25,"nz-form-item"),b.Xb(26,"nz-form-control"),b.Xb(27,"a",13),b.ec("click",function(t){return b.Lc(e),b.ic().gotoRecoverPassword(t)}),b.Xc(28),b.jc(29,"translate"),b.Wb(),b.Xb(30,"button",14),b.Xc(31),b.jc(32,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(33,"h4"),b.Xc(34),b.jc(35,"translate"),b.Sb(36,"br"),b.Xb(37,"a",15),b.Xc(38),b.jc(39,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&e){const e=b.Ic(13),t=b.Ic(15),n=b.Ic(24),i=b.ic();b.Db(1),b.rc("ngStyle",b.yc(36,ie,"url("+i.bgImage+")")),b.Db(3),b.Yc(b.kc(5,20,"COMMON.LOGIN")),b.Db(2),b.rc("formGroup",i.loginForm),b.Db(2),b.rc("nzErrorTip",e),b.Db(1),b.rc("nzSuffix",t),b.Db(1),b.sc("placeholder",b.kc(11,22,"COMMON.EMAIL")),b.Db(8),b.sc("nzErrorTip",b.kc(19,24,"COMMON.REQUIRED")),b.Db(2),b.rc("nzSuffix",n),b.Db(1),b.sc("placeholder",b.kc(22,26,"COMMON.PASSWORD")),b.rc("type",i.passwordVisible?"text":"password"),b.Db(7),b.Zc(" ",b.kc(29,28,"COMMON.FORGOT_PASSWORD")," ? "),b.Db(2),b.rc("nzType","primary")("nzLoading",i.progress)("nzSize","large"),b.Db(1),b.Zc(" ",b.kc(32,30,"COMMON.LOGIN")," "),b.Db(3),b.bd("\xa9 ",b.kc(35,32,"COPYWRITE")," ",i.currentYear," ",i.copyright," "),b.Db(3),b.rc("href",null==i.clientConfig?null:i.clientConfig.termsURL,b.Oc),b.Db(1),b.Zc(" ",b.kc(39,34,"COMMON.TERMS_PF_SERVICE")," ")}}let oe=(()=>{class e extends r.a{constructor(e,t,n,i,r,o,s,a,c,l,g,d,u,b,h,p,m,f,_,R,P){super(),this._router=e,this._authorizationService=t,this._tenantConfig=n,this._dataSharingService=i,this._notificationsService=r,this._fb=o,this._permissionsService=s,this._authorizationEventLogger=a,this._translationsService=c,this._sitesService=l,this._storeService=g,this._usersService=d,this._ngProgress=u,this._securityTokenHelperService=b,this._clientIdentificationService=h,this.permissionHelper=p,this._modalService=m,this._staffSessionService=f,this._messageService=_,this._whitelabelService=R,this._staffService=P,this.progress=!1,this.createSessionRequest=new x,this.submitForm=()=>{this.loginForm.controls.email.setValidators(I.D.email),this.loginForm.controls.email.updateValueAndValidity();for(const e in this.loginForm.controls)this.loginForm.controls[e].markAsDirty(),this.loginForm.controls[e].updateValueAndValidity();if(this.loginForm.valid){this.createSessionRequest.email=this.loginForm.value.email,this.createSessionRequest.encryptedPassword=this.encryptPassword(JSON.parse(JSON.stringify(this.createSessionRequest.email)),this.loginForm.value.password);const e=new v;e.platform=S.WEB,this.createSessionRequest.authenticationSource=e,this.login()}},this.passwordVisible=!1,this.currentYear=(new Date).getFullYear();const O=new Map([["638f12c949b73b759f89c95d","/assets/images/login-orb-bg.jpeg"]]),E=new Map([["5fb7e57e69175c000165ec47","Integrated Tele Health Services"],["5bffc2c45a223dc81c6620b3","Ubora RPM"],["638f12c949b73b759f89c95d","Orb Health"]]);this._clientIdentificationService.getClientConfig().subscribe(e=>{this.bgImage=O.get(null==e?void 0:e.tenantId)||"/assets/images/login-bg.jpeg",this.copyright=E.get(null==e?void 0:e.tenantId)||"Cooey Health",this.clientConfig=e,this._whitelabelService.initializeWithConfig(e)})}ngOnInit(){!!localStorage.getItem("accessToken")&&this._router.navigate(["dashboard"]),this.activatedRoute.queryParams.subscribe(e=>{this.returnUrl=e.returnUrl?e.returnUrl:"dashboard"}),this.initializeLoginForm()}initializeLoginForm(){this.loginForm=this._fb.group({email:[null,[I.D.required]],password:[null,[I.D.required]]})}updateValidators(){this.loginForm.controls.email.clearValidators(),this.loginForm.controls.email.setValidators(I.D.required),this.loginForm.controls.email.updateValueAndValidity()}encryptPassword(e,t){var n;16<=(null==e?void 0:e.length)?e=null==e?void 0:e.substring(0,16):15>(null==e?void 0:e.length)?e+="1234567891234567".substring(0,16-(null==e?void 0:e.length)):e||(e="1234567891234567");const i=V.enc.Latin1.parse(e),r=V.enc.Latin1.parse(e);return null===(n=V.AES.encrypt(t,i,{iv:r,mode:V.mode.CBC,padding:V.pad.ZeroPadding}))||void 0===n?void 0:n.toString()}login(){this.progress=!0,this.createSessionRequest.type="TENANT",this.validateExistingLogins()}userLogin(){this.progress=!0,this._authorizationService.logInUser(this.createSessionRequest).subscribe(e=>{const t=this._securityTokenHelperService.decodeToken(null==e?void 0:e.accessToken);t["2FA"]?this.otpValidation(t,null==e?void 0:e.accessToken,null==e?void 0:e.refreshToken):this.postLoginProcessing(t,null==e?void 0:e.accessToken,null==e?void 0:e.refreshToken)},()=>{this._notificationsService.error("Login","We do not recognise this email or password!"),this.progress=!1,this._ngProgress.ref().complete()})}validateExistingLogins(){localStorage.getItem("accessToken")&&localStorage.getItem("refreshToken")&&localStorage.getItem("sessionToken")&&localStorage.getItem("loggedInUser")?this._modalService.create({nzContent:G,nzWrapClassName:"vertical-center-modal",nzFooter:null,nzTitle:null,nzClosable:!1,nzMaskClosable:!1}).afterClose.subscribe(e=>{"CONTINUE"==e?location.reload():(this._router.navigate(["authorization/logout"]),localStorage.setItem("pageRefresh","true"))}):this.userLogin()}otpValidation(e,t,n){this._modalService.create({nzTitle:"OTP Validation",nzFooter:null,nzCloseIcon:null,nzClosable:!1,nzContent:A,nzComponentParams:{email:this.createSessionRequest.email,accountType:e.accountType}}).afterClose.subscribe(i=>{i?this.postLoginProcessing(e,t,n):(this._notificationsService.error("Login","OTP verification failed, please try again!"),this.progress=!1,this._ngProgress.ref().complete())})}postLoginProcessing(e,t,n){this.setSessionDataToLocalStorage(e,t,n),this._permissionsService.fetchUserPermissions().subscribe(t=>{localStorage.setItem("permissionToken",null==t?void 0:t.permissionsToken),this.fetchAllAssignedTenantConfigsForUser(),this.fetchAdditionalConfigsForUser(null==e?void 0:e.userId),window.navigator.webdriver||this._authorizationEventLogger.setUserId(null==e?void 0:e.userId),this._authorizationEventLogger.portalLoginEvent()}),this._staffSessionService.initiateStaffSession().subscribe(e=>{(null==e?void 0:e.olderSessionsTerminated)&&this._messageService.warning("You had an active session already which has now been terminated!",{nzDuration:1e4}),localStorage.setItem("staffSession",JSON.stringify(e))})}fetchAdditionalConfigsForUser(e){this._tenantConfig.getConfigSetting().subscribe(t=>{this.setTenantConfigDataInLocalStorage(t),this._permissionsService.loadUserRolePermissions(),this._usersService.getUser(e).subscribe(e=>{this.getUserPermissions(t,e)})})}fetchAllAssignedTenantConfigsForUser(){this._tenantConfig.getAllAssignedTenantConfigSettings().subscribe(e=>{let t=new Map;e.result.forEach(e=>t.set(e.tenantId,e)),console.log("Config Map : ",t),this._dataSharingService.assignedTenantSettings.next(t),1===(null==t?void 0:t.size)&&this._dataSharingService.triggerSubTenantChange(t.keys().next().value)})}getUserPermissions(e,t){this.setLoggedInUser(t),this.setLanguage(),this.setSitesToSessionStorage(null==e?void 0:e.tenantName),this.setDataInDataSharingService(e),this.permissionHelper.getAllPermissionStrings(),this.progress=!1,this.navigateUser(),this.progress=!1,this._ngProgress.ref().complete()}setSessionDataToLocalStorage(e,t,n){localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",n),localStorage.setItem("sessionToken",null==e?void 0:e.sessionId),localStorage.setItem("loggedInUser",null==e?void 0:e.userId),localStorage.setItem("loggedInTenant",null==e?void 0:e.tenantId),localStorage.setItem("loggedInUserAccountType",null==e?void 0:e.accountType),localStorage.setItem("loggedInUserEmail",this.createSessionRequest.email),localStorage.setItem("loggedInUserBoundary",null==e?void 0:e.accessBoundary),localStorage.setItem("loggedInUserAssignedTenants",null==e?void 0:e.assignedSubTenants.join()),this._staffService.fetchAssignedTenants().subscribe(e=>{e&&e.result.forEach(e=>{localStorage.setItem(e.id,e.name)})})}setDataInDataSharingService(e){this._dataSharingService.featureConfigs.next(e.featureConfigs),this._dataSharingService.featureNomenclatures.next(e.featureNomenclatures),this._dataSharingService.tenantSettings.next(e),this._dataSharingService.setLoggedIn(!0),this.fetchAllAssignedTenantConfigsForUser()}setTenantConfigDataInLocalStorage(e){var t,n,i,r;localStorage.setItem("logoUrl",e.logoURL||"/assets/images/logo.png"),localStorage.setItem("faviconUrl",e.faviconURL||"/assets/images/favicon.png"),localStorage.setItem("tenantAnalyticsReportEnabled",null===(n=null===(t=null==e?void 0:e.reportConfig)||void 0===t?void 0:t.analyticsReportEnabled)||void 0===n?void 0:n.toString()),localStorage.setItem("tenantDeviceOrderEnabled",null===(r=null===(i=null==e?void 0:e.deviceConfig)||void 0===i?void 0:i.deviceOrderEnabled)||void 0===r?void 0:r.toString()),localStorage.setItem("loggedInTenantName",null==e?void 0:e.tenantName),this.setFavicon(),e.configColor&&localStorage.setItem("primaryColor",e.configColor.primaryColor)}setFavicon(){document.querySelector("#faviconURL").href=localStorage.getItem("faviconUrl")}setLoggedInUser(e){var t,n,i;const r=null===(t=null==e?void 0:e.roles)||void 0===t?void 0:t.filter(e=>e.type&&e.defaultRole);localStorage.setItem("loggedInUserRole",(null===(n=r[0])||void 0===n?void 0:n.type)||"TENANT_ADMIN"),localStorage.setItem("loggedInUserRoleName",null===(i=r[0])||void 0===i?void 0:i.name),localStorage.setItem("loggedInUserName",e.fullName),this._dataSharingService.setLoggedInUserName(e.fullName)}setLanguage(){const e=sessionStorage.getItem("en"),t=sessionStorage.getItem("ja"),n=sessionStorage.getItem("ko");e||t||n||this._translationsService.setLanguage()}setSitesToSessionStorage(e){this._sitesService.getAllSites(0,999,null,!1).subscribe(e=>{this._storeService.setSites(null==e?void 0:e.result)}),this._sitesService.getAllSites(0,999,null,!1,localStorage.getItem("loggedInUserAssignedTenants")).subscribe(e=>{this._storeService.setAllTenantSites(null==e?void 0:e.result)})}gotoRecoverPassword(e){this._router.navigate(["authorization/forgot-password"]),null==e||e.preventDefault()}navigateUser(){this._router.navigate([this.returnUrl])}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(h.g),b.Rb(c.a),b.Rb(W.a),b.Rb(a.a),b.Rb(p.b),b.Rb(I.h),b.Rb(o.a),b.Rb(g.a),b.Rb(l.a),b.Rb(F.a),b.Rb(N.a),b.Rb(L.a),b.Rb(B.a),b.Rb(k.a),b.Rb(X),b.Rb(U.a),b.Rb(m.f),b.Rb(i.a),b.Rb(Y.e),b.Rb(j.a),b.Rb(q.a))},e.\u0275cmp=b.Lb({type:e,selectors:[["login"]],features:[b.Ab],decls:1,vars:1,consts:[["nz-row","","id","login-container",4,"ngIf"],["nz-row","","id","login-container"],["nz-col","","nzSpan","16","id","bg-container",3,"ngStyle"],["nz-col","","nzSpan","8","id","form-container"],["nz-typography","","nzType","success"],["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],[3,"nzSuffix"],["type","text","nz-input","","formControlName","email",3,"placeholder","ngModelChange"],["emailErrors",""],["emailSuffix",""],["nz-input","","formControlName","password",3,"type","placeholder"],["passwordSuffix",""],["href","",3,"click"],["xlSize","","nz-button","",3,"nzType","nzLoading","nzSize"],["target","_blank",3,"href"],[4,"ngIf"],["name","email","color","#8A8A8A","altColor","#8A8A8A","size","14px"],["name","view","size","14px",3,"color","click"]],template:function(e,t){1&e&&b.Vc(0,re,40,38,"div",0),2&e&&b.rc("ngIf",t.clientConfig)},directives:[w.q,E.c,E.a,w.r,M.a,I.F,I.v,Z.b,I.m,Z.c,Z.a,z.a,T.c,T.d,T.b,I.d,I.u,I.k,C.a,D.a,H,J.a],pipes:[$.a],styles:["#login-container[_ngcontent-%COMP%]{height:100vh;background-color:var(--neutral-color)}#form-container[_ngcontent-%COMP%]{height:100vh;background:var(--neutral-color);padding:5%}#bg-container[_ngcontent-%COMP%]{height:100vh;background-size:cover}#bg-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%}h2[_ngcontent-%COMP%]{margin-top:30%}nz-input-group[_ngcontent-%COMP%]{height:50px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey);border-radius:5px;font:normal normal 700 14px Nunito}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:active, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:hover{box-shadow:inset 0 0 0 30px #fff!important;-webkit-box-shadow:inset 0 0 0 30px #fff!important;font-weight:700;color:#0f2015}button[_ngcontent-%COMP%]{margin-top:100px}button[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{display:block;text-align:center;position:absolute;bottom:15px;left:0}@media only screen and (max-width:1366px){button[_ngcontent-%COMP%]{margin-top:50px}}@media only screen and (max-width:800px){h4[_ngcontent-%COMP%]{font-size:12px}button[_ngcontent-%COMP%]{margin-top:50px}}@media screen and (orientation:portrait){#bg-container[_ngcontent-%COMP%], #form-container[_ngcontent-%COMP%]{height:50vh;top:24vh}h2[_ngcontent-%COMP%]{margin-top:0}}"]}),e})();var se=n("SxV6"),ae=n("AytR"),ce=n("tk/3");let le=(()=>{class e{constructor(e,t){this._http=e,this.router=t,this.rootUrl=ae.g.url+"/v3/users/password"}validateResetToken(e){return this._http.get(`${this.rootUrl}/reset-token/${e}/validation`,{observe:"response"}).pipe(Object(se.a)())}changePassword(e,t){return this._http.post(this.rootUrl,{newPassword:t,resetToken:e},{observe:"response",responseType:"text"}).pipe(Object(se.a)())}requestResetByMail(e){return this._http.post(`${this.rootUrl}/reset-token`,{resetType:"EMAIL",value:e},{observe:"response"}).pipe(Object(se.a)())}redirectToLoginPage(){this.router.navigate(["authorization/login"])}redirectToForgotPasswordExpiredPage(){this.router.navigate(["authorization/forgot-password-link-expired"])}}return e.\u0275fac=function(t){return new(t||e)(b.bc(ce.c),b.bc(h.g))},e.\u0275prov=b.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ge=n("l5mm");let de=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}ngAfterViewInit(){this.timerSubscription=Object(ge.a)(1e3).subscribe(e=>{0!=this.secondsToRedirect?this.secondsToRedirect-=1:this.redirect()})}redirect(){this.router.navigate([this.redirectPage])}ngOnDestroy(){this.timerSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(h.g))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-email-sent-redirect"]],inputs:{secondsToRedirect:"secondsToRedirect",redirectPage:"redirectPage"},decls:10,vars:10,consts:[["size","80px","name","emailSent"],["nz-typography",""]],template:function(e,t){1&e&&(b.Sb(0,"app-icons",0),b.Xb(1,"h1",1),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h2",1),b.Xc(5),b.jc(6,"translate"),b.Xb(7,"u"),b.Xc(8),b.jc(9,"translate"),b.Wb(),b.Wb()),2&e&&(b.Db(2),b.Zc(" ",b.kc(3,4,"COMMON.EMAIL_SENT_SUCCESS"),""),b.Db(3),b.Zc("",b.kc(6,6,"COMMON.REDIRECT_IN")," "),b.Db(3),b.ad("",t.secondsToRedirect," ",b.kc(9,8,"COMMON.SECONDS"),""))},directives:[J.a,M.a],pipes:[$.a],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}"]}),e})(),ue=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}ngAfterViewInit(){this.timerSubscription=Object(ge.a)(1e3).subscribe(e=>{0!=this.secondsToRedirect?this.secondsToRedirect-=1:this.redirect()})}redirect(){this.router.navigate([this.redirectPage])}ngOnDestroy(){this.timerSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(h.g))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-email-sent-fail-redirect"]],inputs:{secondsToRedirect:"secondsToRedirect",redirectPage:"redirectPage"},decls:10,vars:10,consts:[["size","80px","name","emailSentFailed"],["nz-typography",""]],template:function(e,t){1&e&&(b.Sb(0,"app-icons",0),b.Xb(1,"h1",1),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h2",1),b.Xc(5),b.jc(6,"translate"),b.Xb(7,"u"),b.Xc(8),b.jc(9,"translate"),b.Wb(),b.Wb()),2&e&&(b.Db(2),b.Zc(" ",b.kc(3,4,"COMMON.EMAIL_SENT_FAIL_ALERT"),""),b.Db(3),b.Zc("",b.kc(6,6,"COMMON.REDIRECT_IN")," "),b.Db(3),b.ad("",t.secondsToRedirect," ",b.kc(9,8,"COMMON.SECONDS"),""))},directives:[J.a,M.a],pipes:[$.a],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}h1[_ngcontent-%COMP%]{color:#ff3939!important}"]}),e})();function be(e,t){1&e&&b.Sb(0,"app-email-sent-redirect",2),2&e&&b.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function he(e,t){1&e&&b.Sb(0,"app-email-sent-fail-redirect",2),2&e&&b.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function pe(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function me(e,t){if(1&e&&b.Vc(0,pe,3,3,"ng-container",1),2&e){const e=b.ic(2);let t=null;b.rc("ngIf",(null==(t=e.forgotPasswordForm.get("email"))?null:t.dirty)&&(null==(t=e.forgotPasswordForm.get("email"))?null:t.errors))}}function fe(e,t){if(1&e){const e=b.Yb();b.Xb(0,"div"),b.Xb(1,"h1",3),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h2",3),b.Xc(5),b.jc(6,"translate"),b.Wb(),b.Xb(7,"form",4),b.ec("ngSubmit",function(){return b.Lc(e),b.ic().requestResetByMail()}),b.Xb(8,"nz-form-item"),b.Xb(9,"nz-form-control",5),b.Xb(10,"nz-input-group"),b.Xb(11,"input",6),b.ec("ngModelChange",function(t){return b.Lc(e),b.ic().resetMailId=t}),b.jc(12,"translate"),b.Wb(),b.Wb(),b.Vc(13,me,1,1,"ng-template",null,7,b.Wc),b.Wb(),b.Wb(),b.Sb(15,"br"),b.Xb(16,"nz-form-item"),b.Xb(17,"nz-form-control"),b.Xb(18,"button",8),b.Xc(19),b.jc(20,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Xb(21,"h4",3),b.Xc(22),b.jc(23,"translate"),b.Wb(),b.Wb(),b.Wb()}if(2&e){const e=b.Ic(14),t=b.ic();b.Db(2),b.Zc(" ",b.kc(3,8,"FORGOT_PASSWORD.TITLE"),""),b.Db(3),b.Yc(b.kc(6,10,"FORGOT_PASSWORD.ENTER_MAIL_MESSAGE")),b.Db(2),b.rc("formGroup",t.forgotPasswordForm),b.Db(2),b.rc("nzErrorTip",e),b.Db(2),b.sc("placeholder",b.kc(12,12,"FORGOT_PASSWORD.EMAIL_INPUT_PLACEHOLDER")),b.rc("ngModel",t.resetMailId),b.Db(8),b.Zc(" ",b.kc(20,14,"FORGOT_PASSWORD.SEND_INSTRUCTIONS")," "),b.Db(3),b.Yc(b.kc(23,16,"FORGOT_PASSWORD.CONTACT_SUPPORT_TEAM_TAILNOTE"))}}let Se=(()=>{class e{constructor(e,t,n){this.translationService=e,this.resetPasswordService=t,this.formBuilder=n}ngOnInit(){this.state="initial",this.redirectPage="authorization/login",this.translationService.getMultiple("COMMON.EMAIL_SENT_SUCCESS","COMMON.EMAIL_SENT_FAIL_ALERT").subscribe(e=>this.translatedStrings=e),this.initializeForgotPasswordForm()}initializeForgotPasswordForm(){this.forgotPasswordForm=this.formBuilder.group({email:[null,[I.D.email,I.D.required]]})}requestResetByMail(){for(const e in this.forgotPasswordForm.controls)this.forgotPasswordForm.controls[e].markAsDirty(),this.forgotPasswordForm.controls[e].updateValueAndValidity();this.forgotPasswordForm.valid&&this.resetPasswordService.requestResetByMail(this.resetMailId).subscribe(e=>{this.state=200==e.status?"emailSent":"emailSentFail"},e=>{this.state="emailSentFail"})}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(l.a),b.Rb(le),b.Rb(I.h))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-forgot-password"]],decls:3,vars:3,consts:[[3,"secondsToRedirect","redirectPage",4,"ngIf"],[4,"ngIf"],[3,"secondsToRedirect","redirectPage"],["nz-typography",""],["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["xlSize","","formControlName","email","nz-input","","name","email","type","email","id","email","required","",3,"placeholder","ngModel","ngModelChange"],["errorMessage",""],["xlSize","","nz-button","","nzType","primary"]],template:function(e,t){1&e&&(b.Vc(0,be,1,2,"app-email-sent-redirect",0),b.Vc(1,he,1,2,"app-email-sent-fail-redirect",0),b.Vc(2,fe,24,18,"div",1)),2&e&&(b.rc("ngIf","emailSent"===t.state),b.Db(1),b.rc("ngIf","emailSentFail"===t.state),b.Db(1),b.rc("ngIf","initial"===t.state))},directives:[w.q,de,ue,M.a,I.F,I.v,Z.b,I.m,E.c,Z.c,E.a,Z.a,z.a,T.c,I.d,T.b,H,I.u,I.k,I.C,C.a,D.a],pipes:[$.a],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;margin:0 auto;text-align:center}h2[_ngcontent-%COMP%]{max-width:600px}h4[_ngcontent-%COMP%]{margin:7% auto;line-height:1.2;max-width:480px}form[_ngcontent-%COMP%]{margin-top:40px}[_nghost-%COMP%]     .ant-form-item-explain-error{margin-top:10px;font-size:15px}"]}),e})();var ve=n("nYR2");let _e=(()=>{class e{confirmPasswordValidator(){return e=>{const t=e.get("confirmPassword"),n=e.get("password");t.value?n.value!==t.value&&t.setErrors({confirm:!0,error:!0}):t.setErrors({required:!0})}}minimumLengthValidator(e){return e.value?e.value.length<8?{lengthNotReached:!0,error:!0}:null:{required:!0}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b.Nb({token:e,factory:e.\u0275fac}),e})();var Re=n("qAZ0");let Pe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Lb({type:e,selectors:[["app-password-reset-dialog"]],inputs:{alertMessage:"alertMessage",success:"success"},decls:4,vars:1,consts:[["name","success ? 'checkCircle': 'closeCircle'"]],template:function(e,t){1&e&&(b.Xb(0,"div"),b.Sb(1,"app-icons",0),b.Xb(2,"span"),b.Xc(3),b.Wb(),b.Wb()),2&e&&(b.Db(3),b.Yc(t.alertMessage))},directives:[J.a],styles:["div[_ngcontent-%COMP%]{text-align:center;margin:0 auto 20px;background:var(--primary-color) 0 0 no-repeat padding-box;padding:4%;z-index:1}div[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{border-radius:10px;opacity:1;font:normal normal 700 18px/24px Nunito;letter-spacing:0;color:var(--neutral-color)}span[_ngcontent-%COMP%]{margin-left:3%}"]}),e})();function Oe(e,t){1&e&&b.Sb(0,"nz-spin",3)}function Ee(e,t){if(1&e&&b.Sb(0,"app-password-reset-dialog",4),2&e){const e=b.ic();b.rc("success",e.success)("alertMessage",e.alertMessage)}}function Te(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"RESET_PASSWORD.MINIMUM_LENGTH_ALERT_MESSAGE")," "))}function Ie(e,t){if(1&e&&b.Vc(0,Te,3,3,"ng-container",18),2&e){const e=b.ic(2);let t=null;b.rc("ngIf",null==(t=e.resetPasswordForm.get("password"))?null:t.hasError("lengthNotReached"))}}function we(e,t){if(1&e){const e=b.Yb();b.Xb(0,"app-icons",19),b.ec("click",function(){b.Lc(e);const t=b.ic(2);return t.passwordVisible=!t.passwordVisible}),b.Wb()}}function Me(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"RESET_PASSWORD.PLEASE_CONFIRM_YOUR_PASSWORD")," "))}function Ce(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"RESET_PASSWORD.PASSWORDS_DO_NOT_MATCH")," "))}function ze(e,t){if(1&e&&(b.Vc(0,Me,3,3,"ng-container",18),b.Vc(1,Ce,3,3,"ng-container",18)),2&e){const e=t.$implicit;b.rc("ngIf",e.hasError("required")),b.Db(1),b.rc("ngIf",e.hasError("confirm"))}}function De(e,t){if(1&e){const e=b.Yb();b.Xb(0,"div"),b.Xb(1,"h1",5),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h2",5),b.Xc(5),b.jc(6,"translate"),b.Wb(),b.Xb(7,"h4",5),b.Xc(8),b.jc(9,"translate"),b.Wb(),b.Xb(10,"form",6),b.ec("ngSubmit",function(){return b.Lc(e),b.ic().onFormSubmit()}),b.Xb(11,"nz-form-item"),b.Xb(12,"nz-form-label",7),b.Xc(13),b.jc(14,"translate"),b.Wb(),b.Xb(15,"nz-form-control",8),b.Xb(16,"nz-input-group",9),b.Xb(17,"input",10),b.ec("ngModelChange",function(){return b.Lc(e),b.ic().updateConfirmPasswordValidator()}),b.Wb(),b.Wb(),b.Vc(18,Ie,1,1,"ng-template",null,11,b.Wc),b.Vc(20,we,1,0,"ng-template",null,12,b.Wc),b.Wb(),b.Wb(),b.Xb(22,"nz-form-item"),b.Xb(23,"nz-form-label",13),b.Xc(24),b.jc(25,"translate"),b.Wb(),b.Xb(26,"nz-form-control",8),b.Sb(27,"input",14),b.Vc(28,ze,2,2,"ng-template",null,15,b.Wc),b.Wb(),b.Wb(),b.Xb(30,"nz-form-item",16),b.Xb(31,"nz-form-control"),b.Xb(32,"button",17),b.Xc(33),b.jc(34,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&e){const e=b.Ic(19),t=b.Ic(21),n=b.Ic(29),i=b.ic();b.Jb("isDisabled",i.isAlertVisible),b.Db(2),b.Zc("",b.kc(3,14,"RESET_PASSWORD.TITLE")," "),b.Db(3),b.Yc(b.kc(6,16,"RESET_PASSWORD.CREATE_NEW")),b.Db(3),b.Yc(b.kc(9,18,"RESET_PASSWORD.MINIMUM_LENGTH_DISPLAY_MESSAGE")),b.Db(2),b.rc("nzLayout","vertical")("formGroup",i.resetPasswordForm),b.Db(3),b.Yc(b.kc(14,20,"RESET_PASSWORD.NEWPASS")),b.Db(2),b.rc("nzErrorTip",e),b.Db(1),b.rc("nzSuffix",t),b.Db(1),b.rc("type",i.passwordVisible?"text":"password"),b.Db(7),b.Zc("",b.kc(25,22,"RESET_PASSWORD.CNFPASS")," "),b.Db(2),b.rc("nzErrorTip",n),b.Db(7),b.Zc(" ",b.kc(34,24,"RESET_PASSWORD.CHANGE_MY_PASSWORD")," ")}}let ye=(()=>{class e{constructor(e,t,n,i,r,o){this.translationService=e,this.formBuilder=t,this.resetPasswordService=n,this.route=i,this.notification=r,this.resetPasswordValidator=o,this.isAlertVisible=!1}ngOnInit(){this.loading=!0,this.translationService.getMultiple("RESET_PASSWORD.OLD_AND_NEW_PASSWORD_CANNOT_BE_SAME","RESET_PASSWORD.PASSWORD_UPDATED_SUCCESSFULLY","RESET_PASSWORD.PASSWORD_UPDATE_FAILED","RESET_PASSWORD.ERROR_REDIRECT_MESSAGE_TITLE","RESET_PASSWORD.ERROR_REDIRECT_MESSAGE").subscribe(e=>this.translatedStrings=e),this.token=this.route.snapshot.queryParamMap.get("token"),this.token?this.resetPasswordService.validateResetToken(this.token).subscribe(e=>{200!=e.status?this.resetPasswordService.redirectToForgotPasswordExpiredPage():this.loading=!1},e=>{410==e.status?this.resetPasswordService.redirectToForgotPasswordExpiredPage():(this.showErrorNotificationForRedirect(),this.resetPasswordService.redirectToLoginPage())}):(this.showErrorNotificationForRedirect(),this.resetPasswordService.redirectToLoginPage()),this.initializeResetPasswordForm()}showErrorNotificationForRedirect(){this.notification.create("error",this.translatedStrings.get("RESET_PASSWORD.ERROR_REDIRECT_MESSAGE_TITLE"),this.translatedStrings.get("RESET_PASSWORD.ERROR_REDIRECT_MESSAGE"))}initializeResetPasswordForm(){this.resetPasswordForm=this.formBuilder.group({password:[null,[I.D.required,this.resetPasswordValidator.minimumLengthValidator]],confirmPassword:[null,[I.D.required]]},{validators:this.resetPasswordValidator.confirmPasswordValidator()})}onFormSubmit(){for(const e in this.resetPasswordForm.controls)this.resetPasswordForm.controls[e].markAsDirty(),this.resetPasswordForm.controls[e].updateValueAndValidity();this.resetPasswordForm.valid&&this.changePassword(this.resetPasswordForm.controls.password.value)}changePassword(e){this.resetPasswordService.changePassword(this.token,e).pipe(Object(ve.a)(()=>this.redirectToLoginAfterFiveSeconds())).subscribe(e=>{200==e.status?this.showSuccessMessage():this.showUpdateFailedMessage()},e=>{"Old and new passwords cannot be same!!!"==JSON.parse(e.error).message?this.showPasswordsAreSameMessage():this.showUpdateFailedMessage()})}updateConfirmPasswordValidator(){setTimeout(()=>this.resetPasswordForm.controls.confirmPassword.updateValueAndValidity())}redirectToLoginAfterFiveSeconds(){setTimeout(()=>this.resetPasswordService.redirectToLoginPage(),5e3)}showSuccessMessage(){this.success=!0,this.alertMessage=this.translatedStrings.get("RESET_PASSWORD.PASSWORD_UPDATED_SUCCESSFULLY"),this.isAlertVisible=!0}showUpdateFailedMessage(){this.success=!1,this.alertMessage=this.translatedStrings.get("RESET_PASSWORD.PASSWORD_UPDATE_FAILED"),this.isAlertVisible=!0}showPasswordsAreSameMessage(){this.success=!1,this.alertMessage=this.translatedStrings.get("RESET_PASSWORD.OLD_AND_NEW_PASSWORD_CANNOT_BE_SAME"),this.isAlertVisible=!0}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(l.a),b.Rb(I.h),b.Rb(le),b.Rb(h.a),b.Rb(p.b),b.Rb(_e))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-reset-password"]],decls:3,vars:3,consts:[["class","load-spinner","nzSimple","",4,"ngIf"],[3,"success","alertMessage",4,"ngIf"],[3,"isDisabled",4,"ngIf"],["nzSimple","",1,"load-spinner"],[3,"success","alertMessage"],["nz-typography",""],["nz-form","",3,"nzLayout","formGroup","ngSubmit"],["for","password"],[3,"nzErrorTip"],[3,"nzSuffix"],["id","password","nz-input","","type","password","id","password","formControlName","password",3,"type","ngModelChange"],["minimumLengthErrorMessage",""],["suffixTemplate",""],["for","confirmPassword"],["nz-input","","id","confirmPassword","type","password","formControlName","confirmPassword","id","confirmPassword"],["confirmPasswordErrorMessage",""],[2,"margin-bottom","8px"],["xlSize","","nz-button","","nzType","primary"],[4,"ngIf"],["name","passwordVisible ? 'eyeInvisible' : 'view'",3,"click"]],template:function(e,t){1&e&&(b.Vc(0,Oe,1,0,"nz-spin",0),b.Vc(1,Ee,1,2,"app-password-reset-dialog",1),b.Vc(2,De,35,26,"div",2)),2&e&&(b.rc("ngIf",t.loading),b.Db(1),b.rc("ngIf",t.isAlertVisible),b.Db(1),b.rc("ngIf",!t.loading))},directives:[w.q,Re.a,Pe,M.a,I.F,I.v,Z.b,I.m,E.c,Z.c,E.a,Z.d,Z.a,z.a,T.c,T.d,T.b,I.d,I.u,I.k,C.a,D.a,H,J.a],pipes:[$.a],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;margin:0 auto;text-align:center}.load-spinner[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]{text-align:center}.main-div[_ngcontent-%COMP%]{margin:0 auto}.blueEyeIcon[_ngcontent-%COMP%]{color:blue}.isDisabled[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;opacity:.7;color:#dedede}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-bottom:0}input[_ngcontent-%COMP%]{height:60px;background:var(--neutral-color) 0 0 no-repeat padding-box;border:1px solid var(--grey)}form[_ngcontent-%COMP%]{margin-top:5%}.ant-input-affix-wrapper[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"]}),e})();function Ae(e,t){1&e&&b.Sb(0,"app-email-sent-redirect",2),2&e&&b.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function We(e,t){1&e&&b.Sb(0,"app-email-sent-fail-redirect",2),2&e&&b.rc("secondsToRedirect",5)("redirectPage","authorization/login")}function Xe(e,t){1&e&&(b.Vb(0),b.Xc(1),b.jc(2,"translate"),b.Ub()),2&e&&(b.Db(1),b.Zc(" ",b.kc(2,1,"LOGIN.ENTER_EMAIL_ERROR")," "))}function Le(e,t){if(1&e&&b.Vc(0,Xe,3,3,"ng-container",1),2&e){const e=b.ic(2);let t=null;b.rc("ngIf",(null==(t=e.forgotPasswordForm.get("email"))?null:t.dirty)&&(null==(t=e.forgotPasswordForm.get("email"))?null:t.errors))}}function xe(e,t){if(1&e){const e=b.Yb();b.Xb(0,"div"),b.Xb(1,"h1",3),b.Xc(2),b.jc(3,"translate"),b.Wb(),b.Xb(4,"h2",3),b.Xc(5),b.jc(6,"translate"),b.Wb(),b.Xb(7,"form",4),b.ec("ngSubmit",function(){return b.Lc(e),b.ic().requestResetByMail()}),b.Xb(8,"nz-form-item"),b.Xb(9,"nz-form-control",5),b.Xb(10,"nz-input-group"),b.Xb(11,"input",6),b.ec("ngModelChange",function(t){return b.Lc(e),b.ic().resetMailId=t}),b.jc(12,"translate"),b.Wb(),b.Wb(),b.Vc(13,Le,1,1,"ng-template",null,7,b.Wc),b.Wb(),b.Wb(),b.Xb(15,"nz-form-item"),b.Xb(16,"nz-form-control",8),b.Xb(17,"button",9),b.Xc(18),b.jc(19,"translate"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(20,"button",10),b.ec("click",function(){return b.Lc(e),b.ic().redirectToLoginPage()}),b.Xb(21,"u"),b.Xc(22),b.jc(23,"translate"),b.Wb(),b.Wb(),b.Wb()}if(2&e){const e=b.Ic(14),t=b.ic();b.Db(2),b.Zc("",b.kc(3,8,"FORGOT_PASSWORD.LINK_EXPIRED_TITLE")," "),b.Db(3),b.Yc(b.kc(6,10,"FORGOT_PASSWORD.LINK_EXPIRED_MESSAGE")),b.Db(2),b.rc("formGroup",t.forgotPasswordForm),b.Db(2),b.rc("nzErrorTip",e),b.Db(2),b.sc("placeholder",b.kc(12,12,"FORGOT_PASSWORD.EMAIL_INPUT_PLACEHOLDER")),b.rc("ngModel",t.resetMailId),b.Db(7),b.Zc(" ",b.kc(19,14,"FORGOT_PASSWORD.RESEND_INSTRUCTIONS")," "),b.Db(4),b.Yc(b.kc(23,16,"FORGOT_PASSWORD.GO_TO_HOMEPAGE"))}}const Ne=[{path:"login",component:oe},{path:"logout",component:f},{path:"forgot-password",component:Se},{path:"forgot-password-link-expired",component:(()=>{class e{constructor(e,t,n){this.translationService=e,this.formBuilder=t,this.resetPasswordService=n}ngOnInit(){this.state="initial",this.translationService.getMultiple("FORGOT_PASSWORD.EMAIL_SENT_ALERT","FORGOT_PASSWORD.EMAIL_SENT_FAIL_ALERT").subscribe(e=>this.translatedStrings=e),this.initializeForgotPasswordForm()}initializeForgotPasswordForm(){this.forgotPasswordForm=this.formBuilder.group({email:[null,[I.D.email,I.D.required]]})}requestResetByMail(){for(const e in this.forgotPasswordForm.controls)this.forgotPasswordForm.controls[e].markAsDirty(),this.forgotPasswordForm.controls[e].updateValueAndValidity();this.forgotPasswordForm.valid&&this.resetPasswordService.requestResetByMail(this.resetMailId).subscribe(e=>{this.state=200==e.status?"emailSent":"emailSentFail"},e=>{this.state="emailSentFail"})}redirectToLoginPage(){this.resetPasswordService.redirectToLoginPage()}}return e.\u0275fac=function(t){return new(t||e)(b.Rb(l.a),b.Rb(I.h),b.Rb(le))},e.\u0275cmp=b.Lb({type:e,selectors:[["app-forgot-password-link-expired"]],decls:3,vars:3,consts:[[3,"secondsToRedirect","redirectPage",4,"ngIf"],[4,"ngIf"],[3,"secondsToRedirect","redirectPage"],["nz-typography",""],["nz-form","",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["xlSize","","formControlName","email","nz-input","","name","email","type","email","id","email","required","",3,"placeholder","ngModel","ngModelChange"],["errorMessage",""],[2,"margin-top","30px"],["xlSize","","nz-button","","nzType","primary"],["nz-button","","nzType","link","name","homePageLink",3,"click"]],template:function(e,t){1&e&&(b.Vc(0,Ae,1,2,"app-email-sent-redirect",0),b.Vc(1,We,1,2,"app-email-sent-fail-redirect",0),b.Vc(2,xe,24,18,"div",1)),2&e&&(b.rc("ngIf","emailSent"===t.state),b.Db(1),b.rc("ngIf","emailSentFail"===t.state),b.Db(1),b.rc("ngIf","initial"===t.state))},directives:[w.q,de,ue,M.a,I.F,I.v,Z.b,I.m,E.c,Z.c,E.a,Z.a,z.a,T.c,I.d,T.b,H,I.u,I.k,I.C,C.a,D.a],pipes:[$.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:630px;height:100%;margin:0 auto;text-align:center}h1[_ngcontent-%COMP%]{color:#ff3939!important}button[name=homePageLink][_ngcontent-%COMP%]{font:normal normal normal 20px/27px Nunito}form[_ngcontent-%COMP%]{margin-top:40px}"]}),e})()},{path:"reset-password",component:ye}];let ke=(()=>{class e{}return e.\u0275mod=b.Pb({type:e}),e.\u0275inj=b.Ob({factory:function(t){return new(t||e)},imports:[[h.k.forChild(Ne)],h.k]}),e})();var Fe=n("KZX/"),Ue=n("UFn0"),Ve=n("SHZf");let je=(()=>{class e{constructor(e){this.translationService=e,e.setLanguage()}}return e.\u0275mod=b.Pb({type:e}),e.\u0275inj=b.Ob({factory:function(t){return new(t||e)(b.bc(l.a))},providers:[_e],imports:[[w.c,Fe.a,Ue.a,I.o,I.B,ke,Ve.a.forRoot()]]}),e})()}}]);